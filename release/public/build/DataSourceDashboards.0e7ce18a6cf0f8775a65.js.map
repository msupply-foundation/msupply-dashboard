{"version":3,"file":"DataSourceDashboards.0e7ce18a6cf0f8775a65.js","mappings":"+0BAiCA,MAAMA,EAAqB,CACzBC,gBADyB,KAEzBC,eAFyB,KAGzBC,qBAHyB,KAIzBC,gBAAeA,EAAAA,IAGXC,GAAYC,EAAAA,EAAAA,UAnBlB,SAAyBC,EAAmBC,GAC1C,MAAMC,EAAeD,EAAME,MAAMC,OAAOC,IAExC,MAAO,CACLC,UAAUC,EAAAA,EAAAA,GAAYP,EAAMQ,SAAW,yBAAwBN,KAC/DO,WAAYT,EAAMU,QAAQD,WAC1BE,YAAYC,EAAAA,EAAAA,IAAcZ,EAAMa,YAAaX,GAC7CY,UAAWd,EAAMU,QAAQK,0BACzBb,aAAAA,KAWuCT,GAIpC,MAAMuB,UAA6BC,EAAAA,cAAqB,iDAOlD,CAACC,EAA4BC,KACtC,MAAM,WAAER,EAAF,gBAAcjB,GAAoB0B,KAAKnB,MACvCoB,EAAY,CAChBC,SAAUJ,EAAUI,SACpBC,KAAML,EAAUK,KAChBJ,UAAAA,EACAK,OAAQ,IAGNb,GACFU,EAAKG,OAAOC,KAAK,CACfC,KAAM,IACNC,KAAM,aACNL,SAAUX,EAAWgB,KACrBC,MAAOjB,EAAWe,OAItBhC,EAAgB2B,EAAMH,EAAUW,UAzB2B,mBA4BjDX,IACVE,KAAKnB,MAAMJ,gBAAgBqB,EAAUY,gBA5BhB,0BACrB,MAAM,eAAEnC,EAAF,aAAkBO,GAAiBkB,KAAKnB,YACxCN,EAAeO,GACrBkB,KAAKnB,MAAML,uBA4BbmC,SACE,MAAM,WAAEtB,EAAF,SAAcH,EAAd,UAAwBQ,GAAcM,KAAKnB,MACjD,OACE,SAAC,IAAD,CAAMK,SAAUA,EAAhB,UACE,SAAC,aAAD,CAAeQ,UAAWA,EAA1B,UACE,SAAC,IAAD,CACEL,WAAYA,EACZuB,SAAU,CAACd,EAAWC,IAAcC,KAAKY,SAASd,EAAWC,GAC7Dc,SAAWf,GAAcE,KAAKa,SAASf,UAQnD,QAAepB,EAAUkB","sources":["webpack://grafana/./public/app/features/datasources/DataSourceDashboards.tsx"],"sourcesContent":["// Libraries\nimport React, { PureComponent } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\n// Components\nimport Page from 'app/core/components/Page/Page';\nimport DashboardTable from './DashboardsTable';\n\n// Actions & Selectors\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { loadDataSource } from './state/actions';\nimport { loadPluginDashboards } from '../plugins/state/actions';\nimport { importDashboard, removeDashboard } from '../dashboard/state/actions';\nimport { getDataSource } from './state/selectors';\n\n// Types\nimport { PluginDashboard, StoreState } from 'app/types';\nimport { GrafanaRouteComponentProps } from 'app/core/navigation/types';\n\nexport interface OwnProps extends GrafanaRouteComponentProps<{ uid: string }> {}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps) {\n  const dataSourceId = props.match.params.uid;\n\n  return {\n    navModel: getNavModel(state.navIndex, `datasource-dashboards-${dataSourceId}`),\n    dashboards: state.plugins.dashboards,\n    dataSource: getDataSource(state.dataSources, dataSourceId),\n    isLoading: state.plugins.isLoadingPluginDashboards,\n    dataSourceId,\n  };\n}\n\nconst mapDispatchToProps = {\n  importDashboard,\n  loadDataSource,\n  loadPluginDashboards,\n  removeDashboard,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport type Props = OwnProps & ConnectedProps<typeof connector>;\n\nexport class DataSourceDashboards extends PureComponent<Props> {\n  async componentDidMount() {\n    const { loadDataSource, dataSourceId } = this.props;\n    await loadDataSource(dataSourceId);\n    this.props.loadPluginDashboards();\n  }\n\n  onImport = (dashboard: PluginDashboard, overwrite: boolean) => {\n    const { dataSource, importDashboard } = this.props;\n    const data: any = {\n      pluginId: dashboard.pluginId,\n      path: dashboard.path,\n      overwrite,\n      inputs: [],\n    };\n\n    if (dataSource) {\n      data.inputs.push({\n        name: '*',\n        type: 'datasource',\n        pluginId: dataSource.type,\n        value: dataSource.name,\n      });\n    }\n\n    importDashboard(data, dashboard.title);\n  };\n\n  onRemove = (dashboard: PluginDashboard) => {\n    this.props.removeDashboard(dashboard.importedUri);\n  };\n\n  render() {\n    const { dashboards, navModel, isLoading } = this.props;\n    return (\n      <Page navModel={navModel}>\n        <Page.Contents isLoading={isLoading}>\n          <DashboardTable\n            dashboards={dashboards}\n            onImport={(dashboard, overwrite) => this.onImport(dashboard, overwrite)}\n            onRemove={(dashboard) => this.onRemove(dashboard)}\n          />\n        </Page.Contents>\n      </Page>\n    );\n  }\n}\n\nexport default connector(DataSourceDashboards);\n"],"names":["mapDispatchToProps","importDashboard","loadDataSource","loadPluginDashboards","removeDashboard","connector","connect","state","props","dataSourceId","match","params","uid","navModel","getNavModel","navIndex","dashboards","plugins","dataSource","getDataSource","dataSources","isLoading","isLoadingPluginDashboards","DataSourceDashboards","PureComponent","dashboard","overwrite","this","data","pluginId","path","inputs","push","name","type","value","title","importedUri","render","onImport","onRemove"],"sourceRoot":""}