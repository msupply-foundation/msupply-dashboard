{"version":3,"file":"FolderPermissions.e65e3aa10981aa98e7a1.js","mappings":"yqCAuBA,MASMA,EAAqB,CACzBC,eADyB,KAEzBC,qBAFyB,IAGzBC,uBAHyB,KAIzBC,uBAJyB,KAKzBC,oBAAmBA,EAAAA,IAGfC,GAAYC,EAAAA,EAAAA,UAjBM,CAACC,EAAmBC,KAC1C,MAAMC,EAAMD,EAAME,MAAMC,OAAOF,IAC/B,MAAO,CACLG,UAAUC,EAAAA,EAAAA,GAAYN,EAAMO,SAAW,sBAAqBL,KAAOM,EAAAA,EAAAA,GAAc,IACjFC,UAAWP,EACXQ,OAAQV,EAAMU,UAYyBlB,GAQpC,MAAMmB,UAA0BC,EAAAA,cACrCC,YAAYZ,GACVa,MAAMb,GADkB,+BAaH,KACrBc,KAAKC,SAAS,CAAEC,UAAU,OAdF,uBAiBVC,IACdH,KAAKd,MAAML,uBAAuBsB,MAlBV,8BAqBJ,CAACA,EAAoBC,KACzCJ,KAAKd,MAAMN,uBAAuBuB,EAAMC,MAtBhB,0BAyBPC,GACVL,KAAKd,MAAMJ,oBAAoBuB,KA1Bd,gCA6BF,KACtBL,KAAKC,SAAS,CAAEC,UAAU,OA3B1BF,KAAKf,MAAQ,CACXiB,UAAU,GAIdI,oBACEN,KAAKd,MAAMR,eAAesB,KAAKd,MAAMQ,WACrCM,KAAKd,MAAMP,qBAAqBqB,KAAKd,MAAMQ,WAuB7Ca,SACE,MAAM,SAAEjB,EAAF,OAAYK,GAAWK,KAAKd,OAC5B,SAAEgB,GAAaF,KAAKf,MAE1B,GAAkB,IAAdU,EAAOa,GACT,OACE,SAAC,IAAD,CAAMlB,SAAUA,EAAhB,gBACE,SAAC,aAAD,CAAemB,WAAW,EAA1B,UACE,yBAMR,MAAMC,EAAa,CAAEC,MAAOhB,EAAOgB,MAAOC,IAAKjB,EAAOiB,IAAKJ,GAAIb,EAAOa,IAEtE,OACE,SAAC,IAAD,CAAMlB,SAAUA,EAAhB,UACE,UAAC,aAAD,YACE,iBAAKuB,UAAU,kBAAf,iBACE,eAAIA,UAAU,mBAAd,iCADF,OAEE,SAAC,EAAAC,QAAD,CAASC,UAAU,OAAOC,SAAS,SAAC,IAAD,IAAnC,UACE,SAAC,EAAAC,KAAD,CAAMJ,UAAU,wCAAwCK,KAAK,uBAHjE,OAKE,gBAAKL,UAAU,8BACf,SAAC,EAAAM,OAAD,CAAQN,UAAU,aAAaO,QAASpB,KAAKqB,qBAAsBC,SAAUpB,EAA7E,gCAIF,SAAC,IAAD,CAAWqB,GAAIrB,EAAf,UACE,SAAC,IAAD,CAAesB,gBAAiBxB,KAAKwB,gBAAiBC,SAAUzB,KAAK0B,2BAEvE,SAAC,IAAD,CACEC,MAAOhC,EAAOiC,YACdC,aAAc7B,KAAK6B,aACnBC,oBAAqB9B,KAAK8B,oBAC1BC,YAAY,EACZrB,WAAYA,UAQxB,QAAe3B,EAAUa","sources":["webpack://grafana/./public/app/features/folders/FolderPermissions.tsx"],"sourcesContent":["import React, { PureComponent } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\nimport Page from 'app/core/components/Page/Page';\nimport { Tooltip, Icon, Button } from '@grafana/ui';\nimport { SlideDown } from 'app/core/components/Animations/SlideDown';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { StoreState } from 'app/types';\nimport { DashboardAcl, PermissionLevel, NewDashboardAclItem } from 'app/types/acl';\nimport {\n  getFolderByUid,\n  getFolderPermissions,\n  updateFolderPermission,\n  removeFolderPermission,\n  addFolderPermission,\n} from './state/actions';\nimport { getLoadingNav } from './state/navModel';\nimport PermissionList from 'app/core/components/PermissionList/PermissionList';\nimport AddPermission from 'app/core/components/PermissionList/AddPermission';\nimport PermissionsInfo from 'app/core/components/PermissionList/PermissionsInfo';\nimport { GrafanaRouteComponentProps } from 'app/core/navigation/types';\n\nexport interface OwnProps extends GrafanaRouteComponentProps<{ uid: string }> {}\n\nconst mapStateToProps = (state: StoreState, props: OwnProps) => {\n  const uid = props.match.params.uid;\n  return {\n    navModel: getNavModel(state.navIndex, `folder-permissions-${uid}`, getLoadingNav(1)),\n    folderUid: uid,\n    folder: state.folder,\n  };\n};\n\nconst mapDispatchToProps = {\n  getFolderByUid,\n  getFolderPermissions,\n  updateFolderPermission,\n  removeFolderPermission,\n  addFolderPermission,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport type Props = OwnProps & ConnectedProps<typeof connector>;\n\nexport interface State {\n  isAdding: boolean;\n}\n\nexport class FolderPermissions extends PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      isAdding: false,\n    };\n  }\n\n  componentDidMount() {\n    this.props.getFolderByUid(this.props.folderUid);\n    this.props.getFolderPermissions(this.props.folderUid);\n  }\n\n  onOpenAddPermissions = () => {\n    this.setState({ isAdding: true });\n  };\n\n  onRemoveItem = (item: DashboardAcl) => {\n    this.props.removeFolderPermission(item);\n  };\n\n  onPermissionChanged = (item: DashboardAcl, level: PermissionLevel) => {\n    this.props.updateFolderPermission(item, level);\n  };\n\n  onAddPermission = (newItem: NewDashboardAclItem) => {\n    return this.props.addFolderPermission(newItem);\n  };\n\n  onCancelAddPermission = () => {\n    this.setState({ isAdding: false });\n  };\n\n  render() {\n    const { navModel, folder } = this.props;\n    const { isAdding } = this.state;\n\n    if (folder.id === 0) {\n      return (\n        <Page navModel={navModel}>\n          <Page.Contents isLoading={true}>\n            <span />\n          </Page.Contents>\n        </Page>\n      );\n    }\n\n    const folderInfo = { title: folder.title, url: folder.url, id: folder.id };\n\n    return (\n      <Page navModel={navModel}>\n        <Page.Contents>\n          <div className=\"page-action-bar\">\n            <h3 className=\"page-sub-heading\">Folder Permissions</h3>\n            <Tooltip placement=\"auto\" content={<PermissionsInfo />}>\n              <Icon className=\"icon--has-hover page-sub-heading-icon\" name=\"question-circle\" />\n            </Tooltip>\n            <div className=\"page-action-bar__spacer\" />\n            <Button className=\"pull-right\" onClick={this.onOpenAddPermissions} disabled={isAdding}>\n              Add Permission\n            </Button>\n          </div>\n          <SlideDown in={isAdding}>\n            <AddPermission onAddPermission={this.onAddPermission} onCancel={this.onCancelAddPermission} />\n          </SlideDown>\n          <PermissionList\n            items={folder.permissions}\n            onRemoveItem={this.onRemoveItem}\n            onPermissionChanged={this.onPermissionChanged}\n            isFetching={false}\n            folderInfo={folderInfo}\n          />\n        </Page.Contents>\n      </Page>\n    );\n  }\n}\n\nexport default connector(FolderPermissions);\n"],"names":["mapDispatchToProps","getFolderByUid","getFolderPermissions","updateFolderPermission","removeFolderPermission","addFolderPermission","connector","connect","state","props","uid","match","params","navModel","getNavModel","navIndex","getLoadingNav","folderUid","folder","FolderPermissions","PureComponent","constructor","super","this","setState","isAdding","item","level","newItem","componentDidMount","render","id","isLoading","folderInfo","title","url","className","Tooltip","placement","content","Icon","name","Button","onClick","onOpenAddPermissions","disabled","in","onAddPermission","onCancel","onCancelAddPermission","items","permissions","onRemoveItem","onPermissionChanged","isFetching"],"sourceRoot":""}