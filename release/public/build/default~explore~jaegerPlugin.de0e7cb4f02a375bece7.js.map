{"version":3,"sources":["webpack:///./node_modules/combokeys/Combokeys/prototype/dom-event.js","webpack:///./node_modules/copy-to-clipboard/index.js","webpack:///./node_modules/react-icons/lib/io/network.js","webpack:///./packages/jaeger-ui-components/src/utils/filter-spans.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/resetSequences.js","webpack:///./node_modules/react-icons/lib/io/arrow-right-a.js","webpack:///./packages/jaeger-ui-components/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","webpack:///./node_modules/combokeys/helpers/special-aliases.js","webpack:///./packages/jaeger-ui-components/src/types/index.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/bindSingle.js","webpack:///./packages/jaeger-ui-components/node_modules/react-is/index.js","webpack:///./node_modules/combokeys/Combokeys/prototype/unbind.js","webpack:///./node_modules/combokeys/Combokeys/prototype/addEvents.js","webpack:///./node_modules/json-markup/index.js","webpack:///./packages/jaeger-ui-components/src/utils/DraggableManager/index.tsx","webpack:///./packages/jaeger-ui-components/src/common/NewWindowIcon.tsx","webpack:///./node_modules/combokeys/Combokeys/index.js","webpack:///./node_modules/combokeys/helpers/preventDefault.js","webpack:///./node_modules/react-icons/lib/io/chevron-right.js","webpack:///./node_modules/combokeys/Combokeys/prototype/resetSequenceTimer.js","webpack:///./node_modules/combokeys/Combokeys/prototype/reset.js","webpack:///./packages/jaeger-ui-components/src/utils/DraggableManager/DraggableManager.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/stopCallback.js","webpack:///./packages/jaeger-ui-components/src/constants/default-config.tsx","webpack:///./packages/jaeger-ui-components/src/utils/config/get-config.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineHeaderRow/TimelineCollapser.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineHeaderRow/TimelineColumnResizer.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineHeaderRow/TimelineViewingLayer.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/utils.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/Ticks.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineRow.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineHeaderRow/TimelineHeaderRow.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/ListView/Positions.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/ListView/index.tsx","webpack:///./packages/jaeger-ui-components/src/url/externalLinkContext.tsx","webpack:///./packages/jaeger-ui-components/src/url/ReferenceLink.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/ReferencesButton.tsx","webpack:///./packages/jaeger-ui-components/src/utils/span-ancestor-ids.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanTreeOffset.tsx","webpack:///./packages/jaeger-ui-components/src/common/CopyIcon.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/KeyValuesTable.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianKeyValues.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianKeyValues.markers.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianLogs.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanBar.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanBarRow.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/TextList.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianText.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianReferences.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/index.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetailRow.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/VirtualizedTraceView.tsx","webpack:///./packages/jaeger-ui-components/src/keyboard-mappings.tsx","webpack:///./packages/jaeger-ui-components/src/keyboard-shortcuts.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/index.tsx","webpack:///./node_modules/combokeys/helpers/characterFromEvent.js","webpack:///./node_modules/react-icons/lib/md/file-upload.js","webpack:///./node_modules/combokeys/Combokeys/prototype/fireCallback.js","webpack:///./node_modules/toggle-selection/index.js","webpack:///./node_modules/combokeys/helpers/eventModifiers.js","webpack:///./node_modules/combokeys/helpers/stopPropagation.js","webpack:///./node_modules/recompose/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","webpack:///./node_modules/combokeys/Combokeys/prototype/getReverseMap.js","webpack:///./packages/jaeger-ui-components/src/common/LabeledList.tsx","webpack:///./packages/jaeger-ui-components/src/utils/DraggableManager/EUpdateTypes.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/trigger.js","webpack:///./node_modules/combokeys/helpers/isModifier.js","webpack:///./node_modules/recompose/es/Recompose.js","webpack:///./packages/jaeger-ui-components/src/selectors/process.js","webpack:///./packages/jaeger-ui-components/src/selectors/span.js","webpack:///./packages/jaeger-ui-components/src/utils/TreeNode.js","webpack:///./packages/jaeger-ui-components/src/selectors/trace.js","webpack:///./packages/jaeger-ui-components/src/utils/sort.js","webpack:///./packages/jaeger-ui-components/src/model/transform-trace-data.tsx","webpack:///./node_modules/fuzzy/lib/fuzzy.js","webpack:///./packages/jaeger-ui-components/src/uiElementsContext.tsx","webpack:///./packages/jaeger-ui-components/src/index.ts","webpack:///./packages/jaeger-ui-components/src/utils/color-generator.tsx","webpack:///./node_modules/react-icon-base/lib/index.js","webpack:///./node_modules/combokeys/Combokeys/prototype/getMatches.js","webpack:///./node_modules/combokeys/Combokeys/reset.js","webpack:///./node_modules/react-icons/lib/io/ios-arrow-down.js","webpack:///./node_modules/combokeys/Combokeys/prototype/detach.js","webpack:///./packages/jaeger-ui-components/src/Theme.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/DetailState.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/bindMultiple.js","webpack:///./node_modules/react-icons/lib/io/alert.js","webpack:///./packages/jaeger-ui-components/node_modules/react-is/cjs/react-is.production.min.js","webpack:///./node_modules/combokeys/helpers/keysFromString.js","webpack:///./node_modules/combokeys/Combokeys/prototype/handleKey.js","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/CanvasSpanGraph.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/render-into-canvas.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/TickLabels.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/GraphTicks.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/Scrubber.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/ViewingLayer.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/index.tsx","webpack:///./packages/jaeger-ui-components/src/common/UiFindInput.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/TracePageSearchBar.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/TracePageSearchBar.markers.tsx","webpack:///./packages/jaeger-ui-components/src/common/BreakableText.tsx","webpack:///./packages/jaeger-ui-components/src/common/LoadingIndicator.tsx","webpack:///./packages/jaeger-ui-components/src/common/TraceName.tsx","webpack:///./packages/jaeger-ui-components/src/model/trace-viewer.ts","webpack:///./node_modules/lru-memoize/dist/lru-memoize.es.js","webpack:///./packages/jaeger-ui-components/src/model/span.tsx","webpack:///./packages/jaeger-ui-components/src/model/link-patterns.tsx","webpack:///./packages/jaeger-ui-components/src/common/ExternalLinks.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/TracePageHeader.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/index.tsx","webpack:///./node_modules/react-icons/lib/io/ios-arrow-right.js","webpack:///./node_modules/combokeys/helpers/special-keys-map.js","webpack:///./node_modules/combokeys/Combokeys/prototype/bindSequence.js","webpack:///./node_modules/combokeys/Combokeys/prototype/modifiersMatch.js","webpack:///./packages/jaeger-ui-components/src/utils/date.tsx","webpack:///./packages/jaeger-ui-components/src/utils/number.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/handleKeyEvent.js","webpack:///./node_modules/combokeys/helpers/shift-map.js","webpack:///./node_modules/combokeys/helpers/special-characters-map.js","webpack:///./node_modules/combokeys/Combokeys/prototype/getKeyInfo.js","webpack:///./node_modules/react-icons/lib/md/keyboard-arrow-right.js","webpack:///./node_modules/fbjs/lib/shallowEqual.js","webpack:///./node_modules/react-icons/lib/io/android-open.js","webpack:///./node_modules/deep-freeze/index.js","webpack:///./packages/jaeger-ui-components/src/constants/index.tsx","webpack:///./packages/jaeger-ui-components/src/uberUtilityStyles.ts","webpack:///./node_modules/change-emitter/lib/index.js","webpack:///./node_modules/react-icons/lib/io/android-locate.js","webpack:///./node_modules/combokeys/Combokeys/prototype/bind.js","webpack:///./node_modules/combokeys/Combokeys/prototype/pickBestAction.js"],"names":["on","element","event","callback","capture","addEventListener","attachEvent","call","module","exports","off","removeEventListener","detachEvent","deselectCurrent","clipboardToIE11Formatting","text","options","debug","message","reselectPrevious","range","selection","mark","success","document","createRange","getSelection","createElement","textContent","style","all","position","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","e","stopPropagation","format","preventDefault","clipboardData","console","warn","window","clearData","setData","onCopy","body","appendChild","selectNodeContents","addRange","execCommand","Error","err","error","copyKey","test","navigator","userAgent","replace","prompt","removeRange","removeAllRanges","removeChild","Object","defineProperty","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","_react2","_interopRequireDefault","_reactIconBase2","obj","__esModule","default","props","viewBox","d","filterSpans","textFilter","spans","includeFilters","excludeKeys","split","filter","Boolean","forEach","w","push","substr","toLowerCase","isTextInFilters","filters","some","includes","isTextInKeyValues","kvs","kv","toString","Set","span","operationName","process","serviceName","tags","logs","log","fields","spanID","map","doNotReset","activeSequences","this","sequenceLevels","nextExpectedAction","reactIs","require","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","displayName","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","type","KNOWN_STATICS","name","caller","callee","arity","MEMO_STATICS","compare","TYPE_STATICS","getStatics","component","isMemo","ForwardRef","render","Memo","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","keys","concat","targetStatics","sourceStatics","descriptor","platform","combination","action","sequenceName","level","directMap","info","sequence","bindSequence","getKeyInfo","callbacks","getMatches","modifiers","seq","combo","bind","eventHandler","Stylize","styleFile","cssClass","objRule","str","rule","escape","doc","indent","list","start","end","fn","out","slice","visit","undefined","Array","isArray","toISOString","getStyles","createStyle","NewWindowIconLarge","css","NewWindowIcon","isLarge","className","rest","styles","cls","cx","Combokeys","constructor","storeInstancesGlobally","resetTimer","ignoreNextKeyup","ignoreNextKeypress","addEvents","instances","bindMultiple","unbind","trigger","reset","stopCallback","handleKey","bindSingle","pickBestAction","getReverseMap","resetSequences","fireCallback","resetSequenceTimer","detach","REVERSE_MAP","returnValue","self","clearTimeout","setTimeout","DraggableManager","getBounds","tag","resetBoundsOnResize","_bounds","_isDragging","_onMouseEnter","_onMouseLeave","_onMouseMove","_onDragStart","_onDragMove","_onDragEnd","_resetBoundsOnResize","handleMouseEnter","handleMouseMove","handleMouseLeave","handleMouseDown","resetBounds","_handleMinorMouseEvent","button","clientX","eventType","handler","EUpdateTypes","MouseEnter","MouseLeave","MouseMove","x","_getPosition","manager","_handleDragEvent","_get","DragStart","DragMove","_stopDragging","DragEnd","onMouseEnter","onMouseLeave","onMouseMove","onDragStart","onDragMove","onDragEnd","_getBounds","clientXLeft","maxValue","minValue","width","isDragging","dispose","indexOf","tagName","isContentEditable","deepFreeze","archiveEnabled","dependencies","dagMaxNumServices","FALLBACK_DAG_MAX_NUM_SERVICES","menuEnabled","linkPatterns","menu","label","items","url","search","maxLookback","maxLimit","tracking","gaID","trackErrors","getConfigValue","path","defaultConfig","TimelineCollapser","onExpandAll","onExpandOne","onCollapseAll","onCollapseOne","data-test-id","tooltip","size","tooltipPlacement","onClick","TimelineColumnResizer","wrapper","dragger","draggerDragging","draggerDraggingLeft","draggerDraggingRight","gripIcon","gripIconDragging","React","super","state","_dragManager","_rootElm","_setRootElm","elm","_getDraggingBounds","left","getBoundingClientRect","min","max","_handleDragUpdate","setState","dragPosition","_handleDragEnd","onChange","componentWillUnmount","draggerStyle","columnResizeHandleHeight","gripStyle","isDraggingLeft","isDraggingRight","Math","right","height","ref","aria-hidden","onMouseDown","TimelineViewingLayer","TimelineViewingLayerCursorGuide","TimelineViewingLayerDragged","TimelineViewingLayerDraggedDraggingLeft","TimelineViewingLayerDraggedDraggingRight","TimelineViewingLayerDraggedShiftDrag","TimelineViewingLayerDraggedReframeDrag","TimelineViewingLayerFullOverlay","mapFromViewSubRange","viewStart","viewEnd","mapToViewSubRange","getMarkers","from","to","isShift","layout","isOutOfView","getNextViewLayout","Reflect","has","_draggerReframe","_root","_setRoot","_handleReframeMouseMove","viewRangeTime","current","cursor","updateNextViewRangeTime","_handleReframeMouseLeave","_handleReframeDragUpdate","reframe","shift","update","anchor","_handleReframeDragEnd","updateViewRangeTime","UNSAFE_componentWillReceiveProps","nextProps","boundsInvalidator","shiftEnd","shiftStart","cusrorPosition","createViewedBoundsFunc","viewRange","duration","viewMin","viewWindow","spanHasTag","isClientSpan","isServerSpan","isErrorBool","isErrorStr","isErrorSpan","theme","Ticks","TicksTick","autoColor","TicksTickLabel","TicksTickLabelEndAnchor","endTime","numTicks","showLabels","startTime","labels","viewingDuration","durationAtTick","formatDuration","useTheme","ticks","portion","flexRow","TimelineRow","children","TimelineRowCell","widthPercent","mergedStyle","flexBasis","maxWidth","ubRelative","Cell","TimelineHeaderRow","TimelineHeaderRowTitle","TimelineHeaderWrapper","nameColumnWidth","onColummWidthChange","ubFlex","ubPx2","Positions","bufferLen","dataLen","heights","lastI","ys","profileData","dataLength","calcHeights","heightGetter","forcedLastI","_max","h","calcYs","yValue","confirmHeight","_i","chg","findFloorIndex","imin","imax","getRowPosition","index","y","getEstimatedHeight","known","DEFAULT_INITIAL_DRAW","ListView","_yPositions","_knownHeights","_startIndexDrawn","_endIndexDrawn","_startIndex","_endIndex","_viewHeight","_scrollTop","_isScrolledOrResized","_htmlTopOffset","_windowScrollListenerAdded","_htmlElm","_wrapperElm","_itemHolderElm","getViewHeight","getBottomVisibleIndex","bottomY","_getHeight","getTopVisibleIndex","_onScroll","requestAnimationFrame","_positionList","_calcViewIndexes","maxStart","viewBufferMin","minEnd","forceUpdate","_initWrapper","windowScroller","clientHeight","_initItemHolder","_scanItemHeights","getIndexFromKey","lowDirtyKey","highDirtyKey","isDirty","nodes","childNodes","node","itemKey","getAttribute","observed","firstElementChild","get","set","getKeyFromIndex","itemHeightGetter","Map","documentElement","componentDidMount","scrollTop","scrollElement","componentDidUpdate","_isViewChanged","useRoot","innerHeight","scrollY","yStart","yEnd","initialDraw","itemRenderer","viewBuffer","attrs","wrapperProps","onScroll","overflowY","scrollerStyle","margin","padding","itemsWrapperClassName","ExternalLinkContext","createContext","ReferenceLink","reference","focusSpan","otherProps","role","Consumer","createLinkToExternalSpan","href","traceID","rel","MultiParent","TraceRefLink","ReferencesButton","PureComponent","referencesList","references","tooltipText","tooltipProps","arrowPointAtCenter","mouseLeaveDelay","placement","title","overlayClassName","overlay","getFirstAncestor","_find","refType","SpanTreeOffset","SpanTreeOffsetParent","indentGuide","indentGuideActive","iconWrapper","UnthemedSpanTreeOffset","ancestorIds","ancestorId","relatedTarget","HTMLSpanElement","removeHoverIndentGuideId","addHoverIndentGuideId","ancestorIDs","spanAncestorIds","reverse","childrenVisible","showChildrenIcon","hasChildren","icon","hoverIndentGuideIds","data-ancestor-id","withTheme","CopyIcon","hasCopied","handleClick","copy","copyText","handleTooltipVisibilityChange","visible","onVisibleChange","tooltipTitle","htmlType","KeyValueTable","row","keyColumn","copyColumn","linkIcon","jsonObjectOrArrayStartRegex","parseIfComplexJson","JSON","parse","_","LinkValue","linkValueList","links","KeyValuesTable","data","linksGetter","uWidth100","markup","__html","jsonMarkup","jsonTable","ubInlineBlock","dangerouslySetInnerHTML","valueMarkup","stringify","header","headerEmpty","headerHighContrast","emptyIcon","summary","summaryItem","summaryLabel","summaryDelim","KeyValuesSummary","item","String","AccordianKeyValues","highContrast","interactive","isOpen","onToggle","isEmpty","iconCls","uAlignIcon","arrow","headerProps","uTxEllipsis","data-test","AccordianLogs","AccordianLogsHeader","AccordianLogsContent","AccordianLogsFooter","openedItems","onItemToggle","timestamp","HeaderComponent","_sortBy","ubMb1","bar","rpc","logMarker","toPercent","toFixed","compose","withState","shortLabel","withProps","setLabel","longLabel","setLongLabel","setShortLabel","onlyUpdateForKeys","getViewedBounds","color","traceStartTime","labelClassName","logGroups","_groupBy","posPercent","round","onMouseOver","aria-label","background","positionKey","content","nameWrapper","nameWrapperMatchingFilter","nameColumn","endpointName","view","viewExpanded","viewExpandedAndMatchingFilter","rowClippingLeft","rowClippingRight","rowExpanded","rowMatchingFilter","rowExpandedAndMatchingFilter","nameDetailExpanded","svcName","svcNameChildrenCollapsed","errorIcon","rpcColorMarker","labelRight","labelLeft","UnthemedSpanBarRow","_detailToggle","onDetailToggled","_childrenToggle","onChildrenToggled","columnDivision","isChildrenExpanded","isDetailExpanded","isMatchingFilter","showErrorIcon","clippingLeft","clippingRight","createSpanLink","isParent","viewBounds","labelDetail","hintClassName","aria-checked","borderColor","tabIndex","backgroundColor","errorIconColor","link","marginRight","ctrlKey","metaKey","shiftKey","subsidiarilyReferencedBy","TextList","List","DefaultTextComponent","AccordianText","headerClassName","TextComponent","accordianKeyValuesStyles","getAccordianKeyValuesStyles","ReferencesList","itemContent","debugInfo","debugLabel","References","data-label","AccordianReferences","divider","dividerVertical","debugValue","AccordianWarnings","AccordianWarningsHeader","AccordianWarningsHeaderOpen","AccordianWarningsLabel","Textarea","SpanDetail","detailState","logItemToggle","logsToggle","processToggle","tagsToggle","warningsToggle","stackTracesToggle","referencesToggle","isTagsOpen","isProcessOpen","logsState","isWarningsOpen","isReferencesOpen","isStackTracesOpen","relativeStartTime","warnings","stackTraces","overviewItems","deepLinkCopyText","location","origin","pathname","ubItemsCenter","ubFlexAuto","ubM0","LabeledList","ubTxRightAlign","dividerClassName","buttonProps","ubMy1","logItem","textComponentProps","stackTrace","join","readOnly","cols","rows","expandedAccent","infoWrapper","UnthemedSpanDetailRow","_linksGetter","itemIndex","overflow","borderTopColor","rowsWrapper","DEFAULT_HEIGHTS","generateRowStates","childrenHiddenIDs","detailStates","collapseDepth","rowStates","depth","hidden","isDetail","spanIndex","getClipping","currentViewRange","zoomStart","zoomEnd","UnthemedVirtualizedTraceView","clipping","listView","getViewRange","currentViewRangeTime","getSearchedSpanIDs","findMatchesIDs","getCollapsedChildren","mapRowIndexToSpanIndex","mapSpanIndexToRowIndex","setListView","isChanged","registerAccessors","getAccessors","parts","_spanID","_isDetail","getRowHeight","renderRow","renderSpanDetailRow","renderSpanBarRow","setTrace","trace","uiFind","shouldComponentUpdate","nextPropKeys","UNSAFE_componentWillUpdate","nextViewRangeTime","nextHiddenIDs","nextDetailStates","nextRegisterAccessors","nextTrace","shouldScrollToFirstUiFindMatch","clearShouldScrollToFirstUiFindMatch","scrollToFirstVisibleSpan","lv","getBottomRowIndexVisible","getTopRowIndexVisible","childrenToggle","detailToggle","spanNameColumnWidth","getColorByKey","isCollapsed","parentSpanIndex","spanContainsErredSpan","rpcSpan","spanChildDepth","findServerChildSpan","rpcViewBounds","SpanBarRow","detailLogItemToggle","detailLogsToggle","detailProcessToggle","detailReferencesToggle","detailWarningsToggle","detailStackTracesToggle","detailTagsToggle","zIndex","SpanDetailRow","keyboardMappings","scrollPageDown","binding","scrollPageUp","scrollToNextVisibleSpan","scrollToPrevVisibleSpan","panLeft","panLeftFast","panRight","panRightFast","zoomIn","zoomInFast","zoomOut","zoomOutFast","collapseAll","expandAll","collapseOne","expandOne","searchSpans","clearSearch","instance","getInstance","local","TraceTimelineViewer","UnthemedTraceTimelineViewer","inst","keysHandler","mergeShortcuts","setSpanNameColumnWidth","traceTimeline","Provider","time","VirtualizedTraceView","SPECIAL_KEYS_MAP","SPECIAL_CHARACTERS_MAP","character","fromCharCode","which","srcElement","rangeCount","active","activeElement","ranges","getRangeAt","toUpperCase","blur","focus","altKey","cancelBubble","LabeledListItem","LabeledListLabel","isLight","classCallCheck","Constructor","TypeError","inherits","subClass","superClass","create","enumerable","writable","configurable","setPrototypeOf","__proto__","possibleConstructorReturn","ReferenceError","createEagerElementUtil","hasKey","isReferentiallyTransparent","Component$$1","isClassComponent","isReferentiallyTransparentFunctionComponent","createFactory","p","c","mapProps","propsMapper","BaseComponent","factory","input","pick","result","stateName","stateUpdaterName","initialState","_Component","WithState","_temp","_this","_len","args","_key","apply","stateValue","updateStateValue","updateFn","_ref","_babelHelpers$extends","shouldUpdate","Nothing","ShouldUpdate","propKeys","funcs","arg","reduce","a","b","config$$1","_config","fromESObservable","toESObservable","config","observable","stream","getProcessServiceName","proc","getSpanId","getSpanName","getSpanDuration","getSpanTimestamp","getSpanProcessId","processID","getSpanReferenceByType","createSelector","find","getSpanServiceName","childOfRef","filterSpansForText","leftBound","rightBound","fuzzy","extract","original","getTextFilterdSpansAsMap","matchingSpans","textFilteredSpansMap","muted","TreeNode","child","walk","addChild","iterFunction","searchFunction","searchFn","getPath","findPath","currentNode","currentPath","attempt","match","nodeStack","actualDepth","nodeDepth","pop","getTraceSpans","getTraceProcesses","processes","getSpanWithProcess","getTraceSpansAsMap","getTraceSpanIdsAsTree","nodesById","spansById","root","parentID","comparator","nodeA","nodeB","sort","getTraceTimestamp","prevTimestamp","getTraceDuration","prevDuration","getParentSpan","tree","spanMap","spanA","spanB","numberSortComparator","itemA","itemB","getTraceServices","spanTree","services","add","DURATION_FORMATTERS","ms","formatMillisecondTime","s","formatSecondTime","getDurationFormatterForTrace","totalDuration","ONE_SECOND","getTraceSpansByHierarchyPosition","unit","formatter","dir","selector","hierarchyPositionMap","createStructuredSelector","collapsed","collapse","hiddenSpanIds","collapsedSpanId","id","interval","num","updatedSpan","transformTraceData","traceEndTime","Number","MAX_SAFE_INTEGER","spanIdCounts","idCount","_isEqual","svcCounts","traceName","tagsInfo","spanTags","warningsHash","uniqueTags","t","values","deduplicateTags","topPrefixes","orderedTags","tp","aKey","bKey","startsWith","orderTags","refSpan","numberOfSpans","simpleFilter","pattern","array","opts","ch","patternIdx","len","totalScore","currScore","pre","post","compareString","caseSensitive","idx","Infinity","rendered","score","arr","prev","string","UIPopover","GetElementsContext","elements","Popover","UITooltip","Tooltip","UIIcon","Icon","UIDropdown","Dropdown","UIMenu","Menu","UIMenuItem","MenuItem","UIButton","Button","UIDivider","Divider","UIInput","Input","UIInputGroup","InputGroup","UIElementsContext","strToRgb","r","g","parseInt","ColorGenerator","colorsHex","colorsRgb","cache","currentIdx","_getColorIndex","getRgbColorByKey","clear","getGenerator","memoizeOne","colors","servicesColorPalette","_propTypes2","IconBase","_ref2","_objectWithoutProperties","_ref2$reactIconBase","reactIconBase","computedSize","fill","preserveAspectRatio","verticalAlign","oneOfType","number","object","shape","j","isModifier","modifiersMatch","matches","code","deleteCombo","deleteSequence","splice","combokeys","COLORS_HEX_DARK","ThemeType","defaultTheme","Light","borderStyle","ThemeContext","ThemeProvider","ThemeConsumer","memoizedThemeMerge","darkOverrides","Component","WithTheme","wrapped","useContext","hex","base","tinycolor","mostReadable","clone","lighten","darken","includeFallbackColors","toHex8String","toHsl","l","newColor","safeSize","fallback","DetailState","oldState","toggleTags","next","toggleProcess","toggleReferences","toggleWarnings","toggleStackTraces","toggleLogs","toggleLogItem","delete","combinations","Symbol","for","f","k","m","n","q","v","z","u","$$typeof","A","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","Fragment","Lazy","Portal","Profiler","StrictMode","Suspense","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","typeOf","ignoreThisKeypress","maxLevel","processedSequenceCallback","CanvasSpanGraph","UnthemedCanvasSpanGraph","_canvasElm","getColor","_setCanvasRef","_draw","valueWidth","totalValueWidth","canvas","getFillColor","bgColor","fillCache","cHeight","cWidth","innerWidth","itemHeight","itemYChange","ctx","getContext","alpha","fillStyle","fillRect","valueOffset","renderIntoCanvas","TickLabels","TickLabelsLabel","GraphTick","GraphTicks","x1","y1","x2","y2","ScrubberHandleExpansion","ScrubberHandle","ScrubberLine","ScrubberDragging","ScrubberHandles","Scrubber","xPercent","transform","ViewingLayerResetZoom","ViewingLayer","ViewingLayerGraph","ViewingLayerInactive","ViewingLayerCursorGuide","ViewingLayerDraggedShift","ViewingLayerDrag","ViewingLayerFullOverlay","ViewingLayerResetZoomHoverClassName","dragTypes","UnthemedViewingLayer","_draggerStart","_draggerEnd","_handleScrubberEnterLeave","preventCursorLine","_handleScrubberDragUpdate","_handleScrubberDragEnd","_resetTimeZoomClickHandler","_getMarkers","leadingX","haveNextTimeRange","leftInactive","cursorPosition","rightInactive","strokeWidth","getItem","SpanGraph","ubPb2","UiFindInput","clearUiFind","allowClear","inputProps","suffix","autosize","placeholder","trackFindFunction","TracePageSearchBar","TracePageSearchBarBar","TracePageSearchBarCount","TracePageSearchBarBtn","TracePageSearchBarBtnDisabled","TracePageSearchBarLocateBtn","memo","focusUiFindMatches","navigable","nextResult","prevResult","resultCount","onSearchValueChange","searchValue","hideSearchButtons","count","btnClass","uiFindInputInputProps","ubJustifyEnd","compact","display","disabled","BreakableText","WORD_RX","wordRegexp","exec","LoadingIndicatorColorAnim","keyframes","LoadingIndicator","LoadingIndicatorCentered","LoadingIndicatorSmall","centered","small","TraceName","components","fontSize","TraceNameError","isErred","fetchedState","ERROR","FALLBACK_TRACE_NAME","errorCssClass","titleStr","LOADING","getTraceName","sp","hasOwn","createCache","limit","equals","entry","put","singletonCache","entries","cacheIndex","findIndex","unshift","lruCache","createEqualsFn","basicEquals","deepObjects","deep","valueA","valueB","every","isANull","isBNull","aKeys","bKeys","equalityChecker","deepEquals","_len2","_key2","getParent","parentRef","parameterRegExp","getParamNames","names","stringSupplant","encodeFn","processTemplate","template","parameters","createTestFunction","identity","getParameterInArray","callTemplate","computeLinks","processTags","parameterValues","parameter","currentSpan","getParameterInAncestor","processedLinks","encodeURIComponent","_uniq","getTraceLinks","memoize","validKeys","computeTraceLink","WeakMap","createGetLinks","ExternalLinks","TracePageHeader","TracePageHeaderTitleRow","TracePageHeaderBack","TracePageHeaderTitleLink","TracePageHeaderDetailToggle","TracePageHeaderDetailToggleExpanded","TracePageHeaderTitle","TracePageHeaderTitleCollapsible","TracePageHeaderOverviewItems","TracePageHeaderOverviewItemValueDetail","TracePageHeaderOverviewItemValue","TracePageHeaderArchiveIcon","TracePageHeaderTraceId","HEADER_ITEMS","renderer","dateStr","formatDatetime","_values","_maxBy","canCollapse","hideMap","hideSummary","onSlimViewClicked","slimView","traceGraphView","summaryItems","uTxMuted","8","9","13","16","17","18","20","27","32","33","34","35","36","37","38","39","40","45","46","91","93","173","187","189","224","increaseSequence","nextAction","callbackAndReset","characterFromEvent","wrappedCallback","modifiers1","modifiers2","DEFAULT_MS_PRECISION","log10","quantizeDuration","floatPrecision","conversionFactor","precision","targetPrecision","floor","abs","trunc","toPrecision","toFloatPrecision","moment","targetDuration","asMilliseconds","asSeconds","inputUnit","units","_round","eventModifiers","keyCode","106","107","109","110","111","186","188","190","191","192","219","220","221","222","SPECIAL_ALIASES","SHIFT_MAP","keysFromString","is","objA","objB","keysA","keysB","o","freeze","prop","isFrozen","DONE","createChangeEmitter","currentListeners","nextListeners","ensureCanMutateNextListeners","listen","listener","isSubscribed","emit","listeners"],"mappings":"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","file":"default~explore~jaegerPlugin.de0e7cb4f02a375bece7.js","sourcesContent":["module.exports = on\nmodule.exports.on = on\nmodule.exports.off = off\n\nfunction on (element, event, callback, capture) {\n  !element.addEventListener && (event = 'on' + event)\n  ;(element.addEventListener || element.attachEvent).call(element, event, callback, capture)\n  return callback\n}\n\nfunction off (element, event, callback, capture) {\n  !element.removeEventListener && (event = 'on' + event)\n  ;(element.removeEventListener || element.detachEvent).call(element, event, callback, capture)\n  return callback\n}\n","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"⌘\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoNetwork = function IoNetwork(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm35 7.5c0 1.9-1 3.4-2.5 4.3v7.3l-10 5v4.1c1.5 0.9 2.5 2.4 2.5 4.3 0 2.7-2.3 5-5 5s-5-2.3-5-5c0-1.9 1-3.4 2.5-4.3v-4.1l-10-5v-7.3c-1.5-0.9-2.5-2.4-2.5-4.3 0-2.7 2.3-5 5-5s5 2.3 5 5c0 1.9-1 3.4-2.5 4.3v4.1l7.5 3.8 7.5-3.8v-4.1c-1.5-0.9-2.5-2.4-2.5-4.3 0-2.7 2.3-5 5-5s5 2.3 5 5z m-25-2.5c-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5-1.1-2.5-2.5-2.5z m10 30c1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5-2.5 1.1-2.5 2.5 1.1 2.5 2.5 2.5z m10-25c1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5-2.5 1.1-2.5 2.5 1.1 2.5 2.5 2.5z' })\n        )\n    );\n};\n\nexports.default = IoNetwork;\nmodule.exports = exports['default'];","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceKeyValuePair, TraceSpan } from '../types/trace';\nimport { TNil } from '../types';\n\nexport default function filterSpans(textFilter: string, spans: TraceSpan[] | TNil) {\n  if (!spans) {\n    return null;\n  }\n\n  // if a span field includes at least one filter in includeFilters, the span is a match\n  const includeFilters: string[] = [];\n\n  // values with keys that include text in any one of the excludeKeys will be ignored\n  const excludeKeys: string[] = [];\n\n  // split textFilter by whitespace, remove empty strings, and extract includeFilters and excludeKeys\n  textFilter\n    .split(/\\s+/)\n    .filter(Boolean)\n    .forEach((w) => {\n      if (w[0] === '-') {\n        excludeKeys.push(w.substr(1).toLowerCase());\n      } else {\n        includeFilters.push(w.toLowerCase());\n      }\n    });\n\n  const isTextInFilters = (filters: string[], text: string) =>\n    filters.some((filter) => text.toLowerCase().includes(filter));\n\n  const isTextInKeyValues = (kvs: TraceKeyValuePair[]) =>\n    kvs\n      ? kvs.some((kv) => {\n          // ignore checking key and value for a match if key is in excludeKeys\n          if (isTextInFilters(excludeKeys, kv.key)) {\n            return false;\n          }\n          // match if key or value matches an item in includeFilters\n          return isTextInFilters(includeFilters, kv.key) || isTextInFilters(includeFilters, kv.value.toString());\n        })\n      : false;\n\n  const isSpanAMatch = (span: TraceSpan) =>\n    isTextInFilters(includeFilters, span.operationName) ||\n    isTextInFilters(includeFilters, span.process.serviceName) ||\n    isTextInKeyValues(span.tags) ||\n    span.logs.some((log) => isTextInKeyValues(log.fields)) ||\n    isTextInKeyValues(span.process.tags) ||\n    includeFilters.some((filter) => filter === span.spanID);\n\n  // declare as const because need to disambiguate the type\n  const rv: Set<string> = new Set(spans.filter(isSpanAMatch).map((span: TraceSpan) => span.spanID));\n  return rv;\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * resets all sequence counters except for the ones passed in\n *\n * @param {Object} doNotReset\n * @returns void\n */\nmodule.exports = function (doNotReset) {\n  var self = this\n\n  doNotReset = doNotReset || {}\n\n  var activeSequences = false\n  var key\n\n  for (key in self.sequenceLevels) {\n    if (doNotReset[key]) {\n      activeSequences = true\n      continue\n    }\n    self.sequenceLevels[key] = 0\n  }\n\n  if (!activeSequences) {\n    self.nextExpectedAction = false\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoArrowRightA = function IoArrowRightA(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm35 20l-15 15v-8.7h-15v-12.5h15v-8.8z' })\n        )\n    );\n};\n\nexports.default = IoArrowRightA;\nmodule.exports = exports['default'];","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","/* eslint-env node, browser */\n'use strict'\n/**\n * this is a list of special strings you can use to map\n * to modifier keys when you specify your keyboard shortcuts\n *\n * @type {Object}\n */\nmodule.exports = {\n  'option': 'alt',\n  'command': 'meta',\n  'return': 'enter',\n  'escape': 'esc',\n  'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { ApiError } from './api-error';\nimport { Trace } from './trace';\n\nexport { TraceSpan, TraceResponse, Trace, TraceProcess, TraceKeyValuePair, TraceLink } from './trace';\n\nexport { default as TTraceTimeline } from './TTraceTimeline';\nexport { default as TNil } from './TNil';\n\nexport type FetchedState = 'FETCH_DONE' | 'FETCH_ERROR' | 'FETCH_LOADING';\n\nexport type FetchedTrace = {\n  data?: Trace;\n  error?: ApiError;\n  id: string;\n  state?: FetchedState;\n};\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds a single keyboard combination\n *\n * @param {string} combination\n * @param {Function} callback\n * @param {string=} action\n * @param {string=} sequenceName - name of sequence if part of sequence\n * @param {number=} level - what part of the sequence the command is\n * @returns void\n */\nmodule.exports = function (combination, callback, action, sequenceName, level) {\n  var self = this\n\n  // store a direct mapped reference for use with Combokeys.trigger\n  self.directMap[combination + ':' + action] = callback\n\n  // make sure multiple spaces in a row become a single space\n  combination = combination.replace(/\\s+/g, ' ')\n\n  var sequence = combination.split(' ')\n  var info\n\n  // if this pattern is a sequence of keys then run through this method\n  // to reprocess each pattern one key at a time\n  if (sequence.length > 1) {\n    self.bindSequence(combination, sequence, callback, action)\n    return\n  }\n\n  info = self.getKeyInfo(combination, action)\n\n  // make sure to initialize array if this is the first time\n  // a callback is added for this key\n  self.callbacks[info.key] = self.callbacks[info.key] || []\n\n  // remove an existing match if there is one\n  self.getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level)\n\n  // add this call back to the array\n  // if it is a sequence put it at the beginning\n  // if not put it at the end\n  //\n  // this is important because the way these are processed expects\n  // the sequence ones to come first\n  self.callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n    callback: callback,\n    modifiers: info.modifiers,\n    action: info.action,\n    seq: sequenceName,\n    level: level,\n    combo: combination\n  })\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * unbinds an event to Combokeys\n *\n * the unbinding sets the callback function of the specified key combo\n * to an empty function and deletes the corresponding key in the\n * directMap dict.\n *\n * TODO: actually remove this from the callbacks dictionary instead\n * of binding an empty function\n *\n * the keycombo+action has to be exactly the same as\n * it was defined in the bind method\n *\n * @param {string|Array} keys\n * @param {string} action\n * @returns void\n */\nmodule.exports = function (keys, action) {\n  var self = this\n\n  return self.bind(keys, function () {}, action)\n}\n","/* eslint-env node, browser */\n'use strict'\nmodule.exports = function () {\n  var self = this\n  var on = require('./dom-event')\n  var element = self.element\n\n  self.eventHandler = require('./handleKeyEvent').bind(self)\n\n  on(element, 'keypress', self.eventHandler)\n  on(element, 'keydown', self.eventHandler)\n  on(element, 'keyup', self.eventHandler)\n}\n","'use strict'\n\nvar INDENT = '    '\n\nfunction inlineRule (objRule) {\n  var str = ''\n  objRule && Object.keys(objRule).forEach(function (rule) {\n    str += rule + ':' + objRule[rule] + ';'\n  })\n  return str\n}\n\nfunction Stylize (styleFile) {\n  function styleClass (cssClass) {\n    return 'class=\"' + cssClass + '\"'\n  }\n\n  function styleInline (cssClass) {\n    return 'style=\"' + inlineRule(styleFile['.' + cssClass]) + '\"'\n  }\n\n  if (!styleFile) return styleClass\n  return styleInline\n}\n\nfunction type (doc) {\n  if (doc === null) return 'null'\n  if (Array.isArray(doc)) return 'array'\n  if (typeof doc === 'string' && /^https?:/.test(doc)) return 'link'\n  if (typeof doc === 'object' && typeof doc.toISOString === 'function') return 'date'\n\n  return typeof doc\n}\n\nfunction escape (str) {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n}\n\nmodule.exports = function (doc, styleFile) {\n  var indent = ''\n  var style = Stylize(styleFile)\n\n  var forEach = function (list, start, end, fn) {\n    if (!list.length) return start + ' ' + end\n\n    var out = start + '\\n'\n\n    indent += INDENT\n    list.forEach(function (key, i) {\n      out += indent + fn(key) + (i < list.length - 1 ? ',' : '') + '\\n'\n    })\n    indent = indent.slice(0, -INDENT.length)\n\n    return out + indent + end\n  }\n\n  function visit (obj) {\n    if (obj === undefined) return ''\n\n    switch (type(obj)) {\n      case 'boolean':\n        return '<span ' + style('json-markup-bool') + '>' + obj + '</span>'\n\n      case 'number':\n        return '<span ' + style('json-markup-number') + '>' + obj + '</span>'\n\n      case 'date':\n        return '<span class=\"json-markup-string\">\"' + escape(obj.toISOString()) + '\"</span>'\n\n      case 'null':\n        return '<span ' + style('json-markup-null') + '>null</span>'\n\n      case 'string':\n        return '<span ' + style('json-markup-string') + '>\"' + escape(obj.replace(/\\n/g, '\\n' + indent)) + '\"</span>'\n\n      case 'link':\n        return '<span ' + style('json-markup-string') + '>\"<a href=\"' + escape(obj) + '\">' + escape(obj) + '</a>\"</span>'\n\n      case 'array':\n        return forEach(obj, '[', ']', visit)\n\n      case 'object':\n        var keys = Object.keys(obj).filter(function (key) {\n          return obj[key] !== undefined\n        })\n\n        return forEach(keys, '{', '}', function (key) {\n          return '<span ' + style('json-markup-key') + '>\"' + key + '\":</span> ' + visit(obj[key])\n        })\n    }\n\n    return ''\n  }\n\n  return '<div ' + style('json-markup') + '>' + visit(doc) + '</div>'\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport * from './types';\nexport { default as EUpdateTypes } from './EUpdateTypes';\nexport { default } from './DraggableManager';\n","// Copyright (c) 2018 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport cx from 'classnames';\nimport IoAndroidOpen from 'react-icons/lib/io/android-open';\nimport { css } from '@emotion/css';\n\nimport { createStyle } from '../Theme';\n\nexport const getStyles = createStyle(() => {\n  return {\n    NewWindowIconLarge: css`\n      label: NewWindowIconLarge;\n      font-size: 1.5em;\n    `,\n  };\n});\n\ntype Props = {\n  isLarge?: boolean;\n  className?: string;\n};\n\nexport default function NewWindowIcon(props: Props) {\n  const { isLarge, className, ...rest } = props;\n  const styles = getStyles();\n  const cls = cx({ [styles.NewWindowIconLarge]: isLarge }, className);\n  return <IoAndroidOpen className={cls} {...rest} />;\n}\n\nNewWindowIcon.defaultProps = {\n  isLarge: false,\n};\n","/* eslint-env node, browser */\n'use strict'\n\nmodule.exports = function (element, options) {\n  var self = this\n  var Combokeys = self.constructor\n\n  /**\n   * an object of passed options\n   *\n   * @type { storeInstancesGlobally?: true }\n   */\n\n  self.options = Object.assign({ storeInstancesGlobally: true }, options || {})\n\n  /**\n   * a list of all the callbacks setup via Combokeys.bind()\n   *\n   * @type {Object}\n   */\n  self.callbacks = {}\n\n  /**\n   * direct map of string combinations to callbacks used for trigger()\n   *\n   * @type {Object}\n   */\n  self.directMap = {}\n\n  /**\n   * keeps track of what level each sequence is at since multiple\n   * sequences can start out with the same sequence\n   *\n   * @type {Object}\n   */\n  self.sequenceLevels = {}\n\n  /**\n   * variable to store the setTimeout call\n   *\n   * @type {null|number}\n   */\n  self.resetTimer = null\n\n  /**\n   * temporary state where we will ignore the next keyup\n   *\n   * @type {boolean|string}\n   */\n  self.ignoreNextKeyup = false\n\n  /**\n   * temporary state where we will ignore the next keypress\n   *\n   * @type {boolean}\n   */\n  self.ignoreNextKeypress = false\n\n  /**\n   * are we currently inside of a sequence?\n   * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n   *\n   * @type {boolean|string}\n   */\n  self.nextExpectedAction = false\n\n  self.element = element\n\n  self.addEvents()\n\n  if (self.options.storeInstancesGlobally) {\n    Combokeys.instances.push(self)\n  }\n\n  return self\n}\n\nmodule.exports.prototype.bind = require('./prototype/bind')\nmodule.exports.prototype.bindMultiple = require('./prototype/bindMultiple')\nmodule.exports.prototype.unbind = require('./prototype/unbind')\nmodule.exports.prototype.trigger = require('./prototype/trigger')\nmodule.exports.prototype.reset = require('./prototype/reset.js')\nmodule.exports.prototype.stopCallback = require('./prototype/stopCallback')\nmodule.exports.prototype.handleKey = require('./prototype/handleKey')\nmodule.exports.prototype.addEvents = require('./prototype/addEvents')\nmodule.exports.prototype.bindSingle = require('./prototype/bindSingle')\nmodule.exports.prototype.getKeyInfo = require('./prototype/getKeyInfo')\nmodule.exports.prototype.pickBestAction = require('./prototype/pickBestAction')\nmodule.exports.prototype.getReverseMap = require('./prototype/getReverseMap')\nmodule.exports.prototype.getMatches = require('./prototype/getMatches')\nmodule.exports.prototype.resetSequences = require('./prototype/resetSequences')\nmodule.exports.prototype.fireCallback = require('./prototype/fireCallback')\nmodule.exports.prototype.bindSequence = require('./prototype/bindSequence')\nmodule.exports.prototype.resetSequenceTimer = require('./prototype/resetSequenceTimer')\nmodule.exports.prototype.detach = require('./prototype/detach')\n\nmodule.exports.instances = []\nmodule.exports.reset = require('./reset')\n\n/**\n * variable to store the flipped version of MAP from above\n * needed to check if we should use keypress or not when no action\n * is specified\n *\n * @type {Object|undefined}\n */\nmodule.exports.REVERSE_MAP = null\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * prevents default for this event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  if (e.preventDefault) {\n    e.preventDefault()\n    return\n  }\n\n  e.returnValue = false\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoChevronRight = function IoChevronRight(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm23.3 20l-13.1-13.6c-0.3-0.3-0.3-0.9 0-1.2l2.4-2.4c0.3-0.3 0.9-0.4 1.2-0.1l16 16.7c0.1 0.1 0.2 0.4 0.2 0.6s-0.1 0.5-0.2 0.6l-16 16.7c-0.3 0.3-0.9 0.3-1.2 0l-2.4-2.5c-0.3-0.3-0.3-0.9 0-1.2z' })\n        )\n    );\n};\n\nexports.default = IoChevronRight;\nmodule.exports = exports['default'];","/* eslint-env node, browser */\n'use strict'\n/**\n * called to set a 1 second timeout on the specified sequence\n *\n * this is so after each key press in the sequence you have 1 second\n * to press the next key before you have to start over\n *\n * @returns void\n */\nmodule.exports = function () {\n  var self = this\n\n  clearTimeout(self.resetTimer)\n  self.resetTimer = setTimeout(\n    function () {\n      self.resetSequences()\n    },\n    1000\n  )\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * resets the library back to its initial state. This is useful\n * if you want to clear out the current keyboard shortcuts and bind\n * new ones - for example if you switch to another page\n *\n * @returns void\n */\nmodule.exports = function () {\n  var self = this\n  self.callbacks = {}\n  self.directMap = {}\n  return this\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { get as _get } from 'lodash';\n\nimport EUpdateTypes from './EUpdateTypes';\nimport { DraggableBounds, DraggingUpdate } from './types';\nimport { TNil } from '../../types';\n\nconst LEFT_MOUSE_BUTTON = 0;\n\ntype DraggableManagerOptions = {\n  getBounds: (tag: string | TNil) => DraggableBounds;\n  onMouseEnter?: (update: DraggingUpdate) => void;\n  onMouseLeave?: (update: DraggingUpdate) => void;\n  onMouseMove?: (update: DraggingUpdate) => void;\n  onDragStart?: (update: DraggingUpdate) => void;\n  onDragMove?: (update: DraggingUpdate) => void;\n  onDragEnd?: (update: DraggingUpdate) => void;\n  resetBoundsOnResize?: boolean;\n  tag?: string;\n};\n\nexport default class DraggableManager {\n  // cache the last known DraggableBounds (invalidate via `#resetBounds())\n  _bounds: DraggableBounds | TNil;\n  _isDragging: boolean;\n  // optional callbacks for various dragging events\n  _onMouseEnter: ((update: DraggingUpdate) => void) | TNil;\n  _onMouseLeave: ((update: DraggingUpdate) => void) | TNil;\n  _onMouseMove: ((update: DraggingUpdate) => void) | TNil;\n  _onDragStart: ((update: DraggingUpdate) => void) | TNil;\n  _onDragMove: ((update: DraggingUpdate) => void) | TNil;\n  _onDragEnd: ((update: DraggingUpdate) => void) | TNil;\n  // whether to reset the bounds on window resize\n  _resetBoundsOnResize: boolean;\n\n  /**\n   * Get the `DraggableBounds` for the current drag. The returned value is\n   * cached until either `#resetBounds()` is called or the window is resized\n   * (assuming `_resetBoundsOnResize` is `true`). The `DraggableBounds` defines\n   * the range the current drag can span to. It also establishes the left offset\n   * to adjust `clientX` by (from the `MouseEvent`s).\n   */\n  getBounds: (tag: string | TNil) => DraggableBounds;\n\n  // convenience data\n  tag: string | TNil;\n\n  // handlers for integration with DOM elements\n  handleMouseEnter: (event: React.MouseEvent<any>) => void;\n  handleMouseMove: (event: React.MouseEvent<any>) => void;\n  handleMouseLeave: (event: React.MouseEvent<any>) => void;\n  handleMouseDown: (event: React.MouseEvent<any>) => void;\n\n  constructor({ getBounds, tag, resetBoundsOnResize = true, ...rest }: DraggableManagerOptions) {\n    this.handleMouseDown = this._handleDragEvent;\n    this.handleMouseEnter = this._handleMinorMouseEvent;\n    this.handleMouseMove = this._handleMinorMouseEvent;\n    this.handleMouseLeave = this._handleMinorMouseEvent;\n\n    this.getBounds = getBounds;\n    this.tag = tag;\n    this._isDragging = false;\n    this._bounds = undefined;\n    this._resetBoundsOnResize = Boolean(resetBoundsOnResize);\n    if (this._resetBoundsOnResize) {\n      window.addEventListener('resize', this.resetBounds);\n    }\n    this._onMouseEnter = rest.onMouseEnter;\n    this._onMouseLeave = rest.onMouseLeave;\n    this._onMouseMove = rest.onMouseMove;\n    this._onDragStart = rest.onDragStart;\n    this._onDragMove = rest.onDragMove;\n    this._onDragEnd = rest.onDragEnd;\n  }\n\n  _getBounds(): DraggableBounds {\n    if (!this._bounds) {\n      this._bounds = this.getBounds(this.tag);\n    }\n    return this._bounds;\n  }\n\n  _getPosition(clientX: number) {\n    const { clientXLeft, maxValue, minValue, width } = this._getBounds();\n    let x = clientX - clientXLeft;\n    let value = x / width;\n    if (minValue != null && value < minValue) {\n      value = minValue;\n      x = minValue * width;\n    } else if (maxValue != null && value > maxValue) {\n      value = maxValue;\n      x = maxValue * width;\n    }\n    return { value, x };\n  }\n\n  _stopDragging() {\n    window.removeEventListener('mousemove', this._handleDragEvent);\n    window.removeEventListener('mouseup', this._handleDragEvent);\n    const style = _get(document, 'body.style');\n    if (style) {\n      style.userSelect = null;\n    }\n    this._isDragging = false;\n  }\n\n  isDragging() {\n    return this._isDragging;\n  }\n\n  dispose() {\n    if (this._isDragging) {\n      this._stopDragging();\n    }\n    if (this._resetBoundsOnResize) {\n      window.removeEventListener('resize', this.resetBounds);\n    }\n    this._bounds = undefined;\n    this._onMouseEnter = undefined;\n    this._onMouseLeave = undefined;\n    this._onMouseMove = undefined;\n    this._onDragStart = undefined;\n    this._onDragMove = undefined;\n    this._onDragEnd = undefined;\n  }\n\n  resetBounds = () => {\n    this._bounds = undefined;\n  };\n\n  _handleMinorMouseEvent = (event: React.MouseEvent<any>) => {\n    const { button, clientX, type: eventType } = event;\n    if (this._isDragging || button !== LEFT_MOUSE_BUTTON) {\n      return;\n    }\n    let type: EUpdateTypes | null = null;\n    let handler: ((update: DraggingUpdate) => void) | TNil;\n    if (eventType === 'mouseenter') {\n      type = EUpdateTypes.MouseEnter;\n      handler = this._onMouseEnter;\n    } else if (eventType === 'mouseleave') {\n      type = EUpdateTypes.MouseLeave;\n      handler = this._onMouseLeave;\n    } else if (eventType === 'mousemove') {\n      type = EUpdateTypes.MouseMove;\n      handler = this._onMouseMove;\n    } else {\n      throw new Error(`invalid event type: ${eventType}`);\n    }\n    if (!handler) {\n      return;\n    }\n    const { value, x } = this._getPosition(clientX);\n    handler({\n      event,\n      type,\n      value,\n      x,\n      manager: this,\n      tag: this.tag,\n    });\n  };\n\n  _handleDragEvent = (event: MouseEvent | React.MouseEvent<any>) => {\n    const { button, clientX, type: eventType } = event;\n    let type: EUpdateTypes | null = null;\n    let handler: ((update: DraggingUpdate) => void) | TNil;\n    if (eventType === 'mousedown') {\n      if (this._isDragging || button !== LEFT_MOUSE_BUTTON) {\n        return;\n      }\n      window.addEventListener('mousemove', this._handleDragEvent);\n      window.addEventListener('mouseup', this._handleDragEvent);\n      const style = _get(document, 'body.style');\n      if (style) {\n        style.userSelect = 'none';\n      }\n      this._isDragging = true;\n\n      type = EUpdateTypes.DragStart;\n      handler = this._onDragStart;\n    } else if (eventType === 'mousemove') {\n      if (!this._isDragging) {\n        return;\n      }\n      type = EUpdateTypes.DragMove;\n      handler = this._onDragMove;\n    } else if (eventType === 'mouseup') {\n      if (!this._isDragging) {\n        return;\n      }\n      this._stopDragging();\n      type = EUpdateTypes.DragEnd;\n      handler = this._onDragEnd;\n    } else {\n      throw new Error(`invalid event type: ${eventType}`);\n    }\n    if (!handler) {\n      return;\n    }\n    const { value, x } = this._getPosition(clientX);\n    handler({\n      event,\n      type,\n      value,\n      x,\n      manager: this,\n      tag: this.tag,\n    });\n  };\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n* should we stop this event before firing off callbacks\n*\n* @param {Event} e\n* @param {Element} element\n* @return {boolean}\n*/\nmodule.exports = function (e, element) {\n  // if the element has the class \"combokeys\" then no need to stop\n  if ((' ' + element.className + ' ').indexOf(' combokeys ') > -1) {\n    return false\n  }\n\n  var tagName = element.tagName.toLowerCase()\n\n  // stop for input, select, and textarea\n  return tagName === 'input' || tagName === 'select' || tagName === 'textarea' || element.isContentEditable\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport deepFreeze from 'deep-freeze';\n\nimport { FALLBACK_DAG_MAX_NUM_SERVICES } from './index';\n\nexport default deepFreeze(\n  Object.defineProperty(\n    {\n      archiveEnabled: false,\n      dependencies: {\n        dagMaxNumServices: FALLBACK_DAG_MAX_NUM_SERVICES,\n        menuEnabled: true,\n      },\n      linkPatterns: [],\n      menu: [\n        {\n          label: 'About Jaeger',\n          items: [\n            {\n              label: 'GitHub',\n              url: 'https://github.com/uber/jaeger',\n            },\n            {\n              label: 'Docs',\n              url: 'http://jaeger.readthedocs.io/en/latest/',\n            },\n            {\n              label: 'Twitter',\n              url: 'https://twitter.com/JaegerTracing',\n            },\n            {\n              label: 'Discussion Group',\n              url: 'https://groups.google.com/forum/#!forum/jaeger-tracing',\n            },\n            {\n              label: 'Gitter.im',\n              url: 'https://gitter.im/jaegertracing/Lobby',\n            },\n            {\n              label: 'Blog',\n              url: 'https://medium.com/jaegertracing/',\n            },\n          ],\n        },\n      ],\n      search: {\n        maxLookback: {\n          label: '2 Days',\n          value: '2d',\n        },\n        maxLimit: 1500,\n      },\n      tracking: {\n        gaID: null,\n        trackErrors: true,\n      },\n    },\n    // fields that should be individually merged vs wholesale replaced\n    '__mergeFields',\n    { value: ['dependencies', 'search', 'tracking'] }\n  )\n);\n\nexport const deprecations = [\n  {\n    formerKey: 'dependenciesMenuEnabled',\n    currentKey: 'dependencies.menuEnabled',\n  },\n  {\n    formerKey: 'gaTrackingID',\n    currentKey: 'tracking.gaID',\n  },\n];\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { get as _get } from 'lodash';\n\nimport defaultConfig from '../../constants/default-config';\n\n/**\n * Merge the embedded config from the query service (if present) with the\n * default config from `../../constants/default-config`.\n */\nexport default function getConfig() {\n  return defaultConfig;\n}\n\nexport function getConfigValue(path: string) {\n  return _get(getConfig(), path);\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { IconButton } from '@grafana/ui';\nimport { css } from '@emotion/css';\nimport React from 'react';\nimport { createStyle } from '../../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    TimelineCollapser: css`\n      align-items: center;\n      display: flex;\n      flex: none;\n      justify-content: center;\n      margin-right: 0.5rem;\n    `,\n  };\n});\n\ntype CollapserProps = {\n  onCollapseAll: () => void;\n  onCollapseOne: () => void;\n  onExpandOne: () => void;\n  onExpandAll: () => void;\n};\n\nexport function TimelineCollapser(props: CollapserProps) {\n  const { onExpandAll, onExpandOne, onCollapseAll, onCollapseOne } = props;\n  const styles = getStyles();\n  return (\n    <div className={styles.TimelineCollapser} data-test-id=\"TimelineCollapser\">\n      <IconButton tooltip=\"Expand +1\" size=\"xl\" tooltipPlacement=\"top\" name=\"angle-down\" onClick={onExpandOne} />\n      <IconButton tooltip=\"Collapse +1\" size=\"xl\" tooltipPlacement=\"top\" name=\"angle-right\" onClick={onCollapseOne} />\n      <IconButton\n        tooltip=\"Expand All\"\n        size=\"xl\"\n        tooltipPlacement=\"top\"\n        name=\"angle-double-down\"\n        onClick={onExpandAll}\n      />\n      <IconButton\n        tooltip=\"Collapse All\"\n        size=\"xl\"\n        tooltipPlacement=\"top\"\n        name=\"angle-double-right\"\n        onClick={onCollapseAll}\n      />\n    </div>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport { TNil } from '../../types';\nimport DraggableManager, { DraggableBounds, DraggingUpdate } from '../../utils/DraggableManager';\nimport { createStyle } from '../../Theme';\n\nexport const getStyles = createStyle(() => {\n  return {\n    TimelineColumnResizer: css`\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n    `,\n    wrapper: css`\n      bottom: 0;\n      position: absolute;\n      top: 0;\n    `,\n    dragger: css`\n      border-left: 2px solid transparent;\n      cursor: col-resize;\n      height: 5000px;\n      margin-left: -1px;\n      position: absolute;\n      top: 0;\n      width: 1px;\n      z-index: 10;\n      &:hover {\n        border-left: 2px solid rgba(0, 0, 0, 0.3);\n      }\n      &::before {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: -8px;\n        right: 0;\n        content: ' ';\n      }\n    `,\n    draggerDragging: css`\n      background: rgba(136, 0, 136, 0.05);\n      width: unset;\n      &::before {\n        left: -2000px;\n        right: -2000px;\n      }\n    `,\n    draggerDraggingLeft: css`\n      border-left: 2px solid #808;\n      border-right: 1px solid #999;\n    `,\n    draggerDraggingRight: css`\n      border-left: 1px solid #999;\n      border-right: 2px solid #808;\n    `,\n    gripIcon: css`\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      &::before,\n      &::after {\n        border-right: 1px solid #ccc;\n        content: ' ';\n        height: 9px;\n        position: absolute;\n        right: 9px;\n        top: 25px;\n      }\n      &::after {\n        right: 5px;\n      }\n    `,\n    gripIconDragging: css`\n      &::before,\n      &::after {\n        border-right: 1px solid rgba(136, 0, 136, 0.5);\n      }\n    `,\n  };\n});\n\ntype TimelineColumnResizerProps = {\n  min: number;\n  max: number;\n  onChange: (newSize: number) => void;\n  position: number;\n  columnResizeHandleHeight: number;\n};\n\ntype TimelineColumnResizerState = {\n  dragPosition: number | TNil;\n};\n\nexport default class TimelineColumnResizer extends React.PureComponent<\n  TimelineColumnResizerProps,\n  TimelineColumnResizerState\n> {\n  state: TimelineColumnResizerState;\n\n  _dragManager: DraggableManager;\n  _rootElm: Element | TNil;\n\n  constructor(props: TimelineColumnResizerProps) {\n    super(props);\n    this._dragManager = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleDragEnd,\n      onDragMove: this._handleDragUpdate,\n      onDragStart: this._handleDragUpdate,\n    });\n    this._rootElm = undefined;\n    this.state = {\n      dragPosition: null,\n    };\n  }\n\n  componentWillUnmount() {\n    this._dragManager.dispose();\n  }\n\n  _setRootElm = (elm: Element | TNil) => {\n    this._rootElm = elm;\n  };\n\n  _getDraggingBounds = (): DraggableBounds => {\n    if (!this._rootElm) {\n      throw new Error('invalid state');\n    }\n    const { left: clientXLeft, width } = this._rootElm.getBoundingClientRect();\n    const { min, max } = this.props;\n    return {\n      clientXLeft,\n      width,\n      maxValue: max,\n      minValue: min,\n    };\n  };\n\n  _handleDragUpdate = ({ value }: DraggingUpdate) => {\n    this.setState({ dragPosition: value });\n  };\n\n  _handleDragEnd = ({ manager, value }: DraggingUpdate) => {\n    manager.resetBounds();\n    this.setState({ dragPosition: null });\n    this.props.onChange(value);\n  };\n\n  render() {\n    let left;\n    let draggerStyle: React.CSSProperties;\n    const { position, columnResizeHandleHeight } = this.props;\n    const { dragPosition } = this.state;\n    left = `${position * 100}%`;\n    const gripStyle = { left };\n    let isDraggingLeft = false;\n    let isDraggingRight = false;\n    const styles = getStyles();\n\n    if (this._dragManager.isDragging() && this._rootElm && dragPosition != null) {\n      isDraggingLeft = dragPosition < position;\n      isDraggingRight = dragPosition > position;\n      left = `${dragPosition * 100}%`;\n      // Draw a highlight from the current dragged position back to the original\n      // position, e.g. highlight the change. Draw the highlight via `left` and\n      // `right` css styles (simpler than using `width`).\n      const draggerLeft = `${Math.min(position, dragPosition) * 100}%`;\n      // subtract 1px for draggerRight to deal with the right border being off\n      // by 1px when dragging left\n      const draggerRight = `calc(${(1 - Math.max(position, dragPosition)) * 100}% - 1px)`;\n      draggerStyle = { left: draggerLeft, right: draggerRight };\n    } else {\n      draggerStyle = gripStyle;\n    }\n    draggerStyle.height = columnResizeHandleHeight;\n\n    const isDragging = isDraggingLeft || isDraggingRight;\n    return (\n      <div className={styles.TimelineColumnResizer} ref={this._setRootElm} data-test-id=\"TimelineColumnResizer\">\n        <div\n          className={cx(styles.gripIcon, isDragging && styles.gripIconDragging)}\n          style={gripStyle}\n          data-test-id=\"TimelineColumnResizer--gripIcon\"\n        />\n        <div\n          aria-hidden\n          className={cx(\n            styles.dragger,\n            isDragging && styles.draggerDragging,\n            isDraggingRight && styles.draggerDraggingRight,\n            isDraggingLeft && styles.draggerDraggingLeft\n          )}\n          onMouseDown={this._dragManager.handleMouseDown}\n          style={draggerStyle}\n          data-test-id=\"TimelineColumnResizer--dragger\"\n        />\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css, cx } from '@emotion/css';\n\nimport { TUpdateViewRangeTimeFunction, ViewRangeTime, ViewRangeTimeUpdate } from '../types';\nimport { TNil } from '../../types';\nimport DraggableManager, { DraggableBounds, DraggingUpdate } from '../../utils/DraggableManager';\nimport { createStyle } from '../../Theme';\n\n// exported for testing\nexport const getStyles = createStyle(() => {\n  return {\n    TimelineViewingLayer: css`\n      label: TimelineViewingLayer;\n      bottom: 0;\n      cursor: vertical-text;\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n    `,\n    TimelineViewingLayerCursorGuide: css`\n      label: TimelineViewingLayerCursorGuide;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      width: 1px;\n      background-color: red;\n    `,\n    TimelineViewingLayerDragged: css`\n      label: TimelineViewingLayerDragged;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n    `,\n    TimelineViewingLayerDraggedDraggingLeft: css`\n      label: TimelineViewingLayerDraggedDraggingLeft;\n      border-left: 1px solid;\n    `,\n    TimelineViewingLayerDraggedDraggingRight: css`\n      label: TimelineViewingLayerDraggedDraggingRight;\n      border-right: 1px solid;\n    `,\n    TimelineViewingLayerDraggedShiftDrag: css`\n      label: TimelineViewingLayerDraggedShiftDrag;\n      background-color: rgba(68, 68, 255, 0.2);\n      border-color: #44f;\n    `,\n    TimelineViewingLayerDraggedReframeDrag: css`\n      label: TimelineViewingLayerDraggedReframeDrag;\n      background-color: rgba(255, 68, 68, 0.2);\n      border-color: #f44;\n    `,\n    TimelineViewingLayerFullOverlay: css`\n      label: TimelineViewingLayerFullOverlay;\n      bottom: 0;\n      cursor: col-resize;\n      left: 0;\n      position: fixed;\n      right: 0;\n      top: 0;\n      user-select: none;\n    `,\n  };\n});\n\ntype TimelineViewingLayerProps = {\n  /**\n   * `boundsInvalidator` is an arbitrary prop that lets the component know the\n   * bounds for dragging need to be recalculated. In practice, the name column\n   * width serves fine for this.\n   */\n  boundsInvalidator: any | null | undefined;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRangeTime: ViewRangeTime;\n};\n\ntype TDraggingLeftLayout = {\n  isDraggingLeft: boolean;\n  left: string;\n  width: string;\n};\n\ntype TOutOfViewLayout = {\n  isOutOfView: true;\n};\n\nfunction isOutOfView(layout: TDraggingLeftLayout | TOutOfViewLayout): layout is TOutOfViewLayout {\n  return Reflect.has(layout, 'isOutOfView');\n}\n\n/**\n * Map from a sub range to the greater view range, e.g, when the view range is\n * the middle half ([0.25, 0.75]), a value of 0.25 befomes 3/8.\n * @returns {number}\n */\nfunction mapFromViewSubRange(viewStart: number, viewEnd: number, value: number) {\n  return viewStart + value * (viewEnd - viewStart);\n}\n\n/**\n * Map a value from the view ([0, 1]) to a sub-range, e.g, when the view range is\n * the middle half ([0.25, 0.75]), a value of 3/8 becomes 1/4.\n * @returns {number}\n */\nfunction mapToViewSubRange(viewStart: number, viewEnd: number, value: number) {\n  return (value - viewStart) / (viewEnd - viewStart);\n}\n\n/**\n * Get the layout for the \"next\" view range time, e.g. the difference from the\n * drag start and the drag end. This is driven by `shiftStart`, `shiftEnd` or\n * `reframe` on `props.viewRangeTime`, not by the current state of the\n * component. So, it reflects in-progress dragging from the span minimap.\n */\nfunction getNextViewLayout(start: number, position: number): TDraggingLeftLayout | TOutOfViewLayout {\n  let [left, right] = start < position ? [start, position] : [position, start];\n  if (left >= 1 || right <= 0) {\n    return { isOutOfView: true };\n  }\n  if (left < 0) {\n    left = 0;\n  }\n  if (right > 1) {\n    right = 1;\n  }\n  return {\n    isDraggingLeft: start > position,\n    left: `${left * 100}%`,\n    width: `${(right - left) * 100}%`,\n  };\n}\n\n/**\n * Render the visual indication of the \"next\" view range.\n */\nfunction getMarkers(viewStart: number, viewEnd: number, from: number, to: number, isShift: boolean): React.ReactNode {\n  const mappedFrom = mapToViewSubRange(viewStart, viewEnd, from);\n  const mappedTo = mapToViewSubRange(viewStart, viewEnd, to);\n  const layout = getNextViewLayout(mappedFrom, mappedTo);\n  if (isOutOfView(layout)) {\n    return null;\n  }\n  const { isDraggingLeft, left, width } = layout;\n  const styles = getStyles();\n  const cls = cx({\n    [styles.TimelineViewingLayerDraggedDraggingRight]: !isDraggingLeft,\n    [styles.TimelineViewingLayerDraggedReframeDrag]: !isShift,\n    [styles.TimelineViewingLayerDraggedShiftDrag]: isShift,\n  });\n  return (\n    <div\n      className={cx(styles.TimelineViewingLayerDragged, styles.TimelineViewingLayerDraggedDraggingLeft, cls)}\n      style={{ left, width }}\n      data-test-id=\"Dragged\"\n    />\n  );\n}\n\n/**\n * `TimelineViewingLayer` is rendered on top of the TimelineHeaderRow time\n * labels; it handles showing the current view range and handles mouse UX for\n * modifying it.\n */\nexport default class TimelineViewingLayer extends React.PureComponent<TimelineViewingLayerProps> {\n  _draggerReframe: DraggableManager;\n  _root: Element | TNil;\n\n  constructor(props: TimelineViewingLayerProps) {\n    super(props);\n    this._draggerReframe = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleReframeDragEnd,\n      onDragMove: this._handleReframeDragUpdate,\n      onDragStart: this._handleReframeDragUpdate,\n      onMouseLeave: this._handleReframeMouseLeave,\n      onMouseMove: this._handleReframeMouseMove,\n    });\n    this._root = undefined;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: TimelineViewingLayerProps) {\n    const { boundsInvalidator } = this.props;\n    if (boundsInvalidator !== nextProps.boundsInvalidator) {\n      this._draggerReframe.resetBounds();\n    }\n  }\n\n  componentWillUnmount() {\n    this._draggerReframe.dispose();\n  }\n\n  _setRoot = (elm: Element | TNil) => {\n    this._root = elm;\n  };\n\n  _getDraggingBounds = (): DraggableBounds => {\n    if (!this._root) {\n      throw new Error('invalid state');\n    }\n    const { left: clientXLeft, width } = this._root.getBoundingClientRect();\n    return { clientXLeft, width };\n  };\n\n  _handleReframeMouseMove = ({ value }: DraggingUpdate) => {\n    const [viewStart, viewEnd] = this.props.viewRangeTime.current;\n    const cursor = mapFromViewSubRange(viewStart, viewEnd, value);\n    this.props.updateNextViewRangeTime({ cursor });\n  };\n\n  _handleReframeMouseLeave = () => {\n    this.props.updateNextViewRangeTime({ cursor: undefined });\n  };\n\n  _handleReframeDragUpdate = ({ value }: DraggingUpdate) => {\n    const { current, reframe } = this.props.viewRangeTime;\n    const [viewStart, viewEnd] = current;\n    const shift = mapFromViewSubRange(viewStart, viewEnd, value);\n    const anchor = reframe ? reframe.anchor : shift;\n    const update = { reframe: { anchor, shift } };\n    this.props.updateNextViewRangeTime(update);\n  };\n\n  _handleReframeDragEnd = ({ manager, value }: DraggingUpdate) => {\n    const { current, reframe } = this.props.viewRangeTime;\n    const [viewStart, viewEnd] = current;\n    const shift = mapFromViewSubRange(viewStart, viewEnd, value);\n    const anchor = reframe ? reframe.anchor : shift;\n    const [start, end] = shift < anchor ? [shift, anchor] : [anchor, shift];\n    manager.resetBounds();\n    this.props.updateViewRangeTime(start, end, 'timeline-header');\n  };\n\n  render() {\n    const { viewRangeTime } = this.props;\n    const { current, cursor, reframe, shiftEnd, shiftStart } = viewRangeTime;\n    const [viewStart, viewEnd] = current;\n    const haveNextTimeRange = reframe != null || shiftEnd != null || shiftStart != null;\n    let cusrorPosition: string | TNil;\n    if (!haveNextTimeRange && cursor != null && cursor >= viewStart && cursor <= viewEnd) {\n      cusrorPosition = `${mapToViewSubRange(viewStart, viewEnd, cursor) * 100}%`;\n    }\n    const styles = getStyles();\n    return (\n      <div\n        aria-hidden\n        className={styles.TimelineViewingLayer}\n        ref={this._setRoot}\n        onMouseDown={this._draggerReframe.handleMouseDown}\n        onMouseLeave={this._draggerReframe.handleMouseLeave}\n        onMouseMove={this._draggerReframe.handleMouseMove}\n        data-test-id=\"TimelineViewingLayer\"\n      >\n        {cusrorPosition != null && (\n          <div\n            className={styles.TimelineViewingLayerCursorGuide}\n            style={{ left: cusrorPosition }}\n            data-test-id=\"TimelineViewingLayer--cursorGuide\"\n          />\n        )}\n        {reframe != null && getMarkers(viewStart, viewEnd, reframe.anchor, reframe.shift, false)}\n        {shiftEnd != null && getMarkers(viewStart, viewEnd, viewEnd, shiftEnd, true)}\n        {shiftStart != null && getMarkers(viewStart, viewEnd, viewStart, shiftStart, true)}\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceSpan } from '../types/trace';\n\nexport type ViewedBoundsFunctionType = (start: number, end: number) => { start: number; end: number };\n/**\n * Given a range (`min`, `max`) and factoring in a zoom (`viewStart`, `viewEnd`)\n * a function is created that will find the position of a sub-range (`start`, `end`).\n * The calling the generated method will return the result as a `{ start, end }`\n * object with values ranging in [0, 1].\n *\n * @param  {number} min       The start of the outer range.\n * @param  {number} max       The end of the outer range.\n * @param  {number} viewStart The start of the zoom, on a range of [0, 1],\n *                            relative to the `min`, `max`.\n * @param  {number} viewEnd   The end of the zoom, on a range of [0, 1],\n *                            relative to the `min`, `max`.\n * @returns {(number, number) => Object} Created view bounds function\n */\nexport function createViewedBoundsFunc(viewRange: { min: number; max: number; viewStart: number; viewEnd: number }) {\n  const { min, max, viewStart, viewEnd } = viewRange;\n  const duration = max - min;\n  const viewMin = min + viewStart * duration;\n  const viewMax = max - (1 - viewEnd) * duration;\n  const viewWindow = viewMax - viewMin;\n\n  /**\n   * View bounds function\n   * @param  {number} start     The start of the sub-range.\n   * @param  {number} end       The end of the sub-range.\n   * @returns {Object}           The resultant range.\n   */\n  return (start: number, end: number) => ({\n    start: (start - viewMin) / viewWindow,\n    end: (end - viewMin) / viewWindow,\n  });\n}\n\n/**\n * Returns `true` if the `span` has a tag matching `key` = `value`.\n *\n * @param  {string} key   The tag key to match on.\n * @param  {any}    value The tag value to match.\n * @param  {{tags}} span  An object with a `tags` property of { key, value }\n *                        items.\n * @returns {boolean}      True if a match was found.\n */\nexport function spanHasTag(key: string, value: any, span: TraceSpan) {\n  if (!Array.isArray(span.tags) || !span.tags.length) {\n    return false;\n  }\n  return span.tags.some((tag) => tag.key === key && tag.value === value);\n}\n\nexport const isClientSpan = spanHasTag.bind(null, 'span.kind', 'client');\nexport const isServerSpan = spanHasTag.bind(null, 'span.kind', 'server');\n\nconst isErrorBool = spanHasTag.bind(null, 'error', true);\nconst isErrorStr = spanHasTag.bind(null, 'error', 'true');\nexport const isErrorSpan = (span: TraceSpan) => isErrorBool(span) || isErrorStr(span);\n\n/**\n * Returns `true` if at least one of the descendants of the `parentSpanIndex`\n * span contains an error tag.\n *\n * @param      {TraceSpan[]}   spans            The spans for a trace - should be\n *                                         sorted with children following parents.\n * @param      {number}   parentSpanIndex  The index of the parent span - only\n *                                         subsequent spans with depth less than\n *                                         the parent span will be checked.\n * @returns     {boolean}  Returns `true` if a descendant contains an error tag.\n */\nexport function spanContainsErredSpan(spans: TraceSpan[], parentSpanIndex: number) {\n  const { depth } = spans[parentSpanIndex];\n  let i = parentSpanIndex + 1;\n  for (; i < spans.length && spans[i].depth > depth; i++) {\n    if (isErrorSpan(spans[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Expects the first span to be the parent span.\n */\nexport function findServerChildSpan(spans: TraceSpan[]) {\n  if (spans.length <= 1 || !isClientSpan(spans[0])) {\n    return false;\n  }\n  const span = spans[0];\n  const spanChildDepth = span.depth + 1;\n  let i = 1;\n  while (i < spans.length && spans[i].depth === spanChildDepth) {\n    if (isServerSpan(spans[i])) {\n      return spans[i];\n    }\n    i++;\n  }\n  return null;\n}\n\nexport { formatDuration } from '../utils/date';\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport { formatDuration } from './utils';\nimport { TNil } from '../types';\nimport { autoColor, createStyle, Theme, useTheme } from '../Theme';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    Ticks: css`\n      label: Ticks;\n      pointer-events: none;\n    `,\n    TicksTick: css`\n      label: TicksTick;\n      position: absolute;\n      height: 100%;\n      width: 1px;\n      background: ${autoColor(theme, '#d8d8d8')};\n      &:last-child {\n        width: 0;\n      }\n    `,\n    TicksTickLabel: css`\n      label: TicksTickLabel;\n      left: 0.25rem;\n      position: absolute;\n    `,\n    TicksTickLabelEndAnchor: css`\n      label: TicksTickLabelEndAnchor;\n      left: initial;\n      right: 0.25rem;\n    `,\n  };\n});\n\ntype TicksProps = {\n  endTime?: number | TNil;\n  numTicks: number;\n  showLabels?: boolean | TNil;\n  startTime?: number | TNil;\n};\n\nexport default function Ticks(props: TicksProps) {\n  const { endTime, numTicks, showLabels, startTime } = props;\n\n  let labels: undefined | string[];\n  if (showLabels) {\n    labels = [];\n    const viewingDuration = (endTime || 0) - (startTime || 0);\n    for (let i = 0; i < numTicks; i++) {\n      const durationAtTick = (startTime || 0) + (i / (numTicks - 1)) * viewingDuration;\n      labels.push(formatDuration(durationAtTick));\n    }\n  }\n  const styles = getStyles(useTheme());\n  const ticks: React.ReactNode[] = [];\n  for (let i = 0; i < numTicks; i++) {\n    const portion = i / (numTicks - 1);\n    ticks.push(\n      <div\n        key={portion}\n        className={styles.TicksTick}\n        style={{\n          left: `${portion * 100}%`,\n        }}\n      >\n        {labels && (\n          <span className={cx(styles.TicksTickLabel, { [styles.TicksTickLabelEndAnchor]: portion >= 1 })}>\n            {labels[i]}\n          </span>\n        )}\n      </div>\n    );\n  }\n  return <div className={styles.Ticks}>{ticks}</div>;\n}\n\nTicks.defaultProps = {\n  endTime: null,\n  showLabels: null,\n  startTime: null,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\nimport { createStyle } from '../Theme';\nimport { ubRelative } from '../uberUtilityStyles';\n\nconst getStyles = createStyle(() => {\n  return {\n    flexRow: css`\n      display: flex;\n      flex: 0 1 auto;\n      flex-direction: row;\n    `,\n  };\n});\n\ntype TTimelineRowProps = {\n  children: React.ReactNode;\n  className?: string;\n};\n\ninterface TimelineRowCellProps extends React.HTMLAttributes<HTMLDivElement> {\n  children: React.ReactNode;\n  className?: string;\n  width: number;\n  style?: {};\n}\n\nexport default function TimelineRow(props: TTimelineRowProps) {\n  const { children, className = '', ...rest } = props;\n  const styles = getStyles();\n  return (\n    <div className={cx(styles.flexRow, className)} {...rest}>\n      {children}\n    </div>\n  );\n}\n\nTimelineRow.defaultProps = {\n  className: '',\n};\n\nexport function TimelineRowCell(props: TimelineRowCellProps) {\n  const { children, className = '', width, style, ...rest } = props;\n  const widthPercent = `${width * 100}%`;\n  const mergedStyle = { ...style, flexBasis: widthPercent, maxWidth: widthPercent };\n  return (\n    <div className={cx(ubRelative, className)} style={mergedStyle} {...(rest as any)}>\n      {children}\n    </div>\n  );\n}\n\nTimelineRowCell.defaultProps = { className: '', style: {} };\n\nTimelineRow.Cell = TimelineRowCell;\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport { TimelineCollapser } from './TimelineCollapser';\nimport TimelineColumnResizer from './TimelineColumnResizer';\nimport TimelineViewingLayer from './TimelineViewingLayer';\nimport Ticks from '../Ticks';\nimport TimelineRow from '../TimelineRow';\nimport { TUpdateViewRangeTimeFunction, ViewRangeTime, ViewRangeTimeUpdate } from '../types';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { ubFlex, ubPx2 } from '../../uberUtilityStyles';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    TimelineHeaderRow: css`\n      label: TimelineHeaderRow;\n      background: ${autoColor(theme, '#ececec')};\n      border-bottom: 1px solid ${autoColor(theme, '#ccc')};\n      height: 38px;\n      line-height: 38px;\n      width: 100%;\n      z-index: 4;\n      position: relative;\n    `,\n    TimelineHeaderRowTitle: css`\n      label: TimelineHeaderRowTitle;\n      flex: 1;\n      overflow: hidden;\n      margin: 0;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    `,\n    TimelineHeaderWrapper: css`\n      label: TimelineHeaderWrapper;\n      align-items: center;\n    `,\n  };\n});\n\ntype TimelineHeaderRowProps = {\n  duration: number;\n  nameColumnWidth: number;\n  numTicks: number;\n  onCollapseAll: () => void;\n  onCollapseOne: () => void;\n  onColummWidthChange: (width: number) => void;\n  onExpandAll: () => void;\n  onExpandOne: () => void;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRangeTime: ViewRangeTime;\n  columnResizeHandleHeight: number;\n};\n\nexport default function TimelineHeaderRow(props: TimelineHeaderRowProps) {\n  const {\n    duration,\n    nameColumnWidth,\n    numTicks,\n    onCollapseAll,\n    onCollapseOne,\n    onColummWidthChange,\n    onExpandAll,\n    onExpandOne,\n    updateViewRangeTime,\n    updateNextViewRangeTime,\n    viewRangeTime,\n    columnResizeHandleHeight,\n  } = props;\n  const [viewStart, viewEnd] = viewRangeTime.current;\n  const styles = getStyles(useTheme());\n  return (\n    <TimelineRow className={styles.TimelineHeaderRow} data-test-id=\"TimelineHeaderRow\">\n      <TimelineRow.Cell className={cx(ubFlex, ubPx2, styles.TimelineHeaderWrapper)} width={nameColumnWidth}>\n        <h4 className={styles.TimelineHeaderRowTitle}>Service &amp; Operation</h4>\n        <TimelineCollapser\n          onCollapseAll={onCollapseAll}\n          onExpandAll={onExpandAll}\n          onCollapseOne={onCollapseOne}\n          onExpandOne={onExpandOne}\n        />\n      </TimelineRow.Cell>\n      <TimelineRow.Cell width={1 - nameColumnWidth}>\n        <TimelineViewingLayer\n          boundsInvalidator={nameColumnWidth}\n          updateNextViewRangeTime={updateNextViewRangeTime}\n          updateViewRangeTime={updateViewRangeTime}\n          viewRangeTime={viewRangeTime}\n        />\n        <Ticks numTicks={numTicks} startTime={viewStart * duration} endTime={viewEnd * duration} showLabels />\n      </TimelineRow.Cell>\n      <TimelineColumnResizer\n        columnResizeHandleHeight={columnResizeHandleHeight}\n        position={nameColumnWidth}\n        onChange={onColummWidthChange}\n        min={0.2}\n        max={0.85}\n      />\n    </TimelineRow>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ntype THeightGetter = (index: number) => number;\n\n/**\n * Keeps track of the height and y-position for anything sequenctial where\n * y-positions follow one-after-another and can be derived from the height of\n * the prior entries. The height is known from an accessor function parameter\n * to the methods that require new knowledge the heights.\n *\n * @export\n * @class Positions\n */\nexport default class Positions {\n  /**\n   * Indicates how far past the explicitly required height or y-values should\n   * checked.\n   */\n  bufferLen: number;\n  dataLen: number;\n  heights: number[];\n  /**\n   * `lastI` keeps track of which values have already been visited. In many\n   * scenarios, values do not need to be revisited. But, revisiting is required\n   * when heights have changed, so `lastI` can be forced.\n   */\n  lastI: number;\n  ys: number[];\n\n  constructor(bufferLen: number) {\n    this.ys = [];\n    this.heights = [];\n    this.bufferLen = bufferLen;\n    this.dataLen = -1;\n    this.lastI = -1;\n  }\n\n  /**\n   * Used to make sure the length of y-values and heights is consistent with\n   * the context; in particular `lastI` needs to remain valid.\n   */\n  profileData(dataLength: number) {\n    if (dataLength !== this.dataLen) {\n      this.dataLen = dataLength;\n      this.ys.length = dataLength;\n      this.heights.length = dataLength;\n      if (this.lastI >= dataLength) {\n        this.lastI = dataLength - 1;\n      }\n    }\n  }\n\n  /**\n   * Calculate and save the heights and y-values, based on `heightGetter`, from\n   * `lastI` until the`max` index; the starting point (`lastI`) can be forced\n   * via the `forcedLastI` parameter.\n   * @param {number=} forcedLastI\n   */\n  calcHeights(max: number, heightGetter: THeightGetter, forcedLastI?: number) {\n    if (forcedLastI != null) {\n      this.lastI = forcedLastI;\n    }\n    let _max = max + this.bufferLen;\n    if (_max <= this.lastI) {\n      return;\n    }\n    if (_max >= this.heights.length) {\n      _max = this.heights.length - 1;\n    }\n    let i = this.lastI;\n    if (this.lastI === -1) {\n      i = 0;\n      this.ys[0] = 0;\n    }\n    while (i <= _max) {\n      // eslint-disable-next-line no-multi-assign\n      const h = (this.heights[i] = heightGetter(i));\n      this.ys[i + 1] = this.ys[i] + h;\n      i++;\n    }\n    this.lastI = _max;\n  }\n\n  /**\n   * Verify the height and y-values from `lastI` up to `yValue`.\n   */\n  calcYs(yValue: number, heightGetter: THeightGetter) {\n    while ((this.ys[this.lastI] == null || yValue > this.ys[this.lastI]) && this.lastI < this.dataLen - 1) {\n      this.calcHeights(this.lastI, heightGetter);\n    }\n  }\n\n  /**\n   * Get the latest height for index `_i`. If it's in new terretory\n   * (_i > lastI), find the heights (and y-values) leading up to it. If it's in\n   * known territory (_i <= lastI) and the height is different than what is\n   * known, recalculate subsequent y values, but don't confirm the heights of\n   * those items, just update based on the difference.\n   */\n  confirmHeight(_i: number, heightGetter: THeightGetter) {\n    let i = _i;\n    if (i > this.lastI) {\n      this.calcHeights(i, heightGetter);\n      return;\n    }\n    const h = heightGetter(i);\n    if (h === this.heights[i]) {\n      return;\n    }\n    const chg = h - this.heights[i];\n    this.heights[i] = h;\n    // shift the y positions by `chg` for all known y positions\n    while (++i <= this.lastI) {\n      this.ys[i] += chg;\n    }\n    if (this.ys[this.lastI + 1] != null) {\n      this.ys[this.lastI + 1] += chg;\n    }\n  }\n\n  /**\n   * Given a target y-value (`yValue`), find the closest index (in the `.ys`\n   * array) that is prior to the y-value; e.g. map from y-value to index in\n   * `.ys`.\n   */\n  findFloorIndex(yValue: number, heightGetter: THeightGetter): number {\n    this.calcYs(yValue, heightGetter);\n\n    let imin = 0;\n    let imax = this.lastI;\n\n    if (this.ys.length < 2 || yValue < this.ys[1]) {\n      return 0;\n    }\n    if (yValue > this.ys[imax]) {\n      return imax;\n    }\n    let i;\n    while (imin < imax) {\n      // eslint-disable-next-line no-bitwise\n      i = (imin + 0.5 * (imax - imin)) | 0;\n      if (yValue > this.ys[i]) {\n        if (yValue <= this.ys[i + 1]) {\n          return i;\n        }\n        imin = i;\n      } else if (yValue < this.ys[i]) {\n        if (yValue >= this.ys[i - 1]) {\n          return i - 1;\n        }\n        imax = i;\n      } else {\n        return i;\n      }\n    }\n    throw new Error(`unable to find floor index for y=${yValue}`);\n  }\n\n  /**\n   * Get the `y` and `height` for a given row.\n   *\n   * @returns {{ height: number, y: number }}\n   */\n  getRowPosition(index: number, heightGetter: THeightGetter) {\n    this.confirmHeight(index, heightGetter);\n    return {\n      height: this.heights[index],\n      y: this.ys[index],\n    };\n  }\n\n  /**\n   * Get the estimated height of the whole shebang by extrapolating based on\n   * the average known height.\n   */\n  getEstimatedHeight(): number {\n    const known = this.ys[this.lastI] + this.heights[this.lastI];\n    if (this.lastI >= this.dataLen - 1) {\n      // eslint-disable-next-line no-bitwise\n      return known | 0;\n    }\n    // eslint-disable-next-line no-bitwise\n    return ((known / (this.lastI + 1)) * this.heights.length) | 0;\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\n\nimport Positions from './Positions';\nimport { TNil } from '../../types';\n\ntype TWrapperProps = {\n  style: React.CSSProperties;\n  ref: (elm: HTMLDivElement) => void;\n  onScroll?: () => void;\n};\n\n/**\n * @typedef\n */\ntype TListViewProps = {\n  /**\n   * Number of elements in the list.\n   */\n  dataLength: number;\n  /**\n   * Convert item index (number) to the key (string). ListView uses both indexes\n   * and keys to handle the addition of new rows.\n   */\n  getIndexFromKey: (key: string) => number;\n  /**\n   * Convert item key (string) to the index (number). ListView uses both indexes\n   * and keys to handle the addition of new rows.\n   */\n  getKeyFromIndex: (index: number) => string;\n  /**\n   * Number of items to draw and add to the DOM, initially.\n   */\n  initialDraw?: number;\n  /**\n   * The parent provides fallback height measurements when there is not a\n   * rendered element to measure.\n   */\n  itemHeightGetter: (index: number, key: string) => number;\n  /**\n   * Function that renders an item; rendered items are added directly to the\n   * DOM, they are not wrapped in list item wrapper HTMLElement.\n   */\n  // itemRenderer(itemKey, style, i, attrs)\n  itemRenderer: (\n    itemKey: string,\n    style: Record<string, string | number>,\n    index: number,\n    attributes: Record<string, string>\n  ) => React.ReactNode;\n  /**\n   * `className` for the HTMLElement that holds the items.\n   */\n  itemsWrapperClassName?: string;\n  /**\n   * When adding new items to the DOM, this is the number of items to add above\n   * and below the current view. E.g. if list is 100 items and is scrolled\n   * halfway down (so items [46, 55] are in view), then when a new range of\n   * items is rendered, it will render items `46 - viewBuffer` to\n   * `55 + viewBuffer`.\n   */\n  viewBuffer: number;\n  /**\n   * The minimum number of items offscreen in either direction; e.g. at least\n   * `viewBuffer` number of items must be off screen above and below the\n   * current view, or more items will be rendered.\n   */\n  viewBufferMin: number;\n  /**\n   * When `true`, expect `_wrapperElm` to have `overflow: visible` and to,\n   * essentially, be tall to the point the entire page will will end up\n   * scrolling as a result of the ListView. Similar to react-virtualized\n   * window scroller.\n   *\n   * - Ref: https://bvaughn.github.io/react-virtualized/#/components/WindowScroller\n   * - Ref:https://github.com/bvaughn/react-virtualized/blob/497e2a1942529560681d65a9ef9f5e9c9c9a49ba/docs/WindowScroller.md\n   */\n  windowScroller?: boolean;\n  /**\n   * You need to pass in scrollElement when windowScroller is set to false.\n   * This element is responsible for tracking scrolling for lazy loading.\n   */\n  scrollElement?: Element;\n};\n\nconst DEFAULT_INITIAL_DRAW = 100;\n\n/**\n * Virtualized list view component, for the most part, only renders the window\n * of items that are in-view with some buffer before and after. Listens for\n * scroll events and updates which items are rendered. See react-virtualized\n * for a suite of components with similar, but generalized, functionality.\n * https://github.com/bvaughn/react-virtualized\n *\n * Note: Presently, ListView cannot be a PureComponent. This is because ListView\n * is sensitive to the underlying state that drives the list items, but it\n * doesn't actually receive that state. So, a render may still be required even\n * if ListView's props are unchanged.\n *\n * @export\n * @class ListView\n */\nexport default class ListView extends React.Component<TListViewProps> {\n  /**\n   * Keeps track of the height and y-value of items, by item index, in the\n   * ListView.\n   */\n  _yPositions: Positions;\n  /**\n   * Keep track of the known / measured heights of the rendered items; populated\n   * with values through observation and keyed on the item key, not the item\n   * index.\n   */\n  _knownHeights: Map<string, number>;\n  /**\n   * The start index of the items currently drawn.\n   */\n  _startIndexDrawn: number;\n  /**\n   * The end index of the items currently drawn.\n   */\n  _endIndexDrawn: number;\n  /**\n   * The start index of the items currently in view.\n   */\n  _startIndex: number;\n  /**\n   * The end index of the items currently in view.\n   */\n  _endIndex: number;\n  /**\n   * Height of the visual window, e.g. height of the scroller element.\n   */\n  _viewHeight: number;\n  /**\n   * `scrollTop` of the current scroll position.\n   */\n  _scrollTop: number;\n  /**\n   * Used to keep track of whether or not a re-calculation of what should be\n   * drawn / viewable has been scheduled.\n   */\n  _isScrolledOrResized: boolean;\n  /**\n   * If `windowScroller` is true, this notes how far down the page the scroller\n   * is located. (Note: repositioning and below-the-fold views are untested)\n   */\n  _htmlTopOffset: number;\n  _windowScrollListenerAdded: boolean;\n  _htmlElm: HTMLElement;\n  /**\n   * Element holding the scroller.\n   */\n  _wrapperElm: Element | TNil;\n  /**\n   * HTMLElement holding the rendered items.\n   */\n  _itemHolderElm: HTMLElement | TNil;\n\n  static defaultProps = {\n    initialDraw: DEFAULT_INITIAL_DRAW,\n    itemsWrapperClassName: '',\n    windowScroller: false,\n  };\n\n  constructor(props: TListViewProps) {\n    super(props);\n\n    this._yPositions = new Positions(200);\n    // _knownHeights is (item-key -> observed height) of list items\n    this._knownHeights = new Map();\n\n    this._startIndexDrawn = 2 ** 20;\n    this._endIndexDrawn = -(2 ** 20);\n    this._startIndex = 0;\n    this._endIndex = 0;\n    this._viewHeight = -1;\n    this._scrollTop = -1;\n    this._isScrolledOrResized = false;\n\n    this._htmlTopOffset = -1;\n    this._windowScrollListenerAdded = false;\n    // _htmlElm is only relevant if props.windowScroller is true\n    this._htmlElm = document.documentElement as any;\n    this._wrapperElm = undefined;\n    this._itemHolderElm = undefined;\n  }\n\n  componentDidMount() {\n    if (this.props.windowScroller) {\n      if (this._wrapperElm) {\n        const { top } = this._wrapperElm.getBoundingClientRect();\n        this._htmlTopOffset = top + this._htmlElm.scrollTop;\n      }\n      window.addEventListener('scroll', this._onScroll);\n      this._windowScrollListenerAdded = true;\n    } else {\n      // The wrapper element should be the one that handles the scrolling. Once we are not using scroll-canvas we can remove this.\n      this._wrapperElm = this.props.scrollElement;\n      this._wrapperElm?.addEventListener('scroll', this._onScroll);\n    }\n  }\n\n  componentDidUpdate() {\n    if (this._itemHolderElm) {\n      this._scanItemHeights();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._windowScrollListenerAdded) {\n      window.removeEventListener('scroll', this._onScroll);\n    } else {\n      this._wrapperElm?.removeEventListener('scroll', this._onScroll);\n    }\n  }\n\n  getViewHeight = () => this._viewHeight;\n\n  /**\n   * Get the index of the item at the bottom of the current view.\n   */\n  getBottomVisibleIndex = (): number => {\n    const bottomY = this._scrollTop + this._viewHeight;\n    return this._yPositions.findFloorIndex(bottomY, this._getHeight);\n  };\n\n  /**\n   * Get the index of the item at the top of the current view.\n   */\n  getTopVisibleIndex = (): number => this._yPositions.findFloorIndex(this._scrollTop, this._getHeight);\n\n  getRowPosition = (index: number): { height: number; y: number } =>\n    this._yPositions.getRowPosition(index, this._getHeight);\n\n  /**\n   * Scroll event listener that schedules a remeasuring of which items should be\n   * rendered.\n   */\n  _onScroll = () => {\n    if (!this._isScrolledOrResized) {\n      this._isScrolledOrResized = true;\n      window.requestAnimationFrame(this._positionList);\n    }\n  };\n\n  /**\n   * Returns true is the view height (scroll window) or scroll position have\n   * changed.\n   */\n  _isViewChanged() {\n    if (!this._wrapperElm) {\n      return false;\n    }\n    const useRoot = this.props.windowScroller;\n    const clientHeight = useRoot ? this._htmlElm.clientHeight : this._wrapperElm.clientHeight;\n    const scrollTop = useRoot ? this._htmlElm.scrollTop : this._wrapperElm.scrollTop;\n    return clientHeight !== this._viewHeight || scrollTop !== this._scrollTop;\n  }\n\n  /**\n   * Recalculate _startIndex and _endIndex, e.g. which items are in view.\n   */\n  _calcViewIndexes() {\n    const useRoot = this.props.windowScroller;\n    // funky if statement is to satisfy flow\n    if (!useRoot) {\n      /* istanbul ignore next */\n      if (!this._wrapperElm) {\n        this._viewHeight = -1;\n        this._startIndex = 0;\n        this._endIndex = 0;\n        return;\n      }\n      this._viewHeight = this._wrapperElm.clientHeight;\n      this._scrollTop = this._wrapperElm.scrollTop;\n    } else {\n      this._viewHeight = window.innerHeight - this._htmlTopOffset;\n      this._scrollTop = window.scrollY;\n    }\n    const yStart = this._scrollTop;\n    const yEnd = this._scrollTop + this._viewHeight;\n    this._startIndex = this._yPositions.findFloorIndex(yStart, this._getHeight);\n    this._endIndex = this._yPositions.findFloorIndex(yEnd, this._getHeight);\n  }\n\n  /**\n   * Checked to see if the currently rendered items are sufficient, if not,\n   * force an update to trigger more items to be rendered.\n   */\n  _positionList = () => {\n    this._isScrolledOrResized = false;\n    if (!this._wrapperElm) {\n      return;\n    }\n    this._calcViewIndexes();\n    // indexes drawn should be padded by at least props.viewBufferMin\n    const maxStart = this.props.viewBufferMin > this._startIndex ? 0 : this._startIndex - this.props.viewBufferMin;\n    const minEnd =\n      this.props.viewBufferMin < this.props.dataLength - this._endIndex\n        ? this._endIndex + this.props.viewBufferMin\n        : this.props.dataLength - 1;\n    if (maxStart < this._startIndexDrawn || minEnd > this._endIndexDrawn) {\n      this.forceUpdate();\n    }\n  };\n\n  _initWrapper = (elm: HTMLElement | TNil) => {\n    if (!this.props.windowScroller) {\n      return;\n    }\n    this._wrapperElm = elm;\n    if (elm) {\n      this._viewHeight = elm.clientHeight;\n    }\n  };\n\n  _initItemHolder = (elm: HTMLElement | TNil) => {\n    this._itemHolderElm = elm;\n    this._scanItemHeights();\n  };\n\n  /**\n   * Go through all items that are rendered and save their height based on their\n   * item-key (which is on a data-* attribute). If any new or adjusted heights\n   * are found, re-measure the current known y-positions (via .yPositions).\n   */\n  _scanItemHeights = () => {\n    const getIndexFromKey = this.props.getIndexFromKey;\n    if (!this._itemHolderElm) {\n      return;\n    }\n    // note the keys for the first and last altered heights, the `yPositions`\n    // needs to be updated\n    let lowDirtyKey = null;\n    let highDirtyKey = null;\n    let isDirty = false;\n    // iterating childNodes is faster than children\n    // https://jsperf.com/large-htmlcollection-vs-large-nodelist\n    const nodes = this._itemHolderElm.childNodes;\n    const max = nodes.length;\n    for (let i = 0; i < max; i++) {\n      const node: HTMLElement = nodes[i] as any;\n      // use `.getAttribute(...)` instead of `.dataset` for jest / JSDOM\n      const itemKey = node.getAttribute('data-item-key');\n      if (!itemKey) {\n        // eslint-disable-next-line no-console\n        console.warn('itemKey not found');\n        continue;\n      }\n      // measure the first child, if it's available, otherwise the node itself\n      // (likely not transferable to other contexts, and instead is specific to\n      // how we have the items rendered)\n      const measureSrc: Element = node.firstElementChild || node;\n      const observed = measureSrc.clientHeight;\n      const known = this._knownHeights.get(itemKey);\n      if (observed !== known) {\n        this._knownHeights.set(itemKey, observed);\n        if (!isDirty) {\n          isDirty = true;\n          // eslint-disable-next-line no-multi-assign\n          lowDirtyKey = highDirtyKey = itemKey;\n        } else {\n          highDirtyKey = itemKey;\n        }\n      }\n    }\n    if (lowDirtyKey != null && highDirtyKey != null) {\n      // update yPositions, then redraw\n      const imin = getIndexFromKey(lowDirtyKey);\n      const imax = highDirtyKey === lowDirtyKey ? imin : getIndexFromKey(highDirtyKey);\n      this._yPositions.calcHeights(imax, this._getHeight, imin);\n      this.forceUpdate();\n    }\n  };\n\n  /**\n   * Get the height of the element at index `i`; first check the known heights,\n   * fallback to `.props.itemHeightGetter(...)`.\n   */\n  _getHeight = (i: number) => {\n    const key = this.props.getKeyFromIndex(i);\n    const known = this._knownHeights.get(key);\n    // known !== known iff known is NaN\n    // eslint-disable-next-line no-self-compare\n    if (known != null && known === known) {\n      return known;\n    }\n    return this.props.itemHeightGetter(i, key);\n  };\n\n  render() {\n    const {\n      dataLength,\n      getKeyFromIndex,\n      initialDraw = DEFAULT_INITIAL_DRAW,\n      itemRenderer,\n      viewBuffer,\n      viewBufferMin,\n    } = this.props;\n    const heightGetter = this._getHeight;\n    const items = [];\n    let start;\n    let end;\n\n    this._yPositions.profileData(dataLength);\n\n    if (!this._wrapperElm) {\n      start = 0;\n      end = (initialDraw < dataLength ? initialDraw : dataLength) - 1;\n    } else {\n      if (this._isViewChanged()) {\n        this._calcViewIndexes();\n      }\n      const maxStart = viewBufferMin > this._startIndex ? 0 : this._startIndex - viewBufferMin;\n      const minEnd = viewBufferMin < dataLength - this._endIndex ? this._endIndex + viewBufferMin : dataLength - 1;\n      if (maxStart < this._startIndexDrawn || minEnd > this._endIndexDrawn) {\n        start = viewBuffer > this._startIndex ? 0 : this._startIndex - viewBuffer;\n        end = this._endIndex + viewBuffer;\n        if (end >= dataLength) {\n          end = dataLength - 1;\n        }\n      } else {\n        start = this._startIndexDrawn;\n        end = this._endIndexDrawn > dataLength - 1 ? dataLength - 1 : this._endIndexDrawn;\n      }\n    }\n\n    this._yPositions.calcHeights(end, heightGetter, start || -1);\n    this._startIndexDrawn = start;\n    this._endIndexDrawn = end;\n\n    items.length = end - start + 1;\n    for (let i = start; i <= end; i++) {\n      const { y: top, height } = this._yPositions.getRowPosition(i, heightGetter);\n      const style = {\n        height,\n        top,\n        position: 'absolute',\n      };\n      const itemKey = getKeyFromIndex(i);\n      const attrs = { 'data-item-key': itemKey };\n      items.push(itemRenderer(itemKey, style, i, attrs));\n    }\n    const wrapperProps: TWrapperProps = {\n      style: { position: 'relative' },\n      ref: this._initWrapper,\n    };\n    if (!this.props.windowScroller) {\n      wrapperProps.onScroll = this._onScroll;\n      wrapperProps.style.height = '100%';\n      wrapperProps.style.overflowY = 'auto';\n    }\n    const scrollerStyle = {\n      position: 'relative' as 'relative',\n      height: this._yPositions.getEstimatedHeight(),\n    };\n    return (\n      <div {...wrapperProps}>\n        <div style={scrollerStyle}>\n          <div\n            style={{\n              position: 'absolute',\n              top: 0,\n              margin: 0,\n              padding: 0,\n            }}\n            className={this.props.itemsWrapperClassName}\n            ref={this._initItemHolder}\n          >\n            {items}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\n\n/**\n * There are several places where external links to spans are created. The url layout though is something\n * that should be decided on the application level and not on the component level but at the same time\n * propagating the factory function everywhere could be cumbersome so we use this context for that.\n */\nconst ExternalLinkContext = React.createContext<((traceID: string, spanID: string) => string) | undefined>(undefined);\nExternalLinkContext.displayName = 'ExternalLinkContext';\nexport default ExternalLinkContext;\n","// Copyright (c) 2019 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { TraceSpanReference } from '../types/trace';\nimport ExternalLinkContext from './externalLinkContext';\n\ntype ReferenceLinkProps = {\n  reference: TraceSpanReference;\n  children: React.ReactNode;\n  className?: string;\n  focusSpan: (spanID: string) => void;\n  onClick?: () => void;\n};\n\nexport default function ReferenceLink(props: ReferenceLinkProps) {\n  const { reference, children, className, focusSpan, ...otherProps } = props;\n  delete otherProps.onClick;\n  if (reference.span) {\n    return (\n      <a role=\"button\" onClick={() => focusSpan(reference.spanID)} className={className} {...otherProps}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <ExternalLinkContext.Consumer>\n      {(createLinkToExternalSpan) => {\n        if (!createLinkToExternalSpan) {\n          throw new Error(\"ExternalLinkContext does not have a value, you probably forgot to setup it's provider\");\n        }\n        return (\n          <a\n            href={createLinkToExternalSpan(reference.traceID, reference.spanID)}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className={className}\n            {...otherProps}\n          >\n            {children}\n          </a>\n        );\n      }}\n    </ExternalLinkContext.Consumer>\n  );\n}\n","// Copyright (c) 2019 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport NewWindowIcon from '../common/NewWindowIcon';\nimport { TraceSpanReference } from '../types/trace';\nimport { UITooltip, UIDropdown, UIMenuItem, UIMenu, TooltipPlacement } from '../uiElementsContext';\n\nimport ReferenceLink from '../url/ReferenceLink';\nimport { createStyle } from '../Theme';\n\nexport const getStyles = createStyle(() => {\n  return {\n    MultiParent: css`\n      padding: 0 5px;\n      color: #000;\n      & ~ & {\n        margin-left: 5px;\n      }\n    `,\n    TraceRefLink: css`\n      display: flex;\n      justify-content: space-between;\n    `,\n    NewWindowIcon: css`\n      margin: 0.2em 0 0;\n    `,\n    tooltip: css`\n      max-width: none;\n    `,\n  };\n});\n\ntype TReferencesButtonProps = {\n  references: TraceSpanReference[];\n  children: React.ReactNode;\n  tooltipText: string;\n  focusSpan: (spanID: string) => void;\n};\n\nexport default class ReferencesButton extends React.PureComponent<TReferencesButtonProps> {\n  referencesList = (references: TraceSpanReference[]) => {\n    const styles = getStyles();\n    return (\n      <UIMenu>\n        {references.map((ref) => {\n          const { span, spanID } = ref;\n          return (\n            <UIMenuItem key={`${spanID}`}>\n              <ReferenceLink reference={ref} focusSpan={this.props.focusSpan} className={styles.TraceRefLink}>\n                {span\n                  ? `${span.process.serviceName}:${span.operationName} - ${ref.spanID}`\n                  : `(another trace) - ${ref.spanID}`}\n                {!span && <NewWindowIcon className={styles.NewWindowIcon} />}\n              </ReferenceLink>\n            </UIMenuItem>\n          );\n        })}\n      </UIMenu>\n    );\n  };\n\n  render() {\n    const { references, children, tooltipText, focusSpan } = this.props;\n    const styles = getStyles();\n\n    const tooltipProps = {\n      arrowPointAtCenter: true,\n      mouseLeaveDelay: 0.5,\n      placement: 'bottom' as TooltipPlacement,\n      title: tooltipText,\n      overlayClassName: styles.tooltip,\n    };\n\n    if (references.length > 1) {\n      return (\n        <UITooltip {...tooltipProps}>\n          <UIDropdown overlay={this.referencesList(references)} placement=\"bottomRight\" trigger={['click']}>\n            <a className={styles.MultiParent}>{children}</a>\n          </UIDropdown>\n        </UITooltip>\n      );\n    }\n    const ref = references[0];\n    return (\n      <UITooltip {...tooltipProps}>\n        <ReferenceLink reference={ref} focusSpan={focusSpan} className={styles.MultiParent}>\n          {children}\n        </ReferenceLink>\n      </UITooltip>\n    );\n  }\n}\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { find as _find, get as _get } from 'lodash';\n\nimport { TNil } from '../types';\nimport { TraceSpan } from '../types/trace';\n\nfunction getFirstAncestor(span: TraceSpan): TraceSpan | TNil {\n  return _get(\n    _find(\n      span.references,\n      ({ span: ref, refType }) => ref && ref.spanID && (refType === 'CHILD_OF' || refType === 'FOLLOWS_FROM')\n    ),\n    'span'\n  );\n}\n\nexport default function spanAncestorIds(span: TraceSpan | TNil): string[] {\n  const ancestorIDs: string[] = [];\n  if (!span) {\n    return ancestorIDs;\n  }\n  let ref = getFirstAncestor(span);\n  while (ref) {\n    ancestorIDs.push(ref.spanID);\n    ref = getFirstAncestor(ref);\n  }\n  return ancestorIDs;\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { get as _get } from 'lodash';\nimport IoChevronRight from 'react-icons/lib/io/chevron-right';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport { TraceSpan } from '../types/trace';\nimport spanAncestorIds from '../utils/span-ancestor-ids';\n\nimport { autoColor, createStyle, Theme, withTheme } from '../Theme';\n\nexport const getStyles = createStyle((theme: Theme) => {\n  return {\n    SpanTreeOffset: css`\n      label: SpanTreeOffset;\n      color: ${autoColor(theme, '#000')};\n      position: relative;\n    `,\n    SpanTreeOffsetParent: css`\n      label: SpanTreeOffsetParent;\n      &:hover {\n        cursor: pointer;\n      }\n    `,\n    indentGuide: css`\n      label: indentGuide;\n      /* The size of the indentGuide is based off of the iconWrapper */\n      padding-right: calc(0.5rem + 12px);\n      height: 100%;\n      border-left: 3px solid transparent;\n      display: inline-flex;\n      &::before {\n        content: '';\n        padding-left: 1px;\n        background-color: ${autoColor(theme, 'lightgrey')};\n      }\n    `,\n    indentGuideActive: css`\n      label: indentGuideActive;\n      border-color: ${autoColor(theme, 'darkgrey')};\n      &::before {\n        background-color: transparent;\n      }\n    `,\n    iconWrapper: css`\n      label: iconWrapper;\n      position: absolute;\n      right: 0.25rem;\n    `,\n  };\n});\n\ntype TProps = {\n  childrenVisible?: boolean;\n  onClick?: () => void;\n  span: TraceSpan;\n  showChildrenIcon?: boolean;\n\n  hoverIndentGuideIds: Set<string>;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  theme: Theme;\n};\n\nexport class UnthemedSpanTreeOffset extends React.PureComponent<TProps> {\n  static displayName = 'UnthemedSpanTreeOffset';\n\n  ancestorIds: string[];\n\n  static defaultProps = {\n    childrenVisible: false,\n    showChildrenIcon: true,\n  };\n\n  constructor(props: TProps) {\n    super(props);\n\n    this.ancestorIds = spanAncestorIds(props.span);\n    // Some traces have multiple root-level spans, this connects them all under one guideline and adds the\n    // necessary padding for the collapse icon on root-level spans.\n    this.ancestorIds.push('root');\n\n    this.ancestorIds.reverse();\n  }\n\n  /**\n   * If the mouse leaves to anywhere except another span with the same ancestor id, this span's ancestor id is\n   * removed from the set of hoverIndentGuideIds.\n   *\n   * @param {Object} event - React Synthetic event tied to mouseleave. Includes the related target which is\n   *     the element the user is now hovering.\n   * @param {string} ancestorId - The span id that the user was hovering over.\n   */\n  handleMouseLeave = (event: React.MouseEvent<HTMLSpanElement>, ancestorId: string) => {\n    if (\n      !(event.relatedTarget instanceof HTMLSpanElement) ||\n      _get(event, 'relatedTarget.dataset.ancestorId') !== ancestorId\n    ) {\n      this.props.removeHoverIndentGuideId(ancestorId);\n    }\n  };\n\n  /**\n   * If the mouse entered this span from anywhere except another span with the same ancestor id, this span's\n   * ancestorId is added to the set of hoverIndentGuideIds.\n   *\n   * @param {Object} event - React Synthetic event tied to mouseenter. Includes the related target which is\n   *     the last element the user was hovering.\n   * @param {string} ancestorId - The span id that the user is now hovering over.\n   */\n  handleMouseEnter = (event: React.MouseEvent<HTMLSpanElement>, ancestorId: string) => {\n    if (\n      !(event.relatedTarget instanceof HTMLSpanElement) ||\n      _get(event, 'relatedTarget.dataset.ancestorId') !== ancestorId\n    ) {\n      this.props.addHoverIndentGuideId(ancestorId);\n    }\n  };\n\n  render() {\n    const { childrenVisible, onClick, showChildrenIcon, span, theme } = this.props;\n    const { hasChildren, spanID } = span;\n    const wrapperProps = hasChildren ? { onClick, role: 'switch', 'aria-checked': childrenVisible } : null;\n    const icon = showChildrenIcon && hasChildren && (childrenVisible ? <IoIosArrowDown /> : <IoChevronRight />);\n    const styles = getStyles(theme);\n    return (\n      <span className={cx(styles.SpanTreeOffset, { [styles.SpanTreeOffsetParent]: hasChildren })} {...wrapperProps}>\n        {this.ancestorIds.map((ancestorId) => (\n          <span\n            key={ancestorId}\n            className={cx(styles.indentGuide, {\n              [styles.indentGuideActive]: this.props.hoverIndentGuideIds.has(ancestorId),\n            })}\n            data-ancestor-id={ancestorId}\n            data-test-id=\"SpanTreeOffset--indentGuide\"\n            onMouseEnter={(event) => this.handleMouseEnter(event, ancestorId)}\n            onMouseLeave={(event) => this.handleMouseLeave(event, ancestorId)}\n          />\n        ))}\n        {icon && (\n          <span\n            className={styles.iconWrapper}\n            onMouseEnter={(event) => this.handleMouseEnter(event, spanID)}\n            onMouseLeave={(event) => this.handleMouseLeave(event, spanID)}\n            data-test-id=\"icon-wrapper\"\n          >\n            {icon}\n          </span>\n        )}\n      </span>\n    );\n  }\n}\n\nexport default withTheme(UnthemedSpanTreeOffset);\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\nimport copy from 'copy-to-clipboard';\n\nimport { UITooltip, TooltipPlacement, UIButton } from '../uiElementsContext';\nimport { createStyle } from '../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    CopyIcon: css`\n      background-color: transparent;\n      border: none;\n      color: inherit;\n      height: 100%;\n      overflow: hidden;\n      padding: 0px;\n      &:focus {\n        background-color: rgba(255, 255, 255, 0.25);\n        color: inherit;\n      }\n    `,\n  };\n});\n\ntype PropsType = {\n  className?: string;\n  copyText: string;\n  icon?: string;\n  placement?: TooltipPlacement;\n  tooltipTitle: string;\n};\n\ntype StateType = {\n  hasCopied: boolean;\n};\n\nexport default class CopyIcon extends React.PureComponent<PropsType, StateType> {\n  static defaultProps: Partial<PropsType> = {\n    className: undefined,\n    icon: 'copy',\n    placement: 'left',\n  };\n\n  state = {\n    hasCopied: false,\n  };\n\n  handleClick = () => {\n    this.setState({\n      hasCopied: true,\n    });\n    copy(this.props.copyText);\n  };\n\n  handleTooltipVisibilityChange = (visible: boolean) => {\n    if (!visible && this.state.hasCopied) {\n      this.setState({\n        hasCopied: false,\n      });\n    }\n  };\n\n  render() {\n    const styles = getStyles();\n    return (\n      <UITooltip\n        arrowPointAtCenter\n        mouseLeaveDelay={0.5}\n        onVisibleChange={this.handleTooltipVisibilityChange}\n        placement={this.props.placement}\n        title={this.state.hasCopied ? 'Copied' : this.props.tooltipTitle}\n      >\n        <UIButton\n          className={cx(styles.CopyIcon, this.props.className)}\n          htmlType=\"button\"\n          icon={this.props.icon}\n          onClick={this.handleClick}\n        />\n      </UITooltip>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport jsonMarkup from 'json-markup';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport CopyIcon from '../../common/CopyIcon';\n\nimport { TNil } from '../../types';\nimport { TraceKeyValuePair, TraceLink } from '../../types/trace';\nimport { UIDropdown, UIIcon, UIMenu, UIMenuItem } from '../../uiElementsContext';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { ubInlineBlock, uWidth100 } from '../../uberUtilityStyles';\n\nconst copyIconClassName = 'copyIcon';\n\nexport const getStyles = createStyle((theme: Theme) => {\n  return {\n    KeyValueTable: css`\n      label: KeyValueTable;\n      background: ${autoColor(theme, '#fff')};\n      border: 1px solid ${autoColor(theme, '#ddd')};\n      margin-bottom: 0.7em;\n      max-height: 450px;\n      overflow: auto;\n    `,\n    body: css`\n      label: body;\n      vertical-align: baseline;\n    `,\n    row: css`\n      label: row;\n      & > td {\n        padding: 0.25rem 0.5rem;\n        padding: 0.25rem 0.5rem;\n        vertical-align: top;\n      }\n      &:nth-child(2n) > td {\n        background: ${autoColor(theme, '#f5f5f5')};\n      }\n      &:not(:hover) .${copyIconClassName} {\n        display: none;\n      }\n    `,\n    keyColumn: css`\n      label: keyColumn;\n      color: ${autoColor(theme, '#888')};\n      white-space: pre;\n      width: 125px;\n    `,\n    copyColumn: css`\n      label: copyColumn;\n      text-align: right;\n    `,\n    linkIcon: css`\n      label: linkIcon;\n      vertical-align: middle;\n      font-weight: bold;\n    `,\n  };\n});\n\nconst jsonObjectOrArrayStartRegex = /^(\\[|\\{)/;\n\nfunction parseIfComplexJson(value: any) {\n  // if the value is a string representing actual json object or array, then use json-markup\n  if (typeof value === 'string' && jsonObjectOrArrayStartRegex.test(value)) {\n    // otherwise just return as is\n    try {\n      return JSON.parse(value);\n      // eslint-disable-next-line no-empty\n    } catch (_) {}\n  }\n  return value;\n}\n\nexport const LinkValue = (props: { href: string; title?: string; children: React.ReactNode }) => {\n  const styles = getStyles(useTheme());\n  return (\n    <a href={props.href} title={props.title} target=\"_blank\" rel=\"noopener noreferrer\">\n      {props.children} <UIIcon className={styles.linkIcon} type=\"export\" />\n    </a>\n  );\n};\n\nLinkValue.defaultProps = {\n  title: '',\n};\n\nconst linkValueList = (links: TraceLink[]) => (\n  <UIMenu>\n    {links.map(({ text, url }, index) => (\n      // `index` is necessary in the key because url can repeat\n      <UIMenuItem key={`${url}-${index}`}>\n        <LinkValue href={url}>{text}</LinkValue>\n      </UIMenuItem>\n    ))}\n  </UIMenu>\n);\n\ntype KeyValuesTableProps = {\n  data: TraceKeyValuePair[];\n  linksGetter: ((pairs: TraceKeyValuePair[], index: number) => TraceLink[]) | TNil;\n};\n\nexport default function KeyValuesTable(props: KeyValuesTableProps) {\n  const { data, linksGetter } = props;\n  const styles = getStyles(useTheme());\n  return (\n    <div className={cx(styles.KeyValueTable)} data-test-id=\"KeyValueTable\">\n      <table className={uWidth100}>\n        <tbody className={styles.body}>\n          {data.map((row, i) => {\n            const markup = {\n              __html: jsonMarkup(parseIfComplexJson(row.value)),\n            };\n            const jsonTable = <div className={ubInlineBlock} dangerouslySetInnerHTML={markup} />;\n            const links = linksGetter ? linksGetter(data, i) : null;\n            let valueMarkup;\n            if (links && links.length === 1) {\n              valueMarkup = (\n                <div>\n                  <LinkValue href={links[0].url} title={links[0].text}>\n                    {jsonTable}\n                  </LinkValue>\n                </div>\n              );\n            } else if (links && links.length > 1) {\n              valueMarkup = (\n                <div>\n                  <UIDropdown overlay={linkValueList(links)} placement=\"bottomRight\" trigger={['click']}>\n                    <a>\n                      {jsonTable} <UIIcon className={styles.linkIcon} type=\"profile\" />\n                    </a>\n                  </UIDropdown>\n                </div>\n              );\n            } else {\n              valueMarkup = jsonTable;\n            }\n            return (\n              // `i` is necessary in the key because row.key can repeat\n              <tr className={styles.row} key={`${row.key}-${i}`}>\n                <td className={styles.keyColumn} data-test-id=\"KeyValueTable--keyColumn\">\n                  {row.key}\n                </td>\n                <td>{valueMarkup}</td>\n                <td className={styles.copyColumn}>\n                  <CopyIcon\n                    className={copyIconClassName}\n                    copyText={JSON.stringify(row, null, 2)}\n                    tooltipTitle=\"Copy JSON\"\n                  />\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport * as markers from './AccordianKeyValues.markers';\nimport KeyValuesTable from './KeyValuesTable';\nimport { TNil } from '../../types';\nimport { TraceKeyValuePair, TraceLink } from '../../types/trace';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { uAlignIcon, uTxEllipsis } from '../../uberUtilityStyles';\n\nexport const getStyles = createStyle((theme: Theme) => {\n  return {\n    header: css`\n      label: header;\n      cursor: pointer;\n      overflow: hidden;\n      padding: 0.25em 0.1em;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      &:hover {\n        background: ${autoColor(theme, '#e8e8e8')};\n      }\n    `,\n    headerEmpty: css`\n      label: headerEmpty;\n      background: none;\n      cursor: initial;\n    `,\n    headerHighContrast: css`\n      label: headerHighContrast;\n      &:hover {\n        background: ${autoColor(theme, '#ddd')};\n      }\n    `,\n    emptyIcon: css`\n      label: emptyIcon;\n      color: ${autoColor(theme, '#aaa')};\n    `,\n    summary: css`\n      label: summary;\n      display: inline;\n      list-style: none;\n      padding: 0;\n    `,\n    summaryItem: css`\n      label: summaryItem;\n      display: inline;\n      margin-left: 0.7em;\n      padding-right: 0.5rem;\n      border-right: 1px solid ${autoColor(theme, '#ddd')};\n      &:last-child {\n        padding-right: 0;\n        border-right: none;\n      }\n    `,\n    summaryLabel: css`\n      label: summaryLabel;\n      color: ${autoColor(theme, '#777')};\n    `,\n    summaryDelim: css`\n      label: summaryDelim;\n      color: ${autoColor(theme, '#bbb')};\n      padding: 0 0.2em;\n    `,\n  };\n});\n\ntype AccordianKeyValuesProps = {\n  className?: string | TNil;\n  data: TraceKeyValuePair[];\n  highContrast?: boolean;\n  interactive?: boolean;\n  isOpen: boolean;\n  label: string;\n  linksGetter: ((pairs: TraceKeyValuePair[], index: number) => TraceLink[]) | TNil;\n  onToggle?: null | (() => void);\n};\n\n// export for tests\nexport function KeyValuesSummary(props: { data?: TraceKeyValuePair[] }) {\n  const { data } = props;\n  const styles = getStyles(useTheme());\n\n  if (!Array.isArray(data) || !data.length) {\n    return null;\n  }\n\n  return (\n    <ul className={styles.summary}>\n      {data.map((item, i) => (\n        // `i` is necessary in the key because item.key can repeat\n        <li className={styles.summaryItem} key={`${item.key}-${i}`}>\n          <span className={styles.summaryLabel}>{item.key}</span>\n          <span className={styles.summaryDelim}>=</span>\n          {String(item.value)}\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nKeyValuesSummary.defaultProps = {\n  data: null,\n};\n\nexport default function AccordianKeyValues(props: AccordianKeyValuesProps) {\n  const { className, data, highContrast, interactive, isOpen, label, linksGetter, onToggle } = props;\n  const isEmpty = !Array.isArray(data) || !data.length;\n  const styles = getStyles(useTheme());\n  const iconCls = cx(uAlignIcon, { [styles.emptyIcon]: isEmpty });\n  let arrow: React.ReactNode | null = null;\n  let headerProps: {} | null = null;\n  if (interactive) {\n    arrow = isOpen ? <IoIosArrowDown className={iconCls} /> : <IoIosArrowRight className={iconCls} />;\n    headerProps = {\n      'aria-checked': isOpen,\n      onClick: isEmpty ? null : onToggle,\n      role: 'switch',\n    };\n  }\n\n  return (\n    <div className={cx(className, uTxEllipsis)}>\n      <div\n        className={cx(styles.header, {\n          [styles.headerEmpty]: isEmpty,\n          [styles.headerHighContrast]: highContrast && !isEmpty,\n        })}\n        {...headerProps}\n        data-test-id=\"AccordianKeyValues--header\"\n      >\n        {arrow}\n        <strong data-test={markers.LABEL}>\n          {label}\n          {isOpen || ':'}\n        </strong>\n        {!isOpen && <KeyValuesSummary data={data} />}\n      </div>\n      {isOpen && <KeyValuesTable data={data} linksGetter={linksGetter} />}\n    </div>\n  );\n}\n\nAccordianKeyValues.defaultProps = {\n  className: null,\n  highContrast: false,\n  interactive: true,\n  onToggle: null,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const LABEL = 'label';\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { sortBy as _sortBy } from 'lodash';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\nimport { css } from '@emotion/css';\n\nimport AccordianKeyValues from './AccordianKeyValues';\nimport { formatDuration } from '../utils';\nimport { TNil } from '../../types';\nimport { TraceLog, TraceKeyValuePair, TraceLink } from '../../types/trace';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { uAlignIcon, ubMb1 } from '../../uberUtilityStyles';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    AccordianLogs: css`\n      label: AccordianLogs;\n      border: 1px solid ${autoColor(theme, '#d8d8d8')};\n      position: relative;\n      margin-bottom: 0.25rem;\n    `,\n    AccordianLogsHeader: css`\n      label: AccordianLogsHeader;\n      background: ${autoColor(theme, '#e4e4e4')};\n      color: inherit;\n      display: block;\n      padding: 0.25rem 0.5rem;\n      &:hover {\n        background: ${autoColor(theme, '#dadada')};\n      }\n    `,\n    AccordianLogsContent: css`\n      label: AccordianLogsContent;\n      background: ${autoColor(theme, '#f0f0f0')};\n      border-top: 1px solid ${autoColor(theme, '#d8d8d8')};\n      padding: 0.5rem 0.5rem 0.25rem 0.5rem;\n    `,\n    AccordianLogsFooter: css`\n      label: AccordianLogsFooter;\n      color: ${autoColor(theme, '#999')};\n    `,\n  };\n});\n\ntype AccordianLogsProps = {\n  interactive?: boolean;\n  isOpen: boolean;\n  linksGetter: ((pairs: TraceKeyValuePair[], index: number) => TraceLink[]) | TNil;\n  logs: TraceLog[];\n  onItemToggle?: (log: TraceLog) => void;\n  onToggle?: () => void;\n  openedItems?: Set<TraceLog>;\n  timestamp: number;\n};\n\nexport default function AccordianLogs(props: AccordianLogsProps) {\n  const { interactive, isOpen, linksGetter, logs, openedItems, onItemToggle, onToggle, timestamp } = props;\n  let arrow: React.ReactNode | null = null;\n  let HeaderComponent: 'span' | 'a' = 'span';\n  let headerProps: {} | null = null;\n  if (interactive) {\n    arrow = isOpen ? <IoIosArrowDown className={uAlignIcon} /> : <IoIosArrowRight className=\"u-align-icon\" />;\n    HeaderComponent = 'a';\n    headerProps = {\n      'aria-checked': isOpen,\n      onClick: onToggle,\n      role: 'switch',\n    };\n  }\n\n  const styles = getStyles(useTheme());\n  return (\n    <div className={styles.AccordianLogs}>\n      <HeaderComponent className={styles.AccordianLogsHeader} {...headerProps}>\n        {arrow} <strong>Logs</strong> ({logs.length})\n      </HeaderComponent>\n      {isOpen && (\n        <div className={styles.AccordianLogsContent}>\n          {_sortBy(logs, 'timestamp').map((log, i) => (\n            <AccordianKeyValues\n              // `i` is necessary in the key because timestamps can repeat\n              key={`${log.timestamp}-${i}`}\n              className={i < logs.length - 1 ? ubMb1 : null}\n              data={log.fields || []}\n              highContrast\n              interactive={interactive}\n              isOpen={openedItems ? openedItems.has(log) : false}\n              label={`${formatDuration(log.timestamp - timestamp)}`}\n              linksGetter={linksGetter}\n              onToggle={interactive && onItemToggle ? () => onItemToggle(log) : null}\n            />\n          ))}\n          <small className={styles.AccordianLogsFooter}>\n            Log timestamps are relative to the start time of the full trace.\n          </small>\n        </div>\n      )}\n    </div>\n  );\n}\n\nAccordianLogs.defaultProps = {\n  interactive: true,\n  linksGetter: undefined,\n  onItemToggle: undefined,\n  onToggle: undefined,\n  openedItems: undefined,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport cx from 'classnames';\nimport { css } from '@emotion/css';\nimport { groupBy as _groupBy } from 'lodash';\nimport React from 'react';\nimport { compose, onlyUpdateForKeys, withProps, withState } from 'recompose';\nimport { autoColor, createStyle, Theme } from '../Theme';\nimport { TraceSpan } from '../types/trace';\nimport { TNil } from '../types';\nimport { UIPopover } from '../uiElementsContext';\nimport AccordianLogs from './SpanDetail/AccordianLogs';\nimport { ViewedBoundsFunctionType } from './utils';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    wrapper: css`\n      label: wrapper;\n      bottom: 0;\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n      overflow: hidden;\n      z-index: 0;\n    `,\n    bar: css`\n      label: bar;\n      border-radius: 3px;\n      min-width: 2px;\n      position: absolute;\n      height: 36%;\n      top: 32%;\n    `,\n    rpc: css`\n      label: rpc;\n      position: absolute;\n      top: 35%;\n      bottom: 35%;\n      z-index: 1;\n    `,\n    label: css`\n      label: label;\n      color: #aaa;\n      font-size: 12px;\n      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n      line-height: 1em;\n      white-space: nowrap;\n      padding: 0 0.5em;\n      position: absolute;\n    `,\n    logMarker: css`\n      label: logMarker;\n      background-color: ${autoColor(theme, '#2c3235')};\n      cursor: pointer;\n      height: 60%;\n      min-width: 1px;\n      position: absolute;\n      top: 20%;\n      &:hover {\n        background-color: ${autoColor(theme, '#464c54')};\n      }\n      &::before,\n      &::after {\n        content: '';\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        right: 0;\n        border: 1px solid transparent;\n      }\n      &::after {\n        left: 0;\n      }\n    `,\n  };\n});\n\ntype TCommonProps = {\n  color: string;\n  onClick?: (evt: React.MouseEvent<any>) => void;\n  viewEnd: number;\n  viewStart: number;\n  getViewedBounds: ViewedBoundsFunctionType;\n  rpc:\n    | {\n        viewStart: number;\n        viewEnd: number;\n        color: string;\n      }\n    | TNil;\n  traceStartTime: number;\n  span: TraceSpan;\n  className?: string;\n  labelClassName?: string;\n  theme: Theme;\n};\n\ntype TInnerProps = {\n  label: string;\n  setLongLabel: () => void;\n  setShortLabel: () => void;\n} & TCommonProps;\n\ntype TOuterProps = {\n  longLabel: string;\n  shortLabel: string;\n} & TCommonProps;\n\nfunction toPercent(value: number) {\n  return `${(value * 100).toFixed(1)}%`;\n}\n\nfunction SpanBar(props: TInnerProps) {\n  const {\n    viewEnd,\n    viewStart,\n    getViewedBounds,\n    color,\n    label,\n    onClick,\n    setLongLabel,\n    setShortLabel,\n    rpc,\n    traceStartTime,\n    span,\n    theme,\n    className,\n    labelClassName,\n  } = props;\n  // group logs based on timestamps\n  const logGroups = _groupBy(span.logs, (log) => {\n    const posPercent = getViewedBounds(log.timestamp, log.timestamp).start;\n    // round to the nearest 0.2%\n    return toPercent(Math.round(posPercent * 500) / 500);\n  });\n  const styles = getStyles(theme);\n\n  return (\n    <div\n      className={cx(styles.wrapper, className)}\n      onClick={onClick}\n      onMouseLeave={setShortLabel}\n      onMouseOver={setLongLabel}\n      aria-hidden\n      data-test-id=\"SpanBar--wrapper\"\n    >\n      <div\n        aria-label={label}\n        className={styles.bar}\n        style={{\n          background: color,\n          left: toPercent(viewStart),\n          width: toPercent(viewEnd - viewStart),\n        }}\n      >\n        <div className={cx(styles.label, labelClassName)} data-test-id=\"SpanBar--label\">\n          {label}\n        </div>\n      </div>\n      <div>\n        {Object.keys(logGroups).map((positionKey) => (\n          <UIPopover\n            key={positionKey}\n            placement=\"topLeft\"\n            content={\n              <AccordianLogs interactive={false} isOpen logs={logGroups[positionKey]} timestamp={traceStartTime} />\n            }\n          >\n            <div className={styles.logMarker} style={{ left: positionKey }} />\n          </UIPopover>\n        ))}\n      </div>\n      {rpc && (\n        <div\n          className={styles.rpc}\n          style={{\n            background: rpc.color,\n            left: toPercent(rpc.viewStart),\n            width: toPercent(rpc.viewEnd - rpc.viewStart),\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default compose<TInnerProps, TOuterProps>(\n  withState('label', 'setLabel', (props: { shortLabel: string }) => props.shortLabel),\n  withProps(\n    ({\n      setLabel,\n      shortLabel,\n      longLabel,\n    }: {\n      setLabel: (label: string) => void;\n      shortLabel: string;\n      longLabel: string;\n    }) => ({\n      setLongLabel: () => setLabel(longLabel),\n      setShortLabel: () => setLabel(shortLabel),\n    })\n  ),\n  onlyUpdateForKeys(['label', 'rpc', 'viewStart', 'viewEnd'])\n)(SpanBar);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport IoAlert from 'react-icons/lib/io/alert';\nimport IoArrowRightA from 'react-icons/lib/io/arrow-right-a';\nimport IoNetwork from 'react-icons/lib/io/network';\nimport MdFileUpload from 'react-icons/lib/md/file-upload';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport ReferencesButton from './ReferencesButton';\nimport TimelineRow from './TimelineRow';\nimport { formatDuration, ViewedBoundsFunctionType } from './utils';\nimport SpanTreeOffset from './SpanTreeOffset';\nimport SpanBar from './SpanBar';\nimport Ticks from './Ticks';\n\nimport { TNil } from '../types';\nimport { TraceSpan } from '../types/trace';\nimport { autoColor, createStyle, Theme, withTheme } from '../Theme';\n\nconst spanBarClassName = 'spanBar';\nconst spanBarLabelClassName = 'spanBarLabel';\nconst nameWrapperClassName = 'nameWrapper';\nconst nameWrapperMatchingFilterClassName = 'nameWrapperMatchingFilter';\nconst viewClassName = 'jaegerView';\nconst nameColumnClassName = 'nameColumn';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    nameWrapper: css`\n      label: nameWrapper;\n      line-height: 27px;\n      overflow: hidden;\n      display: flex;\n    `,\n    nameWrapperMatchingFilter: css`\n      label: nameWrapperMatchingFilter;\n      background-color: ${autoColor(theme, '#fffce4')};\n    `,\n    nameColumn: css`\n      label: nameColumn;\n      position: relative;\n      white-space: nowrap;\n      z-index: 1;\n      &:hover {\n        z-index: 1;\n      }\n    `,\n    endpointName: css`\n      label: endpointName;\n      color: ${autoColor(theme, '#808080')};\n    `,\n    view: css`\n      label: view;\n      position: relative;\n    `,\n    viewExpanded: css`\n      label: viewExpanded;\n      background: ${autoColor(theme, '#f8f8f8')};\n      outline: 1px solid ${autoColor(theme, '#ddd')};\n    `,\n    viewExpandedAndMatchingFilter: css`\n      label: viewExpandedAndMatchingFilter;\n      background: ${autoColor(theme, '#fff3d7')};\n      outline: 1px solid ${autoColor(theme, '#ddd')};\n    `,\n    row: css`\n      label: row;\n      &:hover .${spanBarClassName} {\n        opacity: 1;\n      }\n      &:hover .${spanBarLabelClassName} {\n        color: ${autoColor(theme, '#000')};\n      }\n      &:hover .${nameWrapperClassName} {\n        background: #f8f8f8;\n        background: linear-gradient(\n          90deg,\n          ${autoColor(theme, '#fafafa')},\n          ${autoColor(theme, '#f8f8f8')} 75%,\n          ${autoColor(theme, '#eee')}\n        );\n      }\n      &:hover .${viewClassName} {\n        background-color: ${autoColor(theme, '#f5f5f5')};\n        outline: 1px solid ${autoColor(theme, '#ddd')};\n      }\n    `,\n    rowClippingLeft: css`\n      label: rowClippingLeft;\n      & .${nameColumnClassName}::before {\n        content: ' ';\n        height: 100%;\n        position: absolute;\n        width: 6px;\n        background-image: linear-gradient(\n          to right,\n          ${autoColor(theme, 'rgba(25, 25, 25, 0.25)')},\n          ${autoColor(theme, 'rgba(32, 32, 32, 0)')}\n        );\n        left: 100%;\n        z-index: -1;\n      }\n    `,\n    rowClippingRight: css`\n      label: rowClippingRight;\n      & .${viewClassName}::before {\n        content: ' ';\n        height: 100%;\n        position: absolute;\n        width: 6px;\n        background-image: linear-gradient(\n          to left,\n          ${autoColor(theme, 'rgba(25, 25, 25, 0.25)')},\n          ${autoColor(theme, 'rgba(25, 25, 25, 0.25)')}\n        );\n        right: 0%;\n        z-index: 1;\n      }\n    `,\n    rowExpanded: css`\n      label: rowExpanded;\n      & .${spanBarClassName} {\n        opacity: 1;\n      }\n      & .${spanBarLabelClassName} {\n        color: ${autoColor(theme, '#000')};\n      }\n      & .${nameWrapperClassName}, &:hover .${nameWrapperClassName} {\n        background: ${autoColor(theme, '#f0f0f0')};\n        box-shadow: 0 1px 0 ${autoColor(theme, '#ddd')};\n      }\n      & .${nameWrapperMatchingFilterClassName} {\n        background: ${autoColor(theme, '#fff3d7')};\n      }\n      &:hover .${viewClassName} {\n        background: ${autoColor(theme, '#eee')};\n      }\n    `,\n    rowMatchingFilter: css`\n      label: rowMatchingFilter;\n      background-color: ${autoColor(theme, '#fffce4')};\n      &:hover .${nameWrapperClassName} {\n        background: linear-gradient(\n          90deg,\n          ${autoColor(theme, '#fff5e1')},\n          ${autoColor(theme, '#fff5e1')} 75%,\n          ${autoColor(theme, '#ffe6c9')}\n        );\n      }\n      &:hover .${viewClassName} {\n        background-color: ${autoColor(theme, '#fff3d7')};\n        outline: 1px solid ${autoColor(theme, '#ddd')};\n      }\n    `,\n\n    rowExpandedAndMatchingFilter: css`\n      label: rowExpandedAndMatchingFilter;\n      &:hover .${viewClassName} {\n        background: ${autoColor(theme, '#ffeccf')};\n      }\n    `,\n\n    name: css`\n      label: name;\n      color: ${autoColor(theme, '#000')};\n      cursor: pointer;\n      flex: 1 1 auto;\n      outline: none;\n      overflow: hidden;\n      padding-left: 4px;\n      padding-right: 0.25em;\n      position: relative;\n      text-overflow: ellipsis;\n      &::before {\n        content: ' ';\n        position: absolute;\n        top: 4px;\n        bottom: 4px;\n        left: 0;\n        border-left: 4px solid;\n        border-left-color: inherit;\n      }\n\n      /* This is so the hit area of the span-name extends the rest of the width of the span-name column */\n      &::after {\n        background: transparent;\n        bottom: 0;\n        content: ' ';\n        left: 0;\n        position: absolute;\n        top: 0;\n        width: 1000px;\n      }\n      &:focus {\n        text-decoration: none;\n      }\n      &:hover > small {\n        color: ${autoColor(theme, '#000')};\n      }\n    `,\n    nameDetailExpanded: css`\n      label: nameDetailExpanded;\n      &::before {\n        bottom: 0;\n      }\n    `,\n    svcName: css`\n      label: svcName;\n      padding: 0 0.25rem 0 0.5rem;\n      font-size: 1.05em;\n    `,\n    svcNameChildrenCollapsed: css`\n      label: svcNameChildrenCollapsed;\n      font-weight: bold;\n      font-style: italic;\n    `,\n    errorIcon: css`\n      label: errorIcon;\n      border-radius: 6.5px;\n      color: ${autoColor(theme, '#fff')};\n      font-size: 0.85em;\n      margin-right: 0.25rem;\n      padding: 1px;\n    `,\n    rpcColorMarker: css`\n      label: rpcColorMarker;\n      border-radius: 6.5px;\n      display: inline-block;\n      font-size: 0.85em;\n      height: 1em;\n      margin-right: 0.25rem;\n      padding: 1px;\n      width: 1em;\n      vertical-align: middle;\n    `,\n    labelRight: css`\n      label: labelRight;\n      left: 100%;\n    `,\n    labelLeft: css`\n      label: labelLeft;\n      right: 100%;\n    `,\n  };\n});\n\ntype SpanBarRowProps = {\n  className?: string;\n  theme: Theme;\n  color: string;\n  columnDivision: number;\n  isChildrenExpanded: boolean;\n  isDetailExpanded: boolean;\n  isMatchingFilter: boolean;\n  onDetailToggled: (spanID: string) => void;\n  onChildrenToggled: (spanID: string) => void;\n  numTicks: number;\n  rpc?:\n    | {\n        viewStart: number;\n        viewEnd: number;\n        color: string;\n        operationName: string;\n        serviceName: string;\n      }\n    | TNil;\n  showErrorIcon: boolean;\n  getViewedBounds: ViewedBoundsFunctionType;\n  traceStartTime: number;\n  span: TraceSpan;\n  focusSpan: (spanID: string) => void;\n  hoverIndentGuideIds: Set<string>;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  clippingLeft?: boolean;\n  clippingRight?: boolean;\n  createSpanLink?: (\n    span: TraceSpan\n  ) => { href: string; onClick?: (e: React.MouseEvent) => void; content: React.ReactNode };\n};\n\n/**\n * This was originally a stateless function, but changing to a PureComponent\n * reduced the render time of expanding a span row detail by ~50%. This is\n * even true in the case where the stateless function has the same prop types as\n * this class and arrow functions are created in the stateless function as\n * handlers to the onClick props. E.g. for now, the PureComponent is more\n * performance than the stateless function.\n */\nexport class UnthemedSpanBarRow extends React.PureComponent<SpanBarRowProps> {\n  static displayName = 'UnthemedSpanBarRow';\n  static defaultProps: Partial<SpanBarRowProps> = {\n    className: '',\n    rpc: null,\n  };\n\n  _detailToggle = () => {\n    this.props.onDetailToggled(this.props.span.spanID);\n  };\n\n  _childrenToggle = () => {\n    this.props.onChildrenToggled(this.props.span.spanID);\n  };\n\n  render() {\n    const {\n      className,\n      color,\n      columnDivision,\n      isChildrenExpanded,\n      isDetailExpanded,\n      isMatchingFilter,\n      numTicks,\n      rpc,\n      showErrorIcon,\n      getViewedBounds,\n      traceStartTime,\n      span,\n      focusSpan,\n      hoverIndentGuideIds,\n      addHoverIndentGuideId,\n      removeHoverIndentGuideId,\n      clippingLeft,\n      clippingRight,\n      theme,\n      createSpanLink,\n    } = this.props;\n    const {\n      duration,\n      hasChildren: isParent,\n      operationName,\n      process: { serviceName },\n    } = span;\n    const label = formatDuration(duration);\n    const viewBounds = getViewedBounds(span.startTime, span.startTime + span.duration);\n    const viewStart = viewBounds.start;\n    const viewEnd = viewBounds.end;\n    const styles = getStyles(theme);\n\n    const labelDetail = `${serviceName}::${operationName}`;\n    let longLabel;\n    let hintClassName;\n    if (viewStart > 1 - viewEnd) {\n      longLabel = `${labelDetail} | ${label}`;\n      hintClassName = styles.labelLeft;\n    } else {\n      longLabel = `${label} | ${labelDetail}`;\n      hintClassName = styles.labelRight;\n    }\n\n    return (\n      <TimelineRow\n        className={cx(\n          styles.row,\n          {\n            [styles.rowExpanded]: isDetailExpanded,\n            [styles.rowMatchingFilter]: isMatchingFilter,\n            [styles.rowExpandedAndMatchingFilter]: isMatchingFilter && isDetailExpanded,\n            [styles.rowClippingLeft]: clippingLeft,\n            [styles.rowClippingRight]: clippingRight,\n          },\n          className\n        )}\n      >\n        <TimelineRow.Cell className={cx(styles.nameColumn, nameColumnClassName)} width={columnDivision}>\n          <div\n            className={cx(styles.nameWrapper, nameWrapperClassName, {\n              [styles.nameWrapperMatchingFilter]: isMatchingFilter,\n              nameWrapperMatchingFilter: isMatchingFilter,\n            })}\n          >\n            <SpanTreeOffset\n              childrenVisible={isChildrenExpanded}\n              span={span}\n              onClick={isParent ? this._childrenToggle : undefined}\n              hoverIndentGuideIds={hoverIndentGuideIds}\n              addHoverIndentGuideId={addHoverIndentGuideId}\n              removeHoverIndentGuideId={removeHoverIndentGuideId}\n            />\n            <a\n              className={cx(styles.name, { [styles.nameDetailExpanded]: isDetailExpanded })}\n              aria-checked={isDetailExpanded}\n              title={labelDetail}\n              onClick={this._detailToggle}\n              role=\"switch\"\n              style={{ borderColor: color }}\n              tabIndex={0}\n            >\n              <span\n                className={cx(styles.svcName, {\n                  [styles.svcNameChildrenCollapsed]: isParent && !isChildrenExpanded,\n                })}\n              >\n                {showErrorIcon && (\n                  <IoAlert\n                    style={{\n                      backgroundColor: span.errorIconColor\n                        ? autoColor(theme, span.errorIconColor)\n                        : autoColor(theme, '#db2828'),\n                    }}\n                    className={styles.errorIcon}\n                  />\n                )}\n                {serviceName}{' '}\n                {rpc && (\n                  <span>\n                    <IoArrowRightA /> <i className={styles.rpcColorMarker} style={{ background: rpc.color }} />\n                    {rpc.serviceName}\n                  </span>\n                )}\n              </span>\n              <small className={styles.endpointName}>{rpc ? rpc.operationName : operationName}</small>\n            </a>\n            {createSpanLink &&\n              (() => {\n                const link = createSpanLink(span);\n                return (\n                  <a\n                    href={link.href}\n                    // Needs to have target otherwise preventDefault would not work due to angularRouter.\n                    target={'_blank'}\n                    style={{ marginRight: '5px' }}\n                    rel=\"noopener noreferrer\"\n                    onClick={\n                      link.onClick\n                        ? (event) => {\n                            if (!(event.ctrlKey || event.metaKey || event.shiftKey) && link.onClick) {\n                              event.preventDefault();\n                              link.onClick(event);\n                            }\n                          }\n                        : undefined\n                    }\n                  >\n                    {link.content}\n                  </a>\n                );\n              })()}\n\n            {span.references && span.references.length > 1 && (\n              <ReferencesButton\n                references={span.references}\n                tooltipText=\"Contains multiple references\"\n                focusSpan={focusSpan}\n              >\n                <IoNetwork />\n              </ReferencesButton>\n            )}\n            {span.subsidiarilyReferencedBy && span.subsidiarilyReferencedBy.length > 0 && (\n              <ReferencesButton\n                references={span.subsidiarilyReferencedBy}\n                tooltipText={`This span is referenced by ${\n                  span.subsidiarilyReferencedBy.length === 1 ? 'another span' : 'multiple other spans'\n                }`}\n                focusSpan={focusSpan}\n              >\n                <MdFileUpload />\n              </ReferencesButton>\n            )}\n          </div>\n        </TimelineRow.Cell>\n        <TimelineRow.Cell\n          className={cx(styles.view, viewClassName, {\n            [styles.viewExpanded]: isDetailExpanded,\n            [styles.viewExpandedAndMatchingFilter]: isMatchingFilter && isDetailExpanded,\n          })}\n          data-test-id=\"span-view\"\n          style={{ cursor: 'pointer' }}\n          width={1 - columnDivision}\n          onClick={this._detailToggle}\n        >\n          <Ticks numTicks={numTicks} />\n          <SpanBar\n            rpc={rpc}\n            viewStart={viewStart}\n            viewEnd={viewEnd}\n            theme={theme}\n            getViewedBounds={getViewedBounds}\n            color={color}\n            shortLabel={label}\n            longLabel={longLabel}\n            traceStartTime={traceStartTime}\n            span={span}\n            labelClassName={`${spanBarLabelClassName} ${hintClassName}`}\n            className={spanBarClassName}\n          />\n        </TimelineRow.Cell>\n      </TimelineRow>\n    );\n  }\n}\n\nexport default withTheme(UnthemedSpanBarRow);\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport { createStyle } from '../../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    TextList: css`\n      max-height: 450px;\n      overflow: auto;\n    `,\n    List: css`\n      width: 100%;\n      list-style: none;\n      padding: 0;\n      margin: 0;\n    `,\n    item: css`\n      padding: 0.25rem 0.5rem;\n      vertical-align: top;\n      &:nth-child(2n) {\n        background: #f5f5f5;\n      }\n    `,\n  };\n});\n\ntype TextListProps = {\n  data: string[];\n};\n\nexport default function TextList(props: TextListProps) {\n  const { data } = props;\n  const styles = getStyles();\n  return (\n    <div className={cx(styles.TextList)} data-test-id=\"TextList\">\n      <ul className={styles.List}>\n        {data.map((row, i) => {\n          return (\n            // `i` is necessary in the key because row.key can repeat\n            <li className={styles.item} key={`${i}`}>\n              {row}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\nimport TextList from './TextList';\nimport { TNil } from '../../types';\nimport { getStyles as getAccordianKeyValuesStyles } from './AccordianKeyValues';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { uAlignIcon } from '../../uberUtilityStyles';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    header: css`\n      cursor: pointer;\n      overflow: hidden;\n      padding: 0.25em 0.1em;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      &:hover {\n        background: ${autoColor(theme, '#e8e8e8')};\n      }\n    `,\n  };\n});\n\ntype AccordianTextProps = {\n  className?: string | TNil;\n  headerClassName?: string | TNil;\n  data: string[];\n  highContrast?: boolean;\n  interactive?: boolean;\n  isOpen: boolean;\n  label: React.ReactNode | string;\n  onToggle?: null | (() => void);\n  TextComponent?: React.ElementType<{ data: string[] }>;\n};\n\nfunction DefaultTextComponent({ data }: { data: string[] }) {\n  return <TextList data={data} />;\n}\n\nexport default function AccordianText(props: AccordianTextProps) {\n  const {\n    className,\n    data,\n    headerClassName,\n    interactive,\n    isOpen,\n    label,\n    onToggle,\n    TextComponent = DefaultTextComponent,\n  } = props;\n  const isEmpty = !Array.isArray(data) || !data.length;\n  const accordianKeyValuesStyles = getAccordianKeyValuesStyles(useTheme());\n  const iconCls = cx(uAlignIcon, { [accordianKeyValuesStyles.emptyIcon]: isEmpty });\n  let arrow: React.ReactNode | null = null;\n  let headerProps: {} | null = null;\n  if (interactive) {\n    arrow = isOpen ? <IoIosArrowDown className={iconCls} /> : <IoIosArrowRight className={iconCls} />;\n    headerProps = {\n      'aria-checked': isOpen,\n      onClick: isEmpty ? null : onToggle,\n      role: 'switch',\n    };\n  }\n  const styles = getStyles(useTheme());\n  return (\n    <div className={className || ''}>\n      <div className={cx(styles.header, headerClassName)} {...headerProps} data-test-id=\"AccordianText--header\">\n        {arrow}\n        <strong>{label}</strong> ({data.length})\n      </div>\n      {isOpen && <TextComponent data={data} />}\n    </div>\n  );\n}\n\nAccordianText.defaultProps = {\n  className: null,\n  highContrast: false,\n  interactive: true,\n  onToggle: null,\n};\n","// Copyright (c) 2019 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\nimport { TraceSpanReference } from '../../types/trace';\nimport ReferenceLink from '../../url/ReferenceLink';\n\nimport { createStyle } from '../../Theme';\nimport { uAlignIcon } from '../../uberUtilityStyles';\n\nconst getStyles = createStyle(() => {\n  return {\n    ReferencesList: css`\n      background: #fff;\n      border: 1px solid #ddd;\n      margin-bottom: 0.7em;\n      max-height: 450px;\n      overflow: auto;\n    `,\n    list: css`\n      width: 100%;\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      background: #fff;\n    `,\n    itemContent: css`\n      padding: 0.25rem 0.5rem;\n      display: flex;\n      width: 100%;\n      justify-content: space-between;\n    `,\n    item: css`\n      &:nth-child(2n) {\n        background: #f5f5f5;\n      }\n    `,\n    debugInfo: css`\n      letter-spacing: 0.25px;\n      margin: 0.5em 0 0;\n    `,\n    debugLabel: css`\n      margin: 0 5px 0 5px;\n      &::before {\n        color: #bbb;\n        content: attr(data-label);\n      }\n    `,\n  };\n});\n\ntype AccordianReferencesProps = {\n  data: TraceSpanReference[];\n  highContrast?: boolean;\n  interactive?: boolean;\n  isOpen: boolean;\n  onToggle?: null | (() => void);\n  focusSpan: (uiFind: string) => void;\n};\n\ntype ReferenceItemProps = {\n  data: TraceSpanReference[];\n  focusSpan: (uiFind: string) => void;\n};\n\n// export for test\nexport function References(props: ReferenceItemProps) {\n  const { data, focusSpan } = props;\n  const styles = getStyles();\n\n  return (\n    <div className={cx(styles.ReferencesList)}>\n      <ul className={styles.list}>\n        {data.map((reference) => {\n          return (\n            <li className={styles.item} key={`${reference.spanID}`}>\n              <ReferenceLink reference={reference} focusSpan={focusSpan}>\n                <span className={styles.itemContent}>\n                  {reference.span ? (\n                    <span>\n                      <span className=\"span-svc-name\">{reference.span.process.serviceName}</span>\n                      <small className=\"endpoint-name\">{reference.span.operationName}</small>\n                    </span>\n                  ) : (\n                    <span className=\"span-svc-name\">&lt; span in another trace &gt;</span>\n                  )}\n                  <small className={styles.debugInfo}>\n                    <span className={styles.debugLabel} data-label=\"Reference Type:\">\n                      {reference.refType}\n                    </span>\n                    <span className={styles.debugLabel} data-label=\"SpanID:\">\n                      {reference.spanID}\n                    </span>\n                  </small>\n                </span>\n              </ReferenceLink>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n\nexport default class AccordianReferences extends React.PureComponent<AccordianReferencesProps> {\n  static defaultProps: Partial<AccordianReferencesProps> = {\n    highContrast: false,\n    interactive: true,\n    onToggle: null,\n  };\n\n  render() {\n    const { data, interactive, isOpen, onToggle, focusSpan } = this.props;\n    const isEmpty = !Array.isArray(data) || !data.length;\n    const iconCls = uAlignIcon;\n    let arrow: React.ReactNode | null = null;\n    let headerProps: {} | null = null;\n    if (interactive) {\n      arrow = isOpen ? <IoIosArrowDown className={iconCls} /> : <IoIosArrowRight className={iconCls} />;\n      headerProps = {\n        'aria-checked': isOpen,\n        onClick: isEmpty ? null : onToggle,\n        role: 'switch',\n      };\n    }\n    return (\n      <div>\n        <div {...headerProps}>\n          {arrow}\n          <strong>\n            <span>References</span>\n          </strong>{' '}\n          ({data.length})\n        </div>\n        {isOpen && <References data={data} focusSpan={focusSpan} />}\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport AccordianKeyValues from './AccordianKeyValues';\nimport AccordianLogs from './AccordianLogs';\nimport AccordianText from './AccordianText';\nimport DetailState from './DetailState';\nimport { formatDuration } from '../utils';\nimport CopyIcon from '../../common/CopyIcon';\nimport LabeledList from '../../common/LabeledList';\n\nimport { TNil } from '../../types';\nimport { TraceKeyValuePair, TraceLink, TraceLog, TraceSpan } from '../../types/trace';\nimport AccordianReferences from './AccordianReferences';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { UIDivider } from '../../uiElementsContext';\nimport { ubFlex, ubFlexAuto, ubItemsCenter, ubM0, ubMb1, ubMy1, ubTxRightAlign } from '../../uberUtilityStyles';\nimport { DataLinkButton, TextArea } from '@grafana/ui';\nimport { CreateSpanLink } from '../types';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    divider: css`\n      label: divider;\n      background: ${autoColor(theme, '#ddd')};\n    `,\n    dividerVertical: css`\n      label: dividerVertical;\n      display: block;\n      height: 1px;\n      width: 100%;\n      margin: 24px 0;\n      clear: both;\n      vertical-align: middle;\n      position: relative;\n      top: -0.06em;\n    `,\n    debugInfo: css`\n      label: debugInfo;\n      display: block;\n      letter-spacing: 0.25px;\n      margin: 0.5em 0 -0.75em;\n      text-align: right;\n    `,\n    debugLabel: css`\n      label: debugLabel;\n      &::before {\n        color: ${autoColor(theme, '#bbb')};\n        content: attr(data-label);\n      }\n    `,\n    debugValue: css`\n      label: debugValue;\n      background-color: inherit;\n      border: none;\n      color: ${autoColor(theme, '#888')};\n      cursor: pointer;\n      &:hover {\n        color: ${autoColor(theme, '#333')};\n      }\n    `,\n    AccordianWarnings: css`\n      label: AccordianWarnings;\n      background: ${autoColor(theme, '#fafafa')};\n      border: 1px solid ${autoColor(theme, '#e4e4e4')};\n      margin-bottom: 0.25rem;\n    `,\n    AccordianWarningsHeader: css`\n      label: AccordianWarningsHeader;\n      background: ${autoColor(theme, '#fff7e6')};\n      padding: 0.25rem 0.5rem;\n      &:hover {\n        background: ${autoColor(theme, '#ffe7ba')};\n      }\n    `,\n    AccordianWarningsHeaderOpen: css`\n      label: AccordianWarningsHeaderOpen;\n      border-bottom: 1px solid ${autoColor(theme, '#e8e8e8')};\n    `,\n    AccordianWarningsLabel: css`\n      label: AccordianWarningsLabel;\n      color: ${autoColor(theme, '#d36c08')};\n    `,\n    Textarea: css`\n      word-break: break-all;\n      white-space: pre;\n    `,\n  };\n});\n\ntype SpanDetailProps = {\n  detailState: DetailState;\n  linksGetter: ((links: TraceKeyValuePair[], index: number) => TraceLink[]) | TNil;\n  logItemToggle: (spanID: string, log: TraceLog) => void;\n  logsToggle: (spanID: string) => void;\n  processToggle: (spanID: string) => void;\n  span: TraceSpan;\n  tagsToggle: (spanID: string) => void;\n  traceStartTime: number;\n  warningsToggle: (spanID: string) => void;\n  stackTracesToggle: (spanID: string) => void;\n  referencesToggle: (spanID: string) => void;\n  focusSpan: (uiFind: string) => void;\n  createSpanLink?: CreateSpanLink;\n};\n\nexport default function SpanDetail(props: SpanDetailProps) {\n  const {\n    detailState,\n    linksGetter,\n    logItemToggle,\n    logsToggle,\n    processToggle,\n    span,\n    tagsToggle,\n    traceStartTime,\n    warningsToggle,\n    stackTracesToggle,\n    referencesToggle,\n    focusSpan,\n    createSpanLink,\n  } = props;\n  const {\n    isTagsOpen,\n    isProcessOpen,\n    logs: logsState,\n    isWarningsOpen,\n    isReferencesOpen,\n    isStackTracesOpen,\n  } = detailState;\n  const {\n    operationName,\n    process,\n    duration,\n    relativeStartTime,\n    spanID,\n    logs,\n    tags,\n    warnings,\n    references,\n    stackTraces,\n  } = span;\n  const overviewItems = [\n    {\n      key: 'svc',\n      label: 'Service:',\n      value: process.serviceName,\n    },\n    {\n      key: 'duration',\n      label: 'Duration:',\n      value: formatDuration(duration),\n    },\n    {\n      key: 'start',\n      label: 'Start Time:',\n      value: formatDuration(relativeStartTime),\n    },\n  ];\n  const deepLinkCopyText = `${window.location.origin}${window.location.pathname}?uiFind=${spanID}`;\n  const styles = getStyles(useTheme());\n  const link = createSpanLink?.(span);\n\n  return (\n    <div>\n      <div className={cx(ubFlex, ubItemsCenter, ubMb1)}>\n        <h2 className={cx(ubFlexAuto, ubM0)}>{operationName}</h2>\n        <LabeledList className={ubTxRightAlign} dividerClassName={styles.divider} items={overviewItems} />\n      </div>\n      {link ? (\n        <DataLinkButton link={{ ...link, title: 'Logs for this span' } as any} buttonProps={{ icon: 'gf-logs' }} />\n      ) : null}\n      <UIDivider className={cx(styles.divider, styles.dividerVertical, ubMy1)} />\n      <div>\n        <div>\n          <AccordianKeyValues\n            data={tags}\n            label=\"Tags\"\n            linksGetter={linksGetter}\n            isOpen={isTagsOpen}\n            onToggle={() => tagsToggle(spanID)}\n          />\n          {process.tags && (\n            <AccordianKeyValues\n              className={ubMb1}\n              data={process.tags}\n              label=\"Process\"\n              linksGetter={linksGetter}\n              isOpen={isProcessOpen}\n              onToggle={() => processToggle(spanID)}\n            />\n          )}\n        </div>\n        {logs && logs.length > 0 && (\n          <AccordianLogs\n            linksGetter={linksGetter}\n            logs={logs}\n            isOpen={logsState.isOpen}\n            openedItems={logsState.openedItems}\n            onToggle={() => logsToggle(spanID)}\n            onItemToggle={(logItem) => logItemToggle(spanID, logItem)}\n            timestamp={traceStartTime}\n          />\n        )}\n        {warnings && warnings.length > 0 && (\n          <AccordianText\n            className={styles.AccordianWarnings}\n            headerClassName={styles.AccordianWarningsHeader}\n            label={<span className={styles.AccordianWarningsLabel}>Warnings</span>}\n            data={warnings}\n            isOpen={isWarningsOpen}\n            onToggle={() => warningsToggle(spanID)}\n          />\n        )}\n        {stackTraces && stackTraces.length && (\n          <AccordianText\n            label=\"Stack trace\"\n            data={stackTraces}\n            isOpen={isStackTracesOpen}\n            TextComponent={(textComponentProps) => {\n              let text;\n              if (textComponentProps.data?.length > 1) {\n                text = textComponentProps.data\n                  .map((stackTrace, index) => `StackTrace ${index + 1}:\\n${stackTrace}`)\n                  .join('\\n');\n              } else {\n                text = textComponentProps.data?.[0];\n              }\n              return (\n                <TextArea\n                  className={styles.Textarea}\n                  style={{ cursor: 'unset' }}\n                  readOnly\n                  cols={10}\n                  rows={10}\n                  value={text}\n                />\n              );\n            }}\n            onToggle={() => stackTracesToggle(spanID)}\n          />\n        )}\n        {references && references.length > 1 && (\n          <AccordianReferences\n            data={references}\n            isOpen={isReferencesOpen}\n            onToggle={() => referencesToggle(spanID)}\n            focusSpan={focusSpan}\n          />\n        )}\n        <small className={styles.debugInfo}>\n          <span className={styles.debugLabel} data-label=\"SpanID:\" /> {spanID}\n          <CopyIcon\n            copyText={deepLinkCopyText}\n            icon=\"link\"\n            placement=\"topRight\"\n            tooltipTitle=\"Copy deep link to this span\"\n          />\n        </small>\n      </div>\n    </div>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from '@emotion/css';\n\nimport SpanDetail from './SpanDetail';\nimport DetailState from './SpanDetail/DetailState';\nimport SpanTreeOffset from './SpanTreeOffset';\nimport TimelineRow from './TimelineRow';\nimport { autoColor, createStyle, Theme, withTheme } from '../Theme';\n\nimport { TraceLog, TraceSpan, TraceKeyValuePair, TraceLink } from '../types/trace';\nimport { CreateSpanLink } from './types';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    expandedAccent: css`\n      cursor: pointer;\n      height: 100%;\n      overflow: hidden;\n      position: absolute;\n      width: 100%;\n      &::before {\n        border-left: 4px solid;\n        pointer-events: none;\n        width: 1000px;\n      }\n      &::after {\n        border-right: 1000px solid;\n        border-color: inherit;\n        cursor: pointer;\n        opacity: 0.2;\n      }\n\n      /* border-color inherit must come AFTER other border declarations for accent */\n      &::before,\n      &::after {\n        border-color: inherit;\n        content: ' ';\n        position: absolute;\n        height: 100%;\n      }\n\n      &:hover::after {\n        opacity: 0.35;\n      }\n    `,\n    infoWrapper: css`\n      label: infoWrapper;\n      border: 1px solid ${autoColor(theme, '#d3d3d3')};\n      border-top: 3px solid;\n      padding: 0.75rem;\n    `,\n  };\n});\n\ntype SpanDetailRowProps = {\n  color: string;\n  columnDivision: number;\n  detailState: DetailState;\n  onDetailToggled: (spanID: string) => void;\n  linksGetter: (span: TraceSpan, links: TraceKeyValuePair[], index: number) => TraceLink[];\n  logItemToggle: (spanID: string, log: TraceLog) => void;\n  logsToggle: (spanID: string) => void;\n  processToggle: (spanID: string) => void;\n  referencesToggle: (spanID: string) => void;\n  warningsToggle: (spanID: string) => void;\n  stackTracesToggle: (spanID: string) => void;\n  span: TraceSpan;\n  tagsToggle: (spanID: string) => void;\n  traceStartTime: number;\n  focusSpan: (uiFind: string) => void;\n  hoverIndentGuideIds: Set<string>;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  theme: Theme;\n  createSpanLink?: CreateSpanLink;\n};\n\nexport class UnthemedSpanDetailRow extends React.PureComponent<SpanDetailRowProps> {\n  _detailToggle = () => {\n    this.props.onDetailToggled(this.props.span.spanID);\n  };\n\n  _linksGetter = (items: TraceKeyValuePair[], itemIndex: number) => {\n    const { linksGetter, span } = this.props;\n    return linksGetter(span, items, itemIndex);\n  };\n\n  render() {\n    const {\n      color,\n      columnDivision,\n      detailState,\n      logItemToggle,\n      logsToggle,\n      processToggle,\n      referencesToggle,\n      warningsToggle,\n      stackTracesToggle,\n      span,\n      tagsToggle,\n      traceStartTime,\n      focusSpan,\n      hoverIndentGuideIds,\n      addHoverIndentGuideId,\n      removeHoverIndentGuideId,\n      theme,\n      createSpanLink,\n    } = this.props;\n    const styles = getStyles(theme);\n    return (\n      <TimelineRow>\n        <TimelineRow.Cell width={columnDivision} style={{ overflow: 'hidden' }}>\n          <SpanTreeOffset\n            span={span}\n            showChildrenIcon={false}\n            hoverIndentGuideIds={hoverIndentGuideIds}\n            addHoverIndentGuideId={addHoverIndentGuideId}\n            removeHoverIndentGuideId={removeHoverIndentGuideId}\n          />\n          <span>\n            <span\n              className={styles.expandedAccent}\n              aria-checked=\"true\"\n              onClick={this._detailToggle}\n              role=\"switch\"\n              style={{ borderColor: color }}\n              data-test-id=\"detail-row-expanded-accent\"\n            />\n          </span>\n        </TimelineRow.Cell>\n        <TimelineRow.Cell width={1 - columnDivision}>\n          <div className={styles.infoWrapper} style={{ borderTopColor: color }}>\n            <SpanDetail\n              detailState={detailState}\n              linksGetter={this._linksGetter}\n              logItemToggle={logItemToggle}\n              logsToggle={logsToggle}\n              processToggle={processToggle}\n              referencesToggle={referencesToggle}\n              warningsToggle={warningsToggle}\n              stackTracesToggle={stackTracesToggle}\n              span={span}\n              tagsToggle={tagsToggle}\n              traceStartTime={traceStartTime}\n              focusSpan={focusSpan}\n              createSpanLink={createSpanLink}\n            />\n          </div>\n        </TimelineRow.Cell>\n      </TimelineRow>\n    );\n  }\n}\n\nexport default withTheme(UnthemedSpanDetailRow);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\n\nimport ListView from './ListView';\nimport SpanBarRow from './SpanBarRow';\nimport DetailState from './SpanDetail/DetailState';\nimport SpanDetailRow from './SpanDetailRow';\nimport {\n  createViewedBoundsFunc,\n  findServerChildSpan,\n  isErrorSpan,\n  spanContainsErredSpan,\n  ViewedBoundsFunctionType,\n} from './utils';\nimport { Accessors } from '../ScrollManager';\nimport { getColorByKey } from '../utils/color-generator';\nimport { TNil } from '../types';\nimport { TraceLog, TraceSpan, Trace, TraceKeyValuePair, TraceLink } from '../types/trace';\nimport TTraceTimeline from '../types/TTraceTimeline';\n\nimport { createStyle, Theme, withTheme } from '../Theme';\nimport { CreateSpanLink } from './types';\n\ntype TExtractUiFindFromStateReturn = {\n  uiFind: string | undefined;\n};\n\nconst getStyles = createStyle(() => {\n  return {\n    rowsWrapper: css`\n      width: 100%;\n    `,\n    row: css`\n      width: 100%;\n    `,\n  };\n});\n\ntype RowState = {\n  isDetail: boolean;\n  span: TraceSpan;\n  spanIndex: number;\n};\n\ntype TVirtualizedTraceViewOwnProps = {\n  currentViewRangeTime: [number, number];\n  findMatchesIDs: Set<string> | TNil;\n  scrollToFirstVisibleSpan: () => void;\n  registerAccessors: (accesors: Accessors) => void;\n  trace: Trace;\n  focusSpan: (uiFind: string) => void;\n  linksGetter: (span: TraceSpan, items: TraceKeyValuePair[], itemIndex: number) => TraceLink[];\n  childrenToggle: (spanID: string) => void;\n  clearShouldScrollToFirstUiFindMatch: () => void;\n  detailLogItemToggle: (spanID: string, log: TraceLog) => void;\n  detailLogsToggle: (spanID: string) => void;\n  detailWarningsToggle: (spanID: string) => void;\n  detailStackTracesToggle: (spanID: string) => void;\n  detailReferencesToggle: (spanID: string) => void;\n  detailProcessToggle: (spanID: string) => void;\n  detailTagsToggle: (spanID: string) => void;\n  detailToggle: (spanID: string) => void;\n  setSpanNameColumnWidth: (width: number) => void;\n  setTrace: (trace: Trace | TNil, uiFind: string | TNil) => void;\n  hoverIndentGuideIds: Set<string>;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  theme: Theme;\n  createSpanLink?: CreateSpanLink;\n  scrollElement?: Element;\n};\n\ntype VirtualizedTraceViewProps = TVirtualizedTraceViewOwnProps & TExtractUiFindFromStateReturn & TTraceTimeline;\n\n// export for tests\nexport const DEFAULT_HEIGHTS = {\n  bar: 28,\n  detail: 161,\n  detailWithLogs: 197,\n};\n\nconst NUM_TICKS = 5;\n\nfunction generateRowStates(\n  spans: TraceSpan[] | TNil,\n  childrenHiddenIDs: Set<string>,\n  detailStates: Map<string, DetailState | TNil>\n): RowState[] {\n  if (!spans) {\n    return [];\n  }\n  let collapseDepth = null;\n  const rowStates = [];\n  for (let i = 0; i < spans.length; i++) {\n    const span = spans[i];\n    const { spanID, depth } = span;\n    let hidden = false;\n    if (collapseDepth != null) {\n      if (depth >= collapseDepth) {\n        hidden = true;\n      } else {\n        collapseDepth = null;\n      }\n    }\n    if (hidden) {\n      continue;\n    }\n    if (childrenHiddenIDs.has(spanID)) {\n      collapseDepth = depth + 1;\n    }\n    rowStates.push({\n      span,\n      isDetail: false,\n      spanIndex: i,\n    });\n    if (detailStates.has(spanID)) {\n      rowStates.push({\n        span,\n        isDetail: true,\n        spanIndex: i,\n      });\n    }\n  }\n  return rowStates;\n}\n\nfunction getClipping(currentViewRange: [number, number]) {\n  const [zoomStart, zoomEnd] = currentViewRange;\n  return {\n    left: zoomStart > 0,\n    right: zoomEnd < 1,\n  };\n}\n\n// export from tests\nexport class UnthemedVirtualizedTraceView extends React.Component<VirtualizedTraceViewProps> {\n  clipping: { left: boolean; right: boolean };\n  listView: ListView | TNil;\n  rowStates: RowState[];\n  getViewedBounds: ViewedBoundsFunctionType;\n\n  constructor(props: VirtualizedTraceViewProps) {\n    super(props);\n    // keep \"prop derivations\" on the instance instead of calculating in\n    // `.render()` to avoid recalculating in every invocation of `.renderRow()`\n    const { currentViewRangeTime, childrenHiddenIDs, detailStates, setTrace, trace, uiFind } = props;\n    this.clipping = getClipping(currentViewRangeTime);\n    const [zoomStart, zoomEnd] = currentViewRangeTime;\n    this.getViewedBounds = createViewedBoundsFunc({\n      min: trace.startTime,\n      max: trace.endTime,\n      viewStart: zoomStart,\n      viewEnd: zoomEnd,\n    });\n    this.rowStates = generateRowStates(trace.spans, childrenHiddenIDs, detailStates);\n\n    setTrace(trace, uiFind);\n  }\n\n  shouldComponentUpdate(nextProps: VirtualizedTraceViewProps) {\n    // If any prop updates, VirtualizedTraceViewImpl should update.\n    const nextPropKeys = Object.keys(nextProps) as Array<keyof VirtualizedTraceViewProps>;\n    for (let i = 0; i < nextPropKeys.length; i += 1) {\n      if (nextProps[nextPropKeys[i]] !== this.props[nextPropKeys[i]]) {\n        // Unless the only change was props.shouldScrollToFirstUiFindMatch changing to false.\n        if (nextPropKeys[i] === 'shouldScrollToFirstUiFindMatch') {\n          if (nextProps[nextPropKeys[i]]) {\n            return true;\n          }\n        } else {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  UNSAFE_componentWillUpdate(nextProps: VirtualizedTraceViewProps) {\n    const { childrenHiddenIDs, detailStates, registerAccessors, trace, currentViewRangeTime } = this.props;\n    const {\n      currentViewRangeTime: nextViewRangeTime,\n      childrenHiddenIDs: nextHiddenIDs,\n      detailStates: nextDetailStates,\n      registerAccessors: nextRegisterAccessors,\n      setTrace,\n      trace: nextTrace,\n      uiFind,\n    } = nextProps;\n    if (trace !== nextTrace) {\n      setTrace(nextTrace, uiFind);\n    }\n    if (trace !== nextTrace || childrenHiddenIDs !== nextHiddenIDs || detailStates !== nextDetailStates) {\n      this.rowStates = nextTrace ? generateRowStates(nextTrace.spans, nextHiddenIDs, nextDetailStates) : [];\n    }\n    if (currentViewRangeTime !== nextViewRangeTime || (trace !== nextTrace && nextTrace)) {\n      this.clipping = getClipping(nextViewRangeTime);\n      const [zoomStart, zoomEnd] = nextViewRangeTime;\n      this.getViewedBounds = createViewedBoundsFunc({\n        min: nextTrace.startTime,\n        max: nextTrace.endTime,\n        viewStart: zoomStart,\n        viewEnd: zoomEnd,\n      });\n    }\n    if (this.listView && registerAccessors !== nextRegisterAccessors) {\n      nextRegisterAccessors(this.getAccessors());\n    }\n  }\n\n  componentDidUpdate() {\n    const {\n      shouldScrollToFirstUiFindMatch,\n      clearShouldScrollToFirstUiFindMatch,\n      scrollToFirstVisibleSpan,\n    } = this.props;\n    if (shouldScrollToFirstUiFindMatch) {\n      scrollToFirstVisibleSpan();\n      clearShouldScrollToFirstUiFindMatch();\n    }\n  }\n\n  getAccessors() {\n    const lv = this.listView;\n    if (!lv) {\n      throw new Error('ListView unavailable');\n    }\n    return {\n      getViewRange: this.getViewRange,\n      getSearchedSpanIDs: this.getSearchedSpanIDs,\n      getCollapsedChildren: this.getCollapsedChildren,\n      getViewHeight: lv.getViewHeight,\n      getBottomRowIndexVisible: lv.getBottomVisibleIndex,\n      getTopRowIndexVisible: lv.getTopVisibleIndex,\n      getRowPosition: lv.getRowPosition,\n      mapRowIndexToSpanIndex: this.mapRowIndexToSpanIndex,\n      mapSpanIndexToRowIndex: this.mapSpanIndexToRowIndex,\n    };\n  }\n\n  getViewRange = () => this.props.currentViewRangeTime;\n\n  getSearchedSpanIDs = () => this.props.findMatchesIDs;\n\n  getCollapsedChildren = () => this.props.childrenHiddenIDs;\n\n  mapRowIndexToSpanIndex = (index: number) => this.rowStates[index].spanIndex;\n\n  mapSpanIndexToRowIndex = (index: number) => {\n    const max = this.rowStates.length;\n    for (let i = 0; i < max; i++) {\n      const { spanIndex } = this.rowStates[i];\n      if (spanIndex === index) {\n        return i;\n      }\n    }\n    throw new Error(`unable to find row for span index: ${index}`);\n  };\n\n  setListView = (listView: ListView | TNil) => {\n    const isChanged = this.listView !== listView;\n    this.listView = listView;\n    if (listView && isChanged) {\n      this.props.registerAccessors(this.getAccessors());\n    }\n  };\n\n  // use long form syntax to avert flow error\n  // https://github.com/facebook/flow/issues/3076#issuecomment-290944051\n  getKeyFromIndex = (index: number) => {\n    const { isDetail, span } = this.rowStates[index];\n    return `${span.spanID}--${isDetail ? 'detail' : 'bar'}`;\n  };\n\n  getIndexFromKey = (key: string) => {\n    const parts = key.split('--');\n    const _spanID = parts[0];\n    const _isDetail = parts[1] === 'detail';\n    const max = this.rowStates.length;\n    for (let i = 0; i < max; i++) {\n      const { span, isDetail } = this.rowStates[i];\n      if (span.spanID === _spanID && isDetail === _isDetail) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  getRowHeight = (index: number) => {\n    const { span, isDetail } = this.rowStates[index];\n    if (!isDetail) {\n      return DEFAULT_HEIGHTS.bar;\n    }\n    if (Array.isArray(span.logs) && span.logs.length) {\n      return DEFAULT_HEIGHTS.detailWithLogs;\n    }\n    return DEFAULT_HEIGHTS.detail;\n  };\n\n  renderRow = (key: string, style: React.CSSProperties, index: number, attrs: {}) => {\n    const { isDetail, span, spanIndex } = this.rowStates[index];\n    return isDetail\n      ? this.renderSpanDetailRow(span, key, style, attrs)\n      : this.renderSpanBarRow(span, spanIndex, key, style, attrs);\n  };\n\n  renderSpanBarRow(span: TraceSpan, spanIndex: number, key: string, style: React.CSSProperties, attrs: {}) {\n    const { spanID } = span;\n    const { serviceName } = span.process;\n    const {\n      childrenHiddenIDs,\n      childrenToggle,\n      detailStates,\n      detailToggle,\n      findMatchesIDs,\n      spanNameColumnWidth,\n      trace,\n      focusSpan,\n      hoverIndentGuideIds,\n      addHoverIndentGuideId,\n      removeHoverIndentGuideId,\n      theme,\n      createSpanLink,\n    } = this.props;\n    // to avert flow error\n    if (!trace) {\n      return null;\n    }\n    const color = getColorByKey(serviceName, theme);\n    const isCollapsed = childrenHiddenIDs.has(spanID);\n    const isDetailExpanded = detailStates.has(spanID);\n    const isMatchingFilter = findMatchesIDs ? findMatchesIDs.has(spanID) : false;\n    const showErrorIcon = isErrorSpan(span) || (isCollapsed && spanContainsErredSpan(trace.spans, spanIndex));\n\n    // Check for direct child \"server\" span if the span is a \"client\" span.\n    let rpc = null;\n    if (isCollapsed) {\n      const rpcSpan = findServerChildSpan(trace.spans.slice(spanIndex));\n      if (rpcSpan) {\n        const rpcViewBounds = this.getViewedBounds(rpcSpan.startTime, rpcSpan.startTime + rpcSpan.duration);\n        rpc = {\n          color: getColorByKey(rpcSpan.process.serviceName, theme),\n          operationName: rpcSpan.operationName,\n          serviceName: rpcSpan.process.serviceName,\n          viewEnd: rpcViewBounds.end,\n          viewStart: rpcViewBounds.start,\n        };\n      }\n    }\n    const styles = getStyles();\n    return (\n      <div className={styles.row} key={key} style={style} {...attrs}>\n        <SpanBarRow\n          clippingLeft={this.clipping.left}\n          clippingRight={this.clipping.right}\n          color={color}\n          columnDivision={spanNameColumnWidth}\n          isChildrenExpanded={!isCollapsed}\n          isDetailExpanded={isDetailExpanded}\n          isMatchingFilter={isMatchingFilter}\n          numTicks={NUM_TICKS}\n          onDetailToggled={detailToggle}\n          onChildrenToggled={childrenToggle}\n          rpc={rpc}\n          showErrorIcon={showErrorIcon}\n          getViewedBounds={this.getViewedBounds}\n          traceStartTime={trace.startTime}\n          span={span}\n          focusSpan={focusSpan}\n          hoverIndentGuideIds={hoverIndentGuideIds}\n          addHoverIndentGuideId={addHoverIndentGuideId}\n          removeHoverIndentGuideId={removeHoverIndentGuideId}\n          createSpanLink={createSpanLink}\n        />\n      </div>\n    );\n  }\n\n  renderSpanDetailRow(span: TraceSpan, key: string, style: React.CSSProperties, attrs: {}) {\n    const { spanID } = span;\n    const { serviceName } = span.process;\n    const {\n      detailLogItemToggle,\n      detailLogsToggle,\n      detailProcessToggle,\n      detailReferencesToggle,\n      detailWarningsToggle,\n      detailStackTracesToggle,\n      detailStates,\n      detailTagsToggle,\n      detailToggle,\n      spanNameColumnWidth,\n      trace,\n      focusSpan,\n      hoverIndentGuideIds,\n      addHoverIndentGuideId,\n      removeHoverIndentGuideId,\n      linksGetter,\n      theme,\n      createSpanLink,\n    } = this.props;\n    const detailState = detailStates.get(spanID);\n    if (!trace || !detailState) {\n      return null;\n    }\n    const color = getColorByKey(serviceName, theme);\n    const styles = getStyles();\n    return (\n      <div className={styles.row} key={key} style={{ ...style, zIndex: 1 }} {...attrs}>\n        <SpanDetailRow\n          color={color}\n          columnDivision={spanNameColumnWidth}\n          onDetailToggled={detailToggle}\n          detailState={detailState}\n          linksGetter={linksGetter}\n          logItemToggle={detailLogItemToggle}\n          logsToggle={detailLogsToggle}\n          processToggle={detailProcessToggle}\n          referencesToggle={detailReferencesToggle}\n          warningsToggle={detailWarningsToggle}\n          stackTracesToggle={detailStackTracesToggle}\n          span={span}\n          tagsToggle={detailTagsToggle}\n          traceStartTime={trace.startTime}\n          focusSpan={focusSpan}\n          hoverIndentGuideIds={hoverIndentGuideIds}\n          addHoverIndentGuideId={addHoverIndentGuideId}\n          removeHoverIndentGuideId={removeHoverIndentGuideId}\n          createSpanLink={createSpanLink}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const styles = getStyles();\n    const { scrollElement } = this.props;\n    return (\n      <div>\n        <ListView\n          ref={this.setListView}\n          dataLength={this.rowStates.length}\n          itemHeightGetter={this.getRowHeight}\n          itemRenderer={this.renderRow}\n          viewBuffer={50}\n          viewBufferMin={50}\n          itemsWrapperClassName={styles.rowsWrapper}\n          getKeyFromIndex={this.getKeyFromIndex}\n          getIndexFromKey={this.getIndexFromKey}\n          windowScroller={false}\n          scrollElement={scrollElement}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withTheme(UnthemedVirtualizedTraceView);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nconst keyboardMappings: Record<string, { binding: string | string[]; label: string }> = {\n  scrollPageDown: { binding: 's', label: 'Scroll down' },\n  scrollPageUp: { binding: 'w', label: 'Scroll up' },\n  scrollToNextVisibleSpan: { binding: 'f', label: 'Scroll to the next visible span' },\n  scrollToPrevVisibleSpan: { binding: 'b', label: 'Scroll to the previous visible span' },\n  panLeft: { binding: ['a', 'left'], label: 'Pan left' },\n  panLeftFast: { binding: ['shift+a', 'shift+left'], label: 'Pan left — Large' },\n  panRight: { binding: ['d', 'right'], label: 'Pan right' },\n  panRightFast: { binding: ['shift+d', 'shift+right'], label: 'Pan right — Large' },\n  zoomIn: { binding: 'up', label: 'Zoom in' },\n  zoomInFast: { binding: 'shift+up', label: 'Zoom in — Large' },\n  zoomOut: { binding: 'down', label: 'Zoom out' },\n  zoomOutFast: { binding: 'shift+down', label: 'Zoom out — Large' },\n  collapseAll: { binding: ']', label: 'Collapse All' },\n  expandAll: { binding: '[', label: 'Expand All' },\n  collapseOne: { binding: 'p', label: 'Collapse One Level' },\n  expandOne: { binding: 'o', label: 'Expand One Level' },\n  searchSpans: { binding: 'ctrl+b', label: 'Search Spans' },\n  clearSearch: { binding: 'escape', label: 'Clear Search' },\n};\n\nexport default keyboardMappings;\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport Combokeys from 'combokeys';\n\nimport keyboardMappings from './keyboard-mappings';\n\nexport type CombokeysHandler =\n  | (() => void)\n  | ((event: React.KeyboardEvent<any>) => void)\n  | ((event: React.KeyboardEvent<any>, s: string) => void);\n\nexport type ShortcutCallbacks = {\n  [name: string]: CombokeysHandler;\n};\n\nlet instance: Combokeys | undefined;\n\nfunction getInstance(): Combokeys {\n  if (instance) {\n    return instance;\n  }\n  const local = new Combokeys(document.body);\n  instance = local;\n  return local;\n}\n\nexport function merge(callbacks: ShortcutCallbacks) {\n  const inst = getInstance();\n  Object.keys(callbacks).forEach((name) => {\n    const keysHandler = callbacks[name];\n    if (keysHandler) {\n      inst.bind(keyboardMappings[name].binding, keysHandler);\n    }\n  });\n}\n\nexport function reset() {\n  const combokeys = getInstance();\n  combokeys.reset();\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from '@emotion/css';\n\nimport TimelineHeaderRow from './TimelineHeaderRow';\nimport VirtualizedTraceView from './VirtualizedTraceView';\nimport { merge as mergeShortcuts } from '../keyboard-shortcuts';\nimport { Accessors } from '../ScrollManager';\nimport { TUpdateViewRangeTimeFunction, ViewRange, ViewRangeTimeUpdate } from './types';\nimport { TNil } from '../types';\nimport { TraceSpan, Trace, TraceLog, TraceKeyValuePair, TraceLink } from '../types/trace';\nimport TTraceTimeline from '../types/TTraceTimeline';\nimport { autoColor, createStyle, Theme, withTheme } from '../Theme';\nimport ExternalLinkContext from '../url/externalLinkContext';\n\ntype TExtractUiFindFromStateReturn = {\n  uiFind: string | undefined;\n};\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    TraceTimelineViewer: css`\n      label: TraceTimelineViewer;\n      border-bottom: 1px solid ${autoColor(theme, '#bbb')};\n\n      & .json-markup {\n        line-height: 17px;\n        font-size: 13px;\n        font-family: monospace;\n        white-space: pre-wrap;\n      }\n\n      & .json-markup-key {\n        font-weight: bold;\n      }\n\n      & .json-markup-bool {\n        color: ${autoColor(theme, 'firebrick')};\n      }\n\n      & .json-markup-string {\n        color: ${autoColor(theme, 'teal')};\n      }\n\n      & .json-markup-null {\n        color: ${autoColor(theme, 'teal')};\n      }\n\n      & .json-markup-number {\n        color: ${autoColor(theme, 'blue', 'black')};\n      }\n    `,\n  };\n});\n\ntype TProps = TExtractUiFindFromStateReturn & {\n  registerAccessors: (accessors: Accessors) => void;\n  findMatchesIDs: Set<string> | TNil;\n  scrollToFirstVisibleSpan: () => void;\n  traceTimeline: TTraceTimeline;\n  trace: Trace;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRange: ViewRange;\n  focusSpan: (uiFind: string) => void;\n  createLinkToExternalSpan: (traceID: string, spanID: string) => string;\n\n  setSpanNameColumnWidth: (width: number) => void;\n  collapseAll: (spans: TraceSpan[]) => void;\n  collapseOne: (spans: TraceSpan[]) => void;\n  expandAll: () => void;\n  expandOne: (spans: TraceSpan[]) => void;\n\n  childrenToggle: (spanID: string) => void;\n  clearShouldScrollToFirstUiFindMatch: () => void;\n  detailLogItemToggle: (spanID: string, log: TraceLog) => void;\n  detailLogsToggle: (spanID: string) => void;\n  detailWarningsToggle: (spanID: string) => void;\n  detailStackTracesToggle: (spanID: string) => void;\n  detailReferencesToggle: (spanID: string) => void;\n  detailProcessToggle: (spanID: string) => void;\n  detailTagsToggle: (spanID: string) => void;\n  detailToggle: (spanID: string) => void;\n  setTrace: (trace: Trace | TNil, uiFind: string | TNil) => void;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  linksGetter: (span: TraceSpan, items: TraceKeyValuePair[], itemIndex: number) => TraceLink[];\n  theme: Theme;\n  createSpanLink?: (\n    span: TraceSpan\n  ) => { href: string; onClick?: (e: React.MouseEvent) => void; content: React.ReactNode };\n  scrollElement?: Element;\n};\n\ntype State = {\n  // Will be set to real height of the component so it can be passed down to size some other elements.\n  height: number;\n};\n\nconst NUM_TICKS = 5;\n\n/**\n * `TraceTimelineViewer` now renders the header row because it is sensitive to\n * `props.viewRange.time.cursor`. If `VirtualizedTraceView` renders it, it will\n * re-render the ListView every time the cursor is moved on the trace minimap\n * or `TimelineHeaderRow`.\n */\nexport class UnthemedTraceTimelineViewer extends React.PureComponent<TProps, State> {\n  constructor(props: TProps) {\n    super(props);\n    this.state = { height: 0 };\n  }\n\n  componentDidMount() {\n    mergeShortcuts({\n      collapseAll: this.collapseAll,\n      expandAll: this.expandAll,\n      collapseOne: this.collapseOne,\n      expandOne: this.expandOne,\n    });\n  }\n\n  collapseAll = () => {\n    this.props.collapseAll(this.props.trace.spans);\n  };\n\n  collapseOne = () => {\n    this.props.collapseOne(this.props.trace.spans);\n  };\n\n  expandAll = () => {\n    this.props.expandAll();\n  };\n\n  expandOne = () => {\n    this.props.expandOne(this.props.trace.spans);\n  };\n\n  render() {\n    const {\n      setSpanNameColumnWidth,\n      updateNextViewRangeTime,\n      updateViewRangeTime,\n      viewRange,\n      createLinkToExternalSpan,\n      traceTimeline,\n      theme,\n      ...rest\n    } = this.props;\n    const { trace } = rest;\n    const styles = getStyles(theme);\n\n    return (\n      <ExternalLinkContext.Provider value={createLinkToExternalSpan}>\n        <div\n          className={styles.TraceTimelineViewer}\n          ref={(ref: HTMLDivElement | null) => ref && this.setState({ height: ref.getBoundingClientRect().height })}\n        >\n          <TimelineHeaderRow\n            duration={trace.duration}\n            nameColumnWidth={traceTimeline.spanNameColumnWidth}\n            numTicks={NUM_TICKS}\n            onCollapseAll={this.collapseAll}\n            onCollapseOne={this.collapseOne}\n            onColummWidthChange={setSpanNameColumnWidth}\n            onExpandAll={this.expandAll}\n            onExpandOne={this.expandOne}\n            viewRangeTime={viewRange.time}\n            updateNextViewRangeTime={updateNextViewRangeTime}\n            updateViewRangeTime={updateViewRangeTime}\n            columnResizeHandleHeight={this.state.height}\n          />\n          <VirtualizedTraceView\n            {...rest}\n            {...traceTimeline}\n            setSpanNameColumnWidth={setSpanNameColumnWidth}\n            currentViewRangeTime={viewRange.time.current}\n          />\n        </div>\n      </ExternalLinkContext.Provider>\n    );\n  }\n}\n\nexport default withTheme(UnthemedTraceTimelineViewer);\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * takes the event and returns the key character\n *\n * @param {Event} e\n * @return {string}\n */\nmodule.exports = function (e) {\n  var SPECIAL_KEYS_MAP,\n    SPECIAL_CHARACTERS_MAP\n  SPECIAL_KEYS_MAP = require('./special-keys-map')\n  SPECIAL_CHARACTERS_MAP = require('./special-characters-map')\n\n  // for keypress events we should return the character as is\n  if (e.type === 'keypress') {\n    var character = String.fromCharCode(e.which)\n\n    // if the shift key is not pressed then it is safe to assume\n    // that we want the character to be lowercase.  this means if\n    // you accidentally have caps lock on then your key bindings\n    // will continue to work\n    //\n    // the only side effect that might not be desired is if you\n    // bind something like 'A' cause you want to trigger an\n    // event when capital A is pressed caps lock will no longer\n    // trigger the event.  shift+a will though.\n    if (!e.shiftKey) {\n      character = character.toLowerCase()\n    }\n\n    return character\n  }\n\n  // for non keypress events the special maps are needed\n  if (SPECIAL_KEYS_MAP[e.which] !== undefined) {\n    return SPECIAL_KEYS_MAP[e.which]\n  }\n\n  if (SPECIAL_CHARACTERS_MAP[e.which] !== undefined) {\n    return SPECIAL_CHARACTERS_MAP[e.which]\n  }\n\n  // if it is not in the special map\n\n  // with keydown and keyup events the character seems to always\n  // come in as an uppercase character whether you are pressing shift\n  // or not.  we should make sure it is always lowercase for comparisons\n  return String.fromCharCode(e.which).toLowerCase()\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MdFileUpload = function MdFileUpload(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm8.4 30h23.2v3.4h-23.2v-3.4z m6.6-3.4v-10h-6.6l11.6-11.6 11.6 11.6h-6.6v10h-10z' })\n        )\n    );\n};\n\nexports.default = MdFileUpload;\nmodule.exports = exports['default'];","/* eslint-env node, browser */\n'use strict'\n\n/**\n * actually calls the callback function\n *\n * if your callback function returns false this will use the jquery\n * convention - prevent default and stop propogation on the event\n *\n * @param {Function} callback\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (callback, e, combo, sequence) {\n  var self = this\n  var preventDefault\n  var stopPropagation\n\n  // if this event should not happen stop here\n  if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n    return\n  }\n\n  if (callback(e, combo) === false) {\n    preventDefault = require('../../helpers/preventDefault')\n    preventDefault(e)\n    stopPropagation = require('../../helpers/stopPropagation')\n    stopPropagation(e)\n  }\n}\n","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * takes a key event and figures out what the modifiers are\n *\n * @param {Event} e\n * @returns {Array}\n */\nmodule.exports = function (e) {\n  var modifiers = []\n\n  if (e.shiftKey) {\n    modifiers.push('shift')\n  }\n\n  if (e.altKey) {\n    modifiers.push('alt')\n  }\n\n  if (e.ctrlKey) {\n    modifiers.push('ctrl')\n  }\n\n  if (e.metaKey) {\n    modifiers.push('meta')\n  }\n\n  return modifiers\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * stops propogation for this event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  if (e.stopPropagation) {\n    e.stopPropagation()\n    return\n  }\n\n  e.cancelBubble = true\n}\n","'use strict';\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n    childContextTypes: true,\n    contextTypes: true,\n    defaultProps: true,\n    displayName: true,\n    getDefaultProps: true,\n    getDerivedStateFromProps: true,\n    mixins: true,\n    propTypes: true,\n    type: true\n};\n\nvar KNOWN_STATICS = {\n    name: true,\n    length: true,\n    prototype: true,\n    caller: true,\n    callee: true,\n    arguments: true,\n    arity: true\n};\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = getPrototypeOf && getPrototypeOf(Object);\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n    if (typeof sourceComponent !== 'string') { // don't hoist over string (html) components\n\n        if (objectPrototype) {\n            var inheritedComponent = getPrototypeOf(sourceComponent);\n            if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n            }\n        }\n\n        var keys = getOwnPropertyNames(sourceComponent);\n\n        if (getOwnPropertySymbols) {\n            keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n        }\n\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {\n                var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                try { // Avoid failures from read-only properties\n                    defineProperty(targetComponent, key, descriptor);\n                } catch (e) {}\n            }\n        }\n\n        return targetComponent;\n    }\n\n    return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * reverses the map lookup so that we can look for specific keys\n * to see what can and can't use keypress\n *\n * @return {Object}\n */\nmodule.exports = function () {\n  var self = this\n  var constructor = self.constructor\n  var SPECIAL_KEYS_MAP\n\n  if (!constructor.REVERSE_MAP) {\n    constructor.REVERSE_MAP = {}\n    SPECIAL_KEYS_MAP = require('../../helpers/special-keys-map')\n    for (var key in SPECIAL_KEYS_MAP) {\n      // pull out the numeric keypad from here cause keypress should\n      // be able to detect the keys from the character\n      if (key > 95 && key < 112) {\n        continue\n      }\n\n      if (SPECIAL_KEYS_MAP.hasOwnProperty(key)) {\n        constructor.REVERSE_MAP[SPECIAL_KEYS_MAP[key]] = key\n      }\n    }\n  }\n  return constructor.REVERSE_MAP\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport { createStyle, isLight, Theme, useTheme } from '../Theme';\nimport { UIDivider } from '../uiElementsContext';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    LabeledList: css`\n      label: LabeledList;\n      list-style: none;\n      margin: 0;\n      padding: 0;\n    `,\n    LabeledListItem: css`\n      label: LabeledListItem;\n      display: inline-block;\n    `,\n    LabeledListLabel: css`\n      label: LabeledListLabel;\n      color: ${isLight(theme) ? '#999' : '#666'};\n      margin-right: 0.25rem;\n    `,\n  };\n});\n\ntype LabeledListProps = {\n  className?: string;\n  dividerClassName?: string;\n  items: Array<{ key: string; label: React.ReactNode; value: React.ReactNode }>;\n};\n\nexport default function LabeledList(props: LabeledListProps) {\n  const { className, dividerClassName, items } = props;\n  const styles = getStyles(useTheme());\n  return (\n    <ul className={cx(styles.LabeledList, className)}>\n      {items.map(({ key, label, value }, i) => {\n        const divider = i < items.length - 1 && (\n          <li className={styles.LabeledListItem} key={`${key}--divider`}>\n            <UIDivider className={dividerClassName} type=\"vertical\" />\n          </li>\n        );\n        return [\n          <li className={styles.LabeledListItem} key={key}>\n            <span className={styles.LabeledListLabel}>{label}</span>\n            <strong>{value}</strong>\n          </li>,\n          divider,\n        ];\n      })}\n    </ul>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// // export default {\n// const updateTypes = {\n//   DRAG_END: 'DRAG_END',\n//   DRAG_MOVE: 'DRAG_MOVE',\n//   DRAG_START: 'DRAG_START',\n//   MOUSE_ENTER: 'MOUSE_ENTER',\n//   MOUSE_LEAVE: 'MOUSE_LEAVE',\n//   MOUSE_MOVE: 'MOUSE_MOVE',\n// };\n\n// const typeUpdateTypes = updateTypes as { [K in keyof typeof updateTypes]: K };\n\nenum EUpdateTypes {\n  DragEnd = 'DragEnd',\n  DragMove = 'DragMove',\n  DragStart = 'DragStart',\n  MouseEnter = 'MouseEnter',\n  MouseLeave = 'MouseLeave',\n  MouseMove = 'MouseMove',\n}\n\nexport default EUpdateTypes;\n","/* eslint-env node, browser */\n'use strict'\n/**\n * triggers an event that has already been bound\n *\n * @param {string} keys\n * @param {string=} action\n * @returns void\n */\nmodule.exports = function (keys, action) {\n  var self = this\n  if (self.directMap[keys + ':' + action]) {\n    self.directMap[keys + ':' + action]({}, keys)\n  }\n  return this\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * determines if the keycode specified is a modifier key or not\n *\n * @param {string} key\n * @returns {boolean}\n */\nmodule.exports = function (key) {\n  return key === 'shift' || key === 'ctrl' || key === 'alt' || key === 'meta'\n}\n","import React, { Component } from 'react';\nimport shallowEqual from 'fbjs/lib/shallowEqual';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport { createChangeEmitter } from 'change-emitter';\nimport $$observable from 'symbol-observable';\n\nvar setStatic = function setStatic(key, value) {\n  return function (BaseComponent) {\n    /* eslint-disable no-param-reassign */\n    BaseComponent[key] = value;\n    /* eslint-enable no-param-reassign */\n    return BaseComponent;\n  };\n};\n\nvar setDisplayName = function setDisplayName(displayName) {\n  return setStatic('displayName', displayName);\n};\n\nvar getDisplayName = function getDisplayName(Component$$1) {\n  if (typeof Component$$1 === 'string') {\n    return Component$$1;\n  }\n\n  if (!Component$$1) {\n    return undefined;\n  }\n\n  return Component$$1.displayName || Component$$1.name || 'Component';\n};\n\nvar wrapDisplayName = function wrapDisplayName(BaseComponent, hocName) {\n  return hocName + '(' + getDisplayName(BaseComponent) + ')';\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n\n\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar createEagerElementUtil = function createEagerElementUtil(hasKey, isReferentiallyTransparent, type, props, children) {\n  if (process.env.NODE_ENV === 'production' && !hasKey && isReferentiallyTransparent) {\n    if (children) {\n      return type(_extends({}, props, { children: children }));\n    }\n    return type(props);\n  }\n\n  var Component$$1 = type;\n\n  if (children) {\n    return React.createElement(\n      Component$$1,\n      props,\n      children\n    );\n  }\n\n  return React.createElement(Component$$1, props);\n};\n\nvar isClassComponent = function isClassComponent(Component$$1) {\n  return Boolean(Component$$1 && Component$$1.prototype && typeof Component$$1.prototype.render === 'function');\n};\n\nvar isReferentiallyTransparentFunctionComponent = function isReferentiallyTransparentFunctionComponent(Component$$1) {\n  return Boolean(typeof Component$$1 === 'function' && !isClassComponent(Component$$1) && !Component$$1.defaultProps && !Component$$1.contextTypes);\n};\n\nvar createFactory = function createFactory(type) {\n  var isReferentiallyTransparent = isReferentiallyTransparentFunctionComponent(type);\n  return function (p, c) {\n    return createEagerElementUtil(false, isReferentiallyTransparent, type, p, c);\n  };\n};\n\nvar mapProps = function mapProps(propsMapper) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var MapProps = function MapProps(props) {\n      return factory(propsMapper(props));\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'mapProps'))(MapProps);\n    }\n    return MapProps;\n  };\n};\n\nvar withProps = function withProps(input) {\n  var hoc = mapProps(function (props) {\n    return _extends({}, props, typeof input === 'function' ? input(props) : input);\n  });\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withProps'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar pick = function pick(obj, keys) {\n  var result = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (obj.hasOwnProperty(key)) {\n      result[key] = obj[key];\n    }\n  }\n  return result;\n};\n\nvar withPropsOnChange = function withPropsOnChange(shouldMapOrKeys, propsMapper) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var shouldMap = typeof shouldMapOrKeys === 'function' ? shouldMapOrKeys : function (props, nextProps) {\n      return !shallowEqual(pick(props, shouldMapOrKeys), pick(nextProps, shouldMapOrKeys));\n    };\n\n    var WithPropsOnChange = function (_Component) {\n      inherits(WithPropsOnChange, _Component);\n\n      function WithPropsOnChange() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithPropsOnChange);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.computedProps = propsMapper(_this.props), _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithPropsOnChange.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n        if (shouldMap(this.props, nextProps)) {\n          this.computedProps = propsMapper(nextProps);\n        }\n      };\n\n      WithPropsOnChange.prototype.render = function render() {\n        return factory(_extends({}, this.props, this.computedProps));\n      };\n\n      return WithPropsOnChange;\n    }(Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withPropsOnChange'))(WithPropsOnChange);\n    }\n    return WithPropsOnChange;\n  };\n};\n\nvar mapValues = function mapValues(obj, func) {\n  var result = {};\n  /* eslint-disable no-restricted-syntax */\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      result[key] = func(obj[key], key);\n    }\n  }\n  /* eslint-enable no-restricted-syntax */\n  return result;\n};\n\n/* eslint-disable no-console */\nvar withHandlers = function withHandlers(handlers) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithHandlers = function (_Component) {\n      inherits(WithHandlers, _Component);\n\n      function WithHandlers() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithHandlers);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _initialiseProps.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithHandlers.prototype.componentWillReceiveProps = function componentWillReceiveProps() {\n        this.cachedHandlers = {};\n      };\n\n      WithHandlers.prototype.render = function render() {\n        return factory(_extends({}, this.props, this.handlers));\n      };\n\n      return WithHandlers;\n    }(Component);\n\n    var _initialiseProps = function _initialiseProps() {\n      var _this2 = this;\n\n      this.cachedHandlers = {};\n      this.handlers = mapValues(typeof handlers === 'function' ? handlers(this.props) : handlers, function (createHandler, handlerName) {\n        return function () {\n          var cachedHandler = _this2.cachedHandlers[handlerName];\n          if (cachedHandler) {\n            return cachedHandler.apply(undefined, arguments);\n          }\n\n          var handler = createHandler(_this2.props);\n          _this2.cachedHandlers[handlerName] = handler;\n\n          if (process.env.NODE_ENV !== 'production' && typeof handler !== 'function') {\n            console.error(\n            // eslint-disable-line no-console\n            'withHandlers(): Expected a map of higher-order functions. ' + 'Refer to the docs for more info.');\n          }\n\n          return handler.apply(undefined, arguments);\n        };\n      });\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withHandlers'))(WithHandlers);\n    }\n    return WithHandlers;\n  };\n};\n\nvar defaultProps = function defaultProps(props) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var DefaultProps = function DefaultProps(ownerProps) {\n      return factory(ownerProps);\n    };\n    DefaultProps.defaultProps = props;\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'defaultProps'))(DefaultProps);\n    }\n    return DefaultProps;\n  };\n};\n\nvar omit = function omit(obj, keys) {\n  var rest = objectWithoutProperties(obj, []);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (rest.hasOwnProperty(key)) {\n      delete rest[key];\n    }\n  }\n  return rest;\n};\n\nvar renameProp = function renameProp(oldName, newName) {\n  var hoc = mapProps(function (props) {\n    var _babelHelpers$extends;\n\n    return _extends({}, omit(props, [oldName]), (_babelHelpers$extends = {}, _babelHelpers$extends[newName] = props[oldName], _babelHelpers$extends));\n  });\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'renameProp'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar keys = Object.keys;\n\n\nvar mapKeys = function mapKeys(obj, func) {\n  return keys(obj).reduce(function (result, key) {\n    var val = obj[key];\n    /* eslint-disable no-param-reassign */\n    result[func(val, key)] = val;\n    /* eslint-enable no-param-reassign */\n    return result;\n  }, {});\n};\n\nvar renameProps = function renameProps(nameMap) {\n  var hoc = mapProps(function (props) {\n    return _extends({}, omit(props, keys(nameMap)), mapKeys(pick(props, keys(nameMap)), function (_, oldName) {\n      return nameMap[oldName];\n    }));\n  });\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'renameProps'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar flattenProp = function flattenProp(propName) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var FlattenProp = function FlattenProp(props) {\n      return factory(_extends({}, props, props[propName]));\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'flattenProp'))(FlattenProp);\n    }\n    return FlattenProp;\n  };\n};\n\nvar withState = function withState(stateName, stateUpdaterName, initialState) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithState = function (_Component) {\n      inherits(WithState, _Component);\n\n      function WithState() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithState);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n          stateValue: typeof initialState === 'function' ? initialState(_this.props) : initialState\n        }, _this.updateStateValue = function (updateFn, callback) {\n          return _this.setState(function (_ref) {\n            var stateValue = _ref.stateValue;\n            return {\n              stateValue: typeof updateFn === 'function' ? updateFn(stateValue) : updateFn\n            };\n          }, callback);\n        }, _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithState.prototype.render = function render() {\n        var _babelHelpers$extends;\n\n        return factory(_extends({}, this.props, (_babelHelpers$extends = {}, _babelHelpers$extends[stateName] = this.state.stateValue, _babelHelpers$extends[stateUpdaterName] = this.updateStateValue, _babelHelpers$extends)));\n      };\n\n      return WithState;\n    }(Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withState'))(WithState);\n    }\n    return WithState;\n  };\n};\n\nvar withStateHandlers = function withStateHandlers(initialState, stateUpdaters) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithStateHandlers = function (_Component) {\n      inherits(WithStateHandlers, _Component);\n\n      function WithStateHandlers() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithStateHandlers);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _initialiseProps.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithStateHandlers.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n        var propsChanged = nextProps !== this.props;\n        // the idea is to skip render if stateUpdater handler return undefined\n        // this allows to create no state update handlers with access to state and props\n        var stateChanged = !shallowEqual(nextState, this.state);\n        return propsChanged || stateChanged;\n      };\n\n      WithStateHandlers.prototype.render = function render() {\n        return factory(_extends({}, this.props, this.state, this.stateUpdaters));\n      };\n\n      return WithStateHandlers;\n    }(Component);\n\n    var _initialiseProps = function _initialiseProps() {\n      var _this2 = this;\n\n      this.state = typeof initialState === 'function' ? initialState(this.props) : initialState;\n      this.stateUpdaters = mapValues(stateUpdaters, function (handler) {\n        return function (mayBeEvent) {\n          for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          // Having that functional form of setState can be called async\n          // we need to persist SyntheticEvent\n          if (mayBeEvent && typeof mayBeEvent.persist === 'function') {\n            mayBeEvent.persist();\n          }\n\n          _this2.setState(function (state, props) {\n            return handler(state, props).apply(undefined, [mayBeEvent].concat(args));\n          });\n        };\n      });\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withStateHandlers'))(WithStateHandlers);\n    }\n    return WithStateHandlers;\n  };\n};\n\nvar withReducer = function withReducer(stateName, dispatchName, reducer, initialState) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithReducer = function (_Component) {\n      inherits(WithReducer, _Component);\n\n      function WithReducer() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithReducer);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n          stateValue: _this.initializeStateValue()\n        }, _this.dispatch = function (action) {\n          return _this.setState(function (_ref) {\n            var stateValue = _ref.stateValue;\n            return {\n              stateValue: reducer(stateValue, action)\n            };\n          });\n        }, _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithReducer.prototype.initializeStateValue = function initializeStateValue() {\n        if (initialState !== undefined) {\n          return typeof initialState === 'function' ? initialState(this.props) : initialState;\n        }\n        return reducer(undefined, { type: '@@recompose/INIT' });\n      };\n\n      WithReducer.prototype.render = function render() {\n        var _babelHelpers$extends;\n\n        return factory(_extends({}, this.props, (_babelHelpers$extends = {}, _babelHelpers$extends[stateName] = this.state.stateValue, _babelHelpers$extends[dispatchName] = this.dispatch, _babelHelpers$extends)));\n      };\n\n      return WithReducer;\n    }(Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withReducer'))(WithReducer);\n    }\n    return WithReducer;\n  };\n};\n\nvar identity = function identity(Component$$1) {\n  return Component$$1;\n};\n\nvar branch = function branch(test, left) {\n  var right = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : identity;\n  return function (BaseComponent) {\n    var leftFactory = void 0;\n    var rightFactory = void 0;\n    var Branch = function Branch(props) {\n      if (test(props)) {\n        leftFactory = leftFactory || createFactory(left(BaseComponent));\n        return leftFactory(props);\n      }\n      rightFactory = rightFactory || createFactory(right(BaseComponent));\n      return rightFactory(props);\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'branch'))(Branch);\n    }\n    return Branch;\n  };\n};\n\nvar renderComponent = function renderComponent(Component$$1) {\n  return function (_) {\n    var factory = createFactory(Component$$1);\n    var RenderComponent = function RenderComponent(props) {\n      return factory(props);\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      RenderComponent.displayName = wrapDisplayName(Component$$1, 'renderComponent');\n    }\n    return RenderComponent;\n  };\n};\n\nvar Nothing = function (_Component) {\n  inherits(Nothing, _Component);\n\n  function Nothing() {\n    classCallCheck(this, Nothing);\n    return possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  Nothing.prototype.render = function render() {\n    return null;\n  };\n\n  return Nothing;\n}(Component);\n\nvar renderNothing = function renderNothing(_) {\n  return Nothing;\n};\n\nvar shouldUpdate = function shouldUpdate(test) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var ShouldUpdate = function (_Component) {\n      inherits(ShouldUpdate, _Component);\n\n      function ShouldUpdate() {\n        classCallCheck(this, ShouldUpdate);\n        return possibleConstructorReturn(this, _Component.apply(this, arguments));\n      }\n\n      ShouldUpdate.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n        return test(this.props, nextProps);\n      };\n\n      ShouldUpdate.prototype.render = function render() {\n        return factory(this.props);\n      };\n\n      return ShouldUpdate;\n    }(Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'shouldUpdate'))(ShouldUpdate);\n    }\n    return ShouldUpdate;\n  };\n};\n\nvar pure = function pure(BaseComponent) {\n  var hoc = shouldUpdate(function (props, nextProps) {\n    return !shallowEqual(props, nextProps);\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    return setDisplayName(wrapDisplayName(BaseComponent, 'pure'))(hoc(BaseComponent));\n  }\n\n  return hoc(BaseComponent);\n};\n\nvar onlyUpdateForKeys = function onlyUpdateForKeys(propKeys) {\n  var hoc = shouldUpdate(function (props, nextProps) {\n    return !shallowEqual(pick(nextProps, propKeys), pick(props, propKeys));\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'onlyUpdateForKeys'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar onlyUpdateForPropTypes = function onlyUpdateForPropTypes(BaseComponent) {\n  var propTypes = BaseComponent.propTypes;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!propTypes) {\n      /* eslint-disable */\n      console.error('A component without any `propTypes` was passed to ' + '`onlyUpdateForPropTypes()`. Check the implementation of the ' + ('component with display name \"' + getDisplayName(BaseComponent) + '\".'));\n      /* eslint-enable */\n    }\n  }\n\n  var propKeys = Object.keys(propTypes || {});\n  var OnlyUpdateForPropTypes = onlyUpdateForKeys(propKeys)(BaseComponent);\n\n  if (process.env.NODE_ENV !== 'production') {\n    return setDisplayName(wrapDisplayName(BaseComponent, 'onlyUpdateForPropTypes'))(OnlyUpdateForPropTypes);\n  }\n  return OnlyUpdateForPropTypes;\n};\n\nvar withContext = function withContext(childContextTypes, getChildContext) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithContext = function (_Component) {\n      inherits(WithContext, _Component);\n\n      function WithContext() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithContext);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.getChildContext = function () {\n          return getChildContext(_this.props);\n        }, _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithContext.prototype.render = function render() {\n        return factory(this.props);\n      };\n\n      return WithContext;\n    }(Component);\n\n    WithContext.childContextTypes = childContextTypes;\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withContext'))(WithContext);\n    }\n    return WithContext;\n  };\n};\n\nvar getContext = function getContext(contextTypes) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var GetContext = function GetContext(ownerProps, context) {\n      return factory(_extends({}, ownerProps, context));\n    };\n\n    GetContext.contextTypes = contextTypes;\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'getContext'))(GetContext);\n    }\n    return GetContext;\n  };\n};\n\n/* eslint-disable no-console */\nvar lifecycle = function lifecycle(spec) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    if (process.env.NODE_ENV !== 'production' && spec.hasOwnProperty('render')) {\n      console.error('lifecycle() does not support the render method; its behavior is to ' + 'pass all props and state to the base component.');\n    }\n\n    var Lifecycle = function (_Component) {\n      inherits(Lifecycle, _Component);\n\n      function Lifecycle() {\n        classCallCheck(this, Lifecycle);\n        return possibleConstructorReturn(this, _Component.apply(this, arguments));\n      }\n\n      Lifecycle.prototype.render = function render() {\n        return factory(_extends({}, this.props, this.state));\n      };\n\n      return Lifecycle;\n    }(Component);\n\n    Object.keys(spec).forEach(function (hook) {\n      return Lifecycle.prototype[hook] = spec[hook];\n    });\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'lifecycle'))(Lifecycle);\n    }\n    return Lifecycle;\n  };\n};\n\nvar toClass = function toClass(baseComponent) {\n  if (isClassComponent(baseComponent)) {\n    return baseComponent;\n  }\n\n  var ToClass = function (_Component) {\n    inherits(ToClass, _Component);\n\n    function ToClass() {\n      classCallCheck(this, ToClass);\n      return possibleConstructorReturn(this, _Component.apply(this, arguments));\n    }\n\n    ToClass.prototype.render = function render() {\n      if (typeof baseComponent === 'string') {\n        return React.createElement(baseComponent, this.props);\n      }\n      return baseComponent(this.props, this.context);\n    };\n\n    return ToClass;\n  }(Component);\n\n  ToClass.displayName = getDisplayName(baseComponent);\n  ToClass.propTypes = baseComponent.propTypes;\n  ToClass.contextTypes = baseComponent.contextTypes;\n  ToClass.defaultProps = baseComponent.defaultProps;\n\n  return ToClass;\n};\n\nvar setPropTypes = function setPropTypes(propTypes) {\n  return setStatic('propTypes', propTypes);\n};\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}\n\nvar createEagerElement = function createEagerElement(type, props, children) {\n  var isReferentiallyTransparent = isReferentiallyTransparentFunctionComponent(type);\n  /* eslint-disable */\n  var hasKey = props && props.hasOwnProperty('key');\n  /* eslint-enable */\n  return createEagerElementUtil(hasKey, isReferentiallyTransparent, type, props, children);\n};\n\nvar createSink = function createSink(callback) {\n  return function (_Component) {\n    inherits(Sink, _Component);\n\n    function Sink() {\n      classCallCheck(this, Sink);\n      return possibleConstructorReturn(this, _Component.apply(this, arguments));\n    }\n\n    Sink.prototype.componentWillMount = function componentWillMount() {\n      callback(this.props);\n    };\n\n    Sink.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n      callback(nextProps);\n    };\n\n    Sink.prototype.render = function render() {\n      return null;\n    };\n\n    return Sink;\n  }(Component);\n};\n\nvar componentFromProp = function componentFromProp(propName) {\n  var Component$$1 = function Component$$1(props) {\n    return createEagerElement(props[propName], omit(props, [propName]));\n  };\n  Component$$1.displayName = 'componentFromProp(' + propName + ')';\n  return Component$$1;\n};\n\nvar nest = function nest() {\n  for (var _len = arguments.length, Components = Array(_len), _key = 0; _key < _len; _key++) {\n    Components[_key] = arguments[_key];\n  }\n\n  var factories = Components.map(createFactory);\n  var Nest = function Nest(_ref) {\n    var props = objectWithoutProperties(_ref, []),\n        children = _ref.children;\n    return factories.reduceRight(function (child, factory) {\n      return factory(props, child);\n    }, children);\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    var displayNames = Components.map(getDisplayName);\n    Nest.displayName = 'nest(' + displayNames.join(', ') + ')';\n  }\n\n  return Nest;\n};\n\nvar hoistStatics = function hoistStatics(higherOrderComponent) {\n  return function (BaseComponent) {\n    var NewComponent = higherOrderComponent(BaseComponent);\n    hoistNonReactStatics(NewComponent, BaseComponent);\n    return NewComponent;\n  };\n};\n\nvar _config = {\n  fromESObservable: null,\n  toESObservable: null\n};\n\nvar configureObservable = function configureObservable(c) {\n  _config = c;\n};\n\nvar config = {\n  fromESObservable: function fromESObservable(observable) {\n    return typeof _config.fromESObservable === 'function' ? _config.fromESObservable(observable) : observable;\n  },\n  toESObservable: function toESObservable(stream) {\n    return typeof _config.toESObservable === 'function' ? _config.toESObservable(stream) : stream;\n  }\n};\n\nvar componentFromStreamWithConfig = function componentFromStreamWithConfig(config$$1) {\n  return function (propsToVdom) {\n    return function (_Component) {\n      inherits(ComponentFromStream, _Component);\n\n      function ComponentFromStream() {\n        var _config$fromESObserva;\n\n        var _temp, _this, _ret;\n\n        classCallCheck(this, ComponentFromStream);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = { vdom: null }, _this.propsEmitter = createChangeEmitter(), _this.props$ = config$$1.fromESObservable((_config$fromESObserva = {\n          subscribe: function subscribe(observer) {\n            var unsubscribe = _this.propsEmitter.listen(function (props) {\n              if (props) {\n                observer.next(props);\n              } else {\n                observer.complete();\n              }\n            });\n            return { unsubscribe: unsubscribe };\n          }\n        }, _config$fromESObserva[$$observable] = function () {\n          return this;\n        }, _config$fromESObserva)), _this.vdom$ = config$$1.toESObservable(propsToVdom(_this.props$)), _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      // Stream of props\n\n\n      // Stream of vdom\n\n\n      ComponentFromStream.prototype.componentWillMount = function componentWillMount() {\n        var _this2 = this;\n\n        // Subscribe to child prop changes so we know when to re-render\n        this.subscription = this.vdom$.subscribe({\n          next: function next(vdom) {\n            _this2.setState({ vdom: vdom });\n          }\n        });\n        this.propsEmitter.emit(this.props);\n      };\n\n      ComponentFromStream.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n        // Receive new props from the owner\n        this.propsEmitter.emit(nextProps);\n      };\n\n      ComponentFromStream.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n        return nextState.vdom !== this.state.vdom;\n      };\n\n      ComponentFromStream.prototype.componentWillUnmount = function componentWillUnmount() {\n        // Call without arguments to complete stream\n        this.propsEmitter.emit();\n\n        // Clean-up subscription before un-mounting\n        this.subscription.unsubscribe();\n      };\n\n      ComponentFromStream.prototype.render = function render() {\n        return this.state.vdom;\n      };\n\n      return ComponentFromStream;\n    }(Component);\n  };\n};\n\nvar componentFromStream = function componentFromStream(propsToVdom) {\n  return componentFromStreamWithConfig(config)(propsToVdom);\n};\n\nvar identity$1 = function identity(t) {\n  return t;\n};\n\nvar mapPropsStreamWithConfig = function mapPropsStreamWithConfig(config$$1) {\n  var componentFromStream = componentFromStreamWithConfig({\n    fromESObservable: identity$1,\n    toESObservable: identity$1\n  });\n  return function (transform) {\n    return function (BaseComponent) {\n      var factory = createFactory(BaseComponent);\n      var fromESObservable = config$$1.fromESObservable,\n          toESObservable = config$$1.toESObservable;\n\n      return componentFromStream(function (props$) {\n        var _ref;\n\n        return _ref = {\n          subscribe: function subscribe(observer) {\n            var subscription = toESObservable(transform(fromESObservable(props$))).subscribe({\n              next: function next(childProps) {\n                return observer.next(factory(childProps));\n              }\n            });\n            return {\n              unsubscribe: function unsubscribe() {\n                return subscription.unsubscribe();\n              }\n            };\n          }\n        }, _ref[$$observable] = function () {\n          return this;\n        }, _ref;\n      });\n    };\n  };\n};\n\nvar mapPropsStream = function mapPropsStream(transform) {\n  var hoc = mapPropsStreamWithConfig(config)(transform);\n\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'mapPropsStream'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar createEventHandlerWithConfig = function createEventHandlerWithConfig(config$$1) {\n  return function () {\n    var _config$fromESObserva;\n\n    var emitter = createChangeEmitter();\n    var stream = config$$1.fromESObservable((_config$fromESObserva = {\n      subscribe: function subscribe(observer) {\n        var unsubscribe = emitter.listen(function (value) {\n          return observer.next(value);\n        });\n        return { unsubscribe: unsubscribe };\n      }\n    }, _config$fromESObserva[$$observable] = function () {\n      return this;\n    }, _config$fromESObserva));\n    return {\n      handler: emitter.emit,\n      stream: stream\n    };\n  };\n};\n\nvar createEventHandler = createEventHandlerWithConfig(config);\n\n// Higher-order component helpers\n\nexport { mapProps, withProps, withPropsOnChange, withHandlers, defaultProps, renameProp, renameProps, flattenProp, withState, withStateHandlers, withReducer, branch, renderComponent, renderNothing, shouldUpdate, pure, onlyUpdateForKeys, onlyUpdateForPropTypes, withContext, getContext, lifecycle, toClass, setStatic, setPropTypes, setDisplayName, compose, getDisplayName, wrapDisplayName, shallowEqual, isClassComponent, createEagerElement, createFactory as createEagerFactory, createSink, componentFromProp, nest, hoistStatics, componentFromStream, componentFromStreamWithConfig, mapPropsStream, mapPropsStreamWithConfig, createEventHandler, createEventHandlerWithConfig, configureObservable as setObservableConfig };\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const getProcessServiceName = (proc) => proc.serviceName;\nexport const getProcessTags = (proc) => proc.tags;\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { createSelector } from 'reselect';\nimport fuzzy from 'fuzzy';\n\nimport { getProcessServiceName } from './process';\n\nexport const getSpanId = (span) => span.spanID;\nexport const getSpanName = (span) => span.operationName;\nexport const getSpanDuration = (span) => span.duration;\nexport const getSpanTimestamp = (span) => span.startTime;\nexport const getSpanProcessId = (span) => span.processID;\nexport const getSpanReferences = (span) => span.references || [];\nexport const getSpanReferenceByType = createSelector(\n  createSelector(({ span }) => span, getSpanReferences),\n  ({ type }) => type,\n  (references, type) => references.find((ref) => ref.refType === type)\n);\nexport const getSpanParentId = createSelector(\n  (span) => getSpanReferenceByType({ span, type: 'CHILD_OF' }),\n  (childOfRef) => (childOfRef ? childOfRef.spanID : null)\n);\n\nexport const getSpanProcess = (span) => {\n  if (!span.process) {\n    throw new Error(\n      `\n      you must hydrate the spans with the processes, perhaps\n      using hydrateSpansWithProcesses(), before accessing a span's process\n    `\n    );\n  }\n\n  return span.process;\n};\n\nexport const getSpanServiceName = createSelector(getSpanProcess, getProcessServiceName);\n\nexport const filterSpansForTimestamps = createSelector(\n  ({ spans }) => spans,\n  ({ leftBound }) => leftBound,\n  ({ rightBound }) => rightBound,\n  (spans, leftBound, rightBound) =>\n    spans.filter((span) => getSpanTimestamp(span) >= leftBound && getSpanTimestamp(span) <= rightBound)\n);\n\nexport const filterSpansForText = createSelector(\n  ({ spans }) => spans,\n  ({ text }) => text,\n  (spans, text) =>\n    fuzzy\n      .filter(text, spans, {\n        extract: (span) => `${getSpanServiceName(span)} ${getSpanName(span)}`,\n      })\n      .map(({ original }) => original)\n);\n\nconst getTextFilterdSpansAsMap = createSelector(filterSpansForText, (matchingSpans) =>\n  matchingSpans.reduce(\n    (obj, span) => ({\n      ...obj,\n      [getSpanId(span)]: span,\n    }),\n    {}\n  )\n);\n\nexport const highlightSpansForTextFilter = createSelector(\n  ({ spans }) => spans,\n  getTextFilterdSpansAsMap,\n  (spans, textFilteredSpansMap) =>\n    spans.map((span) => ({\n      ...span,\n      muted: !textFilteredSpansMap[getSpanId(span)],\n    }))\n);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport default class TreeNode {\n  static iterFunction(fn, depth = 0) {\n    return (node) => fn(node.value, node, depth);\n  }\n\n  static searchFunction(search) {\n    if (typeof search === 'function') {\n      return search;\n    }\n\n    return (value, node) => (search instanceof TreeNode ? node === search : value === search);\n  }\n\n  constructor(value, children = []) {\n    this.value = value;\n    this.children = children;\n  }\n\n  get depth() {\n    return this.children.reduce((depth, child) => Math.max(child.depth + 1, depth), 1);\n  }\n\n  get size() {\n    let i = 0;\n    this.walk(() => i++);\n    return i;\n  }\n\n  addChild(child) {\n    this.children.push(child instanceof TreeNode ? child : new TreeNode(child));\n    return this;\n  }\n\n  find(search) {\n    const searchFn = TreeNode.iterFunction(TreeNode.searchFunction(search));\n    if (searchFn(this)) {\n      return this;\n    }\n    for (let i = 0; i < this.children.length; i++) {\n      const result = this.children[i].find(search);\n      if (result) {\n        return result;\n      }\n    }\n    return null;\n  }\n\n  getPath(search) {\n    const searchFn = TreeNode.iterFunction(TreeNode.searchFunction(search));\n\n    const findPath = (currentNode, currentPath) => {\n      // skip if we already found the result\n      const attempt = currentPath.concat([currentNode]);\n      // base case: return the array when there is a match\n      if (searchFn(currentNode)) {\n        return attempt;\n      }\n      for (let i = 0; i < currentNode.children.length; i++) {\n        const child = currentNode.children[i];\n        const match = findPath(child, attempt);\n        if (match) {\n          return match;\n        }\n      }\n      return null;\n    };\n\n    return findPath(this, []);\n  }\n\n  walk(fn, depth = 0) {\n    const nodeStack = [];\n    let actualDepth = depth;\n    nodeStack.push({ node: this, depth: actualDepth });\n    while (nodeStack.length) {\n      const { node, depth: nodeDepth } = nodeStack.pop();\n      fn(node.value, node, nodeDepth);\n      actualDepth = nodeDepth + 1;\n      let i = node.children.length - 1;\n      while (i >= 0) {\n        nodeStack.push({ node: node.children[i], depth: actualDepth });\n        i--;\n      }\n    }\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { createSelector, createStructuredSelector } from 'reselect';\n\nimport {\n  getSpanId,\n  getSpanName,\n  getSpanServiceName,\n  getSpanTimestamp,\n  getSpanDuration,\n  getSpanProcessId,\n} from './span';\nimport { getProcessServiceName } from './process';\nimport { formatMillisecondTime, formatSecondTime, ONE_SECOND } from '../utils/date';\nimport { numberSortComparator } from '../utils/sort';\nimport TreeNode from '../utils/TreeNode';\n\nexport const getTraceId = (trace) => trace.traceID;\n\nexport const getTraceSpans = (trace) => trace.spans;\n\nconst getTraceProcesses = (trace) => trace.processes;\n\nconst getSpanWithProcess = createSelector(\n  (state) => state.span,\n  (state) => state.processes,\n  (span, processes) => ({\n    ...span,\n    process: processes[getSpanProcessId(span)],\n  })\n);\n\nexport const getTraceSpansAsMap = createSelector(getTraceSpans, (spans) =>\n  spans.reduce((map, span) => map.set(getSpanId(span), span), new Map())\n);\n\nexport const TREE_ROOT_ID = '__root__';\n\n/**\n * Build a tree of { value: spanID, children } items derived from the\n * `span.references` information. The tree represents the grouping of parent /\n * child relationships. The root-most node is nominal in that\n * `.value === TREE_ROOT_ID`. This is done because a root span (the main trace\n * span) is not always included with the trace data. Thus, there can be\n * multiple top-level spans, and the root node acts as their common parent.\n *\n * The children are sorted by `span.startTime` after the tree is built.\n *\n * @param  {Trace} trace The trace to build the tree of spanIDs.\n * @return {TreeNode}    A tree of spanIDs derived from the relationships\n *                       between spans in the trace.\n */\nexport function getTraceSpanIdsAsTree(trace) {\n  const nodesById = new Map(trace.spans.map((span) => [span.spanID, new TreeNode(span.spanID)]));\n  const spansById = new Map(trace.spans.map((span) => [span.spanID, span]));\n  const root = new TreeNode(TREE_ROOT_ID);\n  trace.spans.forEach((span) => {\n    const node = nodesById.get(span.spanID);\n    if (Array.isArray(span.references) && span.references.length) {\n      const { refType, spanID: parentID } = span.references[0];\n      if (refType === 'CHILD_OF' || refType === 'FOLLOWS_FROM') {\n        const parent = nodesById.get(parentID) || root;\n        parent.children.push(node);\n      } else {\n        throw new Error(`Unrecognized ref type: ${refType}`);\n      }\n    } else {\n      root.children.push(node);\n    }\n  });\n  const comparator = (nodeA, nodeB) => {\n    const a = spansById.get(nodeA.value);\n    const b = spansById.get(nodeB.value);\n    return +(a.startTime > b.startTime) || +(a.startTime === b.startTime) - 1;\n  };\n  trace.spans.forEach((span) => {\n    const node = nodesById.get(span.spanID);\n    if (node.children.length > 1) {\n      node.children.sort(comparator);\n    }\n  });\n  root.children.sort(comparator);\n  return root;\n}\n\n// attach \"process\" as an object to each span.\nexport const hydrateSpansWithProcesses = (trace) => {\n  const spans = getTraceSpans(trace);\n  const processes = getTraceProcesses(trace);\n\n  return {\n    ...trace,\n    spans: spans.map((span) => getSpanWithProcess({ span, processes })),\n  };\n};\n\nexport const getTraceSpanCount = createSelector(getTraceSpans, (spans) => spans.length);\n\nexport const getTraceTimestamp = createSelector(getTraceSpans, (spans) =>\n  spans.reduce(\n    (prevTimestamp, span) => (prevTimestamp ? Math.min(prevTimestamp, getSpanTimestamp(span)) : getSpanTimestamp(span)),\n    null\n  )\n);\n\nexport const getTraceDuration = createSelector(getTraceSpans, getTraceTimestamp, (spans, timestamp) =>\n  spans.reduce(\n    (prevDuration, span) =>\n      prevDuration\n        ? Math.max(getSpanTimestamp(span) - timestamp + getSpanDuration(span), prevDuration)\n        : getSpanDuration(span),\n    null\n  )\n);\n\nexport const getTraceEndTimestamp = createSelector(\n  getTraceTimestamp,\n  getTraceDuration,\n  (timestamp, duration) => timestamp + duration\n);\n\nexport const getParentSpan = createSelector(\n  getTraceSpanIdsAsTree,\n  getTraceSpansAsMap,\n  (tree, spanMap) =>\n    tree.children\n      .map((node) => spanMap.get(node.value))\n      .sort((spanA, spanB) => numberSortComparator(getSpanTimestamp(spanA), getSpanTimestamp(spanB)))[0]\n);\n\nexport const getTraceDepth = createSelector(getTraceSpanIdsAsTree, (spanTree) => spanTree.depth - 1);\n\nexport const getSpanDepthForTrace = createSelector(\n  createSelector((state) => state.trace, getTraceSpanIdsAsTree),\n  createSelector((state) => state.span, getSpanId),\n  (node, spanID) => node.getPath(spanID).length - 1\n);\n\nexport const getTraceServices = createSelector(getTraceProcesses, (processes) =>\n  Object.keys(processes).reduce(\n    (services, processID) => services.add(getProcessServiceName(processes[processID])),\n    new Set()\n  )\n);\n\nexport const getTraceServiceCount = createSelector(getTraceServices, (services) => services.size);\n\n// establish constants to determine how math should be handled\n// for nanosecond-to-millisecond conversions.\nexport const DURATION_FORMATTERS = {\n  ms: formatMillisecondTime,\n  s: formatSecondTime,\n};\n\nconst getDurationFormatterForTrace = createSelector(getTraceDuration, (totalDuration) =>\n  totalDuration >= ONE_SECOND ? DURATION_FORMATTERS.s : DURATION_FORMATTERS.ms\n);\n\nexport const formatDurationForUnit = createSelector(\n  ({ duration }) => duration,\n  ({ unit }) => DURATION_FORMATTERS[unit],\n  (duration, formatter) => formatter(duration)\n);\n\nexport const formatDurationForTrace = createSelector(\n  ({ duration }) => duration,\n  createSelector(({ trace }) => trace, getDurationFormatterForTrace),\n  (duration, formatter) => formatter(duration)\n);\n\nexport const getSortedSpans = createSelector(\n  ({ trace }) => trace,\n  ({ spans }) => spans,\n  ({ sort }) => sort,\n  (trace, spans, { dir, comparator, selector }) =>\n    [...spans].sort((spanA, spanB) => dir * comparator(selector(spanA, trace), selector(spanB, trace)))\n);\n\nconst getTraceSpansByHierarchyPosition = createSelector(getTraceSpanIdsAsTree, (tree) => {\n  const hierarchyPositionMap = new Map();\n  let i = 0;\n  tree.walk((spanID) => hierarchyPositionMap.set(spanID, i++));\n  return hierarchyPositionMap;\n});\n\nexport const getTreeSizeForTraceSpan = createSelector(\n  createSelector((state) => state.trace, getTraceSpanIdsAsTree),\n  createSelector((state) => state.span, getSpanId),\n  (tree, spanID) => {\n    const node = tree.find(spanID);\n    if (!node) {\n      return -1;\n    }\n    return node.size - 1;\n  }\n);\n\nexport const getSpanHierarchySortPositionForTrace = createSelector(\n  createSelector(({ trace }) => trace, getTraceSpansByHierarchyPosition),\n  ({ span }) => span,\n  (hierarchyPositionMap, span) => hierarchyPositionMap.get(getSpanId(span))\n);\n\nexport const getTraceName = createSelector(\n  createSelector(\n    createSelector(hydrateSpansWithProcesses, getParentSpan),\n    createStructuredSelector({\n      name: getSpanName,\n      serviceName: getSpanServiceName,\n    })\n  ),\n  ({ name, serviceName }) => `${serviceName}: ${name}`\n);\n\nexport const omitCollapsedSpans = createSelector(\n  ({ spans }) => spans,\n  createSelector(({ trace }) => trace, getTraceSpanIdsAsTree),\n  ({ collapsed }) => collapsed,\n  (spans, tree, collapse) => {\n    const hiddenSpanIds = collapse.reduce((result, collapsedSpanId) => {\n      tree.find(collapsedSpanId).walk((id) => id !== collapsedSpanId && result.add(id));\n      return result;\n    }, new Set());\n\n    return hiddenSpanIds.size > 0 ? spans.filter((span) => !hiddenSpanIds.has(getSpanId(span))) : spans;\n  }\n);\n\nexport const DEFAULT_TICK_INTERVAL = 4;\nexport const DEFAULT_TICK_WIDTH = 3;\nexport const getTicksForTrace = createSelector(\n  ({ trace }) => trace,\n  ({ interval = DEFAULT_TICK_INTERVAL }) => interval,\n  ({ width = DEFAULT_TICK_WIDTH }) => width,\n  (\n    trace,\n    interval,\n    width\n    // timestamps will be spaced over the interval, starting from the initial timestamp\n  ) =>\n    [...Array(interval + 1).keys()].map((num) => ({\n      timestamp: getTraceTimestamp(trace) + getTraceDuration(trace) * (num / interval),\n      width,\n    }))\n);\n\n// TODO: delete this when the backend can ensure uniqueness\n/* istanbul ignore next */\nexport const enforceUniqueSpanIds = createSelector(\n  /* istanbul ignore next */ (trace) => trace,\n  getTraceSpans,\n  /* istanbul ignore next */ (trace, spans) => {\n    const map = new Map();\n\n    return {\n      ...trace,\n      spans: spans.reduce((result, span) => {\n        const spanID = map.has(getSpanId(span)) ? `${getSpanId(span)}_${map.get(getSpanId(span))}` : getSpanId(span);\n        const updatedSpan = { ...span, spanID };\n\n        if (spanID !== getSpanId(span)) {\n          // eslint-disable-next-line no-console\n          console.warn('duplicate spanID in trace replaced', getSpanId(span), 'new:', spanID);\n        }\n\n        // set the presence of the span in the map or increment the number\n        map.set(getSpanId(span), (map.get(getSpanId(span)) || 0) + 1);\n\n        return result.concat([updatedSpan]);\n      }, []),\n    };\n  }\n);\n\n// TODO: delete this when the backend can ensure uniqueness\nexport const dropEmptyStartTimeSpans = createSelector(\n  /* istanbul ignore next */ (trace) => trace,\n  getTraceSpans,\n  /* istanbul ignore next */ (trace, spans) => ({\n    ...trace,\n    spans: spans.filter((span) => !!getSpanTimestamp(span)),\n  })\n);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport function localeStringComparator(itemA, itemB) {\n  return itemA.localeCompare(itemB);\n}\n\nexport function numberSortComparator(itemA, itemB) {\n  return itemA - itemB;\n}\n\nexport function classNameForSortDir(dir) {\n  return `sorted ${dir === 1 ? 'ascending' : 'descending'}`;\n}\n\nexport function getNewSortForClick(prevSort, column) {\n  const { defaultDir = 1 } = column;\n\n  return {\n    key: column.name,\n    dir: prevSort.key === column.name ? -1 * prevSort.dir : defaultDir,\n  };\n}\n\nexport function createSortClickHandler(column, currentSortKey, currentSortDir, updateSort) {\n  return function onClickSortingElement() {\n    const { key, dir } = getNewSortForClick({ key: currentSortKey, dir: currentSortDir }, column);\n    updateSort(key, dir);\n  };\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { isEqual as _isEqual } from 'lodash';\n\n// @ts-ignore\nimport { getTraceSpanIdsAsTree } from '../selectors/trace';\nimport { getConfigValue } from '../utils/config/get-config';\nimport { TraceKeyValuePair, TraceSpan, Trace, TraceResponse } from '../types/trace';\n// @ts-ignore\nimport TreeNode from '../utils/TreeNode';\n\n// exported for tests\nexport function deduplicateTags(spanTags: TraceKeyValuePair[]) {\n  const warningsHash: Map<string, string> = new Map<string, string>();\n  const tags: TraceKeyValuePair[] = spanTags.reduce<TraceKeyValuePair[]>((uniqueTags, tag) => {\n    if (!uniqueTags.some((t) => t.key === tag.key && t.value === tag.value)) {\n      uniqueTags.push(tag);\n    } else {\n      warningsHash.set(`${tag.key}:${tag.value}`, `Duplicate tag \"${tag.key}:${tag.value}\"`);\n    }\n    return uniqueTags;\n  }, []);\n  const warnings = Array.from(warningsHash.values());\n  return { tags, warnings };\n}\n\n// exported for tests\nexport function orderTags(spanTags: TraceKeyValuePair[], topPrefixes?: string[]) {\n  const orderedTags: TraceKeyValuePair[] = spanTags.slice();\n  const tp = (topPrefixes || []).map((p: string) => p.toLowerCase());\n\n  orderedTags.sort((a, b) => {\n    const aKey = a.key.toLowerCase();\n    const bKey = b.key.toLowerCase();\n\n    for (let i = 0; i < tp.length; i++) {\n      const p = tp[i];\n      if (aKey.startsWith(p) && !bKey.startsWith(p)) {\n        return -1;\n      }\n      if (!aKey.startsWith(p) && bKey.startsWith(p)) {\n        return 1;\n      }\n    }\n\n    if (aKey > bKey) {\n      return 1;\n    }\n    if (aKey < bKey) {\n      return -1;\n    }\n    return 0;\n  });\n\n  return orderedTags;\n}\n\n/**\n * NOTE: Mutates `data` - Transform the HTTP response data into the form the app\n * generally requires.\n */\nexport default function transformTraceData(data: TraceResponse | undefined): Trace | null {\n  if (!data?.traceID) {\n    return null;\n  }\n  const traceID = data.traceID.toLowerCase();\n\n  let traceEndTime = 0;\n  let traceStartTime = Number.MAX_SAFE_INTEGER;\n  const spanIdCounts = new Map();\n  const spanMap = new Map<string, TraceSpan>();\n  // filter out spans with empty start times\n  // eslint-disable-next-line no-param-reassign\n  data.spans = data.spans.filter((span) => Boolean(span.startTime));\n\n  const max = data.spans.length;\n  for (let i = 0; i < max; i++) {\n    const span: TraceSpan = data.spans[i] as TraceSpan;\n    const { startTime, duration, processID } = span;\n    //\n    let spanID = span.spanID;\n    // check for start / end time for the trace\n    if (startTime < traceStartTime) {\n      traceStartTime = startTime;\n    }\n    if (startTime + duration > traceEndTime) {\n      traceEndTime = startTime + duration;\n    }\n    // make sure span IDs are unique\n    const idCount = spanIdCounts.get(spanID);\n    if (idCount != null) {\n      // eslint-disable-next-line no-console\n      console.warn(`Dupe spanID, ${idCount + 1} x ${spanID}`, span, spanMap.get(spanID));\n      if (_isEqual(span, spanMap.get(spanID))) {\n        // eslint-disable-next-line no-console\n        console.warn('\\t two spans with same ID have `isEqual(...) === true`');\n      }\n      spanIdCounts.set(spanID, idCount + 1);\n      spanID = `${spanID}_${idCount}`;\n      span.spanID = spanID;\n    } else {\n      spanIdCounts.set(spanID, 1);\n    }\n    span.process = data.processes[processID];\n    spanMap.set(spanID, span);\n  }\n  // tree is necessary to sort the spans, so children follow parents, and\n  // siblings are sorted by start time\n  const tree = getTraceSpanIdsAsTree(data);\n  const spans: TraceSpan[] = [];\n  const svcCounts: Record<string, number> = {};\n  let traceName = '';\n\n  // Eslint complains about number type not needed but then TS complains it is implicitly any.\n  // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n  tree.walk((spanID: string, node: TreeNode, depth: number = 0) => {\n    if (spanID === '__root__') {\n      return;\n    }\n    const span = spanMap.get(spanID) as TraceSpan;\n    if (!span) {\n      return;\n    }\n    const { serviceName } = span.process;\n    svcCounts[serviceName] = (svcCounts[serviceName] || 0) + 1;\n    if (!span.references || !span.references.length) {\n      traceName = `${serviceName}: ${span.operationName}`;\n    }\n    span.relativeStartTime = span.startTime - traceStartTime;\n    span.depth = depth - 1;\n    span.hasChildren = node.children.length > 0;\n    span.warnings = span.warnings || [];\n    span.tags = span.tags || [];\n    span.references = span.references || [];\n    const tagsInfo = deduplicateTags(span.tags);\n    span.tags = orderTags(tagsInfo.tags, getConfigValue('topTagPrefixes'));\n    span.warnings = span.warnings.concat(tagsInfo.warnings);\n    span.references.forEach((ref, index) => {\n      const refSpan = spanMap.get(ref.spanID) as TraceSpan;\n      if (refSpan) {\n        // eslint-disable-next-line no-param-reassign\n        ref.span = refSpan;\n        if (index > 0) {\n          // Don't take into account the parent, just other references.\n          refSpan.subsidiarilyReferencedBy = refSpan.subsidiarilyReferencedBy || [];\n          refSpan.subsidiarilyReferencedBy.push({\n            spanID,\n            traceID,\n            span,\n            refType: ref.refType,\n          });\n        }\n      }\n    });\n    spans.push(span);\n  });\n  const services = Object.keys(svcCounts).map((name) => ({ name, numberOfSpans: svcCounts[name] }));\n  return {\n    services,\n    spans,\n    traceID,\n    traceName,\n    // can't use spread operator for intersection types\n    // repl: https://goo.gl/4Z23MJ\n    // issue: https://github.com/facebook/flow/issues/1511\n    processes: data.processes,\n    duration: traceEndTime - traceStartTime,\n    startTime: traceStartTime,\n    endTime: traceEndTime,\n  };\n}\n","/*\n * Fuzzy\n * https://github.com/myork/fuzzy\n *\n * Copyright (c) 2012 Matt York\n * Licensed under the MIT license.\n */\n\n(function() {\n\nvar root = this;\n\nvar fuzzy = {};\n\n// Use in node or in browser\nif (typeof exports !== 'undefined') {\n  module.exports = fuzzy;\n} else {\n  root.fuzzy = fuzzy;\n}\n\n// Return all elements of `array` that have a fuzzy\n// match against `pattern`.\nfuzzy.simpleFilter = function(pattern, array) {\n  return array.filter(function(str) {\n    return fuzzy.test(pattern, str);\n  });\n};\n\n// Does `pattern` fuzzy match `str`?\nfuzzy.test = function(pattern, str) {\n  return fuzzy.match(pattern, str) !== null;\n};\n\n// If `pattern` matches `str`, wrap each matching character\n// in `opts.pre` and `opts.post`. If no match, return null\nfuzzy.match = function(pattern, str, opts) {\n  opts = opts || {};\n  var patternIdx = 0\n    , result = []\n    , len = str.length\n    , totalScore = 0\n    , currScore = 0\n    // prefix\n    , pre = opts.pre || ''\n    // suffix\n    , post = opts.post || ''\n    // String to compare against. This might be a lowercase version of the\n    // raw string\n    , compareString =  opts.caseSensitive && str || str.toLowerCase()\n    , ch;\n\n  pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n  // For each character in the string, either add it to the result\n  // or wrap in template if it's the next string in the pattern\n  for(var idx = 0; idx < len; idx++) {\n    ch = str[idx];\n    if(compareString[idx] === pattern[patternIdx]) {\n      ch = pre + ch + post;\n      patternIdx += 1;\n\n      // consecutive characters should increase the score more than linearly\n      currScore += 1 + currScore;\n    } else {\n      currScore = 0;\n    }\n    totalScore += currScore;\n    result[result.length] = ch;\n  }\n\n  // return rendered string if we have a match for every char\n  if(patternIdx === pattern.length) {\n    // if the string is an exact match with pattern, totalScore should be maxed\n    totalScore = (compareString === pattern) ? Infinity : totalScore;\n    return {rendered: result.join(''), score: totalScore};\n  }\n\n  return null;\n};\n\n// The normal entry point. Filters `arr` for matches against `pattern`.\n// It returns an array with matching values of the type:\n//\n//     [{\n//         string:   '<b>lah' // The rendered string\n//       , index:    2        // The index of the element in `arr`\n//       , original: 'blah'   // The original element in `arr`\n//     }]\n//\n// `opts` is an optional argument bag. Details:\n//\n//    opts = {\n//        // string to put before a matching character\n//        pre:     '<b>'\n//\n//        // string to put after matching character\n//      , post:    '</b>'\n//\n//        // Optional function. Input is an entry in the given arr`,\n//        // output should be the string to test `pattern` against.\n//        // In this example, if `arr = [{crying: 'koala'}]` we would return\n//        // 'koala'.\n//      , extract: function(arg) { return arg.crying; }\n//    }\nfuzzy.filter = function(pattern, arr, opts) {\n  if(!arr || arr.length === 0) {\n    return [];\n  }\n  if (typeof pattern !== 'string') {\n    return arr;\n  }\n  opts = opts || {};\n  return arr\n    .reduce(function(prev, element, idx, arr) {\n      var str = element;\n      if(opts.extract) {\n        str = opts.extract(element);\n      }\n      var rendered = fuzzy.match(pattern, str, opts);\n      if(rendered != null) {\n        prev[prev.length] = {\n            string: rendered.rendered\n          , score: rendered.score\n          , index: idx\n          , original: element\n        };\n      }\n      return prev;\n    }, [])\n\n    // Sort by score. Browsers are inconsistent wrt stable/unstable\n    // sorting, so force stable by using the index in the case of tie.\n    // See http://ofb.net/~sethml/is-sort-stable.html\n    .sort(function(a,b) {\n      var compare = b.score - a.score;\n      if(compare) return compare;\n      return a.index - b.index;\n    });\n};\n\n\n}());\n\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React, { ReactElement } from 'react';\n\nexport type TooltipPlacement =\n  | 'top'\n  | 'left'\n  | 'right'\n  | 'bottom'\n  | 'topLeft'\n  | 'topRight'\n  | 'bottomLeft'\n  | 'bottomRight'\n  | 'leftTop'\n  | 'leftBottom'\n  | 'rightTop'\n  | 'rightBottom';\nexport type PopoverProps = {\n  children: ReactElement;\n  content: ReactElement;\n  arrowPointAtCenter?: boolean;\n  overlayClassName?: string;\n  placement?: TooltipPlacement;\n};\n\nexport const UIPopover: React.ComponentType<PopoverProps> = function UIPopover(props: PopoverProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Popover {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type TooltipProps = {\n  title: string | ReactElement;\n  getPopupContainer?: (triggerNode: Element) => HTMLElement;\n  overlayClassName?: string;\n  children: ReactElement;\n  placement?: TooltipPlacement;\n  mouseLeaveDelay?: number;\n  arrowPointAtCenter?: boolean;\n  onVisibleChange?: (visible: boolean) => void;\n};\n\nexport const UITooltip: React.ComponentType<TooltipProps> = function UITooltip(props: TooltipProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Tooltip {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type IconProps = {\n  type: string;\n  className?: string;\n  onClick?: React.MouseEventHandler<any>;\n};\n\nexport const UIIcon: React.ComponentType<IconProps> = function UIIcon(props: IconProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Icon {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type DropdownProps = {\n  overlay: React.ReactNode;\n  placement?: 'topLeft' | 'topCenter' | 'topRight' | 'bottomLeft' | 'bottomCenter' | 'bottomRight';\n  trigger?: Array<'click' | 'hover' | 'contextMenu'>;\n  children?: React.ReactNode;\n};\n\nexport const UIDropdown = function UIDropdown(props: DropdownProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Dropdown {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type MenuProps = {\n  children?: React.ReactNode;\n};\n\nexport const UIMenu = function UIMenu(props: MenuProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Menu {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type MenuItemProps = {\n  children?: React.ReactNode;\n};\n\nexport const UIMenuItem = function UIMenuItem(props: MenuItemProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.MenuItem {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type ButtonHTMLType = 'submit' | 'button' | 'reset';\nexport type ButtonProps = {\n  children?: React.ReactNode;\n  className?: string;\n  htmlType?: ButtonHTMLType;\n  icon?: string;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  disabled?: boolean;\n};\n\nexport const UIButton = function UIButton(props: ButtonProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Button {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type DividerProps = {\n  className?: string;\n  type?: 'vertical' | 'horizontal';\n};\n\nexport const UIDivider = function UIDivider(props: DividerProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Divider {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type InputProps = {\n  autosize?: boolean | null;\n  placeholder?: string;\n  onChange: (value: React.ChangeEvent<HTMLInputElement>) => void;\n  suffix: React.ReactNode;\n  value?: string;\n};\n\nexport const UIInput: React.FC<InputProps> = function UIInput(props: InputProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Input {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type InputGroupProps = {\n  className?: string;\n  compact?: boolean;\n  style?: React.CSSProperties;\n  children?: React.ReactNode;\n};\n\nexport const UIInputGroup = function UIInputGroup(props: InputGroupProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.InputGroup {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type Elements = {\n  Popover: React.ComponentType<PopoverProps>;\n  Tooltip: React.ComponentType<TooltipProps>;\n  Icon: React.ComponentType<IconProps>;\n  Dropdown: React.ComponentType<DropdownProps>;\n  Menu: React.ComponentType<MenuProps>;\n  MenuItem: React.ComponentType<MenuItemProps>;\n  Button: React.ComponentType<ButtonProps>;\n  Divider: React.ComponentType<DividerProps>;\n  Input: React.ComponentType<InputProps>;\n  InputGroup: React.ComponentType<InputGroupProps>;\n};\n\n/**\n * Allows for injecting custom UI elements that will be used. Mainly for styling and removing dependency on\n * any specific UI library but can also inject specific behaviour.\n */\nconst UIElementsContext = React.createContext<Elements | undefined>(undefined);\nUIElementsContext.displayName = 'UIElementsContext';\nexport default UIElementsContext;\n\ntype GetElementsContextProps = {\n  children: (elements: Elements) => React.ReactNode;\n};\n\n/**\n * Convenience render prop style component to handle error state when elements are not defined.\n */\nexport function GetElementsContext(props: GetElementsContextProps) {\n  return (\n    <UIElementsContext.Consumer>\n      {(value: Elements | undefined) => {\n        if (!value) {\n          throw new Error('Elements context is required. You probably forget to use UIElementsContext.Provider');\n        }\n        return props.children(value);\n      }}\n    </UIElementsContext.Consumer>\n  );\n}\n","export { default as TraceTimelineViewer } from './TraceTimelineViewer';\nexport { default as TracePageHeader } from './TracePageHeader';\nexport { default as UIElementsContext } from './uiElementsContext';\nexport * from './uiElementsContext';\nexport * from './types';\nexport * from './TraceTimelineViewer/types';\nexport { default as DetailState } from './TraceTimelineViewer/SpanDetail/DetailState';\nexport { default as transformTraceData } from './model/transform-trace-data';\nexport { default as filterSpans } from './utils/filter-spans';\nexport * from './Theme';\n\nimport { onlyUpdateForKeys } from 'recompose';\n\nexport default {\n  onlyUpdateForKeys,\n} as any;\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Theme } from '../Theme';\nimport memoizeOne from 'memoize-one';\n\n// TS needs the precise return type\nfunction strToRgb(s: string): [number, number, number] {\n  if (s.length !== 7) {\n    return [0, 0, 0];\n  }\n  const r = s.slice(1, 3);\n  const g = s.slice(3, 5);\n  const b = s.slice(5);\n  return [parseInt(r, 16), parseInt(g, 16), parseInt(b, 16)];\n}\n\nclass ColorGenerator {\n  colorsHex: string[];\n  colorsRgb: Array<[number, number, number]>;\n  cache: Map<string, number>;\n  currentIdx: number;\n\n  constructor(colorsHex: string[]) {\n    this.colorsHex = colorsHex;\n    this.colorsRgb = colorsHex.map(strToRgb);\n    this.cache = new Map();\n    this.currentIdx = 0;\n  }\n\n  _getColorIndex(key: string): number {\n    let i = this.cache.get(key);\n    if (i == null) {\n      i = this.currentIdx;\n      this.cache.set(key, this.currentIdx);\n      this.currentIdx = ++this.currentIdx % this.colorsHex.length;\n    }\n    return i;\n  }\n\n  /**\n   * Will assign a color to an arbitrary key.\n   * If the key has been used already, it will\n   * use the same color.\n   */\n  getColorByKey(key: string) {\n    const i = this._getColorIndex(key);\n    return this.colorsHex[i];\n  }\n\n  /**\n   * Retrieve the RGB values associated with a key. Adds the key and associates\n   * it with a color if the key is not recognized.\n   * @returns {number[]} An array of three ints [0, 255] representing a color.\n   */\n  getRgbColorByKey(key: string): [number, number, number] {\n    const i = this._getColorIndex(key);\n    return this.colorsRgb[i];\n  }\n\n  clear() {\n    this.cache.clear();\n    this.currentIdx = 0;\n  }\n}\n\nconst getGenerator = memoizeOne((colors: string[]) => {\n  return new ColorGenerator(colors);\n});\n\nexport function clear() {\n  getGenerator([]);\n}\n\nexport function getColorByKey(key: string, theme: Theme) {\n  return getGenerator(theme.servicesColorPalette).getColorByKey(key);\n}\n\nexport function getRgbColorByKey(key: string, theme: Theme): [number, number, number] {\n  return getGenerator(theme.servicesColorPalette).getRgbColorByKey(key);\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar IconBase = function IconBase(_ref, _ref2) {\n  var children = _ref.children;\n  var color = _ref.color;\n  var size = _ref.size;\n  var style = _ref.style;\n  var width = _ref.width;\n  var height = _ref.height;\n\n  var props = _objectWithoutProperties(_ref, ['children', 'color', 'size', 'style', 'width', 'height']);\n\n  var _ref2$reactIconBase = _ref2.reactIconBase;\n  var reactIconBase = _ref2$reactIconBase === undefined ? {} : _ref2$reactIconBase;\n\n  var computedSize = size || reactIconBase.size || '1em';\n  return _react2.default.createElement('svg', _extends({\n    children: children,\n    fill: 'currentColor',\n    preserveAspectRatio: 'xMidYMid meet',\n    height: height || computedSize,\n    width: width || computedSize\n  }, reactIconBase, props, {\n    style: _extends({\n      verticalAlign: 'middle',\n      color: color || reactIconBase.color\n    }, reactIconBase.style || {}, style)\n  }));\n};\n\nIconBase.propTypes = {\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  height: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  style: _propTypes2.default.object\n};\n\nIconBase.contextTypes = {\n  reactIconBase: _propTypes2.default.shape(IconBase.propTypes)\n};\n\nexports.default = IconBase;\nmodule.exports = exports['default'];","/* eslint-env node, browser */\n'use strict'\n\n/**\n * finds all callbacks that match based on the keycode, modifiers,\n * and action\n *\n * @param {string} character\n * @param {Array} modifiers\n * @param {Event|Object} e\n * @param {string=} sequenceName - name of the sequence we are looking for\n * @param {string=} combination\n * @param {number=} level\n * @returns {Array}\n */\nmodule.exports = function (character, modifiers, e, sequenceName, combination, level) {\n  var self = this\n  var j\n  var callback\n  var matches = []\n  var action = e.type\n  var isModifier\n  var modifiersMatch\n\n  if (\n      action === 'keypress' &&\n      // Firefox fires keypress for arrows\n      !(e.code && e.code.slice(0, 5) === 'Arrow')\n  ) {\n    // 'any-character' callbacks are only on `keypress`\n    var anyCharCallbacks = self.callbacks['any-character'] || []\n    anyCharCallbacks.forEach(function (callback) {\n      matches.push(callback)\n    })\n  }\n\n  if (!self.callbacks[character]) { return matches }\n\n  isModifier = require('../../helpers/isModifier')\n  // if a modifier key is coming up on its own we should allow it\n  if (action === 'keyup' && isModifier(character)) {\n    modifiers = [character]\n  }\n\n  // loop through all callbacks for the key that was pressed\n  // and see if any of them match\n  for (j = 0; j < self.callbacks[character].length; ++j) {\n    callback = self.callbacks[character][j]\n\n    // if a sequence name is not specified, but this is a sequence at\n    // the wrong level then move onto the next match\n    if (!sequenceName && callback.seq && self.sequenceLevels[callback.seq] !== callback.level) {\n      continue\n    }\n\n    // if the action we are looking for doesn't match the action we got\n    // then we should keep going\n    if (action !== callback.action) {\n      continue\n    }\n\n    // if this is a keypress event and the meta key and control key\n    // are not pressed that means that we need to only look at the\n    // character, otherwise check the modifiers as well\n    //\n    // chrome will not fire a keypress if meta or control is down\n    // safari will fire a keypress if meta or meta+shift is down\n    // firefox will fire a keypress if meta or control is down\n    modifiersMatch = require('./modifiersMatch')\n    if ((action === 'keypress' && !e.metaKey && !e.ctrlKey) || modifiersMatch(modifiers, callback.modifiers)) {\n      // when you bind a combination or sequence a second time it\n      // should overwrite the first one.  if a sequenceName or\n      // combination is specified in this call it does just that\n      //\n      // @todo make deleting its own method?\n      var deleteCombo = !sequenceName && callback.combo === combination\n      var deleteSequence = sequenceName && callback.seq === sequenceName && callback.level === level\n      if (deleteCombo || deleteSequence) {\n        self.callbacks[character].splice(j, 1)\n      }\n\n      matches.push(callback)\n    }\n  }\n\n  return matches\n}\n","/* eslint-env node, browser */\n'use strict'\n\nmodule.exports = function () {\n  var self = this\n\n  self.instances.forEach(function (combokeys) {\n    combokeys.reset()\n  })\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoIosArrowDown = function IoIosArrowDown(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm31 12.5l1.5 1.6-12.5 13.4-12.5-13.4 1.5-1.6 11 11.7z' })\n        )\n    );\n};\n\nexports.default = IoIosArrowDown;\nmodule.exports = exports['default'];","var off = require('./dom-event').off\nmodule.exports = function () {\n  var self = this\n  var element = self.element\n\n  off(element, 'keypress', self.eventHandler)\n  off(element, 'keydown', self.eventHandler)\n  off(element, 'keyup', self.eventHandler)\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React, { useContext } from 'react';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport memoizeOne from 'memoize-one';\nimport tinycolor from 'tinycolor2';\n\nconst COLORS_HEX = [\n  '#17B8BE',\n  '#F8DCA1',\n  '#B7885E',\n  '#FFCB99',\n  '#F89570',\n  '#829AE3',\n  '#E79FD5',\n  '#1E96BE',\n  '#89DAC1',\n  '#B3AD9E',\n  '#12939A',\n  '#DDB27C',\n  '#88572C',\n  '#FF9833',\n  '#EF5D28',\n  '#162A65',\n  '#DA70BF',\n  '#125C77',\n  '#4DC19C',\n  '#776E57',\n];\n\nconst COLORS_HEX_DARK = [\n  '#17B8BE',\n  '#F8DCA1',\n  '#B7885E',\n  '#FFCB99',\n  '#F89570',\n  '#829AE3',\n  '#E79FD5',\n  '#1E96BE',\n  '#89DAC1',\n  '#B3AD9E',\n  '#12939A',\n  '#DDB27C',\n  '#88572C',\n  '#FF9833',\n  '#EF5D28',\n  '#DA70BF',\n  '#4DC19C',\n  '#776E57',\n];\n\nexport type ThemeOptions = Partial<Theme>;\n\nexport enum ThemeType {\n  Dark,\n  Light,\n}\n\nexport type Theme = {\n  type: ThemeType;\n  servicesColorPalette: string[];\n  borderStyle: string;\n  components?: {\n    TraceName?: {\n      fontSize?: number | string;\n    };\n  };\n};\n\nexport const defaultTheme: Theme = {\n  type: ThemeType.Light,\n  borderStyle: '1px solid #bbb',\n  servicesColorPalette: COLORS_HEX,\n};\n\nexport function isLight(theme?: Theme | ThemeOptions) {\n  // Light theme is default type not set which only happens if called for ThemeOptions.\n  return theme && theme.type ? theme.type === ThemeType.Light : false;\n}\n\nconst ThemeContext = React.createContext<ThemeOptions | undefined>(undefined);\nThemeContext.displayName = 'ThemeContext';\n\nexport const ThemeProvider = ThemeContext.Provider;\n\ntype ThemeConsumerProps = {\n  children: (theme: Theme) => React.ReactNode;\n};\nexport function ThemeConsumer(props: ThemeConsumerProps) {\n  return (\n    <ThemeContext.Consumer>\n      {(value: ThemeOptions | undefined) => {\n        const theme = memoizedThemeMerge(value);\n        return props.children(theme);\n      }}\n    </ThemeContext.Consumer>\n  );\n}\n\nconst memoizedThemeMerge = memoizeOne((value?: ThemeOptions) => {\n  const darkOverrides: Partial<Theme> = {};\n  if (!isLight(value)) {\n    darkOverrides.servicesColorPalette = COLORS_HEX_DARK;\n  }\n  return value\n    ? {\n        ...defaultTheme,\n        ...darkOverrides,\n        ...value,\n      }\n    : defaultTheme;\n});\n\ntype WrappedWithThemeComponent<Props> = React.ComponentType<Omit<Props, 'theme'>> & {\n  wrapped: React.ComponentType<Props>;\n};\n\nexport const withTheme = <Props extends { theme: Theme }, Statics extends {} = {}>(\n  Component: React.ComponentType<Props>\n): WrappedWithThemeComponent<Props> => {\n  let WithTheme: React.ComponentType<Omit<Props, 'theme'>> = (props) => {\n    return (\n      <ThemeConsumer>\n        {(theme: Theme) => {\n          return (\n            <Component\n              {...({\n                ...props,\n                theme,\n              } as Props & { theme: Theme })}\n            />\n          );\n        }}\n      </ThemeConsumer>\n    );\n  };\n\n  WithTheme.displayName = `WithTheme(${Component.displayName})`;\n  WithTheme = hoistNonReactStatics<React.ComponentType<Omit<Props, 'theme'>>, React.ComponentType<Props>>(\n    WithTheme,\n    Component\n  );\n  (WithTheme as WrappedWithThemeComponent<Props>).wrapped = Component;\n  return WithTheme as WrappedWithThemeComponent<Props>;\n};\n\nexport function useTheme(): Theme {\n  const theme = useContext(ThemeContext);\n  return {\n    ...defaultTheme,\n    ...theme,\n  };\n}\n\nexport const createStyle = <Fn extends (this: any, ...newArgs: any[]) => ReturnType<Fn>>(fn: Fn) => {\n  return memoizeOne(fn);\n};\n\n/**\n * Tries to get a dark variant color. Either by simply inverting the luminosity and darkening or lightening the color\n * a bit, or if base is provided, tries 2 variants of lighter and darker colors and checks which is more readable with\n * the base.\n * @param theme\n * @param hex\n * @param base\n */\nexport function autoColor(theme: Theme, hex: string, base?: string) {\n  if (isLight(theme)) {\n    return hex;\n  } else {\n    if (base) {\n      const color = tinycolor(hex);\n      return tinycolor\n        .mostReadable(\n          base,\n          [\n            color.clone().lighten(25),\n            color.clone().lighten(10),\n            color,\n            color.clone().darken(10),\n            color.clone().darken(25),\n          ],\n          {\n            includeFallbackColors: false,\n          }\n        )\n        .toHex8String();\n    }\n    const color = tinycolor(hex).toHsl();\n    color.l = 1 - color.l;\n    const newColor = tinycolor(color);\n    return newColor.isLight() ? newColor.darken(5).toHex8String() : newColor.lighten(5).toHex8String();\n  }\n}\n\n/**\n * With theme overrides you can use both number or string (for things like rem units) so this makes sure we convert\n * the value accordingly or use fallback if not set\n */\nexport function safeSize(size: number | string | undefined, fallback: string): string {\n  if (!size) {\n    return fallback;\n  }\n\n  if (typeof size === 'string') {\n    return size;\n  } else {\n    return `${size}px`;\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceLog } from '../../types/trace';\n\n/**\n * Which items of a {@link SpanDetail} component are expanded.\n */\nexport default class DetailState {\n  isTagsOpen: boolean;\n  isProcessOpen: boolean;\n  logs: { isOpen: boolean; openedItems: Set<TraceLog> };\n  isWarningsOpen: boolean;\n  isStackTracesOpen: boolean;\n  isReferencesOpen: boolean;\n\n  constructor(oldState?: DetailState) {\n    const {\n      isTagsOpen,\n      isProcessOpen,\n      isReferencesOpen,\n      isWarningsOpen,\n      isStackTracesOpen,\n      logs,\n    }: DetailState | Record<string, undefined> = oldState || {};\n    this.isTagsOpen = Boolean(isTagsOpen);\n    this.isProcessOpen = Boolean(isProcessOpen);\n    this.isReferencesOpen = Boolean(isReferencesOpen);\n    this.isWarningsOpen = Boolean(isWarningsOpen);\n    this.isStackTracesOpen = Boolean(isStackTracesOpen);\n    this.logs = {\n      isOpen: Boolean(logs && logs.isOpen),\n      openedItems: logs && logs.openedItems ? new Set(logs.openedItems) : new Set(),\n    };\n  }\n\n  toggleTags() {\n    const next = new DetailState(this);\n    next.isTagsOpen = !this.isTagsOpen;\n    return next;\n  }\n\n  toggleProcess() {\n    const next = new DetailState(this);\n    next.isProcessOpen = !this.isProcessOpen;\n    return next;\n  }\n\n  toggleReferences() {\n    const next = new DetailState(this);\n    next.isReferencesOpen = !this.isReferencesOpen;\n    return next;\n  }\n\n  toggleWarnings() {\n    const next = new DetailState(this);\n    next.isWarningsOpen = !this.isWarningsOpen;\n    return next;\n  }\n\n  toggleStackTraces() {\n    const next = new DetailState(this);\n    next.isStackTracesOpen = !this.isStackTracesOpen;\n    return next;\n  }\n\n  toggleLogs() {\n    const next = new DetailState(this);\n    next.logs.isOpen = !this.logs.isOpen;\n    return next;\n  }\n\n  toggleLogItem(logItem: TraceLog) {\n    const next = new DetailState(this);\n    if (next.logs.openedItems.has(logItem)) {\n      next.logs.openedItems.delete(logItem);\n    } else {\n      next.logs.openedItems.add(logItem);\n    }\n    return next;\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds multiple combinations to the same callback\n *\n * @param {Array} combinations\n * @param {Function} callback\n * @param {string|undefined} action\n * @returns void\n */\nmodule.exports = function (combinations, callback, action) {\n  var self = this\n\n  for (var j = 0; j < combinations.length; ++j) {\n    self.bindSingle(combinations[j], callback, action)\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoAlert = function IoAlert(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm25 37.5h-10v-7.5h10v7.5z m-1.2-12.5h-7.5l-1.3-22.5h10z' })\n        )\n    );\n};\n\nexports.default = IoAlert;\nmodule.exports = exports['default'];","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * Converts from a string key combination to an array\n *\n * @param  {string} combination like \"command+shift+l\"\n * @return {Array}\n */\nmodule.exports = function (combination) {\n  if (combination === '+') {\n    return ['+']\n  }\n\n  return combination.split('+')\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * handles a character key event\n *\n * @param {string} character\n * @param {Array} modifiers\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (character, modifiers, e) {\n  var self = this\n  var callbacks\n  var j\n  var doNotReset = {}\n  var maxLevel = 0\n  var processedSequenceCallback = false\n  var isModifier\n  var ignoreThisKeypress\n\n  callbacks = self.getMatches(character, modifiers, e)\n  // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n  for (j = 0; j < callbacks.length; ++j) {\n    if (callbacks[j].seq) {\n      maxLevel = Math.max(maxLevel, callbacks[j].level)\n    }\n  }\n\n  // loop through matching callbacks for this key event\n  for (j = 0; j < callbacks.length; ++j) {\n    // fire for all sequence callbacks\n    // this is because if for example you have multiple sequences\n    // bound such as \"g i\" and \"g t\" they both need to fire the\n    // callback for matching g cause otherwise you can only ever\n    // match the first one\n    if (callbacks[j].seq) {\n      // only fire callbacks for the maxLevel to prevent\n      // subsequences from also firing\n      //\n      // for example 'a option b' should not cause 'option b' to fire\n      // even though 'option b' is part of the other sequence\n      //\n      // any sequences that do not match here will be discarded\n      // below by the resetSequences call\n      if (callbacks[j].level !== maxLevel) {\n        continue\n      }\n\n      processedSequenceCallback = true\n\n      // keep a list of which sequences were matches for later\n      doNotReset[callbacks[j].seq] = 1\n      self.fireCallback(callbacks[j].callback, e, callbacks[j].combo, callbacks[j].seq)\n      continue\n    }\n\n    // if there were no sequence matches but we are still here\n    // that means this is a regular match so we should fire that\n    if (!processedSequenceCallback) {\n      self.fireCallback(callbacks[j].callback, e, callbacks[j].combo)\n    }\n  }\n\n  // if the key you pressed matches the type of sequence without\n  // being a modifier (ie \"keyup\" or \"keypress\") then we should\n  // reset all sequences that were not matched by this event\n  //\n  // this is so, for example, if you have the sequence \"h a t\" and you\n  // type \"h e a r t\" it does not match.  in this case the \"e\" will\n  // cause the sequence to reset\n  //\n  // modifier keys are ignored because you can have a sequence\n  // that contains modifiers such as \"enter ctrl+space\" and in most\n  // cases the modifier key will be pressed before the next key\n  //\n  // also if you have a sequence such as \"ctrl+b a\" then pressing the\n  // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n  //\n  // the \"keydown\" is expected when there is a modifier, but the\n  // \"keypress\" ends up matching the nextExpectedAction since it occurs\n  // after and that causes the sequence to reset\n  //\n  // we ignore keypresses in a sequence that directly follow a keydown\n  // for the same character\n  ignoreThisKeypress = e.type === 'keypress' && self.ignoreNextKeypress\n  isModifier = require('../../helpers/isModifier')\n  if (e.type === self.nextExpectedAction && !isModifier(character) && !ignoreThisKeypress) {\n    self.resetSequences(doNotReset)\n  }\n\n  self.ignoreNextKeypress = processedSequenceCallback && e.type === 'keydown'\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\n\nimport renderIntoCanvas from './render-into-canvas';\nimport { getRgbColorByKey } from '../../utils/color-generator';\nimport { TNil } from '../../types';\n\nimport { autoColor, createStyle, Theme, withTheme } from '../../Theme';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    CanvasSpanGraph: css`\n      label: CanvasSpanGraph;\n      background: ${autoColor(theme, '#fafafa')};\n      height: 60px;\n      position: absolute;\n      width: 100%;\n    `,\n  };\n});\n\ntype CanvasSpanGraphProps = {\n  items: Array<{ valueWidth: number; valueOffset: number; serviceName: string }>;\n  valueWidth: number;\n  theme: Theme;\n};\n\nexport class UnthemedCanvasSpanGraph extends React.PureComponent<CanvasSpanGraphProps> {\n  _canvasElm: HTMLCanvasElement | TNil;\n\n  constructor(props: CanvasSpanGraphProps) {\n    super(props);\n    this._canvasElm = undefined;\n  }\n\n  getColor = (key: string) => getRgbColorByKey(key, this.props.theme);\n\n  componentDidMount() {\n    this._draw();\n  }\n\n  componentDidUpdate() {\n    this._draw();\n  }\n\n  _setCanvasRef = (elm: HTMLCanvasElement | TNil) => {\n    this._canvasElm = elm;\n  };\n\n  _draw() {\n    if (this._canvasElm) {\n      const { valueWidth: totalValueWidth, items } = this.props;\n      renderIntoCanvas(this._canvasElm, items, totalValueWidth, this.getColor, autoColor(this.props.theme, '#fff'));\n    }\n  }\n\n  render() {\n    return <canvas className={getStyles(this.props.theme).CanvasSpanGraph} ref={this._setCanvasRef} />;\n  }\n}\n\nexport default withTheme(UnthemedCanvasSpanGraph);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TNil } from '../..';\n\n// exported for tests\nexport const ITEM_ALPHA = 0.8;\nexport const MIN_ITEM_HEIGHT = 2;\nexport const MAX_TOTAL_HEIGHT = 200;\nexport const MIN_ITEM_WIDTH = 10;\nexport const MIN_TOTAL_HEIGHT = 60;\nexport const MAX_ITEM_HEIGHT = 6;\n\nexport default function renderIntoCanvas(\n  canvas: HTMLCanvasElement,\n  items: Array<{ valueWidth: number; valueOffset: number; serviceName: string }>,\n  totalValueWidth: number,\n  getFillColor: (serviceName: string) => [number, number, number],\n  bgColor: string\n) {\n  const fillCache: Map<string, string | TNil> = new Map();\n  const cHeight = items.length < MIN_TOTAL_HEIGHT ? MIN_TOTAL_HEIGHT : Math.min(items.length, MAX_TOTAL_HEIGHT);\n  const cWidth = window.innerWidth * 2;\n  // eslint-disable-next-line no-param-reassign\n  canvas.width = cWidth;\n  // eslint-disable-next-line no-param-reassign\n  canvas.height = cHeight;\n  const itemHeight = Math.min(MAX_ITEM_HEIGHT, Math.max(MIN_ITEM_HEIGHT, cHeight / items.length));\n  const itemYChange = cHeight / items.length;\n\n  const ctx = canvas.getContext('2d', { alpha: false }) as CanvasRenderingContext2D;\n  ctx.fillStyle = bgColor;\n  ctx.fillRect(0, 0, cWidth, cHeight);\n  for (let i = 0; i < items.length; i++) {\n    const { valueWidth, valueOffset, serviceName } = items[i];\n    const x = (valueOffset / totalValueWidth) * cWidth;\n    let width = (valueWidth / totalValueWidth) * cWidth;\n    if (width < MIN_ITEM_WIDTH) {\n      width = MIN_ITEM_WIDTH;\n    }\n    let fillStyle = fillCache.get(serviceName);\n    if (!fillStyle) {\n      fillStyle = `rgba(${getFillColor(serviceName).concat(ITEM_ALPHA).join()})`;\n      fillCache.set(serviceName, fillStyle);\n    }\n    ctx.fillStyle = fillStyle;\n    ctx.fillRect(x, i * itemYChange, width, itemHeight);\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\n\nimport { formatDuration } from '../../utils/date';\n\nimport { createStyle } from '../../Theme';\nimport { css } from '@emotion/css';\n\nconst getStyles = createStyle(() => {\n  return {\n    TickLabels: css`\n      label: TickLabels;\n      height: 1rem;\n      position: relative;\n    `,\n    TickLabelsLabel: css`\n      label: TickLabelsLabel;\n      color: #717171;\n      font-size: 0.7rem;\n      position: absolute;\n      user-select: none;\n    `,\n  };\n});\n\ntype TickLabelsProps = {\n  numTicks: number;\n  duration: number;\n};\n\nexport default function TickLabels(props: TickLabelsProps) {\n  const { numTicks, duration } = props;\n  const styles = getStyles();\n\n  const ticks = [];\n  for (let i = 0; i < numTicks + 1; i++) {\n    const portion = i / numTicks;\n    const style = portion === 1 ? { right: '0%' } : { left: `${portion * 100}%` };\n    ticks.push(\n      <div key={portion} className={styles.TickLabelsLabel} style={style} data-test=\"tick\">\n        {formatDuration(duration * portion)}\n      </div>\n    );\n  }\n\n  return <div className={styles.TickLabels}>{ticks}</div>;\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { createStyle } from '../../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    GraphTick: css`\n      label: GraphTick;\n      stroke: #aaa;\n      stroke-width: 1px;\n    `,\n  };\n});\n\ntype GraphTicksProps = {\n  numTicks: number;\n};\n\nexport default function GraphTicks(props: GraphTicksProps) {\n  const { numTicks } = props;\n  const ticks = [];\n  // i starts at 1, limit is `i < numTicks` so the first and last ticks aren't drawn\n  for (let i = 1; i < numTicks; i++) {\n    const x = `${(i / numTicks) * 100}%`;\n    ticks.push(<line className={getStyles().GraphTick} x1={x} y1=\"0%\" x2={x} y2=\"100%\" key={i / numTicks} />);\n  }\n\n  return (\n    <g data-test=\"ticks\" aria-hidden=\"true\">\n      {ticks}\n    </g>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport cx from 'classnames';\n\nimport { createStyle } from '../../Theme';\nimport { css } from '@emotion/css';\n\nexport const getStyles = createStyle(() => {\n  return {\n    ScrubberHandleExpansion: cx(\n      css`\n        label: ScrubberHandleExpansion;\n        cursor: col-resize;\n        fill-opacity: 0;\n        fill: #44f;\n      `,\n      'scrubber-handle-expansion'\n    ),\n    ScrubberHandle: cx(\n      css`\n        label: ScrubberHandle;\n        cursor: col-resize;\n        fill: #555;\n      `,\n      'scrubber-handle'\n    ),\n    ScrubberLine: cx(\n      css`\n        label: ScrubberLine;\n        pointer-events: none;\n        stroke: #555;\n      `,\n      'scrubber-line'\n    ),\n    ScrubberDragging: css`\n      label: ScrubberDragging;\n      & .scrubber-handle-expansion {\n        fill-opacity: 1;\n      }\n      & .scrubber-handle {\n        fill: #44f;\n      }\n      & > .scrubber-line {\n        stroke: #44f;\n      }\n    `,\n    ScrubberHandles: css`\n      label: ScrubberHandles;\n      &:hover > .scrubber-handle-expansion {\n        fill-opacity: 1;\n      }\n      &:hover > .scrubber-handle {\n        fill: #44f;\n      }\n      &:hover + .scrubber.line {\n        stroke: #44f;\n      }\n    `,\n  };\n});\n\ntype ScrubberProps = {\n  isDragging: boolean;\n  position: number;\n  onMouseDown: (evt: React.MouseEvent<any>) => void;\n  onMouseEnter: (evt: React.MouseEvent<any>) => void;\n  onMouseLeave: (evt: React.MouseEvent<any>) => void;\n};\n\nexport default function Scrubber({ isDragging, onMouseDown, onMouseEnter, onMouseLeave, position }: ScrubberProps) {\n  const xPercent = `${position * 100}%`;\n  const styles = getStyles();\n  const className = cx({ [styles.ScrubberDragging]: isDragging });\n  return (\n    <g className={className}>\n      <g\n        className={styles.ScrubberHandles}\n        onMouseDown={onMouseDown}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n      >\n        {/* handleExpansion is only visible when `isDragging` is true */}\n        <rect\n          x={xPercent}\n          className={styles.ScrubberHandleExpansion}\n          style={{ transform: `translate(-4.5px)` }}\n          width=\"9\"\n          height=\"20\"\n        />\n        <rect\n          x={xPercent}\n          className={styles.ScrubberHandle}\n          style={{ transform: `translate(-1.5px)` }}\n          width=\"3\"\n          height=\"20\"\n        />\n      </g>\n      <line className={styles.ScrubberLine} y2=\"100%\" x1={xPercent} x2={xPercent} />\n    </g>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport cx from 'classnames';\nimport * as React from 'react';\nimport { css } from '@emotion/css';\n\nimport GraphTicks from './GraphTicks';\nimport Scrubber from './Scrubber';\nimport { TUpdateViewRangeTimeFunction, UIButton, ViewRange, ViewRangeTimeUpdate, TNil } from '../..';\nimport { withTheme, Theme, autoColor, createStyle } from '../../Theme';\nimport DraggableManager, { DraggableBounds, DraggingUpdate, EUpdateTypes } from '../../utils/DraggableManager';\n\nexport const getStyles = createStyle((theme: Theme) => {\n  // Need this cause emotion will merge emotion generated classes into single className if used with cx from emotion\n  // package and the selector won't work\n  const ViewingLayerResetZoomHoverClassName = 'JaegerUiComponents__ViewingLayerResetZoomHoverClassName';\n  const ViewingLayerResetZoom = css`\n    label: ViewingLayerResetZoom;\n    display: none;\n    position: absolute;\n    right: 1%;\n    top: 10%;\n    z-index: 1;\n  `;\n  return {\n    ViewingLayer: css`\n      label: ViewingLayer;\n      cursor: vertical-text;\n      position: relative;\n      z-index: 1;\n      &:hover > .${ViewingLayerResetZoomHoverClassName} {\n        display: unset;\n      }\n    `,\n    ViewingLayerGraph: css`\n      label: ViewingLayerGraph;\n      border: 1px solid ${autoColor(theme, '#999')};\n      /* need !important here to overcome something from semantic UI */\n      overflow: visible !important;\n      position: relative;\n      transform-origin: 0 0;\n      width: 100%;\n    `,\n    ViewingLayerInactive: css`\n      label: ViewingLayerInactive;\n      fill: ${autoColor(theme, 'rgba(214, 214, 214, 0.5)')};\n    `,\n    ViewingLayerCursorGuide: css`\n      label: ViewingLayerCursorGuide;\n      stroke: ${autoColor(theme, '#f44')};\n      stroke-width: 1;\n    `,\n    ViewingLayerDraggedShift: css`\n      label: ViewingLayerDraggedShift;\n      fill-opacity: 0.2;\n    `,\n    ViewingLayerDrag: css`\n      label: ViewingLayerDrag;\n      fill: ${autoColor(theme, '#44f')};\n    `,\n    ViewingLayerFullOverlay: css`\n      label: ViewingLayerFullOverlay;\n      bottom: 0;\n      cursor: col-resize;\n      left: 0;\n      position: fixed;\n      right: 0;\n      top: 0;\n      user-select: none;\n    `,\n    ViewingLayerResetZoom,\n    ViewingLayerResetZoomHoverClassName,\n  };\n});\n\ntype ViewingLayerProps = {\n  height: number;\n  numTicks: number;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  viewRange: ViewRange;\n  theme: Theme;\n};\n\ntype ViewingLayerState = {\n  /**\n   * Cursor line should not be drawn when the mouse is over the scrubber handle.\n   */\n  preventCursorLine: boolean;\n};\n\n/**\n * Designate the tags for the different dragging managers. Exported for tests.\n */\nexport const dragTypes = {\n  /**\n   * Tag for dragging the right scrubber, e.g. end of the current view range.\n   */\n  SHIFT_END: 'SHIFT_END',\n  /**\n   * Tag for dragging the left scrubber, e.g. start of the current view range.\n   */\n  SHIFT_START: 'SHIFT_START',\n  /**\n   * Tag for dragging a new view range.\n   */\n  REFRAME: 'REFRAME',\n};\n\n/**\n * Returns the layout information for drawing the view-range differential, e.g.\n * show what will change when the mouse is released. Basically, this is the\n * difference from the start of the drag to the current position.\n *\n * @returns {{ x: string, width: string, leadginX: string }}\n */\nfunction getNextViewLayout(start: number, position: number) {\n  const [left, right] = start < position ? [start, position] : [position, start];\n  return {\n    x: `${left * 100}%`,\n    width: `${(right - left) * 100}%`,\n    leadingX: `${position * 100}%`,\n  };\n}\n\n/**\n * `ViewingLayer` is rendered on top of the Canvas rendering of the minimap and\n * handles showing the current view range and handles mouse UX for modifying it.\n */\nexport class UnthemedViewingLayer extends React.PureComponent<ViewingLayerProps, ViewingLayerState> {\n  state: ViewingLayerState;\n\n  _root: Element | TNil;\n\n  /**\n   * `_draggerReframe` handles clicking and dragging on the `ViewingLayer` to\n   * redefined the view range.\n   */\n  _draggerReframe: DraggableManager;\n\n  /**\n   * `_draggerStart` handles dragging the left scrubber to adjust the start of\n   * the view range.\n   */\n  _draggerStart: DraggableManager;\n\n  /**\n   * `_draggerEnd` handles dragging the right scrubber to adjust the end of\n   * the view range.\n   */\n  _draggerEnd: DraggableManager;\n\n  constructor(props: ViewingLayerProps) {\n    super(props);\n\n    this._draggerReframe = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleReframeDragEnd,\n      onDragMove: this._handleReframeDragUpdate,\n      onDragStart: this._handleReframeDragUpdate,\n      onMouseMove: this._handleReframeMouseMove,\n      onMouseLeave: this._handleReframeMouseLeave,\n      tag: dragTypes.REFRAME,\n    });\n\n    this._draggerStart = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleScrubberDragEnd,\n      onDragMove: this._handleScrubberDragUpdate,\n      onDragStart: this._handleScrubberDragUpdate,\n      onMouseEnter: this._handleScrubberEnterLeave,\n      onMouseLeave: this._handleScrubberEnterLeave,\n      tag: dragTypes.SHIFT_START,\n    });\n\n    this._draggerEnd = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleScrubberDragEnd,\n      onDragMove: this._handleScrubberDragUpdate,\n      onDragStart: this._handleScrubberDragUpdate,\n      onMouseEnter: this._handleScrubberEnterLeave,\n      onMouseLeave: this._handleScrubberEnterLeave,\n      tag: dragTypes.SHIFT_END,\n    });\n\n    this._root = undefined;\n    this.state = {\n      preventCursorLine: false,\n    };\n  }\n\n  componentWillUnmount() {\n    this._draggerReframe.dispose();\n    this._draggerEnd.dispose();\n    this._draggerStart.dispose();\n  }\n\n  _setRoot = (elm: SVGElement | TNil) => {\n    this._root = elm;\n  };\n\n  _getDraggingBounds = (tag: string | TNil): DraggableBounds => {\n    if (!this._root) {\n      throw new Error('invalid state');\n    }\n    const { left: clientXLeft, width } = this._root.getBoundingClientRect();\n    const [viewStart, viewEnd] = this.props.viewRange.time.current;\n    let maxValue = 1;\n    let minValue = 0;\n    if (tag === dragTypes.SHIFT_START) {\n      maxValue = viewEnd;\n    } else if (tag === dragTypes.SHIFT_END) {\n      minValue = viewStart;\n    }\n    return { clientXLeft, maxValue, minValue, width };\n  };\n\n  _handleReframeMouseMove = ({ value }: DraggingUpdate) => {\n    this.props.updateNextViewRangeTime({ cursor: value });\n  };\n\n  _handleReframeMouseLeave = () => {\n    this.props.updateNextViewRangeTime({ cursor: null });\n  };\n\n  _handleReframeDragUpdate = ({ value }: DraggingUpdate) => {\n    const shift = value;\n    const { time } = this.props.viewRange;\n    const anchor = time.reframe ? time.reframe.anchor : shift;\n    const update = { reframe: { anchor, shift } };\n    this.props.updateNextViewRangeTime(update);\n  };\n\n  _handleReframeDragEnd = ({ manager, value }: DraggingUpdate) => {\n    const { time } = this.props.viewRange;\n    const anchor = time.reframe ? time.reframe.anchor : value;\n    const [start, end] = value < anchor ? [value, anchor] : [anchor, value];\n    manager.resetBounds();\n    this.props.updateViewRangeTime(start, end, 'minimap');\n  };\n\n  _handleScrubberEnterLeave = ({ type }: DraggingUpdate) => {\n    const preventCursorLine = type === EUpdateTypes.MouseEnter;\n    this.setState({ preventCursorLine });\n  };\n\n  _handleScrubberDragUpdate = ({ event, tag, type, value }: DraggingUpdate) => {\n    if (type === EUpdateTypes.DragStart) {\n      event.stopPropagation();\n    }\n    if (tag === dragTypes.SHIFT_START) {\n      this.props.updateNextViewRangeTime({ shiftStart: value });\n    } else if (tag === dragTypes.SHIFT_END) {\n      this.props.updateNextViewRangeTime({ shiftEnd: value });\n    }\n  };\n\n  _handleScrubberDragEnd = ({ manager, tag, value }: DraggingUpdate) => {\n    const [viewStart, viewEnd] = this.props.viewRange.time.current;\n    let update: [number, number];\n    if (tag === dragTypes.SHIFT_START) {\n      update = [value, viewEnd];\n    } else if (tag === dragTypes.SHIFT_END) {\n      update = [viewStart, value];\n    } else {\n      // to satisfy flow\n      throw new Error('bad state');\n    }\n    manager.resetBounds();\n    this.setState({ preventCursorLine: false });\n    this.props.updateViewRangeTime(update[0], update[1], 'minimap');\n  };\n\n  /**\n   * Resets the zoom to fully zoomed out.\n   */\n  _resetTimeZoomClickHandler = () => {\n    this.props.updateViewRangeTime(0, 1);\n  };\n\n  /**\n   * Renders the difference between where the drag started and the current\n   * position, e.g. the red or blue highlight.\n   *\n   * @returns React.Node[]\n   */\n  _getMarkers(from: number, to: number) {\n    const styles = getStyles(this.props.theme);\n    const layout = getNextViewLayout(from, to);\n    return [\n      <rect\n        key=\"fill\"\n        className={cx(styles.ViewingLayerDraggedShift, styles.ViewingLayerDrag)}\n        x={layout.x}\n        y=\"0\"\n        width={layout.width}\n        height={this.props.height - 2}\n      />,\n      <rect\n        key=\"edge\"\n        className={cx(styles.ViewingLayerDrag)}\n        x={layout.leadingX}\n        y=\"0\"\n        width=\"1\"\n        height={this.props.height - 2}\n      />,\n    ];\n  }\n\n  render() {\n    const { height, viewRange, numTicks, theme } = this.props;\n    const { preventCursorLine } = this.state;\n    const { current, cursor, shiftStart, shiftEnd, reframe } = viewRange.time;\n    const haveNextTimeRange = shiftStart != null || shiftEnd != null || reframe != null;\n    const [viewStart, viewEnd] = current;\n    let leftInactive = 0;\n    if (viewStart) {\n      leftInactive = viewStart * 100;\n    }\n    let rightInactive = 100;\n    if (viewEnd) {\n      rightInactive = 100 - viewEnd * 100;\n    }\n    let cursorPosition: string | undefined;\n    if (!haveNextTimeRange && cursor != null && !preventCursorLine) {\n      cursorPosition = `${cursor * 100}%`;\n    }\n    const styles = getStyles(theme);\n\n    return (\n      <div aria-hidden className={styles.ViewingLayer} style={{ height }}>\n        {(viewStart !== 0 || viewEnd !== 1) && (\n          <UIButton\n            onClick={this._resetTimeZoomClickHandler}\n            className={cx(styles.ViewingLayerResetZoom, styles.ViewingLayerResetZoomHoverClassName)}\n            htmlType=\"button\"\n          >\n            Reset Selection\n          </UIButton>\n        )}\n        <svg\n          height={height}\n          className={styles.ViewingLayerGraph}\n          ref={this._setRoot}\n          onMouseDown={this._draggerReframe.handleMouseDown}\n          onMouseLeave={this._draggerReframe.handleMouseLeave}\n          onMouseMove={this._draggerReframe.handleMouseMove}\n        >\n          {leftInactive > 0 && (\n            <rect x={0} y={0} height=\"100%\" width={`${leftInactive}%`} className={styles.ViewingLayerInactive} />\n          )}\n          {rightInactive > 0 && (\n            <rect\n              x={`${100 - rightInactive}%`}\n              y={0}\n              height=\"100%\"\n              width={`${rightInactive}%`}\n              className={styles.ViewingLayerInactive}\n            />\n          )}\n          <GraphTicks numTicks={numTicks} />\n          {cursorPosition && (\n            <line\n              className={styles.ViewingLayerCursorGuide}\n              x1={cursorPosition}\n              y1=\"0\"\n              x2={cursorPosition}\n              y2={height - 2}\n              strokeWidth=\"1\"\n            />\n          )}\n          {shiftStart != null && this._getMarkers(viewStart, shiftStart)}\n          {shiftEnd != null && this._getMarkers(viewEnd, shiftEnd)}\n          <Scrubber\n            isDragging={shiftStart != null}\n            onMouseDown={this._draggerStart.handleMouseDown}\n            onMouseEnter={this._draggerStart.handleMouseEnter}\n            onMouseLeave={this._draggerStart.handleMouseLeave}\n            position={viewStart || 0}\n          />\n          <Scrubber\n            isDragging={shiftEnd != null}\n            position={viewEnd || 1}\n            onMouseDown={this._draggerEnd.handleMouseDown}\n            onMouseEnter={this._draggerEnd.handleMouseEnter}\n            onMouseLeave={this._draggerEnd.handleMouseLeave}\n          />\n          {reframe != null && this._getMarkers(reframe.anchor, reframe.shift)}\n        </svg>\n        {/* fullOverlay updates the mouse cursor blocks mouse events */}\n        {haveNextTimeRange && <div className={styles.ViewingLayerFullOverlay} />}\n      </div>\n    );\n  }\n}\n\nexport default withTheme(UnthemedViewingLayer);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport cx from 'classnames';\n\nimport CanvasSpanGraph from './CanvasSpanGraph';\nimport TickLabels from './TickLabels';\nimport ViewingLayer from './ViewingLayer';\nimport { TUpdateViewRangeTimeFunction, ViewRange, ViewRangeTimeUpdate } from '../..';\nimport { TraceSpan, Trace } from '../../types/trace';\nimport { ubPb2, ubPx2, ubRelative } from '../../uberUtilityStyles';\n\nconst DEFAULT_HEIGHT = 60;\nconst TIMELINE_TICK_INTERVAL = 4;\n\ntype SpanGraphProps = {\n  height?: number;\n  trace: Trace;\n  viewRange: ViewRange;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  updateNextViewRangeTime: (nextUpdate: ViewRangeTimeUpdate) => void;\n};\n\n/**\n * Store `items` in state so they are not regenerated every render. Otherwise,\n * the canvas graph will re-render itself every time.\n */\ntype SpanGraphState = {\n  items: Array<{\n    valueOffset: number;\n    valueWidth: number;\n    serviceName: string;\n  }>;\n};\n\nfunction getItem(span: TraceSpan) {\n  return {\n    valueOffset: span.relativeStartTime,\n    valueWidth: span.duration,\n    serviceName: span.process.serviceName,\n  };\n}\n\nexport default class SpanGraph extends React.PureComponent<SpanGraphProps, SpanGraphState> {\n  state: SpanGraphState;\n\n  static defaultProps = {\n    height: DEFAULT_HEIGHT,\n  };\n\n  constructor(props: SpanGraphProps) {\n    super(props);\n    const { trace } = props;\n    this.state = {\n      items: trace ? trace.spans.map(getItem) : [],\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: SpanGraphProps) {\n    const { trace } = nextProps;\n    if (this.props.trace !== trace) {\n      this.setState({\n        items: trace ? trace.spans.map(getItem) : [],\n      });\n    }\n  }\n\n  render() {\n    const { height, trace, viewRange, updateNextViewRangeTime, updateViewRangeTime } = this.props;\n    if (!trace) {\n      return <div />;\n    }\n    const { items } = this.state;\n    return (\n      <div className={cx(ubPb2, ubPx2)}>\n        <TickLabels numTicks={TIMELINE_TICK_INTERVAL} duration={trace.duration} />\n        <div className={ubRelative}>\n          <CanvasSpanGraph valueWidth={trace.duration} items={items} />\n          <ViewingLayer\n            viewRange={viewRange}\n            numTicks={TIMELINE_TICK_INTERVAL}\n            height={height || DEFAULT_HEIGHT}\n            updateViewRangeTime={updateViewRangeTime}\n            updateNextViewRangeTime={updateNextViewRangeTime}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\n\nimport { TNil } from '../types/index';\nimport { UIIcon, UIInput } from '../uiElementsContext';\n\ntype Props = {\n  allowClear?: boolean;\n  inputProps: Record<string, any>;\n  location: Location;\n  match: any;\n  trackFindFunction?: (str: string | TNil) => void;\n  value: string | undefined;\n  onChange: (value: string) => void;\n};\n\nexport default class UiFindInput extends React.PureComponent<Props> {\n  static defaultProps: Partial<Props> = {\n    inputProps: {},\n    trackFindFunction: undefined,\n    value: undefined,\n  };\n\n  clearUiFind = () => {\n    this.props.onChange('');\n  };\n\n  render() {\n    const { allowClear, inputProps, value } = this.props;\n\n    const suffix = (\n      <>\n        {allowClear && value && value.length && <UIIcon type=\"close\" onClick={this.clearUiFind} />}\n        {inputProps.suffix}\n      </>\n    );\n\n    return (\n      <UIInput\n        autosize={null}\n        placeholder=\"Find...\"\n        {...inputProps}\n        onChange={(e) => this.props.onChange(e.target.value)}\n        suffix={suffix}\n        value={value}\n      />\n    );\n  }\n}\n","// Copyright (c) 2018 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport cx from 'classnames';\nimport IoAndroidLocate from 'react-icons/lib/io/android-locate';\nimport { css } from '@emotion/css';\n\nimport * as markers from './TracePageSearchBar.markers';\nimport UiFindInput from '../common/UiFindInput';\nimport { TNil } from '../types';\n\nimport { UIButton, UIInputGroup } from '../uiElementsContext';\nimport { createStyle } from '../Theme';\nimport { ubFlexAuto, ubJustifyEnd } from '../uberUtilityStyles';\n// eslint-disable-next-line no-duplicate-imports\nimport { memo } from 'react';\n\nexport const getStyles = createStyle(() => {\n  return {\n    TracePageSearchBar: css`\n      label: TracePageSearchBar;\n    `,\n    TracePageSearchBarBar: css`\n      label: TracePageSearchBarBar;\n      max-width: 20rem;\n      transition: max-width 0.5s;\n      &:focus-within {\n        max-width: 100%;\n      }\n    `,\n    TracePageSearchBarCount: css`\n      label: TracePageSearchBarCount;\n      opacity: 0.6;\n    `,\n    TracePageSearchBarBtn: css`\n      label: TracePageSearchBarBtn;\n      border-left: none;\n      transition: 0.2s;\n    `,\n    TracePageSearchBarBtnDisabled: css`\n      label: TracePageSearchBarBtnDisabled;\n      opacity: 0.5;\n    `,\n    TracePageSearchBarLocateBtn: css`\n      label: TracePageSearchBarLocateBtn;\n      padding: 1px 8px 4px;\n    `,\n  };\n});\n\ntype TracePageSearchBarProps = {\n  textFilter: string | TNil;\n  prevResult: () => void;\n  nextResult: () => void;\n  clearSearch: () => void;\n  focusUiFindMatches: () => void;\n  resultCount: number;\n  navigable: boolean;\n  searchValue: string;\n  onSearchValueChange: (value: string) => void;\n  hideSearchButtons?: boolean;\n};\n\nexport default memo(function TracePageSearchBar(props: TracePageSearchBarProps) {\n  const {\n    clearSearch,\n    focusUiFindMatches,\n    navigable,\n    nextResult,\n    prevResult,\n    resultCount,\n    textFilter,\n    onSearchValueChange,\n    searchValue,\n    hideSearchButtons,\n  } = props;\n  const styles = getStyles();\n\n  const count = textFilter ? <span className={styles.TracePageSearchBarCount}>{resultCount}</span> : null;\n\n  const btnClass = cx(styles.TracePageSearchBarBtn, { [styles.TracePageSearchBarBtnDisabled]: !textFilter });\n  const uiFindInputInputProps = {\n    'data-test': markers.IN_TRACE_SEARCH,\n    className: cx(styles.TracePageSearchBarBar, ubFlexAuto),\n    name: 'search',\n    suffix: count,\n  };\n\n  return (\n    <div className={styles.TracePageSearchBar}>\n      {/* style inline because compact overwrites the display */}\n      <UIInputGroup className={ubJustifyEnd} compact style={{ display: 'flex' }}>\n        <UiFindInput onChange={onSearchValueChange} value={searchValue} inputProps={uiFindInputInputProps} />\n        {!hideSearchButtons && (\n          <>\n            {navigable && (\n              <>\n                <UIButton\n                  className={cx(btnClass, styles.TracePageSearchBarLocateBtn)}\n                  disabled={!textFilter}\n                  htmlType=\"button\"\n                  onClick={focusUiFindMatches}\n                >\n                  <IoAndroidLocate />\n                </UIButton>\n                <UIButton\n                  className={btnClass}\n                  disabled={!textFilter}\n                  htmlType=\"button\"\n                  icon=\"up\"\n                  onClick={prevResult}\n                />\n                <UIButton\n                  className={btnClass}\n                  disabled={!textFilter}\n                  htmlType=\"button\"\n                  icon=\"down\"\n                  onClick={nextResult}\n                />\n              </>\n            )}\n            <UIButton\n              className={btnClass}\n              disabled={!textFilter}\n              htmlType=\"button\"\n              icon=\"close\"\n              onClick={clearSearch}\n            />\n          </>\n        )}\n      </UIInputGroup>\n    </div>\n  );\n});\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const IN_TRACE_SEARCH = 'in-trace-search';\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\n\nimport { createStyle } from '../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    BreakableText: css`\n      label: BreakableText;\n      display: inline-block;\n      white-space: pre;\n    `,\n  };\n});\n\nconst WORD_RX = /\\W*\\w+\\W*/g;\n\ntype Props = {\n  text: string;\n  className?: string;\n  wordRegexp?: RegExp;\n};\n\n// TODO typescript doesn't understand text or null as react nodes\n// https://github.com/Microsoft/TypeScript/issues/21699\nexport default function BreakableText(\n  props: Props\n): any /* React.ReactNode /* React.ReactElement | React.ReactElement[] \\*\\/ */ {\n  const { className, text, wordRegexp = WORD_RX } = props;\n  if (!text) {\n    return typeof text === 'string' ? text : null;\n  }\n  const spans = [];\n  wordRegexp.exec('');\n  // if the given text has no words, set the first match to the entire text\n  let match: RegExpExecArray | string[] | null = wordRegexp.exec(text) || [text];\n  while (match) {\n    spans.push(\n      <span key={`${text}-${spans.length}`} className={className || getStyles().BreakableText}>\n        {match[0]}\n      </span>\n    );\n    match = wordRegexp.exec(text);\n  }\n  return spans;\n}\n\nBreakableText.defaultProps = {\n  wordRegexp: WORD_RX,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport cx from 'classnames';\nimport { css, keyframes } from '@emotion/css';\n\nimport { createStyle } from '../Theme';\nimport { UIIcon } from '../uiElementsContext';\n\nconst getStyles = createStyle(() => {\n  const LoadingIndicatorColorAnim = keyframes`\n    /*\n    rgb(0, 128, 128) == teal\n    rgba(0, 128, 128, 0.3) == #bedfdf\n    */\n    from {\n      color: #bedfdf;\n    }\n    to {\n      color: teal;\n    }\n  `;\n  return {\n    LoadingIndicator: css`\n      label: LoadingIndicator;\n      animation: ${LoadingIndicatorColorAnim} 1s infinite alternate;\n      font-size: 36px;\n      /* outline / stroke the loading indicator */\n      text-shadow: -0.5px 0 rgba(0, 128, 128, 0.6), 0 0.5px rgba(0, 128, 128, 0.6), 0.5px 0 rgba(0, 128, 128, 0.6),\n        0 -0.5px rgba(0, 128, 128, 0.6);\n    `,\n    LoadingIndicatorCentered: css`\n      label: LoadingIndicatorCentered;\n      display: block;\n      margin-left: auto;\n      margin-right: auto;\n    `,\n    LoadingIndicatorSmall: css`\n      label: LoadingIndicatorSmall;\n      font-size: 0.7em;\n    `,\n  };\n});\n\ntype LoadingIndicatorProps = {\n  centered?: boolean;\n  className?: string;\n  small?: boolean;\n};\n\nexport default function LoadingIndicator(props: LoadingIndicatorProps) {\n  const { centered, className, small, ...rest } = props;\n  const styles = getStyles();\n  const cls = cx(styles.LoadingIndicator, {\n    [styles.LoadingIndicatorCentered]: centered,\n    [styles.LoadingIndicatorSmall]: small,\n    className,\n  });\n  return <UIIcon type=\"loading\" className={cls} {...rest} />;\n}\n\nLoadingIndicator.defaultProps = {\n  centered: false,\n  className: undefined,\n  small: false,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport BreakableText from './BreakableText';\nimport LoadingIndicator from './LoadingIndicator';\nimport { fetchedState, FALLBACK_TRACE_NAME } from '../constants';\n\nimport { FetchedState, TNil } from '../types';\nimport { ApiError } from '../types/api-error';\nimport { createStyle, safeSize, Theme, useTheme } from '../Theme';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    TraceName: css`\n      label: TraceName;\n      font-size: ${safeSize(theme.components?.TraceName?.fontSize, 'unset')};\n    `,\n    TraceNameError: css`\n      label: TraceNameError;\n      color: #c00;\n    `,\n  };\n});\n\ntype Props = {\n  className?: string;\n  error?: ApiError | TNil;\n  state?: FetchedState | TNil;\n  traceName?: string | TNil;\n};\n\nexport default function TraceName(props: Props) {\n  const { className, error, state, traceName } = props;\n  const isErred = state === fetchedState.ERROR;\n  let title: string | React.ReactNode = traceName || FALLBACK_TRACE_NAME;\n  const styles = getStyles(useTheme());\n  let errorCssClass = '';\n  if (isErred) {\n    errorCssClass = styles.TraceNameError;\n    let titleStr = '';\n    if (error) {\n      titleStr = typeof error === 'string' ? error : error.message || String(error);\n    }\n    if (!titleStr) {\n      titleStr = 'Error: Unknown error';\n    }\n    title = titleStr;\n    title = <BreakableText text={titleStr} />;\n  } else if (state === fetchedState.LOADING) {\n    title = <LoadingIndicator small />;\n  } else {\n    const text = String(traceName || FALLBACK_TRACE_NAME);\n    title = <BreakableText text={text} />;\n  }\n  return <span className={cx(styles.TraceName, errorCssClass, className)}>{title}</span>;\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceSpan } from '../types/trace';\n\nexport function getTraceName(spans: TraceSpan[]): string {\n  const span = spans.filter((sp) => !sp.references || !sp.references.length)[0];\n  return span ? `${span.process.serviceName}: ${span.operationName}` : '';\n}\n","//      \nvar hasOwn = function hasOwn(object, key) {\n  return Object.prototype.hasOwnProperty.call(object, key);\n};\n\nfunction deepEquals(equals, deepObjects) {\n  function deep(valueA, valueB) {\n    if (equals(valueA, valueB)) {\n      return true;\n    }\n\n    if (Array.isArray(valueA)) {\n      if (!Array.isArray(valueB) || valueA.length !== valueB.length) {\n        return false;\n      } // Check deep equality of each value in A against the same indexed value in B\n\n\n      if (!valueA.every(function (value, index) {\n        return deep(value, valueB[index]);\n      })) {\n        return false;\n      } // could not find unequal items\n\n\n      return true;\n    }\n\n    if (Array.isArray(valueB)) {\n      return false;\n    }\n\n    if (typeof valueA === \"object\") {\n      if (typeof valueB !== \"object\") {\n        return false;\n      }\n\n      var isANull = valueA === null;\n      var isBNull = valueB === null;\n\n      if (isANull || isBNull) {\n        return isANull === isBNull;\n      }\n\n      var aKeys = Object.keys(valueA);\n      var bKeys = Object.keys(valueB);\n\n      if (aKeys.length !== bKeys.length) {\n        return false;\n      } // Should we compare with shallow equivalence or deep equivalence?\n\n\n      var equalityChecker = deepObjects ? deep : equals; // Check if objects share same keys, and each of those keys are equal\n\n      if (!aKeys.every(function (aKey) {\n        return hasOwn(valueA, aKey) && hasOwn(valueB, aKey) && equalityChecker(valueA[aKey], valueB[aKey]);\n      })) {\n        return false;\n      } // could not find unequal keys or values\n\n\n      return true;\n    }\n\n    return false;\n  }\n\n  return deep;\n}\n\n//      \nvar findIndex = function findIndex(arr, fn) {\n  for (var i = 0; i < arr.length; i++) {\n    if (fn(arr[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nfunction lruCache(limit, equals) {\n  var entries = [];\n\n  function get(key) {\n    var cacheIndex = findIndex(entries, function (entry) {\n      return equals(key, entry.key);\n    }); // We found a cached entry\n\n    if (cacheIndex > -1) {\n      var entry = entries[cacheIndex]; // Cached entry not at top of cache, move it to the top\n\n      if (cacheIndex > 0) {\n        entries.splice(cacheIndex, 1);\n        entries.unshift(entry);\n      }\n\n      return entry.value;\n    } // No entry found in cache, return null\n\n\n    return undefined;\n  }\n\n  function put(key, value) {\n    if (!get(key)) {\n      entries.unshift({\n        key: key,\n        value: value\n      });\n\n      if (entries.length > limit) {\n        entries.pop();\n      }\n    }\n  }\n\n  return {\n    get: get,\n    put: put\n  };\n}\n\n//      \nfunction singletonCache(equals) {\n  var entry;\n  return {\n    get: function get(key) {\n      if (entry && equals(key, entry.key)) {\n        return entry.value;\n      }\n    },\n    put: function put(key, value) {\n      entry = {\n        key: key,\n        value: value\n      };\n    }\n  };\n}\n\n//      \n\nfunction createCache(limit, equals) {\n  return limit === 1 ? singletonCache(equals) : lruCache(limit, equals);\n}\n\nfunction createEqualsFn(basicEquals, deepObjects) {\n  // Choose strategy for basic or deep object equals\n  var equals = deepObjects ? deepEquals(basicEquals, deepObjects) : basicEquals;\n  return function (valueA, valueB) {\n    // The arguments are always the argument array-like objects\n    // Different lengths means they are not the same\n    if (valueA.length !== valueB.length) {\n      return false;\n    } // Compare the values\n\n\n    for (var index = 0; index < valueA.length; index += 1) {\n      if (!equals(valueA[index], valueB[index])) {\n        return false;\n      }\n    } // Found no conflicts\n\n\n    return true;\n  };\n}\n\nfunction memoize() {\n  var limit = 1;\n\n  var equals = function equals(valueA, valueB) {\n    return valueA === valueB;\n  };\n\n  var deepObjects = false;\n\n  for (var _len = arguments.length, config = new Array(_len), _key = 0; _key < _len; _key++) {\n    config[_key] = arguments[_key];\n  }\n\n  if (typeof config[0] === \"number\") {\n    limit = config.shift();\n  }\n\n  if (typeof config[0] === \"function\") {\n    equals = config.shift();\n  } else if (typeof config[0] === \"undefined\") {\n    // Support passing undefined equal argument;\n    config.shift();\n  }\n\n  if (typeof config[0] === \"boolean\") {\n    deepObjects = config[0];\n  }\n\n  var cache = createCache(limit, createEqualsFn(equals, deepObjects));\n  return function (fn) {\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var value = cache.get(args);\n\n      if (value === undefined) {\n        value = fn.apply(fn, args);\n        cache.put(args, value);\n      }\n\n      return value;\n    };\n  };\n}\n\nexport default memoize;\n","// Copyright (c) 2017 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceSpan } from '../types/trace';\n\n/**\n * Searches the span.references to find 'CHILD_OF' reference type or returns null.\n * @param  {TraceSpan} span The span whose parent is to be returned.\n * @returns {TraceSpan|null} The parent span if there is one, null otherwise.\n */\nexport function getParent(span: TraceSpan) {\n  const parentRef = span.references ? span.references.find((ref) => ref.refType === 'CHILD_OF') : null;\n  return parentRef ? parentRef.span : null;\n}\n","// Copyright (c) 2017 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { uniq as _uniq } from 'lodash';\nimport memoize from 'lru-memoize';\nimport { getConfigValue } from '../utils/config/get-config';\nimport { getParent } from './span';\nimport { TNil } from '../types';\nimport { TraceSpan, TraceLink, TraceKeyValuePair, Trace } from '../types/trace';\n\nconst parameterRegExp = /#\\{([^{}]*)\\}/g;\n\ntype ProcessedTemplate = {\n  parameters: string[];\n  template: (template: { [key: string]: any }) => string;\n};\n\ntype ProcessedLinkPattern = {\n  object: any;\n  type: (link: string) => boolean;\n  key: (link: string) => boolean;\n  value: (value: any) => boolean;\n  url: ProcessedTemplate;\n  text: ProcessedTemplate;\n  parameters: string[];\n};\n\ntype TLinksRV = Array<{ url: string; text: string }>;\n\nfunction getParamNames(str: string) {\n  const names = new Set<string>();\n  str.replace(parameterRegExp, (match, name) => {\n    names.add(name);\n    return match;\n  });\n  return Array.from(names);\n}\n\nfunction stringSupplant(str: string, encodeFn: (unencoded: any) => string, map: Record<string, any>) {\n  return str.replace(parameterRegExp, (_, name) => {\n    const value = map[name];\n    return value == null ? '' : encodeFn(value);\n  });\n}\n\nexport function processTemplate(template: any, encodeFn: (unencoded: any) => string): ProcessedTemplate {\n  if (typeof template !== 'string') {\n    /*\n\n    // kept on ice until #123 is implemented:\n    if (template && Array.isArray(template.parameters) && (typeof template.template === 'function')) {\n      return template;\n    }\n\n    */\n    throw new Error('Invalid template');\n  }\n  return {\n    parameters: getParamNames(template),\n    template: stringSupplant.bind(null, template, encodeFn),\n  };\n}\n\nexport function createTestFunction(entry: any) {\n  if (typeof entry === 'string') {\n    return (arg: any) => arg === entry;\n  }\n  if (Array.isArray(entry)) {\n    return (arg: any) => entry.indexOf(arg) > -1;\n  }\n  /*\n\n  // kept on ice until #123 is implemented:\n  if (entry instanceof RegExp) {\n    return (arg: any) => entry.test(arg);\n  }\n  if (typeof entry === 'function') {\n    return entry;\n  }\n\n  */\n  if (entry == null) {\n    return () => true;\n  }\n  throw new Error(`Invalid value: ${entry}`);\n}\n\nconst identity = (a: any): typeof a => a;\n\nexport function processLinkPattern(pattern: any): ProcessedLinkPattern | TNil {\n  try {\n    const url = processTemplate(pattern.url, encodeURIComponent);\n    const text = processTemplate(pattern.text, identity);\n    return {\n      object: pattern,\n      type: createTestFunction(pattern.type),\n      key: createTestFunction(pattern.key),\n      value: createTestFunction(pattern.value),\n      url,\n      text,\n      parameters: _uniq(url.parameters.concat(text.parameters)),\n    };\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(`Ignoring invalid link pattern: ${error}`, pattern);\n    return null;\n  }\n}\n\nexport function getParameterInArray(name: string, array: TraceKeyValuePair[]) {\n  if (array) {\n    return array.find((entry) => entry.key === name);\n  }\n  return undefined;\n}\n\nexport function getParameterInAncestor(name: string, span: TraceSpan) {\n  let currentSpan: TraceSpan | TNil = span;\n  while (currentSpan) {\n    const result = getParameterInArray(name, currentSpan.tags) || getParameterInArray(name, currentSpan.process.tags);\n    if (result) {\n      return result;\n    }\n    currentSpan = getParent(currentSpan);\n  }\n  return undefined;\n}\n\nfunction callTemplate(template: ProcessedTemplate, data: any) {\n  return template.template(data);\n}\n\nexport function computeTraceLink(linkPatterns: ProcessedLinkPattern[], trace: Trace) {\n  const result: TLinksRV = [];\n  const validKeys = (Object.keys(trace) as Array<keyof Trace>).filter(\n    (key) => typeof trace[key] === 'string' || trace[key] === 'number'\n  );\n\n  linkPatterns\n    .filter((pattern) => pattern.type('traces'))\n    .forEach((pattern) => {\n      const parameterValues: Record<string, any> = {};\n      const allParameters = pattern.parameters.every((parameter) => {\n        const key = parameter as keyof Trace;\n        if (validKeys.includes(key)) {\n          // At this point is safe to access to trace object using parameter variable because\n          // we validated parameter against validKeys, this implies that parameter a keyof Trace.\n          parameterValues[parameter] = trace[key];\n          return true;\n        }\n        return false;\n      });\n      if (allParameters) {\n        result.push({\n          url: callTemplate(pattern.url, parameterValues),\n          text: callTemplate(pattern.text, parameterValues),\n        });\n      }\n    });\n\n  return result;\n}\n\nexport function computeLinks(\n  linkPatterns: ProcessedLinkPattern[],\n  span: TraceSpan,\n  items: TraceKeyValuePair[],\n  itemIndex: number\n) {\n  const item = items[itemIndex];\n  let type = 'logs';\n  const processTags = span.process.tags === items;\n  if (processTags) {\n    type = 'process';\n  }\n  const spanTags = span.tags === items;\n  if (spanTags) {\n    type = 'tags';\n  }\n  const result: Array<{ url: string; text: string }> = [];\n  linkPatterns.forEach((pattern) => {\n    if (pattern.type(type) && pattern.key(item.key) && pattern.value(item.value)) {\n      const parameterValues: Record<string, any> = {};\n      const allParameters = pattern.parameters.every((parameter) => {\n        let entry = getParameterInArray(parameter, items);\n        if (!entry && !processTags) {\n          // do not look in ancestors for process tags because the same object may appear in different places in the hierarchy\n          // and the cache in getLinks uses that object as a key\n          entry = getParameterInAncestor(parameter, span);\n        }\n        if (entry) {\n          parameterValues[parameter] = entry.value;\n          return true;\n        }\n        // eslint-disable-next-line no-console\n        console.warn(\n          `Skipping link pattern, missing parameter ${parameter} for key ${item.key} in ${type}.`,\n          pattern.object\n        );\n        return false;\n      });\n      if (allParameters) {\n        result.push({\n          url: callTemplate(pattern.url, parameterValues),\n          text: callTemplate(pattern.text, parameterValues),\n        });\n      }\n    }\n  });\n  return result;\n}\n\nexport function createGetLinks(linkPatterns: ProcessedLinkPattern[], cache: WeakMap<TraceKeyValuePair, TraceLink[]>) {\n  return (span: TraceSpan, items: TraceKeyValuePair[], itemIndex: number) => {\n    if (linkPatterns.length === 0) {\n      return [];\n    }\n    const item = items[itemIndex];\n    let result = cache.get(item);\n    if (!result) {\n      result = computeLinks(linkPatterns, span, items, itemIndex);\n      cache.set(item, result);\n    }\n    return result;\n  };\n}\n\nconst processedLinks: ProcessedLinkPattern[] = (getConfigValue('linkPatterns') || [])\n  .map(processLinkPattern)\n  .filter(Boolean);\n\nexport const getTraceLinks: (trace: Trace | undefined) => TLinksRV = memoize(10)((trace: Trace | undefined) => {\n  const result: TLinksRV = [];\n  if (!trace) {\n    return result;\n  }\n  return computeTraceLink(processedLinks, trace);\n});\n\nexport default createGetLinks(processedLinks, new WeakMap());\n","// Copyright (c) 2019 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { UIDropdown, UIMenu, UIMenuItem } from '..';\nimport NewWindowIcon from './NewWindowIcon';\n\ntype Link = {\n  text: string;\n  url: string;\n};\n\ntype ExternalLinksProps = {\n  links: Link[];\n  className?: string;\n};\n\nconst LinkValue = (props: { href: string; title?: string; children?: React.ReactNode; className?: string }) => (\n  <a href={props.href} title={props.title} target=\"_blank\" rel=\"noopener noreferrer\" className={props.className}>\n    {props.children} <NewWindowIcon />\n  </a>\n);\n\n// export for testing\nexport const linkValueList = (links: Link[]) => (\n  <UIMenu>\n    {links.map(({ text, url }, index) => (\n      // `index` is necessary in the key because url can repeat\n      <UIMenuItem key={`${url}-${index}`}>\n        <LinkValue href={url}>{text}</LinkValue>\n      </UIMenuItem>\n    ))}\n  </UIMenu>\n);\n\nexport default function ExternalLinks(props: ExternalLinksProps) {\n  const { links } = props;\n  if (links.length === 1) {\n    return <LinkValue href={links[0].url} title={links[0].text} className={props.className} />;\n  }\n  return (\n    <UIDropdown overlay={linkValueList(links)} placement=\"bottomRight\" trigger={['click']}>\n      <a className={props.className}>\n        <NewWindowIcon isLarge />\n      </a>\n    </UIDropdown>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { get as _get, maxBy as _maxBy, values as _values } from 'lodash';\nimport MdKeyboardArrowRight from 'react-icons/lib/md/keyboard-arrow-right';\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\n\nimport SpanGraph from './SpanGraph';\nimport TracePageSearchBar from './TracePageSearchBar';\nimport { autoColor, Theme, TUpdateViewRangeTimeFunction, useTheme, ViewRange, ViewRangeTimeUpdate } from '..';\nimport LabeledList from '../common/LabeledList';\nimport TraceName from '../common/TraceName';\nimport { getTraceName } from '../model/trace-viewer';\nimport { TNil } from '../types';\nimport { Trace } from '../types/trace';\nimport { formatDatetime, formatDuration } from '../utils/date';\nimport { getTraceLinks } from '../model/link-patterns';\n\nimport ExternalLinks from '../common/ExternalLinks';\nimport { createStyle } from '../Theme';\nimport { uTxMuted } from '../uberUtilityStyles';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    TracePageHeader: css`\n      label: TracePageHeader;\n      & > :first-child {\n        border-bottom: 1px solid ${autoColor(theme, '#e8e8e8')};\n      }\n      & > :nth-child(2) {\n        background-color: ${autoColor(theme, '#eee')};\n        border-bottom: 1px solid ${autoColor(theme, '#e4e4e4')};\n      }\n      & > :last-child {\n        border-bottom: 1px solid ${autoColor(theme, '#ccc')};\n      }\n    `,\n    TracePageHeaderTitleRow: css`\n      label: TracePageHeaderTitleRow;\n      align-items: center;\n      display: flex;\n    `,\n    TracePageHeaderBack: css`\n      label: TracePageHeaderBack;\n      align-items: center;\n      align-self: stretch;\n      background-color: #fafafa;\n      border-bottom: 1px solid #ddd;\n      border-right: 1px solid #ddd;\n      color: inherit;\n      display: flex;\n      font-size: 1.4rem;\n      padding: 0 1rem;\n      margin-bottom: -1px;\n      &:hover {\n        background-color: #f0f0f0;\n        border-color: #ccc;\n      }\n    `,\n    TracePageHeaderTitleLink: css`\n      label: TracePageHeaderTitleLink;\n      align-items: center;\n      display: flex;\n      flex: 1;\n\n      &:hover * {\n        text-decoration: underline;\n      }\n      &:hover > *,\n      &:hover small {\n        text-decoration: none;\n      }\n    `,\n    TracePageHeaderDetailToggle: css`\n      label: TracePageHeaderDetailToggle;\n      font-size: 2.5rem;\n      transition: transform 0.07s ease-out;\n    `,\n    TracePageHeaderDetailToggleExpanded: css`\n      label: TracePageHeaderDetailToggleExpanded;\n      transform: rotate(90deg);\n    `,\n    TracePageHeaderTitle: css`\n      label: TracePageHeaderTitle;\n      color: inherit;\n      flex: 1;\n      font-size: 1.7em;\n      line-height: 1em;\n      margin: 0 0 0 0.5em;\n      padding-bottom: 0.5em;\n    `,\n    TracePageHeaderTitleCollapsible: css`\n      label: TracePageHeaderTitleCollapsible;\n      margin-left: 0;\n    `,\n    TracePageHeaderOverviewItems: css`\n      label: TracePageHeaderOverviewItems;\n      border-bottom: 1px solid #e4e4e4;\n      padding: 0.25rem 0.5rem !important;\n    `,\n    TracePageHeaderOverviewItemValueDetail: cx(\n      css`\n        label: TracePageHeaderOverviewItemValueDetail;\n        color: #aaa;\n      `,\n      'trace-item-value-detail'\n    ),\n    TracePageHeaderOverviewItemValue: css`\n      label: TracePageHeaderOverviewItemValue;\n      &:hover > .trace-item-value-detail {\n        color: unset;\n      }\n    `,\n    TracePageHeaderArchiveIcon: css`\n      label: TracePageHeaderArchiveIcon;\n      font-size: 1.78em;\n      margin-right: 0.15em;\n    `,\n    TracePageHeaderTraceId: css`\n      label: TracePageHeaderTraceId;\n      white-space: nowrap;\n    `,\n  };\n});\n\ntype TracePageHeaderEmbedProps = {\n  canCollapse: boolean;\n  clearSearch: () => void;\n  focusUiFindMatches: () => void;\n  hideMap: boolean;\n  hideSummary: boolean;\n  nextResult: () => void;\n  onSlimViewClicked: () => void;\n  onTraceGraphViewClicked: () => void;\n  prevResult: () => void;\n  resultCount: number;\n  slimView: boolean;\n  textFilter: string | TNil;\n  trace: Trace;\n  traceGraphView: boolean;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRange: ViewRange;\n  searchValue: string;\n  onSearchValueChange: (value: string) => void;\n  hideSearchButtons?: boolean;\n};\n\nexport const HEADER_ITEMS = [\n  {\n    key: 'timestamp',\n    label: 'Trace Start',\n    renderer(trace: Trace, styles: ReturnType<typeof getStyles>) {\n      const dateStr = formatDatetime(trace.startTime);\n      const match = dateStr.match(/^(.+)(:\\d\\d\\.\\d+)$/);\n      return match ? (\n        <span className={styles.TracePageHeaderOverviewItemValue}>\n          {match[1]}\n          <span className={styles.TracePageHeaderOverviewItemValueDetail}>{match[2]}</span>\n        </span>\n      ) : (\n        dateStr\n      );\n    },\n  },\n  {\n    key: 'duration',\n    label: 'Duration',\n    renderer: (trace: Trace) => formatDuration(trace.duration),\n  },\n  {\n    key: 'service-count',\n    label: 'Services',\n    renderer: (trace: Trace) => new Set(_values(trace.processes).map((p) => p.serviceName)).size,\n  },\n  {\n    key: 'depth',\n    label: 'Depth',\n    renderer: (trace: Trace) => _get(_maxBy(trace.spans, 'depth'), 'depth', 0) + 1,\n  },\n  {\n    key: 'span-count',\n    label: 'Total Spans',\n    renderer: (trace: Trace) => trace.spans.length,\n  },\n];\n\nexport default function TracePageHeader(props: TracePageHeaderEmbedProps) {\n  const {\n    canCollapse,\n    clearSearch,\n    focusUiFindMatches,\n    hideMap,\n    hideSummary,\n    nextResult,\n    onSlimViewClicked,\n    prevResult,\n    resultCount,\n    slimView,\n    textFilter,\n    trace,\n    traceGraphView,\n    updateNextViewRangeTime,\n    updateViewRangeTime,\n    viewRange,\n    searchValue,\n    onSearchValueChange,\n    hideSearchButtons,\n  } = props;\n\n  const styles = getStyles(useTheme());\n  const links = React.useMemo(() => {\n    if (!trace) {\n      return [];\n    }\n    return getTraceLinks(trace);\n  }, [trace]);\n\n  if (!trace) {\n    return null;\n  }\n\n  const summaryItems =\n    !hideSummary &&\n    !slimView &&\n    HEADER_ITEMS.map((item) => {\n      const { renderer, ...rest } = item;\n      return { ...rest, value: renderer(trace, styles) };\n    });\n\n  const title = (\n    <h1 className={cx(styles.TracePageHeaderTitle, canCollapse && styles.TracePageHeaderTitleCollapsible)}>\n      <TraceName traceName={getTraceName(trace.spans)} />{' '}\n      <small className={cx(styles.TracePageHeaderTraceId, uTxMuted)}>{trace.traceID}</small>\n    </h1>\n  );\n\n  return (\n    <header className={styles.TracePageHeader}>\n      <div className={styles.TracePageHeaderTitleRow}>\n        {links && links.length > 0 && <ExternalLinks links={links} className={styles.TracePageHeaderBack} />}\n        {canCollapse ? (\n          <a\n            className={styles.TracePageHeaderTitleLink}\n            onClick={onSlimViewClicked}\n            role=\"switch\"\n            aria-checked={!slimView}\n          >\n            <MdKeyboardArrowRight\n              className={cx(\n                styles.TracePageHeaderDetailToggle,\n                !slimView && styles.TracePageHeaderDetailToggleExpanded\n              )}\n            />\n            {title}\n          </a>\n        ) : (\n          title\n        )}\n        <TracePageSearchBar\n          clearSearch={clearSearch}\n          focusUiFindMatches={focusUiFindMatches}\n          nextResult={nextResult}\n          prevResult={prevResult}\n          resultCount={resultCount}\n          textFilter={textFilter}\n          navigable={!traceGraphView}\n          searchValue={searchValue}\n          onSearchValueChange={onSearchValueChange}\n          hideSearchButtons={hideSearchButtons}\n        />\n      </div>\n      {summaryItems && <LabeledList className={styles.TracePageHeaderOverviewItems} items={summaryItems} />}\n      {!hideMap && !slimView && (\n        <SpanGraph\n          trace={trace}\n          viewRange={viewRange}\n          updateNextViewRangeTime={updateNextViewRangeTime}\n          updateViewRangeTime={updateViewRangeTime}\n        />\n      )}\n    </header>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport { default } from './TracePageHeader';\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoIosArrowRight = function IoIosArrowRight(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm12.5 9l1.6-1.5 13.4 12.5-13.4 12.5-1.6-1.5 11.7-11z' })\n        )\n    );\n};\n\nexports.default = IoIosArrowRight;\nmodule.exports = exports['default'];","/* eslint-env node, browser */\n'use strict'\n/**\n * mapping of special keycodes to their corresponding keys\n *\n * everything in this dictionary cannot use keypress events\n * so it has to be here to map to the correct keycodes for\n * keyup/keydown events\n *\n * @type {Object}\n */\nmodule.exports = {\n  8: 'backspace',\n  9: 'tab',\n  13: 'enter',\n  16: 'shift',\n  17: 'ctrl',\n  18: 'alt',\n  20: 'capslock',\n  27: 'esc',\n  32: 'space',\n  33: 'pageup',\n  34: 'pagedown',\n  35: 'end',\n  36: 'home',\n  37: 'left',\n  38: 'up',\n  39: 'right',\n  40: 'down',\n  45: 'ins',\n  46: 'del',\n  91: 'meta',\n  93: 'meta',\n  173: 'minus',\n  187: 'plus',\n  189: 'minus',\n  224: 'meta'\n}\n\n/**\n * loop through the f keys, f1 to f19 and add them to the map\n * programatically\n */\nfor (var i = 1; i < 20; ++i) {\n  module.exports[111 + i] = 'f' + i\n}\n\n/**\n * loop through to map numbers on the numeric keypad\n */\nfor (i = 0; i <= 9; ++i) {\n  module.exports[i + 96] = i\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds a key sequence to an event\n *\n * @param {string} combo - combo specified in bind call\n * @param {Array} keys\n * @param {Function} callback\n * @param {string=} action\n * @returns void\n */\nmodule.exports = function (combo, keys, callback, action) {\n  var self = this\n\n  // start off by adding a sequence level record for this combination\n  // and setting the level to 0\n  self.sequenceLevels[combo] = 0\n\n  /**\n   * callback to increase the sequence level for this sequence and reset\n   * all other sequences that were active\n   *\n   * @param {string} nextAction\n   * @returns {Function}\n   */\n  function increaseSequence (nextAction) {\n    return function () {\n      self.nextExpectedAction = nextAction\n      ++self.sequenceLevels[combo]\n      self.resetSequenceTimer()\n    }\n  }\n\n  /**\n   * wraps the specified callback inside of another function in order\n   * to reset all sequence counters as soon as this sequence is done\n   *\n   * @param {Event} e\n   * @returns void\n   */\n  function callbackAndReset (e) {\n    var characterFromEvent\n    self.fireCallback(callback, e, combo)\n\n    // we should ignore the next key up if the action is key down\n    // or keypress.  this is so if you finish a sequence and\n    // release the key the final key will not trigger a keyup\n    if (action !== 'keyup') {\n      characterFromEvent = require('../../helpers/characterFromEvent')\n      self.ignoreNextKeyup = characterFromEvent(e)\n    }\n\n    // weird race condition if a sequence ends with the key\n    // another sequence begins with\n    setTimeout(\n      function () {\n        self.resetSequences()\n      },\n      10\n    )\n  }\n\n  // loop through keys one at a time and bind the appropriate callback\n  // function.  for any key leading up to the final one it should\n  // increase the sequence. after the final, it should reset all sequences\n  //\n  // if an action is specified in the original bind call then that will\n  // be used throughout.  otherwise we will pass the action that the\n  // next key in the sequence should match.  this allows a sequence\n  // to mix and match keypress and keydown events depending on which\n  // ones are better suited to the key provided\n  for (var j = 0; j < keys.length; ++j) {\n    var isFinal = j + 1 === keys.length\n    var wrappedCallback = isFinal ? callbackAndReset : increaseSequence(action || self.getKeyInfo(keys[j + 1]).action)\n    self.bindSingle(keys[j], wrappedCallback, action, combo, j)\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * checks if two arrays are equal\n *\n * @param {Array} modifiers1\n * @param {Array} modifiers2\n * @returns {boolean}\n */\nmodule.exports = function (modifiers1, modifiers2) {\n  return modifiers1.sort().join(',') === modifiers2.sort().join(',')\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport moment from 'moment-timezone';\nimport { round as _round } from 'lodash';\n\nimport { toFloatPrecision } from './number';\n\nconst TODAY = 'Today';\nconst YESTERDAY = 'Yesterday';\n\nexport const STANDARD_DATE_FORMAT = 'YYYY-MM-DD';\nexport const STANDARD_TIME_FORMAT = 'HH:mm';\nexport const STANDARD_DATETIME_FORMAT = 'MMMM D YYYY, HH:mm:ss.SSS';\nexport const ONE_MILLISECOND = 1000;\nexport const ONE_SECOND = 1000 * ONE_MILLISECOND;\nexport const DEFAULT_MS_PRECISION = Math.log10(ONE_MILLISECOND);\n\n/**\n * @param {number} timestamp\n * @param {number} initialTimestamp\n * @param {number} totalDuration\n * @returns {number} 0-100 percentage\n */\nexport function getPercentageOfDuration(duration: number, totalDuration: number) {\n  return (duration / totalDuration) * 100;\n}\n\nconst quantizeDuration = (duration: number, floatPrecision: number, conversionFactor: number) =>\n  toFloatPrecision(duration / conversionFactor, floatPrecision) * conversionFactor;\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in milliseconds\n */\nexport function formatDate(duration: number) {\n  return moment(duration / ONE_MILLISECOND).format(STANDARD_DATE_FORMAT);\n}\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in milliseconds\n */\nexport function formatTime(duration: number) {\n  return moment(duration / ONE_MILLISECOND).format(STANDARD_TIME_FORMAT);\n}\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in milliseconds\n */\nexport function formatDatetime(duration: number) {\n  return moment(duration / ONE_MILLISECOND).format(STANDARD_DATETIME_FORMAT);\n}\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in milliseconds\n */\nexport function formatMillisecondTime(duration: number) {\n  const targetDuration = quantizeDuration(duration, DEFAULT_MS_PRECISION, ONE_MILLISECOND);\n  return `${moment.duration(targetDuration / ONE_MILLISECOND).asMilliseconds()}ms`;\n}\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in seconds\n */\nexport function formatSecondTime(duration: number) {\n  const targetDuration = quantizeDuration(duration, DEFAULT_MS_PRECISION, ONE_SECOND);\n  return `${moment.duration(targetDuration / ONE_MILLISECOND).asSeconds()}s`;\n}\n\n/**\n * Humanizes the duration based on the inputUnit\n *\n * Example:\n * 5000ms => 5s\n * 1000μs => 1ms\n */\nexport function formatDuration(duration: number, inputUnit = 'microseconds'): string {\n  let d = duration;\n  if (inputUnit === 'microseconds') {\n    d = duration / 1000;\n  }\n  let units = 'ms';\n  if (d >= 1000) {\n    units = 's';\n    d /= 1000;\n  }\n  return _round(d, 2) + units;\n}\n\nexport function formatRelativeDate(value: any, fullMonthName = false) {\n  const m = moment.isMoment(value) ? value : moment(value);\n  const monthFormat = fullMonthName ? 'MMMM' : 'MMM';\n  const dt = new Date();\n  if (dt.getFullYear() !== m.year()) {\n    return m.format(`${monthFormat} D, YYYY`);\n  }\n  const mMonth = m.month();\n  const mDate = m.date();\n  const date = dt.getDate();\n  if (mMonth === dt.getMonth() && mDate === date) {\n    return TODAY;\n  }\n  dt.setDate(date - 1);\n  if (mMonth === dt.getMonth() && mDate === dt.getDate()) {\n    return YESTERDAY;\n  }\n  return m.format(`${monthFormat} D`);\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * given a number and a desired precision for the floating\n * side, return the number at the new precision.\n *\n * toFloatPrecision(3.55, 1) // 3.5\n * toFloatPrecision(0.04422, 2) // 0.04\n * toFloatPrecision(6.24e6, 2) // 6240000.00\n *\n * does not support numbers that use \"e\" notation on toString.\n *\n * @param {number} number\n * @param {number} precision\n * @returns {number} number at new floating precision\n */\nexport function toFloatPrecision(number: number, precision: number): number {\n  const log10Length = Math.floor(Math.log10(Math.abs(number))) + 1;\n  const targetPrecision = precision + log10Length;\n\n  if (targetPrecision <= 0) {\n    return Math.trunc(number);\n  }\n\n  return Number(number.toPrecision(targetPrecision));\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * handles a keydown event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  var self = this\n  var characterFromEvent\n  var eventModifiers\n\n  // normalize e.which for key events\n  // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n  if (typeof e.which !== 'number') {\n    e.which = e.keyCode\n  }\n  characterFromEvent = require('../../helpers/characterFromEvent')\n  var character = characterFromEvent(e)\n\n  // no character found then stop\n  if (character === undefined) {\n    return\n  }\n\n  // need to use === for the character check because the character can be 0\n  if (e.type === 'keyup' && self.ignoreNextKeyup === character) {\n    self.ignoreNextKeyup = false\n    return\n  }\n\n  eventModifiers = require('../../helpers/eventModifiers')\n  self.handleKey(character, eventModifiers(e), e)\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * this is a mapping of keys that require shift on a US keypad\n * back to the non shift equivelents\n *\n * this is so you can use keyup events with these keys\n *\n * note that this will only work reliably on US keyboards\n *\n * @type {Object}\n */\nmodule.exports = {\n  '~': '`',\n  '!': '1',\n  '@': '2',\n  '#': '3',\n  '$': '4',\n  '%': '5',\n  '^': '6',\n  '&': '7',\n  '*': '8',\n  '(': '9',\n  ')': '0',\n  '_': '-',\n  '+': '=',\n  ':': ';',\n  '\"': \"'\",\n  '<': ',',\n  '>': '.',\n  '?': '/',\n  '|': '\\\\'\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * mapping for special characters so they can support\n *\n * this dictionary is only used incase you want to bind a\n * keyup or keydown event to one of these keys\n *\n * @type {Object}\n */\nmodule.exports = {\n  106: '*',\n  107: 'plus',\n  109: 'minus',\n  110: '.',\n  111: '/',\n  186: ';',\n  187: '=',\n  188: ',',\n  189: '-',\n  190: '.',\n  191: '/',\n  192: '`',\n  219: '[',\n  220: '\\\\',\n  221: ']',\n  222: \"'\"\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * Gets info for a specific key combination\n *\n * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n * @param  {string=} action\n * @returns {Object}\n */\nmodule.exports = function (combination, action) {\n  var self = this\n  var keysFromString\n  var keys\n  var key\n  var j\n  var modifiers = []\n  var SPECIAL_ALIASES\n  var SHIFT_MAP\n  var isModifier\n\n  keysFromString = require('../../helpers/keysFromString')\n  // take the keys from this pattern and figure out what the actual\n  // pattern is all about\n  keys = keysFromString(combination)\n\n  SPECIAL_ALIASES = require('../../helpers/special-aliases')\n  SHIFT_MAP = require('../../helpers/shift-map')\n  isModifier = require('../../helpers/isModifier')\n  for (j = 0; j < keys.length; ++j) {\n    key = keys[j]\n\n    // normalize key names\n    if (SPECIAL_ALIASES[key]) {\n      key = SPECIAL_ALIASES[key]\n    }\n\n    // if this is not a keypress event then we should\n    // be smart about using shift keys\n    // this will only work for US keyboards however\n    if (action && action !== 'keypress' && SHIFT_MAP[key]) {\n      key = SHIFT_MAP[key]\n      modifiers.push('shift')\n    }\n\n    // if this key is a modifier then add it to the list of modifiers\n    if (isModifier(key)) {\n      modifiers.push(key)\n    }\n  }\n\n  // depending on what the key combination is\n  // we will try to pick the best event for it\n  action = self.pickBestAction(key, modifiers, action)\n\n  return {\n    key: key,\n    modifiers: modifiers,\n    action: action\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MdKeyboardArrowRight = function MdKeyboardArrowRight(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm14.3 27.3l7.7-7.7-7.7-7.7 2.3-2.3 10 10-10 10z' })\n        )\n    );\n};\n\nexports.default = MdKeyboardArrowRight;\nmodule.exports = exports['default'];","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n * \n */\n\n/*eslint-disable no-self-compare */\n\n'use strict';\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  // SameValue algorithm\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Added the nonzero y check to make Flow happy, but it is redundant\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n  }\n}\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = shallowEqual;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoAndroidOpen = function IoAndroidOpen(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm31.6 31.6v-10.3h3.4v10.3c0 1.8-1.6 3.4-3.4 3.4h-23.2c-1.8 0-3.4-1.6-3.4-3.4v-23.2c0-1.8 1.6-3.4 3.4-3.4h10.4v3.4h-10.4v23.2h23.2z m-9.1-26.6h12.5v12.5h-3.4v-6.8l-16.8 16.8-2.3-2.3 16.8-16.8h-6.8v-3.4z' })\n        )\n    );\n};\n\nexports.default = IoAndroidOpen;\nmodule.exports = exports['default'];","module.exports = function deepFreeze (o) {\n  Object.freeze(o);\n\n  Object.getOwnPropertyNames(o).forEach(function (prop) {\n    if (o.hasOwnProperty(prop)\n    && o[prop] !== null\n    && (typeof o[prop] === \"object\" || typeof o[prop] === \"function\")\n    && !Object.isFrozen(o[prop])) {\n      deepFreeze(o[prop]);\n    }\n  });\n  \n  return o;\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const TOP_NAV_HEIGHT = 46 as 46;\n\nexport const FALLBACK_DAG_MAX_NUM_SERVICES = 100 as 100;\nexport const FALLBACK_TRACE_NAME = '<trace-without-root-span>' as '<trace-without-root-span>';\n\nexport const FETCH_DONE = 'FETCH_DONE' as 'FETCH_DONE';\nexport const FETCH_ERROR = 'FETCH_ERROR' as 'FETCH_ERROR';\nexport const FETCH_LOADING = 'FETCH_LOADING' as 'FETCH_LOADING';\n\nexport const fetchedState = {\n  DONE: FETCH_DONE,\n  ERROR: FETCH_ERROR,\n  LOADING: FETCH_LOADING,\n};\n","import { css } from '@emotion/css';\n\nexport const ubRelative = css`\n  position: relative;\n`;\n\nexport const ubMb1 = css`\n  margin-bottom: 0.25rem;\n`;\n\nexport const ubMy1 = css`\n  margin-top: 0.25rem;\n  margin-bottom: 0.25rem;\n`;\n\nexport const ubM0 = css`\n  margin: 0;\n`;\n\nexport const ubPx2 = css`\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n`;\n\nexport const ubPb2 = css`\n  padding-bottom: 0.5rem;\n`;\n\nexport const ubFlex = css`\n  display: flex;\n`;\n\nexport const ubItemsCenter = css`\n  align-items: center;\n`;\n\nexport const ubFlexAuto = css`\n  flex: 1 1 auto;\n  min-width: 0; /* 1 */\n  min-height: 0; /* 1 */\n`;\n\nexport const ubTxRightAlign = css`\n  text-align: right;\n`;\n\nexport const ubInlineBlock = css`\n  display: inline-block;\n`;\n\nexport const uAlignIcon = css`\n  margin: -0.2rem 0.25rem 0 0;\n`;\n\nexport const uTxEllipsis = css`\n  text-overflow: ellipsis;\n`;\n\nexport const uWidth100 = css`\n  width: 100%;\n`;\n\nexport const uTxMuted = css`\n  color: #aaa;\n`;\n\nexport const ubJustifyEnd = css`\n  justify-content: flex-end;\n`;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar createChangeEmitter = exports.createChangeEmitter = function createChangeEmitter() {\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  function listen(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function () {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  function emit() {\n    currentListeners = nextListeners;\n    var listeners = currentListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i].apply(listeners, arguments);\n    }\n  }\n\n  return {\n    listen: listen,\n    emit: emit\n  };\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoAndroidLocate = function IoAndroidLocate(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm17.5 13.8c3.4 0 6.3 2.8 6.3 6.2s-2.9 6.3-6.3 6.3-6.2-2.9-6.2-6.3 2.8-6.2 6.2-6.2z m14.9 4.6h2.6v3.2h-2.6c-0.8 7-6.3 12.5-13.3 13.3v2.6h-3.2v-2.6c-7-0.8-12.5-6.3-13.3-13.3h-2.6v-3.2h2.6c0.8-7 6.3-12.5 13.3-13.3v-2.6h3.2v2.6c7 0.8 12.5 6.3 13.3 13.3z m-14.9 13.2c6.4 0 11.6-5.2 11.6-11.6s-5.2-11.6-11.6-11.6-11.6 5.2-11.6 11.6 5.2 11.6 11.6 11.6z' })\n        )\n    );\n};\n\nexports.default = IoAndroidLocate;\nmodule.exports = exports['default'];","/* eslint-env node, browser */\n'use strict'\n/**\n * binds an event to Combokeys\n *\n * can be a single key, a combination of keys separated with +,\n * an array of keys, or a sequence of keys separated by spaces\n *\n * be sure to list the modifier keys first to make sure that the\n * correct key ends up getting bound (the last key in the pattern)\n *\n * @param {string|Array} keys\n * @param {Function} callback\n * @param {string=} action - \"keypress\", \"keydown\", or \"keyup\"\n * @returns void\n */\nmodule.exports = function (keys, callback, action) {\n  var self = this\n\n  keys = keys instanceof Array ? keys : [keys]\n  self.bindMultiple(keys, callback, action)\n  return self\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * picks the best action based on the key combination\n *\n * @param {string} key - character for key\n * @param {Array} modifiers\n * @param {string=} action passed in\n */\nmodule.exports = function (key, modifiers, action) {\n  var self = this\n\n  // if no action was picked in we should try to pick the one\n  // that we think would work best for this key\n  if (!action) {\n    action = self.getReverseMap()[key] ? 'keydown' : 'keypress'\n  }\n\n  // modifier keys don't work as expected with keypress,\n  // switch to keydown\n  if (action === 'keypress' && modifiers.length) {\n    action = 'keydown'\n  }\n\n  return action\n}\n"],"sourceRoot":""}