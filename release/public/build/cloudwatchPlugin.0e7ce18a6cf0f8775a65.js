"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8831],{"./public/app/plugins/datasource/cloudwatch/module.tsx":(e,t,s)=>{s.r(t),s.d(t,{plugin:()=>Be});var r,i,n=s("./packages/grafana-data/src/index.ts"),a=s("./node_modules/react/index.js"),o=s("./packages/grafana-ui/src/index.ts"),l=s("./node_modules/@grafana/aws-sdk/index.js"),u=s("./public/app/features/plugins/datasource_srv.ts"),c=s("./public/app/store/store.ts"),d=s("./public/app/core/actions/index.ts"),p=s("./public/app/core/copy/appNotification.ts"),m=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),g=s("./packages/grafana-runtime/src/index.ts"),h=s("./node_modules/react/jsx-runtime.js");const f=e=>({infoText:m.css`
    padding-bottom: ${e.spacing(2)};
    color: ${e.colors.text.secondary};
  `}),v="grafana-x-ray-datasource";function y({datasourceUid:e,onChange:t}){const s=Boolean((0,u.ak)().getList({pluginId:v}).length),n=(0,o.useStyles2)(f);return(0,h.jsxs)(h.Fragment,{children:[r||(r=(0,h.jsx)("h3",{className:"page-heading",children:"X-ray trace link"})),(0,h.jsx)("div",{className:n.infoText,children:"Grafana will automatically create a link to a trace in X-ray data source if logs contain @xrayTraceId field"}),!s&&(i||(i=(0,h.jsx)(o.Alert,{title:"There is no X-ray datasource to link to. First add an X-ray data source and then link it to Cloud Watch. ",severity:"info"}))),(0,h.jsx)("div",{className:"gf-form-group",children:(0,h.jsx)(o.InlineField,{htmlFor:"data-source-picker",label:"Data source",labelWidth:28,tooltip:"X-ray data source containing traces",children:(0,h.jsx)(g.DataSourcePicker,{pluginId:v,onChange:e=>t(e.uid),current:e,noDefault:!0})})})]})}var b,x=s("./node_modules/angular/index.js"),S=s.n(x),j=s("./node_modules/lodash/lodash.js"),w=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),C=s("./node_modules/rxjs/dist/esm5/internal/observable/from.js"),R=s("./node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),A=s("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),I=s("./node_modules/rxjs/dist/esm5/internal/observable/zip.js"),k=s("./node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),T=s("./node_modules/rxjs/dist/esm5/internal/Observable.js"),q=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),N=s("./node_modules/rxjs/dist/esm5/internal/operators/concatMap.js"),F=s("./node_modules/rxjs/dist/esm5/internal/operators/repeat.js"),M=s("./node_modules/rxjs/dist/esm5/internal/operators/share.js"),E=s("./node_modules/rxjs/dist/esm5/internal/operators/scan.js"),D=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),_=s("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),Q=s("./node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js"),P=s("./node_modules/rxjs/dist/esm5/internal/operators/finalize.js"),O=s("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),L=s("./public/app/types/index.ts"),V=s("./public/app/features/templating/template_srv.ts"),G=s("./public/app/features/dashboard/services/TimeSrv.ts");const U=({region:e})=>(0,h.jsxs)("p",{children:["Please visit the ",(0,h.jsx)("a",{target:"_blank",rel:"noreferrer",className:"text-link",href:`https://${e}.console.aws.amazon.com/servicequotas/home?region=${e}#!/services/monitoring/quotas/L-5E141212`,children:"AWS Service Quotas console"})," to request a quota increase or see our ",b||(b=(0,h.jsx)("a",{target:"_blank",rel:"noreferrer",className:"text-link",href:"https://grafana.com/docs/grafana/latest/datasources/cloudwatch/#service-quotas",children:"documentation"}))," to learn more."]}),$=(e,t=7e3)=>{const s=(0,j.memoize)(((...s)=>(0,j.debounce)(e,t,{leading:!0})),((...e)=>JSON.stringify(e)));return(...e)=>s(...e)(...e)};let B;!function(e){e.Scheduled="Scheduled",e.Running="Running",e.Complete="Complete",e.Failed="Failed",e.Cancelled="Cancelled",e.Timeout="Timeout"}(B||(B={}));var W=s("./node_modules/prismjs/prism.js"),z=s.n(W),K=s("./public/app/plugins/datasource/cloudwatch/syntax.ts");function J(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class X extends n.LanguageProvider{constructor(e,t){super(),J(this,"started",!1),J(this,"datasource",void 0),J(this,"cleanText",(e=>e.replace(/[()]/g,"").trim())),J(this,"request",((e,t)=>(0,R.n)(this.datasource.awsRequest(e,t)))),J(this,"start",(()=>(this.startTask||(this.startTask=Promise.resolve().then((()=>(this.started=!0,[])))),this.startTask))),J(this,"fetchedFieldsCache",void 0),J(this,"fetchFields",(async e=>{if(this.fetchedFieldsCache&&Date.now()-this.fetchedFieldsCache.time<3e4&&(0,j.sortedUniq)(this.fetchedFieldsCache.logGroups).join("|")===(0,j.sortedUniq)(e).join("|"))return this.fetchedFieldsCache.fields;const t=await Promise.all(e.map((e=>this.datasource.getLogGroupFields({logGroupName:e})))),s=[...new Set(t.reduce(((e,t)=>{var s;return e.concat(null===(s=t.logGroupFields)||void 0===s?void 0:s.map((e=>e.name)))}),[])).values()];return this.fetchedFieldsCache={time:Date.now(),logGroups:e,fields:s},s})),J(this,"handleKeyword",(async e=>{var t;const s=await this.getFieldCompletionItems(null!==(t=null==e?void 0:e.logGroupNames)&&void 0!==t?t:[]),r=[{searchFunctionType:o.SearchFunctionType.Prefix,label:"Functions",items:K.Bn.concat(K.ae,K.Ie)}];return s.suggestions.push(...r),s})),J(this,"handleCommand",(async(e,t,s)=>{var r;const i=e.content.toLowerCase(),n=Z(t),a=n===e;if("sort"===i)return this.handleSortCommand(a,t,s);var o;if("parse"===i&&a)return await this.getFieldCompletionItems(null!==(o=null==s?void 0:s.logGroupNames)&&void 0!==o?o:[]);const l=Y(e.next,"whitespace")&&!(null!==(r=e.next)&&void 0!==r&&r.next),u=l||function(e){let t=e;for(;t.next;){if(!t.next.types.includes("whitespace"))return t.next;t=t.next}return null}(e)===t,c=Y(t,"punctuation",","),d=c||Y(n,"punctuation",",");if(!u&&!d)return{suggestions:[]};if(["display","fields"].includes(i)){var p;const e=await this.getFieldCompletionItems(null!==(p=null==s?void 0:s.logGroupNames)&&void 0!==p?p:[]);return e.suggestions.push(...this.getFieldAndFilterFunctionCompletionItems().suggestions),e}if("stats"===i){const e=this.getStatsAggCompletionItems();return(c||l)&&(null==e||e.suggestions.forEach((e=>{e.skipFilter=!0}))),e}if("filter"===i&&a){var m;const e=await this.getFieldCompletionItems(null!==(m=null==s?void 0:s.logGroupNames)&&void 0!==m?m:[]),t=this.getBoolFuncCompletionItems();return e.suggestions.push(...t.suggestions),e}return{suggestions:[]}})),J(this,"handleComparison",(async e=>{var t;const s=await this.getFieldCompletionItems(null!==(t=null==e?void 0:e.logGroupNames)&&void 0!==t?t:[]),r=this.getComparisonCompletionItems();return s.suggestions.push(...r.suggestions),s})),J(this,"getCommandCompletionItems",(()=>({suggestions:[{searchFunctionType:o.SearchFunctionType.Prefix,label:"Commands",items:K.lD}]}))),J(this,"getFieldAndFilterFunctionCompletionItems",(()=>({suggestions:[{searchFunctionType:o.SearchFunctionType.Prefix,label:"Functions",items:K.Ak}]}))),J(this,"getStatsAggCompletionItems",(()=>({suggestions:[{searchFunctionType:o.SearchFunctionType.Prefix,label:"Functions",items:K.QZ}]}))),J(this,"getBoolFuncCompletionItems",(()=>({suggestions:[{searchFunctionType:o.SearchFunctionType.Prefix,label:"Functions",items:K.aH}]}))),J(this,"getComparisonCompletionItems",(()=>({suggestions:[{searchFunctionType:o.SearchFunctionType.Prefix,label:"Functions",items:K.OV.concat(K.aH)}]}))),J(this,"getFieldCompletionItems",(async e=>({suggestions:[{label:"Fields",items:(await this.fetchFields(e)).map((e=>({label:e,insertText:e.match(/@?[_a-zA-Z]+[_.0-9a-zA-Z]*/)?void 0:`\`${e}\``})))}]}))),this.datasource=e,Object.assign(this,t)}getSyntax(){return K.ZP}isStatsQuery(e){var t;const s=this.getSyntax();return!!(null!==(t=z().tokenize(e,s))&&void 0!==t?t:[]).find((e=>"string"!=typeof e&&"stats"===e.content.toString().toLowerCase()&&"query-command"===e.type))}async provideCompletionItems(e,t){const{value:s}=e,r=null==s?void 0:s.data.get("tokens");if(!r||!r.length)return{suggestions:[]};const i=r.filter((e=>{var t,r,i,n;return e.offsets.start<=(null===(t=s.selection)||void 0===t||null===(r=t.start)||void 0===r?void 0:r.offset)&&e.offsets.end>=(null===(i=s.selection)||void 0===i||null===(n=i.start)||void 0===n?void 0:n.offset)}))[0],n=!i.prev,a=Z(i);if(n||!n&&(null==a?void 0:a.types.includes("command-separator")))return this.getCommandCompletionItems();var o;if(function(e){const t=Z(e);if(!t)return!1;const s="("===e.content?e:"("===t.content?t:void 0;if(s){const e=Z(s);if(e)return H.includes(e.content.toLowerCase())&&e.types.includes("function")}return!1}(i))return await this.getFieldCompletionItems(null!==(o=null==t?void 0:t.logGroupNames)&&void 0!==o?o:[]);if(function(e,t){const s=ee(t,["whitespace","function","punctuation","field-name","number"]);if(Y(s,"keyword","by")){const e=ee(t,["whitespace"]);if(e===s||Y(e,"punctuation",","))return!0}return!1}(0,i))return this.handleKeyword(t);if(null!=a&&a.types.includes("comparison-operator"))return this.handleComparison(t);const l=function(e){let t=e;for(;t.prev;)if(t=t.prev,t.types.includes("query-command")&&(!t.prev||Y(Z(t),"command-separator")))return t;return null}(i);return l?await this.handleCommand(l,i,t):{suggestions:[]}}async handleSortCommand(e,t,s){var r;return e?await this.getFieldCompletionItems(null!==(r=null==s?void 0:s.logGroupNames)&&void 0!==r?r:[]):Y(Z(t),"field-name")?{suggestions:[{searchFunctionType:o.SearchFunctionType.Prefix,label:"Sort Order",items:[{label:"asc"},{label:"desc"}]}]}:{suggestions:[]}}}function Z(e){let t=e;for(;t.prev;){if(!Y(t.prev,"whitespace"))return t.prev;t=t.prev}return null}const H=["avg","count","count_distinct","earliest","latest","sortsFirst","sortsLast","max","min","pct","stddev","ispresent","fromMillis","toMillis","isempty","isblank","isValidIp","isValidIpV4","isValidIpV6","isIpInSubnet","isIpv4InSubnet","isIpv6InSubnet"].map((e=>e.toLowerCase()));function Y(e,t,s){return!(null==e||!e.types.includes(t))&&(!s||(null==e?void 0:e.content.toLowerCase())===s)}function ee(e,t){let s=e.prev;e:for(;s;){for(const e of t)if("string"==typeof e){if(s.types.includes(e)){s=s.prev;continue e}}else if(s.types.includes(e.type)&&s.content.toLowerCase()===e.value){s=s.prev;continue e}break}return s}var te=s("./node_modules/rxjs/dist/esm5/internal/scheduler/async.js");function se(e){const{subscriber:t,counter:s,period:r,step:i,endPeriod:n}=e;t.next(s);const a=Math.min(r+i,n);this.schedule({subscriber:t,counter:s+1,period:a,step:i,endPeriod:n},a)}var re=s("./packages/grafana-runtime/src/utils/queryResponse.ts"),ie=s("./public/app/plugins/datasource/cloudwatch/aws_url.ts");async function ne(e,t){let s;try{s=await(0,g.getDataSourceSrv)().get(e)}catch(e){return void console.error("Could not load linked xray data source, it was probably deleted after it was linked",e)}return{title:s.name,url:"",internal:{query:{query:"${__value.raw}",queryType:"getTrace",region:t},datasourceUid:e,datasourceName:s.name}}}function ae(e,t,s,r){var i,n;const a=e.expression?r(e.expression):"",o=null!==(i=null===(n=e.logGroupNames)||void 0===n?void 0:n.map((e=>r(e,"log groups"))))&&void 0!==i?i:[],l={end:t.to.toISOString(),start:t.from.toISOString(),timeType:"ABSOLUTE",tz:"UTC",editorString:a,isLiveTail:!1,source:o};return{url:(0,ie.M)(l,s),title:"View in CloudWatch console",targetBlank:!0}}function oe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const le="/api/ds/query",ue=(e,t)=>c.h.dispatch((0,d.$l)((0,p.t_)(`CloudWatch request limit reached in ${t} for data source ${e}`,"",a.createElement(U,{region:t},null)))),ce=(e,t)=>c.h.dispatch((0,d.$l)((0,p.t_)(e,t)));class de extends g.DataSourceWithBackend{constructor(e,t=(0,V.J)(),s=(0,G.$t)()){super(e),oe(this,"proxyUrl",void 0),oe(this,"defaultRegion",void 0),oe(this,"datasourceName",void 0),oe(this,"languageProvider",void 0),oe(this,"tracingDataSourceUid",void 0),oe(this,"type","cloudwatch"),oe(this,"standardStatistics",["Average","Maximum","Minimum","Sum","SampleCount"]),oe(this,"debouncedAlert",$(ue,L.bd.Error)),oe(this,"debouncedCustomAlert",$(ce,L.bd.Error)),oe(this,"logQueries",{}),oe(this,"handleLogQueries",((e,t)=>{const s=e.filter((e=>{var t;return null===(t=e.logGroupNames)||void 0===t?void 0:t.length}));if(e.length>s.length)return(0,w.of)({data:[],error:{message:"Log group is required"}});if((0,j.isEmpty)(s))return(0,w.of)({data:[],state:n.LoadingState.Done});const r=e.map((e=>({queryString:e.expression,refId:e.refId,logGroupNames:e.logGroupNames,region:this.replace(this.getActualRegion(e.region),t.scopedVars,!0,"region")})));return this.makeLogActionRequest("StartQuery",r,{scopedVars:t.scopedVars,skipCache:!0}).pipe((0,q.z)((t=>this.logsQuery(t.map((t=>{var s,r,i;return{queryId:t.fields[0].values.get(0),region:null!==(s=null===(r=t.meta)||void 0===r||null===(i=r.custom)||void 0===i?void 0:i.Region)&&void 0!==s?s:"default",refId:t.refId,statsGroups:e.find((e=>e.refId===t.refId)).statsGroups}}))))),(0,q.z)((e=>(0,C.Dp)((async()=>(await async function(e,t,s,r,i,n){const a=(e,s)=>r(e,t.scopedVars,!0,s);for(const r of e.data){const e=t.targets.find((e=>e.refId===r.refId)),o=i(a(e.region,"region"));for(const t of r.fields)if("@xrayTraceId"===t.name&&n){i(a(e.region,"region"));const s=await ne(n,o);s&&(t.config.links=[s])}else t.config.links=[ae(e,s,o,a)]}}(e,t,this.timeSrv.timeRange(),this.replace.bind(this),this.getActualRegion.bind(this),this.tracingDataSourceUid),e))()))))})),oe(this,"handleMetricQueries",((e,t)=>{var s,r;const i=e.filter((e=>{var t;return!!e.region&&!!e.namespace&&!!e.metricName&&!!e.statistic||(null===(t=e.expression)||void 0===t?void 0:t.length)>0})).map((e=>(e.region=this.replace(this.getActualRegion(e.region),t.scopedVars,!0,"region"),e.namespace=this.replace(e.namespace,t.scopedVars,!0,"namespace"),e.metricName=this.replace(e.metricName,t.scopedVars,!0,"metric name"),e.dimensions=this.convertDimensionFormat(e.dimensions,t.scopedVars),e.statistic=this.templateSrv.replace(e.statistic,t.scopedVars),e.period=String(this.getPeriod(e,t)),e.id=this.templateSrv.replace(e.id,t.scopedVars),e.expression=this.templateSrv.replace(e.expression,t.scopedVars),Object.assign({intervalMs:t.intervalMs,maxDataPoints:t.maxDataPoints,datasourceId:this.id,type:"timeSeriesQuery"},e))));if((0,j.isEmpty)(i))return(0,w.of)({data:[]});const n={from:null==t||null===(s=t.range)||void 0===s?void 0:s.from.valueOf().toString(),to:null==t||null===(r=t.range)||void 0===r?void 0:r.to.valueOf().toString(),queries:i};return this.performTimeSeriesQuery(n,t.range)})),oe(this,"getLogRowContext",(async(e,{limit:t=10,direction:s="BACKWARD"}={})=>{let r=null,i=null;for(const t of e.dataFrame.fields)if("__logstream__grafana_internal__"===t.name){if(r=t,null!==i)break}else if("__log__grafana_internal__"===t.name&&(i=t,null!==r))break;const n={limit:t,startFromHead:"BACKWARD"!==s,logGroupName:pe(i.values.get(e.rowIndex)),logStreamName:r.values.get(e.rowIndex)};"BACKWARD"===s?n.endTime=e.timeEpochMs:n.startTime=e.timeEpochMs;return{data:await(0,R.n)(this.makeLogActionRequest("GetLogEvents",[n]))}})),oe(this,"getTargetsByQueryMode",(e=>{const t=[],s=[];return e.forEach((e=>{var r;"Logs"===(null!==(r=e.queryMode)&&void 0!==r?r:"Metrics")?t.push(e):s.push(e)})),{logQueries:t,metricsQueries:s}})),this.templateSrv=t,this.timeSrv=s,this.proxyUrl=e.url,this.defaultRegion=e.jsonData.defaultRegion,this.datasourceName=e.name,this.languageProvider=new X(this),this.tracingDataSourceUid=e.jsonData.tracingDatasourceUid}query(e){let t=(e=S().copy(e)).targets.filter((e=>""!==e.id||!0!==e.hide));const{logQueries:s,metricsQueries:r}=this.getTargetsByQueryMode(t),i=[];return s.length>0&&i.push(this.handleLogQueries(s,e)),r.length>0&&i.push(this.handleMetricQueries(r,e)),(0,j.isEmpty)(i)?(0,w.of)({data:[],state:n.LoadingState.Done}):(0,A.T)(...i)}logsQuery(e){this.logQueries={},e.forEach((e=>{var t,s,r;this.logQueries[e.refId]={id:e.queryId,region:e.region,statsQuery:null!==(t=(null!==(s=null===(r=e.statsGroups)||void 0===r?void 0:r.length)&&void 0!==s?s:0)>0)&&void 0!==t&&t}}));const t=(({startPeriod:e=0,endPeriod:t=5e3,step:s=1e3},r=te.z)=>new T.y((i=>(i.add(r.schedule(se,e,{subscriber:i,counter:0,period:e,step:s,endPeriod:t})),i))))({startPeriod:100,endPeriod:1e3,step:300}).pipe((0,N.b)((t=>this.makeLogActionRequest("GetQueryResults",e,{skipCache:!0}))),(0,F.r)(),(0,M.B)()),s=t.pipe((0,E.R)((({failures:e,prevRecordsMatched:t},s)=>{e++;for(const o of s){var r,i,n,a;const s=null===(r=o.meta)||void 0===r||null===(i=r.stats)||void 0===i||null===(n=i.find((e=>"Records scanned"===e.displayName)))||void 0===n?void 0:n.value;s>(null!==(a=t[o.refId])&&void 0!==a?a:0)&&(e=0),t[o.refId]=s}return{failures:e,prevRecordsMatched:t}}),{failures:0,prevRecordsMatched:{}}),(0,D.U)((({failures:e})=>e)),(0,M.B)()),r=(0,I.$)(t,s).pipe((0,_.b)((([e])=>{for(const r of e){var t,s;[B.Complete,B.Cancelled,B.Failed].includes(null===(t=r.meta)||void 0===t||null===(s=t.custom)||void 0===s?void 0:s.Status)&&this.logQueries.hasOwnProperty(r.refId)&&delete this.logQueries[r.refId]}})),(0,D.U)((([e,t])=>{if(t>=5)for(const t of e)(0,j.set)(t,"meta.custom.Status",B.Cancelled);return{data:e,key:"test-key",state:e.every((e=>{var t,s;return[B.Complete,B.Cancelled,B.Failed].includes(null===(t=e.meta)||void 0===t||null===(s=t.custom)||void 0===s?void 0:s.Status)}))?n.LoadingState.Done:n.LoadingState.Loading,error:t>=5?{message:"error: query timed out after 5 attempts",type:n.DataQueryErrorType.Timeout}:void 0}})),(0,Q.o)((({state:e})=>e!==n.LoadingState.Error&&e!==n.LoadingState.Done),!0));return i=r,a=()=>this.stopQueries(),new T.y((e=>{const t=i.subscribe({next:t=>e.next(t),error:t=>e.next(t),complete:()=>e.complete()});return()=>{t.unsubscribe(),a()}}));var i,a}stopQueries(){Object.keys(this.logQueries).length>0&&this.makeLogActionRequest("StopQuery",Object.values(this.logQueries).map((e=>({queryId:e.id,region:e.region}))),{makeReplacements:!1,skipCache:!0}).pipe((0,P.x)((()=>{this.logQueries={}})))}async describeLogGroups(e){var t,s,r;return null!==(t=null===(s=(await(0,R.n)(this.makeLogActionRequest("DescribeLogGroups",[e])))[0])||void 0===s||null===(r=s.fields[0])||void 0===r?void 0:r.values.toArray())&&void 0!==t?t:[]}async getLogGroupFields(e){var t;const s=await(0,R.n)(this.makeLogActionRequest("GetLogGroupFields",[e])),r=s[0].fields[0].values.toArray(),i=s[0].fields[1].values.toArray();return{logGroupFields:null!==(t=r.map(((e,t)=>({name:e,percent:i[t]}))))&&void 0!==t?t:[]}}getVariables(){return this.templateSrv.getVariables().map((e=>`$${e.name}`))}getPeriod(e,t){let s=this.templateSrv.replace(e.period,t.scopedVars);return s&&"auto"!==s.toLowerCase()&&(s=/^\d+$/.test(s)?parseInt(s,10):n.rangeUtil.intervalToSeconds(s),s<1&&(s=1)),s||""}performTimeSeriesQuery(e,{from:t,to:s}){return this.awsRequest(le,e).pipe((0,D.U)((e=>{const t=(0,g.toDataQueryResponse)({data:e}).data;return!t||t.length<=0?{data:[]}:{data:t,error:Object.values(e.results).reduce(((e,t)=>t.error?{message:t.error}:e),null)}})),(0,O.K)((t=>{if(!t.data.results&&t.data&&"Metric request error"===t.data.message&&t.data.error)return t.message=t.data.error,(0,k._)((()=>t));const s=Object.values(t.data.results),r=s.find((e=>e.error));if(r&&(t.message=r.error),s.some((e=>e.error&&/^Throttling:.*/.test(e.error)))){const s=Object.keys(t.data.results);Object.values(e.queries).reduce(((e,{refId:t,region:r})=>t&&!s.includes(t)||e.includes(r)?e:[...e,r]),[]).forEach((e=>this.debouncedAlert(this.datasourceName,this.getActualRegion(e))))}return(0,k._)((()=>t))})))}transformSuggestDataFromDataframes(e){const t=(0,g.toDataQueryResponse)({data:e}).data;return(0,n.toLegacyResponseData)(t[0]).rows.map((([e,t])=>({text:e,value:t,label:t})))}doMetricQueryRequest(e,t){const s=this.timeSrv.timeRange();return(0,R.n)(this.awsRequest(le,{from:s.from.valueOf().toString(),to:s.to.valueOf().toString(),queries:[Object.assign({refId:"metricFindQuery",intervalMs:1,maxDataPoints:1,datasourceId:this.id,type:"metricFindQuery",subtype:e},t)]}).pipe((0,D.U)((e=>this.transformSuggestDataFromDataframes(e)))))}makeLogActionRequest(e,t,s={makeReplacements:!0,skipCache:!1}){const r=this.timeSrv.timeRange(),i={from:r.from.valueOf().toString(),to:r.to.valueOf().toString(),queries:t.map((t=>Object.assign({refId:"A",intervalMs:1,maxDataPoints:1,datasourceId:this.id,type:"logAction",subtype:e},t)))};s.makeReplacements&&i.queries.forEach((e=>{e.hasOwnProperty("queryString")&&(e.queryString=this.replace(e.queryString,s.scopedVars,!0)),e.region=this.replace(e.region,s.scopedVars,!0,"region"),e.region=this.getActualRegion(e.region),e.logGroupNames&&(e.logGroupNames=e.logGroupNames.map((e=>this.replace(e,s.scopedVars,!0,"log groups"))))}));let n={};return s.skipCache&&(n={"X-Cache-Skip":!0}),this.awsRequest(le,i,n).pipe((0,D.U)((e=>{return t={data:e},(0,g.toDataQueryResponse)(t).data||[];var t})),(0,O.K)((e=>{var t,s;if(null!==(t=e.data)&&void 0!==t&&t.error)throw e.data.error;if(null!==(s=e.data)&&void 0!==s&&s.message)throw e.data.message;throw e})))}getRegions(){return this.doMetricQueryRequest("regions",null).then((e=>[{label:"default",value:"default",text:"default"},...e]))}getNamespaces(){return this.doMetricQueryRequest("namespaces",null)}async getMetrics(e,t){return e?this.doMetricQueryRequest("metrics",{region:this.templateSrv.replace(this.getActualRegion(t)),namespace:this.templateSrv.replace(e)}):[]}async getDimensionKeys(e,t){return e?this.doMetricQueryRequest("dimension_keys",{region:this.templateSrv.replace(this.getActualRegion(t)),namespace:this.templateSrv.replace(e)}):[]}async getDimensionValues(e,t,s,r,i){if(!t||!s)return[];return await this.doMetricQueryRequest("dimension_values",{region:this.templateSrv.replace(this.getActualRegion(e)),namespace:this.templateSrv.replace(t),metricName:this.templateSrv.replace(s.trim()),dimensionKey:this.templateSrv.replace(r),dimensions:this.convertDimensionFormat(i,{})})}getEbsVolumeIds(e,t){return this.doMetricQueryRequest("ebs_volume_ids",{region:this.templateSrv.replace(this.getActualRegion(e)),instanceId:this.templateSrv.replace(t)})}getEc2InstanceAttribute(e,t,s){return this.doMetricQueryRequest("ec2_instance_attribute",{region:this.templateSrv.replace(this.getActualRegion(e)),attributeName:this.templateSrv.replace(t),filters:s})}getResourceARNs(e,t,s){return this.doMetricQueryRequest("resource_arns",{region:this.templateSrv.replace(this.getActualRegion(e)),resourceType:this.templateSrv.replace(t),tags:s})}async metricFindQuery(e){let t,s,r,i;if(e.match(/^regions\(\)/))return this.getRegions();if(e.match(/^namespaces\(\)/))return this.getNamespaces();const n=e.match(/^metrics\(([^\)]+?)(,\s?([^,]+?))?\)/);if(n)return s=n[1],t=n[3],this.getMetrics(s,t);const a=e.match(/^dimension_keys\(([^\)]+?)(,\s?([^,]+?))?\)/);if(a)return s=a[1],t=a[3],this.getDimensionKeys(s,t);const o=e.match(/^dimension_values\(([^,]+?),\s?([^,]+?),\s?([^,]+?),\s?([^,]+?)(,\s?(.+))?\)/);if(o){t=o[1],s=o[2],r=o[3];const e=o[4];return i={},o[6]&&(i=JSON.parse(this.templateSrv.replace(o[6]))),this.getDimensionValues(t,s,r,e,i)}const l=e.match(/^ebs_volume_ids\(([^,]+?),\s?([^,]+?)\)/);if(l){t=l[1];const e=l[2];return this.getEbsVolumeIds(t,e)}const u=e.match(/^ec2_instance_attribute\(([^,]+?),\s?([^,]+?),\s?(.+?)\)/);if(u){t=u[1];const e=u[2];return i=JSON.parse(this.templateSrv.replace(u[3])),this.getEc2InstanceAttribute(t,e,i)}const c=e.match(/^resource_arns\(([^,]+?),\s?([^,]+?),\s?(.+?)\)/);if(c){t=c[1];const e=c[2],s=JSON.parse(this.templateSrv.replace(c[3]));return this.getResourceARNs(t,e,s)}return e.match(/^statistics\(\)/)?this.standardStatistics.map((e=>({value:e,label:e,text:e}))):Promise.resolve([])}annotationQuery(e){const t=e.annotation,s=this.templateSrv.replace(t.statistic),r=t.prefixMatching?"":"300";let i=t.period||r;i=parseInt(i,10);const a={prefixMatching:t.prefixMatching,region:this.templateSrv.replace(this.getActualRegion(t.region)),namespace:this.templateSrv.replace(t.namespace),metricName:this.templateSrv.replace(t.metricName),dimensions:this.convertDimensionFormat(t.dimensions,{}),statistic:s,period:i,actionPrefix:t.actionPrefix||"",alarmNamePrefix:t.alarmNamePrefix||""};return(0,R.n)(this.awsRequest(le,{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:[Object.assign({refId:"annotationQuery",datasourceId:this.id,type:"annotationQuery"},a)]}).pipe((0,D.U)((e=>{const s=(0,g.toDataQueryResponse)({data:e}).data;return(0,n.toLegacyResponseData)(s[0]).rows.map((e=>({annotation:t,time:Date.parse(e[0]),title:e[1],tags:[e[2]],text:e[3]})))}))))}targetContainsTemplate(e){var t;return this.templateSrv.variableExists(e.region)||this.templateSrv.variableExists(e.namespace)||this.templateSrv.variableExists(e.metricName)||this.templateSrv.variableExists(e.expression)||(null===(t=e.logGroupNames)||void 0===t?void 0:t.some((e=>this.templateSrv.variableExists(e))))||(0,j.find)(e.dimensions,((e,t)=>this.templateSrv.variableExists(t)||this.templateSrv.variableExists(e)))}async testDatasource(){const e=this.defaultRegion,t={};try{return await this.getDimensionValues(e,"AWS/Billing","EstimatedCharges","ServiceName",t),{status:"success",message:"Data source is working"}}catch(e){return(0,re.Gw)(e)}}awsRequest(e,t,s={}){const r={method:"POST",url:e,data:t,headers:s};return(0,g.getBackendSrv)().fetch(r).pipe((0,D.U)((e=>e.data)))}getDefaultRegion(){return this.defaultRegion}getActualRegion(e){return"default"===e||void 0===e||""===e?this.getDefaultRegion():e}showContextToggle(){return!0}convertToCloudWatchTime(e,t){return(0,j.isString)(e)&&(e=n.dateMath.parse(e,t)),Math.round(e.valueOf()/1e3)}convertDimensionFormat(e,t){return Object.entries(e).reduce(((e,[s,r])=>{if(s=this.replace(s,t,!0,"dimension keys"),Array.isArray(r))return Object.assign({},e,{[s]:r});const i=this.templateSrv.getVariables().find((({name:e})=>e===this.templateSrv.getVariableName(r)));if(i){if(i.multi){const i=this.templateSrv.replace(r,t,"pipe").split("|");return Object.assign({},e,{[s]:i})}return Object.assign({},e,{[s]:[this.templateSrv.replace(r,t)]})}return Object.assign({},e,{[s]:[r]})}),{})}replace(e,t,s,r){if(s&&e){const t=this.templateSrv.getVariables().find((({name:t})=>t===this.templateSrv.getVariableName(e)));t&&t.multi&&this.debouncedCustomAlert("CloudWatch templating error",`Multi template variables are not supported for ${r||e}`)}return this.templateSrv.replace(e,t)}getQueryDisplayText(e){var t;return"Logs"===e.queryMode?null!==(t=e.expression)&&void 0!==t?t:"":JSON.stringify(e)}interpolateVariablesInQueries(e,t){return e.length?e.map((e=>Object.assign({},e,{region:this.getActualRegion(this.replace(e.region,t)),expression:this.replace(e.expression,t)},!("Logs"===e.queryMode)&&this.interpolateMetricsQueryVariables(e,t)))):e}interpolateMetricsQueryVariables(e,t){return{alias:this.replace(e.alias,t),metricName:this.replace(e.metricName,t),namespace:this.replace(e.namespace,t),period:this.replace(e.period,t),dimensions:Object.entries(e.dimensions).reduce(((e,[s,r])=>Array.isArray(r)?Object.assign({},e,{[s]:r}):Object.assign({},e,{[this.replace(s,t)]:this.replace(r,t)})),{})}}}function pe(e){const t=e.lastIndexOf(":");return e.substr(t+1)}class me{constructor(e){this.annotation=e.ctrl.annotation,(0,j.defaultsDeep)(this.annotation,{namespace:"",metricName:"",expression:"",dimensions:{},region:"default",id:"",alias:"",statistic:"Average",matchExact:!0,prefixMatching:!1,actionPrefix:"",alarmNamePrefix:""}),this.onChange=this.onChange.bind(this)}onChange(e){Object.assign(this.annotation,e)}}var ge,he,fe;me.$inject=["$scope"],fe="partials/annotations.editor.html",(he="templateUrl")in(ge=me)?Object.defineProperty(ge,he,{value:fe,enumerable:!0,configurable:!0,writable:!0}):ge[he]=fe;var ve,ye,be=s("./public/app/plugins/datasource/cloudwatch/components/LogsQueryEditor.tsx"),xe=s("./public/app/plugins/datasource/cloudwatch/components/PanelQueryEditor.tsx"),Se=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),je=(ve=["",""],ye=["",""],Object.freeze(Object.defineProperties(ve,{raw:{value:Object.freeze(ye)}})));function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}const Ce=function(){function e(){for(var t=this,s=arguments.length,r=Array(s),i=0;i<s;i++)r[i]=arguments[i];return we(this,e),this.tag=function(e){for(var s=arguments.length,r=Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return"function"==typeof e?t.interimTag.bind(t,e):"string"==typeof e?t.transformEndResult(e):(e=e.map(t.transformString.bind(t)),t.transformEndResult(e.reduce(t.processSubstitutions.bind(t,r))))},r.length>0&&Array.isArray(r[0])&&(r=r[0]),this.transformers=r.map((function(e){return"function"==typeof e?e():e})),this.tag}return Se(e,[{key:"interimTag",value:function(e,t){for(var s=arguments.length,r=Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];return this.tag(je,e.apply(void 0,[t].concat(r)))}},{key:"processSubstitutions",value:function(e,t,s){var r=this.transformSubstitution(e.shift(),t);return"".concat(t,r,s)}},{key:"transformString",value:function(e){return this.transformers.reduce((function(e,t){return t.onString?t.onString(e):e}),e)}},{key:"transformSubstitution",value:function(e,t){return this.transformers.reduce((function(e,s){return s.onSubstitution?s.onSubstitution(e,t):e}),e)}},{key:"transformEndResult",value:function(e){return this.transformers.reduce((function(e,t){return t.onEndResult?t.onEndResult(e):e}),e)}}]),e}();var Re={separator:"",conjunction:"",serial:!1};const Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re;return{onSubstitution:function(t,s){if(Array.isArray(t)){var r=t.length,i=e.separator,n=e.conjunction,a=e.serial,o=s.match(/(\n?[^\S\n]+)$/);if(t=o?t.join(i+o[1]):t.join(i+" "),n&&r>1){var l=t.lastIndexOf(i);t=t.slice(0,l)+(a?i:"")+" "+n+t.slice(l+1)}}return t}}};function Ie(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}const ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";return{onEndResult:function(t){if("initial"===e){var s=t.match(/^[^\S\n]*(?=\S)/gm),r=s&&Math.min.apply(Math,Ie(s.map((function(e){return e.length}))));if(r){var i=new RegExp("^.{"+r+"}","gm");return t.replace(i,"")}return t}if("all"===e)return t.replace(/^[^\S\n]+/gm,"");throw new Error("Unknown type: "+e)}}};const Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{onEndResult:function(t){if(""===e)return t.trim();if("start"===(e=e.toLowerCase())||"left"===e)return t.replace(/^\s*/,"");if("end"===e||"right"===e)return t.replace(/\s*$/,"");throw new Error("Side not supported: "+e)}}};new Ce(Ae({separator:","}),ke,Te);new Ce(Ae({separator:",",conjunction:"and"}),ke,Te);new Ce(Ae({separator:",",conjunction:"or"}),ke,Te);const qe=function(e){return{onSubstitution:function(t,s){if(null==e||"string"!=typeof e)throw new Error("You need to specify a string character to split by.");return"string"==typeof t&&t.includes(e)&&(t=t.split(e)),t}}};var Ne=function(e){return null!=e&&!Number.isNaN(e)&&"boolean"!=typeof e};const Fe=function(){return{onSubstitution:function(e){return Array.isArray(e)?e.filter(Ne):Ne(e)?e:""}}};new Ce(qe("\n"),Fe,Ae,ke,Te);const Me=function(e,t){return{onSubstitution:function(s,r){if(null==e||null==t)throw new Error("replaceSubstitutionTransformer requires at least 2 arguments.");return null==s?s:s.toString().replace(e,t)}}};new Ce(qe("\n"),Ae,ke,Te,Me(/&/g,"&amp;"),Me(/</g,"&lt;"),Me(/>/g,"&gt;"),Me(/"/g,"&quot;"),Me(/'/g,"&#x27;"),Me(/`/g,"&#x60;"));const Ee=function(e,t){return{onEndResult:function(s){if(null==e||null==t)throw new Error("replaceResultTransformer requires at least 2 arguments.");return s.replace(e,t)}}};new Ce(Ee(/(?:\n(?:\s*))+/g," "),Te);new Ce(Ee(/(?:\n\s*)/g,""),Te);new Ce(Ae({separator:","}),Ee(/(?:\s+)/g," "),Te);new Ce(Ae({separator:",",conjunction:"or"}),Ee(/(?:\s+)/g," "),Te);new Ce(Ae({separator:",",conjunction:"and"}),Ee(/(?:\s+)/g," "),Te);new Ce(Ae,ke,Te);new Ce(Ae,Ee(/(?:\s+)/g," "),Te);const De=new Ce(ke,Te);const _e=new Ce(ke("all"),Te);var Qe,Pe,Oe=s("./packages/grafana-ui/src/slate-plugins/slate-prism/index.ts");const Le=[{category:"Lambda",examples:[{title:"View latency statistics for 5-minute intervals",expr:_e`filter @type = "REPORT" |
                           stats avg(@duration), max(@duration), min(@duration) by bin(5m)`},{title:"Determine the amount of overprovisioned memory",expr:De`
        filter @type = "REPORT" |
        stats max(@memorySize / 1024 / 1024) as provisonedMemoryMB,
              min(@maxMemoryUsed / 1024 / 1024) as smallestMemoryRequestMB,
              avg(@maxMemoryUsed / 1024 / 1024) as avgMemoryUsedMB,
              max(@maxMemoryUsed / 1024 / 1024) as maxMemoryUsedMB,
              provisonedMemoryMB - maxMemoryUsedMB as overProvisionedMB`},{title:"Find the most expensive requests",expr:_e`filter @type = "REPORT" |
                           fields @requestId, @billedDuration |
                           sort by @billedDuration desc`}]},{category:"VPC Flow Logs",examples:[{title:"Average, min, and max byte transfers by source and destination IP addresses",expr:"stats avg(bytes), min(bytes), max(bytes) by srcAddr, dstAddr"},{title:"IP addresses using UDP transfer protocol",expr:"filter protocol=17 | stats count(*) by srcAddr"},{title:"Top 10 byte transfers by source and destination IP addresses",expr:_e`stats sum(bytes) as bytesTransferred by srcAddr, dstAddr |
                           sort bytesTransferred desc |
                           limit 10`},{title:"Top 20 source IP addresses with highest number of rejected requests",expr:_e`filter action="REJECT" |
                           stats count(*) as numRejections by srcAddr |
                           sort numRejections desc |
                           limit 20`}]},{category:"CloudTrail",examples:[{title:"Number of log entries by service, event type, and region",expr:"stats count(*) by eventSource, eventName, awsRegion"},{title:"Number of log entries by region and EC2 event type",expr:_e`filter eventSource="ec2.amazonaws.com" |
                           stats count(*) as eventCount by eventName, awsRegion |
                           sort eventCount desc`},{title:"Regions, usernames, and ARNs of newly created IAM users",expr:_e`filter eventName="CreateUser" |
                           fields awsRegion, requestParameters.userName, responseElements.user.arn`}]},{category:"Common Queries",examples:[{title:"25 most recently added log events",expr:_e`fields @timestamp, @message |
                           sort @timestamp desc |
                           limit 25`},{title:"Number of exceptions logged every 5 minutes",expr:_e`filter @message like /Exception/ |
                           stats count(*) as exceptionCount by bin(5m) |
                           sort exceptionCount desc`},{title:"List of log events that are not exceptions",expr:"fields @message | filter @message not like /Exception/"}]},{category:"Route 53",examples:[{title:"Number of requests received every 10  minutes by edge location",expr:"stats count(*) by queryType, bin(10m)"},{title:"Number of unsuccessful requests by domain",expr:'filter responseCode="SERVFAIL" | stats count(*) by queryName'},{title:"Number of requests received every 10  minutes by edge location",expr:"stats count(*) as numRequests by resolverIp | sort numRequests desc | limit 10"}]},{category:"AWS AppSync",examples:[{title:"Number of unique HTTP status codes",expr:_e`fields ispresent(graphQLAPIId) as isApi |
                           filter isApi |
                           filter logType = "RequestSummary" |
                           stats count() as statusCount by statusCode |
                           sort statusCount desc`},{title:"Top 10 resolvers with maximum latency",expr:_e`fields resolverArn, duration |
                           filter logType = "Tracing" |
                           sort duration desc |
                           limit 10`},{title:"Most frequently invoked resolvers",expr:_e`fields ispresent(resolverArn) as isRes |
                           stats count() as invocationCount by resolverArn |
                           filter isRes |
                           filter logType = "Tracing" |
                           sort invocationCount desc |
                           limit 10`},{title:"Resolvers with most errors in mapping templates",expr:_e`fields ispresent(resolverArn) as isRes |
                           stats count() as errorCount by resolverArn, logType |
                           filter isRes and (logType = "RequestMapping" or logType = "ResponseMapping") and fieldInError |
                           sort errorCount desc |
                           limit 10`},{title:"Field latency statistics",expr:_e`fields requestId, latency |
                           filter logType = "RequestSummary" |
                           sort latency desc |
                           limit 10`},{title:"Resolver latency statistics",expr:_e`fields ispresent(resolverArn) as isRes |
                           filter isRes |
                           filter logType = "Tracing" |
                           stats min(duration), max(duration), avg(duration) as avgDur by resolverArn |
                           sort avgDur desc |
                           limit 10`},{title:"Top 10 requests with maximum latency",expr:_e`fields requestId, latency |
                           filter logType = "RequestSummary" |
                           sort latency desc |
                           limit 10`}]}];function Ve(e,t){const s=K.ZP,r=(0,Oe.a)(z().tokenize(e,s)).filter((e=>"string"!=typeof e)).map(((e,s)=>(0,h.jsx)("span",{className:`prism-token token ${e.types.join(" ")} ${e.aliases.join(" ")}`,children:e.content},`${t}-token-${s}`)));return(0,h.jsx)("div",{className:"slate-query-field",children:r})}const Ge=m.css`
  margin-top: 5px;
`;class Ue extends a.PureComponent{onClickExample(e){this.props.onClickExample(e)}renderExpression(e,t){return(0,h.jsx)("div",{className:"cheat-sheet-item__example",onClick:t=>this.onClickExample({refId:"A",expression:e,queryMode:"Logs",region:"default",id:"A"}),children:(0,h.jsx)("pre",{children:Ve(e,t)})},e)}renderLogsCheatSheet(){return(0,h.jsxs)("div",{children:[Qe||(Qe=(0,h.jsx)("h2",{children:"CloudWatch Logs Cheat Sheet"})),Le.map(((e,t)=>(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:`cheat-sheet-item__title ${(0,m.cx)(Ge)}`,children:e.category}),e.examples.map(((e,t)=>(0,h.jsxs)("div",{className:"cheat-sheet-item",children:[(0,h.jsx)("h4",{children:e.title}),this.renderExpression(e.expr,`item-${t}`)]},`item-${t}`)))]},`${e.category}-${t}`)))]})}render(){return(0,h.jsxs)("div",{children:[Pe||(Pe=(0,h.jsx)("h3",{children:"CloudWatch Logs cheat sheet"})),Le.map(((e,t)=>(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:`cheat-sheet-item__title ${(0,m.cx)(Ge)}`,children:e.category}),e.examples.map(((e,t)=>(0,h.jsxs)("div",{className:"cheat-sheet-item",children:[(0,h.jsx)("h4",{children:e.title}),this.renderExpression(e.expr,`item-${t}`)]},`item-${t}`)))]},`cat-${t}`)))]})}}var $e=s("./public/app/features/live/measurements/measurementsSupport.ts");const Be=new n.DataSourcePlugin(de).setQueryEditorHelp(Ue).setConfigEditor((e=>{const{options:t}=e,s=function(e){const[t,s]=(0,a.useState)();return(0,a.useEffect)((()=>{(0,u.ak)().loadDatasource(e).then((e=>s(e)))}),[e]),t}(t.name);return function(e){const t=e=>{c.h.dispatch((0,d.$l)((0,p.ZR)("CloudWatch Authentication",e)))};(0,a.useEffect)((()=>{"arn"===e.authType?t('Since grafana 7.3 authentication type "arn" is deprecated, falling back to default SDK provider'):"credentials"!==e.authType||e.profile||e.database||t('As of grafana 7.3 authentication type "credentials" should be used only for shared file credentials.              If you don\'t have a credentials file, switch to the default SDK provider for extracting credentials              from environment variables or IAM roles')}),[e.authType,e.database,e.profile])}(t.jsonData),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.ConnectionConfig,Object.assign({},e,{loadRegions:s&&(()=>s.getRegions().then((e=>e.filter((e=>"default"!==e.value)).map((e=>e.value))))),children:(0,h.jsx)(o.InlineField,{label:"Namespaces of Custom Metrics",labelWidth:28,tooltip:"Namespaces of Custom Metrics.",children:(0,h.jsx)(o.Input,{width:60,placeholder:"Namespace1,Namespace2",value:t.jsonData.customMetricsNamespaces||"",onChange:(0,n.onUpdateDatasourceJsonDataOption)(e,"customMetricsNamespaces")})})})),(0,h.jsx)(y,{onChange:t=>(0,n.updateDatasourcePluginJsonDataOption)(e,"tracingDatasourceUid",t),datasourceUid:t.jsonData.tracingDatasourceUid})]})})).setQueryEditor(xe.S).setExploreMetricsQueryField(xe.S).setExploreLogsQueryField(be.b).setAnnotationQueryCtrl(me).setChannelSupport(new $e.Y)}}]);
//# sourceMappingURL=cloudwatchPlugin.0e7ce18a6cf0f8775a65.js.map