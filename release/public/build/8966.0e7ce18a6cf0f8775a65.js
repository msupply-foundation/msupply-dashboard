/*! For license information please see 8966.0e7ce18a6cf0f8775a65.js.LICENSE.txt */
(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8966],{"./packages/grafana-data/src/dataframe/ArrayDataFrame.ts":(e,t,s)=>{"use strict";s.d(t,{i:()=>c});var a=s("./packages/grafana-data/src/vector/vectorToArray.ts"),n=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),i=s("./packages/grafana-data/src/vector/FunctionalVector.ts");function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o=e=>e;class l{constructor(e,t){r(this,"converter",o),this.source=e,this.prop=t}get length(){return this.source.length}get(e){return this.converter(this.source[e][this.prop])}toArray(){return(0,a.n)(this)}toJSON(){return(0,a.n)(this)}}class c extends i.G{constructor(e,t){super(),r(this,"name",void 0),r(this,"refId",void 0),r(this,"meta",void 0),r(this,"fields",[]),r(this,"length",0),this.source=e,this.length=e.length;const s=e.length?e[0]:{};t?this.fields=t.map((t=>({name:t,type:(0,n._m)(t,s[t]),config:{},values:new l(e,t)}))):this.setFieldsFromObject(s)}setFieldsFromObject(e){this.fields=Object.keys(e).map((t=>({name:t,type:(0,n._m)(t,e[t]),config:{},values:new l(this.source,t)})))}setFieldType(e,t,s){let a=this.fields.find((t=>t.name===e));return a?a.type=t:(a={name:e,type:t,config:{},values:new l(this.source,e)},this.fields.push(a)),a.values.converter=null!=s?s:o,a}get(e){return this.source[e]}toJSON(){return(0,n.og)(this)}}},"./packages/grafana-data/src/dataframe/DataFrameJSON.ts":(e,t,s)=>{"use strict";s.d(t,{Jy:()=>l,vP:()=>d,Y:()=>u});var a=s("./packages/grafana-data/src/types/index.ts"),n=s("./packages/grafana-data/src/vector/index.ts"),i=s("./packages/grafana-data/src/dataframe/processDataFrame.ts");const r=["values"];const o={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function l(e,t){if(e&&t)for(const s in e){const a=o[s];for(const n of e[s])n<t.length&&(t[n]=a)}}function c(e,t){for(const s of t)if(null!=s)return(0,i._m)(e,s);return a.fS.other}function d(e){const{schema:t,data:s}=e;if(!t||!t.fields)throw new Error("JSON needs a fields definition");const a=s?s.values.reduce(((e,t)=>Math.max(e,t.length)),0):0,i=t.fields.map(((e,t)=>{var i,r,o;let d,u=s?s.values[t]:[],p=u.length;return p!==a&&(u.length=a,u.fill(void 0,p)),(d=s&&s.entities&&s.entities[t])&&l(d,u),Object.assign({},e,{type:null!==(i=e.type)&&void 0!==i?i:c(e.name,u),config:null!==(r=e.config)&&void 0!==r?r:{},values:new n.Gt(u),entities:null!==(o=d)&&void 0!==o?o:{}})}));return Object.assign({},t,{fields:i,length:a})}function u(e){const t={values:[]};return{schema:{refId:e.refId,meta:e.meta,name:e.name,fields:e.fields.map((e=>{const{values:s}=e,a=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,r);return t.values.push(s.toArray()),a}))},data:t}}},"./packages/grafana-data/src/dataframe/DataFrameView.ts":(e,t,s)=>{"use strict";s.d(t,{U:()=>i});var a=s("./packages/grafana-data/src/vector/FunctionalVector.ts");function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i extends a.G{constructor(e){super(),n(this,"index",0),n(this,"obj",void 0),this.data=e;const t={};for(let s=0;s<e.fields.length;s++){const a=e.fields[s],n=()=>a.values.get(this.index);t.hasOwnProperty(a.name)||Object.defineProperty(t,a.name,{enumerable:!0,get:n}),Object.defineProperty(t,s,{enumerable:!1,get:n})}this.obj=t}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(e){if(!this.dataFrame||!this.dataFrame.fields)return;const t=this.dataFrame.fields[e];return t&&t.display?t.display:void 0}get(e){return this.index=e,this.obj}toArray(){return new Array(this.data.length).fill(0).map(((e,t)=>Object.assign({},this.get(t))))}}},"./packages/grafana-data/src/dataframe/MutableDataFrame.ts":(e,t,s)=>{"use strict";s.d(t,{Y:()=>d,v:()=>u});var a=s("./packages/grafana-data/src/types/dataFrame.ts"),n=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),i=s("./node_modules/lodash/lodash.js");function r(e,t){return t.type||("time"===t.name||"Time"===t.name?t.type=a.fS.time:t.type=(0,n.LI)(e)),t.type===a.fS.number?e=>parseFloat(e):t.type===a.fS.boolean?e=>!("F"===e[0]||"f"===e[0]||"0"===e[0]):e=>e}var o=s("./packages/grafana-data/src/vector/ArrayVector.ts"),l=s("./packages/grafana-data/src/vector/FunctionalVector.ts");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=void 0;class u extends l.G{constructor(e,t){if(super(),c(this,"name",void 0),c(this,"refId",void 0),c(this,"meta",void 0),c(this,"fields",[]),c(this,"first",new o.G),c(this,"creator",void 0),this.creator=t||(e=>new o.G(e)),e){const{name:t,refId:s,meta:a,fields:n}=e;if(t&&(this.name=t),s&&(this.refId=s),a&&(this.meta=a),n)for(const e of n)this.addField(e)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(e,t){return this.addField({name:t||"",type:(0,n.LI)(e)})}addField(e,t){let s;e.values&&(s=Array.isArray(e.values)?e.values:e.values.toArray());let i=e.type;i||"time"!==e.name&&"Time"!==e.name?(!i&&s&&s.length&&(i=(0,n.LI)(s[0])),i||(i=a.fS.other)):i=a.fS.time;let r=e.name;r||(r=`Field ${this.fields.length+1}`);const o=Object.assign({},e,{name:r,type:i,config:e.config||{},values:this.creator(s)});if(i===a.fS.other&&(i=(0,n.fu)(o),i&&(o.type=i)),this.fields.push(o),this.first=this.fields[0].values,t)for(;o.values.length<t;)o.values.add(d);else this.validate();return o}validate(){const e=this.fields.reduce(((e,t)=>Math.max(e,t.values.length)),0);for(const t of this.fields)for(;t.values.length!==e;)t.values.add(d)}reverse(){for(const e of this.fields)e.values.reverse()}appendRow(e){for(let t=this.fields.length;t<e.length;t++)this.addField({name:`Field ${t+1}`,type:(0,n.LI)(e[t])});if(this.length<1)for(let t=0;t<this.fields.length;t++){const s=this.fields[t];s.type&&s.type!==a.fS.other||(s.type=(0,n.LI)(e[t]))}for(let t=0;t<this.fields.length;t++){const s=this.fields[t];let n=e[t];s.type!==a.fS.string&&(0,i.isString)(n)&&(s.parse||(s.parse=r(n,s)),n=s.parse(n)),s.values.add(n)}}add(e){const t=e;for(const e of this.fields){let s=t[e.name];e.type!==a.fS.string&&(0,i.isString)(s)&&(e.parse||(e.parse=r(s,e)),s=e.parse(s)),void 0===s&&(s=d),e.values.add(s)}}set(e,t){if(e>this.length)throw new Error("Unable ot set value beyond current length");const s=t||{};for(const t of this.fields)t.values.set(e,s[t.name])}get(e){const t={};for(const s of this.fields)t[s.name]=s.values.get(e);return t}toJSON(){return(0,n.og)(this)}}},"./packages/grafana-data/src/dataframe/StreamingDataFrame.ts":(e,t,s)=>{"use strict";s.d(t,{T0:()=>c,Av:()=>u,MB:()=>p});var a=s("./packages/grafana-data/src/types/index.ts"),n=s("./packages/grafana-data/src/vector/index.ts"),i=s("./packages/grafana-data/src/dataframe/DataFrameJSON.ts"),r=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),o=s("./packages/grafana-data/src/transformations/transformers/joinDataFrames.ts");function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let c;var d;!function(e){e.Append="append",e.Replace="replace"}(c||(c={})),function(e){e[e.wide=0]="wide",e[e.labels=1]="labels"}(d||(d={}));class u{constructor(e,t){l(this,"name",void 0),l(this,"refId",void 0),l(this,"meta",{}),l(this,"fields",[]),l(this,"length",0),l(this,"options",void 0),l(this,"schemaFields",[]),l(this,"timeFieldIndex",-1),l(this,"pushMode",d.wide),l(this,"alwaysReplace",!1),l(this,"labels",new Set),l(this,"packetInfo",{number:0,action:c.Replace,length:0}),this.options=Object.assign({maxLength:1e3,maxDelta:1/0},t),this.alwaysReplace=this.options.action===c.Replace,this.push(e)}push(e){const{schema:t,data:s}=e;if(this.packetInfo.number++,t){this.pushMode=d.wide,this.timeFieldIndex=t.fields.findIndex((e=>e.type===a.fS.time)),1===this.timeFieldIndex&&"labels"===t.fields[0].name&&t.fields[0].type===a.fS.string&&(this.pushMode=d.labels,this.timeFieldIndex=0);const e=this.pushMode===d.labels?t.fields.slice(1):t.fields;if(this.refId=t.refId,t.meta&&(this.meta=Object.assign({},t.meta)),function(e,t){if((null==e?void 0:e.length)!==t.length)return!1;for(let s=0;s<e.length;s++){const a=e[s],n=t[s];if(a.name!==n.name||a.type!==n.type)return!1}return!0}(this.schemaFields,e)){const t=e.length;this.fields.forEach(((s,a)=>{var n;const i=e[a%t];s.config=null!==(n=i.config)&&void 0!==n?n:{},s.labels=i.labels}))}else{const t=this.pushMode===d.wide;this.fields=e.map((e=>{var s,i,r,o;return{config:null!==(s=e.config)&&void 0!==s?s:{},name:e.name,labels:e.labels,type:null!==(i=e.type)&&void 0!==i?i:a.fS.other,values:t&&null!==(r=null===(o=this.fields.find((t=>t.name===e.name&&e.type===t.type)))||void 0===o?void 0:o.values)&&void 0!==r?r:new n.Gt}}))}this.schemaFields=e}if(s&&s.values.length&&s.values[0].length){let{values:e,entities:t}=s;if(t&&t.forEach(((t,s)=>{t&&(0,i.Jy)(t,e[s])})),this.pushMode===d.labels){const t=function(e){let t=new Set(e[0]),s=new Map;t.forEach((t=>{let a=Array(e.length-1).fill(null).map((()=>[]));s.set(t,a)}));for(let t=0;t<e[0].length;t++){let a=s.get(e[0][t]);for(let s=1;s<e.length;s++)a[s-1].push(e[s][t])}return s}(e);for(const e of t.keys())this.labels.has(e)||this.addLabel(e);let s=Array(this.schemaFields.length).fill([]),a=[];this.labels.forEach((e=>{var n;a.push(null!==(n=t.get(e))&&void 0!==n?n:s)})),e=(0,o.v_)(a)}if(e.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, recieved: ${e.length} (labels=${this.pushMode===d.labels})`);this.fields=e.map(((e,t)=>{let s=`Field ${t}`,i=(0,r.LI)(e[0]);return 0===t&&i===a.fS.number&&e[0]>1600016688632&&(i=a.fS.time,s="Time"),{name:s,type:i,config:{},values:new n.Gt([])}}))}let l=e;this.packetInfo.length=e[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=c.Replace:(this.packetInfo.action=c.Append,l=this.fields.map((e=>e.values.buffer)),function(e,t,s=1/0,a=0,n=1/0){for(let s=0;s<e.length;s++)e[s]=e[s].concat(t[s]);const i=e[0].length;let r=0;i>s&&(r=i-s);if(n!==1/0&&a>=0){const t=e[a],s=t[r],o=t[i-1];o-s>n&&(r=function(e,t,s,a){let n;s=s||0;let i=(a=a||t.length-1)<=2147483647;for(;a-s>1;)n=i?s+a>>1:Math.floor((s+a)/2),t[n]<e?s=n:a=n;if(e-t[s]<=t[a]-e)return s;return a}(o-n,t,r))}if(r)for(let t=0;t<e.length;t++)e[t]=e[t].slice(r)}(l,e,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),l.forEach(((e,t)=>{const{state:s,values:a}=this.fields[t];a.buffer=e,s&&(s.calcs=void 0)})),this.length=l[0].length}}addLabel(e){let t=this.labels.size;const s={};if(e.length&&e.split(",").forEach((e=>{const[t,a]=e.trim().split("=");s[t]=a})),0===t)this.fields.forEach(((e,t)=>{t>0&&(e.labels=s)}));else for(let e=1;e<this.schemaFields.length;e++){var a;let t=this.schemaFields[e];this.fields.push(Object.assign({},t,{config:null!==(a=t.config)&&void 0!==a?a:{},labels:s,values:new n.Gt(Array(this.length).fill(void 0))}))}this.labels.add(e)}}function p(e){const t=e.packetInfo;return null!=t&&t.action?t:void 0}},"./packages/grafana-data/src/dataframe/index.ts":(e,t,s)=>{"use strict";s.d(t,{iB:()=>b.i,a2:()=>c,US:()=>a.U,N:()=>r,Yi:()=>o.Y,vA:()=>o.v,Av:()=>x.Av,T0:()=>x.T0,Zs:()=>x.StreamingFrameOptions,m$:()=>S.m$,nl:()=>w,Ch:()=>y,q2:()=>u,vP:()=>v.vP,Y:()=>v.Y,Jy:()=>v.Jy,r7:()=>m,$q:()=>h,GV:()=>p,fh:()=>d.fh,YP:()=>f,sV:()=>d.sV,jC:()=>g,fu:()=>d.fu,_m:()=>d._m,LI:()=>d.LI,SX:()=>d.SX,aY:()=>d.aY,Ji:()=>d.Ji,Y6:()=>d.Y6,Vv:()=>k,aK:()=>d.aK,g0:()=>d.g0,og:()=>d.og,Zr:()=>d.Zr});var a=s("./packages/grafana-data/src/dataframe/DataFrameView.ts"),n=s("./packages/grafana-data/src/index.ts");function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e){i(this,"fields",[]),i(this,"fieldByName",{}),i(this,"fieldByType",{}),this.fields=e.fields.map(((e,t)=>Object.assign({},e,{index:t})));for(let t=0;t<e.fields.length;t++){const s=e.fields[t];if(s.type===n.FieldType.other){const e=(0,n.guessFieldTypeForField)(s);e&&(s.type=e)}this.fieldByType[s.type]||(this.fieldByType[s.type]=[]),this.fieldByType[s.type].push(Object.assign({},s,{index:t})),this.fieldByName[s.name]?console.warn("Duplicate field names in DataFrame: ",s.name):this.fieldByName[s.name]=Object.assign({},s,{index:t})}}getFields(e){if(!e)return[...this.fields];const t=this.fieldByType[e];return t?[...t]:[]}hasFieldOfType(e){const t=this.fieldByType[e];return t&&t.length>0}getFirstFieldOfType(e,t=!1){return this.fieldByType[e].find((e=>{var s;return t||!(null!==(s=e.config.custom)&&void 0!==s&&s.hidden)}))}hasFieldNamed(e){return!!this.fieldByName[e]}hasFieldWithNameAndType(e,t){return!!this.fieldByName[e]&&this.fieldByType[t].filter((t=>t.name===e)).length>0}getFieldByName(e){return this.fieldByName[e]}getFieldsByLabel(e,t){return Object.values(this.fieldByName).filter((s=>s.labels&&s.labels[e]===t))}}var o=s("./packages/grafana-data/src/dataframe/MutableDataFrame.ts"),l=s("./packages/grafana-data/src/vector/CircularVector.ts");class c extends o.v{constructor(e){super(void 0,(t=>new l.d(Object.assign({},e,{buffer:t}))))}}var d=s("./packages/grafana-data/src/dataframe/processDataFrame.ts");const u=(e,t)=>({name:e,columns:t}),p=e=>e.columns,h=(e,t)=>e.columns[t],g=(e,t,s)=>e.columns[t].values.get(s),m=(e,t,s)=>e.columns.map((e=>e.values.get(s))),f=(e,t)=>e[t];var b=s("./packages/grafana-data/src/dataframe/ArrayDataFrame.ts"),v=s("./packages/grafana-data/src/dataframe/DataFrameJSON.ts"),x=s("./packages/grafana-data/src/dataframe/StreamingDataFrame.ts");function y(e,t,s){var a,n;if(e===t)return!0;if((null==e||null===(a=e.fields)||void 0===a?void 0:a.length)!==(null==t||null===(n=t.fields)||void 0===n?void 0:n.length))return!1;if(e.name!==t.name)return!1;for(let a=0;a<e.fields.length;a++){const n=e.fields[a],i=t.fields[a];if(n.type!==i.type||n.name!==i.name)return!1;if(s)continue;if(n.labels&&i.labels&&!k(n.labels,i.labels))return!1;const r=n.config,o=i.config;let l=Object.keys(r),c=Object.keys(o);if(l.length!==c.length)return!1;for(const e of l){if(!(e in o))return!1;if("custom"===e){if(!k(r[e],o[e]))return!1}else if(r[e]!==o[e])return!1}}return!0}function w(e,t,s){if(e===t)return!0;if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;for(let a=0;a<e.length;a++)if(!s(e[a],t[a]))return!1;return!0}const j=(e,t)=>e===t;function k(e,t,s=j){if(e===t)return!0;const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(let n of a)if(!s(e[n],t[n]))return!1;return!0}var S=s("./packages/grafana-data/src/dataframe/utils.ts")},"./packages/grafana-data/src/dataframe/processDataFrame.ts":(e,t,s)=>{"use strict";s.d(t,{fh:()=>E,sV:()=>_,fu:()=>I,_m:()=>N,LI:()=>O,SX:()=>P,aY:()=>F,Ji:()=>M,Y6:()=>L,aK:()=>$,g0:()=>A,og:()=>R,Zr:()=>D});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/types/index.ts"),i=s("./packages/grafana-data/src/datetime/moment_wrapper.ts"),r=s("./packages/grafana-data/src/vector/ArrayVector.ts"),o=s("./packages/grafana-data/src/dataframe/MutableDataFrame.ts"),l=s("./packages/grafana-data/src/vector/SortedVector.ts"),c=s("./packages/grafana-data/src/dataframe/ArrayDataFrame.ts"),d=s("./packages/grafana-data/src/field/fieldState.ts"),u=s("./packages/grafana-data/src/types/dataFrame.ts"),p=s("./packages/grafana-data/src/datetime/index.ts");const h=(e,t)=>e&&t?(0,a.isNumber)(e)&&(0,a.isNumber)(t)?g(e,t):(0,p.CQ)(e).isBefore(t)?-1:(0,p.CQ)(t).isBefore(e)?1:0:b(e,t),g=(e,t)=>e-t,m=(e,t)=>e&&t?e.localeCompare(t):b(e,t),f=(e,t)=>b(e,t),b=(e,t)=>!e&&t?1:e&&!t?-1:0,v=(e,t)=>(s,a)=>{const n=e.get(s),i=e.get(a);return t?h(i,n):h(n,i)},x=(e,t)=>(s,a)=>{const n=e.get(s),i=e.get(a);return t?f(i,n):f(n,i)},y=(e,t)=>(s,a)=>{const n=e.get(s),i=e.get(a);return t?g(i,n):g(n,i)},w=(e,t)=>(s,a)=>{const n=e.get(s),i=e.get(a);return t?m(i,n):m(n,i)},j=e=>(t,s)=>e?g(s,t):g(t,s);var k=s("./packages/grafana-data/src/vector/vectorToArray.ts");const S=["text","type"];function C(e){const t=e.columns.map((e=>{const t=e,{text:s,type:a}=t;return{name:s,config:function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,S)||{},values:new r.G,type:a&&Object.values(n.fS).includes(a)?a:n.fS.other}}));if(!(0,a.isArray)(e.rows))throw new Error(`Expected table rows to be array, got ${typeof e.rows}.`);for(const s of e.rows)for(let e=0;e<t.length;e++)t[e].values.buffer.push(s[e]);for(const e of t)if(e.type===n.fS.other){const t=I(e);t&&(e.type=t)}return{fields:t,refId:e.refId,meta:e.meta,name:e.name,length:e.rows.length}}const T=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function N(e,t){return!e||"date"!==(e=e.toLowerCase())&&"time"!==e?O(t):n.fS.time}function O(e){return e instanceof Date||(0,i.v9)(e)?n.fS.time:(0,a.isNumber)(e)?n.fS.number:(0,a.isString)(e)?T.test(e)?n.fS.number:"true"===e||"TRUE"===e||"True"===e||"false"===e||"FALSE"===e||"False"===e?n.fS.boolean:n.fS.string:(0,a.isBoolean)(e)?n.fS.boolean:n.fS.other}function I(e){if(e.name){const t=e.name.toLowerCase();if("date"===t||"time"===t)return n.fS.time}for(let t=0;t<e.values.length;t++){const s=e.values.get(t);if(null!==s)return O(s)}}const P=(e,t=!1)=>{for(const s of e.fields)if(!s.type||s.type===n.fS.other||t)return Object.assign({},e,{fields:e.fields.map((e=>e.type&&e.type!==n.fS.other&&!t?e:Object.assign({},e,{type:I(e)||n.fS.other})))});return e},M=e=>e&&e.hasOwnProperty("columns"),F=e=>e&&e.hasOwnProperty("fields");function A(e){if("fields"in e)return"length"in e?e:new o.v(e);if(e.hasOwnProperty("type")&&"docs"===e.type)return function(e){const t=[{name:e.target,type:n.fS.other,labels:e.tags,config:{unit:e.unit,filterable:e.filterable},values:new r.G}];for(const s of e.datapoints)t[0].values.buffer.push(s);return{name:e.target,refId:e.target,meta:{json:!0},fields:t,length:e.datapoints.length}}(e);if(e.hasOwnProperty("datapoints")||e.hasOwnProperty("points"))return function(e){const t=[],s=[],a=e.datapoints||e.points;for(const e of a)s.push(e[0]),t.push(e[1]);const i=[{name:n.Ls,type:n.fS.time,config:{},values:new r.G(t)},{name:n.M5,type:n.fS.number,config:{unit:e.unit},values:new r.G(s),labels:e.tags}];return e.title&&(i[1].config.displayNameFromDS=e.title),{name:e.target||e.name,refId:e.refId,meta:e.meta,fields:i,length:s.length}}(e);if(e.hasOwnProperty("data"))return function(e){const t=new r.G,s=new r.G;for(let a=0;a<e.data.length;a++){const n=e.data[a];t.buffer.push(n[1]),s.buffer.push(n[0])}return{name:e.label,fields:[{name:e.label||n.M5,type:n.fS.number,config:{},values:t},{name:n.Ls,type:n.fS.time,config:{unit:"dateTimeAsIso"},values:s}],length:t.buffer.length}}(e);if(e.hasOwnProperty("columns"))return C(e);if(Array.isArray(e))return new c.i(e);throw console.warn("Can not convert",e),new Error("Unsupported data format")}const D=e=>{const{fields:t}=e,s=e.length,a=[];if(2===t.length){const{timeField:n,timeIndex:i}=_(e);if(n){const n=t[0===i?1:0],r=t[i];for(let e=0;e<s;e++)a.push([n.values.get(e),r.values.get(e)]);return{alias:e.name,target:(0,d.C)(n,e),datapoints:a,unit:t[0].config?t[0].config.unit:void 0,refId:e.refId,meta:e.meta}}}for(let e=0;e<s;e++){const s=[];for(let a=0;a<t.length;a++)s.push(t[a].values.get(e));a.push(s)}return e.meta&&e.meta.json?{alias:t[0].name||e.name,target:t[0].name||e.name,datapoints:t[0].values.toArray(),filterable:t[0].config?t[0].config.filterable:void 0,type:"docs"}:{columns:t.map((e=>{const{name:t,config:s}=e;if(s){const e=Object.assign({},s);return e.text=t,e}return{text:t}})),type:"table",refId:e.refId,meta:e.meta,rows:a}};function $(e,t,s=!1){const a=e.fields[t];if(!a)return e;const n=[];for(let t=0;t<e.length;t++)n.push(t);const i=((e,t=!1)=>{const s=e.values;switch(e.type){case u.fS.number:return y(s,t);case u.fS.string:return w(s,t);case u.fS.boolean:return x(s,t);case u.fS.time:return v(s,t);default:return j(t)}})(a,s);return n.sort(i),Object.assign({},e,{fields:e.fields.map((e=>Object.assign({},e,{values:new l.o(e.values,n)})))})}function L(e){return Object.assign({},e,{fields:e.fields.map((e=>{const t=[...e.values.toArray()];return t.reverse(),Object.assign({},e,{values:new r.G(t)})}))})}function E(e,t){const s=[];for(const a of e.fields)s.push(a.values.get(t));return s}function R(e){return{fields:e.fields.map((e=>{let t=e.values.toArray();return t instanceof Float64Array&&(t=(0,k.n)(e.values)),{name:e.name,type:e.type,config:e.config,values:t,labels:e.labels}})),refId:e.refId,meta:e.meta,name:e.name}}const _=e=>{for(let t=0;t<e.fields.length;t++)if(e.fields[t].type===n.fS.time)return{timeField:e.fields[t],timeIndex:t};return{}}},"./packages/grafana-data/src/dataframe/utils.ts":(e,t,s)=>{"use strict";s.d(t,{hZ:()=>i,m$:()=>r});var a=s("./packages/grafana-data/src/types/dataFrame.ts"),n=s("./packages/grafana-data/src/dataframe/processDataFrame.ts");function i(e){return!e.find((e=>!function(e){return!(e.fields.length>2)&&Boolean(e.fields.find((e=>e.type===a.fS.time)))}(e)))}function r(e){for(let t=0;t<e.length;t++){const s=(0,n.sV)(e[t]);if(void 0!==s.timeField&&void 0!==s.timeIndex)return!0}return!1}},"./packages/grafana-data/src/datetime/common.ts":(e,t,s)=>{"use strict";s.d(t,{K:()=>i,Z:()=>r});var a=s("./packages/grafana-data/src/types/time.ts");let n=()=>a.Ys;const i=e=>{n=null!=e?e:n},r=e=>{var t,s;return null!==(t=null!==(s=null==e?void 0:e.timeZone)&&void 0!==s?s:n())&&void 0!==t?t:a.Ys}},"./packages/grafana-data/src/datetime/datemath.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{isMathString:()=>r,parse:()=>o,isValid:()=>l,parseDateMath:()=>c,roundToFiscal:()=>d});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/datetime/moment_wrapper.ts");const i=["y","M","w","d","h","m","s","Q"];function r(e){return!!e&&!("string"!=typeof e||"now"!==e.substring(0,3)&&!e.includes("||"))}function o(e,t,s,i){if(e){if("string"!=typeof e)return(0,n.v9)(e)?e:(0,a.isDate)(e)?(0,n.CQ)(e):void 0;{let a,r,o,l="";return"now"===e.substring(0,3)?(a=(0,n.GY)(s),l=e.substring("now".length)):(r=e.indexOf("||"),-1===r?(o=e,l=""):(o=e.substring(0,r),l=e.substring(r+2)),a=(0,n.CQ)(o,n.VJ)),l.length?c(l,a,t,i):a}}}function l(e){const t=o(e);return!!t&&(!!(0,n.v9)(t)&&t.isValid())}function c(e,t,s,n=0){const r=e.replace(/\s/g,""),o=t;let l=0;const c=r.length;for(;l<c;){const e=r.charAt(l++);let t,c,u,p=!1;if("/"===e)t=0;else if("+"===e)t=1;else{if("-"!==e)return;t=2}if(isNaN(parseInt(r.charAt(l),10)))c=1;else if(2===r.length)c=parseInt(r.charAt(l),10);else{const e=l;for(;!isNaN(parseInt(r.charAt(l),10));)if(l++,l>10)return;c=parseInt(r.substring(e,l),10)}if(0===t&&1!==c)return;if(u=r.charAt(l++),"f"===u&&(u=r.charAt(l++),p=!0),!(0,a.includes)(i,u))return;0===t?s?p?d(n,o,u,s):o.endOf(u):p?d(n,o,u,s):o.startOf(u):1===t?o.add(c,u):2===t&&o.subtract(c,u)}return o}function d(e,t,s,a){switch(s){case"y":return a?d(e,t,s,!1).add(11,"M").endOf("M"):t.subtract((t.month()-e+12)%12,"M").startOf("M"),t;case"Q":return a?d(e,t,s,!1).add(2,"M").endOf("M"):t.subtract((t.month()-e+3)%3,"M").startOf("M"),t;default:return}}},"./packages/grafana-data/src/datetime/formats.ts":(e,t,s)=>{"use strict";function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{zf:()=>i,Ji:()=>r,U6:()=>o});const n="YYYY-MM-DD HH:mm:ss";class i{constructor(){a(this,"fullDate",n),a(this,"interval",{second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"})}update(e){this.fullDate=e.fullDate,this.interval=e.interval,e.useBrowserLocale&&this.useBrowserLocale()}get fullDateMS(){return this.fullDate.replace("ss","ss.SSS")}useBrowserLocale(){this.fullDate=r({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.interval.second=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=r({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=r({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=r({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=r({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(e){return`time:${e?this.fullDateMS:this.fullDate}`}}function r(e,t,s){if(l())return null!=s?s:n;!t&&navigator&&(t=[...navigator.languages]);const a=new Intl.DateTimeFormat(t||void 0,e),i=a.formatToParts(new Date),r={year:"YYYY",month:"MM",day:"DD",hour:a.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return i.map((e=>r[e.type]||e.value)).join("")}const o=new i,l=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},"./packages/grafana-data/src/datetime/formatter.ts":(e,t,s)=>{"use strict";s.d(t,{dq:()=>o,lf:()=>l,E8:()=>c,Fm:()=>d,Hk:()=>u});var a=s("./node_modules/moment-timezone/index.js"),n=s.n(a),i=s("./packages/grafana-data/src/datetime/formats.ts"),r=s("./packages/grafana-data/src/datetime/common.ts");const o=(e,t)=>h(e,(0,r.Z)(t)).format(p(t)),l=(e,t)=>h(e,(0,r.Z)(t)).format(),c=(e,t)=>h(e,(0,r.Z)(t)).fromNow(),d=(e,t)=>h(e,(0,r.Z)(t)).format(`${i.U6.fullDate} z`),u=(e,t)=>h(e,(0,r.Z)(t)).format("z"),p=e=>{var t,s;return null!=e&&e.defaultWithMS?null!==(s=null==e?void 0:e.format)&&void 0!==s?s:i.U6.fullDateMS:null!==(t=null==e?void 0:e.format)&&void 0!==t?t:i.U6.fullDate},h=(e,t)=>{const s=e,a=n().tz.zone(t);if(a&&a.name)return n().utc(s).tz(a.name);switch(t){case"utc":return n().utc(s);default:return n().utc(s).local()}}},"./packages/grafana-data/src/datetime/index.ts":(e,t,s)=>{"use strict";s.d(t,{Nz:()=>c.DateTimeOptions,VJ:()=>i.VJ,RQ:()=>d,zf:()=>x.zf,qb:()=>c.TimeZoneResolver,Ks:()=>N,Rn:()=>a,CQ:()=>i.CQ,C_:()=>i.C_,GY:()=>i.GY,dq:()=>y.dq,lf:()=>y.lf,E8:()=>y.E8,Fm:()=>y.Fm,J:()=>w.J,iX:()=>O,Kd:()=>i.Kd,k4:()=>i.k4,Ze:()=>c.Z,$8:()=>g,Pr:()=>p,ZV:()=>h,vT:()=>C,v9:()=>i.v9,AI:()=>I,jO:()=>P,IA:()=>M,Ji:()=>x.Ji,RA:()=>T,cT:()=>n,i_:()=>i.i_,K7:()=>c.K,U6:()=>x.U6,Hk:()=>y.Hk,Vs:()=>u,np:()=>i.Ks,zh:()=>i.zh});var a=s("./packages/grafana-data/src/datetime/datemath.ts"),n=s("./packages/grafana-data/src/datetime/rangeutil.ts"),i=s("./packages/grafana-data/src/datetime/moment_wrapper.ts"),r=s("./node_modules/moment-timezone/index.js"),o=s.n(r),l=s("./node_modules/lodash/lodash.js"),c=s("./packages/grafana-data/src/datetime/common.ts");let d;!function(e){e.default="",e.localBrowserTime="browser",e.utc="utc"}(d||(d={}));const u=e=>{switch((0,c.Z)({timeZone:e})){case"browser":return"Local browser time";case"utc":return"UTC";default:return e}},p=(e,t)=>{const s=m(e,t);return s||f(e,t)},h=(0,l.memoize)(((e=!1)=>{const t=[];return e&&t.push.apply(t,[d.default,d.localBrowserTime,d.utc]),o().tz.names().reduce(((e,t)=>{const s=v[t];return Array.isArray(s)&&0!==s.length?(e.push(t),e):e}),t)})),g=(0,l.memoize)(((e=!1)=>{const t=h(e).reduce(((e,t)=>{var s;const a=t.indexOf("/");if(-1===a){var n;const s="";return e[s]=null!==(n=e[s])&&void 0!==n?n:[],e[s].push(t),e}const i=t.substr(0,a);return e[i]=null!==(s=e[i])&&void 0!==s?s:[],e[i].push(t),e}),{});return Object.keys(t).map((e=>({name:e,zones:t[e]})))})),m=(e,t)=>{switch(e){case d.utc:return{name:"Coordinated Universal Time",ianaName:"UTC",zone:e,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case d.default:{var s,a;const n=(0,c.Z)(),i=null!==(s="browser"===n||"utc"===n?m(n,t):f(n,t))&&void 0!==s?s:{};return Object.assign({countries:null!==(a=v[n])&&void 0!==a?a:[],abbreviation:"",offsetInMins:0},i,{ianaName:i.ianaName,name:"Default",zone:e})}case d.localBrowserTime:{var n,i;const s=o().tz.guess(!0),a=null!==(n=f(s,t))&&void 0!==n?n:{};return Object.assign({countries:null!==(i=v[s])&&void 0!==i?i:[],abbreviation:"Your local time",offsetInMins:(new Date).getTimezoneOffset()},a,{name:"Browser Time",ianaName:a.ianaName,zone:e})}default:return}},f=(e,t)=>{var s;const a=o().tz.zone(e);var n;if(a)return{name:e,ianaName:a.name,zone:e,countries:null!==(s=v[e])&&void 0!==s?s:[],abbreviation:(n=a.abbr(t),/^(\+|\-).+/.test(n)?"":n),offsetInMins:a.utcOffset(t)}},b={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory (Occupied)",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},v=o().tz.countries().reduce(((e,t)=>o().tz.zonesForCountry(t).reduce(((e,s)=>{e[s]||(e[s]=[]);const a=b[t];return a?(e[s].push({code:t,name:a}),e):e}),e)),{});var x=s("./packages/grafana-data/src/datetime/formats.ts"),y=s("./packages/grafana-data/src/datetime/formatter.ts"),w=s("./packages/grafana-data/src/datetime/parser.ts"),j=s("./packages/grafana-data/node_modules/date-fns/esm/intervalToDuration/index.js"),k=s("./packages/grafana-data/node_modules/date-fns/esm/add/index.js");const S={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function C(e,t=!0){const s=(0,j.Z)(e);return Object.entries(s).reduce(((e,[s,a])=>{if(a&&0!==a&&("seconds"!==s||t||!e)){return e+`${""!==e?" ":""}${a}${S[s][0]}`}return e}),"")}function T(e){return e.split(" ").reduce(((e,t)=>{var s;const a=t.match(/(\d+)(.+)/);if(null===a||3!==a.length)return e;const n=null===(s=Object.entries(S).find((([e,t])=>null==t?void 0:t.includes(a[2]))))||void 0===s?void 0:s[0];return n?Object.assign({},e,{[n]:a[1]}):e}),{})}function N(e,t){return(0,k.Z)(e,t)}function O(e){const t=new Date;return N(t,e).getTime()-t.getTime()}function I(e){return!isNaN(Date.parse(e))}function P(e){for(const s of e.trim().split(" ")){var t;const e=s.match(/(\d+)(.+)/);if(null===e||3!==e.length)return!1;if(!(null===(t=Object.entries(S).find((([t,s])=>null==s?void 0:s.includes(e[2]))))||void 0===t?void 0:t[0]))return!1}return!0}function M(e){const t=["h","m","s","ms","us","µs","ns"];for(const s of e.trim().split(" ")){const e=s.match(/(\d+)(.+)/);if(null===e||3!==e.length)return!1;if(!t.includes(e[2]))return!1}return!0}},"./packages/grafana-data/src/datetime/moment_wrapper.ts":(e,t,s)=>{"use strict";s.d(t,{VJ:()=>i,i_:()=>r,Kd:()=>o,k4:()=>l,v9:()=>c,zh:()=>d,Ks:()=>u,CQ:()=>p,C_:()=>h,GY:()=>g});var a=s("./node_modules/moment/moment.js"),n=s.n(a);const i=n().ISO_8601,r=e=>{n().locale(e)},o=()=>n().locale(),l=()=>n().localeData(),c=e=>n().isMoment(e),d=(e,t)=>n().utc(e,t),u=(e,t)=>n().duration(e,t),p=(e,t)=>n()(e,t),h=e=>p(e),g=(e,t,s)=>"utc"===e?d(t,s):p(t,s)},"./packages/grafana-data/src/datetime/parser.ts":(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var a=s("./node_modules/moment-timezone/index.js"),n=s.n(a),i=s("./packages/grafana-data/src/datetime/moment_wrapper.ts"),r=s("./packages/grafana-data/src/datetime/common.ts"),o=s("./packages/grafana-data/src/datetime/datemath.ts"),l=s("./node_modules/lodash/lodash.js"),c=s("./packages/grafana-data/src/datetime/formats.ts");const d=(e,t)=>(0,i.v9)(e)?e:"string"==typeof e?u(e,t):p(e,t),u=(e,t)=>{var s;if(-1!==e.indexOf("now")){if(!(0,o.isValid)(e))return n()();return(0,o.parse)(e,null==t?void 0:t.roundUp,null==t?void 0:t.timeZone,null==t?void 0:t.fiscalYearStartMonth)||n()()}const a=(0,r.Z)(t),i=n().tz.zone(a),d=null!==(s=null==t?void 0:t.format)&&void 0!==s?s:c.U6.fullDate;if(i&&i.name)return n().tz(e,d,i.name);switch((0,l.lowerCase)(a)){case"utc":return n().utc(e,d);default:return n()(e,d)}},p=(e,t)=>{const s=e,a=(0,r.Z)(t),i=n().tz.zone(a);if(i&&i.name)return n().tz(s,i.name);switch((0,l.lowerCase)(a)){case"utc":return n().utc(s);default:return n()(s)}}},"./packages/grafana-data/src/datetime/rangeutil.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{describeTextRange:()=>d,describeTimeRange:()=>u,isValidTimeSpan:()=>p,describeTimeRangeAbbreviation:()=>h,convertRawToRange:()=>g,isFiscal:()=>f,isRelativeTimeRange:()=>b,secondsToHms:()=>v,msRangeToTimeString:()=>x,calculateInterval:()=>y,describeInterval:()=>k,intervalToSeconds:()=>S,intervalToMs:()=>C,roundInterval:()=>T,timeRangeToRelative:()=>N,relativeToTimeRange:()=>O});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/datetime/datemath.ts"),i=s("./packages/grafana-data/src/datetime/moment_wrapper.ts"),r=s("./packages/grafana-data/src/datetime/formatter.ts"),o=s("./packages/grafana-data/src/datetime/parser.ts");const l={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},c={};function d(e){const t=0!==e.indexOf("+");-1===e.indexOf("now")&&(e=(t?"now-":"now")+e);let s=c[e+" to now"];if(s)return s;s=t?{from:e,to:"now"}:{from:"now",to:e};const a=/^now([-+])(\d+)(\w)/.exec(e);if(a){const e=a[3],n=parseInt(a[2],10),i=l[e];i&&(s.display=t?"Last ":"Next ",s.display+=n+" "+i.display,s.section=i.section,n>1&&(s.display+="s"))}else s.display=s.from+" to "+s.to,s.invalid=!0;return s}function u(e,t){const s=c[e.from.toString()+" to "+e.to.toString()];if(s)return s.display;const a={timeZone:t};if((0,i.v9)(e.from)&&(0,i.v9)(e.to))return(0,r.dq)(e.from,a)+" to "+(0,r.dq)(e.to,a);if((0,i.v9)(e.from)){const t=n.parse(e.to,!0,"utc");return t?(0,r.dq)(e.from,a)+" to "+(0,r.E8)(t,a):""}if((0,i.v9)(e.to)){const t=n.parse(e.from,!1,"utc");return t?(0,r.E8)(t,a)+" to "+(0,r.dq)(e.to,a):""}if("now"===e.to.toString()){return d(e.from).display}return e.from.toString()+" to "+e.to.toString()}(0,a.each)([{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],(e=>{c[e.from+" to "+e.to]=e})),(0,a.each)([{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],(e=>{c[e.from+" to "+e.to]=e}));const p=e=>{if(0===e.indexOf("$")||0===e.indexOf("+$"))return!0;return!0!==d(e).invalid},h=(e,t)=>{if((0,i.v9)(e.from))return(0,r.Hk)(e.from,{timeZone:t});const s=n.parse(e.from,!0);return s?(0,r.Hk)(s,{timeZone:t}):""},g=(e,t,s)=>{const a=(0,o.J)(e.from,{roundUp:!1,timeZone:t,fiscalYearStartMonth:s}),i=(0,o.J)(e.to,{roundUp:!0,timeZone:t,fiscalYearStartMonth:s});return n.isMathString(e.from)||n.isMathString(e.to)?{from:a,to:i,raw:e}:{from:a,to:i,raw:{from:a,to:i}}};function m(e){return"string"==typeof e&&e.indexOf("now")>=0}function f(e){return"string"==typeof e.raw.from&&e.raw.from.indexOf("f")>0||"string"==typeof e.raw.to&&e.raw.to.indexOf("f")>0}function b(e){return m(e.from)||m(e.to)}function v(e){const t=Math.floor(e/31536e3);if(t)return t+"y";const s=Math.floor(e%31536e3/86400);if(s)return s+"d";const a=Math.floor(e%31536e3%86400/3600);if(a)return a+"h";const n=Math.floor(e%31536e3%86400%3600/60);if(n)return n+"m";const i=Math.floor(e%31536e3%86400%3600%60);if(i)return i+"s";const r=Math.floor(1e3*e);return r?r+"ms":"less than a millisecond"}function x(e){const t=Number((e/1e3).toFixed()),s=Math.floor(t/60/60),a=Math.floor(t/60)-60*s,n=Number((t%60).toFixed());let i=s?s+"h":"",r=a?a+"min":"",o=n?n+"sec":"";return i&&r?i+=" ":i=i,(r||i)&&o?r+=" ":r=r,i+r+o||"less than 1sec"}function y(e,t,s){let a=1;s&&(a=C(s));let n=T((e.to.valueOf()-e.from.valueOf())/t);return a>n&&(n=a),{intervalMs:n,interval:v(n/1e3)}}const w=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,j={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function k(e){if(Number(e))return{sec:j.s,type:"s",count:parseInt(e,10)};const t=e.match(w);if(!t||!(0,a.has)(j,t[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(j).join(", ")}"`);return{sec:j[t[2]],type:t[2],count:parseInt(t[1],10)}}function S(e){const t=k(e);return t.sec*t.count}function C(e){const t=k(e);return 1e3*t.sec*t.count}function T(e){switch(!0){case e<15:return 10;case e<35:return 20;case e<75:return 50;case e<150:return 100;case e<350:return 200;case e<750:return 500;case e<1500:return 1e3;case e<3500:return 2e3;case e<7500:return 5e3;case e<12500:return 1e4;case e<17500:return 15e3;case e<25e3:return 2e4;case e<45e3:return 3e4;case e<9e4:return 6e4;case e<21e4:return 12e4;case e<45e4:return 3e5;case e<75e4:return 6e5;case e<105e4:return 9e5;case e<15e5:return 12e5;case e<27e5:return 18e5;case e<54e5:return 36e5;case e<9e6:return 72e5;case e<162e5:return 108e5;case e<324e5:return 216e5;case e<864e5:return 432e5;case e<6048e5:return 864e5;case e<18144e5:return 6048e5;case e<36288e5:return 2592e6;default:return 31536e6}}function N(e,t=(0,i.CQ)()){return{from:t.unix()-e.from.unix(),to:t.unix()-e.to.unix()}}function O(e,t=(0,i.CQ)()){const s=(0,i.CQ)(t).subtract(e.from,"s"),a=0===e.to?(0,i.CQ)(t):(0,i.CQ)(t).subtract(e.to,"s");return{from:s,to:a,raw:{from:s,to:a}}}},"./packages/grafana-data/src/events/eventFactory.ts":(e,t,s)=>{"use strict";s.d(t,{X:()=>n});const a=new Set;function n(e){if(a.has(e))throw new Error(`There is already an event defined with type '${e}'`);return a.add(e),{name:e}}},"./packages/grafana-data/src/events/types.ts":(e,t,s)=>{"use strict";function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{m:()=>n,R:()=>i});class n{constructor(){a(this,"type",void 0),a(this,"payload",void 0),a(this,"origin",void 0),this.type=this.__proto__.constructor.type}}class i extends n{constructor(e){super(),a(this,"payload",void 0),this.payload=e}}},"./packages/grafana-data/src/field/FieldConfigOptionsRegistry.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s("./packages/grafana-data/src/utils/Registry.ts");class n extends a.B{}},"./packages/grafana-data/src/field/displayProcessor.ts":(e,t,s)=>{"use strict";s.d(t,{U:()=>u,g:()=>h});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/types/dataFrame.ts"),i=s("./packages/grafana-data/src/valueFormats/valueFormats.ts"),r=s("./packages/grafana-data/src/utils/valueMappings.ts"),o=s("./packages/grafana-data/src/datetime/index.ts"),l=s("./packages/grafana-data/src/field/scale.ts"),c=s("./packages/grafana-data/src/utils/anyToNumber.ts");const d={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function u(e){var t;if(!e||(0,a.isEmpty)(e)||!e.field)return p;const s=e.field,u=null!==(t=s.config)&&void 0!==t?t:{};let h=u.unit,g=h&&(d[h]||h.startsWith("time:")),m=!1;if(s.type!==n.fS.time||g)s.type===n.fS.boolean&&((0,i.br)(h)||(h="bool"));else if(h="dateTimeAsSystem",g=!0,s.values&&s.values.length>1){let e=s.values.get(0),t=s.values.get(s.values.length-1);"string"==typeof e?(e=(0,o.J)(e).unix(),t=(0,o.J)(t).unix()):(e/=1e3,t/=1e3),m=t-e<60}const f=(0,i.Cf)(h||"none"),b=(0,l.NI)(s,e.theme);return t=>{const{mappings:s}=u,n="string"===h;g&&"string"==typeof t&&(t=(0,o.CQ)(t).valueOf());let i,l,d,p,v,x=n?NaN:(0,c.I)(t);if(s&&s.length>0){const a=(0,r.vh)(s,t);a&&(null!=a.text&&(i=a.text),null!=a.color&&(p=e.theme.visualization.getColorByName(a.color)))}if(!isNaN(x)){if(null==i&&!(0,a.isBoolean)(t)){const t=f(x,u.decimals,null,e.timeZone,m);i=t.text,d=t.suffix,l=t.prefix}if(null==p){const e=b(x);p=e.color,v=e.percent}}if(null==i&&(i=(0,a.toString)(t),i||(i=u.noValue?u.noValue:"")),!p){const e=b(-1/0);p=e.color,v=e.percent}return{text:i,numeric:x,prefix:l,suffix:d,color:p,percent:v}}}function p(e){return{text:(0,a.toString)(e),numeric:(0,c.I)(e)}}function h(){return e=>({text:`${e}`,numeric:null})}},"./packages/grafana-data/src/field/fieldColor.ts":(e,t,s)=>{"use strict";s.d(t,{WO:()=>d,fD:()=>p,QY:()=>h,YO:()=>g});var a=s("./packages/grafana-data/src/types/index.ts"),n=s("./packages/grafana-data/src/utils/Registry.ts"),i=s("./node_modules/d3-interpolate/src/rgb.js"),r=s("./packages/grafana-data/src/field/thresholds.ts"),o=s("./packages/grafana-data/src/field/scale.ts"),l=s("./packages/grafana-data/src/transformations/fieldReducer.ts");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=new n.B((()=>[{id:a.Sc.Fixed,name:"Single color",description:"Set a specific color",getCalculator:m},{id:a.Sc.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(e,t)=>(e,s,a)=>{const n=null!=a?a:r.yM;return t.visualization.getColorByName(n.color)}},new u({id:a.Sc.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:e=>e.visualization.palette}),new u({id:"continuous-GrYlRd",name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["green","yellow","red"]}),new u({id:"continuous-RdYlGr",name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:e=>["red","yellow","green"]}),new u({id:"continuous-BlYlRd",name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["dark-blue","super-light-yellow","dark-red"]}),new u({id:"continuous-YlRd",name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["super-light-yellow","dark-red"]}),new u({id:"continuous-BlPu",name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:e=>["blue","purple"]}),new u({id:"continuous-YlBl",name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:e=>["super-light-yellow","dark-blue"]}),new u({id:"continuous-blues",name:"Blues",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-blue"]}),new u({id:"continuous-reds",name:"Reds",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-red"]}),new u({id:"continuous-greens",name:"Greens",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-green"]}),new u({id:"continuous-purples",name:"Purples",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-purple"]})]));class u{constructor(e){c(this,"id",void 0),c(this,"name",void 0),c(this,"description",void 0),c(this,"isContinuous",void 0),c(this,"isByValue",void 0),c(this,"colorCache",void 0),c(this,"colorCacheTheme",void 0),c(this,"interpolator",void 0),c(this,"getNamedColors",void 0),this.id=e.id,this.name=e.name,this.description=e.description,this.getNamedColors=e.getColors,this.isContinuous=e.isContinuous,this.isByValue=e.isByValue}getColors(e){return this.getNamedColors?(this.colorCache&&this.colorCacheTheme===e||(this.colorCache=this.getNamedColors(e).map(e.visualization.getColorByName),this.colorCacheTheme=e),this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,i.hD)(this.colorCache)),this.interpolator}getCalculator(e,t){const s=this.getColors(t);return this.isByValue?this.isContinuous?(e,t,s)=>this.getInterpolator()(t):(e,t,a)=>s[t*(s.length-1)]:(t,a,n)=>{var i,r;const o=null!==(i=null===(r=e.state)||void 0===r?void 0:r.seriesIndex)&&void 0!==i?i:0;return s[o%s.length]}}}function p(e){var t,s;return d.get(null!==(t=null===(s=e.config.color)||void 0===s?void 0:s.mode)&&void 0!==t?t:a.Sc.Thresholds)}function h(e){return d.get(null!=e?e:a.Sc.Thresholds)}function g(e,t){var s,a,n;const i=p(e);if(!i.isByValue)return{color:i.getCalculator(e,t)(0,0),threshold:r.yM,percent:1};const c=(0,o.NI)(e,t),d=null!==(s=null===(a=e.config.color)||void 0===a?void 0:a.seriesBy)&&void 0!==s?s:"last";return c(null!==(n=(0,l.Kx)({field:e,reducers:[d]})[d])&&void 0!==n?n:0)}function m(e,t){return()=>{var s,n;return t.visualization.getColorByName(null!==(s=null===(n=e.config.color)||void 0===n?void 0:n.fixedColor)&&void 0!==s?s:a.R3)}}},"./packages/grafana-data/src/field/fieldOverrides.ts":(e,t,s)=>{"use strict";s.d(t,{SM:()=>x,Of:()=>T,Xu:()=>v,gb:()=>S});var a=s("./packages/grafana-data/src/types/index.ts"),n=s("./packages/grafana-data/src/transformations/index.ts"),i=s("./node_modules/lodash/lodash.js"),r=s("./packages/grafana-data/src/field/displayProcessor.ts"),o=s("./packages/grafana-data/src/dataframe/index.ts"),l=s("./packages/grafana-data/src/field/standardFieldConfigEditorRegistry.ts"),c=s("./packages/grafana-data/src/utils/index.ts"),d=s("./packages/grafana-data/src/valueFormats/index.ts"),u=s("./packages/grafana-data/src/field/getFieldDisplayValuesProxy.ts"),p=s("./packages/grafana-data/src/field/fieldState.ts"),h=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),g=s("./packages/grafana-data/src/utils/dataLinks.ts"),m=s("./packages/grafana-data/src/utils/labels.ts");function f(e,t,s){return new Proxy({},{get:(a,n,i)=>"name"===n?e.name:"displayName"===n?(0,p.C)(e,t,s):"labels"===n||"formattedLabels"===n?e.labels?Object.assign({},e.labels,{__values:Object.values(e.labels).sort().join(", "),toString:()=>(0,m.aA)(e.labels,"",!0)}):"":void 0})}var b=s("./packages/grafana-data/src/themes/colorManipulator.ts");function v(e){var t,s;let i=null,r=null;const o=[n.gz.min,n.gz.max];for(const t of e)for(const e of t.fields)if(e.type===a.fS.number){const t=(0,n.Kx)({field:e,reducers:o}),s=t[n.gz.min],a=t[n.gz.max];(null===i||s<i)&&(i=s),(null===r||a>r)&&(r=a)}return{min:i,max:r,delta:(null!==(t=r)&&void 0!==t?t:0)-(null!==(s=i)&&void 0!==s?s:0)}}function x(e){var t;if(!e.data)return[];const s=e.fieldConfig;if(!s)return e.data;const c=null!==(t=e.fieldConfigRegistry)&&void 0!==t?t:l.N;let d,u=0;const h=[];if(s.overrides)for(const e of s.overrides){const t=n.Ls.get(e.matcher.id);t&&h.push({match:t.get(e.matcher.options),properties:e.properties})}return e.data.map(((t,n)=>{const l=Object.assign({},t);l.fields=l.fields.map((e=>Object.assign({},e,{config:(0,i.cloneDeep)(e.config),state:Object.assign({},e.state)})));const g={__series:{text:"Series",value:{name:(0,p.n)(l,n)}}};for(const t of l.fields){const p=t.config;t.state.scopedVars=Object.assign({},g,{__field:{text:"Field",value:f(t,l,e.data)}});const x={field:t,data:e.data,dataFrameIndex:n,replaceVariables:e.replaceVariables,fieldConfigRegistry:c};j(p,s.defaults,x);for(const s of h)if(s.match(t,l,e.data))for(const e of s.properties)w(p,e,x);let k,S=t.type;if(!S||S===a.fS.other){const e=(0,o.fu)(t);e&&(S=e)}if(t.type===a.fS.number){var m,b;d||(0,i.isNumber)(p.min)&&(0,i.isNumber)(p.max)||(d=v(e.data));const t=null!==(m=p.min)&&void 0!==m?m:d.min,s=null!==(b=p.max)&&void 0!==b?b:d.max;k={min:t,max:s,delta:s-t}}t.state.seriesIndex=u,t.state.range=k,t.type=S,t.type!==a.fS.time&&u++,t.display=(0,r.U)({field:t,theme:e.theme,timeZone:e.timeZone}),"dateTimeFromNow"!==t.config.unit&&(t.display=y(t.display,2500)),t.getLinks=C(l,t,t.state.scopedVars,x.replaceVariables,e.timeZone)}return l}))}function y(e,t=2500){const s=new Map;return a=>{let n=s.get(a);return n||(s.size===t&&s.clear(),n=e(a),n.color&&(n.color=(0,b.asHexString)(n.color)),s.set(a,n)),n}}function w(e,t,s){const a=s.fieldConfigRegistry.getIfExists(t.id);if(!a)return;const n=a.process(t.value,s,a.settings);null==n?a.isCustom&&e.custom?(0,i.unset)(e.custom,a.path):(0,i.unset)(e,a.path):a.isCustom?(e.custom||(e.custom={}),(0,i.set)(e.custom,a.path,n)):(0,i.set)(e,a.path,n)}function j(e,t,s){for(const a of s.fieldConfigRegistry.list())a.isCustom&&!e.custom&&(e.custom={}),k(a.isCustom?e.custom:e,a.isCustom?t.custom:t,a,s);S(e)}function k(e,t,s,a){const n=(0,i.get)(e,s.path);if(null==n){const n=a.fieldConfigRegistry.getIfExists(s.id);if(!n)return;if(n&&n.shouldApply(a.field)){const s=n.process((0,i.get)(t,n.path),a,n.settings);null!=s&&(0,i.set)(e,n.path,s)}}}function S(e){const{thresholds:t}=e;if(e.color?e.color.mode||delete e.color:t&&(e.color={mode:a.Sc.Thresholds}),e.hasOwnProperty("min")&&e.hasOwnProperty("max")&&e.min>e.max){const t=e.max;e.max=e.min,e.min=t}}const C=(e,t,s,a,n)=>i=>{if(!t.config.links||0===t.config.links.length)return[];const r=c.uT.getTimeRangeUrlParams(),{timeField:o}=(0,h.sV)(e);return t.config.links.map((l=>{const p=c.uT.getVariablesUrlParams();let h={},m={};if(void 0===i.valueRowIndex||isNaN(i.valueRowIndex))i.calculatedValue&&(m={raw:i.calculatedValue.numeric,numeric:i.calculatedValue.numeric,text:(0,d.zc)(i.calculatedValue)});else{const s=(0,u.z)({frame:e,rowIndex:i.valueRowIndex,timeZone:n});m={raw:t.values.get(i.valueRowIndex),numeric:s[t.name].numeric,text:s[t.name].text,time:o?o.values.get(i.valueRowIndex):void 0},h={__data:{value:{name:e.name,refId:e.refId,fields:s},text:"Data"}}}const f=Object.assign({},s,{__value:{text:"Value",value:m}},h,{[c.WC.keepTime]:{text:r,value:r},[c.WC.includeVars]:{text:p,value:p}});if(l.onClick)return{href:l.url,title:a(l.title||"",f),target:l.targetBlank?"_blank":void 0,onClick:(e,s)=>{l.onClick({origin:null!=s?s:t,e,replaceVariables:e=>a(e,f)})},origin:t};if(l.internal)return(0,g._)({link:l,internalLink:l.internal,scopedVars:f,field:t,range:{},replaceVariables:a});let b=c.uT.assureBaseUrl(l.url.replace(/\n/g,""));b=a(b,f),b=c.uT.processUrl(b);return{href:b,title:a(l.title||"",f),target:l.targetBlank?"_blank":void 0,origin:t}}))};function T(e){if(!e||0===e.length)return[];const t=[...e],s=(0,r.g)();for(let e=0;e<t.length;e++){const a=Object.assign({},t[e]),n=[...a.fields];for(let e=0;e<n.length;e++)n[e]=Object.assign({},n[e],{display:s});t[e]=Object.assign({},a,{fields:n})}return t}},"./packages/grafana-data/src/field/fieldState.ts":(e,t,s)=>{"use strict";s.d(t,{n:()=>i,C:()=>r});var a=s("./packages/grafana-data/src/types/index.ts"),n=s("./packages/grafana-data/src/utils/labels.ts");function i(e,t){if(e.name)return e.name;const s=[];for(const t of e.fields)t.labels&&Object.keys(t.labels).length>0&&s.push(t);return 1===s.length?(0,n.aA)(s[0].labels):void 0===t?e.fields.filter((e=>e.type!==a.fS.time)).map((t=>r(t,e))).join(", "):e.refId?`Series (${e.refId})`:`Series (${t})`}function r(e,t,s){var i;const r=null===(i=e.state)||void 0===i?void 0:i.displayName;if(r)return r;const o=function(e,t,s){var i,r,o;const l=(null===(i=e.config)||void 0===i?void 0:i.displayName)&&(null===(r=e.config)||void 0===r?void 0:r.displayName.length);let c=l?e.config.displayName:e.name;if(l)return c;if(t&&null!==(o=e.config)&&void 0!==o&&o.displayNameFromDS)return e.config.displayNameFromDS;var d;if(e.type===a.fS.time&&!e.labels)return null!==(d=c)&&void 0!==d?d:a.Ls;let u=[],p=!1;if(s&&s.length>1)for(let e=1;e<s.length;e++){if(s[e].name!==s[e-1].name){p=!0;break}}let h=!1,g=!1;p&&null!=t&&t.name&&(u.push(t.name),h=!0);e.name&&e.name!==a.M5&&u.push(e.name);if(e.labels&&t){let a=function(e){let t=null;for(let s=0;s<e.length;s++){const a=e[s];for(const e of a.fields)if(e.labels)for(const s in e.labels)if(null===t)t=s;else if(s!==t)return null}return t}(null!=s?s:[t]);if(a)e.labels[a]&&(u.push(e.labels[a]),g=!0);else{let t=(0,n.aA)(e.labels);t&&(u.push(t),g=!0)}}!t||h||g||e.name!==a.M5||t.name&&t.name.length>0&&(u.push(t.name),h=!0);c=u.length?u.join(" "):e.name?e.name:a.M5;c===e.name&&(c=function(e,t){let s=0,a=!1;if(t)for(let n=0;n<t.fields.length;n++){const i=t.fields[n];if(e===i){if(a=!0,s>0){s++;break}}else if(e.name===i.name&&(s++,a))break}if(s)return`${e.name} ${s}`;return e.name}(e,t));return c}(e,t,s);return e.state=e.state||{},e.state.displayName=o,o}},"./packages/grafana-data/src/field/getFieldDisplayValuesProxy.ts":(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/valueFormats/index.ts");function i(e){return new Proxy({},{get:(t,s)=>{let i=e.frame.fields.find((e=>s===e.name));if(!i){const t=(0,a.toNumber)(s);i=e.frame.fields[t]}if(i||(i=e.frame.fields.find((e=>s===e.config.displayName))),i||(i=e.frame.fields.find((e=>!!e.labels&&s===e.labels.name))),!i)return;if(!i.display)throw new Error("Field missing display processor "+i.name);const r=i.values.get(e.rowIndex),o=i.display(r);return o.toString=()=>(0,n.zc)(o),o}})}},"./packages/grafana-data/src/field/index.ts":(e,t,s)=>{"use strict";s.d(t,{cB:()=>b,WI:()=>$.FieldColorMode,ZD:()=>L.Z,pZ:()=>m,dE:()=>f,E1:()=>g,n_:()=>h,HU:()=>p,SM:()=>R.SM,Of:()=>R.Of,W4:()=>D,NN:()=>O,W0:()=>N,WO:()=>$.WO,m1:()=>E.m1,U_:()=>n.U,sg:()=>k,QY:()=>$.QY,fD:()=>$.fD,xD:()=>V.xD,CZ:()=>u.C,nG:()=>v,zv:()=>_.z,YO:()=>$.YO,nf:()=>u.n,gE:()=>n.g,NI:()=>V.NI,gG:()=>j,kG:()=>C,Oh:()=>T,AE:()=>P,bP:()=>E.bP,SO:()=>S.S,N6:()=>S.N,op:()=>M,ZN:()=>F,VB:()=>A,gb:()=>R.gb,uj:()=>I});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/field/displayProcessor.ts"),i=s("./packages/grafana-data/src/types/index.ts"),r=s("./packages/grafana-data/src/dataframe/DataFrameView.ts"),o=s("./packages/grafana-data/src/transformations/fieldReducer.ts"),l=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),c=s("./packages/grafana-data/src/transformations/index.ts"),d=s("./packages/grafana-data/src/transformations/matchers/ids.ts"),u=s("./packages/grafana-data/src/field/fieldState.ts");const p="__series.name",h="__field.displayName",g="__field.labels",m="__calc",f="__cell_",b=25,v=e=>{var t;const{replaceVariables:s,reduceOptions:p,timeZone:h,theme:g}=e,v=p.calcs.length?p.calcs:[o.gz.last],k=[],S=(0,c.sq)(p.fields?{id:d.mi.byRegexp,options:p.fields}:{id:d.mi.numeric}),C=null!==(t=e.data)&&void 0!==t?t:[],T=p.limit?p.limit:b,N={};let O=!1;for(let t=0;t<C.length&&!O;t++){const i=C[t],{timeField:c}=(0,l.sV)(i),d=new r.U(i);for(let t=0;t<i.fields.length&&!O;t++){var I,P,M;const r=i.fields[t],l=r.getLinks;if(!S(r,i,C))continue;let b=r.config;var F;if(null!==(I=r.state)&&void 0!==I&&I.range)b=Object.assign({},b,null===(F=r.state)||void 0===F?void 0:F.range);const D=null!==(P=r.config.displayName)&&void 0!==P?P:"",$=null!==(M=r.display)&&void 0!==M?M:(0,n.U)({field:r,theme:e.theme,timeZone:h});if(p.values){const n=D.indexOf(f)>=0;for(let o=0;o<r.values.length;o++){if(n)for(let e=0;e<i.fields.length;e++){const t=i.fields[e].values.get(o);N[f+e]={value:t,text:(0,a.toString)(t)}}r.state=y(r,k.length);const c=$(r.values.get(o)),u=x(i,r,o,s,N),p=w(u,e.fieldConfig,g);if(k.push({name:"",field:b,display:Object.assign({},c,{title:u,color:null!=p?p:c.color}),view:d,colIndex:t,rowIndex:o,getLinks:l?()=>l({valueRowIndex:o}):()=>[],hasLinks:j(r)}),k.length>=T){O=!0;break}}}else{const a=(0,o.Kx)({field:r,reducers:v});for(const n of v){N[m]={value:n,text:n};const p=$(a[n]);var A;if(""!==D)p.title=s(D,Object.assign({},null===(A=r.state)||void 0===A?void 0:A.scopedVars,N));else p.title=(0,u.C)(r,i,C);let h;e.sparkline&&(h={y:i.fields[t],x:c},n===o.gz.last?h.highlightIndex=h.y.values.length-1:n===o.gz.first&&(h.highlightIndex=0)),k.push({name:n,field:b,display:p,sparkline:h,view:d,colIndex:t,getLinks:l?()=>l({calculatedValue:p}):()=>[],hasLinks:j(r)})}}}}return 0===k.length&&k.push(function(e){var t,s;const r="No data",{fieldConfig:o,timeZone:l}=e,{defaults:c}=o,d=(0,n.U)({field:{type:i.fS.other,config:c},theme:e.theme,timeZone:l})(null),u=function(e,t){if(!e||(0,a.isEmpty)(e.text))return t;return e.text}(d,r);return{name:r,field:Object.assign({},c,{max:null!==(t=c.max)&&void 0!==t?t:0,min:null!==(s=c.min)&&void 0!==s?s:0}),display:{text:u,numeric:0,color:d.color},hasLinks:!1}}(e)),k};function x(e,t,s,a,n){let r=[],o=0;var l;if(t.config.displayName)return a(t.config.displayName,Object.assign({},null===(l=t.state)||void 0===l?void 0:l.scopedVars,n));for(const a of e.fields)if(a!==t)if(a.type===i.fS.string){var c;const e=null!==(c=a.values.get(s))&&void 0!==c?c:"";e.length>0&&r.push(e)}else a.type===i.fS.number&&o++;return(o||0===r.length)&&r.push((0,u.C)(t,e)),r.join(" ")}function y(e,t){return Object.assign({},e.state,{seriesIndex:t})}function w(e,t,s){for(const a of t.overrides)if("byName"===a.matcher.id&&a.matcher.options===e)for(const e of a.properties)if("color"===e.id&&e.value)return s.visualization.getColorByName(e.value.fixedColor);return null}function j(e){var t,s;return!(null===(t=e.config)||void 0===t||null===(s=t.links)||void 0===s||!s.length)&&e.config.links.length>0}function k(e){const t={title:"",text:""};let s=0,a=0;for(let n=0;n<e.length;n++){const i=e[n].display;i.text&&i.text.length>t.text.length&&(t.text=i.text),i.title&&i.title.length>t.title.length&&(t.title=i.title),i.prefix&&i.prefix.length>s&&(t.prefix=i.prefix,s=i.prefix.length),i.suffix&&i.suffix.length>a&&(t.suffix=i.suffix,a=i.suffix.length)}return t}var S=s("./packages/grafana-data/src/field/standardFieldConfigEditorRegistry.ts");const C=(e,t,s)=>e,T=(e,t,s)=>{if(null!=e)return parseFloat(e)},N=(e,t,s)=>{var a,n;return null===(a=t.field)||void 0===a||(null===(n=a.state)||void 0===n||delete n.displayName),M(e,t,s)},O=(e,t,s)=>e,I=(e,t,s)=>e,P=(e,t,s)=>e,M=(e,t,s)=>null==e?e:s&&s.expandTemplateVars&&t.replaceVariables?t.replaceVariables(e,t.field.state.scopedVars):`${e}`,F=(e,t,s)=>e,A=(e,t,s)=>e,D=(e,t,s)=>e;var $=s("./packages/grafana-data/src/field/fieldColor.ts"),L=s("./packages/grafana-data/src/field/FieldConfigOptionsRegistry.tsx"),E=s("./packages/grafana-data/src/field/thresholds.ts"),R=s("./packages/grafana-data/src/field/fieldOverrides.ts"),_=s("./packages/grafana-data/src/field/getFieldDisplayValuesProxy.ts"),V=s("./packages/grafana-data/src/field/scale.ts")},"./packages/grafana-data/src/field/scale.ts":(e,t,s)=>{"use strict";s.d(t,{NI:()=>l,dz:()=>c,xD:()=>d});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/transformations/fieldReducer.ts"),i=s("./packages/grafana-data/src/types/index.ts"),r=s("./packages/grafana-data/src/field/fieldColor.ts"),o=s("./packages/grafana-data/src/field/thresholds.ts");function l(e,t){var s,a;if(e.type===i.fS.boolean)return function(e,t){const s={color:t.visualization.getColorByName("green"),percent:1,threshold:void 0},a={color:t.visualization.getColorByName("red"),percent:0,threshold:void 0},n=(0,r.fD)(e);if(n.isContinuous&&n.getColors){const e=n.getColors(t);s.color=e[e.length-1],a.color=e[0]}return e=>Boolean(e)?s:a}(e,t);const n=(0,r.fD)(e).getCalculator(e,t),l=null!==(s=null===(a=e.state)||void 0===a?void 0:a.range)&&void 0!==s?s:c(e);return t=>{let s=0;t!==-1/0&&(s=(t-l.min)/l.delta);const a=(0,o.pD)(e,t,s);return{percent:s,threshold:a,color:n(t,s,a)}}}function c(e){if(e.type!==i.fS.number)return{min:0,max:100,delta:100};let t=e.config.min,s=e.config.max;if(!(0,a.isNumber)(t)||!(0,a.isNumber)(s))if(e.values&&e.values.length){const i=(0,n.Kx)({field:e,reducers:[n.gz.min,n.gz.max]});(0,a.isNumber)(t)||(t=i[n.gz.min]),(0,a.isNumber)(s)||(s=i[n.gz.max])}else t=0,s=100;return{min:t,max:s,delta:s-t}}function d(e,t){var s;const{config:n}=e;let{min:i,max:r}=n;return(0,a.isNumber)(i)&&(0,a.isNumber)(r)?n:t||null===(s=e.state)||void 0===s||!s.range?Object.assign({},n,c(e)):Object.assign({},n,e.state.range)}},"./packages/grafana-data/src/field/standardFieldConfigEditorRegistry.ts":(e,t,s)=>{"use strict";s.d(t,{N:()=>n,S:()=>i});var a=s("./packages/grafana-data/src/utils/Registry.ts");const n=new(s("./packages/grafana-data/src/field/FieldConfigOptionsRegistry.tsx").Z),i=new a.B},"./packages/grafana-data/src/field/thresholds.ts":(e,t,s)=>{"use strict";s.d(t,{yM:()=>n,m1:()=>i,pD:()=>r,bP:()=>o});var a=s("./packages/grafana-data/src/types/index.ts");const n={value:0,color:a.R3};function i(e,t){if(!t||0===t.length)return n;let s=t[0];for(const a of t){if(!(e>=a.value))break;s=a}return s}function r(e,t,s){const{thresholds:n}=e.config;return(null==n?void 0:n.mode)===a.H3.Percentage?i(100*s,null==n?void 0:n.steps):i(t,null==n?void 0:n.steps)}function o(e){return e.sort(((e,t)=>e.value-t.value))}},"./packages/grafana-data/src/index.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{AlertState:()=>l.Z9,AnnotationChangeEvent:()=>I,AnnotationEventFieldSource:()=>l.Lj,AppEvents:()=>l.SI,AppPlugin:()=>l.k8,AppendedVectors:()=>c.l$,ArrayDataFrame:()=>d.iB,ArrayVector:()=>c.Gt,AsNumberVector:()=>c.sq,BasicValueMatcherOptions:()=>a.BasicValueMatcherOptions,BinaryOperationID:()=>o.LH,BinaryOperationVector:()=>c.rM,BuildInfo:()=>l.SP,BusEventBase:()=>b.m,BusEventWithPayload:()=>b.R,ByNamesMatcherMode:()=>u.Ys,ByNamesMatcherOptions:()=>u.VC,CSVHeaderStyle:()=>o.x5,CSVReader:()=>o.QM,CircularDataFrame:()=>d.a2,CircularVector:()=>c.dV,ConstantVector:()=>c.uI,CoreApp:()=>l.zj,CustomVariableSupport:()=>l.Mg,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>m.cB,DashboardCursorSync:()=>l.mQ,DataFrameType:()=>l.Pz,DataFrameView:()=>d.US,DataHoverClearEvent:()=>N,DataHoverEvent:()=>T,DataLinkBuiltInVars:()=>o.WC,DataQueryErrorType:()=>l.eA,DataSelectEvent:()=>O,DataSourceApi:()=>l.MF,DataSourcePlugin:()=>l.hf,DataSourceVariableSupport:()=>l.gv,DataTopic:()=>l.w5,DataTransformerID:()=>u.Wk,DateTimeOptions:()=>p.Nz,DefaultTimeZone:()=>l.Ys,DocsId:()=>o.xV,EventBusSrv:()=>k,ExploreMode:()=>l.Ru,FALLBACK_COLOR:()=>l.R3,FeatureState:()=>l.CQ,FeatureToggles:()=>l.uv,FieldCache:()=>d.N,FieldColorMode:()=>m.WI,FieldColorModeId:()=>l.Sc,FieldConfigEditorBuilder:()=>o.vo,FieldConfigOptionsRegistry:()=>m.ZD,FieldConfigProperty:()=>l.qb,FieldMatcherID:()=>u.mi,FieldType:()=>l.fS,FormattedVector:()=>c.$Y,FrameGeometrySourceMode:()=>F,FrameMatcherID:()=>u.E4,GAUGE_DEFAULT_MAXIMUM:()=>l.Z3,GAUGE_DEFAULT_MINIMUM:()=>l.Hx,GrafanaConfig:()=>l.Nm,GrafanaPlugin:()=>l.Sg,GrafanaTheme2:()=>P.So,GrafanaThemeType:()=>l.Qu,ISO_8601:()=>p.VJ,IndexVector:()=>c.rm,InternalTimeZones:()=>p.RQ,LanguageProvider:()=>l.iL,LayoutMode:()=>n.LayoutMode,LayoutModes:()=>A,LegacyBaseMap:()=>o.Iw,LegacyGraphHoverClearEvent:()=>l.oi,LegacyGraphHoverEvent:()=>l.IA,LegacyMappingType:()=>o.HU,LegacyRangeMap:()=>o.ZH,LegacyValueMap:()=>o.e0,LegacyValueMapping:()=>o.GG,LicenseInfo:()=>l.TO,LiveChannelConnectionState:()=>l.yS,LiveChannelEventType:()=>l.FU,LiveChannelScope:()=>l.z,LiveChannelType:()=>l.SK,LoadingState:()=>l.Gu,LogLevel:()=>l.in,LogsDedupDescription:()=>l.Uv,LogsDedupStrategy:()=>l.Y4,LogsMetaKind:()=>l.Ku,LogsParsers:()=>o.bA,LogsSortOrder:()=>l.UV,MISSING_VALUE:()=>d.Yi,MappingType:()=>l.Hi,MatcherID:()=>u.Ff,MutableDataFrame:()=>d.vA,NodeGraphDataFrameFieldNames:()=>o.zG,NullValueMode:()=>l.Gl,OrgRole:()=>l.B5,PanelEvents:()=>l.Kh,PanelOptionsEditorBuilder:()=>o.rt,PanelPlugin:()=>B,PluginErrorCode:()=>l.w2,PluginIncludeType:()=>l.$_,PluginSignatureStatus:()=>l.Xy,PluginSignatureType:()=>l._Z,PluginState:()=>l.BV,PluginType:()=>l.zV,QueryRunner:()=>r.QueryRunner,QueryRunnerOptions:()=>r.QueryRunnerOptions,RangeValueMatcherOptions:()=>a.RangeValueMatcherOptions,ReducerID:()=>u.gz,RegexpOrNamesMatcherOptions:()=>u.Py,Registry:()=>o.Bz,RenameByRegexTransformerOptions:()=>u.ao,SetFieldConfigOptionsArgs:()=>i.SetFieldConfigOptionsArgs,SortedVector:()=>c.oH,SpecialValueMatch:()=>l.eE,StandardOptionConfig:()=>i.StandardOptionConfig,StandardVariableSupport:()=>l.v6,StreamingDataFrame:()=>d.Av,StreamingFrameAction:()=>d.T0,StreamingFrameOptions:()=>d.Zs,SystemDateFormatsState:()=>p.zf,TIME_FORMAT:()=>l.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>l.rN,TIME_SERIES_TIME_FIELD_NAME:()=>l.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>l.M5,TextDisplayOptions:()=>z.VizTextDisplayOptions,ThemeBreakpoints:()=>P.v,ThemeBreakpointsKey:()=>P.Zs,ThemeColors:()=>P.aG,ThemeRichColor:()=>P.yl,ThemeShadows:()=>P.ly,ThemeShape:()=>P.wB,ThemeSpacing:()=>P.EQ,ThemeTransitions:()=>P.v$,ThemeTypography:()=>P.zc,ThemeTypographyVariant:()=>P.XZ,ThemeVisualizationColors:()=>P.Z2,ThemeVizColor:()=>P.Nz,ThemeVizHue:()=>P.h8,ThemeZIndices:()=>P.Kh,ThresholdsMode:()=>l.H3,TimeZoneResolver:()=>p.qb,TransformerRegistryItem:()=>u.xr,TransformerUIProps:()=>u.fb,UrlQueryMap:()=>o.Vq,UrlQueryValue:()=>o.yw,VAR_CALC:()=>m.pZ,VAR_CELL_PREFIX:()=>m.dE,VAR_FIELD_LABELS:()=>m.E1,VAR_FIELD_NAME:()=>m.n_,VAR_SERIES_NAME:()=>m.HU,ValueMatcherID:()=>u.mE,ValueMatcherOptions:()=>a.ValueMatcherOptions,VariableOrigin:()=>l.L8,VariableSuggestionsScope:()=>l.o3,VariableSupportBase:()=>l.Tq,VariableSupportType:()=>l.j2,VizOrientation:()=>l.wm,WithLoadingIndicatorOptions:()=>o.rm,addDurationToDate:()=>p.Ks,addLogLevelToSeries:()=>o.Ar,anySeriesWithTimeField:()=>d.m$,anyToNumber:()=>o.IX,applyFieldOverrides:()=>m.SM,applyRawFieldOverrides:()=>m.Of,arrayUtils:()=>o.sq,binaryOperators:()=>o.nk,booleanOverrideProcessor:()=>m.W4,booleanValueFormatter:()=>g.IR,buildHistogram:()=>u.gY,calculateFieldStats:()=>o.zd,calculateLogsLabelStats:()=>o.lL,calculateStats:()=>o.i6,checkLogsError:()=>o.Mi,classicColors:()=>o.ZC,colorManipulator:()=>P.r8,compareArrayValues:()=>d.nl,compareDataFrameStructures:()=>d.Ch,convertOldAngularValueMappings:()=>o.Jb,createDimension:()=>d.q2,createFieldConfigRegistry:()=>R,createTheme:()=>P.jG,dataFrameFromJSON:()=>d.vP,dataFrameToJSON:()=>d.Y,dataLinksOverrideProcessor:()=>m.NN,dateMath:()=>p.Rn,dateTime:()=>p.CQ,dateTimeAsMoment:()=>p.C_,dateTimeForTimeZone:()=>p.GY,dateTimeFormat:()=>p.dq,dateTimeFormatISO:()=>p.lf,dateTimeFormatTimeAgo:()=>p.E8,dateTimeFormatWithAbbrevation:()=>p.Fm,dateTimeParse:()=>p.J,decodeFieldValueEntities:()=>d.Jy,deprecationWarning:()=>o.d9,displayNameOverrideProcessor:()=>m.W0,doStandardCalcs:()=>u.uP,durationToMilliseconds:()=>p.iX,ensureTimeField:()=>u.J_,escapeStringForRegex:()=>h.GE,escapeUnescapedString:()=>o.l3,eventFactory:()=>f.X,fieldColorModeRegistry:()=>m.WO,fieldMatchers:()=>u.Ls,fieldReducers:()=>u.TB,findCommonLabels:()=>o.FT,findHighlightChunksInText:()=>h.Xt,findMatchesInText:()=>h.lu,findUniqueLabels:()=>o.IU,formatLabels:()=>o.aA,formattedValueToString:()=>g.zc,frameMatchers:()=>u.Ac,getActiveThreshold:()=>m.m1,getAllValuesFromDimension:()=>d.r7,getColorForTheme:()=>o.L6,getColorFromHexRgbOrName:()=>o.eR,getColumnFromDimension:()=>d.$q,getColumnsFromDimension:()=>d.GV,getDataFrameRow:()=>d.fh,getDefaultRelativeTimeRange:()=>l.Rr,getDefaultTimeRange:()=>l.JK,getDimensionByName:()=>d.YP,getDisplayProcessor:()=>m.U_,getDisplayValueAlignmentFactors:()=>m.sg,getFieldColorMode:()=>m.QY,getFieldColorModeForField:()=>m.fD,getFieldConfigWithMinMax:()=>m.xD,getFieldDisplayName:()=>m.CZ,getFieldDisplayValues:()=>m.nG,getFieldDisplayValuesProxy:()=>m.zv,getFieldMatcher:()=>u.sq,getFieldSeriesColor:()=>m.YO,getFlotPairs:()=>o.k8,getFlotPairsConstant:()=>o.HE,getFrameDisplayName:()=>m.nf,getFrameMatchers:()=>u.b9,getHistogramFields:()=>u.qr,getLocale:()=>p.Kd,getLocaleData:()=>p.k4,getLogLevel:()=>o.ZO,getLogLevelFromKey:()=>o.jx,getMappedValue:()=>o.GR,getParser:()=>o.MT,getRawDisplayProcessor:()=>m.gE,getScaleCalculator:()=>m.NI,getSeriesTimeStep:()=>o.e4,getTimeField:()=>d.sV,getTimeZone:()=>p.Ze,getTimeZoneGroups:()=>p.$8,getTimeZoneInfo:()=>p.Pr,getTimeZones:()=>p.ZV,getValueFormat:()=>g.Cf,getValueFormats:()=>g.QW,getValueFormatterIndex:()=>g.Td,getValueFromDimension:()=>d.jC,getValueMatcher:()=>u.IG,guessFieldTypeForField:()=>d.fu,guessFieldTypeFromNameAndValue:()=>d._m,guessFieldTypeFromValue:()=>d.LI,guessFieldTypes:()=>d.SX,hasLinks:()=>m.gG,hasMsResolution:()=>o.fp,histogramBucketSizes:()=>u.Zi,histogramFieldInfo:()=>u.py,histogramFieldsToFrame:()=>u.zM,histogramFrameBucketMaxFieldName:()=>u.cO,histogramFrameBucketMinFieldName:()=>u.wL,histogramTransformer:()=>u.Op,identityOverrideProcessor:()=>m.kG,intervalToAbbreviatedDurationString:()=>p.vT,isBooleanUnit:()=>g.br,isDataFrame:()=>d.aY,isDateTime:()=>p.v9,isLiveChannelJoinEvent:()=>l.mx,isLiveChannelLeaveEvent:()=>l.gH,isLiveChannelMessageEvent:()=>l.RL,isLiveChannelStatusEvent:()=>l.se,isSystemOverride:()=>l.v3,isSystemOverrideWithRef:()=>l.kf,isTableData:()=>d.Ji,isUnsignedPluginSignature:()=>l.xA,isValidDate:()=>p.AI,isValidDuration:()=>p.jO,isValidGoDuration:()=>p.IA,isValidLiveChannelAddress:()=>l.nU,localTimeFormat:()=>p.Ji,locale:()=>g.SP,locationUtil:()=>o.uT,makeClassES5Compatible:()=>o.s2,mapInternalLinkToExplore:()=>o._N,matchAllLabels:()=>o.VS,monacoLanguageRegistry:()=>M,numberOverrideProcessor:()=>m.Oh,objRemoveUndefined:()=>o.Hh,onUpdateDatasourceJsonDataOption:()=>o._R,onUpdateDatasourceJsonDataOptionChecked:()=>o.hz,onUpdateDatasourceJsonDataOptionSelect:()=>o.nx,onUpdateDatasourceOption:()=>o.z_,onUpdateDatasourceResetOption:()=>o.HD,onUpdateDatasourceSecureJsonDataOption:()=>o.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>o.TX,outerJoinDataFrames:()=>u.JP,parseDuration:()=>p.RA,parseFlags:()=>h.TL,parseLabels:()=>o.J8,parseLiveChannelAddress:()=>l.H7,rangeUtil:()=>p.cT,readCSV:()=>o.uP,reduceField:()=>u.Kx,renderMarkdown:()=>h.ap,reverseDataFrame:()=>d.Y6,scaledUnits:()=>g.Qj,selectOverrideProcessor:()=>m.AE,serializeStateToUrlParam:()=>o.S,setLocale:()=>p.i_,setTimeZoneResolver:()=>p.K7,shallowCompare:()=>d.Vv,simpleCountUnit:()=>g.SR,sortDataFrame:()=>d.aK,sortInAscendingOrder:()=>o.DA,sortInDescendingOrder:()=>o.$8,sortLogRows:()=>o.$u,sortLogsResult:()=>o.j0,sortThresholds:()=>m.bP,standardEditorsRegistry:()=>m.SO,standardFieldConfigEditorRegistry:()=>m.N6,standardTransformers:()=>u.YR,standardTransformersRegistry:()=>u.Ze,stringFormater:()=>g.vb,stringOverrideProcessor:()=>m.op,stringStartsAsRegEx:()=>h.oH,stringToJsRegex:()=>h.jO,stringToMs:()=>h.e0,systemDateFormats:()=>p.U6,textUtil:()=>h.QX,thresholdsOverrideProcessor:()=>m.ZN,timeZoneAbbrevation:()=>p.Hk,timeZoneFormatUserFriendly:()=>p.Vs,toCSV:()=>o.MJ,toDataFrame:()=>d.g0,toDataFrameDTO:()=>d.og,toDuration:()=>p.np,toFixed:()=>g.FH,toFixedScaled:()=>g.bn,toFixedUnit:()=>g.q2,toFloatOrUndefined:()=>h.dz,toIntegerOrUndefined:()=>h.By,toLegacyResponseData:()=>d.Zr,toLiveChannelId:()=>l.Aj,toNumberString:()=>h.PF,toPascalCase:()=>h.Mh,toUtc:()=>p.zh,transformDataFrame:()=>u.Hz,unEscapeStringFromRegex:()=>h.x6,unitOverrideProcessor:()=>m.VB,updateDatasourcePluginJsonDataOption:()=>o.tp,updateDatasourcePluginOption:()=>o.fd,updateDatasourcePluginResetOption:()=>o.Mf,updateDatasourcePluginSecureJsonDataOption:()=>o.uw,urlUtil:()=>o.Cj,validateFieldConfig:()=>m.gb,valueMappingsOverrideProcessor:()=>m.uj,valueMatchers:()=>u.U8,vectorator:()=>c.sD,withLoadingIndicator:()=>o.xc});var a={};s.r(a);var n={};s.r(n),s.d(n,{l:()=>A});var i={};s.r(i),s.d(i,{c:()=>B});var r={};s.r(r);var o=s("./packages/grafana-data/src/utils/index.ts"),l=s("./packages/grafana-data/src/types/index.ts"),c=s("./packages/grafana-data/src/vector/index.ts"),d=s("./packages/grafana-data/src/dataframe/index.ts"),u=s("./packages/grafana-data/src/transformations/index.ts"),p=s("./packages/grafana-data/src/datetime/index.ts"),h=s("./packages/grafana-data/src/text/index.ts"),g=s("./packages/grafana-data/src/valueFormats/index.ts"),m=s("./packages/grafana-data/src/field/index.ts"),f=s("./packages/grafana-data/src/events/eventFactory.ts"),b=s("./packages/grafana-data/src/events/types.ts"),v=s("./packages/grafana-data/node_modules/eventemitter3/index.js"),x=s.n(v),y=s("./node_modules/rxjs/dist/esm5/internal/Observable.js"),w=s("./node_modules/rxjs/dist/esm5/internal/operators/filter.js");function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class k{constructor(){j(this,"emitter",void 0),this.emitter=new(x())}publish(e){this.emitter.emit(e.type,e)}subscribe(e,t){return this.getStream(e).subscribe({next:t})}getStream(e){return new y.y((t=>{const s=e=>{t.next(e)};return this.emitter.on(e.type,s),()=>{this.emitter.off(e.type,s)}}))}newScopedBus(e,t){return new S([e],this,t)}emit(e,t){"string"==typeof e?this.emitter.emit(e,{type:e,payload:t}):this.emitter.emit(e.name,{type:e.name,payload:t})}on(e,t,s){if(t.wrapper=e=>{t(e.payload)},"string"==typeof e?this.emitter.on(e,t.wrapper):this.emitter.on(e.name,t.wrapper),s){const a=s.$on("$destroy",(()=>{this.off(e,t),a()}))}}off(e,t){"string"!=typeof e?this.emitter.off(e.name,t.wrapper):this.emitter.off(e,t.wrapper)}removeAllListeners(){this.emitter.removeAllListeners()}}class S{constructor(e,t,s){j(this,"filterConfig",void 0),j(this,"filter",(e=>!this.filterConfig.onlyLocal||e.origin===this)),this.path=e,this.eventBus=t,this.filterConfig=null!=s?s:{onlyLocal:!1}}publish(e){e.origin||(e.origin=this),this.eventBus.publish(e)}getStream(e){return this.eventBus.getStream(e).pipe((0,w.h)(this.filter))}subscribe(e,t){return this.getStream(e).subscribe({next:t})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(e,t){return new S([...this.path,e],this,t)}}function C(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class T extends b.R{}C(T,"type","data-hover");class N extends b.R{}C(N,"type","data-hover-clear");class O extends b.R{}C(O,"type","data-select");class I extends b.R{}C(I,"type","annotation-event");var P=s("./packages/grafana-data/src/themes/index.ts");const M=new(s("./packages/grafana-data/src/utils/Registry.ts").B);let F,A;!function(e){e.Auto="auto",e.Geohash="geohash",e.Coords="coords",e.Lookup="lookup"}(F||(F={})),function(e){e.Grid="grid",e.List="list"}(A||(A={}));var D=s("./packages/grafana-data/src/utils/OptionsUIBuilders.ts"),$=s("./node_modules/lodash/lodash.js"),L=s("./packages/grafana-data/src/field/FieldConfigOptionsRegistry.tsx"),E=s("./packages/grafana-data/src/field/standardFieldConfigEditorRegistry.ts");function R(e={},t){const s=new L.Z,a=E.N.list(),n={};if(e.useCustomConfig){const t=new D.v;e.useCustomConfig(t);for(const e of t.getRegistry().list())if(e.isCustom=!0,e.id="custom."+e.id,_(e,a)){var i;const t=null!==(i=n[e.category[0]])&&void 0!==i?i:[];t.push(e),n[e.category[0]]=t}else s.register(e)}for(let t of a){if(e.disableStandardOptions){if(e.disableStandardOptions.indexOf(t.id)>-1)continue}if(e.standardOptions){var r,o;const s=null===(r=e.standardOptions[t.id])||void 0===r?void 0:r.defaultValue,a=null===(o=e.standardOptions[t.id])||void 0===o?void 0:o.settings;s&&(t=Object.assign({},t,{defaultValue:s})),a&&(t=Object.assign({},t,{settings:t.settings?Object.assign({},t.settings,a):a}))}if(s.register(t),t.category&&n[t.category[0]])for(let e of n[t.category[0]])s.register(e)}for(const e of s.list())if(e.path.indexOf("[")>0)throw new Error(`[${t}] Field config paths do not support arrays: ${e.id}`);return s}function _(e,t){return Boolean(t.find((t=>e.category&&t.category&&e.category[0]===t.category[0])))}function V(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class B extends l.Sg{constructor(e){super(),V(this,"_defaults",void 0),V(this,"_fieldConfigDefaults",{defaults:{},overrides:[]}),V(this,"_fieldConfigRegistry",void 0),V(this,"_initConfigRegistry",(()=>new m.ZD)),V(this,"_optionEditors",void 0),V(this,"registerOptionEditors",void 0),V(this,"panel",void 0),V(this,"editor",void 0),V(this,"onPanelMigration",void 0),V(this,"onPanelTypeChanged",void 0),V(this,"noPadding",void 0),V(this,"dataSupport",{annotations:!1,alertStates:!1}),V(this,"angularPanelCtrl",void 0),this.panel=e}get defaults(){let e=this._defaults||{};if(!this._defaults){const t=this.optionEditors;if(!t||0===t.list().length)return null;for(const s of t.list())(0,$.set)(e,s.id,s.defaultValue)}return e}get fieldConfigDefaults(){const e=this._fieldConfigDefaults.defaults;e.custom={};for(const t of this.fieldConfigRegistry.list())void 0!==t.defaultValue&&(0,$.set)(e,t.id,t.defaultValue);return{defaults:Object.assign({},e),overrides:this._fieldConfigDefaults.overrides}}setDefaults(e){return(0,o.d9)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=e,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}get optionEditors(){if(!this._optionEditors){const e=new D.r;this._optionEditors=e.getRegistry(),this.registerOptionEditors&&this.registerOptionEditors(e)}return this._optionEditors}setEditor(e){return(0,o.d9)("PanelPlugin","setEditor","setPanelOptions"),this.editor=e,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(e){return this.onPanelMigration=e,this}setPanelChangeHandler(e){return this.onPanelTypeChanged=e,this}setPanelOptions(e){return this.registerOptionEditors=e,this}setDataSupport(e){return this.dataSupport=Object.assign({},this.dataSupport,e),this}useFieldConfig(e={}){return this._initConfigRegistry=()=>R(e,this.meta.name),this}}var z=s("./packages/grafana-schema/src/index.ts")},"./packages/grafana-data/src/text/index.ts":(e,t,s)=>{"use strict";s.d(t,{GE:()=>a.GE,Xt:()=>c,lu:()=>d,TL:()=>p,ap:()=>l,oH:()=>a.oH,jO:()=>a.jO,e0:()=>a.e0,QX:()=>h,dz:()=>a.dz,By:()=>a.By,PF:()=>a.PF,Mh:()=>a.Mh,x6:()=>a.x6});var a=s("./packages/grafana-data/src/text/string.ts"),n=s("./node_modules/marked/lib/marked.js"),i=s.n(n),r=s("./packages/grafana-data/src/text/sanitize.ts");let o=!1;function l(e,t){o||(i().setOptions({pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1}),o=!0);const s=i()(e||"");return null!=t&&t.noSanitize?s:(0,r.Nw)(s)}function c({searchWords:e,textToHighlight:t}){const s=[];for(const a of e)s.push(...d(t,a));return s}function d(e,t){if(!e||!t)return[];const s=[],{cleaned:a,flags:n}=p((e=>e.replace(/[[{(][\w,.-?:*+]+$/,""))(t));let i;try{i=new RegExp(`(?:${a})`,n)}catch(e){return s}return e.replace(i,((e,...t)=>{if(e){const a=t[t.length-2];s.push({text:e,start:a,length:e.length,end:a+e.length})}return""})),s}const u=/\(\?([ims-]+)\)/g;function p(e){const t=new Set(["g"]);return{cleaned:e.replace(u,((e,s)=>{const a=s.startsWith("-");for(let e=0;e<s.length;++e){const n=s.charAt(e);a||"-"===s.charAt(e-1)?t.delete(n):"-"!==n&&t.add(n)}return""})),flags:Array.from(t).join("")}}const h={escapeHtml:r.Xv,hasAnsiCodes:r.oT,sanitize:r.Nw,sanitizeUrl:r.Nm}},"./packages/grafana-data/src/text/sanitize.ts":(e,t,s)=>{"use strict";s.d(t,{Nw:()=>l,Nm:()=>c,oT:()=>d,Xv:()=>u});var a=s("./node_modules/xss/lib/index.js"),n=s.n(a),i=s("./packages/grafana-data/node_modules/@braintree/sanitize-url/dist/index.js");const r=Object.keys(n().whiteList).reduce(((e,t)=>(e[t]=n().whiteList[t].concat(["class","style"]),e)),{}),o=new(n().FilterXSS)({whiteList:r});function l(e){try{return o.process(e)}catch(t){return console.error("String could not be sanitized",e),e}}function c(e){return(0,i.N)(e)}function d(e){return/\u001b\[\d{1,2}m/.test(e)}function u(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},"./packages/grafana-data/src/text/string.ts":(e,t,s)=>{"use strict";s.d(t,{GE:()=>i,x6:()=>r,oH:()=>o,jO:()=>l,e0:()=>c,PF:()=>d,By:()=>u,dz:()=>p,Mh:()=>h});var a=s("./node_modules/lodash/lodash.js");const n=["(","[","{","}","]",")","|","*","+","-",".","?","<",">","#","&","^","$"],i=e=>e?n.reduce(((e,t)=>e.replace(t,"\\"+t)),e):e,r=e=>e?n.reduce(((e,t)=>e.replace("\\"+t,t)),e):e;function o(e){return!!e&&"/"===e[0]}function l(e){if(!o(e))return new RegExp(`^${e}$`);const t=e.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));if(!t)throw new Error(`'${e}' is not a valid regular expression.`);return new RegExp(t[1],t[2])}function c(e){if(!e)return 0;const t=parseInt(e,10),s=e.substr(String(t).length),a=36e5;switch(s){case"s":return 1e3*t;case"m":return 6e4*t;case"h":return t*a;case"d":return 864e5*t;default:if(!s)return isNaN(t)?0:t;throw new Error("Not supported unit: "+s)}}function d(e){return null!=e&&Number.isFinite(e)?e.toString():""}function u(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function p(e){if(!e)return;const t=parseFloat(e);return isNaN(t)?void 0:t}const h=e=>{const t=(0,a.camelCase)(e);return t.charAt(0).toUpperCase()+t.substring(1)}},"./packages/grafana-data/src/themes/colorManipulator.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{hexToRgb:()=>r,rgbToHex:()=>o,asHexString:()=>l,hslToRgb:()=>c,decomposeColor:()=>d,recomposeColor:()=>u,getContrastRatio:()=>p,getLuminance:()=>h,emphasize:()=>g,alpha:()=>m,darken:()=>f,lighten:()=>b});var a=s("./node_modules/tinycolor2/tinycolor.js"),n=s.n(a);function i(e,t=0,s=1){return Math.min(Math.max(t,e),s)}function r(e){e=e.substr(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let s=e.match(t);return s&&1===s[0].length&&(s=s.map((e=>e+e))),s?`rgb${4===s.length?"a":""}(${s.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function o(e){if(0===e.indexOf("#"))return e;const{values:t}=d(e);return`#${t.map((e=>function(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}(e))).join("")}`}function l(e){if("#"===e[0])return e;const t=n()(e);return 1===t.getAlpha()?t.toHexString():t.toHex8String()}function c(e){const t=d(e),{values:s}=t,a=s[0],n=s[1]/100,i=s[2]/100,r=n*Math.min(i,1-i),o=(e,t=(e+a/30)%12)=>i-r*Math.max(Math.min(t-3,9-t,1),-1);let l="rgb";const c=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===t.type&&(l+="a",c.push(s[3])),u({type:l,values:c})}function d(e){if("string"!=typeof e)return e;if("#"===e.charAt(0))return d(r(e));const t=e.indexOf("("),s=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(s))throw new Error(`Unsupported '${e}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let a,n=e.substring(t+1,e.length-1);if("color"===s){if(n=n.split(" "),a=n.shift(),4===n.length&&"/"===n[3].charAt(0)&&(n[3]=n[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a))throw new Error(`Unsupported ${a} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else n=n.split(",");return n=n.map((e=>parseFloat(e))),{type:s,values:n,colorSpace:a}}function u(e){const{type:t,colorSpace:s}=e;let a=e.values;return-1!==t.indexOf("rgb")?a=a.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),a=-1!==t.indexOf("color")?`${s} ${a.join(" ")}`:`${a.join(", ")}`,`${t}(${a})`}function p(e,t,s){const a=h(e),n=h(t,s);return(Math.max(a,n)+.05)/(Math.min(a,n)+.05)}function h(e,t){const s=d(e);let a="hsl"===s.type?d(c(e)).values:s.values;if(t&&"rgba"===s.type){const e=d(t),s=a[3];a[0]=a[0]*s+e.values[0]*(1-s),a[1]=a[1]*s+e.values[1]*(1-s),a[2]=a[2]*s+e.values[2]*(1-s)}const n=a.map((e=>("color"!==s.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)));return Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}function g(e,t=.15){return h(e)>.5?f(e,t):b(e,t)}function m(e,t){if(""===e)return"#000000";if(t=i(t),"#"===e[0]){if(9===e.length)e=e.substring(0,7);else if(e.length<=5){let t="#";for(let s=1;s<4;s++)t+=e[s]+e[s];e=t}return e+Math.round(255*t).toString(16).padStart(2,"0")}if("("===e[3])return e.replace(")",`, ${t})`);if("("===e[4])return e.substring(0,e.lastIndexOf(","))+`, ${t})`;const s=d(e);return"color"===s.type?s.values[3]=`/${t}`:s.values[3]=t,u(s)}function f(e,t){const s=d(e);if(t=i(t),-1!==s.type.indexOf("hsl"))s.values[2]*=1-t;else if(-1!==s.type.indexOf("rgb")||-1!==s.type.indexOf("color"))for(let e=0;e<3;e+=1)s.values[e]*=1-t;return u(s)}function b(e,t){const s=d(e);if(t=i(t),-1!==s.type.indexOf("hsl"))s.values[2]+=(100-s.values[2])*t;else if(-1!==s.type.indexOf("rgb"))for(let e=0;e<3;e+=1)s.values[e]+=(255-s.values[e])*t;else if(-1!==s.type.indexOf("color"))for(let e=0;e<3;e+=1)s.values[e]+=(1-s.values[e])*t;return u(s)}},"./packages/grafana-data/src/themes/index.ts":(e,t,s)=>{"use strict";s.d(t,{So:()=>p.GrafanaTheme2,v:()=>a.ThemeBreakpoints,Zs:()=>a.ThemeBreakpointsKey,aG:()=>n.ThemeColors,yl:()=>p.ThemeRichColor,ly:()=>i.ThemeShadows,wB:()=>r.ThemeShape,EQ:()=>o.ThemeSpacing,v$:()=>l.ThemeTransitions,zc:()=>c.ThemeTypography,XZ:()=>c.ThemeTypographyVariant,Z2:()=>u.ThemeVisualizationColors,Nz:()=>u.ThemeVizColor,h8:()=>u.ThemeVizHue,Kh:()=>d.ThemeZIndices,r8:()=>m,jG:()=>le});var a={};s.r(a),s.d(a,{_:()=>h});var n={};s.r(n),s.d(n,{i:()=>U});var i={};s.r(i),s.d(i,{G:()=>q});var r={};s.r(r),s.d(r,{r:()=>H});var o={};s.r(o),s.d(o,{_:()=>G});var l={};s.r(l),s.d(l,{ig:()=>J});var c={};s.r(c),s.d(c,{f:()=>te});var d={};s.r(d),s.d(d,{W:()=>ie});var u={};s.r(u),s.d(u,{x:()=>re});var p={};function h(){const e="px",t={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};return{values:t,up:function(e){return`@media (min-width:${"number"==typeof e?e:t[e]}px)`},down:function(e){return`@media (max-width:${("number"==typeof e?e:t[e])-.05}px)`},keys:["xs","sm","md","lg","xl","xxl"],unit:e}}s.r(p);var g=s("./node_modules/lodash/lodash.js"),m=s("./packages/grafana-data/src/themes/colorManipulator.ts");const f="#fff",b="#000",v="#22252b",x="#181b1f",y="#111217",w="#F4F5F5",j="#F4F5F5",k="#3D71D9",S="#6E9FFF",C="#D10E5C",T="#FF5286",N="#1A7F4B",O="#6CCF8E",I="#F5B73D",P="#F8D06B",M="#3871DC",F="#1F62E0",A="#E0226E",D="#CF0E5B",$="#1B855E",L="#0A764E",E="#FAD34A",R="#8A6C00",_=["primary","secondary","info","warning","success","error","tonalOffset","hoverFactor","contrastThreshold"];function V(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class B{constructor(){V(this,"mode","dark"),V(this,"whiteBase","204, 204, 220"),V(this,"border",{weak:`rgba(${this.whiteBase}, 0.07)`,medium:`rgba(${this.whiteBase}, 0.15)`,strong:`rgba(${this.whiteBase}, 0.25)`}),V(this,"text",{primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.57)`,link:S,maxContrast:f}),V(this,"primary",{main:k,text:S,border:S}),V(this,"secondary",{main:`rgba(${this.whiteBase}, 0.16)`,shade:`rgba(${this.whiteBase}, 0.20)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:this.border.strong}),V(this,"info",this.primary),V(this,"error",{main:C,text:T}),V(this,"success",{main:N,text:O}),V(this,"warning",{main:I,text:P}),V(this,"background",{canvas:y,primary:x,secondary:v}),V(this,"action",{hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38}),V(this,"gradients",{brandHorizontal:" linear-gradient(270deg, #F55F3E 0%, #FF8833 100%);",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%);"}),V(this,"contrastThreshold",3),V(this,"hoverFactor",.03),V(this,"tonalOffset",.15)}}class z{constructor(){V(this,"mode","light"),V(this,"blackBase","36, 41, 46"),V(this,"primary",{main:M,border:F,text:F}),V(this,"text",{primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:b}),V(this,"border",{weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`}),V(this,"secondary",{main:`rgba(${this.blackBase}, 0.16)`,shade:`rgba(${this.blackBase}, 0.20)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.strong}),V(this,"info",{main:M,text:F}),V(this,"error",{main:A,text:D,border:D}),V(this,"success",{main:$,text:L}),V(this,"warning",{main:E,text:R}),V(this,"background",{canvas:w,primary:f,secondary:j}),V(this,"action",{hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38}),V(this,"gradients",{brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%);",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%);"}),V(this,"contrastThreshold",3),V(this,"hoverFactor",.03),V(this,"tonalOffset",.2)}}function U(e){var t;const s=new B,a=new z,n="dark"===(null!==(t=e.mode)&&void 0!==t?t:"dark")?s:a,{primary:i=n.primary,secondary:r=n.secondary,info:o=n.info,warning:l=n.warning,success:c=n.success,error:d=n.error,tonalOffset:u=n.tonalOffset,hoverFactor:p=n.hoverFactor,contrastThreshold:h=n.contrastThreshold}=e,f=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,_);function b(e,t=h){return(0,m.getContrastRatio)(s.text.maxContrast,e,n.background.primary)>=t?s.text.maxContrast:a.text.maxContrast}const v=({color:e,name:t})=>{if(!(e=Object.assign({},e,{name:t})).main)throw new Error(`Missing main color for ${t}`);return e.text||(e.text=e.main),e.border||(e.border=e.text),e.shade||(e.shade="light"===n.mode?(0,m.darken)(e.main,u):(0,m.lighten)(e.main,u)),e.transparent||(e.transparent="light"===n.mode?(0,m.alpha)(e.main,.08):(0,m.alpha)(e.main,.15)),e.contrastText||(e.contrastText=b(e.main)),e};return(0,g.merge)(Object.assign({},n,{primary:v({color:i,name:"primary"}),secondary:v({color:r,name:"secondary"}),info:v({color:o,name:"info"}),error:v({color:d,name:"error"}),success:v({color:c,name:"success"}),warning:v({color:l,name:"warning"}),getContrastText:b,emphasize:(e,t)=>(0,m.emphasize)(e,null!=t?t:p)}),f)}function q(e){return"dark"===e.mode?{z1:"0px 1px 2px rgba(24, 26, 27, 0.75)",z2:"0px 4px 8px rgba(24, 26, 27, 0.75)",z3:"0px 10px 20px rgb(20,20,20)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function H(e){var t;const s=null!==(t=e.borderRadius)&&void 0!==t?t:2;return{borderRadius:e=>`${(null!=e?e:1)*s}px`}}function G(e={}){const{gridSize:t=8}=e,s=(...e)=>(0===e.length&&(e[0]=1),e.map((e=>{const s="string"==typeof(a=e)?a:a*t;var a;return"number"==typeof s?`${s}px`:s})).join(" "));return s.gridSize=t,s}const W={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Z={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Q(e=["all"],t={}){const{duration:s=Z.standard,easing:a=W.easeInOut,delay:n=0}=t;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof s?s:Y(s)} ${a} ${"string"==typeof n?n:Y(n)}`)).join(",")}function K(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function Y(e){return`${Math.round(e)}ms`}function J(){return{create:Q,duration:Z,easing:W,getAutoHeightDuration:K}}const X='"Roboto", "Helvetica", "Arial", sans-serif',ee="'Roboto Mono', monospace";function te(e,t={}){const{fontFamily:s=X,fontFamilyMonospace:a=ee,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:r=400,fontWeightMedium:o=500,fontWeightBold:l=500,htmlFontSize:c=14}=t;const d=n/14,u=e=>e/c*d+"rem",p=(e,t,a,n,i)=>{return Object.assign({fontFamily:s,fontWeight:e,fontSize:u(t),lineHeight:a},s===X?{letterSpacing:(r=n/t,Math.round(1e5*r)/1e5)+"em"}:{},i);var r},h={h1:p(i,28,1.167,-.25),h2:p(i,24,1.2,0),h3:p(r,21,1.167,0),h4:p(r,18,1.235,.25),h5:p(r,16,1.334,0),h6:p(o,14,1.6,.15),body:p(r,14,1.5,.15),bodySmall:p(r,12,1.5,.15)};return Object.assign({htmlFontSize:c,pxToRem:u,fontFamily:s,fontFamilyMonospace:a,fontSize:n,fontWeightLight:i,fontWeightRegular:r,fontWeightMedium:o,fontWeightBold:l,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"}},h)}var se=s("./packages/grafana-data/src/types/index.ts");function ae(e){const t={name:"Grafana Default",typography:{fontFamily:{sansSerif:e.typography.fontFamily,monospace:e.typography.fontFamilyMonospace},size:{base:`${e.typography.fontSize}px`,xs:e.typography.size.xs,sm:e.typography.size.sm,md:e.typography.size.md,lg:e.typography.size.lg},heading:{h1:e.typography.h1.fontSize,h2:e.typography.h2.fontSize,h3:e.typography.h3.fontSize,h4:e.typography.h4.fontSize,h5:e.typography.h5.fontSize,h6:e.typography.h6.fontSize},weight:{light:e.typography.fontWeightLight,regular:e.typography.fontWeightRegular,semibold:e.typography.fontWeightMedium,bold:e.typography.fontWeightBold},lineHeight:{xs:e.typography.bodySmall.lineHeight,sm:e.typography.bodySmall.lineHeight,md:e.typography.body.lineHeight,lg:e.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${e.breakpoints.values.xs}px`,sm:`${e.breakpoints.values.sm}px`,md:`${e.breakpoints.values.md}px`,lg:`${e.breakpoints.values.lg}px`,xl:`${e.breakpoints.values.xl}px`,xxl:`${e.breakpoints.values.xxl}px`},spacing:{base:e.spacing.gridSize,insetSquishMd:e.spacing(.5,1),d:e.spacing(2),xxs:e.spacing(.25),xs:e.spacing(.5),sm:e.spacing(1),md:e.spacing(2),lg:e.spacing(3),xl:e.spacing(4),gutter:e.spacing(4),formSpacingBase:e.spacing.gridSize,formMargin:4*e.spacing.gridSize+"px",formFieldsetMargin:2*e.spacing.gridSize+"px",formInputHeight:4*e.spacing.gridSize,formButtonHeight:4*e.spacing.gridSize,formInputPaddingHorizontal:`${e.spacing.gridSize}px`,formInputAffixPaddingHorizontal:e.spacing.gridSize/2+"px",formInputMargin:2*e.spacing.gridSize+"px",formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${e.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:e.shape.borderRadius(1),md:e.shape.borderRadius(2),lg:e.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:e.spacing.gridSize*e.components.height.sm,md:e.spacing.gridSize*e.components.height.md,lg:e.spacing.gridSize*e.components.height.lg},panelPadding:e.components.panel.padding*e.spacing.gridSize,panelHeaderHeight:e.spacing.gridSize*e.components.panel.headerHeight,zIndex:e.zIndex},s=Object.assign({},ne,{black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"}),a={bg1:e.colors.background.primary,bg2:e.colors.background.secondary,bg3:e.colors.action.hover,dashboardBg:e.colors.background.canvas,bgBlue1:e.colors.primary.main,bgBlue2:e.colors.primary.shade},n={border1:e.colors.border.weak,border2:e.colors.border.medium,border3:e.colors.border.strong},i={textStrong:e.colors.text.maxContrast,textHeading:e.colors.text.primary,text:e.colors.text.primary,textSemiWeak:e.colors.text.secondary,textWeak:e.colors.text.secondary,textFaint:e.colors.text.disabled,textBlue:e.colors.primary.text},r={formLabel:e.colors.text.primary,formDescription:e.colors.text.secondary,formInputBg:e.components.input.background,formInputBgDisabled:e.colors.action.disabledBackground,formInputBorder:e.components.input.borderColor,formInputBorderHover:e.components.input.borderHover,formInputBorderActive:e.colors.primary.border,formInputBorderInvalid:e.colors.error.border,formInputPlaceholderText:e.colors.text.disabled,formInputText:e.components.input.text,formInputDisabledText:e.colors.action.disabledText,formFocusOutline:e.colors.primary.main,formValidationMessageText:e.colors.error.contrastText,formValidationMessageBg:e.colors.error.main};return Object.assign({},t,{type:"dark"===e.colors.mode?se.Qu.Dark:se.Qu.Light,isDark:e.isDark,isLight:e.isLight,name:e.name,palette:Object.assign({},s,{brandPrimary:s.orange,brandSuccess:e.colors.success.main,brandWarning:e.colors.warning.main,brandDanger:e.colors.error.main,queryRed:e.colors.error.text,queryGreen:e.colors.success.text,queryPurple:"#fe85fc",queryOrange:s.orange,online:e.colors.success.main,warn:e.colors.success.main,critical:e.colors.success.main}),colors:Object.assign({},a,n,r,i,{bodyBg:e.colors.background.canvas,panelBg:e.components.panel.background,panelBorder:e.components.panel.borderColor,pageHeaderBg:e.colors.background.canvas,pageHeaderBorder:e.colors.background.canvas,dropdownBg:r.formInputBg,dropdownShadow:s.black,dropdownOptionHoverBg:a.bg2,link:e.colors.text.primary,linkDisabled:e.colors.text.disabled,linkHover:e.colors.text.maxContrast,linkExternal:e.colors.text.link}),shadows:{listItem:"none"},visualization:e.visualization})}const ne={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},ie={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function re(e){let t=[];"dark"===e.mode?t=[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]:"light"===e.mode&&(t=[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]);const s={};for(const e of t)for(const t of e.shades)if(s[t.name]=t.color,t.aliases)for(const e of t.aliases)s[e]=t.color;s.transparent="rgba(0,0,0,0)",s["panel-bg"]=e.background.primary,s.text=e.text.primary;return{hues:t,palette:["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],getColorByName:e=>{if(!e)return se.R3;const t=s[e];if(t)return t;if("#"===e[0])return e;if(e.indexOf("rgb")>-1)return e;const a=oe[e.toLowerCase()];return a?(s[e]=a,a):e}}}const oe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function le(e={}){const{name:t="Dark",colors:s={},spacing:a={},shape:n={},typography:i={}}=e,r=U(s),o=h(),l=G(a),c=H(n),d=te(0,i),u=q(r),p=J(),g=function(e,t){const s={padding:1,headerHeight:4,background:e.background.primary,borderColor:e.border.weak,boxShadow:"none"},a={borderColor:e.border.medium,borderHover:e.border.strong,text:e.text.primary,background:"dark"===e.mode?e.background.canvas:e.background.primary};return{height:{sm:3,md:4,lg:6},input:a,panel:s,dropdown:{background:a.background},tooltip:{background:"light"===e.mode?"#555":e.background.secondary,text:"light"===e.mode?"#FFF":e.text.primary},dashboard:{background:e.background.canvas,padding:1},overlay:{background:"dark"===e.mode?"rgba(0, 0, 0, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:60}}}(r),m=re(r),f={name:t,isDark:"dark"===r.mode,isLight:"light"===r.mode,colors:r,breakpoints:o,spacing:l,shape:c,components:g,typography:d,shadows:u,transitions:p,visualization:m,zIndex:Object.assign({},ie)};return Object.assign({},f,{v1:ae(f)})}},"./packages/grafana-data/src/transformations/fieldReducer.ts":(e,t,s)=>{"use strict";s.d(t,{gz:()=>r,Kx:()=>o,TB:()=>l,uP:()=>c});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/types/index.ts"),i=s("./packages/grafana-data/src/utils/Registry.ts");let r;function o(e){var t;const{field:s,reducers:a}=e;if(!s||!a||a.length<1)return{};if(null!==(t=s.state)&&void 0!==t&&t.calcs){const e=[];for(const t of a)s.state.calcs.hasOwnProperty(t)||e.push(t);if(e.length<1)return Object.assign({},s.state.calcs)}s.state||(s.state={});const i=l.list(a);if(s.values.length<1){const e=Object.assign({},s.state.calcs);for(const t of i)e[t.id]=null!==t.emptyInputResult?t.emptyInputResult:null;return s.state.calcs=e}const{nullValueMode:r}=s.config,o=r===n.Gl.Ignore,d=r===n.Gl.AsZero;if(1===i.length&&i[0].reduce){const e=i[0].reduce(s,o,d);return s.state.calcs=Object.assign({},s.state.calcs,e),e}let u=c(s,o,d);for(const e of i)!u.hasOwnProperty(e.id)&&e.reduce&&(u=Object.assign({},u,e.reduce(s,o,d)));return s.state.calcs=Object.assign({},s.state.calcs,u),u}!function(e){e.sum="sum",e.max="max",e.min="min",e.logmin="logmin",e.mean="mean",e.last="last",e.first="first",e.count="count",e.range="range",e.diff="diff",e.diffperc="diffperc",e.delta="delta",e.step="step",e.firstNotNull="firstNotNull",e.lastNotNull="lastNotNull",e.changeCount="changeCount",e.distinctCount="distinctCount",e.allIsZero="allIsZero",e.allIsNull="allIsNull",e.allValues="allValues"}(r||(r={}));const l=new i.B((()=>[{id:r.lastNotNull,name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:h},{id:r.last,name:"Last",description:"Last value",standard:!0,reduce:p},{id:r.first,name:"First",description:"First Value",standard:!0,reduce:d},{id:r.firstNotNull,name:"First",description:"First non-null value",standard:!0,reduce:u},{id:r.min,name:"Min",description:"Minimum Value",standard:!0},{id:r.max,name:"Max",description:"Maximum Value",standard:!0},{id:r.mean,name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:r.sum,name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:r.count,name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:r.range,name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:r.delta,name:"Delta",description:"Cumulative change in value",standard:!0},{id:r.step,name:"Step",description:"Minimum interval between values",standard:!0},{id:r.diff,name:"Difference",description:"Difference between first and last values",standard:!0},{id:r.logmin,name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:r.allIsZero,name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:r.allIsNull,name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:r.changeCount,name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:g},{id:r.distinctCount,name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:m},{id:r.diffperc,name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:r.allValues,name:"All values",description:"Returns an array with all values",standard:!1,reduce:e=>({allValues:e.values.toArray()})}]));function c(e,t,s){const i={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},r=e.values;i.count=r.length;const o=e.type===n.fS.number||n.fS.time;for(let e=0;e<r.length;e++){let a=r.get(e);if(0===e&&(i.first=a),i.last=a,null===a){if(t)continue;s&&(a=0)}if(null!=a){const t=null===i.firstNotNull;if(t&&(i.firstNotNull=a),o){if(i.sum+=a,i.allIsNull=!1,i.nonNullCount++,!t){const t=a-i.lastNotNull;i.step>t&&(i.step=t),i.lastNotNull>a?(i.previousDeltaUp=!1,e===r.length-1&&(i.delta+=a)):(i.previousDeltaUp?i.delta+=t:i.delta+=a,i.previousDeltaUp=!0)}a>i.max&&(i.max=a),a<i.min&&(i.min=a),a<i.logmin&&a>0&&(i.logmin=a)}0!==a&&(i.allIsZero=!1),i.lastNotNull=a}}return i.max===-Number.MAX_VALUE&&(i.max=null),i.min===Number.MAX_VALUE&&(i.min=null),i.step===Number.MAX_VALUE&&(i.step=null),i.nonNullCount>0&&(i.mean=i.sum/i.nonNullCount),i.allIsNull&&(i.allIsZero=!1),null!==i.max&&null!==i.min&&(i.range=i.max-i.min),(0,a.isNumber)(i.firstNotNull)&&(0,a.isNumber)(i.lastNotNull)&&(i.diff=i.lastNotNull-i.firstNotNull),(0,a.isNumber)(i.firstNotNull)&&(0,a.isNumber)(i.diff)&&(i.diffperc=i.diff/i.firstNotNull),i}function d(e,t,s){return{first:e.values.get(0)}}function u(e,t,s){const a=e.values;for(let e=0;e<a.length;e++){const t=a.get(e);if(null!=t&&void 0!==t)return{firstNotNull:t}}return{firstNotNull:null}}function p(e,t,s){const a=e.values;return{last:a.get(a.length-1)}}function h(e,t,s){const a=e.values;let n=a.length-1;for(;n>=0;){const e=a.get(n--);if(null!=e&&void 0!==e)return{lastNotNull:e}}return{lastNotNull:null}}function g(e,t,s){const a=e.values;let n=0,i=!0,r=null;for(let e=0;e<a.length;e++){let o=a.get(e);if(null===o){if(t)continue;s&&(o=0)}i||r===o||n++,i=!1,r=o}return{changeCount:n}}function m(e,t,s){const a=e.values,n=new Set;for(let e=0;e<a.length;e++){let i=a.get(e);if(null===i){if(t)continue;s&&(i=0)}n.add(i)}return{distinctCount:n.size}}},"./packages/grafana-data/src/transformations/index.ts":(e,t,s)=>{"use strict";s.d(t,{Ys:()=>ee.Ys,VC:()=>ee.ByNamesMatcherOptions,Wk:()=>r.W,mi:()=>i.mi,E4:()=>i.E4,Ff:()=>i.Ff,gz:()=>W.gz,Py:()=>ee.RegexpOrNamesMatcherOptions,ao:()=>a.RenameByRegexTransformerOptions,xr:()=>n.TransformerRegistryItem,fb:()=>n.TransformerUIProps,mE:()=>i.mE,gY:()=>B.gY,uP:()=>W.uP,J_:()=>H,Ls:()=>o.Ls,TB:()=>W.TB,Ac:()=>o.Ac,sq:()=>o.sq,b9:()=>o.b9,qr:()=>B.qr,IG:()=>o.IG,Zi:()=>B.Zi,py:()=>B.py,zM:()=>B.zM,cO:()=>B.cO,wL:()=>B.wL,Op:()=>B.Op,JP:()=>te.JP,Kx:()=>W.Kx,YR:()=>G,Ze:()=>K,Hz:()=>X,U8:()=>o.U8});var a={};s.r(a),s.d(a,{J:()=>R});var n={};s.r(n),s.d(n,{Z:()=>K});var i=s("./packages/grafana-data/src/transformations/matchers/ids.ts"),r=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),o=s("./packages/grafana-data/src/transformations/matchers.ts"),l=s("./packages/grafana-data/src/transformations/transformers/reduce.ts"),c=s("./packages/grafana-data/src/transformations/transformers/concat.ts"),d=s("./packages/grafana-data/src/transformations/transformers/calculateField.ts"),u=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),p=s("./packages/grafana-data/src/transformations/transformers/noop.ts");const h={id:r.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:e=>t=>e.include||e.exclude?t.pipe((0,u.U)((t=>{const s=e.include?(0,o.sq)(e.include):null,a=e.exclude?(0,o.sq)(e.exclude):null,n=[];for(const e of t){const i=[];for(let n=0;n<e.fields.length;n++){const r=e.fields[n];if(a){if(a(r,e,t))continue;s||i.push(r)}s&&s(r,e,t)&&i.push(r)}if(!i.length)continue;const r=Object.assign({},e,{fields:i});n.push(r)}return n}))):t.pipe(p.d.operator({}))},g={id:r.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:e=>t=>e.include||e.exclude?t.pipe((0,u.U)((t=>{const s=e.include?(0,o.b9)(e.include):null,a=e.exclude?(0,o.b9)(e.exclude):null,n=[];for(const e of t){if(a){if(a(e))continue;s||n.push(e)}s&&s(e)&&n.push(e)}return n}))):t.pipe(p.d.operator({}))},m={id:r.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:e=>t=>t.pipe(h.operator({include:f(e.include),exclude:f(e.exclude)}))},f=e=>{if(!e)return;const{names:t,pattern:s}=e;return Array.isArray(t)&&0!==t.length||s?s?Array.isArray(t)&&0!==t.length?{id:i.mi.byRegexpOrNames,options:e}:{id:i.mi.byRegexp,options:s}:{id:i.mi.byNames,options:{names:t}}:void 0},b={id:r.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:e=>t=>{const s={};return e.include&&(s.include={id:i.E4.byRefId,options:e.include}),e.exclude&&(s.exclude={id:i.E4.byRefId,options:e.exclude}),t.pipe(g.operator(s))}};var v=s("./packages/grafana-data/src/transformations/transformers/order.ts"),x=s("./packages/grafana-data/src/field/fieldState.ts");const y={id:r.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:e=>t=>t.pipe((0,u.U)((t=>{const s=w(e.renameByName);return Array.isArray(t)&&0!==t.length?t.map((e=>Object.assign({},e,{fields:s(e)}))):t})))},w=e=>t=>e&&0!==Object.keys(e).length?t.fields.map((s=>{const a=(0,x.C)(s,t),n=e[a];return"string"!=typeof n||0===n.length?s:Object.assign({},s,{config:Object.assign({},s.config,{displayName:n}),state:Object.assign({},s.state,{displayName:n})})})):t.fields,j={id:r.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:e=>t=>t.pipe(m.operator({exclude:{names:k(e.excludeByName)}}),v.t.operator(e),y.operator(e))},k=e=>e?Object.keys(e).filter((t=>e[t])):[];var S=s("./packages/grafana-data/src/transformations/transformers/seriesToColumns.ts"),C=s("./node_modules/lodash/lodash.js"),T=s("./packages/grafana-data/src/types/dataFrame.ts"),N=s("./packages/grafana-data/src/dataframe/utils.ts"),O=s("./packages/grafana-data/src/dataframe/index.ts"),I=s("./packages/grafana-data/src/vector/index.ts");const P={id:r.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:e=>e=>e.pipe((0,u.U)((e=>{if(!Array.isArray(e)||e.length<=1)return e;if(!(0,N.hZ)(e))return e;const t={},s=new Set,a=new O.vA,n={name:T.rN,values:new I.Gt,config:{},type:T.fS.string};for(let i=0;i<e.length;i++){const r=e[i];for(let e=0;e<r.fields.length;e++){const o=r.fields[e];o.type!==T.fS.time?s.has(T.M5)||(a.addField(M(o,T.M5)),s.add(T.M5)):(t[i]=e,s.has(T.Ls)||(a.addField(M(o,T.Ls)),a.addField(n),s.add(T.Ls)))}}for(let s=0;s<e.length;s++){const n=e[s];for(let e=0;e<n.length;e++){const i=t[s],r=0===i?1:0;a.add({[T.Ls]:n.fields[i].values.get(e),[T.rN]:(0,x.n)(n),[T.M5]:n.fields[r].values.get(e)})}}return[(0,O.aK)(a,0,!0)]})))},M=(e,t)=>Object.assign({},(0,C.omit)(e,["values","state","labels","config","name"]),{name:t,values:new I.Gt,config:Object.assign({},(0,C.omit)(e.config,["displayName","displayNameFromDS"]))});var F=s("./packages/grafana-data/src/transformations/transformers/labelsToFields.ts"),A=s("./packages/grafana-data/src/transformations/transformers/ensureColumns.ts"),D=s("./packages/grafana-data/src/transformations/transformers/groupBy.ts"),$=s("./packages/grafana-data/src/field/index.ts");const L={id:r.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,u.U)((t=>{var s;return Array.isArray(t)&&0!==t.length&&null!=e&&null!==(s=e.sort)&&void 0!==s&&s.length?function(e,t){return e.map((e=>{const s=function(e,t){return t.map((t=>null!=t.index?t:Object.assign({},t,{index:e.fields.findIndex((s=>t.field===(0,$.CZ)(s,e)))})))}(e,t);return s.length&&null!=s[0].index?(0,O.aK)(e,s[0].index,s[0].desc):e}))}(t,e.sort):t})))};var E=s("./packages/grafana-data/src/transformations/transformers/merge.ts");const R={id:r.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:e=>t=>t.pipe((0,u.U)((t=>Array.isArray(t)&&0!==t.length?t.map(_(e)):t)))},_=e=>t=>{const s=new RegExp(e.regex),a=t.fields.map((a=>{const n=(0,x.C)(a,t);if(!s.test(n))return a;const i=n.replace(s,e.renamePattern);return Object.assign({},a,{config:Object.assign({},a.config,{displayName:i}),state:Object.assign({},a.state,{displayName:i})})}));return Object.assign({},t,{fields:a})};var V=s("./packages/grafana-data/src/transformations/transformers/filterByValue.ts"),B=s("./packages/grafana-data/src/transformations/transformers/histogram.ts"),z=s("./packages/grafana-data/src/datetime/index.ts");const U={id:r.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:e=>t=>t.pipe((0,u.U)((t=>U.transformer(e)(t)))),transformer:e=>t=>{if(!Array.isArray(t)||0===t.length)return t;const s=function(e,t){if(!e.conversions.length)return t;const s=t.map((e=>Object.assign({},e)));for(const t of e.conversions){if(!t.targetField)continue;const e=o.Ls.get(i.mi.byName).get(t.targetField);for(const a of s)a.fields=a.fields.map((n=>e(n,a,s)?q(n,t):n))}return s}(e,t);return s||[]}};function q(e,t){switch(t.destinationType){case T.fS.time:return H(e,t.dateFormat);case T.fS.number:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++){const s=+t[e];t[e]=Number.isFinite(s)?s:null}return Object.assign({},e,{type:T.fS.number,values:new I.Gt(t)})}(e);case T.fS.string:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)t[e]=`${t[e]}`;return Object.assign({},e,{type:T.fS.string,values:new I.Gt(t)})}(e);case T.fS.boolean:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)t[e]=Boolean(!!t[e]);return Object.assign({},e,{type:T.fS.boolean,values:new I.Gt(t)})}(e);default:return e}}function H(e,t){const s="number"==typeof e.values.get(0);return e.type===T.fS.time&&s?e:s?Object.assign({},e,{type:T.fS.time}):function(e,t){let s=t?{format:t}:void 0;const a=e.values.toArray().slice();for(let e=0;e<a.length;e++)if(a[e]){let t=(0,z.J)(a[e],s).valueOf();a[e]=Number.isFinite(t)?t:null}else a[e]=null;return Object.assign({},e,{type:T.fS.time,values:new I.Gt(a)})}(e,t)}const G={noopTransformer:p.d,filterFieldsTransformer:h,filterFieldsByNameTransformer:m,filterFramesTransformer:g,filterFramesByRefIdTransformer:b,filterByValueTransformer:V.JA,orderFieldsTransformer:v.t,organizeFieldsTransformer:j,reduceTransformer:l.mf,concatenateTransformer:c.aE,calculateFieldTransformer:d.U,seriesToColumnsTransformer:S.u,seriesToRowsTransformer:P,renameFieldsTransformer:y,labelsToFieldsTransformer:F.r,ensureColumnsTransformer:A.W,groupByTransformer:D.i,sortByTransformer:L,mergeTransformer:E.R,renameByRegexTransformer:R,histogramTransformer:B.Op,convertFieldTypeTransformer:U};var W=s("./packages/grafana-data/src/transformations/fieldReducer.ts"),Z=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),Q=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");const K=new(s("./packages/grafana-data/src/utils/Registry.ts").B),Y=e=>t=>{var s;const a=K.get(e.id);if(!a)return t;const n=null!==(s=a.transformation.defaultOptions)&&void 0!==s?s:{},i=Object.assign({},n,e.options);return t.pipe((0,Q.z)((e=>(0,Z.of)(e).pipe(a.transformation.operator(i),J(e,a)))))},J=(e,t)=>s=>s.pipe((0,u.U)((s=>{if(s===e)return s;for(const e of s)e.meta||(e.meta={}),e.meta.transformations?e.meta.transformations=[...e.meta.transformations,t.id]:e.meta.transformations=[t.id];return s})));function X(e,t){const s=(0,Z.of)(t);if(!e.length)return s;const a=[];for(let t=0;t<e.length;t++){const s=e[t];s.disabled||a.push(Y(s))}return s.pipe.apply(s,a)}var ee=s("./packages/grafana-data/src/transformations/matchers/nameMatcher.ts"),te=s("./packages/grafana-data/src/transformations/transformers/joinDataFrames.ts")},"./packages/grafana-data/src/transformations/matchers.ts":(e,t,s)=>{"use strict";s.d(t,{Ls:()=>C,Ac:()=>T,sq:()=>O,b9:()=>I,IG:()=>P,U8:()=>N});var a=s("./packages/grafana-data/src/transformations/matchers/predicates.ts"),n=s("./packages/grafana-data/src/transformations/matchers/nameMatcher.ts"),i=s("./packages/grafana-data/src/types/dataFrame.ts"),r=s("./packages/grafana-data/src/transformations/matchers/ids.ts");const o={id:r.mi.byType,name:"Field Type",description:"match based on the field type",defaultOptions:i.fS.number,get:e=>(t,s,a)=>e===t.type,getOptionsDisplayText:e=>`Field type: ${e}`},l={id:r.mi.numeric,name:"Numeric Fields",description:"Fields with type number",get:()=>o.get(i.fS.number),getOptionsDisplayText:()=>"Numeric Fields"},c={id:r.mi.time,name:"Time Fields",description:"Fields with type time",get:()=>o.get(i.fS.time),getOptionsDisplayText:()=>"Time Fields"};var d=s("./packages/grafana-data/src/text/index.ts");const u={id:r.E4.byRefId,name:"Query refId",description:"match the refId",defaultOptions:"A",get:e=>{const t=(0,d.jO)(e);return e=>t.test(e.refId||"")},getOptionsDisplayText:e=>`RefID: ${e}`};var p=s("./packages/grafana-data/src/utils/Registry.ts");const h={id:r.mE.isNull,name:"Is null",description:"Match where value for given field is null.",get:()=>(e,t)=>null==t.values.get(e),getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},g={id:r.mE.isNotNull,name:"Is not null",description:"Match where value for given field is not null.",get:()=>(e,t)=>null!=t.values.get(e),getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},m={id:r.mE.greater,name:"Is greater",description:"Match when field value is greater than option.",get:e=>(t,s)=>{const a=s.values.get(t);return!isNaN(a)&&a>e.value},getOptionsDisplayText:e=>`Matches all rows where field value is greater than: ${e.value}.`,isApplicable:e=>e.type===i.fS.number,getDefaultOptions:()=>({value:0})},f={id:r.mE.greaterOrEqual,name:"Is greater or equal",description:"Match when field value is lower or greater than option.",get:e=>(t,s)=>{const a=s.values.get(t);return!isNaN(a)&&a>=e.value},getOptionsDisplayText:e=>`Matches all rows where field value is lower or greater than: ${e.value}.`,isApplicable:e=>e.type===i.fS.number,getDefaultOptions:()=>({value:0})},b={id:r.mE.lower,name:"Is lower",description:"Match when field value is lower than option.",get:e=>(t,s)=>{const a=s.values.get(t);return!isNaN(a)&&a<e.value},getOptionsDisplayText:e=>`Matches all rows where field value is lower than: ${e.value}.`,isApplicable:e=>e.type===i.fS.number,getDefaultOptions:()=>({value:0})},v={id:r.mE.lowerOrEqual,name:"Is lower or equal",description:"Match when field value is lower or equal than option.",get:e=>(t,s)=>{const a=s.values.get(t);return!isNaN(a)&&a<=e.value},getOptionsDisplayText:e=>`Matches all rows where field value is lower or equal than: ${e.value}.`,isApplicable:e=>e.type===i.fS.number,getDefaultOptions:()=>({value:0})},x={id:r.mE.equal,name:"Is equal",description:"Match where value for given field is equal to options value.",get:e=>(t,s)=>s.values.get(t)==e.value,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},y={id:r.mE.notEqual,name:"Is not equal",description:"Match where value for given field is not equal to options value.",get:e=>(t,s)=>s.values.get(t)!=e.value,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},w={id:r.mE.between,name:"Is between",description:"Match when field value is between given option values.",get:e=>(t,s)=>{const a=s.values.get(t);return!isNaN(a)&&(a>e.from&&a<e.to)},getOptionsDisplayText:e=>`Matches all rows where field value is between ${e.from} and ${e.to}.`,isApplicable:e=>e.type===i.fS.number,getDefaultOptions:()=>({from:0,to:100})},j={id:r.mi.first,name:"First Field",description:"The first field in the frame",get:e=>(e,t,s)=>e===t.fields[0],getOptionsDisplayText:()=>"First field"},k={id:r.mi.firstTimeField,name:"First time field",description:"The first field of type time in a frame",get:e=>(e,t,s)=>e.type===i.fS.time&&e===t.fields.find((e=>e.type===i.fS.time)),getOptionsDisplayText:()=>"First time field"};const S={id:r.mE.regex,name:"Regex",description:"Match when field value is matching regex.",get:e=>{const t=new RegExp(e.value);return(e,s)=>{const a=s.values.get(e);return t.test(a)}},getOptionsDisplayText:e=>`Matches all rows where field value is matching regex: ${e.value}`,isApplicable:()=>!0,getDefaultOptions:()=>({value:".*"})},C=new p.B((()=>[...(0,a.Ty)(),o,l,c,...(0,n.Lk)(),j,k])),T=new p.B((()=>[...(0,a.fX)(),...(0,n.cC)(),u])),N=new p.B((()=>[h,g,m,f,b,v,x,y,w,S]));function O(e){const t=C.get(e.id);if(!t)throw new Error("Unknown field matcher: "+e.id);return t.get(e.options)}function I(e){const t=T.get(e.id);if(!t)throw new Error("Unknown frame matcher: "+e.id);return t.get(e.options)}function P(e){const t=N.get(e.id);if(!t)throw new Error("Unknown value matcher: "+e.id);return t.get(e.options)}},"./packages/grafana-data/src/transformations/matchers/ids.ts":(e,t,s)=>{"use strict";let a,n,i,r;s.d(t,{Ff:()=>a,mi:()=>n,E4:()=>i,mE:()=>r}),function(e){e.anyMatch="anyMatch",e.allMatch="allMatch",e.invertMatch="invertMatch",e.alwaysMatch="alwaysMatch",e.neverMatch="neverMatch"}(a||(a={})),function(e){e.numeric="numeric",e.time="time",e.first="first",e.firstTimeField="firstTimeField",e.byType="byType",e.byName="byName",e.byNames="byNames",e.byRegexp="byRegexp",e.byRegexpOrNames="byRegexpOrNames",e.byFrameRefID="byFrameRefID"}(n||(n={})),function(e){e.byName="byName",e.byRefId="byRefId",e.byIndex="byIndex",e.byLabel="byLabel"}(i||(i={})),function(e){e.regex="regex",e.isNull="isNull",e.isNotNull="isNotNull",e.greater="greater",e.greaterOrEqual="greaterOrEqual",e.lower="lower",e.lowerOrEqual="lowerOrEqual",e.equal="equal",e.notEqual="notEqual",e.between="between"}(r||(r={}))},"./packages/grafana-data/src/transformations/matchers/nameMatcher.ts":(e,t,s)=>{"use strict";s.d(t,{Ys:()=>r,Lk:()=>g,cC:()=>m});var a=s("./packages/grafana-data/src/transformations/matchers/ids.ts"),n=s("./packages/grafana-data/src/text/string.ts"),i=s("./packages/grafana-data/src/field/fieldState.ts");let r;!function(e){e.exclude="exclude",e.include="include"}(r||(r={}));const o={id:a.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:e=>(t,s,a)=>e===t.name||(0,i.C)(t,s,a)===e,getOptionsDisplayText:e=>`Field name: ${e}`},l={id:a.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:r.include,names:[]},get:e=>{const{names:t,mode:s=r.include}=e,a=new Set(null!=t?t:[]),n=(e,t,s)=>a.has(e.name)||a.has((0,i.C)(e,t,s));return s===r.exclude?(e,t,s)=>!n(e,t,s):n},getOptionsDisplayText:e=>{const{names:t,mode:s}=e,a=(null!=t?t:[]).join(", ");return s===r.exclude?`All except: ${a}`:`All of: ${a}`}},c={id:a.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:e=>{const t=p(e);return(e,s,a)=>{const n=(0,i.C)(e,s,a);return!!t&&t.test(n)}},getOptionsDisplayText:e=>`Field name by pattern: ${e}`},d={id:a.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:e=>(t,s,a)=>s.refId===e,getOptionsDisplayText:e=>`Math all fields returned by query with reference ID: ${e}`},u={id:a.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:e=>{var t;const s=c.get((null==e?void 0:e.pattern)||""),a=l.get({mode:r.include,names:null!==(t=null==e?void 0:e.names)&&void 0!==t?t:[]});return(e,t,n)=>a(e,t,n)||s(e,t,n)},getOptionsDisplayText:e=>{var t,s,a;return`Field name by pattern: ${null!==(t=null==e?void 0:e.pattern)&&void 0!==t?t:""} or names: ${null!==(s=null==e||null===(a=e.names)||void 0===a?void 0:a.join(","))&&void 0!==s?s:""}`}},p=e=>{if(e)try{return(0,n.jO)(e)}catch(e){return void console.error(e)}},h={id:a.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:e=>{const t=(0,n.jO)(e);return e=>t.test(e.name||"")},getOptionsDisplayText:e=>`Frame name: ${e}`};function g(){return[o,c,l,u,d]}function m(){return[h]}},"./packages/grafana-data/src/transformations/matchers/predicates.ts":(e,t,s)=>{"use strict";s.d(t,{m3:()=>p,Qw:()=>m,Ty:()=>w,fX:()=>j});var a=s("./packages/grafana-data/src/types/dataFrame.ts"),n=s("./packages/grafana-data/src/transformations/matchers/ids.ts"),i=s("./packages/grafana-data/src/transformations/matchers.ts");const r={id:n.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:e=>{const t=e.map((e=>(0,i.sq)(e)));return(e,s,a)=>{for(const n of t)if(n(e,s,a))return!0;return!1}},getOptionsDisplayText:e=>{let t="";for(const s of e){t.length>0&&(t+=" OR ");const e=i.Ls.get(s.id);t+=e.getOptionsDisplayText?e.getOptionsDisplayText(s):e.name}return t}},o={id:n.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:e=>{const t=e.map((e=>(0,i.b9)(e)));return e=>{for(const s of t)if(s(e))return!0;return!1}},getOptionsDisplayText:e=>{let t="";for(const s of e){t.length>0&&(t+=" OR ");const e=i.Ac.get(s.id);t+=e.getOptionsDisplayText?e.getOptionsDisplayText(s):e.name}return t}},l={id:n.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:e=>{const t=e.map((e=>(0,i.sq)(e)));return(e,s,a)=>{for(const n of t)if(!n(e,s,a))return!1;return!0}},getOptionsDisplayText:e=>{let t="";for(const s of e){t.length>0&&(t+=" AND ");const e=i.Ls.get(s.id);t+=e.getOptionsDisplayText?e.getOptionsDisplayText(s):e.name}return t}},c={id:n.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:e=>{const t=e.map((e=>(0,i.b9)(e)));return e=>{for(const s of t)if(!s(e))return!1;return!0}},getOptionsDisplayText:e=>{let t="";for(const s of e){t.length>0&&(t+=" AND ");const e=i.Ac.get(s.id);t+=e.getOptionsDisplayText?e.getOptionsDisplayText(s):e.name}return t}},d={id:n.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:e=>{const t=(0,i.sq)(e);return(e,s,a)=>!t(e,s,a)},getOptionsDisplayText:e=>{const t=i.Ls.get(e.id);return"NOT "+(t.getOptionsDisplayText?t.getOptionsDisplayText(e.options):t.name)}},u={id:n.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:e=>{const t=(0,i.b9)(e);return e=>!t(e)},getOptionsDisplayText:e=>{const t=i.Ac.get(e.id);return"NOT "+(t.getOptionsDisplayText?t.getOptionsDisplayText(e.options):t.name)}},p=e=>!0,h=e=>!0,g=e=>!1,m=e=>e.type!==a.fS.time,f=e=>!1,b={id:n.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:e=>p,getOptionsDisplayText:e=>"Always"},v={id:n.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:e=>h,getOptionsDisplayText:e=>"Always"},x={id:n.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:e=>g,getOptionsDisplayText:e=>"Never"},y={id:n.Ff.neverMatch,name:"No Frames",description:"Never Match",get:e=>f,getOptionsDisplayText:e=>"Never"};function w(){return[r,l,d,b,x]}function j(){return[o,c,u,v,y]}},"./packages/grafana-data/src/transformations/transformers/calculateField.ts":(e,t,s)=>{"use strict";s.d(t,{ie:()=>x,U:()=>j,h:()=>S});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=s("./packages/grafana-data/src/types/index.ts"),i=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),r=s("./packages/grafana-data/src/transformations/fieldReducer.ts"),o=s("./packages/grafana-data/src/transformations/matchers.ts"),l=s("./packages/grafana-data/src/transformations/matchers/ids.ts"),c=s("./packages/grafana-data/src/vector/vectorToArray.ts");class d{constructor(e){var t,s,a;a=0,(s="rowIndex")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,this.columns=e}get length(){return this.columns.length}get(e){return this.columns[e].get(this.rowIndex)}toArray(){return(0,c.n)(this)}toJSON(){return(0,c.n)(this)}}var u=s("./packages/grafana-data/src/vector/index.ts"),p=s("./packages/grafana-data/src/vector/AsNumberVector.ts"),h=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),g=s("./node_modules/lodash/lodash.js"),m=s("./packages/grafana-data/src/utils/binaryOperators.ts"),f=s("./packages/grafana-data/src/transformations/transformers/ensureColumns.ts"),b=s("./packages/grafana-data/src/field/index.ts"),v=s("./packages/grafana-data/src/transformations/transformers/noop.ts");let x;!function(e){e.ReduceRow="reduceRow",e.BinaryOperation="binary"}(x||(x={}));const y={reducer:r.gz.sum},w={left:"",operator:m.L.Add,right:""},j={id:i.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:x.ReduceRow,reduce:{reducer:r.gz.sum}},operator:e=>t=>{const s=e&&!1!==e.timeSeries?f.W.operator(null):v.d.operator({});return t.pipe(s,(0,a.U)((t=>{var s;const a=null!==(s=e.mode)&&void 0!==s?s:x.ReduceRow;let i;return a===x.ReduceRow?i=function(e,t){var s;let a=(0,o.sq)({id:l.mi.numeric});e.include&&e.include.length&&(a=(0,o.sq)({id:l.mi.byNames,options:{names:e.include}}));const i=r.TB.get(e.reducer);if(!i)throw new Error(`Unknown reducer: ${e.reducer}`);const c=null!==(s=i.reduce)&&void 0!==s?s:r.uP,p=e.nullValueMode===n.Gl.Ignore,h=e.nullValueMode===n.Gl.AsZero;return s=>{const i=[];for(const e of s.fields)a(e,s,t)&&i.push(e.values);const r=new d(i),o={name:"temp",values:r,type:n.fS.number,config:{}},l=[];for(let t=0;t<s.length;t++){r.rowIndex=t;const s=c(o,p,h)[e.reducer];l.push(s)}return new u.Gt(l)}}((0,g.defaults)(e.reduce,y),t):a===x.BinaryOperation&&(i=function(e,t){const s=m.n.getIfExists(e.operator);return a=>{const n=k(a,e.left,t),i=k(a,e.right,t);if(n&&i&&s)return new u.rM(n,i,s.operation)}}((0,g.defaults)(e.binary,w),t)),i?t.map((t=>{const s=i(t);if(!s)return t;const a={name:S(e),type:n.fS.number,config:{},values:s};let r=[];if(e.replaceFields){const{timeField:s}=(0,h.sV)(t);r=s&&!1!==e.timeSeries?[s,a]:[a]}else r=[...t.fields,a];return Object.assign({},t,{fields:r})})):t})))}};function k(e,t,s){if(!t)return;for(const a of e.fields)if(t===(0,b.CZ)(a,e,s))return a.type===n.fS.boolean?new p.s(a.values):a.values;const a=parseFloat(t);return isNaN(a)?void 0:new u.uI(a,e.length)}function S(e){var t;if(null!==(t=e.alias)&&void 0!==t&&t.length)return e.alias;if(e.mode===x.BinaryOperation){var s,a,n;const{binary:t}=e;return`${null!==(s=null==t?void 0:t.left)&&void 0!==s?s:""} ${null!==(a=null==t?void 0:t.operator)&&void 0!==a?a:""} ${null!==(n=null==t?void 0:t.right)&&void 0!==n?n:""}`}if(e.mode===x.ReduceRow){var i;const t=r.TB.getIfExists(null===(i=e.reduce)||void 0===i?void 0:i.reducer);if(t)return t.name}return"math"}},"./packages/grafana-data/src/transformations/transformers/concat.ts":(e,t,s)=>{"use strict";s.d(t,{HO:()=>o,aE:()=>l});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),i=s("./packages/grafana-data/src/types/dataFrame.ts"),r=s("./packages/grafana-data/src/vector/index.ts");let o;!function(e){e.Drop="drop",e.FieldName="field",e.Label="label"}(o||(o={}));const l={id:n.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:o.FieldName,frameNameLabel:"frame"},operator:e=>t=>t.pipe((0,a.U)((t=>!Array.isArray(t)||t.length<2?t:[c(t,e)])))};function c(e,t){var s;let a=!0,n=e[0].length;const l=null!==(s=t.frameNameLabel)&&void 0!==s?s:"frame";let c=[];for(const s of e){n!==s.length&&(a=!1,n=Math.max(n,s.length));for(const e of s.fields){const a=Object.assign({},e);a.state=void 0,s.name&&(t.frameNameMode===o.Drop||(t.frameNameMode===o.Label?(a.labels=Object.assign({},e.labels),a.labels[l]=s.name):a.name&&a.name!==i.M5?a.name=`${s.name} · ${e.name}`:a.name=s.name)),c.push(a)}}return a||(c=c.map((e=>{if(e.values.length===n)return e;const t=e.values.toArray();return t.length=n,Object.assign({},e,{values:new r.Gt(t)})}))),{fields:c,length:n}}},"./packages/grafana-data/src/transformations/transformers/ensureColumns.ts":(e,t,s)=>{"use strict";s.d(t,{W:()=>o});var a=s("./packages/grafana-data/src/transformations/transformers/seriesToColumns.ts"),n=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),i=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),r=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js");const o={id:i.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:e=>t=>t.pipe((0,r.U)((t=>o.transformer(e)(t)))),transformer:e=>e=>{const t=function(e){let t;for(const s of e){const{timeField:e}=(0,n.sV)(s);if(!e)return;if(t){if(t!==e.name)return}else t=e.name}return t}(e);return e.length>1&&t?a.u.transformer({byField:t})(e):e}}},"./packages/grafana-data/src/transformations/transformers/filterByValue.ts":(e,t,s)=>{"use strict";s.d(t,{PQ:()=>c,ER:()=>d,JA:()=>u});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=s("./packages/grafana-data/src/transformations/transformers/noop.ts"),i=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),r=s("./packages/grafana-data/src/field/fieldState.ts"),o=s("./packages/grafana-data/src/transformations/matchers.ts"),l=s("./packages/grafana-data/src/vector/ArrayVector.ts");let c,d;!function(e){e.exclude="exclude",e.include="include"}(c||(c={})),function(e){e.all="all",e.any="any"}(d||(d={}));const u={id:i.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:c.include,match:d.any},operator:e=>t=>{const s=e.filters,i=e.match===d.all,r=e.type===c.include;return Array.isArray(s)&&0!==s.length?t.pipe((0,a.U)((e=>{if(!Array.isArray(e)||0===e.length)return e;const t=new Set;for(const a of e){const n=h(a,e),r=p(s,n);for(let s=0;s<a.length;s++){if(t.has(s))continue;let n=!0;for(const t of r){const r=t(s,a,e);if(!i&&r){n=!0;break}if(i&&!r){n=!1;break}n=r}n&&t.add(s)}}const a=[],n=r?t.size:e[0].length-t.size;for(const s of e){const e=[];for(const a of s.fields){const n=[];for(let e=0;e<s.length;e++)r&&t.has(e)?n.push(a.values.get(e)):r||t.has(e)||n.push(a.values.get(e));e.push(Object.assign({},a,{values:new l.G(n),state:{}}))}a.push(Object.assign({},s,{fields:e,length:n}))}return a}))):t.pipe(n.d.operator({}))}},p=(e,t)=>{const s=()=>!1;return e.map((e=>{var a;const n=null!==(a=t[e.fieldName])&&void 0!==a?a:-1;if(n<0)return console.warn(`[FilterByValue] Could not find index for field name: ${e.fieldName}`),s;const i=(0,o.IG)(e.config);return(e,t,s)=>i(e,t.fields[n],t,s)}))},h=(e,t)=>e.fields.reduce(((s,a,n)=>(s[(0,r.C)(a,e,t)]=n,s)),{})},"./packages/grafana-data/src/transformations/transformers/groupBy.ts":(e,t,s)=>{"use strict";s.d(t,{x:()=>d,i:()=>u});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),i=s("./packages/grafana-data/src/types/dataFrame.ts"),r=s("./packages/grafana-data/src/field/fieldState.ts"),o=s("./packages/grafana-data/src/vector/ArrayVector.ts"),l=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),c=s("./packages/grafana-data/src/transformations/fieldReducer.ts");let d;!function(e){e.aggregate="aggregate",e.groupBy="groupby"}(d||(d={}));const u={id:n.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,a.U)((t=>{if(!Object.keys(e.fields).find((t=>e.fields[t].operation===d.groupBy)))return t;const s=[];for(const n of t){const t=[];for(const s of n.fields)p(s,e)&&t.push(s);if(0===t.length)continue;const l={};for(let e=0;e<n.length;e++){var a;const s=String(t.map((t=>t.values.get(e)))),i=null!==(a=l[s])&&void 0!==a?a:{};l[s]||(l[s]=i);for(let t of n.fields){const s=(0,r.C)(t);i[s]||(i[s]={name:s,type:t.type,config:Object.assign({},t.config),values:new o.G}),i[s].values.add(t.values.get(e))}}const d=[],u=Object.keys(l);for(const e of t){const t=new o.G,s=(0,r.C)(e);for(let e of u){const a=l[e];t.add(a[s].values.get(0))}d.push({name:e.name,type:e.type,config:Object.assign({},e.config),values:t})}for(const t of n.fields){if(!h(t,e))continue;const s=(0,r.C)(t),a=e.fields[s].aggregations,n={};for(const e of u){const t=l[e][s],i=(0,c.Kx)({field:t,reducers:a});for(const e of a)Array.isArray(n[e])||(n[e]=[]),n[e].push(i[e])}for(const e of a){const a={name:`${s} (${e})`,values:new o.G(n[e]),type:i.fS.other,config:{}};a.type=g(e,t,a),d.push(a)}}s.push({fields:d,length:u.length})}return s})))},p=(e,t)=>{var s;const a=(0,r.C)(e);return(null==t||null===(s=t.fields[a])||void 0===s?void 0:s.operation)===d.groupBy},h=(e,t)=>{var s;const a=(0,r.C)(e);return(null==t||null===(s=t.fields[a])||void 0===s?void 0:s.operation)===d.aggregate&&Array.isArray(null==t?void 0:t.fields[a].aggregations)&&(null==t?void 0:t.fields[a].aggregations.length)>0},g=(e,t,s)=>{var a;switch(e){case c.gz.allIsNull:return i.fS.boolean;case c.gz.last:case c.gz.lastNotNull:case c.gz.first:case c.gz.firstNotNull:return t.type;default:return null!==(a=(0,l.fu)(s))&&void 0!==a?a:i.fS.string}}},"./packages/grafana-data/src/transformations/transformers/histogram.ts":(e,t,s)=>{"use strict";s.d(t,{Zi:()=>d,py:()=>h,Op:()=>g,wL:()=>m,cO:()=>f,qr:()=>b,gY:()=>v,zM:()=>y});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),i=s("./packages/grafana-data/src/types/dataFrame.ts"),r=s("./packages/grafana-data/src/vector/ArrayVector.ts"),o=s("./packages/grafana-data/src/transformations/transformers/joinDataFrames.ts"),l=s("./packages/grafana-data/src/field/index.ts"),c=s("./packages/grafana-data/src/themes/index.ts");const d=[1e-9,2e-9,2.5e-9,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],u=[null],p=(e,t)=>e-t,h={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},g={id:n.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,a.U)((t=>g.transformer(e)(t)))),transformer:e=>t=>{if(!Array.isArray(t)||0===t.length)return t;const s=v(t,e);return null==s?[]:[y(s)]}},m="BucketMin",f="BucketMax";function b(e){let t,s;const a=[];for(const n of e.fields)n.name===m?t=n:n.name===f?s=n:n.type===i.fS.number&&a.push(n);if(t&&s&&a.length)return{bucketMin:t,bucketMax:s,counts:a}}function v(e,t){var s,a;let n=null==t?void 0:t.bucketSize,l=null!==(s=null==t?void 0:t.bucketOffset)&&void 0!==s?s:0;if(!n){let t=[];for(const s of e)for(const e of s.fields)e.type===i.fS.number&&(t=t.concat(e.values.toArray()));t.sort(((e,t)=>e-t));let s=1/0;if(1===t.length)s=1;else for(let e=1;e<t.length;e++){let a=t[e]-t[e-1];0!==a&&(s=Math.min(s,a))}let a=t[0];const r=(t[t.length-1]-a)/20;for(let e=0;e<d.length;e++){let t=d[e];if(r<t&&t>=s){n=t;break}}}const c=e=>{return t=e-l,s=n,Math.floor(t/s)*s+l;var t,s};let h,g=[],b=[];for(const t of e)for(const e of t.fields)if(e.type===i.fS.number){let t=x(e.values.toArray(),c,u,p);g.push(t),b.push(Object.assign({},e,{config:Object.assign({},e.config,{unit:void 0})})),!h&&e.config.unit&&(h=e.config)}if(!b.length)return null;let v=(0,o.v_)(g);for(let e=1;e<v.length;e++){let t=v[e];for(let e=0;e<t.length;e++)null==t[e]&&(t[e]=0)}const y={name:m,values:new r.G(v[0]),type:i.fS.number,state:void 0,config:null!==(a=h)&&void 0!==a?a:{}},w=Object.assign({},y,{name:f,values:new r.G(v[0].map((e=>e+n)))});if(null!=t&&t.combine){const e=new Array(v[0].length).fill(0);for(let t=1;t<v.length;t++)for(let s=0;s<e.length;s++)e[s]+=v[t][s];b=[Object.assign({},b[0],{name:"Count",values:new r.G(e),type:i.fS.number,state:void 0})]}else b.forEach(((e,t)=>{e.values=new r.G(v[t+1])}));return{bucketMin:y,bucketMax:w,counts:b}}function x(e,t,s,a){let n=new Map;for(let s=0;s<e.length;s++){let a=e[s];null!=a&&(a=t(a));let i=n.get(a);i?i.count++:n.set(a,{value:a,count:1})}s&&s.forEach((e=>n.delete(e)));let i=[...n.values()];a&&i.sort(((e,t)=>a(e.value,t.value)));let r=Array(i.length),o=Array(i.length);for(let e=0;e<i.length;e++)r[e]=i[e].value,o[e]=i[e].count;return[r,o]}function y(e,t){if(!e.bucketMin.display){const s=(0,l.U_)({field:e.bucketMin,theme:null!=t?t:(0,c.jG)()});e.bucketMin.display=s,e.bucketMax.display=s}return{fields:[e.bucketMin,e.bucketMax,...e.counts],length:e.bucketMin.values.length}}},"./packages/grafana-data/src/transformations/transformers/ids.ts":(e,t,s)=>{"use strict";let a;s.d(t,{W:()=>a}),function(e){e.append="append",e.reduce="reduce",e.order="order",e.organize="organize",e.rename="rename",e.calculateField="calculateField",e.seriesToColumns="seriesToColumns",e.seriesToRows="seriesToRows",e.merge="merge",e.concatenate="concatenate",e.labelsToFields="labelsToFields",e.filterFields="filterFields",e.filterFieldsByName="filterFieldsByName",e.filterFrames="filterFrames",e.filterByRefId="filterByRefId",e.renameByRegex="renameByRegex",e.filterByValue="filterByValue",e.noop="noop",e.ensureColumns="ensureColumns",e.groupBy="groupBy",e.sortBy="sortBy",e.histogram="histogram",e.configFromData="configFromData",e.rowsToFields="rowsToFields",e.prepareTimeSeries="prepareTimeSeries",e.convertFieldType="convertFieldType"}(a||(a={}))},"./packages/grafana-data/src/transformations/transformers/joinDataFrames.ts":(e,t,s)=>{"use strict";s.d(t,{JP:()=>c,v_:()=>g});var a=s("./packages/grafana-data/src/types/index.ts"),n=s("./packages/grafana-data/src/vector/index.ts"),i=s("./packages/grafana-data/src/transformations/matchers.ts"),r=s("./packages/grafana-data/src/transformations/matchers/ids.ts"),o=s("./packages/grafana-data/src/dataframe/index.ts");function l(e){var t;return null!==(t=e.joinBy)&&void 0!==t?t:function(e){const{timeField:t}=(0,o.sV)(e[0]);if(t)return i.Ls.get(r.mi.firstTimeField).get({});let s=[];for(const t of e[0].fields)t.type===a.fS.number&&s.push(t.name);for(let t=1;t<e.length;t++){const t=[];for(const s of e[0].fields)s.type===a.fS.number&&t.push(s.name);s=s.filter((e=>!t.includes(e)))}return i.Ls.get(r.mi.byName).get(s[0])}(e.frames)}function c(e){var t;if(null===(t=e.frames)||void 0===t||!t.length)return;if(1===e.frames.length){let t=e.frames[0],s=t;const a=l(e);let n=s.fields.findIndex((t=>a(t,s,e.frames)));if(e.keepOriginIndices&&(s=Object.assign({},t,{fields:t.fields.map(((e,t)=>{const s=Object.assign({},e),a={frameIndex:0,fieldIndex:t};return s.state?s.state.origin=a:s.state={origin:a},s}))}),n>0)){const e=s.fields[n],t=s.fields.filter(((e,t)=>t!==n));t.unshift(e),s.fields=t,n=0}if(e.enforceSort&&n>=0&&(function(e){let t;for(let s=0;s<e.length;s++){const a=e.get(s);if(null!=a){if(null!=t){if(t>a)return!1;break}t=a}}let s=e.length-1;for(;s>=0;){const a=e.get(s--);if(null!=a)return!(t>a)}return!0}(s.fields[n].values)||(s=(0,o.aK)(s,n))),e.keep){let a=s.fields.filter(((t,a)=>a===n||e.keep(t,s,e.frames)));t!==s?s.fields=a:s=Object.assign({},t,{fields:a})}return s}const s=[],a=[],i=[],r=l(e);for(let t=0;t<e.frames.length;t++){var c;const n=e.frames[t];if(!n||null===(c=n.fields)||void 0===c||!c.length)continue;const o=[d];let l,g=[];for(let s=0;s<n.fields.length;s++){const a=n.fields[s];if(a.state=a.state||{},!l&&r(a,n,e.frames))l=a;else{var h,m;if(e.keep&&!e.keep(a,n,e.frames))continue;let t=null===(h=a.config.custom)||void 0===h?void 0:h.spanNulls;o.push(!0===t?d:-1===t?u:p);let s=null!==(m=a.labels)&&void 0!==m?m:{};n.name&&(s=Object.assign({},s,{name:n.name})),g.push(Object.assign({},a,{labels:s}))}e.keepOriginIndices&&(a.state.origin={frameIndex:t,fieldIndex:s})}if(!l)continue;0===i.length&&i.push(l),s.push(o);const b=[l.values.toArray()];for(const e of g){var f;b.push(e.values.toArray()),i.push(e),null===(f=e.state)||void 0===f||delete f.displayName}a.push(b)}const b=g(a,s);return{length:b[0].length,fields:i.map(((e,t)=>Object.assign({},e,{values:new n.Gt(b[t])})))}}const d=0,u=1,p=2;function h(e,t,s){for(let a,n=0,i=-1;n<t.length;n++){let r=t[n];if(r>i){for(a=r-1;a>=0&&null==e[a];)e[a--]=null;for(a=r+1;a<s&&null==e[a];)e[i=a++]=null}}}function g(e,t){const s=new Set;for(let t=0;t<e.length;t++){let a=e[t][0],n=a.length;for(let e=0;e<n;e++)s.add(a[e])}let a=[Array.from(s).sort(((e,t)=>e-t))],n=a[0].length,i=new Map;for(let e=0;e<n;e++)i.set(a[0][e],e);for(let s=0;s<e.length;s++){let r=e[s],o=r[0];for(let e=1;e<r.length;e++){let l=r[e],c=Array(n).fill(void 0),g=t?t[s][e]:u,m=[];for(let e=0;e<l.length;e++){let t=l[e],s=i.get(o[e]);null===t?g!==d&&(c[s]=t,g===p&&m.push(s)):c[s]=t}h(c,m,n),a.push(c)}}return a}},"./packages/grafana-data/src/transformations/transformers/labelsToFields.ts":(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=s("./packages/grafana-data/src/types/index.ts"),i=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),r=s("./packages/grafana-data/src/vector/index.ts");const o={id:i.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns)",defaultOptions:{},operator:e=>t=>t.pipe((0,a.U)((t=>o.transformer(e)(t)))),transformer:e=>t=>{const s=[];for(const a of t){const t=[];for(const s of a.fields){if(!s.labels){t.push(s);continue}const i=Object.assign({},s,{config:Object.assign({},s.config,{displayName:void 0,displayNameFromDS:void 0}),labels:void 0});t.push(i);for(const o of Object.keys(s.labels)){if(e.valueLabel===o){i.name=s.labels[o];continue}const l=new Array(a.length).fill(s.labels[o]);t.push({name:o,type:n.fS.string,values:new r.Gt(l),config:{}})}}s.push({fields:t,length:a.length})}return s}}},"./packages/grafana-data/src/transformations/transformers/merge.ts":(e,t,s)=>{"use strict";s.d(t,{R:()=>l});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),i=s("./node_modules/lodash/lodash.js"),r=s("./packages/grafana-data/src/vector/ArrayVector.ts"),o=s("./packages/grafana-data/src/dataframe/index.ts");const l={id:n.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:e=>e=>e.pipe((0,a.U)((e=>{if(!Array.isArray(e)||e.length<=1)return e;const t=e.filter((e=>e.fields.length>0));if(0===t.length)return[e[0]];const s=new Set,a={},n=[],i=new o.vA;for(let e=0;e<t.length;e++){const r=t[e];for(let o=0;o<r.fields.length;o++){const l=r.fields[o];s.has(l.name)||(i.addField(c(l)),s.add(l.name)),a[l.name]=a[l.name]||{},a[l.name][e]=o,t.length-1===e&&(h(a,l,t)&&n.push(l.name))}}if(0===n.length)return e;const r={},l=[],m=d(t,a,n),f=u(t,s,a);for(let e=0;e<t.length;e++){const s=t[e];for(let t=0;t<s.length;t++){const s=m(e,t),a=f(e,t);if(!Array.isArray(r[s])){r[s]=[a],l.push(g(s,r));continue}let n=!1;r[s]=r[s].map((e=>p(e,a)?(n=!0,Object.assign({},e,a)):e)),n||(r[s].push(a),l.push(g(s,r)))}}for(const e of l){const t=r[e.key][e.index];t&&i.add(t)}return[i]})))},c=e=>Object.assign({},(0,i.omit)(e,["values","state","labels","config"]),{values:new r.G,config:Object.assign({},(0,i.omit)(e.config,"displayName"))}),d=(e,t,s)=>{const a=s.reduce(((e,s)=>Object.keys(t[s]).reduce(((e,a)=>(e[a]=e[a]||[],e[a].push(t[s][a]),e)),e)),{});return(t,s)=>a[t].reduce(((a,n)=>a+e[t].fields[n].values.get(s)),"")},u=(e,t,s)=>(a,n)=>{const i={},r=Array.from(t);for(const t of r){const r=s[t];if(!r)continue;const o=r[a];if("number"!=typeof o)continue;const l=e[a];if(!l||!l.fields)continue;const c=l.fields[o];c&&c.values&&(i[t]=c.values.get(n))}return i},p=(e,t)=>{let s=!0;for(const a in t)if(void 0!==e[a]&&null!==e[a]&&e[a]!==t[a]){s=!1;break}return s},h=(e,t,s)=>Object.keys(e[t.name]).length===s.length,g=(e,t)=>({key:e,index:t[e].length-1})},"./packages/grafana-data/src/transformations/transformers/noop.ts":(e,t,s)=>{"use strict";s.d(t,{d:()=>a});const a={id:s("./packages/grafana-data/src/transformations/transformers/ids.ts").W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:e=>e=>e}},"./packages/grafana-data/src/transformations/transformers/order.ts":(e,t,s)=>{"use strict";s.d(t,{t:()=>r,$:()=>o});var a=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),n=s("./packages/grafana-data/src/field/fieldState.ts"),i=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js");const r={id:a.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:e=>t=>t.pipe((0,i.U)((t=>{const s=l(e.indexByName);return Array.isArray(t)&&0!==t.length?t.map((e=>Object.assign({},e,{fields:s(e.fields,t,e)}))):t})))},o=e=>(t,s)=>c(t,e)-c(s,e),l=e=>(t,s,a)=>{if(!Array.isArray(t)||0===t.length)return t;if(!e||0===Object.keys(e).length)return t;const i=o(e);return t.sort(((e,t)=>i((0,n.C)(e,a,s),(0,n.C)(t,a,s))))},c=(e,t)=>Number.isInteger(t[e])?t[e]:Number.MAX_SAFE_INTEGER},"./packages/grafana-data/src/transformations/transformers/reduce.ts":(e,t,s)=>{"use strict";s.d(t,{AL:()=>p,mf:()=>h});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),i=s("./packages/grafana-data/src/transformations/fieldReducer.ts"),r=s("./packages/grafana-data/src/transformations/matchers/predicates.ts"),o=s("./packages/grafana-data/src/types/dataFrame.ts"),l=s("./packages/grafana-data/src/vector/ArrayVector.ts"),c=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),d=s("./packages/grafana-data/src/transformations/matchers.ts"),u=s("./packages/grafana-data/src/field/index.ts");let p;!function(e){e.SeriesToRows="seriesToRows",e.ReduceFields="reduceFields"}(p||(p={}));const h={id:n.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[i.gz.max]},operator:e=>t=>t.pipe((0,a.U)((t=>{var s;if(null==e||null===(s=e.reducers)||void 0===s||!s.length)return t;const a=e.fields?(0,d.sq)(e.fields):e.includeTimeField&&e.mode===p.ReduceFields?r.m3:r.Qw;if(e.mode===p.ReduceFields)return function(e,t,s){const a=i.TB.list(s).map((e=>e.id)),n=[];for(const s of e){const r=[];for(const n of s.fields)if(t(n,s,e)){const e=(0,i.Kx)({field:n,reducers:a});for(const t of a){const s=e[t],o=Object.assign({},n,{values:new l.G([s])});o.state=void 0,a.length>1&&(o.labels||(o.labels={}),o.labels.reducer=i.TB.get(t).name),r.push(o)}}r.length&&n.push(Object.assign({},s,{fields:r,length:1}))}return n}(t,a,e.reducers);const n=function(e,t,s,a){const n=i.TB.list(s),r=n.map((e=>e.id)),d=[],p=a?function(e){const t=new Set;for(const s of e)for(const e of s.fields)if(e.labels)for(const s of Object.keys(e.labels))t.add(s);return[...t]}(e):[];for(const s of e){const h=s.fields.filter((a=>t(a,s,e))),g=h.length,m=[],f=new l.G(new Array(g));m.push({name:"Field",type:o.fS.string,values:f,config:{}});const b={};if(a)for(const e of p)b[e]=new l.G(new Array(g)),m.push({name:e,type:o.fS.string,values:b[e],config:{}});const v={};for(const e of n)v[e.id]=new l.G(new Array(g)),m.push({name:e.name,type:o.fS.other,values:v[e.id],config:{}});for(let t=0;t<h.length;t++){const o=h[t],l=(0,i.Kx)({field:o,reducers:r});if(a){if(f.buffer[t]=o.name,o.labels)for(const e of Object.keys(o.labels))b[e].set(t,o.labels[e])}else f.buffer[t]=(0,u.CZ)(o,s,e);for(const e of n){const s=l[e.id];v[e.id].buffer[t]=s}}for(const e of m)if(e.type===o.fS.other){const t=(0,c.fu)(e);t&&(e.type=t)}d.push(Object.assign({},s,{fields:m,length:g}))}return function(e){if(null==e||!e.length)return;const t=e[0];for(let s=1;s<e.length;s++){const a=e[s];for(let e=0;e<t.fields.length;e++){const s=t.fields[e];for(let t=0;t<a.fields.length;t++){const n=a.fields[t],i=0===e&&0===t,r=s.type===n.type&&s.name===n.name;if(i||r){const e=s.values.toArray(),t=n.values.toArray();s.values.buffer=e.concat(t)}}}}return t.name=void 0,t.length=t.fields[0].values.length,t}(d)}(t,a,e.reducers,e.labelsToFields);return n?[n]:[]})))}},"./packages/grafana-data/src/transformations/transformers/seriesToColumns.ts":(e,t,s)=>{"use strict";s.d(t,{u:()=>l});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=s("./packages/grafana-data/src/transformations/transformers/ids.ts"),i=s("./packages/grafana-data/src/transformations/transformers/joinDataFrames.ts"),r=s("./packages/grafana-data/src/transformations/matchers.ts"),o=s("./packages/grafana-data/src/transformations/matchers/ids.ts");const l={id:n.W.seriesToColumns,name:"Series as columns",description:"Groups series by field and returns values as columns",defaultOptions:{byField:void 0},operator:e=>t=>t.pipe((0,a.U)((t=>l.transformer(e)(t)))),transformer:e=>{let t;return s=>{if(s.length>1){e.byField&&!t&&(t=r.Ls.get(o.mi.byName).get(e.byField));const a=(0,i.JP)({frames:s,joinBy:t});if(a)return[a]}return s}}}},"./packages/grafana-data/src/types/config.ts":(e,t,s)=>{"use strict";let a;s.d(t,{e:()=>a}),function(e){e.OpenSource="Open Source",e.Pro="Pro",e.Enterprise="Enterprise"}(a||(a={}))},"./packages/grafana-data/src/types/data.ts":(e,t,s)=>{"use strict";let a,n;s.d(t,{G:()=>a,S:()=>n}),function(e){e.NotStarted="NotStarted",e.Loading="Loading",e.Streaming="Streaming",e.Done="Done",e.Error="Error"}(a||(a={})),function(e){e.Null="null",e.Ignore="connected",e.AsZero="null as zero"}(n||(n={}))},"./packages/grafana-data/src/types/dataFrame.ts":(e,t,s)=>{"use strict";let a;s.d(t,{fS:()=>a,M5:()=>n,Ls:()=>i,rN:()=>r}),function(e){e.time="time",e.number="number",e.string="string",e.boolean="boolean",e.trace="trace",e.other="other"}(a||(a={}));const n="Value",i="Time",r="Metric"},"./packages/grafana-data/src/types/index.ts":(e,t,s)=>{"use strict";s.d(t,{Z9:()=>fe,Lj:()=>p,SI:()=>Z,k8:()=>F,SP:()=>me.BuildInfo,zj:()=>N,Mg:()=>pe,mQ:()=>d,Pz:()=>o,eA:()=>R,MF:()=>L,hf:()=>$,gv:()=>he,w5:()=>u,Ys:()=>g.Ys,Ru:()=>E,R3:()=>z,CQ:()=>O,uv:()=>me.FeatureToggles,Sc:()=>V,qb:()=>y,fS:()=>r.fS,Z3:()=>n,Hx:()=>a,Nm:()=>me.GrafanaConfig,Sg:()=>P,Qu:()=>U,iL:()=>B,oi:()=>Y,IA:()=>K,TO:()=>me.LicenseInfo,yS:()=>ee,FU:()=>te,z:()=>J,SK:()=>X,Gu:()=>i.G,in:()=>h.in,Uv:()=>h.Uv,Y4:()=>h.Y4,Ku:()=>h.Ku,UV:()=>h.UV,Hi:()=>f,Gl:()=>i.S,B5:()=>q,Kh:()=>Q,w2:()=>C,$_:()=>T,Xy:()=>k,_Z:()=>S,BV:()=>w,zV:()=>j,eE:()=>b,v6:()=>ue,T_:()=>g.T_,rN:()=>r.rN,Ls:()=>r.Ls,M5:()=>r.M5,H3:()=>m,L8:()=>l,o3:()=>c,Tq:()=>de,j2:()=>se,wm:()=>_,Rr:()=>g.Rr,JK:()=>g.JK,mx:()=>ne,gH:()=>ie,RL:()=>re,se:()=>ae,v3:()=>x,kf:()=>v,xA:()=>ge,nU:()=>le,H7:()=>oe,Aj:()=>ce});const a=0,n=100;var i=s("./packages/grafana-data/src/types/data.ts"),r=s("./packages/grafana-data/src/types/dataFrame.ts");let o,l,c,d,u,p;!function(e){e.TimeSeriesWide="timeseries-wide",e.TimeSeriesLong="timeseries-long",e.TimeSeriesMany="timeseries-many"}(o||(o={})),function(e){e.Series="series",e.Field="field",e.Fields="fields",e.Value="value",e.BuiltIn="built-in",e.Template="template"}(l||(l={})),function(e){e.Values="values"}(c||(c={})),function(e){e[e.Off=0]="Off",e[e.Crosshair=1]="Crosshair",e[e.Tooltip=2]="Tooltip"}(d||(d={})),function(e){e.Annotations="annotations"}(u||(u={})),function(e){e.Field="field",e.Text="text",e.Skip="skip"}(p||(p={}));var h=s("./packages/grafana-data/src/types/logs.ts"),g=s("./packages/grafana-data/src/types/time.ts");let m,f,b;function v(e){return t=>t.__systemRef===e}!function(e){e.Absolute="absolute",e.Percentage="percentage"}(m||(m={})),function(e){e.ValueToText="value",e.RangeToText="range",e.RegexToText="regex",e.SpecialValue="special"}(f||(f={})),function(e){e.True="true",e.False="false",e.Null="null",e.NaN="nan",e.NullAndNaN="null+nan",e.Empty="empty"}(b||(b={}));const x=e=>"string"==typeof(null==e?void 0:e.__systemRef);let y,w,j,k,S,C,T,N,O;function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(e){e.Unit="unit",e.Min="min",e.Max="max",e.Decimals="decimals",e.DisplayName="displayName",e.NoValue="noValue",e.Thresholds="thresholds",e.Mappings="mappings",e.Links="links",e.Color="color"}(y||(y={})),function(e){e.alpha="alpha",e.beta="beta",e.stable="stable",e.deprecated="deprecated"}(w||(w={})),function(e){e.panel="panel",e.datasource="datasource",e.app="app",e.renderer="renderer"}(j||(j={})),function(e){e.internal="internal",e.valid="valid",e.invalid="invalid",e.modified="modified",e.missing="missing"}(k||(k={})),function(e){e.grafana="grafana",e.commercial="commercial",e.community="community",e.private="private",e.core="core"}(S||(S={})),function(e){e.missingSignature="signatureMissing",e.invalidSignature="signatureInvalid",e.modifiedSignature="signatureModified"}(C||(C={})),function(e){e.dashboard="dashboard",e.page="page",e.panel="panel",e.datasource="datasource"}(T||(T={}));class P{addConfigPage(e){return this.configPages||(this.configPages=[]),this.configPages.push(e),this}setChannelSupport(e){return this.channelSupport=e,this}constructor(){I(this,"meta",void 0),I(this,"loadError",void 0),I(this,"channelSupport",void 0),I(this,"angularConfigCtrl",void 0),I(this,"configPages",void 0),this.meta={}}}function M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(e){e.Dashboard="dashboard",e.Explore="explore",e.Unknown="unknown",e.CloudAlerting="cloud-alerting"}(N||(N={}));class F extends P{constructor(...e){super(...e),M(this,"root",void 0),M(this,"rootNav",void 0),M(this,"angularPages",void 0)}init(e){}setRootPage(e,t){return this.root=e,this.rootNav=t,this}setComponentsFromLegacyExports(e){if(e.ConfigCtrl&&(this.angularConfigCtrl=e.ConfigCtrl),this.meta&&this.meta.includes)for(const t of this.meta.includes)if(t.type===T.page&&t.component){const s=e[t.component];if(!s){console.warn("App Page uses unknown component: ",t.component,this.meta);continue}this.angularPages||(this.angularPages={}),this.angularPages[t.component]=s}}}!function(e){e.alpha="alpha",e.beta="beta"}(O||(O={}));var A=s("./packages/grafana-data/src/utils/makeClassES5Compatible.ts");function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class $ extends P{constructor(e){super(),D(this,"components",{}),this.DataSourceClass=e}setConfigEditor(e){return this.components.ConfigEditor=e,this}setConfigCtrl(e){return this.angularConfigCtrl=e,this}setQueryCtrl(e){return this.components.QueryCtrl=e,this}setAnnotationQueryCtrl(e){return this.components.AnnotationsQueryCtrl=e,this}setQueryEditor(e){return this.components.QueryEditor=e,this}setExploreQueryField(e){return this.components.ExploreQueryField=e,this}setExploreMetricsQueryField(e){return this.components.ExploreMetricsQueryField=e,this}setExploreLogsQueryField(e){return this.components.ExploreLogsQueryField=e,this}setQueryEditorHelp(e){return this.components.QueryEditorHelp=e,this}setExploreStartPage(e){return this.setQueryEditorHelp(e)}setVariableQueryEditor(e){return this.components.VariableQueryEditor=e,this}setMetadataInspector(e){return this.components.MetadataInspector=e,this}setComponentsFromLegacyExports(e){this.angularConfigCtrl=e.ConfigCtrl,this.components.QueryCtrl=e.QueryCtrl,this.components.AnnotationsQueryCtrl=e.AnnotationsQueryCtrl,this.components.ExploreQueryField=e.ExploreQueryField,this.components.QueryEditor=e.QueryEditor,this.components.QueryEditorHelp=e.QueryEditorHelp,this.components.VariableQueryEditor=e.VariableQueryEditor}}class L{constructor(e){D(this,"name",void 0),D(this,"id",void 0),D(this,"type",void 0),D(this,"uid",void 0),D(this,"interval",void 0),D(this,"init",void 0),D(this,"getLogRowContext",void 0),D(this,"components",void 0),D(this,"meta",void 0),D(this,"languageProvider",void 0),D(this,"annotations",void 0),D(this,"channelSupport",void 0),D(this,"variables",void 0),this.name=e.name,this.id=e.id,this.type=e.type,this.meta={},this.uid=e.uid,this.uid||(this.uid=this.name)}}let E,R,_,V;!function(e){e.Logs="Logs",e.Metrics="Metrics",e.Tracing="Tracing"}(E||(E={})),function(e){e.Cancelled="cancelled",e.Timeout="timeout",e.Unknown="unknown"}(R||(R={}));class B{constructor(){D(this,"datasource",void 0),D(this,"request",void 0),D(this,"start",void 0),D(this,"startTask",void 0)}}B=(0,A.s)(B),L=(0,A.s)(L),function(e){e.Auto="auto",e.Vertical="vertical",e.Horizontal="horizontal"}(_||(_={})),function(e){e.Thresholds="thresholds",e.PaletteClassic="palette-classic",e.PaletteSaturated="palette-saturated",e.ContinuousGrYlRd="continuous-GrYlRd",e.Fixed="fixed"}(V||(V={}));const z="gray";let U,q;!function(e){e.Light="light",e.Dark="dark"}(U||(U={})),function(e){e.Admin="Admin",e.Editor="Editor",e.Viewer="Viewer"}(q||(q={}));var H=s("./packages/grafana-data/src/events/eventFactory.ts"),G=s("./packages/grafana-data/src/events/types.ts");function W(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Z={alertSuccess:(0,H.X)("alert-success"),alertWarning:(0,H.X)("alert-warning"),alertError:(0,H.X)("alert-error")},Q={refresh:(0,H.X)("refresh"),componentDidMount:(0,H.X)("component-did-mount"),dataReceived:(0,H.X)("data-received"),dataError:(0,H.X)("data-error"),dataFramesReceived:(0,H.X)("data-frames-received"),dataSnapshotLoad:(0,H.X)("data-snapshot-load"),editModeInitialized:(0,H.X)("init-edit-mode"),initPanelActions:(0,H.X)("init-panel-actions"),initialized:(0,H.X)("panel-initialized"),panelTeardown:(0,H.X)("panel-teardown"),render:(0,H.X)("render")};class K extends G.R{}W(K,"type","graph-hover");class Y extends G.m{constructor(...e){super(...e),W(this,"payload",{point:{}})}}let J,X,ee,te,se;function ae(e){return e.type===te.Status}function ne(e){return e.type===te.Join}function ie(e){return e.type===te.Leave}function re(e){return e.type===te.Message}function oe(e){if(null!=e&&e.length){let t=e.trim().split("/");if(t.length>=3)return{scope:t[0],namespace:t[1],path:t.slice(2).join("/")}}}function le(e){return!!(null!=e&&e.path&&e.namespace&&e.scope)}function ce(e){if(!e.scope)return"";let t=e.scope;return e.namespace?(t+="/"+e.namespace,e.path?t+"/"+e.path:t):t}W(Y,"type","graph-hover-clear"),function(e){e.DataSource="ds",e.Plugin="plugin",e.Grafana="grafana",e.Stream="stream"}(J||(J={})),function(e){e.DataStream="stream",e.DataFrame="frame",e.JSON="json"}(X||(X={})),function(e){e.Pending="pending",e.Connected="connected",e.Disconnected="disconnected",e.Shutdown="shutdown",e.Invalid="invalid"}(ee||(ee={})),function(e){e.Status="status",e.Join="join",e.Leave="leave",e.Message="message"}(te||(te={})),function(e){e.Legacy="legacy",e.Standard="standard",e.Custom="custom",e.Datasource="datasource"}(se||(se={}));class de{}class ue extends de{getType(){return se.Standard}}class pe extends de{constructor(...e){var t,s,a;super(...e),a=void 0,(s="editor")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}getType(){return se.Custom}}class he extends de{getType(){return se.Datasource}}function ge(e){return e&&e!==k.valid&&e!==k.internal}var me=s("./packages/grafana-data/src/types/config.ts");let fe;!function(e){e.NoData="no_data",e.Paused="paused",e.Alerting="alerting",e.OK="ok",e.Pending="pending",e.Unknown="unknown"}(fe||(fe={}))},"./packages/grafana-data/src/types/logs.ts":(e,t,s)=>{"use strict";let a,n,i,r,o;s.d(t,{in:()=>a,Ku:()=>n,UV:()=>i,Y4:()=>r,Uv:()=>o}),function(e){e.emerg="critical",e.fatal="critical",e.alert="critical",e.crit="critical",e.critical="critical",e.warn="warning",e.warning="warning",e.err="error",e.eror="error",e.error="error",e.info="info",e.information="info",e.informational="info",e.notice="info",e.dbug="debug",e.debug="debug",e.trace="trace",e.unknown="unknown"}(a||(a={})),function(e){e[e.Number=0]="Number",e[e.String=1]="String",e[e.LabelsMap=2]="LabelsMap",e[e.Error=3]="Error"}(n||(n={})),function(e){e.Descending="Descending",e.Ascending="Ascending"}(i||(i={})),function(e){e.none="none",e.exact="exact",e.numbers="numbers",e.signature="signature"}(r||(r={})),function(e){e.none="No de-duplication",e.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",e.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",e.signature="De-duplication of successive lines that have identical punctuation and whitespace."}(o||(o={}))},"./packages/grafana-data/src/types/time.ts":(e,t,s)=>{"use strict";s.d(t,{Ys:()=>n,T_:()=>i,JK:()=>r,Rr:()=>o});var a=s("./packages/grafana-data/src/datetime/moment_wrapper.ts");const n="browser",i="YYYY-MM-DD HH:mm:ss";function r(){const e=(0,a.CQ)();return{from:(0,a.CQ)(e).subtract(6,"hour"),to:e,raw:{from:"now-6h",to:"now"}}}function o(){return{from:600,to:0}}},"./packages/grafana-data/src/utils/OptionsUIBuilders.ts":(e,t,s)=>{"use strict";s.d(t,{v:()=>r,r:()=>o});var a=s("./packages/grafana-data/src/utils/Registry.ts");class n{constructor(){var e,t,s;s=[],(t="properties")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}addCustomEditor(e){return this.properties.push(e),this}getRegistry(){return new a.B((()=>this.properties))}}var i=s("./packages/grafana-data/src/field/index.ts");class r extends n{addNumberInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:i.SO.get("number").editor,editor:i.SO.get("number").editor,process:i.Oh,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addSliderInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:i.SO.get("slider").editor,editor:i.SO.get("slider").editor,process:i.Oh,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addTextInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:i.SO.get("text").editor,editor:i.SO.get("text").editor,process:i.op,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,override:i.SO.get("select").editor,editor:i.SO.get("select").editor,process:i.AE,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{options:[]}}))}addRadio(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,override:i.SO.get("radio").editor,editor:i.SO.get("radio").editor,process:i.AE,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{options:[]}}))}addBooleanSwitch(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("boolean").editor,override:i.SO.get("boolean").editor,process:i.W4,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}addColorPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("color").editor,override:i.SO.get("color").editor,process:i.kG,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}addUnitPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("unit").editor,override:i.SO.get("unit").editor,process:i.VB,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}}class o extends n{addNumberInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("number").editor}))}addSliderInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("slider").editor}))}addTextInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("text").editor}))}addStringArray(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("strings").editor}))}addSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("select").editor}))}addMultiSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("multi-select").editor}))}addRadio(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("radio").editor}))}addBooleanSwitch(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("boolean").editor}))}addColorPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("color").editor,settings:e.settings||{}}))}addTimeZonePicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("timezone").editor,settings:e.settings||{}}))}addUnitPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("unit").editor}))}addFieldNamePicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("field-name").editor}))}addDashboardPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:i.SO.get("dashboard-uid").editor}))}}},"./packages/grafana-data/src/utils/Registry.ts":(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var a=s("./packages/grafana-data/src/types/index.ts");function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e){n(this,"ordered",[]),n(this,"byId",new Map),n(this,"initialized",!1),n(this,"setInit",(e=>{if(this.initialized)throw new Error("Registry already initialized");this.init=e})),this.init=e}getIfExists(e){if(this.initialized||this.initialize(),e)return this.byId.get(e)}initialize(){if(this.init)for(const e of this.init())this.register(e);this.sort(),this.initialized=!0}get(e){const t=this.getIfExists(e);if(!t)throw new Error(`"${e}" not found in: ${this.list().map((e=>e.id))}`);return t}selectOptions(e,t){this.initialized||this.initialize();const s={options:[],current:[]},n={};if(e)for(const t of e)n[t]={};for(const e of this.ordered){if(e.excludeFromPicker)continue;if(t&&!t(e))continue;const i={value:e.id,label:e.name,description:e.description};e.state===a.BV.alpha&&(i.label+=" (alpha)"),s.options.push(i),n[e.id]&&(n[e.id]=i)}return e&&(s.current=Object.values(n)),s}list(e){if(this.initialized||this.initialize(),e){const t=[];for(const s of e){const e=this.getIfExists(s);e&&t.push(e)}return t}return this.ordered}isEmpty(){return this.initialized||this.initialize(),0===this.ordered.length}register(e){if(this.byId.has(e.id))throw new Error("Duplicate Key:"+e.id);if(this.byId.set(e.id,e),this.ordered.push(e),e.aliasIds)for(const t of e.aliasIds)this.byId.has(t)||this.byId.set(t,e);this.initialized&&this.sort()}sort(){}}},"./packages/grafana-data/src/utils/anyToNumber.ts":(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var a=s("./node_modules/lodash/lodash.js");function n(e){return"number"==typeof e?e:""===e||null==e||Array.isArray(e)?NaN:"boolean"==typeof e?e?1:0:(0,a.toNumber)(e)}},"./packages/grafana-data/src/utils/binaryOperators.ts":(e,t,s)=>{"use strict";s.d(t,{L:()=>n,n:()=>i});var a=s("./packages/grafana-data/src/utils/Registry.ts");let n;!function(e){e.Add="+",e.Subtract="-",e.Divide="/",e.Multiply="*"}(n||(n={}));const i=new a.B((()=>[{id:n.Add,name:"Add",operation:(e,t)=>e+t},{id:n.Subtract,name:"Subtract",operation:(e,t)=>e-t},{id:n.Multiply,name:"Multiply",operation:(e,t)=>e*t},{id:n.Divide,name:"Divide",operation:(e,t)=>e/t}]))},"./packages/grafana-data/src/utils/dataLinks.ts":(e,t,s)=>{"use strict";s.d(t,{W:()=>i,_:()=>r});var a=s("./packages/grafana-data/src/utils/location.ts"),n=s("./packages/grafana-data/src/utils/url.ts");const i={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function r(e){const{onClickFn:t,replaceVariables:s,link:a,scopedVars:n,range:i,field:r,internalLink:l}=e,c=function(e,t,s){let a="";try{var n;a=JSON.stringify((null===(n=e.internal)||void 0===n?void 0:n.query)||"")}catch(e){console.error(e)}a=s(a,t);let i={};try{i=JSON.parse(a)}catch(e){console.error(a,e)}return i}(a,n,s);return{title:s(a.title?a.title:l.datasourceName,n),href:o(l.datasourceName,c,i),onClick:t?()=>{t({datasourceUid:l.datasourceUid,query:c,range:i})}:void 0,target:"_self",origin:r}}function o(e,t,s){return a.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:s.raw,datasource:e,queries:[t]}))}`)}},"./packages/grafana-data/src/utils/index.ts":(e,t,s)=>{"use strict";s.d(t,{LH:()=>ce.L,x5:()=>I,QM:()=>F,WC:()=>be.W,xV:()=>ve,vo:()=>ue.v,Iw:()=>Te.LegacyBaseMap,HU:()=>Te.HU,ZH:()=>Te.LegacyRangeMap,e0:()=>Te.LegacyValueMap,GG:()=>Te.LegacyValueMapping,bA:()=>q,zG:()=>de,rt:()=>ue.r,Bz:()=>r.B,Vq:()=>fe.UrlQueryMap,yw:()=>fe.UrlQueryValue,rm:()=>n.WithLoadingIndicatorOptions,Ar:()=>U,IX:()=>ye.I,sq:()=>a,nk:()=>ce.n,zd:()=>H,lL:()=>G,i6:()=>W,Mi:()=>ee,ZC:()=>re,Jb:()=>Te.Jb,d9:()=>x,l3:()=>te,FT:()=>se.FT,IU:()=>se.IU,aA:()=>se.aA,L6:()=>ne,eR:()=>ie,k8:()=>he,HE:()=>ge,ZO:()=>B,jx:()=>z,GR:()=>Te.GR,MT:()=>Q,e4:()=>oe,fp:()=>le,uT:()=>me.u,s2:()=>xe.s,_N:()=>be._,VS:()=>se.VS,Hh:()=>ae,_R:()=>l,hz:()=>u,nx:()=>d,z_:()=>o,HD:()=>h,fi:()=>c,TX:()=>p,J8:()=>se.J8,uP:()=>P,S:()=>fe.S,DA:()=>K,$8:()=>Y,$u:()=>X,j0:()=>J,MJ:()=>E,tp:()=>m,fd:()=>g,Mf:()=>b,uw:()=>f,Cj:()=>fe.Cj,xc:()=>Ce});var a={};s.r(a),s.d(a,{moveItemImmutably:()=>i});var n={};function i(e,t,s){const a=[...e];return Array.prototype.splice.call(a,s,0,Array.prototype.splice.call(a,t,1)[0]),a}s.r(n),s.d(n,{x:()=>Ce});var r=s("./packages/grafana-data/src/utils/Registry.ts");const o=(e,t)=>s=>{g(e,t,s.currentTarget.value)},l=(e,t)=>s=>{m(e,t,s.currentTarget.value)},c=(e,t)=>s=>{f(e,t,s.currentTarget.value)},d=(e,t)=>s=>{m(e,t,s.value)},u=(e,t)=>s=>{m(e,t,s.currentTarget.checked)},p=(e,t)=>s=>{f(e,t,s.value)},h=(e,t)=>s=>{b(e,t)};function g(e,t,s){const a=e.options;e.onOptionsChange(Object.assign({},a,{[t]:s}))}const m=(e,t,s)=>{const a=e.options;e.onOptionsChange(Object.assign({},a,{jsonData:Object.assign({},a.jsonData,{[t]:s})}))},f=(e,t,s)=>{const a=e.options;e.onOptionsChange(Object.assign({},a,{secureJsonData:Object.assign({},a.secureJsonData,{[t]:s})}))},b=(e,t)=>{const s=e.options;e.onOptionsChange(Object.assign({},s,{secureJsonData:Object.assign({},s.secureJsonData,{[t]:""}),secureJsonFields:Object.assign({},s.secureJsonFields,{[t]:!1})}))},v={},x=(e,t,s)=>{let a=`[Deprecation warning] ${e}: ${t} is deprecated`;s&&(a+=`. Use ${s} instead`);const n=Date.now(),i=v[a];(!i||n-i>1e4)&&(console.warn(a),v[a]=n)};var y=s("./node_modules/papaparse/papaparse.min.js"),w=s.n(y),j=s("./node_modules/lodash/lodash.js"),k=s("./packages/grafana-data/src/types/index.ts"),S=s("./packages/grafana-data/src/dataframe/processDataFrame.ts"),C=s("./packages/grafana-data/src/dataframe/MutableDataFrame.ts"),T=s("./packages/grafana-data/src/field/index.ts"),N=s("./packages/grafana-data/src/valueFormats/index.ts");function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let I;function P(e,t){return new F(t).readCSV(e)}var M;!function(e){e[e.full=0]="full",e[e.name=1]="name",e[e.none=2]="none"}(I||(I={})),function(e){e[e.Starting=0]="Starting",e[e.InHeader=1]="InHeader",e[e.ReadingRows=2]="ReadingRows"}(M||(M={}));class F{constructor(e){O(this,"config",void 0),O(this,"callback",void 0),O(this,"state",void 0),O(this,"data",void 0),O(this,"current",void 0),O(this,"chunk",((e,t)=>{for(let t=0;t<e.data.length;t++){const s=e.data[t];if(s.length<1)continue;const a=s[0];if(a){if(a.startsWith("#")){const e=a.indexOf("#",2);if(e>0){const t=a.substr(1,e-1),n="name"===t,i={unit:"#"};if(n||i.hasOwnProperty(t)){this.state===M.ReadingRows&&(this.current=new C.v({fields:[]}),this.data.push(this.current));const i=a.substr(e+1);if(n){this.current.addFieldFor(void 0,i);for(let e=1;e<s.length;e++)this.current.addFieldFor(void 0,s[e])}else{const{fields:e}=this.current;for(let a=0;a<e.length;a++){e[a].config||(e[a].config={});e[a].config[t]=0===a?i:s[a]}}this.state=M.InHeader;continue}}else if(this.state===M.Starting){this.state=M.InHeader;continue}continue}if(this.state===M.Starting){if((0,S.LI)(a)===k.fS.string){for(const e of s)this.current.addFieldFor(void 0,e);this.state=M.InHeader;continue}this.state=M.InHeader}}if(this.state,M.ReadingRows,this.state=M.ReadingRows,s.length>this.current.fields.length){const{fields:e}=this.current;for(let t=e.length;t<s.length;t++)this.current.addFieldFor(s[t]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(s),this.callback&&this.callback.onRow(s)}})),e||(e={}),this.config=e.config||{},this.callback=e.callback,this.current=new C.v({fields:[]}),this.state=M.Starting,this.data=[]}readCSV(e){this.current=new C.v({fields:[]}),this.data=[this.current];const t=Object.assign({},this.config,{dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk});return w().parse(e,t),this.data}}function A(e,t){const s=e.toString();return s.includes('"')?t.quoteChar+s.replace(/"/gi,'""')+t.quoteChar:s.includes("\n")||s.includes(t.delimiter)?t.quoteChar+s+t.quoteChar:s}function D(e,t){return e.display?s=>{const a=e.display(s);return A((0,N.zc)(a),t)}:e=>A(e,t)}function $(e,t,s){const a="name"===e,n="type"===e;for(const i of t){const r=i.config;if(a||n||r&&r.hasOwnProperty(e)){let i="#"+e+"#";for(let r=0;r<t.length;r++){r>0&&(i+=s.delimiter);let o=t[r].name;n?o=t[r].type:a||(o=t[r].config[e]),o&&(i+=A(o,s))}return i+s.newline}}return""}function L(){const e=["x","y"];return e.toLocaleString?e.toLocaleString().charAt(1):","}function E(e,t){if(!e)return"";let s=(t=(0,j.defaults)(t,{delimiter:L(),newline:"\r\n",quoteChar:'"',encoding:"",headerStyle:I.name,useExcelHeader:!1})).useExcelHeader?`sep=${t.delimiter}${t.newline}`:"";for(const a of e){const{fields:e}=a;if(0===e.length)continue;if(t.headerStyle===I.full)s=s+$("name",e,t)+$("type",e,t)+$("unit",e,t)+$("dateFormat",e,t);else if(t.headerStyle===I.name){for(let n=0;n<e.length;n++)n>0&&(s+=t.delimiter),s+=`"${(0,T.CZ)(e[n],a).replace(/"/g,'""')}"`;s+=t.newline}const n=e[0].values.length;if(n>0){const a=e.map((e=>D(e,t)));for(let i=0;i<n;i++){for(let n=0;n<e.length;n++){n>0&&(s+=t.delimiter);const r=e[n].values.get(i);null!==r&&(s+=a[n](r))}s+=t.newline}}s+=t.newline}return s}var R=s("./packages/grafana-data/src/types/logs.ts"),_=s("./packages/grafana-data/src/vector/ArrayVector.ts");const V=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function B(e){if(!e)return R.in.unknown;let t,s=R.in.unknown;for(const a of Object.keys(R.in)){const n=new RegExp(`\\b${a}\\b`,"i").exec(e);n&&(void 0===t||n.index<t)&&(s=R.in[a],t=n.index)}return s}function z(e){const t=R.in[e.toString().toLowerCase()];return t||R.in.unknown}function U(e,t){const s=new _.G,a=e.fields[t];for(let e=0;e<a.values.length;e++){const e=a.values.get(t);s.buffer.push(B(e))}return Object.assign({},e,{fields:[...e.fields,{name:"LogLevel",type:k.fS.string,values:s,config:{}}]})}const q={JSON:{buildMatcher:e=>new RegExp(`(?:{|,)\\s*"${e}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:e=>{try{const t=JSON.parse(e);return Object.keys(t).map((e=>`"${e}":${JSON.stringify(t[e])}`))}catch{}return[]},getLabelFromField:e=>(e.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:e=>(e.match(/:\s*(.*)$/)||[])[1],test:e=>{try{return JSON.parse(e)}catch(e){}}},logfmt:{buildMatcher:e=>new RegExp(`(?:^|\\s)${(0,j.escapeRegExp)(e)}=("[^"]*"|\\S+)`),getFields:e=>{const t=[];return e.replace(new RegExp(V,"g"),(e=>(t.push(e.trim()),""))),t},getLabelFromField:e=>(e.match(V)||[])[1],getValueFromField:e=>(e.match(V)||[])[2],test:e=>V.test(e)}};function H(e,t){const s=e.filter((e=>t.test(e.entry))),a=s.length,n=(0,j.countBy)(s,(e=>{const s=e.entry.match(t);return s?s[1]:null}));return Z(n,a)}function G(e,t){const s=e.filter((e=>void 0!==e.labels[t])),a=s.length,n=(0,j.countBy)(s,(e=>e.labels[t]));return Z(n,a)}function W(e){const t=e.filter((e=>null!=e)),s=(0,j.countBy)(t);return Z(s,t.length)}const Z=(e,t)=>(0,j.chain)(e).map(((e,s)=>({count:e,value:s,proportion:e/t}))).sortBy("count").reverse().value();function Q(e){let t;try{q.JSON.test(e)&&(t=q.JSON)}catch(e){}return!t&&q.logfmt.test(e)&&(t=q.logfmt),t}const K=(e,t)=>e.timeEpochMs<t.timeEpochMs?-1:e.timeEpochMs>t.timeEpochMs?1:e.timeEpochNs<t.timeEpochNs?-1:e.timeEpochNs>t.timeEpochNs?1:0,Y=(e,t)=>e.timeEpochMs>t.timeEpochMs?-1:e.timeEpochMs<t.timeEpochMs?1:e.timeEpochNs>t.timeEpochNs?-1:e.timeEpochNs<t.timeEpochNs?1:0,J=(e,t)=>{const s=e?X(e.rows,t):[];return e?Object.assign({},e,{rows:s}):{hasUniqueLabels:!1,rows:s}},X=(e,t)=>t===R.UV.Ascending?e.sort(K):e.sort(Y),ee=e=>e.labels.__error__?{hasError:!0,errorMessage:e.labels.__error__}:{hasError:!1},te=e=>e.replace(/\\n|\\t|\\r/g,(e=>"t"===e.slice(1)?"\t":"\n"));var se=s("./packages/grafana-data/src/utils/labels.ts");const ae=e=>Object.keys(e).reduce(((t,s)=>(void 0!==e[s]&&(t[s]=e[s]),t)),{});function ne(e,t){return t.visualization.getColorByName(e)}function ie(e,t){return"gray"}const re=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],oe=e=>{let t,s=Number.MAX_VALUE;for(let a=0;a<e.values.length;a++){const n=e.values.get(a);if(void 0!==t){const e=n-t;s=e,e<s&&(s=e)}t=n}return s},le=e=>{for(let t=0;t<e.values.length;t++){const s=e.values.get(t);if(null!=s){const e=s.toString();if(13===e.length&&e%1e3!=0)return!0}}return!1};var ce=s("./packages/grafana-data/src/utils/binaryOperators.ts");let de;!function(e){e.id="id",e.title="title",e.subTitle="subTitle",e.mainStat="mainStat",e.secondaryStat="secondaryStat",e.source="source",e.target="target",e.detail="detail__",e.arc="arc__",e.color="color"}(de||(de={}));var ue=s("./packages/grafana-data/src/utils/OptionsUIBuilders.ts"),pe=s("./packages/grafana-data/src/types/data.ts");function he({xField:e,yField:t,nullValueMode:s}){const a=e.values,n=t.values,i=a.length;if(n.length!==i)throw new Error("Unexpected field length");const r=s===pe.S.Ignore,o=s===pe.S.AsZero,l=[];for(let e=0;e<i;e++){const t=a.get(e);let s=n.get(e);if(null===s){if(r)continue;o&&(s=0)}null!==t&&l.push([t,s])}return l}function ge(e,t){if(!t.from||!t.to||!e||0===e.length)return[];const s=t.from.valueOf(),a=t.to.valueOf(),n=e[0][1];return[[s,n],[a,n]]}var me=s("./packages/grafana-data/src/utils/location.ts"),fe=s("./packages/grafana-data/src/utils/url.ts"),be=s("./packages/grafana-data/src/utils/dataLinks.ts");let ve;!function(e){e[e.Transformations=0]="Transformations",e[e.FieldConfig=1]="FieldConfig",e[e.FieldConfigOverrides=2]="FieldConfigOverrides"}(ve||(ve={}));var xe=s("./packages/grafana-data/src/utils/makeClassES5Compatible.ts"),ye=s("./packages/grafana-data/src/utils/anyToNumber.ts"),we=s("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),je=s("./node_modules/rxjs/dist/esm5/internal/observable/timer.js"),ke=s("./node_modules/rxjs/dist/esm5/internal/operators/mapTo.js"),Se=s("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");function Ce({whileLoading:e,source:t}){return(0,we.T)((0,je.H)(200).pipe((0,ke.h)(e),(0,Se.R)(t)),t)}var Te=s("./packages/grafana-data/src/utils/valueMappings.ts")},"./packages/grafana-data/src/utils/labels.ts":(e,t,s)=>{"use strict";s.d(t,{J8:()=>n,FT:()=>i,IU:()=>r,VS:()=>o,aA:()=>l});const a=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(e){const t={};return e.replace(a,((e,s,a,n)=>(t[s]=n,""))),t}function i(e){return e.reduce(((e,t)=>{if(!t)throw new Error("Need parsed labels to find common labels.");return e?(Object.keys(t).forEach((s=>{void 0!==e[s]&&e[s]===t[s]||delete e[s]})),Object.keys(e).forEach((s=>{void 0===t[s]&&delete e[s]}))):e=Object.assign({},t),e}),void 0)}function r(e,t){const s=Object.assign({},e);return Object.keys(t).forEach((e=>{delete s[e]})),s}function o(e,t){if(!e)return!0;for(const[s,a]of Object.entries(e))if(!t||t[s]!==a)return!1;return!0}function l(e,t="",s){if(!e||0===Object.keys(e).length)return t;const a=Object.keys(e).sort().map((t=>`${t}="${e[t]}"`)).join(", ");return s?a:["{",a,"}"].join("")}},"./packages/grafana-data/src/utils/location.ts":(e,t,s)=>{"use strict";s.d(t,{u:()=>c});var a=s("./packages/grafana-data/src/utils/url.ts"),n=s("./packages/grafana-data/src/text/index.ts");let i,r,o={appSubUrl:""};const l=e=>{var t;const s=null!==(t=o.appSubUrl)&&void 0!==t?t:"",a=s.endsWith("/")?1:0,n=e.startsWith("http");let i=s;return e.startsWith("/")&&!n||(i=`${window.location.origin}${s}`),e.length>0&&0===e.indexOf(i)?e.slice(i.length-a):e},c={initialize:e=>{o=e.config,i=e.getTimeRangeForUrl,r=e.getVariablesUrlParams},stripBaseFromUrl:l,assureBaseUrl:e=>e.startsWith("/")?`${o.appSubUrl}${l(e)}`:e,updateSearchParams:(e,t)=>{const s=new URL(e);return new URLSearchParams(t).forEach(((e,t)=>s.searchParams.set(t,e))),s.href},getTimeRangeUrlParams:()=>i?a.Cj.toUrlParams(i()):null,getVariablesUrlParams:e=>{if(!r)return null;const t=r(e);return a.Cj.toUrlParams(t)},processUrl:e=>o.disableSanitizeHtml?e:n.QX.sanitizeUrl(e)}},"./packages/grafana-data/src/utils/makeClassES5Compatible.ts":(e,t,s)=>{"use strict";function a(e){return new Proxy(e,{apply:(e,t,s)=>("undefined"!=typeof Reflect&&Reflect.construct||alert("Browser is too old"),Reflect.construct(e,s,t.constructor))})}s.d(t,{s:()=>a})},"./packages/grafana-data/src/utils/url.ts":(e,t,s)=>{"use strict";function a(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function n(e){const t=[],s=/\[\]$/,n=e=>"[object Array]"===Object.prototype.toString.call(e),i=(e,s)=>{if("boolean"!=typeof(s="function"==typeof s?s():null==s?"":s))t[t.length]=a(e,!0)+"="+a(s,!0);else{const n=s?"":"="+a("false",!0);t[t.length]=a(e,!0)+n}},r=(e,a)=>{let o,l,c;if(e)if(n(a))for(o=0,l=a.length;o<l;o++)s.test(e)?i(e,a[o]):r(e,a[o]);else if(a&&"[object Object]"===String(a))for(c in a)r(e+"["+c+"]",a[c]);else i(e,a);else if(n(a))for(o=0,l=a.length;o<l;o++)i(a[o].name,a[o].value);else for(c in a)r(c,a[c]);return t};return r("",e).join("&")}function i(e){try{return decodeURIComponent(e)}catch(e){return}}s.d(t,{Cj:()=>r,S:()=>o});const r={renderUrl:function(e,t){return t&&Object.keys(t).length>0&&(e+="?"+n(t)),e},toUrlParams:n,appendQueryToUrl:function(e,t){if(null!=t&&""!==t){const s=e.indexOf("?");-1!==s?e.length-s>1&&(e+="&"):e+="?",e+=t}return e},getUrlSearchParams:function(){const e=window.location.search.substring(1).split("&"),t={};for(const s of e){const e=s.split("=");if(e.length>1){const s=decodeURIComponent(e[0]),a=decodeURIComponent(e[1]);t[s]=s in t?[...t[s],a]:[a]}else if(1===e.length){t[decodeURIComponent(e[0])]=!0}}return t},parseKeyValue:function(e){var t={};const s=(e||"").split("&");for(let e of s){let s,a,n;if(e&&(a=e=e.replace(/\+/g,"%20"),s=e.indexOf("="),-1!==s&&(a=e.substring(0,s),n=e.substring(s+1)),a=i(a),void 0!==a)){let e;n=void 0===n||i(n),e="string"==typeof n&&""!==n&&("true"===n||"false"===n)?"true"===n:n,t.hasOwnProperty(a)?Array.isArray(t[a])?t[a].push(n):t[a]=[t[a],isNaN(e)?n:e]:t[a]=isNaN(e)?n:e}}return t}};function o(e,t){return t?JSON.stringify([e.range.from,e.range.to,e.datasource,...e.queries]):JSON.stringify(e)}},"./packages/grafana-data/src/utils/valueMappings.ts":(e,t,s)=>{"use strict";s.d(t,{vh:()=>r,HU:()=>o,GR:()=>l,Jb:()=>c});var a=s("./packages/grafana-data/src/types/index.ts"),n=s("./packages/grafana-data/src/field/index.ts"),i=s("./packages/grafana-data/src/text/string.ts");function r(e,t){for(const s of e)switch(s.type){case a.Hi.ValueToText:if(null==t)continue;const e=s.options[t];if(e)return e;break;case a.Hi.RangeToText:if(null==t)continue;const n=parseFloat(t);if(isNaN(n))continue;if(!isNaN(s.options.from)&&n<s.options.from)continue;if(!isNaN(s.options.to)&&n>s.options.to)continue;return s.options.result;case a.Hi.RegexToText:if(null==t){console.log("null value");continue}if("string"!=typeof t){console.log("non-string value",typeof t);continue}const r=(0,i.jO)(s.options.pattern),o=Object.create(s.options.result);return o.text=t.replace(r,s.options.result.text||""),o;case a.Hi.SpecialValue:switch(s.options.match){case a.eE.Null:if(null==t)return s.options.result;break;case a.eE.NaN:if(isNaN(t))return s.options.result;break;case a.eE.NullAndNaN:if(isNaN(t)||null==t)return s.options.result;break;case a.eE.True:if(!0===t||"true"===t)return s.options.result;break;case a.eE.False:if(!1===t||"false"===t)return s.options.result;break;case a.eE.Empty:if(""===t)return s.options.result}}return null}let o;function l(e,t){var s,a;const n={type:o.ValueToText,value:"",text:"",from:"",to:"",id:0};if(null==e||!e.length)return n;const i=[];for(const t of e)u(t)?i.push(t):i.push(d(t));if(null==i||!i.length)return n;const l=r(i,t);return l?{type:o.ValueToText,value:l.text,text:null!==(s=l.text)&&void 0!==s?s:"",from:"",to:"",id:null!==(a=l.index)&&void 0!==a?a:0}:n}function c(e,t){const s=[];let n=e.mappingType;if(e.mappingType||(e.valueMaps&&e.valueMaps.length?n=1:e.rangeMaps&&e.rangeMaps.length&&(n=2)),1===n)for(let n=0;n<e.valueMaps.length;n++){var i,r;const o=e.valueMaps[n];s.push(d(Object.assign({},o,{id:n,type:a.Hi.ValueToText}),(null===(i=e.fieldConfig)||void 0===i||null===(r=i.defaults)||void 0===r?void 0:r.thresholds)||t))}else if(2===n)for(let n=0;n<e.rangeMaps.length;n++){var o,l;const i=e.rangeMaps[n];s.push(d(Object.assign({},i,{id:n,type:a.Hi.RangeToText}),(null===(o=e.fieldConfig)||void 0===o||null===(l=o.defaults)||void 0===l?void 0:l.thresholds)||t))}return s}function d(e,t){const s={type:a.Hi.ValueToText,options:{}},i=[];let r;const l=parseFloat(e.text);if(t&&!isNaN(l)){const e=(0,n.m1)(l,t.steps);e&&e.color&&(r=e.color)}switch(e.type){case o.ValueToText:case a.Hi.ValueToText:null!=e.value&&("null"===e.value?i.push({type:a.Hi.SpecialValue,options:{match:a.eE.Null,result:{text:e.text,color:r}}}):s.options[String(e.value)]={text:e.text,color:r});break;case o.RangeToText:case a.Hi.RangeToText:"null"===e.from||"null"===e.to?i.push({type:a.Hi.SpecialValue,options:{match:a.eE.Null,result:{text:e.text,color:r}}}):i.push({type:a.Hi.RangeToText,options:{from:+e.from,to:+e.to,result:{text:e.text,color:r}}})}return Object.keys(s.options).length>0&&i.unshift(s),i[0]}function u(e){return!!e&&(e.hasOwnProperty("options")&&"object"==typeof e.options)}!function(e){e[e.ValueToText=1]="ValueToText",e[e.RangeToText=2]="RangeToText"}(o||(o={}))},"./packages/grafana-data/src/valueFormats/index.ts":(e,t,s)=>{"use strict";s.d(t,{IR:()=>a.IR,zc:()=>a.zc,Cf:()=>a.Cf,QW:()=>a.QW,Td:()=>a.Td,br:()=>a.br,SP:()=>a.SP,Qj:()=>a.Qj,SR:()=>a.SR,vb:()=>a.vb,FH:()=>a.FH,bn:()=>a.bn,q2:()=>a.q2});var a=s("./packages/grafana-data/src/valueFormats/valueFormats.ts")},"./packages/grafana-data/src/valueFormats/symbolFormatters.ts":(e,t,s)=>{"use strict";s.d(t,{Aq:()=>n,dT:()=>i,Yh:()=>r,i7:()=>o});var a=s("./packages/grafana-data/src/valueFormats/valueFormats.ts");function n(e,t){const s=(0,a.Qj)(1e3,["","K","M","B","T"]);return(a,n,i)=>{if(null===a)return{text:""};const r=s(a,n,i);return t?r.suffix=void 0!==r.suffix?`${r.suffix}${e}`:void 0:r.prefix=e,r}}function i(e){switch(e){case"f":return-5;case"p":return-4;case"n":return-3;case"μ":case"µ":return-2;case"m":return-1;case"":return 0;case"k":return 1;case"M":return 2;case"G":return 3;case"T":return 4;case"P":return 5;case"E":return 6;case"Z":return 7;case"Y":return 8}return 0}function r(e,t=0){const s=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"].slice(t).map((t=>" "+t+e));return(0,a.Qj)(1024,s)}function o(e,t=0){let s=["f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];s=s.slice(5+(t||0));const n=s.map((t=>" "+t+e));return(0,a.Qj)(1e3,n)}},"./packages/grafana-data/src/valueFormats/valueFormats.ts":(e,t,s)=>{"use strict";s.d(t,{IR:()=>q,zc:()=>L,Cf:()=>K,QW:()=>J,Td:()=>Y,br:()=>U,SP:()=>G,Qj:()=>H,SR:()=>W,vb:()=>Z,FH:()=>V,bn:()=>B,q2:()=>z});var a=s("./packages/grafana-data/src/datetime/moment_wrapper.ts"),n=s("./packages/grafana-data/src/datetime/index.ts");let i;!function(e){e.Year="year",e.Month="month",e.Week="week",e.Day="day",e.Hour="hour",e.Minute="minute",e.Second="second",e.Millisecond="millisecond"}(i||(i={}));const r={[i.Year]:31536e3,[i.Month]:2592e3,[i.Week]:604800,[i.Day]:86400,[i.Hour]:3600,[i.Minute]:60,[i.Second]:1,[i.Millisecond]:.001};function o(e,t){return null===e?{text:""}:Math.abs(e)<1e3?{text:V(e,t),suffix:" ns"}:Math.abs(e)<1e6?B(e/1e3,t," µs"):Math.abs(e)<1e9?B(e/1e6,t," ms"):Math.abs(e)<6e10?B(e/1e9,t," s"):Math.abs(e)<36e11?B(e/6e10,t," min"):Math.abs(e)<864e11?B(e/36e11,t," hour"):B(e/864e11,t," day")}function l(e,t){return null===e?{text:""}:Math.abs(e)<1e3?{text:V(e,t),suffix:" µs"}:Math.abs(e)<1e6?B(e/1e3,t," ms"):B(e/1e6,t," s")}function c(e,t,s){return null===e?{text:""}:Math.abs(e)<1e3?{text:V(e,t),suffix:" ms"}:Math.abs(e)<6e4?B(e/1e3,t," s"):Math.abs(e)<36e5?B(e/6e4,t," min"):Math.abs(e)<864e5?B(e/36e5,t," hour"):Math.abs(e)<31536e6?B(e/864e5,t," day"):B(e/31536e6,t," year")}function d(e,t){return null===e?{text:""}:0===e?{text:"0",suffix:" s"}:Math.abs(e)<1e-6?B(1e9*e,t," ns"):Math.abs(e)<.001?B(1e6*e,t," µs"):Math.abs(e)<1?B(1e3*e,t," ms"):Math.abs(e)<60?{text:V(e,t),suffix:" s"}:Math.abs(e)<3600?B(e/60,t," min"):Math.abs(e)<86400?B(e/3600,t," hour"):Math.abs(e)<604800?B(e/86400,t," day"):Math.abs(e)<31536e3?B(e/604800,t," week"):B(e/31556900,t," year")}function u(e,t){return null===e?{text:""}:Math.abs(e)<60?{text:V(e,t),suffix:" min"}:Math.abs(e)<1440?B(e/60,t," hour"):Math.abs(e)<10080?B(e/1440,t," day"):Math.abs(e)<604800?B(e/10080,t," week"):B(e/525948,t," year")}function p(e,t){return null===e?{text:""}:Math.abs(e)<24?{text:V(e,t),suffix:" hour"}:Math.abs(e)<168?B(e/24,t," day"):Math.abs(e)<8760?B(e/168,t," week"):B(e/8760,t," year")}function h(e,t){return null===e?{text:""}:Math.abs(e)<7?{text:V(e,t),suffix:" day"}:Math.abs(e)<365?B(e/7,t," week"):B(e/365,t," year")}function g(e,t,s){if(null===e)return{text:""};if(0===e)return{text:"0",suffix:" "+s+"s"};if(e<0){const a=g(-e,t,s);return a.suffix||(a.suffix=""),a.suffix+=" ago",a}const a=[{long:i.Year},{long:i.Month},{long:i.Week},{long:i.Day},{long:i.Hour},{long:i.Minute},{long:i.Second},{long:i.Millisecond}];e*=1e3*r[s];const n=[];let o=!1,l=0;null!=t&&(l=t);for(let t=0;t<a.length&&l>=0;t++){const s=1e3*r[a[t].long],i=e/s;if(i>=1||o){o=!0;const r=Math.floor(i),c=a[t].long+(1!==r?"s":"");n.push(r+" "+c),e%=s,l--}}return{text:n.join(", ")}}function m(e,t){if(null===e)return{text:""};if(e<1e3)return{text:(0,a.zh)(e).format("SSS\\m\\s")};if(e<6e4){let s="ss\\s:SSS\\m\\s";return 0===t&&(s="ss\\s"),{text:(0,a.zh)(e).format(s)}}if(e<36e5){let s="mm\\m:ss\\s:SSS\\m\\s";return 0===t?s="mm\\m":1===t&&(s="mm\\m:ss\\s"),{text:(0,a.zh)(e).format(s)}}let s="mm\\m:ss\\s:SSS\\m\\s";const n=`${("0"+Math.floor((0,a.Ks)(e,"milliseconds").asHours())).slice(-2)}h`;0===t?s="":1===t?s="mm\\m":2===t&&(s="mm\\m:ss\\s");return{text:s?`${n}:${(0,a.zh)(e).format(s)}`:n}}function f(e,t){return g(e,t,i.Millisecond)}function b(e,t){return g(e,t,i.Second)}function v(e){if(e<0){const t=v(-e);return t.suffix||(t.suffix=""),t.suffix+=" ago",t}const t=[],s=Math.floor(e/3600),a=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return s>9?t.push(""+s):t.push("0"+s),a>9?t.push(""+a):t.push("0"+a),n>9?t.push(""+n):t.push("0"+n),{text:t.join(":")}}function x(e){if(e<0){const t=x(-e);return t.suffix||(t.suffix=""),t.suffix+=" ago",t}let t="";const s=Math.floor(e/86400);s>0&&(t=s+" d ");return{text:t+v(e-24*s*3600).text}}function y(e,t){return d(e/100,t)}function w(e,t){return m(e,t)}function j(e,t){return m(1e3*e,t)}function k(e,t){return(s,i,r,o)=>t&&(0,a.CQ)().isSame(s,"day")?{text:(0,n.dq)(s,{format:t,timeZone:o})}:{text:(0,n.dq)(s,{format:e,timeZone:o})}}const S=k("YYYY-MM-DD HH:mm:ss"),C=k("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),T=k("MM/DD/YYYY h:mm:ss a"),N=k("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function O(e,t,s,a,i){return{text:(0,n.dq)(e,{format:i?n.U6.fullDateMS:n.U6.fullDate,timeZone:a})}}function I(e,t,s,a){return{text:(0,n.E8)(e,{timeZone:a})}}function P(e,t){return null===e?{text:""}:{text:V(e,t),suffix:"%"}}function M(e,t){return null===e?{text:""}:{text:V(100*e,t),suffix:"%"}}function F(e,t){if(null==e)return{text:""};const s=A(e,t);return"-"===s.text.substring(0,1)?s.text="-0x"+s.text.substring(1):s.text="0x"+s.text,s}function A(e,t){return null==e?{text:""}:{text:parseFloat(V(e,t)).toString(16).toUpperCase()}}function D(e,t){return null==e?{text:""}:{text:e.toExponential(t)}}var $=s("./packages/grafana-data/src/valueFormats/symbolFormatters.ts");function L(e){var t,s;return`${null!==(t=e.prefix)&&void 0!==t?t:""}${e.text}${null!==(s=e.suffix)&&void 0!==s?s:""}`}let E=[];const R={};let _=!1;function V(e,t){if(null===e)return"";if(e===Number.NEGATIVE_INFINITY||e===Number.POSITIVE_INFINITY)return e.toLocaleString();null==t&&(t=function(e){let t=1-Math.floor(Math.log(Math.abs(e))/Math.LN10);const s=Math.pow(10,-t);e/s>2.25&&++t;e%1==0&&(t=0);return Math.max(0,t)}(e));const s=t?Math.pow(10,Math.max(0,t)):1,a=String(Math.round(e*s)/s);if(-1!==a.indexOf("e")||0===e)return a;const n=a.indexOf("."),i=-1===n?0:a.length-n-1;return i<t?(i?a:a+".")+String(s).substr(1,t-i):a}function B(e,t,s){return{text:V(e,t),suffix:s}}function z(e,t){return(s,a)=>{if(null===s)return{text:""};const n=V(s,a);return e?t?{text:n,prefix:e}:{text:n,suffix:" "+e}:{text:n}}}function U(e){return e&&e.startsWith("bool")}function q(e,t){return s=>({text:s?e:t})}function H(e,t){return(s,a,n)=>{if(null===s)return{text:""};if(s===Number.NEGATIVE_INFINITY||s===Number.POSITIVE_INFINITY||isNaN(s))return{text:s.toLocaleString()};let i=0;const r=t.length;for(;Math.abs(s)>=e;)if(i++,s/=e,i>=r)return{text:"NA"};return{text:V(s,a),suffix:t[i]}}}function G(e,t){return null==e?{text:""}:{text:e.toLocaleString(void 0,{maximumFractionDigits:t})}}function W(e){const t=H(1e3,["","K","M","B","T"]);return(s,a,n)=>{if(null===s)return{text:""};const i=t(s,a,n);return i.suffix+=" "+e,i}}function Z(e){return{text:`${e}`}}function Q(){E=[{name:"Misc",formats:[{name:"none",id:"none",fn:z("")},{name:"String",id:"string",fn:Z},{name:"short",id:"short",fn:H(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:P},{name:"Percent (0.0-1.0)",id:"percentunit",fn:M},{name:"Humidity (%H)",id:"humidity",fn:z("%H")},{name:"Decibel",id:"dB",fn:z("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:F},{name:"Hexadecimal",id:"hex",fn:A},{name:"Scientific notation",id:"sci",fn:D},{name:"Locale format",id:"locale",fn:G},{name:"Pixels",id:"pixel",fn:z("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec²",id:"accMS2",fn:z("m/sec²")},{name:"Feet/sec²",id:"accFS2",fn:z("f/sec²")},{name:"G unit",id:"accG",fn:z("g")}]},{name:"Angle",formats:[{name:"Degrees (°)",id:"degree",fn:z("°")},{name:"Radians",id:"radian",fn:z("rad")},{name:"Gradian",id:"grad",fn:z("grad")},{name:"Arc Minutes",id:"arcmin",fn:z("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:z("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m²)",id:"areaM2",fn:z("m²")},{name:"Square Feet (ft²)",id:"areaF2",fn:z("ft²")},{name:"Square Miles (mi²)",id:"areaMI2",fn:z("mi²")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,$.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,$.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,$.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,$.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,$.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,$.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,$.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,$.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:z("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:z("ppb")},{name:"nanogram per cubic meter (ng/m³)",id:"conngm3",fn:z("ng/m³")},{name:"nanogram per normal cubic meter (ng/Nm³)",id:"conngNm3",fn:z("ng/Nm³")},{name:"microgram per cubic meter (μg/m³)",id:"conμgm3",fn:z("μg/m³")},{name:"microgram per normal cubic meter (μg/Nm³)",id:"conμgNm3",fn:z("μg/Nm³")},{name:"milligram per cubic meter (mg/m³)",id:"conmgm3",fn:z("mg/m³")},{name:"milligram per normal cubic meter (mg/Nm³)",id:"conmgNm3",fn:z("mg/Nm³")},{name:"gram per cubic meter (g/m³)",id:"congm3",fn:z("g/m³")},{name:"gram per normal cubic meter (g/Nm³)",id:"congNm3",fn:z("g/Nm³")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:z("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:z("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,$.Aq)("$")},{name:"Pounds (£)",id:"currencyGBP",fn:(0,$.Aq)("£")},{name:"Euro (€)",id:"currencyEUR",fn:(0,$.Aq)("€")},{name:"Yen (¥)",id:"currencyJPY",fn:(0,$.Aq)("¥")},{name:"Rubles (₽)",id:"currencyRUB",fn:(0,$.Aq)("₽")},{name:"Hryvnias (₴)",id:"currencyUAH",fn:(0,$.Aq)("₴")},{name:"Real (R$)",id:"currencyBRL",fn:(0,$.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,$.Aq)("kr",!0)},{name:"Icelandic Króna (kr)",id:"currencyISK",fn:(0,$.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,$.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,$.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,$.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,$.Aq)("CHF")},{name:"Polish Złoty (PLN)",id:"currencyPLN",fn:(0,$.Aq)("PLN")},{name:"Bitcoin (฿)",id:"currencyBTC",fn:(0,$.Aq)("฿")},{name:"Milli Bitcoin (฿)",id:"currencymBTC",fn:(0,$.Aq)("mBTC")},{name:"Micro Bitcoin (฿)",id:"currencyμBTC",fn:(0,$.Aq)("μBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,$.Aq)("R")},{name:"Indian Rupee (₹)",id:"currencyINR",fn:(0,$.Aq)("₹")},{name:"South Korean Won (₩)",id:"currencyKRW",fn:(0,$.Aq)("₩")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,$.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,$.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,$.Aq)("đ",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,$.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,$.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,$.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,$.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,$.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,$.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,$.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,$.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,$.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,$.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,$.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,$.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,$.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,$.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,$.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,$.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,$.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,$.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,$.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,$.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,$.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,$.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,$.i7)("b/s",1)},{name:"mibibytes/sec",id:"MiBs",fn:(0,$.Yh)("B/s",2)},{name:"mibibits/sec",id:"Mibits",fn:(0,$.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,$.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,$.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,$.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,$.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,$.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,$.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,$.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,$.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,$.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,$.i7)("b/s",4)},{name:"petibytes/sec",id:"PiBs",fn:(0,$.Yh)("B/s",5)},{name:"petibits/sec",id:"Pibits",fn:(0,$.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,$.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,$.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:S},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:C},{name:"Datetime US",id:"dateTimeAsUS",fn:T},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:N},{name:"Datetime local",id:"dateTimeAsLocal",fn:k((0,n.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:k((0,n.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,n.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))},{name:"Datetime default",id:"dateTimeAsSystem",fn:O},{name:"From Now",id:"dateTimeFromNow",fn:I}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,$.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,$.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,$.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,$.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,$.i7)("W",-1)},{name:"Watt per square meter (W/m²)",id:"Wm2",fn:z("W/m²")},{name:"Volt-ampere (VA)",id:"voltamp",fn:(0,$.i7)("VA")},{name:"Kilovolt-ampere (kVA)",id:"kvoltamp",fn:(0,$.i7)("VA",1)},{name:"Volt-ampere reactive (var)",id:"voltampreact",fn:(0,$.i7)("var")},{name:"Kilovolt-ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,$.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,$.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,$.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,$.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,$.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,$.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,$.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,$.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,$.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,$.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,$.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,$.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,$.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,$.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,$.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,$.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,$.i7)("dBm")},{name:"Ohm (Ω)",id:"ohm",fn:(0,$.i7)("Ω")},{name:"Kiloohm (kΩ)",id:"kohm",fn:(0,$.i7)("Ω",1)},{name:"Megaohm (MΩ)",id:"Mohm",fn:(0,$.i7)("Ω",2)},{name:"Farad (F)",id:"farad",fn:(0,$.i7)("F")},{name:"Microfarad (µF)",id:"µfarad",fn:(0,$.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,$.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,$.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,$.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,$.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,$.i7)("H",-1)},{name:"Microhenry (µH)",id:"µhenry",fn:(0,$.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,$.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:z("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:z("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:z("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:z("cfm")},{name:"Litre/hour",id:"litreh",fn:z("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:z("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:z("mL/min")},{name:"Lux (lx)",id:"lux",fn:z("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,$.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,$.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,$.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,$.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,$.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,$.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,$.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,$.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,$.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,$.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,$.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,$.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,$.i7)("g")},{name:"pound (lb)",id:"masslb",fn:z("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,$.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:z("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,$.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:z("in")},{name:"feet (ft)",id:"lengthft",fn:z("ft")},{name:"meter (m)",id:"lengthm",fn:(0,$.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,$.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:z("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,$.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,$.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,$.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,$.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:z("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:z("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:z('"Hg')},{name:"PSI",id:"pressurepsi",fn:H(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,$.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,$.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,$.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,$.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,$.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,$.i7)("Sv",-1)},{name:"microSievert (µSv)",id:"radusv",fn:(0,$.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,$.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,$.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,$.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,$.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,$.i7)("Sv/h",-1)},{name:"microSievert/hour (µSv/h)",id:"radusvh",fn:(0,$.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:z("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,$.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:z("rad/s")},{name:"Degrees per second (°/s)",id:"rotdegs",fn:z("°/s")}]},{name:"Temperature",formats:[{name:"Celsius (°C)",id:"celsius",fn:z("°C")},{name:"Fahrenheit (°F)",id:"fahrenheit",fn:z("°F")},{name:"Kelvin (K)",id:"kelvin",fn:z("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,$.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:o},{name:"microseconds (µs)",id:"µs",fn:l},{name:"milliseconds (ms)",id:"ms",fn:c},{name:"seconds (s)",id:"s",fn:d},{name:"minutes (m)",id:"m",fn:u},{name:"hours (h)",id:"h",fn:p},{name:"days (d)",id:"d",fn:h},{name:"duration (ms)",id:"dtdurationms",fn:f},{name:"duration (s)",id:"dtdurations",fn:b},{name:"duration (hh:mm:ss)",id:"dthms",fn:v},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:x},{name:"Timeticks (s/100)",id:"timeticks",fn:y},{name:"clock (ms)",id:"clockms",fn:w},{name:"clock (s)",id:"clocks",fn:j}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:W("c/s")},{name:"ops/sec (ops)",id:"ops",fn:W("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:W("req/s")},{name:"reads/sec (rps)",id:"rps",fn:W("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:W("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:W("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:W("c/m")},{name:"ops/min (opm)",id:"opm",fn:W("ops/m")},{name:"reads/min (rpm)",id:"rpm",fn:W("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:W("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:z("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:z("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:z("mph")},{name:"knot (kn)",id:"velocityknot",fn:z("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,$.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,$.i7)("L")},{name:"cubic meter",id:"m3",fn:z("m³")},{name:"Normal cubic meter",id:"Nm3",fn:z("Nm³")},{name:"cubic decimeter",id:"dm3",fn:z("dm³")},{name:"gallons",id:"gallons",fn:z("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:q("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:q("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:q("On","Off")}]}];for(const e of E)for(const t of e.formats)R[t.id]=t.fn;[{from:"farenheit",to:"fahrenheit"}].forEach((e=>{const t=R[e.to];t&&(R[e.from]=t)})),_=!0}function K(e){if(!e)return z("");_||Q();const t=R[e];if(!t&&e){let t=e.indexOf(":");if(t>0){const s=e.substring(0,t),a=e.substring(t+1);if("prefix"===s)return z(a,!0);if("suffix"===s)return z(a,!1);if("time"===s)return k(a);if("si"===s){const e=(0,$.dT)(a.charAt(0)),t=0===e?a:a.substring(1);return(0,$.i7)(t,e)}if("count"===s)return W(a);if("currency"===s)return(0,$.Aq)(a);if("bool"===s){if(t=a.indexOf("/"),t>=0){return q(a.substring(0,t),a.substring(t+1))}return q(a,"-")}}return z(e)}return t}function Y(){return _||Q(),R}function J(){return _||Q(),E.map((e=>({text:e.name,submenu:e.formats.map((e=>({text:e.name,value:e.id})))})))}},"./packages/grafana-data/src/vector/ArrayVector.ts":(e,t,s)=>{"use strict";s.d(t,{G:()=>n});var a=s("./packages/grafana-data/src/vector/FunctionalVector.ts");class n extends a.G{constructor(e){var t,s,a;super(),a=void 0,(s="buffer")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,this.buffer=e||[]}get length(){return this.buffer.length}add(e){this.buffer.push(e)}get(e){return this.buffer[e]}set(e,t){this.buffer[e]=t}reverse(){this.buffer.reverse()}toArray(){return this.buffer}toJSON(){return this.buffer}}},"./packages/grafana-data/src/vector/AsNumberVector.ts":(e,t,s)=>{"use strict";s.d(t,{s:()=>n});var a=s("./packages/grafana-data/src/vector/FunctionalVector.ts");class n extends a.G{constructor(e){super(),this.field=e}get length(){return this.field.length}get(e){return+this.field.get(e)}}},"./packages/grafana-data/src/vector/CircularVector.ts":(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var a=s("./packages/grafana-data/src/vector/vectorToArray.ts"),n=s("./packages/grafana-data/src/vector/FunctionalVector.ts");function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r extends n.G{constructor(e){super(),i(this,"buffer",void 0),i(this,"index",void 0),i(this,"capacity",void 0),i(this,"tail",void 0),i(this,"add",void 0),this.buffer=e.buffer||[],this.capacity=this.buffer.length,this.tail="head"!==e.append,this.index=0,this.add=this.getAddFunction(),e.capacity&&this.setCapacity(e.capacity)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?e=>{this.buffer.push(e),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:e=>{this.buffer.unshift(e),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?e=>{this.buffer[this.index]=e,this.index=(this.index+1)%this.buffer.length}:e=>{let t=this.index-1;t<0&&(t=this.buffer.length-1),this.buffer[t]=e,this.index=t}}setCapacity(e){if(this.capacity===e)return;const t=this.toArray();if(e>this.length)this.buffer=t;else if(e<this.capacity){const s=this.length-e;this.tail?this.buffer=t.slice(s,t.length):this.buffer=t.slice(0,t.length-s)}this.capacity=e,this.index=0,this.add=this.getAddFunction()}setAppendMode(e){const t="head"!==e;t!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=t,this.add=this.getAddFunction())}reverse(){this.buffer.reverse()}get(e){return this.buffer[(e+this.index)%this.buffer.length]}set(e,t){this.buffer[(e+this.index)%this.buffer.length]=t}get length(){return this.buffer.length}toArray(){return(0,a.n)(this)}toJSON(){return(0,a.n)(this)}}},"./packages/grafana-data/src/vector/FunctionalVector.ts":(e,t,s)=>{"use strict";s.d(t,{G:()=>n,s:()=>i});var a=s("./packages/grafana-data/src/vector/vectorToArray.ts");class n{*iterator(){for(let e=0;e<this.length;e++)yield this.get(e)}[Symbol.iterator](){return this.iterator()}forEach(e){return i(this).forEach(e)}map(e){return i(this).map(e)}filter(e){return i(this).filter(e)}toArray(){return(0,a.n)(this)}toJSON(){return this.toArray()}}function i(e){return{*[Symbol.iterator](){for(let t=0;t<e.length;t++)yield e.get(t)},forEach(t){for(let s=0;s<e.length;s++)t(e.get(s))},map(t){const s=[];for(let a=0;a<e.length;a++)s.push(t(e.get(a),a));return s},filter(e){const t=[];for(const s of this)e(s)&&t.push(s);return t}}}},"./packages/grafana-data/src/vector/SortedVector.ts":(e,t,s)=>{"use strict";s.d(t,{o:()=>n});var a=s("./packages/grafana-data/src/vector/vectorToArray.ts");class n{constructor(e,t){this.source=e,this.order=t}get length(){return this.source.length}get(e){return this.source.get(this.order[e])}toArray(){return(0,a.n)(this)}toJSON(){return(0,a.n)(this)}}},"./packages/grafana-data/src/vector/index.ts":(e,t,s)=>{"use strict";s.d(t,{l$:()=>i,Gt:()=>r.G,sq:()=>f.s,rM:()=>c,dV:()=>o.d,uI:()=>l,$Y:()=>h,rm:()=>m,oH:()=>d.o,sD:()=>p.s});var a=s("./packages/grafana-data/src/vector/vectorToArray.ts");function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e=0){n(this,"length",0),n(this,"source",[]),this.length=e}setLength(e){if(e>this.length)this.length=e;else if(e<this.length){const t=[];for(const s of this.source)if(t.push(s),s.end>e){s.end=e;break}this.source=t,this.length=e}}append(e){const t={start:this.length,end:this.length+e.length,values:e};return this.length=t.end,this.source.push(t),t}get(e){for(let t=0;t<this.source.length;t++){const s=this.source[t];if(e>=s.start&&e<s.end)return s.values.get(e-s.start)}}toArray(){return(0,a.n)(this)}toJSON(){return(0,a.n)(this)}}var r=s("./packages/grafana-data/src/vector/ArrayVector.ts"),o=s("./packages/grafana-data/src/vector/CircularVector.ts");class l{constructor(e,t){this.value=e,this.len=t}get length(){return this.len}get(e){return this.value}toArray(){return new Array(this.length).fill(this.value)}toJSON(){return this.toArray()}}class c{constructor(e,t,s){this.left=e,this.right=t,this.operation=s}get length(){return this.left.length}get(e){return this.operation(this.left.get(e),this.right.get(e))}toArray(){return(0,a.n)(this)}toJSON(){return(0,a.n)(this)}}var d=s("./packages/grafana-data/src/vector/SortedVector.ts"),u=s("./packages/grafana-data/src/valueFormats/index.ts"),p=s("./packages/grafana-data/src/vector/FunctionalVector.ts");class h extends p.G{constructor(e,t){super(),this.source=e,this.formatter=t}get length(){return this.source.length}get(e){const t=this.source.get(e);return(0,u.zc)(this.formatter(t))}}var g=s("./packages/grafana-data/src/types/index.ts");class m extends p.G{constructor(e){super(),this.len=e}get length(){return this.len}get(e){return e}static newField(e){return{name:"",values:new m(e),type:g.fS.number,config:{min:0,max:e-1}}}}var f=s("./packages/grafana-data/src/vector/AsNumberVector.ts")},"./packages/grafana-data/src/vector/vectorToArray.ts":(e,t,s)=>{"use strict";function a(e){const t=Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.get(s);return t}s.d(t,{n:()=>a})},"./packages/grafana-e2e-selectors/src/index.ts":(e,t,s)=>{"use strict";s.d(t,{wl:()=>n});const a={TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"TimePicker from field",toField:"TimePicker to field",applyTimeRange:"data-testid TimePicker submit button",calendar:"TimePicker calendar",absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value"}},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`Panel header item ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:e=>`VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:e=>`${e} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"panel editor apply",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",addQuery:"Query editor add query button"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:e=>`${e} query operation action`,title:e=>`Query editor row title ${e}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:e=>`Alert ${e}`},TransformTab:{content:"Transform editor tab content",newTransform:e=>`New transform ${e}`,transformationEditor:e=>`Transformation editor ${e}`,transformationEditorDebugger:e=>`Transformation editor debugger ${e}`},Transforms:{card:e=>`New transform ${e}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},searchInput:"search transformations"},PageToolbar:{container:()=>".page-toolbar",item:e=>`${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:e=>e?`Options group ${e}`:"Options group",toggle:e=>e?`Options group ${e} toggle`:"Options group toggle"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="react-select-"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]'},TimeZonePicker:{container:"Time zone picker select container"},TraceViewer:{spanBar:()=>'[data-test-id="SpanBar--wrapper"]'},QueryField:{container:"Query field"},ValuePicker:{button:e=>`Value picker button ${e}`,select:e=>`Value picker select ${e}`},Search:{section:"Search section",items:"Search items"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:e=>`Call to action button ${e}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"}},n={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:e=>`Data source list item ${e}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:e=>`Data source plugin item ${e}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:"Dashboard navigation"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Dashboard settings page title"},Annotations:{List:{addAnnotationCTA:a.CallToActionCard.button("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:a.CallToActionCard.button("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button"},QueryVariable:{queryOptionsDataSourceSelect:a.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field"}}}}},Dashboards:{url:"/dashboards",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollBar:()=>".scrollbar-view"},Toolbar:{navBar:()=>".explore-toolbar"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemRow:"Playlist item row",itemIdType:"Playlist item dashboard by ID type",itemTagType:"Playlist item dashboard by Tag type",itemMoveUp:"Move playlist item order up",itemMoveDown:"Move playlist item order down",itemDelete:"Delete playlist item"}},components:a}},"./packages/grafana-runtime/src/index.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{BackendDataSourceResponse:()=>ge.BackendDataSourceResponse,DataResponse:()=>ge.DataResponse,DataSourcePicker:()=>Me,DataSourcePickerProps:()=>o.DataSourcePickerProps,DataSourcePickerState:()=>o.DataSourcePickerState,DataSourceWithBackend:()=>ve,EchoEventType:()=>g,GrafanaBootConfig:()=>_,HealthCheckResult:()=>n.HealthCheckResult,HealthCheckResultDetails:()=>n.HealthCheckResultDetails,HealthStatus:()=>be,HistoryWrapper:()=>U,MetaAnalyticsEventName:()=>Q,PanelRenderer:()=>Se,PanelRendererProps:()=>i.PanelRendererProps,PanelRendererType:()=>i.PanelRendererType,PluginCssOptions:()=>a.PluginCssOptions,QueryRunnerFactory:()=>r.QueryRunnerFactory,StreamOptionsProvider:()=>n.StreamOptionsProvider,SystemJS:()=>X,config:()=>z,createQueryRunner:()=>Ne,frameToMetricFindValue:()=>ge.S9,getAngularLoader:()=>b,getBackendSrv:()=>d,getDataSourceSrv:()=>x,getEchoSrv:()=>k,getGrafanaLiveSrv:()=>A,getLegacyAngularInjector:()=>P,getLocationSrv:()=>w,getTemplateSrv:()=>N,isInteractionEvent:()=>Y,isPageviewEvent:()=>K,loadPluginCss:()=>ee,locationSearchToObject:()=>q,locationService:()=>H,logDebug:()=>le,logError:()=>ce,logInfo:()=>re,logWarning:()=>oe,navigationLogger:()=>Z,registerEchoBackend:()=>S,reportInteraction:()=>ae,reportMetaAnalytics:()=>te,reportPageview:()=>se,setAngularLoader:()=>f,setBackendSrv:()=>c,setDataSourceSrv:()=>v,setEchoSrv:()=>j,setGrafanaLiveSrv:()=>F,setLegacyAngularInjector:()=>I,setLocationService:()=>G,setLocationSrv:()=>y,setPanelRenderer:()=>Ce,setQueryRunnerFactory:()=>Te,setTemplateSrv:()=>T,toDataQueryError:()=>ge.P,toDataQueryResponse:()=>ge.z1});var a={};s.r(a),s.d(a,{i:()=>X,Y:()=>ee});var n={};s.r(n),s.d(n,{CK:()=>ve,QO:()=>be});var i={};s.r(i),s.d(i,{$:()=>Se,L:()=>Ce});var r={};s.r(r),s.d(r,{A:()=>Ne,p:()=>Te});var o={};let l;s.r(o),s.d(o,{q:()=>Me});const c=e=>{l=e},d=()=>l;let u,p,h,g,m;function f(e){u=e}function b(){return u}function v(e){p=e}function x(){return p}function y(e){h=e}function w(){return h}function j(e){m=e}function k(){return m}!function(e){e.Performance="performance",e.MetaAnalytics="meta-analytics",e.Sentry="sentry",e.Pageview="pageview",e.Interaction="interaction"}(g||(g={}));const S=e=>{k().addBackend(e)};let C;const T=e=>{C=e},N=()=>C;let O;const I=e=>{O=e},P=()=>O;let M;const F=e=>{M=e},A=()=>M;var D=s("./packages/grafana-data/src/index.ts"),$=s("./node_modules/history/esm/history.js"),L=s("./packages/grafana-ui/src/index.ts"),E=s("./node_modules/lodash/lodash.js");function R(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class _{constructor(e){R(this,"datasources",{}),R(this,"panels",{}),R(this,"minRefreshInterval",""),R(this,"appUrl",""),R(this,"appSubUrl",""),R(this,"windowTitlePrefix",""),R(this,"buildInfo",{}),R(this,"newPanelTitle",""),R(this,"bootData",void 0),R(this,"externalUserMngLinkUrl",""),R(this,"externalUserMngLinkName",""),R(this,"externalUserMngInfo",""),R(this,"allowOrgCreate",!1),R(this,"disableLoginForm",!1),R(this,"defaultDatasource",""),R(this,"alertingEnabled",!1),R(this,"alertingErrorOrTimeout",""),R(this,"alertingNoDataOrNullValues",""),R(this,"alertingMinInterval",1),R(this,"authProxyEnabled",!1),R(this,"exploreEnabled",!1),R(this,"ldapEnabled",!1),R(this,"sigV4AuthEnabled",!1),R(this,"samlEnabled",!1),R(this,"autoAssignOrg",!0),R(this,"verifyEmailEnabled",!1),R(this,"oauth",void 0),R(this,"disableUserSignUp",!1),R(this,"loginHint",void 0),R(this,"passwordHint",void 0),R(this,"loginError",void 0),R(this,"navTree",void 0),R(this,"viewersCanEdit",!1),R(this,"editorsCanAdmin",!1),R(this,"disableSanitizeHtml",!1),R(this,"liveEnabled",!0),R(this,"theme",void 0),R(this,"theme2",void 0),R(this,"pluginsToPreload",[]),R(this,"featureToggles",{accesscontrol:!1,trimDefaults:!1,tempoServiceGraph:!1,tempoSearch:!1,prometheusMonaco:!1,newNavigation:!1}),R(this,"licenseInfo",{}),R(this,"rendererAvailable",!1),R(this,"rendererVersion",""),R(this,"http2Enabled",!1),R(this,"dateFormats",void 0),R(this,"sentry",{enabled:!1,dsn:"",customEndpoint:"",sampleRate:1}),R(this,"pluginCatalogURL","https://grafana.com/grafana/plugins/"),R(this,"pluginAdminEnabled",!0),R(this,"pluginAdminExternalManageEnabled",!1),R(this,"expressionsEnabled",!1),R(this,"customTheme",void 0),R(this,"awsAllowedAuthProviders",[]),R(this,"awsAssumeRoleEnabled",!1),R(this,"azure",{managedIdentityEnabled:!1}),R(this,"caching",{enabled:!1}),R(this,"geomapDefaultBaseLayerConfig",void 0),R(this,"geomapDisableCustomBaseLayer",void 0),R(this,"unifiedAlertingEnabled",!1),R(this,"applicationInsightsConnectionString",void 0),R(this,"applicationInsightsEndpointUrl",void 0);const t=e.bootData.user.lightTheme?"light":"dark";this.theme2=(0,D.createTheme)({colors:{mode:t}}),this.theme=this.theme2.v1;(0,E.merge)(this,{datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"v1.0",commit:"1",env:"production",isEnterprise:!1},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1},e),this.dateFormats&&D.systemDateFormats.update(this.dateFormats)}}const V=window.grafanaBootData||{settings:{},user:{},navTree:[]},B=V.settings;B.bootData=V;const z=new _(B);class U{constructor(e){var t,s,a,n;n=void 0,(a="history")in(s=this)?Object.defineProperty(s,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[a]=n,this.history=e||$.lX({basename:null!==(t=z.appSubUrl)&&void 0!==t?t:"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(e,t){const s=this.history.location,a=this.getSearchObject();for(const t of Object.keys(e))null===e[t]||void 0===e[t]?delete a[t]:a[t]=e[t];const n=D.urlUtil.renderUrl(s.pathname,a);t?this.history.replace(n,this.history.location.state):this.history.push(n,this.history.location.state)}push(e){this.history.push(e)}replace(e){this.history.replace(e)}reload(){var e;const t=null===(e=this.history.location.state)||void 0===e?void 0:e.routeReloadCounter;this.history.replace(Object.assign({},this.history.location,{state:{routeReloadCounter:t?t+1:1}}))}getLocation(){return this.history.location}getSearchObject(){return q(this.history.location.search)}update(e){if((0,D.deprecationWarning)("LocationSrv","update","partial, push or replace"),e.partial&&e.query)this.partial(e.query,e.partial);else{const t={pathname:e.path};e.query&&(t.search=D.urlUtil.toUrlParams(e.query)),e.replace?this.replace(t):this.push(t)}}}function q(e){let t="number"==typeof e?String(e):e;return t.length>0?t.startsWith("?")?D.urlUtil.parseKeyValue(t.substring(1)):D.urlUtil.parseKeyValue(t):{}}let H=new U;const G=e=>{throw new Error("locationService can be only overriden in test environment")},W=(0,L.createLogger)("Router"),Z=W.logger;let Q;(0,L.attachDebugger)("location",H,W),function(e){e.DashboardView="dashboard-view",e.DataRequest="data-request"}(Q||(Q={}));const K=e=>Boolean(e.payload.page),Y=e=>Boolean(e.payload.interactionName);var J=s("./node_modules/systemjs/dist/system.js");const X=s.n(J)();function ee(e){const t=z.bootData.user.lightTheme?e.light:e.dark;return X.import(`${t}!css`)}const te=e=>{k().addEvent({type:g.MetaAnalytics,payload:e})},se=()=>{var e;const t=H.getLocation(),s=`${null!==(e=z.appSubUrl)&&void 0!==e?e:""}${t.pathname}${t.search}${t.hash}`;k().addEvent({type:g.Pageview,payload:{page:s}})},ae=(e,t)=>{k().addEvent({type:g.Interaction,payload:{interactionName:e,properties:t}})};var ne=s("./node_modules/@sentry/minimal/esm/index.js"),ie=s("./node_modules/@sentry/browser/node_modules/@sentry/types/esm/severity.js");function re(e,t){(0,ne.uT)(e,{level:ie.z.Info,contexts:t})}function oe(e,t){(0,ne.uT)(e,{level:ie.z.Warning,contexts:t})}function le(e,t){(0,ne.uT)(e,{level:ie.z.Debug,contexts:t})}function ce(e,t){(0,ne.Tb)(e,{contexts:t})}var de=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),ue=s("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),pe=s("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),he=s("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),ge=s("./packages/grafana-runtime/src/utils/queryResponse.ts");function me(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class fe extends Error{constructor(e,t){super(e),me(this,"details",void 0),this.details=t,this.name="HealthCheckError"}}let be;!function(e){e.Unknown="UNKNOWN",e.OK="OK",e.Error="ERROR"}(be||(be={}));class ve extends D.DataSourceApi{constructor(e){super(e),me(this,"streamOptionsProvider",xe)}query(e){const{intervalMs:t,maxDataPoints:s,range:a,requestId:n}=e;let i=e.targets;this.filterQuery&&(i=i.filter((e=>this.filterQuery(e))));const r=i.map((a=>{let n=this.id;if("__expr__"===a.datasource)return Object.assign({},a,{datasourceId:n});if(a.datasource){const e=x().getInstanceSettings(a.datasource);if(!e)throw new Error("Unknown Datasource: "+a.datasource);n=e.id}return Object.assign({},this.applyTemplateVariables(a,e.scopedVars),{datasourceId:n,intervalMs:t,maxDataPoints:s})}));if(!r.length)return(0,de.of)({data:[]});const o={queries:r};return a&&(o.range=a,o.from=a.from.valueOf().toString(),o.to=a.to.valueOf().toString()),d().fetch({url:"/api/ds/query",method:"POST",data:o,requestId:n}).pipe((0,pe.w)((t=>{var s;const a=(0,ge.z1)(t,r);return null!==(s=a.data)&&void 0!==s&&s.length&&a.data.find((e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.channel}))?function(e,t,s){const a=A();if(!a)return(0,de.of)(e);const n=[],i=[];for(const o of e.data){var r;const e=(0,D.parseLiveChannelAddress)(null===(r=o.meta)||void 0===r?void 0:r.channel);if(e){const n=o;i.push(a.getDataStream({addr:e,buffer:s(t,n),frame:n}))}else n.push(o)}n.length&&i.push((0,de.of)(Object.assign({},e,{data:n})));if(1===i.length)return i[0];return(0,ue.T)(...i)}(a,e,this.streamOptionsProvider):(0,de.of)(a)})),(0,he.K)((e=>(0,de.of)((0,ge.z1)(e)))))}applyTemplateVariables(e,t){return e}async getResource(e,t){return d().get(`/api/datasources/${this.id}/resources/${e}`,t)}async postResource(e,t){return d().post(`/api/datasources/${this.id}/resources/${e}`,Object.assign({},t))}async callHealthCheck(){return d().request({method:"GET",url:`/api/datasources/${this.id}/health`,showErrorAlert:!1}).then((e=>e)).catch((e=>e.data))}async testDatasource(){return this.callHealthCheck().then((e=>{if(e.status===be.OK)return{status:"success",message:e.message};throw new fe(e.message,e.details)}))}}const xe=(e,t)=>{var s,a;const n={maxLength:null!==(s=e.maxDataPoints)&&void 0!==s?s:500,action:D.StreamingFrameAction.Append};return"now"===(null===(a=e.rangeRaw)||void 0===a?void 0:a.to)&&(n.maxDelta=e.range.to.valueOf()-e.range.from.valueOf()),n};ve=(0,D.makeClassES5Compatible)(ve);var ye,we=s("./node_modules/react/index.js"),je=s("./node_modules/react/jsx-runtime.js");let ke,Se=()=>ye||(ye=(0,je.jsx)("div",{children:"PanelRenderer can only be used after Grafana instance has been started."}));function Ce(e){Se=e}const Te=e=>{if(ke)throw new Error("Runner should only be set when Grafana is starting.");ke=e},Ne=()=>{if(!ke)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return ke()};var Oe=s("./packages/grafana-e2e-selectors/src/index.ts"),Ie=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");function Pe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Me extends we.PureComponent{constructor(e){super(e),Pe(this,"dataSourceSrv",x()),Pe(this,"state",{}),Pe(this,"onChange",(e=>{const t=this.dataSourceSrv.getInstanceSettings(e.value);t&&(this.props.onChange(t),this.setState({error:void 0}))}))}componentDidMount(){const{current:e}=this.props;this.dataSourceSrv.getInstanceSettings(e)||this.setState({error:"Could not find data source "+e})}getCurrentValue(){const{current:e,hideTextValue:t,noDefault:s}=this.props;if(!e&&s)return;const a=this.dataSourceSrv.getInstanceSettings(e);return a?{label:a.name.substr(0,37),value:a.name,imgUrl:a.meta.info.logos.small,hideText:t,meta:a.meta}:{label:(null!=e?e:"no name")+" - not found",value:null===e?void 0:e,imgUrl:"",hideText:t}}getDataSourceOptions(){const{alerting:e,tracing:t,metrics:s,mixed:a,dashboard:n,variables:i,annotations:r,pluginId:o,type:l,filter:c}=this.props;return this.dataSourceSrv.getList({alerting:e,tracing:t,metrics:s,dashboard:n,mixed:a,variables:i,annotations:r,pluginId:o,filter:c,type:l}).map((e=>({value:e.name,label:`${e.name}${e.isDefault?" (default)":""}`,imgUrl:e.meta.info.logos.small,meta:e.meta})))}render(){const{autoFocus:e,onBlur:t,openMenuOnFocus:s,placeholder:a,width:n}=this.props,{error:i}=this.state,r=this.getDataSourceOptions(),o=this.getCurrentValue(),l=Fe();return(0,je.jsx)("div",{"aria-label":Oe.wl.components.DataSourcePicker.container,children:(0,je.jsx)(L.Select,{inputId:"data-source-picker",menuShouldPortal:!0,className:l.select,isMulti:!1,isClearable:!1,backspaceRemovesValue:!1,onChange:this.onChange,options:r,autoFocus:e,onBlur:t,width:n,openMenuOnFocus:s,maxMenuHeight:500,placeholder:a,noOptionsMessage:"No datasources found",value:null!=o?o:null,invalid:!!i,getOptionLabel:e=>e.meta&&(0,D.isUnsignedPluginSignature)(e.meta.signature)&&e!==o?(0,je.jsxs)(L.HorizontalGroup,{align:"center",justify:"space-between",children:[(0,je.jsx)("span",{children:e.label})," ",(0,je.jsx)(L.PluginSignatureBadge,{status:e.meta.signature})]}):e.label||""})})}}Pe(Me,"defaultProps",{autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"});const Fe=(0,L.stylesFactory)((()=>({select:(0,Ie.cx)((0,Ie.css)({minWidth:200}),"ds-picker","select-container")})))},"./packages/grafana-runtime/src/utils/queryResponse.ts":(e,t,s)=>{"use strict";s.d(t,{z1:()=>n,Gw:()=>i,P:()=>r,S9:()=>o});var a=s("./packages/grafana-data/src/index.ts");function n(e,t){var s;const n={data:[],state:a.LoadingState.Done};if(null!==(s=e.data)&&void 0!==s&&s.results){const s=e.data.results,r=null!=t&&t.length?t.map((e=>e.refId)):Object.keys(s),c=[];for(const e of r){const t=s[e];t&&(t.refId=e,c.push(t))}for(const e of c){var i,o,l;if(e.error&&(n.error||(n.error={refId:e.refId,message:e.error},n.state=a.LoadingState.Error)),null!==(i=e.frames)&&void 0!==i&&i.length)for(const t of e.frames){const s=(0,a.dataFrameFromJSON)(t);s.refId||(s.refId=e.refId),n.data.push(s)}else{if(null!==(o=e.series)&&void 0!==o&&o.length)for(const t of e.series)t.refId||(t.refId=e.refId),n.data.push((0,a.toDataFrame)(t));if(null!==(l=e.tables)&&void 0!==l&&l.length)for(const t of e.tables)t.refId||(t.refId=e.refId),n.data.push((0,a.toDataFrame)(t))}}}return e.status&&200!==e.status&&(n.state!==a.LoadingState.Error&&(n.state=a.LoadingState.Error),n.error||(n.error=r(e))),n}function i(e){var t,s,a,i;const r=n(e);var o,l;if(null!==(t=r.error)&&void 0!==t&&null!==(s=t.data)&&void 0!==s&&s.message)return{status:"error",message:r.error.data.message,details:null!==(o=r.error)&&void 0!==o&&null!==(l=o.data)&&void 0!==l&&l.error?{message:r.error.data.error}:void 0};if(null!==(a=r.error)&&void 0!==a&&a.refId&&null!==(i=r.error)&&void 0!==i&&i.message)return{status:"error",message:r.error.message};throw e}function r(e){const t=e||{};if(!t.message){if("string"==typeof e||e instanceof String)return{message:e};let s="Query error";t.message?s=t.message:t.data&&t.data.message?s=t.data.message:t.data&&t.data.error?s=t.data.error:t.status&&(s=`Query error: ${t.status} ${t.statusText}`),t.message=s}return t}function o(e){if(!e||!e.length)return[];const t=[];let s=e.fields.find((e=>e.type===a.FieldType.string));if(s||(s=e.fields.find((e=>e.type!==a.FieldType.time))),s)for(let e=0;e<s.values.length;e++)t.push({text:""+s.values.get(e)});return t}},"./packages/grafana-schema/src/index.ts":(e,t,s)=>{"use strict";let a,n,i,r,o,l,c,d,u,p,h,g,m,f;s.d(t,{LB:()=>r,pu:()=>p,l8:()=>l,FI:()=>u,i3:()=>f,jK:()=>a,KC:()=>c,bQ:()=>g,wf:()=>d,wN:()=>h,o0:()=>m,h2:()=>i,f3:()=>n,Jp:()=>o}),function(e){e.Hidden="hidden",e.List="list",e.Table="table"}(a||(a={})),function(e){e.Single="single",e.Multi="multi",e.None="none"}(n||(n={})),function(e){e.Auto="auto",e.ColorText="color-text",e.ColorBackground="color-background",e.ColorBackgroundSolid="color-background-solid",e.GradientGauge="gradient-gauge",e.LcdGauge="lcd-gauge",e.JSONView="json-view",e.BasicGauge="basic",e.Image="image"}(i||(i={})),function(e){e.Auto="auto",e.Bottom="bottom",e.Hidden="hidden",e.Left="left",e.Right="right",e.Top="top"}(r||(r={})),function(e){e.Auto="auto",e.Always="always",e.Never="never"}(o||(o={})),function(e){e.Bars="bars",e.Line="line",e.Points="points"}(l||(l={})),function(e){e.Linear="linear",e.Smooth="smooth",e.StepAfter="stepAfter",e.StepBefore="stepBefore"}(c||(c={})),function(e){e.Linear="linear",e.Log="log",e.Ordinal="ordinal"}(d||(d={})),function(e){e.Hue="hue",e.None="none",e.Opacity="opacity",e.Scheme="scheme"}(u||(u={})),function(e){e[e.Before=-1]="Before",e[e.Center=0]="Center",e[e.After=1]="After"}(p||(p={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(h||(h={})),function(e){e[e.Up=1]="Up",e[e.Right=1]="Right",e[e.Down=-1]="Down",e[e.Left=-1]="Left"}(g||(g={})),function(e){e.None="none",e.Normal="normal",e.Percent="percent"}(m||(m={})),function(e){e.Off="off",e.Line="line",e.Area="area",e.LineAndArea="line+area",e.Series="series"}(f||(f={}))},"./packages/grafana-ui/src/components/Alert/Alert.tsx":(e,t,s)=>{"use strict";s.d(t,{b:()=>h});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-e2e-selectors/src/index.ts"),r=s("./packages/grafana-ui/src/themes/index.ts"),o=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),l=s("./packages/grafana-ui/src/components/IconButton/IconButton.tsx"),c=s("./packages/grafana-ui/src/components/Button/Button.tsx"),d=s("./node_modules/react/jsx-runtime.js");const u=["title","onRemove","children","buttonContent","elevated","bottomSpacing","className","severity"];function p(e){switch(e){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check";default:return""}}const h=a.forwardRef(((e,t)=>{let{title:s,onRemove:a,children:h,buttonContent:m,elevated:f,bottomSpacing:b,className:v,severity:x="error"}=e,y=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,u);const w=(0,r.l4)(),j=g(w,x,f,b);return(0,d.jsxs)("div",Object.assign({ref:t,className:(0,n.cx)(j.alert,v),"aria-label":i.wl.components.Alert.alert(x)},y,{children:[(0,d.jsx)("div",{className:j.icon,children:(0,d.jsx)(o.J,{size:"xl",name:p(x)})}),(0,d.jsxs)("div",{className:j.body,children:[(0,d.jsx)("div",{className:j.title,children:s}),h&&(0,d.jsx)("div",{className:j.content,children:h})]}),a&&!m&&(0,d.jsx)("div",{className:j.close,children:(0,d.jsx)(l.h,{name:"times",onClick:a,size:"lg",type:"button"})}),a&&m&&(0,d.jsx)("div",{className:j.buttonWrapper,children:(0,d.jsx)(c.zx,{variant:"secondary",onClick:a,type:"button",children:m})})]}))}));h.displayName="Alert";const g=(e,t,s,a)=>{const i=e.colors[t],r=e.shape.borderRadius();return{alert:n.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${r};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${e.colors.background.secondary};
      box-shadow: ${s?e.shadows.z3:e.shadows.z1};
      margin-bottom: ${e.spacing(null!=a?a:2)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${e.colors.background.primary};
        z-index: -1;
      }
    `,icon:n.css`
      padding: ${e.spacing(2,3)};
      background: ${i.main};
      border-radius: ${r} 0 0 ${r};
      color: ${i.contrastText};
      display: flex;
      align-items: center;
      justify-content: center;
    `,title:n.css`
      font-weight: ${e.typography.fontWeightMedium};
      color: ${e.colors.text.primary};
    `,body:n.css`
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:n.css`
      color: ${e.colors.text.secondary};
      padding-top: ${e.spacing(1)};
    `,buttonWrapper:n.css`
      padding: ${e.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
    `,close:n.css`
      padding: ${e.spacing(2,1)};
      background: none;
      display: flex;
    `}}},"./packages/grafana-ui/src/components/BigValue/BigValue.tsx":(e,t,s)=>{"use strict";s.d(t,{w6:()=>P,pc:()=>T,IG:()=>N,ap:()=>O,jG:()=>I});var a=s("./node_modules/react/index.js"),n=s("./node_modules/tinycolor2/tinycolor.js"),i=s.n(n),r=s("./packages/grafana-data/src/index.ts"),o=s("./packages/grafana-ui/src/utils/measureText.ts"),l=s("./packages/grafana-ui/src/utils/index.ts"),c=s("./packages/grafana-schema/src/index.ts"),d=s("./packages/grafana-ui/src/components/uPlot/config/UPlotConfigBuilder.ts"),u=s("./packages/grafana-ui/src/components/uPlot/Plot.tsx"),p=s("./packages/grafana-ui/src/components/uPlot/utils.ts");function h(e,t){var s;const a=e.y.values.length,n=Object.assign({},e.y.config,t);return{refId:"sparkline",fields:[null!==(s=e.x)&&void 0!==s?s:r.IndexVector.newField(a),Object.assign({},e.y,{config:n})],length:a}}var g=s("./node_modules/lodash/lodash.js"),m=s("./node_modules/react/jsx-runtime.js");const f={drawStyle:c.l8.Line,showPoints:c.Jp.Auto,axisPlacement:c.LB.Hidden};class b extends a.PureComponent{constructor(e){super(e);const t=h(e.sparkline,e.config);this.state={data:(0,p.k6)([t]),alignedDataFrame:t,configBuilder:this.prepareConfig(t)}}static getDerivedStateFromProps(e,t){const s=h(e.sparkline,e.config);return s?Object.assign({},t,{data:(0,p.k6)([s]),alignedDataFrame:s}):Object.assign({},t)}componentDidUpdate(e,t){const{alignedDataFrame:s}=this.state;if(!s)return;let a=!1;a=e.sparkline!==this.props.sparkline?!(0,r.compareDataFrameStructures)(this.state.alignedDataFrame,t.alignedDataFrame):!(0,g.isEqual)(e.config,this.props.config),a&&this.setState({configBuilder:this.prepareConfig(s)})}getYRange(e){var t,s,a;let{min:n,max:i}=null===(t=this.state.alignedDataFrame.fields[1].state)||void 0===t?void 0:t.range;return[Math.max(n,null!==(s=e.config.min)&&void 0!==s?s:-1/0),Math.min(i,null!==(a=e.config.max)&&void 0!==a?a:1/0)]}prepareConfig(e){const{theme:t}=this.props,s=new d.U;s.setCursor({show:!1,x:!1,y:!1});const a=e.fields[0];s.addScale({scaleKey:"x",orientation:c.wN.Horizontal,direction:c.bQ.Right,isTime:!1,range:()=>{const{sparkline:e}=this.props;if(e.x){if(e.timeRange&&e.x.type===r.FieldType.time)return[e.timeRange.from.valueOf(),e.timeRange.to.valueOf()];const t=e.x.values;return[t.get(0),t.get(t.length-1)]}return[0,e.y.values.length-1]}}),s.addAxis({scaleKey:"x",theme:t,placement:c.LB.Hidden});for(let o=0;o<e.fields.length;o++){var n,i;const l=e.fields[o],d=l.config,u=Object.assign({},f,d.custom);if(l===a||l.type!==r.FieldType.number)continue;const p=d.unit||"__fixed";s.addScale({scaleKey:p,orientation:c.wN.Vertical,direction:c.bQ.Up,range:()=>this.getYRange(l)}),s.addAxis({scaleKey:p,theme:t,placement:c.LB.Hidden});const h=(0,r.getFieldColorModeForField)(l).getCalculator(l,t)(0,0),g=u.drawStyle===c.l8.Points?c.Jp.Always:u.showPoints;s.addSeries({pxAlign:!1,scaleKey:p,theme:t,drawStyle:u.drawStyle,lineColor:null!==(n=u.lineColor)&&void 0!==n?n:h,lineWidth:u.lineWidth,lineInterpolation:u.lineInterpolation,showPoints:g,pointSize:u.pointSize,fillOpacity:u.fillOpacity,fillColor:null!==(i=u.fillColor)&&void 0!==i?i:h})}return s}render(){const{data:e,configBuilder:t}=this.state,{width:s,height:a,sparkline:n}=this.props;return(0,m.jsx)(u.N,{data:e,config:t,width:s,height:a,timeRange:n.timeRange})}}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x=1.2;class y{constructor(e){var t;v(this,"titleFontSize",void 0),v(this,"valueFontSize",void 0),v(this,"chartHeight",void 0),v(this,"chartWidth",void 0),v(this,"valueColor",void 0),v(this,"panelPadding",void 0),v(this,"justifyCenter",void 0),v(this,"titleToAlignTo",void 0),v(this,"valueToAlignTo",void 0),v(this,"maxTextWidth",void 0),v(this,"maxTextHeight",void 0),v(this,"textValues",void 0),this.props=e;const{width:s,height:a,value:n,text:i}=e;this.valueColor=null!==(t=n.color)&&void 0!==t?t:"gray",this.panelPadding=a>100?12:8,this.textValues=function(e){const{value:t,alignmentFactors:s,count:a}=e;let{textMode:n}=e;const i=s?s.title:t.title,o=(0,r.formattedValueToString)(s||t);n===I.Auto&&1===(null!=a?a:1)&&(n=I.Value);switch(n){case I.Name:return Object.assign({},t,{title:void 0,prefix:void 0,suffix:void 0,text:t.title||"",titleToAlignTo:void 0,valueToAlignTo:null!=i?i:"",tooltip:(0,r.formattedValueToString)(t)});case I.Value:return Object.assign({},t,{title:void 0,titleToAlignTo:void 0,valueToAlignTo:o,tooltip:t.title});case I.None:return{numeric:t.numeric,color:t.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${t.title}\nValue: ${(0,r.formattedValueToString)(t)}`};case I.ValueAndName:default:return Object.assign({},t,{titleToAlignTo:i,valueToAlignTo:o})}}(e),this.justifyCenter=function(e,t){if(e===O.Center)return!0;return 0===(null!=t?t:"").length}(e.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=14,this.valueFontSize=14,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=s-2*this.panelPadding,this.maxTextHeight=a-2*this.panelPadding,i&&(i.titleSize&&(this.titleFontSize=i.titleSize,this.titleToAlignTo=void 0),i.valueSize&&(this.valueFontSize=i.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const e={fontSize:`${this.titleFontSize}px`,lineHeight:x};return this.props.colorMode===T.Background&&(e.color=(0,l.Gc)(this.valueColor)),e}getValueStyles(){const e={fontSize:this.valueFontSize,fontWeight:500,lineHeight:x,position:"relative",zIndex:1};switch(this.justifyCenter&&(e.textAlign="center"),this.props.colorMode){case T.Value:e.color=this.valueColor;break;case T.Background:e.color=(0,l.Gc)(this.valueColor);break;case T.None:e.color=this.props.theme.colors.text.primary}return e}getValueAndTitleContainerStyles(){const e={display:"flex"};return this.justifyCenter&&(e.alignItems="center",e.justifyContent="center",e.flexGrow=1),e}getPanelStyles(){const{width:e,height:t,theme:s,colorMode:a}=this.props,n={width:`${e}px`,height:`${t}px`,padding:`${this.panelPadding}px`,borderRadius:"3px",position:"relative",display:"flex"},r=s.isDark?1:-.7;switch(a){case T.Background:const e=i()(this.valueColor).darken(15*r).spin(8).toRgbString(),t=i()(this.valueColor).darken(5*r).spin(-8).toRgbString();n.background=`linear-gradient(120deg, ${e}, ${t})`;break;case T.Value:n.background="transparent"}return this.justifyCenter&&(n.alignItems="center",n.flexDirection="row"),n}renderChart(){var e;const{sparkline:t,colorMode:s}=this.props;if(!t||(null===(e=t.y)||void 0===e?void 0:e.type)!==r.FieldType.number)return null;let a,n;switch(s){case T.Background:a="rgba(255,255,255,0.4)",n=i()(this.valueColor).brighten(40).toRgbString();break;case T.None:case T.Value:default:n=this.valueColor,a=i()(this.valueColor).setAlpha(.2).toRgbString()}const o={custom:{drawStyle:c.l8.Line,lineWidth:1,fillColor:a,lineColor:n}};return(0,m.jsx)("div",{style:this.getChartStyles(),children:(0,m.jsx)(b,{height:this.chartHeight,width:this.chartWidth,sparkline:t,config:o,theme:this.props.theme})})}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class w extends y{constructor(e){var t,s;super(e);const a=null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,o.MX)(this.valueToAlignTo,this.maxTextWidth*a,this.maxTextHeight,x)),null!==(s=this.titleToAlignTo)&&void 0!==s&&s.length&&(this.titleFontSize=(0,o.MX)(this.titleToAlignTo,.6*this.maxTextWidth,this.maxTextHeight,x,30),this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.alignItems="center",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}renderChart(){return null}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}class j extends y{constructor(e){var t;super(e);const{width:s,height:a}=e;this.chartWidth=s,this.chartHeight=.5*a,null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,o.MX)(this.titleToAlignTo,.6*this.maxTextWidth,.4*this.maxTextHeight,x,30)),this.valueToAlignTo.length&&(this.valueFontSize=(0,o.MX)(this.valueToAlignTo,.4*this.maxTextWidth,.5*this.maxTextHeight,x))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="row",e.justifyContent="space-between",e}}class k extends y{constructor(e){var t,s;super(e);const{width:a,height:n}=e;let i=0;this.chartHeight=.25*n,this.chartWidth=a,null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,o.MX)(this.titleToAlignTo,this.maxTextWidth,.15*n,x,30)),i=this.titleFontSize*x,this.valueToAlignTo.length&&(this.valueFontSize=(0,o.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-i,x)),null!==(s=this.titleToAlignTo)&&void 0!==s&&s.length&&(this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize)),this.chartHeight=n-this.titleFontSize*x-this.valueFontSize*x}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.justifyContent="center",e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="column",e}}class S extends y{constructor(e){var t;super(e);const{height:s}=e;let a=0;null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,o.MX)(this.titleToAlignTo,this.maxTextWidth,.15*s,x,30),a=this.titleFontSize*x),this.valueToAlignTo.length&&(this.valueFontSize=(0,o.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-a,x)),this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize)}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.flexGrow=1,e}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}var C=s("./packages/grafana-ui/src/components/FormattedValueDisplay/FormattedValueDisplay.tsx");let T,N,O,I;!function(e){e.Value="value",e.Background="background",e.None="none"}(T||(T={})),function(e){e.None="none",e.Line="line",e.Area="area"}(N||(N={})),function(e){e.Auto="auto",e.Center="center"}(O||(O={})),function(e){e.Auto="auto",e.Value="value",e.ValueAndName="value_and_name",e.Name="name",e.None="none"}(I||(I={}));class P extends a.PureComponent{render(){const{onClick:e,className:t,hasLinks:s}=this.props,a=function(e){const{width:t,height:s,sparkline:a}=e;return t/s>2.5?s>50&&a?new j(e):new w(e):s>100&&a?new k(e):new S(e)}(this.props),n=a.getPanelStyles(),i=a.getValueAndTitleContainerStyles(),r=a.getValueStyles(),o=a.getTitleStyles(),l=a.textValues,c=s?void 0:l.tooltip;return(0,m.jsxs)("div",{className:t,style:n,onClick:e,title:c,children:[(0,m.jsxs)("div",{style:i,children:[l.title&&(0,m.jsx)("div",{style:o,children:l.title}),(0,m.jsx)(C.W,{value:l,style:r})]}),a.renderChart()]})}}var M,F,A;M=P,F="defaultProps",A={justifyMode:O.Auto},F in M?Object.defineProperty(M,F,{value:A,enumerable:!0,configurable:!0,writable:!0}):M[F]=A},"./packages/grafana-ui/src/components/Button/Button.tsx":(e,t,s)=>{"use strict";s.d(t,{zx:()=>g,Qj:()=>m,fW:()=>f,c9:()=>v});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/themes/index.ts"),r=s("./packages/grafana-ui/src/components/Forms/commonStyles.ts"),o=s("./packages/grafana-data/src/index.ts"),l=s("./packages/grafana-ui/src/themes/mixins.ts"),c=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),d=s("./node_modules/react/jsx-runtime.js");const u=["variant","size","fill","icon","fullWidth","children","className"],p=["variant","size","fill","icon","fullWidth","children","className","onBlur","onFocus","disabled"];function h(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}const g=a.forwardRef(((e,t)=>{let{variant:s="primary",size:a="md",fill:r="solid",icon:o,fullWidth:l,children:p,className:m}=e,b=h(e,u);const v=(0,i.l4)(),y=f({theme:v,size:a,variant:s,fill:r,fullWidth:l,iconOnly:!p});return x("link"===s,`${g.displayName}: Prop variant="link" is deprecated. Please use fill="text".`),(0,d.jsxs)("button",Object.assign({className:(0,n.cx)(y.button,m)},b,{ref:t,children:[o&&(0,d.jsx)(c.J,{name:o,size:a,className:y.icon}),p&&(0,d.jsx)("span",{className:y.content,children:p})]}))}));g.displayName="Button";const m=a.forwardRef(((e,t)=>{let{variant:s="primary",size:a="md",fill:r="solid",icon:o,fullWidth:l,children:u,className:g,disabled:b}=e,v=h(e,p);const y=(0,i.l4)(),w=f({theme:y,fullWidth:l,size:a,variant:s,fill:r,iconOnly:!u}),j=(0,n.cx)(w.button,{[w.disabled]:b},g);return x("link"===s,`${m.displayName}: Prop variant="link" is deprecated. Please use fill="text".`),(0,d.jsxs)("a",Object.assign({className:j},v,{tabIndex:b?-1:0,ref:t,children:[o&&(0,d.jsx)(c.J,{name:o,size:a,className:w.icon}),u&&(0,d.jsx)("span",{className:w.content,children:u})]}))}));m.displayName="LinkButton";const f=e=>{const{theme:t,variant:s,fill:a="solid",size:i,iconOnly:o,fullWidth:c}=e,{height:d,padding:u,fontSize:p}=(0,r.iL)(i,t),h=v(t,s,a),g=function(e,t,s){const a={cursor:"not-allowed",boxShadow:"none",pointerEvents:"none",color:e.colors.text.disabled,transition:"none"};if("text"===s||"link"===t)return Object.assign({},a,{background:"transparent",border:"1px solid transparent"});if("outline"===s)return Object.assign({},a,{background:"transparent",border:`1px solid ${e.colors.action.disabledText}`});return Object.assign({},a,{background:e.colors.action.disabledBackground,border:"1px solid transparent"})}(t,s,a),m=(0,l.getFocusStyles)(t);return{button:(0,n.css)(Object.assign({label:"button",display:"inline-flex",alignItems:"center",fontSize:p,fontWeight:t.typography.fontWeightMedium,fontFamily:t.typography.fontFamily,padding:t.spacing(0,u),height:t.spacing(d),lineHeight:t.spacing.gridSize*d-2+"px",verticalAlign:"middle",cursor:"pointer",borderRadius:t.shape.borderRadius(1),"&:focus":m,"&:focus-visible":m,"&:focus:not(:focus-visible)":(0,l.getMouseFocusStyles)(t)},c&&{flexGrow:1,justifyContent:"center"},h,{":disabled":g,"&[disabled]":g})),disabled:(0,n.css)(g),img:n.css`
      width: 16px;
      height: 16px;
      margin: ${t.spacing(0,1,0,.5)};
    `,icon:n.css`
      margin-right: ${t.spacing((o?-u:u)/2)};
      margin-left: ${t.spacing(-u/2)};
    `,content:n.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function b(e,t,s){return"outline"===s?{background:"transparent",color:t.text,border:`1px solid ${t.border}`,transition:e.transitions.create(["background-color","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{background:o.colorManipulator.alpha(t.main,e.colors.action.hoverOpacity),borderColor:e.colors.emphasize(t.border,.25),color:t.text}}:"text"===s?{background:"transparent",color:t.text,border:"1px solid transparent",transition:e.transitions.create(["background-color","color"],{duration:e.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:o.colorManipulator.alpha(t.shade,e.colors.action.hoverOpacity),textDecoration:"none"}}:{background:t.main,color:t.contrastText,border:"1px solid transparent",transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{background:t.shade,color:t.contrastText,boxShadow:e.shadows.z1}}}function v(e,t,s){const a="link"===t?"text":s;switch("link"===t?"primary":t){case"secondary":return b(e,e.colors.secondary,a);case"destructive":return b(e,e.colors.error,a);case"primary":default:return b(e,e.colors.primary,a)}}function x(e,t){0}},"./packages/grafana-ui/src/components/Button/FullWidthButtonContainer.tsx":(e,t,s)=>{"use strict";s.d(t,{f:()=>r});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/themes/index.ts"),i=s("./node_modules/react/jsx-runtime.js");const r=({className:e,children:t})=>{const s=o();return(0,i.jsx)("div",{className:(0,a.cx)(s,e),children:t})},o=(0,n.Bb)((()=>a.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `))},"./packages/grafana-ui/src/components/Button/index.ts":(e,t,s)=>{"use strict";s.d(t,{zx:()=>a.zx,hE:()=>c,Qj:()=>a.Qj,hA:()=>x,RN:()=>S,fW:()=>a.fW});var a=s("./packages/grafana-ui/src/components/Button/Button.tsx"),n=s("./node_modules/react/index.js"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./packages/grafana-ui/src/themes/index.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=["className","children"];const c=(0,n.forwardRef)(((e,t)=>{let{className:s,children:a}=e,n=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,l);const c=(0,r.wW)(d);return(0,o.jsx)("div",Object.assign({ref:t,className:(0,i.cx)("button-group",c.wrapper,s)},n,{children:a}))}));c.displayName="ButtonGroup";const d=e=>({wrapper:i.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `});var u,p,h=s("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),g=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),m=s("./node_modules/lodash/lodash.js"),f=s("./packages/grafana-e2e-selectors/src/index.ts"),b=s("./packages/grafana-ui/src/themes/mixins.ts");const v=["tooltip","icon","className","children","imgSrc","fullWidth","isOpen","narrow","variant","iconOnly","aria-label"];const x=(0,n.forwardRef)(((e,t)=>{let{tooltip:s,icon:a,className:n,children:l,imgSrc:c,fullWidth:d,isOpen:m,narrow:f,variant:b="default",iconOnly:x,"aria-label":k}=e,S=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,v);const C=(0,r.wW)(j),T=(0,i.cx)("toolbar-button",{[C.button]:!0,[C.buttonFullWidth]:d,[C.narrow]:f},C[b],n),N=(0,i.cx)({[C.content]:!0,[C.contentWithIcon]:!!a,[C.contentWithRightIcon]:void 0!==m}),O=(0,o.jsxs)("button",Object.assign({ref:t,className:T,"aria-label":y(k,s),"aria-expanded":m},S,{children:[w(a),c&&(0,o.jsx)("img",{className:C.img,src:c}),l&&!x&&(0,o.jsx)("div",{className:N,children:l}),!1===m&&(u||(u=(0,o.jsx)(g.J,{name:"angle-down"}))),!0===m&&(p||(p=(0,o.jsx)(g.J,{name:"angle-up"})))]}));return s?(0,o.jsx)(h.u,{content:s,placement:"bottom",children:O}):O}));function y(e,t){return e||(t?f.wl.components.PageToolbar.item(t):void 0)}function w(e){return e?(0,m.isString)(e)?(0,o.jsx)(g.J,{name:e,size:"lg"}):e:null}const j=e=>{const t=(0,a.c9)(e,"primary","solid"),s=(0,a.c9)(e,"destructive","solid");return{button:i.css`
      label: toolbar-button;
      display: flex;
      align-items: center;
      height: ${e.spacing(e.components.height.md)};
      padding: ${e.spacing(0,1)};
      border-radius: ${e.shape.borderRadius()};
      line-height: ${e.components.height.md*e.spacing.gridSize-2}px;
      font-weight: ${e.typography.fontWeightMedium};
      border: 1px solid ${e.colors.border.weak};
      white-space: nowrap;
      transition: ${e.transitions.create(["background","box-shadow","border-color","color"],{duration:e.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,b.getFocusStyles)(e)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,b.getMouseFocusStyles)(e)}
      }

      &:hover {
        box-shadow: ${e.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${e.colors.action.disabledOpacity};
        background: ${e.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${e.colors.text.disabled};
          background: ${e.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:i.css`
      color: ${e.colors.text.secondary};
      background-color: ${e.colors.background.primary};

      &:hover {
        color: ${e.colors.text.primary};
        background: ${e.colors.background.secondary};
      }
    `,active:i.css`
      color: ${e.v1.palette.orangeDark};
      border-color: ${e.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${e.colors.text.primary};
        background: ${e.colors.emphasize(e.colors.background.canvas,.03)};
      }
    `,primary:(0,i.css)(t),destructive:(0,i.css)(s),narrow:i.css`
      padding: 0 ${e.spacing(.5)};
    `,img:i.css`
      width: 16px;
      height: 16px;
      margin-right: ${e.spacing(1)};
    `,buttonFullWidth:i.css`
      flex-grow: 1;
    `,content:i.css`
      flex-grow: 1;
    `,contentWithIcon:i.css`
      display: none;
      padding-left: ${e.spacing(1)};

      @media ${r.GU.mediaUp(e.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:i.css`
      padding-right: ${e.spacing(.5)};
    `}},k=["className","children"];const S=(0,n.forwardRef)(((e,t)=>{let{className:s,children:a}=e,n=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,k);const l=(0,r.wW)(C);return(0,o.jsx)("div",Object.assign({ref:t,className:(0,i.cx)(l.wrapper,s)},n,{children:a}))}));S.displayName="ToolbarButtonRow";const C=e=>({wrapper:i.css`
    display: flex;

    > .button-group,
    > .toolbar-button {
      margin-left: ${e.spacing(1)};

      &:first-child {
        margin-left: 0;
      }
    }
  `})},"./packages/grafana-ui/src/components/Cascader/Cascader.tsx":(e,t,s)=>{"use strict";s.d(t,{v:()=>m});var a,n=s("./node_modules/react/index.js"),i=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),r=s("./node_modules/rc-cascader/es/index.js"),o=s("./packages/grafana-ui/src/components/Select/Select.tsx"),l=s("./packages/grafana-ui/src/components/Input/Input.tsx"),c=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),d=s("./packages/grafana-ui/src/components/Cascader/optionMappings.ts"),u=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),p=s("./node_modules/react/jsx-runtime.js");function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const g=(0,c.css)("\n&:focus{\n  outline: none;\n}\n");class m extends n.PureComponent{constructor(e){super(e),h(this,"flattenOptions",((e,t=[])=>{let s=[];for(const a of e){const e=[...t];e.push(a),a.items?s=[...s,...this.flattenOptions(a.items,e)]:s.push({singleLabel:e[e.length-1].label,label:e.map((e=>e.label)).join(this.props.separator||" / "),value:e.map((e=>e.value))})}return s})),h(this,"getSearchableOptions",(0,u.default)((e=>this.flattenOptions(e)))),h(this,"onChange",((e,t)=>{this.setState({rcValue:e,focusCascade:!0,activeLabel:this.props.displayAllSelectedLevels?t.map((e=>e.label)).join(this.props.separator||"/"):t[t.length-1].label}),this.props.onSelect(t[t.length-1].value)})),h(this,"onSelect",(e=>{const t=e.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?e.label:e.singleLabel||"",rcValue:t,isSearching:!1}),this.props.onSelect(t[t.length-1])})),h(this,"onCreateOption",(e=>{this.setState({activeLabel:e,rcValue:[],isSearching:!1}),this.props.onSelect(e)})),h(this,"onBlur",(()=>{this.setState({isSearching:!1,focusCascade:!1}),""===this.state.activeLabel&&this.setState({rcValue:[]})})),h(this,"onBlurCascade",(()=>{this.setState({focusCascade:!1})})),h(this,"onInputKeyDown",(e=>{"ArrowDown"!==e.key&&"ArrowUp"!==e.key&&"Enter"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&this.setState({focusCascade:!1,isSearching:!0})}));const t=this.getSearchableOptions(e.options),{rcValue:s,activeLabel:a}=this.setInitialValue(t,e.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:s,activeLabel:a}}setInitialValue(e,t){if(!t)return{rcValue:[],activeLabel:""};for(const s of e){const e=s.value||[];if(e.indexOf(t)===e.length-1)return{rcValue:e,activeLabel:this.props.displayAllSelectedLevels?s.label:s.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:t}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:e,placeholder:t,width:s,changeOnSelect:n,options:u}=this.props,{focusCascade:h,isSearching:m,rcValue:f,activeLabel:b}=this.state,v=this.getSearchableOptions(u);return(0,p.jsx)("div",{children:m?(0,p.jsx)(o.Ph,{menuShouldPortal:!0,allowCustomValue:e,placeholder:t,autoFocus:!h,onChange:this.onSelect,onBlur:this.onBlur,options:v,onCreateOption:this.onCreateOption,formatCreateLabel:this.props.formatCreateLabel,width:s}):(0,p.jsx)(r.Z,{onChange:(0,d.K)(this.onChange),options:this.props.options,changeOnSelect:n,value:f.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,popupClassName:c.css`
              z-index: 9999;
            `,children:(0,p.jsx)("div",{className:g,children:(0,p.jsx)(l.I,{width:s,placeholder:t,onBlur:this.onBlurCascade,value:b,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:h?a||(a=(0,p.jsx)(i.J,{name:"angle-up"})):(0,p.jsx)(i.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})})})})})}}h(m,"defaultProps",{changeOnSelect:!0})},"./packages/grafana-ui/src/components/Cascader/optionMappings.ts":(e,t,s)=>{"use strict";s.d(t,{K:()=>a,p:()=>n});const a=e=>(t,s)=>{e&&e(t.map((e=>String(e))),i(s))},n=e=>t=>{e&&e(i(t))},i=e=>e.map(r),r=e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:"",label:e.label}}},"./packages/grafana-ui/src/components/ClickOutsideWrapper/ClickOutsideWrapper.tsx":(e,t,s)=>{"use strict";s.d(t,{L:()=>r});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react/jsx-runtime.js");function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r extends a.PureComponent{constructor(...e){super(...e),i(this,"myRef",(0,a.createRef)()),i(this,"state",{hasEventListener:!1}),i(this,"onOutsideClick",(e=>{const t=this.myRef.current;t&&t.contains(e.target)||this.props.onClick()}))}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return(0,n.jsx)("div",{ref:this.myRef,children:this.props.children})}}i(r,"defaultProps",{includeButtonPress:!0,parent:window,useCapture:!1})},"./packages/grafana-ui/src/components/ColorPicker/ColorPicker.tsx":(e,t,s)=>{"use strict";s.d(t,{zH:()=>g,sp:()=>m});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/Tooltip/PopoverController.tsx"),i=s("./packages/grafana-ui/src/components/Tooltip/Popover.tsx"),r=s("./packages/grafana-ui/src/components/ColorPicker/ColorPickerPopover.tsx"),o=s("./packages/grafana-ui/src/components/ColorPicker/SeriesColorPickerPopover.tsx"),l=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),c=s("./packages/grafana-ui/src/themes/index.ts"),d=s("./packages/grafana-ui/src/components/ColorPicker/ColorSwatch.tsx"),u=s("./node_modules/react/jsx-runtime.js");function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h=(e,t="ColorPicker")=>{var s,r;return r=s=class extends a.Component{constructor(...e){super(...e),p(this,"pickerTriggerRef",(0,a.createRef)()),p(this,"onColorChange",(e=>{const{onColorChange:t,onChange:s}=this.props;return(t||s)(e)}))}render(){const{theme:t,children:s}=this.props,r=f(t),o=a.createElement(e,Object.assign({},Object.assign({},this.props,{children:null}),{onChange:this.onColorChange}));return(0,u.jsx)(n.D,{content:o,hideAfter:300,children:(e,a,n)=>(0,u.jsxs)(u.Fragment,{children:[this.pickerTriggerRef.current&&(0,u.jsx)(i.J,Object.assign({},n,{referenceElement:this.pickerTriggerRef.current,wrapperClassName:r.colorPicker,onMouseLeave:a,onMouseEnter:e})),s?s({ref:this.pickerTriggerRef,showColorPicker:e,hideColorPicker:a}):(0,u.jsx)(d.b,{ref:this.pickerTriggerRef,onClick:e,onMouseLeave:a,color:t.visualization.getColorByName(this.props.color||"#000000")})]})})}},p(s,"displayName",t),r},g=(0,c.HE)(h(r.h,"ColorPicker")),m=(0,c.HE)(h(o.jx,"SeriesColorPicker")),f=(0,c.Bb)((e=>({colorPicker:l.css`
      position: absolute;
      z-index: ${e.zIndex.tooltip};
      color: ${e.colors.text.primary};
      max-width: 400px;
      font-size: ${e.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `})))},"./packages/grafana-ui/src/components/ColorPicker/ColorPickerPopover.tsx":(e,t,s)=>{"use strict";s.d(t,{h:()=>P});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/ColorPicker/ColorSwatch.tsx"),i=s("./node_modules/lodash/lodash.js"),r=s("./node_modules/react/jsx-runtime.js");const o=["hue","selectedColor","onColorSelect"];const l=e=>{let{hue:t,selectedColor:s,onColorSelect:a}=e,l=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,o);const c=t.shades.find((e=>e.primary));return(0,r.jsxs)("div",Object.assign({},l,{style:{display:"flex",flexDirection:"column"},children:[c&&(0,r.jsx)(n.b,{isSelected:c.name===s,variant:n.$.Large,color:c.color,label:(0,i.upperFirst)(t.name),onClick:()=>a(c.name)},c.name),(0,r.jsx)("div",{style:{display:"flex",marginTop:"8px"},children:t.shades.map((e=>!e.primary&&(0,r.jsx)("div",{style:{marginRight:"4px"},children:(0,r.jsx)(n.b,{isSelected:e.name===s,color:e.color,onClick:()=>a(e.name)},e.name)},e.name)))})]}))};var c,d=s("./packages/grafana-ui/src/components/Layout/Layout.tsx"),u=s("./packages/grafana-ui/src/themes/ThemeContext.tsx");const p=({color:e,onChange:t})=>{const s=(0,u.l4)(),a=[];for(const n of s.visualization.hues)a.push((0,r.jsx)(l,{selectedColor:e,hue:n,onColorSelect:t},n.name));return(0,r.jsx)(d.wc,{spacing:"md",children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridRowGap:s.spacing(2),gridColumnGap:s.spacing(2),flexGrow:1},children:[a,c||(c=(0,r.jsx)("div",{})),(0,r.jsx)(n.b,{isSelected:"transparent"===e,color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>t("transparent")}),(0,r.jsx)(n.b,{isSelected:"text"===e,color:s.colors.text.primary,label:"Text color",onClick:()=>t("text")})]})})};var h=s("./packages/grafana-ui/node_modules/react-colorful/dist/index.module.js"),g=s("./node_modules/tinycolor2/tinycolor.js"),m=s.n(g),f=s("./packages/grafana-ui/src/components/Input/Input.tsx"),b=s("./packages/grafana-ui/src/themes/index.ts"),v=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class y extends a.PureComponent{constructor(e){super(e),x(this,"updateColor",(e=>{this.props.onChange(e)})),x(this,"onChange",(e=>{const t=m()(e.currentTarget.value);this.setState({value:e.currentTarget.value}),t.isValid()&&this.updateColor(t.toString())})),x(this,"onBlur",(()=>{m()(this.state.value).isValid()||this.setState({value:this.props.color})})),this.state={previousColor:e.color,value:e.color},this.updateColor=(0,i.debounce)(this.updateColor,100)}static getDerivedStateFromProps(e,t){const s=m()(e.color);return s.isValid()&&e.color!==t.previousColor?Object.assign({},t,{previousColor:e.color,value:s.toString()}):t}render(){const{value:e}=this.state;return(0,r.jsx)(f.I,{className:this.props.className,value:e,onChange:this.onChange,onBlur:this.onBlur,addonBefore:(0,r.jsx)(j,{color:this.props.color})})}}const w=y,j=({color:e})=>{const t=(0,b.wW)(k);return(0,r.jsx)("div",{className:(0,v.cx)(t,v.css`
          background-color: ${e};
        `)})},k=e=>v.css`
  height: 100%;
  width: ${4*e.spacing.gridSize}px;
  border-radius: ${e.shape.borderRadius()} 0 0 ${e.shape.borderRadius()};
  border: 1px solid ${e.colors.border.medium};
`;var S=s("./packages/grafana-data/src/index.ts"),C=s("./node_modules/react-use/esm/useThrottleFn.js");const T=e=>({wrapper:v.css`
    flex-grow: 1;
  `,root:v.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${e.v1.border.radius.sm} ${e.v1.border.radius.sm} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${e.v1.border.radius.sm} ${e.v1.border.radius.sm};
      }
      &__alpha,
      &__hue {
        height: ${e.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${e.spacing(2)};
        width: ${e.spacing(2)};
      }
    }
  `,colorInput:v.css`
    margin-top: ${e.spacing(2)};
  `}),N=({color:e,onChange:t})=>{const[s,n]=(0,a.useState)(e);(0,C.Z)((e=>{t(S.colorManipulator.asHexString(i.visualization.getColorByName(e)))}),500,[s]);const i=(0,b.l4)(),o=(0,b.wW)(T),l=(0,a.useMemo)((()=>s.startsWith("rgba")?s:m()(i.visualization.getColorByName(e)).toRgbString()),[s,i,e]);return(0,r.jsxs)("div",{className:o.wrapper,children:[(0,r.jsx)(h.ef,{className:(0,v.cx)(o.root),color:l,onChange:n}),(0,r.jsx)(w,{theme:i,color:l,onChange:n,className:o.colorInput})]})};function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class I extends a.Component{constructor(e){super(e),O(this,"getTabClassName",(e=>{const{activePicker:t}=this.state;return`ColorPickerPopover__tab ${t===e&&"ColorPickerPopover__tab--active"}`})),O(this,"handleChange",(e=>{const{onColorChange:t,onChange:s,enableNamedColors:a,theme:n}=this.props,i=t||s;if(a)return i(e);i(S.colorManipulator.asHexString(n.visualization.getColorByName(e)))})),O(this,"onTabChange",(e=>()=>this.setState({activePicker:e}))),O(this,"renderPicker",(()=>{const{activePicker:e}=this.state,{color:t}=this.props;switch(e){case"spectrum":return(0,r.jsx)(N,{color:t,onChange:this.handleChange});case"palette":return(0,r.jsx)(p,{color:t,onChange:this.handleChange});default:return this.renderCustomPicker(e)}})),O(this,"renderCustomPicker",(e=>{const{customPickers:t,color:s,theme:n}=this.props;return t?a.createElement(t[e].tabComponent,{color:s,theme:n,onChange:this.handleChange}):null})),O(this,"renderCustomPickerTabs",(()=>{const{customPickers:e}=this.props;return e?(0,r.jsx)(r.Fragment,{children:Object.keys(e).map((t=>(0,r.jsx)("div",{className:this.getTabClassName(t),onClick:this.onTabChange(t),children:e[t].name},t)))}):null})),this.state={activePicker:"palette"},((e,t)=>{const{onColorChange:s}=t;s&&(0,S.deprecationWarning)(e,"onColorChange","onChange")})("ColorPickerPopover",e)}render(){const{theme:e}=this.props,t=M(e);return(0,r.jsxs)("div",{className:t.colorPickerPopover,children:[(0,r.jsxs)("div",{className:t.colorPickerPopoverTabs,children:[(0,r.jsx)("div",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),children:"Colors"}),(0,r.jsx)("div",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),children:"Custom"}),this.renderCustomPickerTabs()]}),(0,r.jsx)("div",{className:t.colorPickerPopoverContent,children:this.renderPicker()})]})}}const P=(0,b.HE)(I);P.displayName="ColorPickerPopover";const M=(0,b.Bb)((e=>({colorPickerPopover:v.css`
      border-radius: ${e.shape.borderRadius()};
      box-shadow: ${e.shadows.z3};
      background: ${e.colors.background.primary};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${e.spacing(1,0)};
        background: ${e.colors.background.secondary};
        color: ${e.colors.text.secondary};
        cursor: pointer;
      }

      .ColorPickerPopover__tab--active {
        color: ${e.colors.text.primary};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.background.primary};
      }
    `,colorPickerPopoverContent:v.css`
      width: 336px;
      font-size: ${e.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${e.spacing(2)};
      display: flex;
      align-items: center;
      justify-content: center;
    `,colorPickerPopoverTabs:v.css`
      display: flex;
      width: 100%;
      border-radius: ${e.shape.borderRadius()} ${e.shape.borderRadius()} 0 0;
      overflow: hidden;
    `})))},"./packages/grafana-ui/src/components/ColorPicker/ColorSwatch.tsx":(e,t,s)=>{"use strict";s.d(t,{$:()=>c,b:()=>d});var a=s("./node_modules/react/index.js"),n=s("./node_modules/tinycolor2/tinycolor.js"),i=s.n(n),r=s("./packages/grafana-ui/src/themes/ThemeContext.tsx"),o=s("./node_modules/react/jsx-runtime.js");const l=["color","label","variant","isSelected"];let c;!function(e){e.Small="small",e.Large="large"}(c||(c={}));const d=a.forwardRef(((e,t)=>{let{color:s,label:a,variant:n=c.Small,isSelected:d}=e,u=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,l);const p=(0,r.l4)(),h=i()(s),g=!!a,m=n===c.Small?"16px":"32px",f={width:m,height:m,borderRadius:"50%",background:`${s}`,marginRight:g?"8px":"0px",boxShadow:d?`inset 0 0 0 2px ${s}, inset 0 0 0 4px ${p.colors.getContrastText(s)}`:"none"};return h.getAlpha()<.1&&(f.border=`2px solid ${p.colors.border.medium}`),(0,o.jsxs)("div",Object.assign({ref:t,style:{display:"flex",alignItems:"center",cursor:"pointer"}},u,{children:[(0,o.jsx)("div",{style:f}),g&&(0,o.jsx)("span",{children:a})]}))}));d.displayName="ColorSwatch"},"./packages/grafana-ui/src/components/ColorPicker/SeriesColorPickerPopover.tsx":(e,t,s)=>{"use strict";s.d(t,{jx:()=>d,qR:()=>u});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/ColorPicker/ColorPickerPopover.tsx"),i=s("./packages/grafana-ui/src/components/Forms/Legacy/Switch/Switch.tsx"),r=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),o=s("./packages/grafana-ui/src/themes/index.ts"),l=(s("./packages/grafana-ui/src/components/Button/index.ts"),s("./node_modules/react/jsx-runtime.js"));const c=["yaxis","onToggleAxis","color"];const d=e=>{const t=(0,o.yK)(p),{yaxis:s,onToggleAxis:a,color:r}=e,d=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,c),u=a?{yaxis:{name:"Y-Axis",tabComponent:()=>(0,l.jsx)(i.r,{label:"Use right y-axis",className:t.colorPickerAxisSwitch,labelClass:t.colorPickerAxisSwitchLabel,checked:2===s,onChange:()=>{a&&a()}},"yaxisSwitch")}}:void 0;return(0,l.jsx)(n.h,Object.assign({},d,{color:r||"#000000",customPickers:u}))};a.PureComponent;const u=(0,o.HE)(d),p=()=>({colorPickerAxisSwitch:r.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:r.css`
      display: flex;
      flex-grow: 1;
    `})},"./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx":(e,t,s)=>{"use strict";s.d(t,{$:()=>u,Z:()=>p});var a=s("./node_modules/react/index.js"),n=s("./node_modules/lodash/lodash.js"),i=s("./node_modules/classnames/index.js"),r=s.n(i),o=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),l=s("./node_modules/react-custom-scrollbars-2/lib/index.js"),c=s("./packages/grafana-ui/src/themes/index.ts"),d=s("./node_modules/react/jsx-runtime.js");const u=({autoHide:e=!1,autoHideTimeout:t=200,setScrollTop:s,className:i,autoHeightMin:o="0",autoHeightMax:u="100%",hideTracksWhenNotNeeded:p=!1,hideHorizontalTrack:g,hideVerticalTrack:m,updateAfterMountMs:f,scrollTop:b,children:v})=>{const x=(0,a.useRef)(null),y=(0,c.wW)(h);function w(e,t,s){return s.style&&t&&(s.style.display="none"),(0,d.jsx)("div",Object.assign({},s,{className:e}))}(0,a.useEffect)((()=>{x.current&&!(0,n.isNil)(b)&&x.current.scrollTop(b)})),(0,a.useEffect)((()=>{f&&setTimeout((()=>{const e=x.current;null!=e&&e.update&&e.update()}),f)}),[f]);const j=(0,a.useCallback)((e=>w("track-horizontal",g,e)),[g]),k=(0,a.useCallback)((e=>w("track-vertical",m,e)),[m]),S=(0,a.useCallback)((e=>(0,d.jsx)("div",Object.assign({},e,{className:"thumb-horizontal"}))),[]),C=(0,a.useCallback)((e=>(0,d.jsx)("div",Object.assign({},e,{className:"thumb-vertical"}))),[]),T=(0,a.useCallback)((e=>(0,d.jsx)("div",Object.assign({},e,{className:"scrollbar-view"}))),[]),N=(0,a.useCallback)((()=>{x.current&&s&&s(x.current.getValues())}),[s]);return(0,d.jsx)(l.ZP,{ref:x,className:r()(y.customScrollbar,i),onScrollStop:N,autoHeight:!0,autoHide:e,autoHideTimeout:t,hideTracksWhenNotNeeded:p,autoHeightMax:u,autoHeightMin:o,renderTrackHorizontal:j,renderTrackVertical:k,renderThumbHorizontal:S,renderThumbVertical:C,renderView:T,children:v})},p=u,h=e=>({customScrollbar:o.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${e.shape.borderRadius(2)};
        width: ${e.spacing(1)} !important;
        right: 0px;
        bottom: ${e.spacing(.25)};
        top: ${e.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${e.shape.borderRadius(2)};
        height: ${e.spacing(1)} !important;
        right: ${e.spacing(.25)};
        bottom: ${e.spacing(.25)};
        left: ${e.spacing(.25)};
      }
      .thumb-vertical {
        background: ${e.colors.action.focus};
        border-radius: ${e.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${e.colors.action.focus};
        border-radius: ${e.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `})},"./packages/grafana-ui/src/components/DataLinks/DataLinkInput.tsx":(e,t,s)=>{"use strict";s.d(t,{v:()=>I});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-use/lib/usePrevious.js"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./node_modules/lodash/lodash.js"),o=s("./node_modules/react-use/lib/useClickAway.js"),l=s("./packages/grafana-ui/src/components/index.ts"),c=s("./packages/grafana-ui/src/themes/index.ts"),d=s("./node_modules/react/jsx-runtime.js");const u=["suggestions"];const p=e=>({list:i.css`
      border-bottom: 1px solid ${e.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:i.css`
      background: ${e.colors.background.primary};
      width: 250px;
    `,item:i.css`
      background: none;
      padding: 2px 8px;
      color: ${e.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${e.colors.action.hover};
      }
    `,label:i.css`
      color: ${e.colors.text.secondary};
    `,activeItem:i.css`
      background: ${e.colors.background.secondary};
      &:hover {
        background: ${e.colors.background.secondary};
      }
    `,itemValue:i.css`
      font-family: ${e.typography.fontFamilyMonospace};
      font-size: ${e.typography.size.sm};
    `}),h=e=>{let{suggestions:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,u);const n=(0,a.useRef)(null);(0,o.Z)(n,(()=>{s.onClose&&s.onClose()}));const i=(0,a.useMemo)((()=>(0,r.groupBy)(t,(e=>e.origin))),[t]),l=(0,c.wW)(p);return(0,d.jsx)("div",{ref:n,className:l.wrapper,children:Object.keys(i).map(((e,t)=>{const n=0===t?0:Object.keys(i).reduce(((e,s,a)=>a>=t?e:e+i[s].length),0);return(0,a.createElement)(g,Object.assign({},s,{suggestions:i[e],label:`${(0,r.capitalize)(e)}`,activeIndex:s.activeIndex,activeIndexOffset:n,key:e}))}))})};h.displayName="DataLinkSuggestions";const g=a.memo((({activeIndex:e,activeIndexOffset:t,label:s,onClose:a,onSuggestionSelect:n,suggestions:r,activeRef:o})=>{const u=(0,c.wW)(p);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(l.aVo,{className:u.list,items:r,renderItem:(a,r)=>{const l=r+t===e;return(0,d.jsx)("div",{className:(0,i.cx)(u.item,l&&u.activeItem),ref:l?o:void 0,onClick:()=>{n(a)},title:a.documentation,children:(0,d.jsxs)("span",{className:u.itemValue,children:[(0,d.jsx)("span",{className:u.label,children:s})," ",a.label]})})}})})}));g.displayName="DataLinkSuggestionsList";var m=s("./packages/grafana-ui/src/index.ts");class f{getBoundingClientRect(){const e=window.getSelection(),t=e&&e.anchorNode;if(t&&t.parentElement){return t.parentElement.getBoundingClientRect()}return{top:0,left:0,bottom:0,right:0,width:0,height:0}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}var b=s("./node_modules/prismjs/prism.js"),v=s.n(b),x=s("./node_modules/@grafana/slate-react/lib/slate-react.es.js"),y=s("./node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js"),w=s("./node_modules/react-popper/lib/esm/Popper.js"),j=s("./packages/grafana-ui/src/slate-plugins/index.ts"),k=s("./packages/grafana-ui/src/utils/slate.ts"),S=s("./packages/grafana-data/src/index.ts"),C=s("./packages/grafana-ui/src/components/Input/Input.tsx"),T=s("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx");const N=[(0,j.Ze)({onlyIn:e=>"code_block"===e.type,getSyntax:()=>"links"},Object.assign({},v().languages,{links:{builtInVariable:{pattern:/(\${\S+?})/}}}))],O=e=>({input:(0,C.H)({theme:e,invalid:!1}).input,editor:i.css`
    .token.builtInVariable {
      color: ${e.colors.success.text};
    }
    .token.variable {
      color: ${e.colors.primary.text};
    }
  `,suggestionsWrapper:i.css`
    box-shadow: ${e.shadows.z2};
  `,wrapperOverrides:i.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),I=(0,a.memo)((({value:e,onChange:t,suggestions:s,placeholder:r="http://your-grafana.com/d/000000010/annotations"})=>{const o=(0,a.useRef)(),u=(0,c.wW)(O),[p,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)(0),[j,C]=(0,a.useState)((0,m.makeValue)(e)),I=(0,n.Z)(j),P=(0,a.useRef)({showingSuggestions:p,suggestions:s,suggestionsIndex:b,linkUrl:j,onChange:t});P.current={showingSuggestions:p,suggestions:s,suggestionsIndex:b,linkUrl:j,onChange:t};const M=(0,a.useRef)(null),F=(0,a.useMemo)((()=>{return e=M.current,t=b,(null!==(s=null==e?void 0:e.clientHeight)&&void 0!==s?s:0)*t;var e,t,s}),[b]),A=(0,a.useMemo)((()=>new f),[]),D=a.useCallback(((e,t)=>{if(!P.current.showingSuggestions)return"="===e.key||"$"===e.key||32===e.keyCode&&e.ctrlKey?g(!0):t();switch(e.key){case"Backspace":case"Escape":return g(!1),v(0);case"Enter":return e.preventDefault(),L(P.current.suggestions[P.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":e.preventDefault();const s="ArrowDown"===e.key?1:-1;return v((e=>{return t=e+s,a=P.current.suggestions.length,t-a*Math.floor(t/a);var t,a}));default:return t()}}),[]);(0,a.useEffect)((()=>{I&&I.selection.isFocused&&!j.selection.isFocused&&P.current.onChange(y.Z.serialize(j))}),[j,I]);const $=a.useCallback((({value:e})=>{C(e)}),[]),L=(e,t=o.current)=>{const s="$"!==y.Z.serialize(t.value).slice(-1);e.origin!==S.VariableOrigin.Template||e.value===S.DataLinkBuiltInVars.includeVars?t.insertText(`${s?"$":""}{${e.value}}`):t.insertText(`\${${e.value}:queryparam}`),C(t.value),g(!1),v(0),P.current.onChange(y.Z.serialize(t.value))};return(0,d.jsx)("div",{className:u.wrapperOverrides,children:(0,d.jsx)("div",{className:"slate-query-field__wrapper",children:(0,d.jsxs)("div",{className:"slate-query-field",children:[p&&(0,d.jsx)(l.h_i,{children:(0,d.jsx)(w.r,{referenceElement:A,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}],children:({ref:e,style:t,placement:s})=>(0,d.jsx)("div",{ref:e,style:t,"data-placement":s,className:u.suggestionsWrapper,children:(0,d.jsx)(T.Z,{scrollTop:F,autoHeightMax:"300px",children:(0,d.jsx)(h,{activeRef:M,suggestions:P.current.suggestions,onSuggestionSelect:L,onClose:()=>g(!1),activeIndex:b})})})})}),(0,d.jsx)(x.ML,{schema:k.Yi,ref:o,placeholder:r,value:P.current.linkUrl,onChange:$,onKeyDown:(e,t,s)=>D(e,s),plugins:N,className:(0,i.cx)(u.editor,u.input,i.css`
                  padding: 3px 8px;
                `)})]})})})}));I.displayName="DataLinkInput"},"./packages/grafana-ui/src/components/DataLinks/DataLinksInlineEditor/DataLinksInlineEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{d:()=>j});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/components/Button/Button.tsx"),r=s("./node_modules/lodash/lodash.js"),o=s("./packages/grafana-ui/src/components/Modal/Modal.tsx"),l=s("./packages/grafana-ui/src/themes/index.ts"),c=s("./packages/grafana-ui/src/components/Layout/Layout.tsx"),d=s("./packages/grafana-ui/src/components/IconButton/IconButton.tsx"),u=s("./node_modules/react/jsx-runtime.js");const p=({link:e,onEdit:t,onRemove:s})=>{const a=(0,l.l4)(),i=h(a),{title:r="",url:o=""}=e,p=""!==r.trim(),g=""!==o.trim();return(0,u.jsx)("div",{className:i.wrapper,children:(0,u.jsxs)(c.wc,{spacing:"xs",children:[(0,u.jsxs)(c.Lh,{justify:"space-between",align:"flex-start",width:"100%",children:[(0,u.jsx)("div",{className:(0,n.cx)(i.title,!p&&i.notConfigured),children:p?r:"Data link title not provided"}),(0,u.jsxs)(c.Lh,{children:[(0,u.jsx)(d.h,{name:"pen",onClick:t}),(0,u.jsx)(d.h,{name:"times",onClick:s})]})]}),(0,u.jsx)("div",{className:(0,n.cx)(i.url,!g&&i.notConfigured),title:o,children:g?o:"Data link url not provided"})]})})},h=(0,l.Bb)((e=>({wrapper:n.css`
      margin-bottom: ${e.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
    `,notConfigured:n.css`
      font-style: italic;
    `,title:n.css`
      color: ${e.colors.text.primary};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
    `,url:n.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})));var g=s("./packages/grafana-ui/src/components/Switch/Switch.tsx"),m=s("./packages/grafana-ui/src/components/DataLinks/DataLinkInput.tsx"),f=s("./packages/grafana-ui/src/components/Forms/Field.tsx"),b=s("./packages/grafana-ui/src/components/Input/Input.tsx");const v=e=>({listItem:n.css`
    margin-bottom: ${e.spacing()};
  `,infoText:n.css`
    padding-bottom: ${e.spacing(2)};
    margin-left: 66px;
    color: ${e.colors.text.secondary};
  `}),x=a.memo((({index:e,value:t,onChange:s,suggestions:a,isLast:n})=>{const i=(0,l.wW)(v);return(0,u.jsxs)("div",{className:i.listItem,children:[(0,u.jsx)(f.g,{label:"Title",children:(0,u.jsx)(b.I,{value:t.title,onChange:a=>{s(e,Object.assign({},t,{title:a.target.value}))},placeholder:"Show details"})}),(0,u.jsx)(f.g,{label:"URL",children:(0,u.jsx)(m.v,{value:t.url,onChange:(a,n)=>{s(e,Object.assign({},t,{url:a}),n)},suggestions:a})}),(0,u.jsx)(f.g,{label:"Open in new tab",children:(0,u.jsx)(g.r,{value:t.targetBlank||!1,onChange:()=>{s(e,Object.assign({},t,{targetBlank:!t.targetBlank}))}})}),n&&(0,u.jsx)("div",{className:i.infoText,children:"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."})]})}));x.displayName="DataLinkEditor";var y=s("./packages/grafana-ui/src/components/Button/index.ts");const w=({link:e,index:t,getSuggestions:s,onSave:n,onCancel:i})=>{const[r,l]=(0,a.useState)(e);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(x,{value:r,index:t,isLast:!1,suggestions:s(),onChange:(e,t)=>{l(t)}}),(0,u.jsxs)(o.u.ButtonRow,{children:[(0,u.jsx)(y.zx,{variant:"secondary",onClick:()=>i(t),fill:"outline",children:"Cancel"}),(0,u.jsx)(y.zx,{onClick:()=>{n(t,r)},children:"Save"})]})]})},j=({links:e,onChange:t,getSuggestions:s,data:n})=>{const c=(0,l.l4)(),[d,h]=(0,a.useState)(null),[g,m]=(0,a.useState)(!1),f=k(c),b=null!=e?e:[],v=null!==d,x=(e,s)=>{if(g){if(""===s.title.trim()&&""===s.url.trim())return m(!1),void h(null);h(null),m(!1)}const a=(0,r.cloneDeep)(b);a[e]=s,t(a),h(null)},y=e=>{g&&m(!1),h(null)};return(0,u.jsxs)(u.Fragment,{children:[b.length>0&&(0,u.jsx)("div",{className:f.wrapper,children:b.map(((e,s)=>(0,u.jsx)(p,{index:s,link:e,onChange:x,onEdit:()=>h(s),onRemove:()=>(e=>{const s=(0,r.cloneDeep)(b);s.splice(e,1),t(s)})(s),data:n},`${e.title}/${s}`)))}),v&&null!==d&&(0,u.jsx)(o.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{y()},children:(0,u.jsx)(w,{index:d,link:g?{title:"",url:""}:b[d],data:n,onSave:x,onCancel:y,getSuggestions:s})}),(0,u.jsx)(i.zx,{size:"sm",icon:"plus",onClick:()=>{let e=(0,r.cloneDeep)(b);h(e.length),m(!0)},variant:"secondary",children:"Add link"})]})},k=(0,l.Bb)((e=>({wrapper:n.css`
      margin-bottom: ${e.spacing(2)};
    `})))},"./packages/grafana-ui/src/components/FormattedValueDisplay/FormattedValueDisplay.tsx":(e,t,s)=>{"use strict";s.d(t,{W:()=>i});s("./node_modules/react/index.js");var a=s("./node_modules/react/jsx-runtime.js");const n=["value","className","style"];const i=e=>{var t,s;let{value:i,className:r,style:o}=e,l=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,n);const c=(null!==(t=i.prefix)&&void 0!==t?t:"").length>0,d=(null!==(s=i.suffix)&&void 0!==s?s:"").length>0;let u;if(o&&o.fontSize){const e=null==o?void 0:o.fontSize;u={fontSize:e*function(e){return e<20?.9:e<26?.8:.6}(e)}}return(0,a.jsx)("div",Object.assign({className:r,style:o},l,{children:(0,a.jsxs)("div",{children:[c&&(0,a.jsx)("span",{children:i.prefix}),(0,a.jsx)("span",{children:i.text}),d&&(0,a.jsx)("span",{style:u,children:i.suffix})]})}))};i.displayName="FormattedDisplayValue"},"./packages/grafana-ui/src/components/Forms/Field.tsx":(e,t,s)=>{"use strict";s.d(t,{g:()=>p});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/Forms/Label.tsx"),i=s("./packages/grafana-ui/src/themes/index.ts"),r=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),o=s("./packages/grafana-ui/src/components/Forms/FieldValidationMessage.tsx"),l=s("./packages/grafana-ui/src/utils/children.ts"),c=s("./node_modules/react/jsx-runtime.js");const d=["label","description","horizontal","invalid","loading","disabled","required","error","children","className","validationMessageHorizontalOverflow"];const u=(0,i.Bb)((e=>({field:r.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${e.spacing(2)};
    `,fieldHorizontal:r.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:r.css`
      margin-top: ${e.spacing(.5)};
    `,fieldValidationWrapperHorizontal:r.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:r.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `}))),p=e=>{let{label:t,description:s,horizontal:p,invalid:h,loading:g,disabled:m,required:f,error:b,children:v,className:x,validationMessageHorizontalOverflow:y}=e,w=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,d);const j=(0,i.l4)(),k=u(j),S=(0,l.l)(v),C="string"==typeof t?(0,c.jsx)(n._,{htmlFor:S,description:s,children:`${t}${f?" *":""}`}):t;return(0,c.jsxs)("div",Object.assign({className:(0,r.cx)(k.field,p&&k.fieldHorizontal,x)},w,{children:[C,(0,c.jsxs)("div",{children:[a.cloneElement(v,{invalid:h,disabled:m,loading:g}),h&&b&&!p&&(0,c.jsx)("div",{className:(0,r.cx)(k.fieldValidationWrapper,{[k.validationMessageHorizontalOverflow]:!!y}),children:(0,c.jsx)(o.S,{children:b})})]}),h&&b&&p&&(0,c.jsx)("div",{className:(0,r.cx)(k.fieldValidationWrapper,k.fieldValidationWrapperHorizontal,{[k.validationMessageHorizontalOverflow]:!!y}),children:(0,c.jsx)(o.S,{children:b})})]}))}},"./packages/grafana-ui/src/components/Forms/FieldValidationMessage.tsx":(e,t,s)=>{"use strict";s.d(t,{A:()=>o,S:()=>l});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),i=s("./packages/grafana-ui/src/themes/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=(0,i.Bb)((e=>{const t=`\n      font-size: ${e.typography.size.sm};\n      font-weight: ${e.typography.fontWeightMedium};\n      padding: ${e.spacing(.5,1)};\n      color: ${e.colors.error.contrastText};\n      background: ${e.colors.error.main};\n      border-radius: ${e.shape.borderRadius()};\n      position: relative;\n      display: inline-block;\n    `;return{vertical:a.css`
      ${t}
      margin: ${e.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${e.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:a.css`
      ${t}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:a.css`
      margin-right: ${e.spacing()};
    `}})),l=({children:e,horizontal:t,className:s})=>{const l=(0,i.l4)(),c=o(l),d=(0,a.cx)(t?c.horizontal:c.vertical,s);return(0,r.jsxs)("div",{role:"alert",className:d,children:[(0,r.jsx)(n.J,{className:c.fieldValidationMessageIcon,name:"exclamation-triangle"}),e]})}},"./packages/grafana-ui/src/components/Forms/Label.tsx":(e,t,s)=>{"use strict";s.d(t,{F:()=>l,_:()=>c});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/themes/index.ts"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),r=s("./node_modules/react/jsx-runtime.js");const o=["children","description","className","category"];const l=(0,a.Bb)((e=>({label:n.css`
      label: Label;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${e.spacing(.5)};
      color: ${e.colors.text.primary};
      max-width: 480px;
    `,labelContent:n.css`
      display: flex;
      align-items: center;
    `,description:n.css`
      label: Label-description;
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightRegular};
      margin-top: ${e.spacing(.25)};
      display: block;
    `,categories:n.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:n.css`
      margin: 0 ${e.spacing(.25)};
    `}))),c=e=>{let{children:t,description:s,className:c,category:d}=e,u=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,o);const p=(0,a.l4)(),h=l(p),g=null==d?void 0:d.map(((e,t)=>(0,r.jsxs)("span",{className:h.categories,children:[(0,r.jsx)("span",{children:e}),(0,r.jsx)(i.J,{name:"angle-right",className:h.chevron})]},`${e}/${t}`)));return(0,r.jsx)("div",{className:(0,n.cx)(h.label,c),children:(0,r.jsxs)("label",Object.assign({},u,{children:[(0,r.jsxs)("div",{className:h.labelContent,children:[g,t]}),s&&(0,r.jsx)("span",{className:h.description,children:s})]}))})}},"./packages/grafana-ui/src/components/Forms/Legacy/Input/Input.tsx":(e,t,s)=>{"use strict";s.d(t,{G:()=>d,I:()=>u});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s.n(n),r=s("./packages/grafana-ui/src/utils/index.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=["validationEvents","className","hideErrorMessage","inputRef"];function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let d;!function(e){e.Invalid="invalid",e.Valid="valid"}(d||(d={}));class u extends a.PureComponent{constructor(...e){super(...e),c(this,"state",{error:null}),c(this,"validatorAsync",(e=>t=>{const s=(0,r.Gu)(t.target.value,e);this.setState((e=>Object.assign({},e,{error:s?s[0]:null})))})),c(this,"populateEventPropsWithStatus",((e,t)=>{const s=Object.assign({},e);return t?(Object.keys(r.JU).forEach((a=>{((0,r.z3)(a,t)||e[a])&&(s[a]=async s=>{s.persist(),(0,r.z3)(a,t)&&await this.validatorAsync(t[a]).apply(this,[s]),e[a]&&e[a].apply(null,[s,this.status])})})),s):s}))}get status(){return this.state.error?d.Invalid:d.Valid}get isInvalid(){return this.status===d.Invalid}render(){const e=this.props,{validationEvents:t,className:s,hideErrorMessage:a,inputRef:n}=e,r=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,l),{error:c}=this.state,d=i()("gf-form-input",{invalid:this.isInvalid},s),u=this.populateEventPropsWithStatus(r,t);return(0,o.jsxs)("div",{style:{flexGrow:1},children:[(0,o.jsx)("input",Object.assign({},u,{ref:n,className:d})),c&&!a&&(0,o.jsx)("span",{children:c})]})}}c(u,"defaultProps",{className:""})},"./packages/grafana-ui/src/components/Forms/Legacy/Select/IndicatorsContainer.tsx":(e,t,s)=>{"use strict";s.d(t,{B:()=>r,Z:()=>o});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),n=s("./node_modules/react-select/dist/index-4bd03571.esm.js"),i=s("./node_modules/react/jsx-runtime.js");const r=e=>{const t=e.selectProps.menuIsOpen;return(0,i.jsx)(n.c.IndicatorsContainer,Object.assign({},e,{children:(0,i.jsx)(a.J,{name:t?"angle-up":"angle-down",style:{marginTop:"7px"}})}))},o=r},"./packages/grafana-ui/src/components/Forms/Legacy/Select/NoOptionsMessage.tsx":(e,t,s)=>{"use strict";s.d(t,{P:()=>i,Z:()=>r});s("./node_modules/react/index.js");var a=s("./node_modules/react-select/dist/index-4bd03571.esm.js"),n=s("./node_modules/react/jsx-runtime.js");const i=e=>{const{children:t}=e;return(0,n.jsx)(a.c.Option,Object.assign({},e,{children:(0,n.jsx)("div",{className:"gf-form-select-box__desc-option",children:(0,n.jsx)("div",{className:"gf-form-select-box__desc-option__body",children:t})})}))},r=i},"./packages/grafana-ui/src/components/Forms/Legacy/Select/Select.tsx":(e,t,s)=>{"use strict";s.d(t,{qb:()=>k,Ph:()=>j});var a,n=s("./node_modules/classnames/index.js"),i=s.n(n),r=s("./node_modules/react/index.js"),o=s("./node_modules/react-select/dist/react-select.esm.js"),l=s("./node_modules/react-select/dist/index-4bd03571.esm.js"),c=s("./node_modules/react-select/creatable/dist/react-select.esm.js"),d=s("./node_modules/react-select/async/dist/react-select.esm.js"),u=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),p=s("./node_modules/react/jsx-runtime.js");const h=e=>{const{children:t,isSelected:s,data:n}=e;return(0,p.jsx)(l.c.Option,Object.assign({},e,{children:(0,p.jsxs)("div",{className:"gf-form-select-box__desc-option",children:[n.imgUrl&&(0,p.jsx)("img",{className:"gf-form-select-box__desc-option__img",src:n.imgUrl}),(0,p.jsxs)("div",{className:"gf-form-select-box__desc-option__body",children:[(0,p.jsx)("div",{children:t}),n.description&&(0,p.jsx)("div",{className:"gf-form-select-box__desc-option__desc",children:n.description})]}),s&&(a||(a=(0,p.jsx)(u.J,{name:"check","aria-hidden":"true"})))]})}))};var g=s("./packages/grafana-ui/src/components/Select/SelectOptionGroup.tsx"),m=s("./packages/grafana-ui/src/components/Select/SingleValue.tsx"),f=s("./packages/grafana-ui/src/components/Forms/Legacy/Select/IndicatorsContainer.tsx"),b=s("./packages/grafana-ui/src/components/Forms/Legacy/Select/NoOptionsMessage.tsx"),v=s("./packages/grafana-ui/src/components/Select/resetSelectStyles.ts"),x=s("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),y=s("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx");function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class j extends r.PureComponent{render(){const{defaultValue:e,getOptionLabel:t,getOptionValue:s,onChange:a,options:n,placeholder:r,width:l,value:d,className:u,isDisabled:h,isLoading:g,isSearchable:m,isClearable:f,backspaceRemovesValue:b,isMulti:x,autoFocus:y,openMenuOnFocus:w,onBlur:k,maxMenuHeight:C,noOptionsMessage:T,isOpen:N,components:O,tooltipContent:I,tabSelectsValue:P,onCloseMenu:M,onOpenMenu:F,allowCustomValue:A,formatCreateLabel:D}=this.props;let $="";l&&($="width-"+l);let L=o.ZP;const E={};A&&(L=c.ZP,E.formatCreateLabel=null!=D?D:e=>e);const R=i()("gf-form-input","gf-form-input--form-dropdown",$,u),_=Object.assign({},j.defaultProps.components,O);return(0,p.jsx)(S,{onCloseMenu:M,onOpenMenu:F,tooltipContent:I,isOpen:N,children:(i,o)=>(0,p.jsx)(L,Object.assign({captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:R,components:_,defaultValue:e,value:d,getOptionLabel:t,getOptionValue:s,menuShouldScrollIntoView:!1,isSearchable:m,onChange:a,options:n,placeholder:r||"Choose",styles:(0,v.Z)(),isDisabled:h,isLoading:g,isClearable:f,autoFocus:y,onBlur:k,openMenuOnFocus:w,maxMenuHeight:C,noOptionsMessage:T,isMulti:x,backspaceRemovesValue:b,menuIsOpen:N,onMenuOpen:i,onMenuClose:o,tabSelectsValue:P},E))})}}w(j,"defaultProps",{className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:h,SingleValue:m.P,IndicatorsContainer:f.Z,MenuList:e=>(0,p.jsx)(l.c.MenuList,Object.assign({},e,{children:(0,p.jsx)(x.$,{autoHide:!1,autoHeightMax:"inherit",children:e.children})})),Group:g.n}});class k extends r.PureComponent{render(){const{defaultValue:e,getOptionLabel:t,getOptionValue:s,onChange:a,placeholder:n,width:r,value:o,className:l,loadOptions:c,defaultOptions:u,isLoading:g,loadingMessage:x,noOptionsMessage:y,isDisabled:w,isSearchable:j,isClearable:k,backspaceRemovesValue:C,autoFocus:T,onBlur:N,openMenuOnFocus:O,maxMenuHeight:I,isMulti:P,tooltipContent:M,onCloseMenu:F,onOpenMenu:A,isOpen:D}=this.props;let $="";r&&($="width-"+r);const L=i()("gf-form-input","gf-form-input--form-dropdown",$,l);return(0,p.jsx)(S,{onCloseMenu:F,onOpenMenu:A,tooltipContent:M,isOpen:D,children:(i,r)=>(0,p.jsx)(d.ZP,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:L,components:{Option:h,SingleValue:m.P,IndicatorsContainer:f.Z,NoOptionsMessage:b.Z},defaultValue:e,value:o,getOptionLabel:t,getOptionValue:s,menuShouldScrollIntoView:!1,onChange:a,loadOptions:c,isLoading:g,defaultOptions:u,placeholder:n||"Choose",styles:(0,v.Z)(),loadingMessage:()=>x,noOptionsMessage:y,isDisabled:w,isSearchable:j,isClearable:k,autoFocus:T,onBlur:N,openMenuOnFocus:O,maxMenuHeight:I,isMulti:P,backspaceRemovesValue:C})})}}w(k,"defaultProps",{className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300});class S extends r.PureComponent{constructor(...e){super(...e),w(this,"state",{isOpenInternal:!1}),w(this,"onOpenMenu",(()=>{const{onOpenMenu:e}=this.props;e&&e(),this.setState({isOpenInternal:!0})})),w(this,"onCloseMenu",(()=>{const{onCloseMenu:e}=this.props;e&&e(),this.setState({isOpenInternal:!1})}))}render(){const{children:e,isOpen:t,tooltipContent:s}=this.props,{isOpenInternal:a}=this.state;let n;return(a||t)&&(n=!1),s?(0,p.jsx)(y.u,{show:n,content:s,placement:"bottom",children:(0,p.jsx)("div",{children:e(this.onOpenMenu,this.onCloseMenu)})}):(0,p.jsx)("div",{children:e(this.onOpenMenu,this.onCloseMenu)})}}},"./packages/grafana-ui/src/components/Forms/Legacy/Switch/Switch.tsx":(e,t,s)=>{"use strict";s.d(t,{r:()=>d});var a,n=s("./node_modules/react/index.js"),i=s("./node_modules/lodash/lodash.js"),r=s("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),o=s("./packages/grafana-ui/src/components/index.ts"),l=s("./node_modules/react/jsx-runtime.js");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends n.PureComponent{constructor(...e){super(...e),c(this,"state",{id:(0,i.uniqueId)()}),c(this,"internalOnChange",(e=>{e.stopPropagation(),this.props.onChange(e)}))}render(){const{labelClass:e="",switchClass:t="",label:s,checked:n,transparent:i,className:c,tooltip:d,tooltipPlacement:u}=this.props,p=this.state.id,h=`gf-form-label ${e} ${i?"gf-form-label--transparent":""} pointer`,g=`gf-form-switch ${t} ${i?"gf-form-switch--transparent":""}`;return(0,l.jsx)("div",{className:"gf-form-switch-container-react",children:(0,l.jsxs)("label",{htmlFor:p,className:`gf-form gf-form-switch-container ${c||""}`,children:[s&&(0,l.jsxs)("div",{className:h,children:[s,d&&(0,l.jsx)(r.u,{placement:u||"auto",content:d,theme:"info",children:(0,l.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,l.jsx)(o.JO$,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})})]}),(0,l.jsxs)("div",{className:g,children:[(0,l.jsx)("input",{id:p,type:"checkbox",checked:n,onChange:this.internalOnChange}),a||(a=(0,l.jsx)("span",{className:"gf-form-switch__slider"}))]})]})})}}},"./packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx":(e,t,s)=>{"use strict";s.d(t,{S:()=>h});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./node_modules/lodash/lodash.js"),r=s("./packages/grafana-ui/src/themes/index.ts"),o=s("./packages/grafana-ui/src/components/Forms/commonStyles.ts"),l=s("./packages/grafana-ui/src/themes/mixins.ts"),c=s("./node_modules/react/jsx-runtime.js");const d=({children:e,active:t=!1,disabled:s=!1,size:a="md",onChange:n,id:i,name:o,description:l,fullWidth:d,"aria-label":p})=>{const h=(0,r.l4)(),g=u(h,a,d);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{type:"radio",className:g.radio,onChange:n,disabled:s,id:i,checked:t,name:o,"aria-label":p}),(0,c.jsx)("label",{className:g.radioLabel,htmlFor:i,title:l,children:e})]})};d.displayName="RadioButton";const u=(0,r.Bb)(((e,t,s)=>{const{fontSize:a,height:i,padding:r}=(0,o.iL)(t,e),c=e.colors.text.secondary,d=e.colors.text.primary,u=i*e.spacing.gridSize-4-2;return{radio:n.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${e.colors.text.primary};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,l.getFocusStyles)(e)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,l.getMouseFocusStyles)(e)}
      }

      &:disabled + label {
        color: ${e.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:n.css`
      display: inline-block;
      position: relative;
      font-size: ${a};
      height: ${u}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${u}px;
      color: ${c};
      padding: ${e.spacing(0,r)};
      border-radius: ${e.shape.borderRadius()};
      background: ${e.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${s?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${d};
      }
    `}}));var p=s("./packages/grafana-ui/src/components/Icon/Icon.tsx");function h({options:e,value:t,onChange:s,disabled:o,disabledOptions:l,size:u="md",className:h,fullWidth:m=!1}){const f=(0,a.useCallback)((e=>()=>{s&&s(e.value)}),[s]),b=(0,i.uniqueId)("radiogroup-"),v=(0,a.useRef)(b),x=(0,r.wW)(g);return(0,c.jsx)("div",{className:(0,n.cx)(x.radioGroup,m&&x.fullWidth,h),children:e.map(((e,s)=>{const a=l&&e.value&&l.includes(e.value);return(0,c.jsxs)(d,{size:u,disabled:a||o,active:t===e.value,"aria-label":e.ariaLabel,onChange:f(e),id:`option-${e.value}-${b}`,name:v.current,description:e.description,fullWidth:m,children:[e.icon&&(0,c.jsx)(p.J,{name:e.icon,className:x.icon}),e.imgUrl&&(0,c.jsx)("img",{src:e.imgUrl,alt:e.label,className:x.img}),e.label]},`o.label-${s}`)}))})}h.displayName="RadioButtonGroup";const g=e=>({radioGroup:(0,n.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${e.components.input.borderColor}`,borderRadius:e.shape.borderRadius(),padding:"2px"}),fullWidth:(0,n.css)({display:"flex"}),icon:n.css`
      margin-right: 6px;
    `,img:n.css`
      width: ${e.spacing(2)};
      height: ${e.spacing(2)};
      margin-right: ${e.spacing(1)};
    `})},"./packages/grafana-ui/src/components/Forms/commonStyles.ts":(e,t,s)=>{"use strict";s.d(t,{GL:()=>i,RK:()=>r,ht:()=>o,iL:()=>c});var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/themes/mixins.ts");const i=e=>a.css`
  &:focus {
    ${(0,n.focusCss)(e)}
  }
`,r=(e,t=!1)=>{const s=t?e.colors.error.border:e.components.input.borderColor,n=t?e.colors.error.shade:e.components.input.borderHover,i=e.components.input.background,r=e.components.input.text,o=e.isDark?"#2e2f35":"#bab4ca";return a.css`
    background: ${i};
    line-height: ${e.typography.body.lineHeight};
    font-size: ${e.typography.size.md};
    color: ${r};
    border: 1px solid ${s};
    padding: ${e.spacing(0,1,0,1)};

    &:-webkit-autofill,
    &:-webkit-autofill:hover {
      /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${i}!important;
      -webkit-text-fill-color: ${r} !important;
      border-color: ${o};
    }

    &:-webkit-autofill:focus {
      /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
      box-shadow: 0 0 0 2px ${e.colors.background.primary}, 0 0 0px 4px ${e.colors.primary.main},
        inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${i}!important;
      -webkit-text-fill-color: ${r} !important;
    }

    &:hover {
      border-color: ${n};
    }

    &:focus {
      outline: none;
    }

    &:disabled {
      background-color: ${e.colors.action.disabledBackground};
      color: ${e.colors.action.disabledText};
      border: 1px solid ${e.colors.action.disabledBackground};

      &:hover {
        border-color: ${s};
      }
    }

    &::placeholder {
      color: ${e.colors.text.disabled};
      opacity: 1;
    }
  `},o=()=>({sm:a.css`
      width: ${l("sm")};
    `,md:a.css`
      width: ${l("md")};
    `,lg:a.css`
      width: ${l("lg")};
    `,auto:a.css`
      width: ${l("auto")};
    `}),l=e=>{switch(e){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function c(e,t){switch(e){case"sm":return{padding:1,fontSize:t.typography.size.sm,height:t.components.height.sm};case"lg":return{padding:3,fontSize:t.typography.size.lg,height:t.components.height.lg};case"md":default:return{padding:2,fontSize:t.typography.size.md,height:t.components.height.md}}}},"./packages/grafana-ui/src/components/GraphNG/GraphNG.tsx":(e,t,s)=>{"use strict";s.d(t,{j:()=>g,d:()=>m});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/uPlot/utils.ts"),i=s("./packages/grafana-data/src/index.ts"),r=s("./packages/grafana-ui/src/components/GraphNG/utils.ts"),o=s("./packages/grafana-ui/src/components/PanelChrome/PanelContext.ts"),l=s("./node_modules/rxjs/dist/esm5/internal/Subscription.js"),c=s("./node_modules/rxjs/dist/esm5/internal/operators/throttleTime.js"),d=s("./packages/grafana-ui/src/components/VizLayout/VizLayout.tsx"),u=s("./packages/grafana-ui/src/components/uPlot/Plot.tsx"),p=s("./node_modules/react/jsx-runtime.js");function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const g="__fixed";class m extends a.Component{constructor(e){super(e),h(this,"panelContext",{}),h(this,"plotInstance",void 0),h(this,"subscription",new l.w0),h(this,"getTimeRange",(()=>this.props.timeRange)),this.state=this.prepState(e),this.plotInstance=a.createRef()}prepState(e,t=!0){let s=null;const{frames:a,fields:o,preparePlotFrame:l}=e,c=(l||r.R)(a,o||{x:i.fieldMatchers.get(i.FieldMatcherID.firstTimeField).get({}),y:i.fieldMatchers.get(i.FieldMatcherID.numeric).get({})});if((0,n.Zp)("GraphNG",!1,"data aligned",c),c){var d;let a=null===(d=this.state)||void 0===d?void 0:d.config;t&&(a=e.prepConfig(c,this.props.frames,this.getTimeRange),(0,n.Zp)("GraphNG",!1,"config prepared",a)),s={alignedFrame:c,alignedData:a.prepData([c]),config:a},(0,n.Zp)("GraphNG",!1,"data prepared",s.alignedData)}return s}componentDidMount(){this.panelContext=this.context;const{eventBus:e}=this.panelContext;this.subscription.add(e.getStream(i.LegacyGraphHoverEvent).pipe((0,c.p)(50)).subscribe({next:e=>{const t=this.plotInstance.current;if(t){const s=t.valToPos(e.payload.point.time,"x");let a;if(s&&(a=(0,n.ah)(t,t.posToIdx(s))),!a||!s)return;t.setCursor({left:s,top:a})}}})),this.subscription.add(e.getStream(i.LegacyGraphHoverClearEvent).pipe((0,c.p)(50)).subscribe({next:()=>{var e;const t=null===(e=this.plotInstance)||void 0===e?void 0:e.current;t&&t.setCursor({left:-10,top:-10})}}))}componentDidUpdate(e){const{frames:t,structureRev:s,timeZone:a,propsToDiff:i}=this.props,r=!function(e,t,s=[]){for(const a of s)if("function"==typeof a){if(!a(e,t))return!1}else if(t[a]!==e[a])return!1;return!0}(e,this.props,i);if(t!==e.frames||r){let t=this.prepState(this.props,!1);if(t){(void 0===this.state.config||a!==e.timeZone||s!==e.structureRev||!s||r)&&(t.config=this.props.prepConfig(t.alignedFrame,this.props.frames,this.getTimeRange),t.alignedData=t.config.prepData([t.alignedFrame]),(0,n.Zp)("GraphNG",!1,"config recreated",t.config))}t&&this.setState(t)}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:e,height:t,children:s,timeRange:a,renderLegend:n}=this.props,{config:i,alignedFrame:r,alignedData:o}=this.state;return i?(0,p.jsx)(d.A,{width:e,height:t,legend:n(i),children:(e,t)=>(0,p.jsx)(u.N,{config:i,data:o,width:e,height:t,timeRange:a,plotRef:e=>this.plotInstance.current=e,children:s?s(i,r):null})}):null}}h(m,"contextType",o.bb)},"./packages/grafana-ui/src/components/GraphNG/utils.ts":(e,t,s)=>{"use strict";s.d(t,{R:()=>i});var a=s("./packages/grafana-data/src/index.ts");function n(e,t,s){let a,n;for(let i=0;i<t.length;i++){if(null==t[i])null==n&&null!=a&&(n=i);else{if(null!=n){if(e[i]-a<s)for(;n<i;)t[n++]=void 0;n=null}a=e[i]}}return t}function i(e,t){let s=(0,a.outerJoinDataFrames)({frames:e,joinBy:t.x,keep:t.y,keepOriginIndices:!0});return s&&function(e){let t=e.fields.find((e=>e.type===a.FieldType.time)),s=null==t?void 0:t.values.toArray();for(let r=0;r<e.fields.length;r++){let o=e.fields[r];if(o!==t&&o.type===a.FieldType.number){var i;let e=null===(i=o.config.custom)||void 0===i?void 0:i.spanNulls;"number"==typeof e&&-1!==e&&(o.values=new a.ArrayVector(n(s,o.values.toArray(),e)))}}return e}(s)}},"./packages/grafana-ui/src/components/Icon/Icon.tsx":(e,t,s)=>{"use strict";s.d(t,{J:()=>zt,B:()=>qt});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/themes/stylesFactory.ts"),r=s("./packages/grafana-ui/src/themes/ThemeContext.tsx"),o=s("./node_modules/react-inlinesvg/esm/index.js"),l=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-double-down.svg"),c=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-double-right.svg"),d=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-down.svg"),u=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-left.svg"),p=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-right.svg"),h=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-up.svg"),g=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/apps.svg"),m=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow.svg"),f=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-down.svg"),b=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-from-right.svg"),v=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-left.svg"),x=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-random.svg"),y=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-right.svg"),w=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-up.svg"),j=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrows-h.svg"),k=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/backward.svg"),S=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bars.svg"),C=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bell.svg"),T=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bell-slash.svg"),N=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bolt.svg"),O=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/book.svg"),I=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/book-open.svg"),P=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/brackets-curly.svg"),M=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bug.svg"),F=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/building.svg"),A=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/calculator-alt.svg"),D=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/calendar-alt.svg"),$=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/camera.svg"),L=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/channel-add.svg"),E=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/chart-line.svg"),R=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/check.svg"),_=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/check-circle.svg"),V=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/circle.svg"),B=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/clipboard-alt.svg"),z=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/clock-nine.svg"),U=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/cloud.svg"),q=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/cloud-download.svg"),H=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/code-branch.svg"),G=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/cog.svg"),W=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/columns.svg"),Z=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/comment-alt.svg"),Q=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/comment-alt-share.svg"),K=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/comments-alt.svg"),Y=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/compass.svg"),J=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/copy.svg"),X=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/cube.svg"),ee=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/dashboard.svg"),te=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/database.svg"),se=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/document-info.svg"),ae=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/download-alt.svg"),ne=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/draggabledots.svg"),ie=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/edit.svg"),re=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/ellipsis-v.svg"),oe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/envelope.svg"),le=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/exchange-alt.svg"),ce=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/exclamation-triangle.svg"),de=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/external-link-alt.svg"),ue=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/eye.svg"),pe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/eye-slash.svg"),he=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/file-alt.svg"),ge=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/file-blank.svg"),me=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/filter.svg"),fe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/folder.svg"),be=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/folder-open.svg"),ve=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/folder-plus.svg"),xe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/folder-upload.svg"),ye=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/forward.svg"),we=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/graph-bar.svg"),je=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/history.svg"),ke=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/home-alt.svg"),Se=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/import.svg"),Ce=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/info.svg"),Te=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/info-circle.svg"),Ne=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/key-skeleton-alt.svg"),Oe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/keyboard.svg"),Ie=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/link.svg"),Pe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/list-ul.svg"),Me=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/lock.svg"),Fe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/minus.svg"),Ae=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/minus-circle.svg"),De=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/mobile-android.svg"),$e=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/monitor.svg"),Le=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/pause.svg"),Ee=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/pen.svg"),Re=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/play.svg"),_e=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/plug.svg"),Ve=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/plus.svg"),Be=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/plus-circle.svg"),ze=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/power.svg"),Ue=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/presentation-play.svg"),qe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/process.svg"),He=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/question-circle.svg"),Ge=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/repeat.svg"),We=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/rocket.svg"),Ze=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/save.svg"),Qe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/search.svg"),Ke=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/search-minus.svg"),Ye=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/search-plus.svg"),Je=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/share-alt.svg"),Xe=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/shield.svg"),et=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/signal.svg"),tt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/signin.svg"),st=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/signout.svg"),at=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sitemap.svg"),nt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/slack.svg"),it=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sliders-v-alt.svg"),rt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sort-amount-down.svg"),ot=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sort-amount-up.svg"),lt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/square-shape.svg"),ct=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/star.svg"),dt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/step-backward.svg"),ut=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sync.svg"),pt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/table.svg"),ht=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/tag-alt.svg"),gt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/times.svg"),mt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/trash-alt.svg"),ft=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/unlock.svg"),bt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/upload.svg"),vt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/user.svg"),xt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/users-alt.svg"),yt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/wrap-text.svg"),wt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-bar-alignment-after.svg"),jt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-bar-alignment-before.svg"),kt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-bar-alignment-center.svg"),St=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-interpolation-linear.svg"),Ct=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-interpolation-smooth.svg"),Tt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-interpolation-step-after.svg"),Nt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-interpolation-step-before.svg"),Ot=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-logs.svg"),It=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/favorite.svg"),Pt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/grafana.svg"),Mt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/heart.svg"),Ft=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/heart-break.svg"),At=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/panel-add.svg"),Dt=s("./node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/library-panel.svg");let $t=!1,Lt="public/img/icons";function Et(e,t){o.V[Lt+t]={content:e,status:"loaded",queue:[]}}var Rt=s("./node_modules/react/jsx-runtime.js");const _t=["size","type","name","className","style"];const Vt=["grafana","favorite","heart-break","heart","panel-add","library-panel"],Bt=(0,i.B)((e=>({container:n.css`
      label: Icon;
      display: inline-block;
    `,icon:n.css`
      vertical-align: middle;
      display: inline-block;
      margin-bottom: ${e.spacing.xxs};
      fill: currentColor;
    `,orange:n.css`
      fill: ${e.palette.orange};
    `})));const zt=a.forwardRef(((e,t)=>{let{size:s="md",type:a="default",name:i,className:zt,style:Ht}=e,Gt=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,_t);const Wt=(0,r.Fg)();if(null!=i&&i.startsWith("fa fa-"))return(0,Rt.jsx)("i",Object.assign({className:Ut(i,zt)},Gt,{style:Ht}));"panel-add"===i&&(s="xl"),$t||function(){$t=!0;const e=window.__grafana_public_path__;e&&(Lt=e+"img/icons/"),Et(l.Z,"unicons/angle-double-down.svg"),Et(c.Z,"unicons/angle-double-right.svg"),Et(d.Z,"unicons/angle-down.svg"),Et(u.Z,"unicons/angle-left.svg"),Et(p.Z,"unicons/angle-right.svg"),Et(h.Z,"unicons/angle-up.svg"),Et(g.Z,"unicons/apps.svg"),Et(m.Z,"unicons/arrow.svg"),Et(f.Z,"unicons/arrow-down.svg"),Et(b.Z,"unicons/arrow-from-right.svg"),Et(v.Z,"unicons/arrow-left.svg"),Et(x.Z,"unicons/arrow-random.svg"),Et(y.Z,"unicons/arrow-right.svg"),Et(w.Z,"unicons/arrow-up.svg"),Et(j.Z,"unicons/arrows-h.svg"),Et(k.Z,"unicons/backward.svg"),Et(S.Z,"unicons/bars.svg"),Et(C.Z,"unicons/bell.svg"),Et(T.Z,"unicons/bell-slash.svg"),Et(N.Z,"unicons/bolt.svg"),Et(O.Z,"unicons/book.svg"),Et(I.Z,"unicons/book-open.svg"),Et(P.Z,"unicons/brackets-curly.svg"),Et(M.Z,"unicons/bug.svg"),Et(F.Z,"unicons/building.svg"),Et(A.Z,"unicons/calculator-alt.svg"),Et(D.Z,"unicons/calendar-alt.svg"),Et($.Z,"unicons/camera.svg"),Et(L.Z,"unicons/channel-add.svg"),Et(E.Z,"unicons/chart-line.svg"),Et(R.Z,"unicons/check.svg"),Et(_.Z,"unicons/check-circle.svg"),Et(V.Z,"unicons/circle.svg"),Et(B.Z,"unicons/clipboard-alt.svg"),Et(z.Z,"unicons/clock-nine.svg"),Et(U.Z,"unicons/cloud.svg"),Et(q.Z,"unicons/cloud-download.svg"),Et(H.Z,"unicons/code-branch.svg"),Et(G.Z,"unicons/cog.svg"),Et(W.Z,"unicons/columns.svg"),Et(Z.Z,"unicons/comment-alt.svg"),Et(Q.Z,"unicons/comment-alt-share.svg"),Et(K.Z,"unicons/comments-alt.svg"),Et(Y.Z,"unicons/compass.svg"),Et(J.Z,"unicons/copy.svg"),Et(X.Z,"unicons/cube.svg"),Et(ee.Z,"unicons/dashboard.svg"),Et(te.Z,"unicons/database.svg"),Et(se.Z,"unicons/document-info.svg"),Et(ae.Z,"unicons/download-alt.svg"),Et(ne.Z,"unicons/draggabledots.svg"),Et(ie.Z,"unicons/edit.svg"),Et(re.Z,"unicons/ellipsis-v.svg"),Et(oe.Z,"unicons/envelope.svg"),Et(le.Z,"unicons/exchange-alt.svg"),Et(ce.Z,"unicons/exclamation-triangle.svg"),Et(de.Z,"unicons/external-link-alt.svg"),Et(ue.Z,"unicons/eye.svg"),Et(pe.Z,"unicons/eye-slash.svg"),Et(he.Z,"unicons/file-alt.svg"),Et(ge.Z,"unicons/file-blank.svg"),Et(me.Z,"unicons/filter.svg"),Et(fe.Z,"unicons/folder.svg"),Et(be.Z,"unicons/folder-open.svg"),Et(ve.Z,"unicons/folder-plus.svg"),Et(xe.Z,"unicons/folder-upload.svg"),Et(ye.Z,"unicons/forward.svg"),Et(we.Z,"unicons/graph-bar.svg"),Et(je.Z,"unicons/history.svg"),Et(ke.Z,"unicons/home-alt.svg"),Et(Se.Z,"unicons/import.svg"),Et(Ce.Z,"unicons/info.svg"),Et(Te.Z,"unicons/info-circle.svg"),Et(Ne.Z,"unicons/key-skeleton-alt.svg"),Et(Oe.Z,"unicons/keyboard.svg"),Et(Ie.Z,"unicons/link.svg"),Et(Pe.Z,"unicons/list-ul.svg"),Et(Me.Z,"unicons/lock.svg"),Et(Fe.Z,"unicons/minus.svg"),Et(Ae.Z,"unicons/minus-circle.svg"),Et(De.Z,"unicons/mobile-android.svg"),Et($e.Z,"unicons/monitor.svg"),Et(Le.Z,"unicons/pause.svg"),Et(Ee.Z,"unicons/pen.svg"),Et(Re.Z,"unicons/play.svg"),Et(_e.Z,"unicons/plug.svg"),Et(Ve.Z,"unicons/plus.svg"),Et(Be.Z,"unicons/plus-circle.svg"),Et(ze.Z,"unicons/power.svg"),Et(Ue.Z,"unicons/presentation-play.svg"),Et(qe.Z,"unicons/process.svg"),Et(He.Z,"unicons/question-circle.svg"),Et(Ge.Z,"unicons/repeat.svg"),Et(We.Z,"unicons/rocket.svg"),Et(Ze.Z,"unicons/save.svg"),Et(Qe.Z,"unicons/search.svg"),Et(Ke.Z,"unicons/search-minus.svg"),Et(Ye.Z,"unicons/search-plus.svg"),Et(Je.Z,"unicons/share-alt.svg"),Et(Xe.Z,"unicons/shield.svg"),Et(et.Z,"unicons/signal.svg"),Et(tt.Z,"unicons/signin.svg"),Et(st.Z,"unicons/signout.svg"),Et(at.Z,"unicons/sitemap.svg"),Et(nt.Z,"unicons/slack.svg"),Et(it.Z,"unicons/sliders-v-alt.svg"),Et(rt.Z,"unicons/sort-amount-down.svg"),Et(ot.Z,"unicons/sort-amount-up.svg"),Et(lt.Z,"unicons/square-shape.svg"),Et(ct.Z,"unicons/star.svg"),Et(dt.Z,"unicons/step-backward.svg"),Et(ut.Z,"unicons/sync.svg"),Et(pt.Z,"unicons/table.svg"),Et(ht.Z,"unicons/tag-alt.svg"),Et(gt.Z,"unicons/times.svg"),Et(mt.Z,"unicons/trash-alt.svg"),Et(ft.Z,"unicons/unlock.svg"),Et(bt.Z,"unicons/upload.svg"),Et(vt.Z,"unicons/user.svg"),Et(xt.Z,"unicons/users-alt.svg"),Et(yt.Z,"unicons/wrap-text.svg"),Et(wt.Z,"custom/gf-bar-alignment-after.svg"),Et(jt.Z,"custom/gf-bar-alignment-before.svg"),Et(kt.Z,"custom/gf-bar-alignment-center.svg"),Et(St.Z,"custom/gf-interpolation-linear.svg"),Et(Ct.Z,"custom/gf-interpolation-smooth.svg"),Et(Tt.Z,"custom/gf-interpolation-step-after.svg"),Et(Nt.Z,"custom/gf-interpolation-step-before.svg"),Et(Ot.Z,"custom/gf-logs.svg"),Et(It.Z,"mono/favorite.svg"),Et(Pt.Z,"mono/grafana.svg"),Et(Mt.Z,"mono/heart.svg"),Et(Ft.Z,"mono/heart-break.svg"),Et(At.Z,"mono/panel-add.svg"),Et(Dt.Z,"mono/library-panel.svg")}();const Zt=Bt(Wt),Qt=qt(s),Kt=Qt,Yt=null!=i&&i.startsWith("gf-bar-align")?16:null!=i&&i.startsWith("gf-interp")?30:Qt,Jt=function(e,t){return null!=e&&e.startsWith("gf-")?"custom":Vt.includes(e)?"mono":"default"===t?"unicons":"mono"}(i,a),Xt=`${Lt}${Jt}/${i}.svg`;return(0,Rt.jsx)("div",Object.assign({className:Zt.container},Gt,{ref:t,children:(0,Rt.jsx)(o.Z,{src:Xt,width:Yt,height:Kt,className:(0,n.cx)(Zt.icon,zt,"mono"===a?{[Zt.orange]:"favorite"===i}:""),style:Ht})}))}));function Ut(e,t){return(0,n.cx)(e,{"fa-spin":"fa fa-spinner"===e},t)}zt.displayName="Icon";const qt=e=>{switch(e){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},"./packages/grafana-ui/src/components/IconButton/IconButton.tsx":(e,t,s)=>{"use strict";s.d(t,{h:()=>h});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),i=s("./packages/grafana-ui/src/themes/stylesFactory.ts"),r=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),o=s("./packages/grafana-ui/src/themes/ThemeContext.tsx"),l=s("./packages/grafana-data/src/index.ts"),c=s("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),d=s("./packages/grafana-ui/src/themes/mixins.ts"),u=s("./node_modules/react/jsx-runtime.js");const p=["name","size","iconType","tooltip","tooltipPlacement","ariaLabel","className","variant"];const h=a.forwardRef(((e,t)=>{let{name:s,size:a="md",iconType:i,tooltip:l,tooltipPlacement:d,ariaLabel:h,className:m,variant:f="secondary"}=e,b=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,p);const v=(0,o.l4)(),x=g(v,a,f),y=(0,u.jsx)("button",Object.assign({ref:t,"aria-label":h||l||""},b,{className:(0,r.cx)(x.button,m),children:(0,u.jsx)(n.J,{name:s,size:a,className:x.icon,type:i})}));return l?(0,u.jsx)(c.u,{content:l,placement:d,children:y}):y}));h.displayName="IconButton";const g=(0,i.B)(((e,t,s)=>{const a=(0,n.B)(t),i=Math.max(a/3,8);let o=e.colors.text.primary;return"primary"===s?o=e.colors.primary.text:"destructive"===s&&(o=e.colors.error.text),{button:r.css`
      width: ${a}px;
      height: ${a}px;
      background: transparent;
      border: none;
      color: ${o};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${e.shape.borderRadius()};
      z-index: 0;
      margin-right: ${e.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${e.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${i}px;
        left: -${i}px;
        right: -${i}px;
        top: -${i}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,d.getFocusStyles)(e)}
      }

      &:focus:not(:focus-visible) {
        ${(0,d.getMouseFocusStyles)(e)}
      }

      &:hover {
        color: ${o};

        &:before {
          background-color: ${"secondary"===s?e.colors.action.hover:l.colorManipulator.alpha(o,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:r.css`
      margin-bottom: 0;
      vertical-align: baseline;
      display: flex;
    `}}))},"./packages/grafana-ui/src/components/Input/Input.tsx":(e,t,s)=>{"use strict";s.d(t,{I:()=>u,H:()=>p});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/components/Forms/commonStyles.ts"),r=s("./packages/grafana-ui/src/themes/index.ts"),o=s("./packages/grafana-ui/src/components/Spinner/Spinner.tsx"),l=s("./node_modules/react-use/lib/useMeasure.js"),c=s("./node_modules/react/jsx-runtime.js");const d=["className","addonAfter","addonBefore","prefix","suffix","invalid","loading","width"];const u=a.forwardRef(((e,t)=>{const{className:s,addonAfter:a,addonBefore:i,prefix:u,suffix:h,invalid:g,loading:m,width:f=0}=e,b=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,d),[v,x]=(0,l.Z)(),[y,w]=(0,l.Z)(),j=(0,r.l4)(),k=p({theme:j,invalid:!!g,width:f});return(0,c.jsxs)("div",{className:(0,n.cx)(k.wrapper,s),children:[!!i&&(0,c.jsx)("div",{className:k.addon,children:i}),(0,c.jsxs)("div",{className:k.inputWrapper,children:[u&&(0,c.jsx)("div",{className:k.prefix,ref:v,children:u}),(0,c.jsx)("input",Object.assign({ref:t,className:k.input},b,{style:{paddingLeft:x?x.width+12:void 0,paddingRight:w&&(h||m)?w.width+12:void 0}})),(h||m)&&(0,c.jsxs)("div",{className:k.suffix,ref:y,children:[m&&(0,c.jsx)(o.$,{className:k.loadingIndicator,inline:!0}),h]})]}),!!a&&(0,c.jsx)("div",{className:k.addon,children:a})]})}));u.displayName="Input";const p=(0,r.Bb)((({theme:e,invalid:t=!1,width:s})=>{const a="28px",r=n.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${e.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${a};
    color: ${e.colors.text.secondary};
  `;return{wrapper:(0,n.cx)(n.css`
        label: input-wrapper;
        display: flex;
        width: ${s?`${e.spacing(s)}`:"100%"};
        height: ${e.spacing(e.components.height.md)};
        border-radius: ${e.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${t?e.colors.error.border:e.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:n.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${a};
        }
        &:not(:last-child) {
          padding-right: ${a};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,n.cx)((0,i.GL)(e.v1),(0,i.RK)(e,t),n.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${e.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:n.css`
      background-color: ${e.colors.action.disabledBackground};
      color: ${e.colors.action.disabledText};
      border: 1px solid ${e.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:n.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,n.cx)(r,n.css`
        label: input-prefix;
        padding-left: ${e.spacing(1)};
        padding-right: ${e.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,n.cx)(r,n.css`
        label: input-suffix;
        padding-left: ${e.spacing(1)};
        padding-right: ${e.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:n.css`
      & + * {
        margin-left: ${e.spacing(.5)};
      }
    `}}))},"./packages/grafana-ui/src/components/Layout/Layout.tsx":(e,t,s)=>{"use strict";s.d(t,{Ar:()=>c,Lh:()=>d,wc:()=>u,W2:()=>p});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/themes/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=["children","orientation","spacing","justify","align","wrap","width","height"];var l;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(l||(l={}));const c=e=>{let{children:t,orientation:s=l.Horizontal,spacing:n="sm",justify:c="flex-start",align:d="normal",wrap:u=!1,width:p="100%",height:g="100%"}=e,m=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,o);const f=(0,i.Fg)(),b=h(f,s,n,c,d,u);return(0,r.jsx)("div",Object.assign({className:b.layout,style:{width:p,height:g}},m,{children:a.Children.toArray(t).filter(Boolean).map(((e,t)=>(0,r.jsx)("div",{className:b.childWrapper,children:e},t)))}))},d=({children:e,spacing:t,justify:s,align:a="center",wrap:n,width:i,height:o})=>(0,r.jsx)(c,{spacing:t,justify:s,orientation:l.Horizontal,align:a,width:i,height:o,wrap:n,children:e}),u=({children:e,spacing:t,justify:s,align:a,width:n,height:i})=>(0,r.jsx)(c,{spacing:t,justify:s,orientation:l.Vertical,align:a,width:n,height:i,children:e}),p=({children:e,padding:t,margin:s,grow:a,shrink:o})=>{const l=(0,i.Fg)(),c=g(l,t,s);return(0,r.jsx)("div",{className:(0,n.cx)(c.wrapper,void 0!==a&&n.css`
            flex-grow: ${a};
          `,void 0!==o&&n.css`
            flex-shrink: ${o};
          `),children:e})},h=(0,i.Bb)(((e,t,s,a,i,r)=>{const o="none"!==s?e.spacing[s]:0,c=t===l.Horizontal&&!r||t===l.Vertical?0:`-${o}`,d=t===l.Vertical?"vertical-group":"horizontal-group";return{layout:n.css`
        label: ${d};
        display: flex;
        flex-direction: ${t===l.Vertical?"column":"row"};
        flex-wrap: ${r?"wrap":"nowrap"};
        justify-content: ${a};
        align-items: ${i};
        height: 100%;
        max-width: 100%;
        // compensate for last row margin when wrapped, horizontal layout
        margin-bottom: ${c};
      `,childWrapper:n.css`
        label: layoutChildrenWrapper;
        margin-bottom: ${t!==l.Horizontal||r?o:0};
        margin-right: ${t===l.Horizontal?o:0};
        display: flex;
        align-items: ${i};

        &:last-child {
          margin-bottom: ${t===l.Vertical&&0};
          margin-right: ${t===l.Horizontal&&0};
        }
      `}})),g=(0,i.Bb)(((e,t,s)=>{const a=t&&"none"!==t&&e.spacing[t]||0,i=s&&"none"!==s&&e.spacing[s]||0;return{wrapper:n.css`
      label: container;
      margin: ${i};
      padding: ${a};
    `}}))},"./packages/grafana-ui/src/components/List/AbstractList.tsx":(e,t,s)=>{"use strict";s.d(t,{L:()=>l});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/themes/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=(0,i.Bb)(((e=!1)=>({list:n.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:n.css`
    display: ${e?"inline-block":"block"};
  `})));class l extends a.PureComponent{constructor(e){super(e)}render(){const{items:e,renderItem:t,getItemKey:s,className:a,inline:i}=this.props,l=o(i);return(0,r.jsx)("ul",{className:(0,n.cx)(l.list,a),children:e.map(((e,a)=>(0,r.jsx)("li",{className:l.item,children:t(e,a)},s?s(e):a)))})}}},"./packages/grafana-ui/src/components/List/List.tsx":(e,t,s)=>{"use strict";s.d(t,{a:()=>r});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/List/AbstractList.tsx"),i=s("./node_modules/react/jsx-runtime.js");class r extends a.PureComponent{render(){return(0,i.jsx)(n.L,Object.assign({},this.props))}}},"./packages/grafana-ui/src/components/Logs/LogMessageAnsi.tsx":(e,t,s)=>{"use strict";s.d(t,{Q:()=>r});var a=s("./node_modules/react/index.js"),n=s("./node_modules/ansicolor/build/ansicolor.mjs"),i=s("./node_modules/react/jsx-runtime.js");class r extends a.PureComponent{constructor(...e){var t,s,a;super(...e),a={chunks:[],prevValue:""},(s="state")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}static getDerivedStateFromProps(e,t){if(e.value===t.prevValue)return null;return{chunks:n.ZP.parse(e.value).spans.map((e=>{return e.css?{style:(t=e.css,t.split(/;\s*/).reduce(((e,t)=>{const s=t.match(/([^:\s]+)\s*:\s*(.+)/);return s&&s[1]&&s[2]&&(e[s[1].replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))]=s[2]),e}),{})),text:e.text}:{text:e.text};var t})),prevValue:e.value}}render(){const{chunks:e}=this.state;return e.map(((e,t)=>e.style?(0,i.jsx)("span",{style:e.style,"data-testid":"ansiLogLine",children:e.text},t):e.text))}}},"./packages/grafana-ui/src/components/Logs/LogRowMessage.tsx":(e,t,s)=>{"use strict";s.d(t,{r:()=>O,n:()=>S});var a=s("./node_modules/react/index.js"),n=s("./node_modules/tinycolor2/tinycolor.js"),i=s.n(n),r=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),o=s("./packages/grafana-data/src/index.ts"),l=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),c=s("./node_modules/react-highlight-words/dist/main.js"),d=s.n(c),u=s("./packages/grafana-ui/src/themes/index.ts"),p=s("./packages/grafana-ui/src/components/Logs/getLogRowStyles.ts"),h=s("./packages/grafana-ui/src/components/Alert/Alert.tsx"),g=s("./packages/grafana-ui/src/themes/ThemeContext.tsx"),m=s("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),f=s("./packages/grafana-ui/src/components/List/List.tsx"),b=s("./packages/grafana-ui/src/components/ClickOutsideWrapper/ClickOutsideWrapper.tsx"),v=s("./packages/grafana-ui/src/components/Logs/LogMessageAnsi.tsx"),x=s("./node_modules/react/jsx-runtime.js");const y=(e,t)=>{const s=t?r.css`
        top: -250px;
      `:r.css`
        margin-top: -250px;
        width: 75%;
      `,a=t?r.css`
        top: 100%;
      `:r.css`
        margin-top: 40px;
        width: 75%;
      `;return{commonStyles:r.css`
      position: absolute;
      height: 250px;
      z-index: ${e.zIndex.dropdown};
      overflow: hidden;
      background: ${e.colors.bg1};
      box-shadow: 0 0 10px ${e.colors.dropdownShadow};
      border: 1px solid ${e.colors.bg2};
      border-radius: ${e.border.radius.md};
      width: 100%;
    `,header:r.css`
      height: 30px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      background: ${e.colors.bg2};
    `,logs:r.css`
      height: 220px;
      padding: 10px;
    `,afterContext:s,beforeContext:a}},w=({row:e,rows:t,onLoadMoreContext:s,canLoadMoreRows:a})=>{const{header:n}=(0,g.yK)(y);return(0,x.jsxs)("div",{className:n,children:[(0,x.jsxs)("span",{className:r.css`
          opacity: 0.6;
        `,children:["Found ",t.length," rows."]}),(t.length>=10||t.length>10&&t.length%10!=0)&&a&&(0,x.jsx)("span",{className:r.css`
            margin-left: 10px;
            &:hover {
              text-decoration: underline;
              cursor: pointer;
            }
          `,onClick:s,children:"Load 10 more"})]})},j=({row:e,rows:t,error:s,className:n,shouldScrollToBottom:i,canLoadMoreRows:l,onLoadMoreContext:c})=>{const{commonStyles:d,logs:u}=(0,g.yK)(y),[p,b]=(0,a.useState)(0),j=(0,a.useRef)();(0,a.useLayoutEffect)((()=>{i&&j.current&&b(j.current.offsetHeight)}),[i]);const k={row:e,rows:t,onLoadMoreContext:c,canLoadMoreRows:l};return(0,x.jsxs)("div",{className:(0,r.cx)(d,n),children:[i&&!s&&(0,x.jsx)(w,Object.assign({},k)),(0,x.jsx)("div",{className:u,children:(0,x.jsx)(m.$,{autoHide:!0,scrollTop:p,autoHeightMin:"210px",children:(0,x.jsxs)("div",{ref:j,children:[!s&&(0,x.jsx)(f.a,{items:t,renderItem:e=>(0,x.jsx)("div",{className:r.css`
                        padding: 5px 0;
                      `,children:"string"==typeof e&&o.textUtil.hasAnsiCodes(e)?(0,x.jsx)(v.Q,{value:e}):e})}),s&&(0,x.jsx)(h.b,{title:s})]})})}),!i&&!s&&(0,x.jsx)(w,Object.assign({},k))]})},k=({row:e,context:t,errors:s,onOutsideClick:n,onLoadMoreContext:i,hasMoreContextRows:r,wrapLogMessage:o})=>{(0,a.useEffect)((()=>{const e=e=>{27===e.keyCode&&n()};return document.addEventListener("keydown",e,!1),()=>{document.removeEventListener("keydown",e,!1)}}),[n]);const l=(0,g.Fg)(),{afterContext:c,beforeContext:d}=y(l,o);return(0,x.jsx)(b.L,{onClick:n,children:(0,x.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[t.after&&(0,x.jsx)(j,{rows:t.after,error:s&&s.after,row:e,className:c,shouldScrollToBottom:!0,canLoadMoreRows:!!r&&r.after,onLoadMoreContext:i}),t.before&&(0,x.jsx)(j,{onLoadMoreContext:i,canLoadMoreRows:!!r&&r.before,row:e,rows:t.before,error:s&&s.before,className:d})]})})};const S=1e5;function C(e,t,s,a){return s&&s.length>0&&s[0]&&s[0].length>0&&t.length<S?(0,x.jsx)(d(),{textToHighlight:t,searchWords:null!=s?s:[],findChunks:o.findHighlightChunksInText,highlightClassName:a}):e?(0,x.jsx)(v.Q,{value:t}):t}const T=(0,l.default)(((e,t)=>{if(t)try{return JSON.stringify(JSON.parse(e),void 0,2)}catch(t){return e}return e}));class N extends a.PureComponent{constructor(...e){var t,s,a;super(...e),a=e=>{e.stopPropagation(),this.props.onToggleContext()},(s="onContextToggle")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}render(){const{row:e,theme:t,errors:s,hasMoreContextRows:a,updateLimit:n,context:o,contextIsOpen:l,showContextToggle:c,wrapLogMessage:d,prettifyLogMessage:u,onToggleContext:h}=this.props,g=(0,p.h)(t,e.logLevel),{hasAnsi:m,raw:f}=e,b=T(f,u),v=(0,r.cx)([g.logsRowMatchHighLight]),y=(e=>{const t=i()(e.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:r.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:r.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${t};
    `,horizontalScroll:r.css`
      label: verticalScroll;
      white-space: pre;
    `,contextNewline:r.css`
      display: block;
      margin-left: 0px;
    `}})(t);return(0,x.jsx)("td",{className:g.logsRowMessage,children:(0,x.jsxs)("div",{className:(0,r.cx)({[y.positionRelative]:d},{[y.horizontalScroll]:!d}),children:[l&&o&&(0,x.jsx)(k,{row:e,context:o,errors:s,wrapLogMessage:d,hasMoreContextRows:a,onOutsideClick:h,onLoadMoreContext:()=>{n&&n()}}),(0,x.jsx)("span",{className:(0,r.cx)(y.positionRelative,{[y.rowWithContext]:l}),children:C(m,b,e.searchWords,v)}),(null==c?void 0:c(e))&&(0,x.jsxs)("span",{onClick:this.onContextToggle,className:(0,r.cx)("log-row-context",g.context,{[y.contextNewline]:!d}),children:[l?"Hide":"Show"," context"]})]})})}}const O=(0,u.HE)(N);O.displayName="LogRowMessage"},"./packages/grafana-ui/src/components/Logs/getLogRowStyles.ts":(e,t,s)=>{"use strict";s.d(t,{h:()=>r});var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./packages/grafana-ui/src/themes/index.ts");const r=(0,i.Bb)(((e,t)=>{let s=e.isLight?e.v1.palette.gray5:e.v1.palette.gray2;const r=i.GU.hoverColor(e.colors.background.primary,e);switch(t){case n.LogLevel.crit:case n.LogLevel.critical:s="#705da0";break;case n.LogLevel.error:case n.LogLevel.err:s="#e24d42";break;case n.LogLevel.warning:case n.LogLevel.warn:s=e.colors.warning.main;break;case n.LogLevel.info:s="#7eb26d";break;case n.LogLevel.debug:s="#1f78c1";break;case n.LogLevel.trace:s="#6ed0e0"}return{logsRowMatchHighLight:a.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${e.colors.warning.main};
      background-color: rgba(${e.colors.warning.main}, 0.1);
    `,logsRowMatchHighLightPreview:a.css`
      label: logs-row__match-highlight--preview;
      background-color: rgba(${e.colors.warning.main}, 0.2);
      border-bottom-style: dotted;
    `,logsRowsTable:a.css`
      label: logs-rows;
      font-family: ${e.typography.fontFamilyMonospace};
      font-size: ${e.typography.bodySmall.fontSize};
      width: 100%;
    `,context:a.css`
      label: context;
      visibility: hidden;
      white-space: nowrap;
      position: relative;
      margin-left: 10px;
    `,logsRow:a.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-context {
          visibility: visible;
          z-index: 1;
          text-decoration: underline;
          &:hover {
            color: ${e.colors.warning.main};
          }
        }
      }

      td:last-child {
        width: 100%;
      }

      > td {
        padding-right: ${e.spacing(1)};
        border-top: ${e.v1.border.width.sm} solid transparent;
        border-bottom: ${e.v1.border.width.sm} solid transparent;
        height: 100%;
      }

      &:hover {
        background: ${r};
      }
    `,logsRowDuplicates:a.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:a.css`
      label: logs-row__level;
      position: relative;
      max-width: 10px;
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: 4px;
        background-color: ${s};
      }
    `,logIconError:a.css`
      color: ${e.colors.warning.main};
    `,logsRowToggleDetails:a.css`
      label: logs-row-toggle-details__level;
      position: relative;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:a.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:a.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;
    `,logsRowMessage:a.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
    `,logDetailsContainer:a.css`
      label: logs-row-details-table;
      border: 1px solid ${e.colors.border.medium};
      padding: 0 ${e.spacing(1)} ${e.spacing(1)};
      border-radius: 3px;
      margin: 20px 8px 20px 16px;
      cursor: default;
    `,logDetailsTable:a.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:a.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${e.v1.palette.gray3};
      padding-top: 6px;
      padding-left: 6px;
    `,logDetailsLabel:a.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${e.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:a.css`
      label: logs-row-details__heading;
      font-weight: ${e.typography.fontWeightBold};
      padding: ${e.spacing(1)} 0 ${e.spacing(.5)};
    `,logDetailsValue:a.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${r};
      }
    `}}))},"./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx":(e,t,s)=>{"use strict";s.d(t,{b:()=>o});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/Select/Select.tsx"),i=s("./packages/grafana-ui/src/components/MatchersUI/utils.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=({value:e,onChange:t,context:s,item:o})=>{var l,c;const d=null!==(l=o.settings)&&void 0!==l?l:{},u=(0,i.IX)(s.data,null==d?void 0:d.filter),p=(0,i.nw)(u,e),h=(0,a.useCallback)((e=>{if((0,i.w3)(e.value,u))return t(e.value)}),[u,t]),g=p.find((t=>t.value===e));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Ph,{menuShouldPortal:!0,value:g,placeholder:null!==(c=d.placeholderText)&&void 0!==c?c:"Select field",options:p,onChange:h,noOptionsMessage:d.noFieldsMessage,width:d.width}),d.info&&(0,r.jsx)(d.info,{name:e,field:u.fields.get(e)})]})}},"./packages/grafana-ui/src/components/MatchersUI/utils.ts":(e,t,s)=>{"use strict";s.d(t,{w3:()=>r,IX:()=>o,nw:()=>l});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./packages/grafana-ui/src/types/index.ts");function r(e,t){return!!e&&(t.display.has(e)||t.raw.has(e))}function o(e,t){return(0,a.useMemo)((()=>function(e,t){const s={display:new Set,raw:new Set,fields:new Map};for(const a of e)for(const i of a.fields){if(t&&!t(i))continue;const r=(0,n.getFieldDisplayName)(i,a,e);s.display.add(r),s.fields.set(r,i),i.name&&r!==i.name&&(s.raw.add(i.name),s.fields.set(i.name,i))}return s}(e,t)),[e,t])}function l(e,t,s){return(0,a.useMemo)((()=>{let a=!1;const n=[];s&&n.push(s);for(const s of e.display){a||s!==t||(a=!0);const r=e.fields.get(s);n.push({value:s,label:s,icon:r?(0,i.e7)(r):void 0})}for(const s of e.raw)e.display.has(s)||(a||s!==t||(a=!0),n.push({value:s,label:`${s} (base field name)`}));return t&&!a&&n.push({value:t,label:`${t} (not found)`}),n}),[e,t,s])}},"./packages/grafana-ui/src/components/Modal/Modal.tsx":(e,t,s)=>{"use strict";s.d(t,{u:()=>p});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/Portal/Portal.tsx"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./packages/grafana-ui/src/themes/index.ts"),o=s("./packages/grafana-ui/src/components/Modal/getModalStyles.ts"),l=s("./packages/grafana-ui/src/components/Modal/ModalHeader.tsx"),c=s("./packages/grafana-ui/src/components/IconButton/IconButton.tsx"),d=s("./packages/grafana-ui/src/components/Layout/Layout.tsx"),u=s("./node_modules/react/jsx-runtime.js");function p(e){const{title:t,children:s,isOpen:l=!1,closeOnEscape:d=!0,closeOnBackdropClick:p=!0,className:g,contentClassName:m,onDismiss:f,onClickBackdrop:b}=e,v=(0,r.l4)(),x=(0,o.J)(v),y=(0,a.useCallback)((()=>{f&&f()}),[f]);if((0,a.useEffect)((()=>{const e=e=>{"Esc"!==e.key&&"Escape"!==e.key||y()};return l&&d?document.addEventListener("keydown",e,!1):document.removeEventListener("keydown",e,!1),()=>{document.removeEventListener("keydown",e,!1)}}),[d,l,y]),!l)return null;const w=(0,i.cx)(x.modalHeader,"string"!=typeof t&&x.modalHeaderWithTabs);return(0,u.jsxs)(n.h,{children:[(0,u.jsx)("div",{className:x.modalBackdrop,onClick:b||(p?y:void 0)}),(0,u.jsxs)("div",{className:(0,i.cx)(x.modal,g),children:[(0,u.jsxs)("div",{className:w,children:["string"==typeof t&&(0,u.jsx)(h,Object.assign({},e,{title:t})),"string"!=typeof t&&t,(0,u.jsx)("div",{className:x.modalHeaderClose,children:(0,u.jsx)(c.h,{"aria-label":"Close dialogue",surface:"header",name:"times",size:"xl",onClick:y})})]}),(0,u.jsx)("div",{className:(0,i.cx)(x.modalContent,m),children:s})]})]})}function h({icon:e,iconTooltip:t,title:s}){return(0,u.jsx)(l.x,{icon:e,iconTooltip:t,title:s})}p.ButtonRow=function({children:e}){const t=(0,r.l4)(),s=(0,o.J)(t);return(0,u.jsx)("div",{className:s.modalButtonRow,children:(0,u.jsx)(d.Lh,{justify:"flex-end",spacing:"md",children:e})})}},"./packages/grafana-ui/src/components/Modal/ModalHeader.tsx":(e,t,s)=>{"use strict";s.d(t,{x:()=>r});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/components/Modal/getModalStyles.ts"),n=s("./packages/grafana-ui/src/themes/index.ts"),i=s("./node_modules/react/jsx-runtime.js");const r=({icon:e,iconTooltip:t,title:s,children:r})=>{const o=(0,n.wW)(a.J);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:o.modalHeaderTitle,children:s}),r]})}},"./packages/grafana-ui/src/components/Modal/getModalStyles.ts":(e,t,s)=>{"use strict";s.d(t,{J:()=>n});var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");const n=(0,s("./packages/grafana-ui/src/themes/index.ts").Bb)((e=>{const t=e.shape.borderRadius(1);return{modal:a.css`
      position: fixed;
      z-index: ${e.zIndex.modal};
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      border-radius: ${t};
      border: 1px solid ${e.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:a.css`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${e.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:a.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${e.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:a.css`
      border-bottom: 1px solid ${e.colors.border.weak};
    `,modalHeaderTitle:a.css`
      font-size: ${e.typography.size.lg};
      margin: ${e.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:a.css`
      margin-right: ${e.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:a.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${e.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:a.css`
      overflow: auto;
      padding: ${e.spacing(3)};
      width: 100%;
    `,modalButtonRow:a.css`
      padding-top: ${e.spacing(3)};
    `}}))},"./packages/grafana-ui/src/components/Monaco/types.ts":(e,t,s)=>{"use strict";let a;s.d(t,{k:()=>a}),function(e){e.Method="method",e.Field="field",e.Property="property",e.Constant="constant",e.Text="text"}(a||(a={}))},"./packages/grafana-ui/src/components/OptionsUI/color.tsx":(e,t,s)=>{"use strict";s.d(t,{B:()=>l});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/components/ColorPicker/ColorPicker.tsx"),n=s("./packages/grafana-ui/src/themes/index.ts"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./packages/grafana-ui/src/components/ColorPicker/ColorSwatch.tsx"),o=s("./node_modules/react/jsx-runtime.js");const l=({value:e,onChange:t})=>{const s=(0,n.l4)(),i=(0,n.wW)(c);return(0,o.jsx)(a.zH,{color:null!=e?e:"",onChange:t,enableNamedColors:!0,children:({ref:t,showColorPicker:a,hideColorPicker:n})=>(0,o.jsx)("div",{className:i.spot,onBlur:n,children:(0,o.jsx)("div",{className:i.colorPicker,children:(0,o.jsx)(r.b,{ref:t,onClick:a,onMouseLeave:n,color:e?s.visualization.getColorByName(e):s.components.input.borderColor})})})})},c=e=>({spot:i.css`
      color: ${e.colors.text};
      background: ${e.components.input.background};
      padding: 3px;
      height: ${e.v1.spacing.formInputHeight}px;
      border: 1px solid ${e.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      &:hover {
        border: 1px solid ${e.components.input.borderHover};
      }
    `,colorPicker:i.css`
      padding: 0 ${e.spacing(1)};
    `,colorText:i.css`
      cursor: pointer;
      flex-grow: 1;
    `,trashIcon:i.css`
      cursor: pointer;
      color: ${e.colors.text.secondary};
      &:hover {
        color: ${e.colors.text};
      }
    `})},"./packages/grafana-ui/src/components/PanelChrome/LoadingIndicator.tsx":(e,t,s)=>{"use strict";s.d(t,{T:()=>c});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-e2e-selectors/src/index.ts"),i=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),r=s("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),o=s("./packages/grafana-ui/src/themes/index.ts"),l=s("./node_modules/react/jsx-runtime.js");const c=({onCancel:e,loading:t})=>{const s=(0,o.yK)(d);return t?(0,l.jsx)(r.u,{content:"Cancel query",children:(0,l.jsx)(i.J,{className:(0,a.cx)("spin-clockwise",{[s.clickable]:!!e}),name:"sync",size:"sm",onClick:e,"aria-label":n.wl.components.LoadingIndicator.icon})}):null},d=()=>({clickable:a.css`
      cursor: pointer;
    `})},"./packages/grafana-ui/src/components/PanelChrome/PanelContext.ts":(e,t,s)=>{"use strict";s.d(t,{bb:()=>i,_w:()=>r,R9:()=>o});var a=s("./packages/grafana-data/src/index.ts"),n=s("./node_modules/react/index.js");const i=n.createContext({eventBus:new a.EventBusSrv}),r=i.Provider,o=()=>n.useContext(i)},"./packages/grafana-ui/src/components/Portal/Portal.tsx":(e,t,s)=>{"use strict";s.d(t,{h:()=>o});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-dom/index.js"),i=s("./packages/grafana-ui/src/themes/index.ts"),r=s("./node_modules/react/jsx-runtime.js");function o(e){const{children:t,className:s,root:o=document.body,forwardedRef:l}=e,c=(0,i.l4)(),d=(0,a.useRef)(null);return d.current||(d.current=document.createElement("div"),s&&(d.current.className=s),d.current.style.position="relative",d.current.style.zIndex=`${c.zIndex.portal}`),(0,a.useLayoutEffect)((()=>(d.current&&o.appendChild(d.current),()=>{d.current&&o.removeChild(d.current)})),[o]),n.createPortal((0,r.jsx)("div",{ref:l,children:t}),d.current)}a.forwardRef(((e,t)=>(0,r.jsx)(o,Object.assign({},e,{forwardedRef:t})))).displayName="RefForwardingPortal"},"./packages/grafana-ui/src/components/Select/Select.tsx":(e,t,s)=>{"use strict";s.d(t,{M8:()=>z,qb:()=>B,NU:()=>V,Ph:()=>_});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-select/dist/react-select.esm.js"),i=s("./node_modules/react-select/creatable/dist/react-select.esm.js"),r=s("./node_modules/react-select/async/dist/react-select.esm.js"),o=s("./node_modules/react-select/async-creatable/dist/react-select.esm.js"),l=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),c=s("./packages/grafana-ui/src/components/Spinner/Spinner.tsx"),d=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),u=s("./packages/grafana-ui/src/components/Select/resetSelectStyles.ts"),p=s("./packages/grafana-ui/src/themes/ThemeContext.tsx");const h=(0,s("./packages/grafana-ui/src/themes/stylesFactory.ts").B)((e=>({menu:d.css`
      label: grafana-select-menu;
      background: ${e.components.dropdown.background};
      box-shadow: ${e.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:d.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${e.colors.action.hover};
      }
    `,optionIcon:d.css`
      margin-right: ${e.spacing(1)};
    `,optionImage:d.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:d.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      white-space: normal;
      line-height: ${e.typography.body.lineHeight};
    `,optionBody:d.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${e.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:d.css`
      label: grafana-select-option-focused;
      background: ${e.colors.action.focus};
    `,optionSelected:d.css`
      background: ${e.colors.action.selected};
    `,singleValue:d.css`
      label: grafana-select-single-value;
      color: ${e.components.input.text};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:d.css`
      label: grafana-select-value-container;
      align-items: center;
      display: flex;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:d.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
    `,loadingMessage:d.css`
      label: grafana-select-loading-message;
      padding: ${e.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:d.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius()};
      margin: ${e.spacing(.25,1,.25,0)};
      padding: ${e.spacing(.25,0,.25,1)};
      color: ${e.colors.text.primary};
      font-size: ${e.typography.size.sm};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary)};
      }
    `,multiValueRemove:d.css`
      label: grafana-select-multi-value-remove;
      margin: ${e.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:d.css`
      cursor: pointer;
      &:hover {
        color: ${e.colors.text.primary};
      }
    `})));var g=s("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),m=s("./node_modules/react/jsx-runtime.js");const f=a.forwardRef(((e,t)=>{const s=(0,p.l4)(),a=h(s),{children:n,maxHeight:i,innerRef:r,innerProps:o}=e;return(0,m.jsx)("div",Object.assign({},o,{className:a.menu,ref:r,style:{maxHeight:i},"aria-label":"Select options menu",children:(0,m.jsx)(g.$,{autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0,children:n})}))}));f.displayName="SelectMenu";const b=a.forwardRef(((e,t)=>{const s=(0,p.l4)(),a=h(s),{children:n,innerProps:i,data:r,renderOptionLabel:o,isSelected:c,isFocused:u}=e;return(0,m.jsxs)("div",Object.assign({ref:t,className:(0,d.cx)(a.option,u&&a.optionFocused,c&&a.optionSelected)},i,{"aria-label":"Select option",children:[r.icon&&(0,m.jsx)(l.J,{name:r.icon,className:a.optionIcon}),r.imgUrl&&(0,m.jsx)("img",{className:a.optionImage,src:r.imgUrl,alt:r.label||r.value}),(0,m.jsxs)("div",{className:a.optionBody,children:[(0,m.jsx)("span",{children:o?o(r):n}),r.description&&(0,m.jsx)("div",{className:a.optionDescription,children:r.description}),r.component&&(0,m.jsx)(r.component,{})]})]}))}));b.displayName="SelectMenuOptions";var v=s("./packages/grafana-ui/src/components/Input/Input.tsx");const x=a.forwardRef(((e,t)=>{const{children:s}=e,a=(0,p.l4)(),n=(0,v.H)({theme:a,invalid:!1});return(0,m.jsx)("div",{className:(0,d.cx)(n.suffix,d.css`
          position: relative;
        `),ref:t,children:s})}));class y extends a.Component{render(){const{children:e}=this.props,{selectProps:t}=this.props;if(t&&Array.isArray(e)&&Array.isArray(e[0])&&void 0!==t.maxVisibleValues&&(!t.showAllSelectedWhenOpen||!t.menuIsOpen)){const[s,...a]=e,n=s.slice(0,t.maxVisibleValues);return this.renderContainer([n,...a])}return this.renderContainer(e)}renderContainer(e){const{isMulti:t,theme:s}=this.props,a=h(s),n=(0,d.cx)(a.valueContainer,t&&a.valueContainerMulti);return(0,m.jsx)("div",{className:n,children:e})}}const w=(0,p.HE)(y);var j=s("./packages/grafana-ui/src/components/Forms/commonStyles.ts"),k=s("./packages/grafana-ui/src/themes/index.ts"),S=s("./packages/grafana-ui/src/themes/mixins.ts");const C=["focused","invalid","disabled","children","innerProps","prefix"];const T=(0,k.Bb)(((e,t,s,a,n)=>{const i=(0,v.H)({theme:e,invalid:t});return{wrapper:(0,d.cx)(i.wrapper,(0,j.RK)(e,t),s&&d.css`
            ${(0,S.focusCss)(e.v1)}
          `,a&&i.inputDisabled,d.css`
          min-height: 32px;
          height: auto;
          flex-direction: row;
          padding-right: 0;
          max-width: 100%;
          align-items: center;
          cursor: default;
          display: flex;
          flex-wrap: wrap;
          justify-content: space-between;
          position: relative;
          box-sizing: border-box;
          cursor: ${a?"not-allowed":"pointer"};
        `,n&&d.css`
            padding-left: 0;
          `),prefix:(0,d.cx)(i.prefix,d.css`
          position: relative;
        `)}})),N=a.forwardRef((function(e,t){let{focused:s,invalid:a,disabled:n,children:i,innerProps:r,prefix:o}=e;!function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s])}(e,C);const l=(0,p.l4)(),c=T(l,a,s,n,!!o);return(0,m.jsxs)("div",Object.assign({className:c.wrapper},r,{ref:t,children:[o&&(0,m.jsx)("div",{className:(0,d.cx)(c.prefix),children:o}),i]}))})),O=({isOpen:e})=>{const t=e?"angle-up":"angle-down";return(0,m.jsx)(l.J,{name:t})};var I,P=s("./packages/grafana-ui/src/components/Select/SelectOptionGroup.tsx"),M=s("./packages/grafana-ui/src/components/Select/SingleValue.tsx");const F=({innerProps:e,children:t})=>{const s=(0,k.l4)(),a=h(s);return(0,m.jsx)("div",Object.assign({},e,{className:a.multiValueContainer,children:t}))},A=({children:e,innerProps:t})=>{const s=(0,k.l4)(),a=h(s);return(0,m.jsx)("div",Object.assign({},t,{className:a.multiValueRemove,children:I||(I=(0,m.jsx)(l.J,{name:"times",size:"sm"}))}))},D=(e,t)=>{for(const s of t)if("options"in s){let t=D(e,s.options);if(t)return t}else if("value"in s&&s.value===e)return s;return null};var $,L=s("./packages/grafana-data/src/index.ts");const E=e=>{const{children:t,innerProps:s,selectProps:{menuIsOpen:n,onMenuClose:i,onMenuOpen:r},isFocused:o,isMulti:l,getValue:c,innerRef:d}=e,u=e.selectProps;return u.renderControl?a.createElement(u.renderControl,{isOpen:n,value:l?c():c()[0],ref:d,onClick:n?i:r,onBlur:i,disabled:!!u.disabled,invalid:!!u.invalid}):(0,m.jsx)(N,{ref:d,innerProps:s,prefix:u.prefix,focused:o,invalid:!!u.invalid,disabled:!!u.disabled,children:t})};function R({allowCustomValue:e=!1,"aria-label":t,autoFocus:s=!1,backspaceRemovesValue:p=!0,cacheOptions:g,className:v,closeMenuOnSelect:y=!0,components:j,defaultOptions:S,defaultValue:C,disabled:T=!1,filterOption:N,formatCreateLabel:I,getOptionLabel:R,getOptionValue:_,inputValue:V,invalid:B,isClearable:z=!1,id:U,isLoading:q=!1,isMulti:H=!1,inputId:G,isOpen:W,isOptionDisabled:Z,isSearchable:Q=!0,loadOptions:K,loadingMessage:Y="Loading options...",maxMenuHeight:J=300,minMenuHeight:X,maxVisibleValues:ee,menuPlacement:te="auto",menuPosition:se,menuShouldPortal:ae=!1,noOptionsMessage:ne="No options found",onBlur:ie,onChange:re,onCloseMenu:oe,onCreateOption:le,onInputChange:ce,onKeyDown:de,onOpenMenu:ue,openMenuOnFocus:pe=!1,options:he=[],placeholder:ge="Choose",prefix:me,renderControl:fe,showAllSelectedWhenOpen:be=!0,tabSelectsValue:ve=!0,value:xe,width:ye,isValidNewOption:we}){var je;!1===ae&&(0,L.deprecationWarning)("SelectBase","menuShouldPortal={false}","menuShouldPortal={true}");const ke=(0,k.l4)(),Se=h(ke),Ce=(0,a.useCallback)((e=>{if(H&&null==e)return re([]);re(e)}),[H,re]);let Te=n.ZP;const Ne={};let Oe,Ie={};if(H&&K)Oe=xe;else if(H&&xe&&Array.isArray(xe)&&!K)Oe=xe.map((e=>{var t;return D(null!==(t=e.value)&&void 0!==t?t:e,he)}));else if(K){const e=C||xe;Oe=e?[e]:[]}else Oe=((e,t)=>{if(Array.isArray(e)){const t=e.filter(Boolean);return null!=t&&t.length?t:void 0}if("object"==typeof e)return[e];if("string"==typeof e||"number"==typeof e){const s=D(e,t);if(s)return[s]}})(xe,he);const Pe={"aria-label":t,autoFocus:s,backspaceRemovesValue:p,captureMenuScroll:!1,closeMenuOnSelect:y,defaultValue:C,disabled:T,filterOption:N,getOptionLabel:R,getOptionValue:_,inputValue:V,invalid:B,isClearable:z,id:U,isDisabled:T,isLoading:q,isMulti:H,inputId:G,isOptionDisabled:Z,isSearchable:Q,maxMenuHeight:J,minMenuHeight:X,maxVisibleValues:ee,menuIsOpen:W,menuPlacement:te,menuPosition:se,menuShouldBlockScroll:!0,menuPortalTarget:ae?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:ie,onChange:Ce,onInputChange:ce,onKeyDown:de,onMenuClose:oe,onMenuOpen:ue,openMenuOnFocus:pe,options:he,placeholder:ge,prefix:me,renderControl:fe,showAllSelectedWhenOpen:be,tabSelectsValue:ve,value:H?Oe:null===(je=Oe)||void 0===je?void 0:je[0]};return e&&(Te=i.ZP,Ne.formatCreateLabel=null!=I?I:e=>`Create: ${e}`,Ne.onCreateOption=le,Ne.isValidNewOption=we),K&&(Te=e?o.Z:r.ZP,Ie={loadOptions:K,cacheOptions:g,defaultOptions:S}),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(Te,Object.assign({components:Object.assign({MenuList:f,Group:P.n,ValueContainer:w,Placeholder:e=>(0,m.jsx)("div",Object.assign({},e.innerProps,{className:(0,d.cx)((0,d.css)(e.getStyles("placeholder",e)),d.css`
                    display: inline-block;
                    color: ${ke.colors.text.disabled};
                    position: absolute;
                    top: 50%;
                    transform: translateY(-50%);
                    box-sizing: border-box;
                    line-height: 1;
                    white-space: nowrap;
                  `),children:e.children})),IndicatorsContainer(e){const{selectProps:t}=e,{value:s,showAllSelectedWhenOpen:a,maxVisibleValues:n,menuIsOpen:i}=t;if(void 0!==n){const t=s.length,r=[...e.children];return r.splice(-1,0,(e=>{const{maxVisibleValues:t,selectedValuesCount:s,menuIsOpen:a,showAllSelectedWhenOpen:n}=e;return!(void 0!==t&&s>t)||n&&a?null:(0,m.jsxs)("span",{id:"excess-values",children:["(+",s-t,")"]},"excess-values")})({maxVisibleValues:n,selectedValuesCount:t,showAllSelectedWhenOpen:a,menuIsOpen:i})),(0,m.jsx)(x,Object.assign({},e,{children:r}))}return(0,m.jsx)(x,Object.assign({},e))},IndicatorSeparator:()=>(0,m.jsx)(m.Fragment,{}),Control:E,Option:b,ClearIndicator(e){const{clearValue:t}=e;return(0,m.jsx)(l.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Se.singleValueRemove,onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),t()}})},LoadingIndicator:e=>$||($=(0,m.jsx)(c.$,{inline:!0})),LoadingMessage:e=>(0,m.jsx)("div",{className:Se.loadingMessage,children:Y}),NoOptionsMessage:e=>(0,m.jsx)("div",{className:Se.loadingMessage,"aria-label":"No options provided",children:ne}),DropdownIndicator:e=>(0,m.jsx)(O,{isOpen:e.selectProps.menuIsOpen}),SingleValue:e=>(0,m.jsx)(M.P,Object.assign({},e,{disabled:T})),MultiValueContainer:F,MultiValueRemove:A},j),styles:Object.assign({},(0,u.Z)(),{menuPortal:e=>Object.assign({},e,{zIndex:ke.zIndex.portal}),menu:({top:e,bottom:t,position:s})=>({top:e,bottom:t,position:s,minWidth:"100%",zIndex:ke.zIndex.dropdown}),container:()=>({position:"relative",width:ye?8*ye+"px":"100%"}),option:(e,t)=>Object.assign({},e,{opacity:t.isDisabled?.5:1})}),className:v},Pe,Ne,Ie))})}function _(e){return(0,m.jsx)(R,Object.assign({},e))}function V(e){return(0,m.jsx)(R,Object.assign({},e,{isMulti:!0}))}function B(e){return(0,m.jsx)(R,Object.assign({},e))}function z(e){return(0,m.jsx)(R,Object.assign({},e,{isMulti:!0}))}},"./packages/grafana-ui/src/components/Select/SelectOptionGroup.tsx":(e,t,s)=>{"use strict";s.d(t,{n:()=>u});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/themes/index.ts"),r=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),o=s("./node_modules/react/jsx-runtime.js");function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=(0,i.Bb)((e=>({header:n.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${e.colors.bg2};

      &:hover {
        color: ${e.colors.textStrong};
      }
    `,label:n.css`
      flex-grow: 1;
    `,icon:n.css`
      padding-right: 2px;
    `})));class d extends a.PureComponent{constructor(...e){super(...e),l(this,"state",{expanded:!1}),l(this,"onToggleChildren",(()=>{this.setState((e=>({expanded:!e.expanded})))}))}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:e}=this.props.selectProps.value;e&&this.props.options.some((t=>t.value===e))&&this.setState({expanded:!0})}}componentDidUpdate(e){""!==e.selectProps.inputValue&&this.setState({expanded:!0})}render(){const{children:e,label:t,theme:s}=this.props,{expanded:a}=this.state,n=c(s);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:n.header,onClick:this.onToggleChildren,children:[(0,o.jsx)("span",{className:n.label,children:t}),(0,o.jsx)(r.J,{className:n.icon,name:a?"angle-up":"angle-down"})," "]}),a&&e]})}}const u=(0,i.Zz)(d)},"./packages/grafana-ui/src/components/Select/SingleValue.tsx":(e,t,s)=>{"use strict";s.d(t,{P:()=>p});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./node_modules/react-select/dist/index-4bd03571.esm.js");var r=s("./packages/grafana-ui/src/themes/index.ts"),o=s("./packages/grafana-ui/src/components/transitions/SlideOutTransition.tsx"),l=s("./packages/grafana-ui/src/components/transitions/FadeTransition.tsx"),c=s("./packages/grafana-ui/src/components/Spinner/Spinner.tsx"),d=s("./node_modules/react/jsx-runtime.js");const u=e=>({singleValue:n.css`
    label: singleValue;
    color: ${e.components.input.text};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-sizing: border-box;
    max-width: 100%;
  `,container:n.css`
    width: 16px;
    height: 16px;
    display: inline-block;
    margin-right: 10px;
    position: relative;
    vertical-align: middle;
    overflow: hidden;
  `,item:n.css`
    width: 100%;
    height: 100%;
    position: absolute;
  `,disabled:n.css`
    color: ${e.colors.action.disabledText};
  `}),p=e=>{const{children:t,data:s,disabled:l}=e,p=(0,r.wW)(u),g=function(e,t={}){const{duration:s=250,delay:n=250}=t,[i,r]=(0,a.useState)(e),o=(0,a.useRef)();return(0,a.useEffect)((()=>{let t;if(e)t=setTimeout((()=>{o.current=new Date,r(e)}),n);else{const a=o.current?Date.now()-o.current.valueOf():0,n=()=>{o.current=void 0,r(e)};a>=s?n():t=setTimeout(n,s-a)}return()=>{t&&(clearTimeout(t),t=void 0)}}),[e,s,n]),i}(s.loading||!1,{delay:250,duration:750});return(0,d.jsx)(i.c.SingleValue,Object.assign({},e,{children:(0,d.jsxs)("div",{className:(0,n.cx)(p.singleValue,l&&p.disabled),children:[s.imgUrl?(0,d.jsx)(h,{loading:g,imgUrl:s.imgUrl,styles:p,alt:s.label||s.value}):(0,d.jsx)(o.R,{horizontal:!0,size:16,visible:g,duration:150,children:(0,d.jsx)("div",{className:p.container,children:(0,d.jsx)(c.$,{className:p.item,inline:!0})})}),!s.hideText&&t]})}))},h=e=>(0,d.jsxs)("div",{className:e.styles.container,children:[(0,d.jsx)(l.n,{duration:150,visible:e.loading,children:(0,d.jsx)(c.$,{className:e.styles.item,inline:!0})}),(0,d.jsx)(l.n,{duration:150,visible:!e.loading,children:(0,d.jsx)("img",{className:e.styles.item,src:e.imgUrl,alt:e.alt})})]})},"./packages/grafana-ui/src/components/Select/resetSelectStyles.ts":(e,t,s)=>{"use strict";function a(){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:()=>({}),loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:e})=>({maxHeight:e}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:()=>({}),singleValue:()=>({}),valueContainer:()=>({})}}s.d(t,{Z:()=>a})},"./packages/grafana-ui/src/components/Spinner/Spinner.tsx":(e,t,s)=>{"use strict";s.d(t,{$:()=>l});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/themes/index.ts"),i=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),r=s("./node_modules/react/jsx-runtime.js");const o=(0,n.Bb)(((e,t)=>({wrapper:a.css`
      font-size: ${e}px;
      ${t?a.css`
            display: inline-block;
          `:""}
    `}))),l=e=>{const{className:t,inline:s=!1,iconClassName:n,style:l,size:c=16}=e,d=o(c,s);return(0,r.jsx)("div",{style:l,className:(0,a.cx)(d.wrapper,t),children:(0,r.jsx)(i.J,{className:(0,a.cx)("fa-spin",n),name:"fa fa-spinner"})})}},"./packages/grafana-ui/src/components/StatsPicker/StatsPicker.tsx":(e,t,s)=>{"use strict";s.d(t,{m:()=>c});var a=s("./node_modules/react/index.js"),n=s("./node_modules/lodash/lodash.js"),i=s("./packages/grafana-ui/src/components/Select/Select.tsx"),r=s("./packages/grafana-data/src/index.ts"),o=s("./node_modules/react/jsx-runtime.js");function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class c extends a.PureComponent{constructor(...e){super(...e),l(this,"checkInput",(()=>{const{stats:e,allowMultiple:t,defaultStat:s,onChange:a}=this.props,i=r.fieldReducers.list(e);if(i.length!==e.length){const t=i.map((e=>e.id)),s=(0,n.difference)(e,t);console.warn("Unknown stats",s,e),a(i.map((e=>e.id)))}!t&&e.length>1&&(console.warn("Removing extra stat",e),a([e[0]])),s&&e.length<1&&a([s])})),l(this,"onSelectionChange",(e=>{const{onChange:t}=this.props;Array.isArray(e)?t(e.map((e=>e.value))):t(e&&e.value?[e.value]:[])}))}componentDidMount(){this.checkInput()}componentDidUpdate(e){this.checkInput()}render(){const{stats:e,allowMultiple:t,defaultStat:s,placeholder:a,className:n,menuPlacement:l,width:c}=this.props,d=r.fieldReducers.selectOptions(e);return(0,o.jsx)(i.Ph,{menuShouldPortal:!0,value:d.current,className:n,isClearable:!s,isMulti:t,width:c,isSearchable:!0,options:d.options,placeholder:a,onChange:this.onSelectionChange,menuPlacement:l})}}l(c,"defaultProps",{allowMultiple:!1})},"./packages/grafana-ui/src/components/Switch/Switch.tsx":(e,t,s)=>{"use strict";s.d(t,{r:()=>h,x:()=>g});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./node_modules/lodash/lodash.js"),r=s("./packages/grafana-data/src/index.ts"),o=s("./packages/grafana-ui/src/themes/index.ts"),l=s("./packages/grafana-ui/src/themes/mixins.ts"),c=s("./node_modules/react/jsx-runtime.js");const d=["value","checked","disabled","onChange","id"],u=["transparent","showLabel","label","value","id"];function p(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}const h=a.forwardRef(((e,t)=>{let{value:s,checked:l,disabled:u,onChange:h,id:g}=e,f=p(e,d);l&&(0,r.deprecationWarning)("Switch","checked prop","value");const b=(0,o.l4)(),v=m(b),x=(0,a.useRef)(g||(0,i.uniqueId)("switch-"));return(0,c.jsxs)("div",{className:(0,n.cx)(v.switch),children:[(0,c.jsx)("input",Object.assign({type:"checkbox",disabled:u,checked:s,onChange:e=>{null==h||h(e)},id:x.current},f,{ref:t})),(0,c.jsx)("label",{htmlFor:x.current})]})}));h.displayName="Switch";const g=a.forwardRef(((e,t)=>{let{transparent:s,showLabel:a,label:i,value:r,id:l}=e,d=p(e,u);const g=(0,o.l4)(),f=m(g,s);return(0,c.jsxs)("div",{className:f.inlineContainer,children:[a&&(0,c.jsx)("label",{htmlFor:l,className:(0,n.cx)(f.inlineLabel,r&&f.inlineLabelEnabled,"inline-switch-label"),children:i}),(0,c.jsx)(h,Object.assign({},d,{id:l,label:i,ref:t,value:r}))]})}));g.displayName="Switch";const m=(0,o.Bb)(((e,t)=>({switch:n.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${e.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${e.colors.primary.main};
          border-color: ${e.colors.primary.main};

          &:hover {
            background: ${e.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${e.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,l.getFocusStyles)(e)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,l.getMouseFocusStyles)(e)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        background: ${e.components.input.background};
        border: 1px solid ${e.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${e.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: 6px;
          background: ${e.colors.text.secondary};
          box-shadow: ${e.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:n.css`
      padding: ${e.spacing(0,1)};
      height: ${e.spacing(e.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${t?"transparent":e.components.input.background};
      border: 1px solid ${t?"transparent":e.components.input.borderColor};
      border-radius: ${e.shape.borderRadius()};

      &:hover {
        border: 1px solid ${t?"transparent":e.components.input.borderHover};

        .inline-switch-label {
          color: ${e.colors.text.primary};
        }
      }
    `,inlineLabel:n.css`
      cursor: pointer;
      padding-right: ${e.spacing(1)};
      color: ${e.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:n.css`
      color: ${e.colors.text.primary};
    `})))},"./packages/grafana-ui/src/components/Table/types.ts":(e,t,s)=>{"use strict";s.d(t,{h2:()=>a.h2,PT:()=>n,tE:()=>i});var a=s("./packages/grafana-schema/src/index.ts");const n="=",i="!="},"./packages/grafana-ui/src/components/Tabs/Counter.tsx":(e,t,s)=>{"use strict";s.d(t,{A:()=>l});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/themes/index.ts"),i=s("./packages/grafana-data/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=(0,n.Bb)((e=>({counter:a.css`
      label: counter;
      margin-left: ${e.spacing(1)};
      border-radius: ${e.spacing(3)};
      background-color: ${e.colors.action.hover};
      padding: ${e.spacing(.25,1)};
      color: ${e.colors.text.secondary};
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.size.sm};
    `}))),l=({value:e})=>{const t=(0,n.wW)(o);return(0,r.jsx)("span",{className:t.counter,children:(0,i.locale)(e,0).text})}},"./packages/grafana-ui/src/components/Tabs/Tab.tsx":(e,t,s)=>{"use strict";s.d(t,{O:()=>p});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-e2e-selectors/src/index.ts"),r=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),o=s("./packages/grafana-ui/src/themes/index.ts"),l=s("./packages/grafana-ui/src/components/Tabs/Counter.tsx"),c=s("./packages/grafana-ui/src/themes/mixins.ts"),d=s("./node_modules/react/jsx-runtime.js");const u=["label","active","icon","onChangeTab","counter","className","href"];const p=a.forwardRef(((e,t)=>{var s,a;let{label:c,active:p,icon:g,onChangeTab:m,counter:f,href:b}=e,v=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,u);const x=(0,o.l4)(),y=h(x),w=(0,n.cx)(y.link,p?y.activeStyle:y.notActive);return(0,d.jsx)("li",{className:y.item,children:(0,d.jsx)("a",Object.assign({href:b,className:w},v,{onClick:m,"aria-label":v["aria-label"]||i.wl.components.Tab.title(c),ref:t,children:(0,d.jsxs)(d.Fragment,{children:[g&&(s||(s=(0,d.jsx)(r.J,{name:g}))),c,"number"==typeof f&&(a||(a=(0,d.jsx)(l.A,{value:f})))]})}))})}));p.displayName="Tab";const h=(0,o.Bb)((e=>({item:n.css`
      list-style: none;
      position: relative;
      display: flex;
    `,link:n.css`
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(1.5,2,1)};
      display: block;
      height: 100%;
      svg {
        margin-right: ${e.spacing(1)};
      }

      &:focus-visible {
+        ${(0,c.getFocusStyles)(e)}
      }
    `,notActive:n.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${e.colors.text.primary};

        &::before {
          display: block;
          content: ' ';
          position: absolute;
          left: 0;
          right: 0;
          height: 4px;
          border-radius: 2px;
          bottom: 0px;
          background: ${e.colors.action.hover};
        }
      }
    `,activeStyle:n.css`
      label: activeTabStyle;
      color: ${e.colors.text.primary};
      overflow: hidden;
      font-weight: ${e.typography.fontWeightMedium};

      a {
        color: ${e.colors.text.primary};
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: 2px;
        bottom: 0px;
        background-image: ${e.colors.gradients.brandHorizontal} !important;
      }
    `})))},"./packages/grafana-ui/src/components/Tooltip/Popover.tsx":(e,t,s)=>{"use strict";s.d(t,{J:()=>u});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-popper/lib/esm/Manager.js"),i=s("./node_modules/react-popper/lib/esm/Popper.js"),r=s("./packages/grafana-ui/src/components/Portal/Portal.tsx"),o=s("./node_modules/react-transition-group/esm/Transition.js"),l=s("./node_modules/react/jsx-runtime.js");const c={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},d={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class u extends a.PureComponent{render(){const{content:e,show:t,placement:s,onMouseEnter:u,onMouseLeave:p,className:h,wrapperClassName:g,renderArrow:m,referenceElement:f}=this.props;return(0,l.jsx)(n.dK,{children:(0,l.jsx)(o.ZP,{in:t,timeout:100,mountOnEnter:!0,unmountOnExit:!0,children:t=>(0,l.jsx)(r.h,{children:(0,l.jsx)(i.r,{placement:s,referenceElement:f,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}],children:({ref:s,style:n,placement:i,arrowProps:r,update:o})=>(0,l.jsx)("div",{onMouseEnter:u,onMouseLeave:p,ref:s,style:Object.assign({},n,c,d[t]),"data-placement":i,className:`${g}`,children:(0,l.jsxs)("div",{className:h,children:["string"==typeof e&&e,a.isValidElement(e)&&a.cloneElement(e),"function"==typeof e&&e({updatePopperPosition:o}),m&&m({arrowProps:r,placement:i})]})})})})})})}}},"./packages/grafana-ui/src/components/Tooltip/PopoverController.tsx":(e,t,s)=>{"use strict";s.d(t,{D:()=>i});var a=s("./node_modules/react/index.js");function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i extends a.Component{constructor(...e){super(...e),n(this,"hideTimeout",void 0),n(this,"state",{show:!1}),n(this,"showPopper",(()=>{clearTimeout(this.hideTimeout),this.setState({show:!0})})),n(this,"hidePopper",(()=>{this.hideTimeout=setTimeout((()=>{this.setState({show:!1})}),this.props.hideAfter)}))}render(){const{children:e,content:t,placement:s="auto"}=this.props,{show:a}=this.state;return e(this.showPopper,this.hidePopper,{show:a,placement:s,content:t})}}},"./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx":(e,t,s)=>{"use strict";s.d(t,{u:()=>l});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/Tooltip/Popover.tsx"),i=s("./packages/grafana-ui/src/components/Tooltip/PopoverController.tsx"),r=s("./node_modules/react/jsx-runtime.js");const o=["children","theme"];const l=a.memo((e=>{let{children:t,theme:s}=e,l=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,o);const c=(0,a.createRef)(),d="popper__background"+(s?" popper__background--"+s:"");return(0,r.jsx)(i.D,Object.assign({},l,{children:(e,s,i)=>{const o=Object.assign({},i,{show:void 0!==l.show?l.show:i.show});return(0,r.jsxs)(r.Fragment,{children:[c.current&&l.content&&(0,r.jsx)(n.J,Object.assign({},o,{onMouseEnter:e,onMouseLeave:s,referenceElement:c.current,wrapperClassName:"popper",className:d,renderArrow:({arrowProps:e,placement:t})=>(0,r.jsx)("div",Object.assign({className:"popper__arrow","data-placement":t},e))})),a.cloneElement(t,{ref:c,onMouseEnter:e,onMouseLeave:s})]})}}))}));l.displayName="Tooltip"},"./packages/grafana-ui/src/components/Typeahead/PartialHighlighter.tsx":(e,t,s)=>{"use strict";s.d(t,{H:()=>i});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react/jsx-runtime.js");const i=e=>{let{highlightParts:t,text:s,highlightClassName:i}=e;if(null==t||!t.length)return null;let r=[],o=function(e,t){const s=[];return e.forEach((e=>{s.push(e.start,e.end+1)})),0!==s[0]&&s.unshift(0),s[s.length-1]!==t&&s.push(t),s}(t,s.length),l=0===t[0].start;for(let e=1;e<o.length;e++){let t=o[e-1],n=o[e];r.push((0,a.createElement)(l?"mark":"span",{key:e-1,children:s.substring(t,n),className:l?i:void 0})),l=!l}return(0,n.jsx)("div",{children:r})}},"./packages/grafana-ui/src/components/UnitPicker/UnitPicker.tsx":(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/Cascader/Cascader.tsx"),i=s("./packages/grafana-data/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");function o(e){return`Custom unit: ${e}`}class l extends a.PureComponent{constructor(...e){var t,s,a;super(...e),a=e=>{this.props.onChange(e.value)},(s="onChange")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}render(){const{value:e,width:t}=this.props;let s;const a=(0,i.getValueFormats)().map((t=>{const a=t.submenu.map((t=>{const a={label:t.text,value:t.value};return t.value===e&&(s=a),a}));return{label:t.text,value:t.text,items:a}}));return e&&!s&&(s={value:e,label:e}),(0,r.jsx)(n.v,{width:t,initialValue:s&&s.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:o,options:a,placeholder:"Choose",onSelect:this.props.onChange})}}},"./packages/grafana-ui/src/components/ValuePicker/ValuePicker.tsx":(e,t,s)=>{"use strict";s.d(t,{b:()=>c});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/components/Button/index.ts"),i=s("./packages/grafana-ui/src/components/Select/Select.tsx"),r=s("./packages/grafana-ui/src/components/Button/FullWidthButtonContainer.tsx"),o=s("./packages/grafana-e2e-selectors/src/index.ts"),l=s("./node_modules/react/jsx-runtime.js");function c({label:e,icon:t,options:s,onChange:c,variant:d,size:u="sm",isFullWidth:p=!0,menuPlacement:h}){const[g,m]=(0,a.useState)(!1),f=(0,l.jsx)(n.zx,{size:u||"sm",icon:t||"plus",onClick:()=>m(!0),variant:d,"aria-label":o.wl.components.ValuePicker.button(e),children:e});return(0,l.jsxs)(l.Fragment,{children:[!g&&(p?(0,l.jsx)(r.f,{children:f}):f),g&&(0,l.jsx)("span",{children:(0,l.jsx)(i.Ph,{menuShouldPortal:!0,placeholder:e,options:s,"aria-label":o.wl.components.ValuePicker.select(e),isOpen:!0,onCloseMenu:()=>m(!1),autoFocus:!0,onChange:e=>{m(!1),c(e)},menuPlacement:h})})]})}},"./packages/grafana-ui/src/components/VizLayout/VizLayout.tsx":(e,t,s)=>{"use strict";s.d(t,{A:()=>r});s("./node_modules/react/index.js");var a=s("./node_modules/react-use/esm/useMeasure.js"),n=s("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),i=s("./node_modules/react/jsx-runtime.js");const r=({width:e,height:t,legend:s,children:r})=>{var o,l;const c={display:"flex",width:`${e}px`,height:`${t}px`},[d,u]=(0,a.Z)();if(!s)return(0,i.jsx)("div",{style:c,children:r(e,t)});const{placement:p,maxHeight:h="35%",maxWidth:g="60%"}=s.props;let m=null;const f={};switch(p){case"bottom":c.flexDirection="column",f.maxHeight=h,u&&(m={width:e,height:t-u.height});break;case"right":c.flexDirection="row",f.maxWidth=g,u&&(m={width:e-u.width,height:t})}return 0===(null===(o=m)||void 0===o?void 0:o.width)&&(m.width=e),0===(null===(l=m)||void 0===l?void 0:l.height)&&(m.height=t),(0,i.jsxs)("div",{style:c,children:[(0,i.jsx)("div",{style:{flexGrow:2},children:m&&r(m.width,m.height)}),(0,i.jsx)("div",{style:f,ref:d,children:(0,i.jsx)(n.$,{hideHorizontalTrack:!0,children:s})})]})};r.Legend=({children:e})=>(0,i.jsx)(i.Fragment,{children:e})},"./packages/grafana-ui/src/components/index.ts":(e,t,s)=>{"use strict";s.d(t,{bZj:()=>_r.b,Uxq:()=>_r.AlertVariant,O5T:()=>rc,M8I:()=>Ft.M8,qbS:()=>Ft.qb,Cts:()=>Xo,JVe:()=>j.BadgeColor,u8S:()=>j.BadgeProps,xfx:()=>an,QHm:()=>sn,w6I:()=>Ci.w6,pcF:()=>Ci.pc,IGx:()=>Ci.IG,apN:()=>Ci.ap,jGm:()=>Ci.jG,dI4:()=>Ap,zxk:()=>L.zx,OSz:()=>oe,hE2:()=>L.hE,doH:()=>Me,Wu3:()=>L.ButtonVariant,_d:()=>Bo,Zbd:()=>Ou,_L7:()=>Cu,jUt:()=>N.CardContainerProps,dwY:()=>O.Props,vTp:()=>se.v,iNw:()=>se.CascaderOption,WTJ:()=>Al,XZJ:()=>kd,LVf:()=>ye.L,mUV:()=>te,pq4:()=>wa,EGH:()=>ja.MonacoOptions,L0D:()=>ja.CodeEditorSuggestionItem,kwZ:()=>ja.k,s2J:()=>Hr,UO1:()=>qr,zH8:()=>he.zH,Bw9:()=>ge.B,kp4:()=>ge.ColorValueEditorProps,puI:()=>V,sm4:()=>da,feC:()=>u.ConfirmModalProps,W20:()=>Yi.W2,xVl:()=>Ki,CMg:()=>h.ContextMenuProps,ybu:()=>Ur,ATJ:()=>Si.A,$TT:()=>W.$,kuP:()=>po,vmb:()=>Ho.v,V5N:()=>Wo,dIl:()=>qo.d,E1E:()=>nc,Mtg:()=>Fs,kse:()=>l.DatePickerProps,d2U:()=>Ls,Qiu:()=>c.DatePickerWithInputProps,xZq:()=>zs,m1X:()=>z,dys:()=>Pc,isR:()=>T.DropzoneFile,jye:()=>mp,KBh:()=>fe,SVk:()=>ul,z4Q:()=>pl,M_3:()=>k.ErrorBoundaryAlertProps,X2N:()=>ll,TZ:()=>Qu,jKV:()=>sp.j,nTT:()=>oc.n,aXU:()=>nl,ZjK:()=>sl,gNt:()=>He.g,F26:()=>Ld,Zjt:()=>Po,C3N:()=>Pd,S0X:()=>wd.S,YoT:()=>Xd,A_i:()=>eu,G1O:()=>T.FileDropzoneProps,K$w:()=>Kd,wEv:()=>C.FileListItemProps,p0f:()=>Hd,HSx:()=>zd,BmQ:()=>oa,l09:()=>Yc,YE$:()=>S.FormInputSize,WRj:()=>Xa.W,fiX:()=>Fo.f,aCY:()=>Ii,kJb:()=>ir,wvn:()=>tr,bpR:()=>sr,drZ:()=>sp.d,aSI:()=>P.GraphNGLegendEvent,E2j:()=>sp.GraphNGProps,UNL:()=>Vr,pK4:()=>y.GraphSeriesTogglerAPI,UAG:()=>Dr,LhK:()=>Yi.Lh,JO$:()=>M.J,hU:()=>F.h,gZk:()=>F.IconButtonVariant,vDh:()=>Ko,_9$:()=>Pl,Z6t:()=>jc,cJ0:()=>ml,W4p:()=>Tl,mOU:()=>Ad,x$6:()=>Ud.x,IIB:()=>Ge.I,gs_:()=>Jc,gwK:()=>In,uC:()=>Nn,__J:()=>bd._,vw6:()=>$p,Gdq:()=>ql.G,DeQ:()=>yd,rUS:()=>Od,Qjf:()=>L.Qj,aVo:()=>Gs.a,u3Z:()=>ue,c02:()=>n.LoadingPlaceholderProps,jwW:()=>Qr,QNy:()=>Kr.Q,w3v:()=>Oo,JxD:()=>Wu,v2r:()=>Ce,kSQ:()=>Ji,VO7:()=>g.MenuGroupProps,sNh:()=>Ne,T4d:()=>r.MenuItemProps,oOs:()=>g.MenuItemsGroup,ZyH:()=>i.MenuProps,u_l:()=>ca.u,xBx:()=>Sa.x,Y0X:()=>Aa,QEF:()=>Ia,Han:()=>Oa,JYt:()=>Da,$iA:()=>Fa,d$d:()=>ja.Monaco,rEm:()=>ja.MonacoEditor,NUq:()=>Ft.NU,Ytm:()=>Gc,wYs:()=>Bc,k8K:()=>d.OnTagClick,XDu:()=>$a,tlE:()=>ea,fmR:()=>br,qbG:()=>lr,QEv:()=>f.ErrorIndicatorProps,E3Q:()=>or.T,oP_:()=>or.LoadingIndicatorProps,vIs:()=>b.PanelChromeProps,swS:()=>v.PanelChromeType,QPw:()=>mr.PanelContext,_wC:()=>mr._w,bbH:()=>mr.bb,jX4:()=>b.PanelPadding,lNn:()=>Hu,isz:()=>tp.PlotSelection,xyZ:()=>tp.PlotTooltipInterpolator,oDb:()=>Eu,bvM:()=>I.PluginSignatureBadgeProps,J2e:()=>H.J,yky:()=>U.PopoverContent,Dh5:()=>q.D,h_i:()=>G.h,qjJ:()=>va,SYO:()=>Bd.S,U2U:()=>$c,dPd:()=>Le,xpf:()=>yu,wf3:()=>Mi.wf,fqL:()=>W.ScrollbarPosition,XX7:()=>uc,VXm:()=>fc,Xrl:()=>yc,fT$:()=>Cc,VBk:()=>hc,PhF:()=>Ft.Ph,Y3l:()=>qc,spA:()=>he.sp,jx7:()=>me.jx,qRd:()=>me.qR,FiV:()=>_i,cS8:()=>zi,VbF:()=>p.SeriesTableProps,VtB:()=>Bi,ha2:()=>p.SeriesTableRowProps,YvT:()=>rr,R8q:()=>fr,FOj:()=>qa,U_X:()=>w.SingleStatBaseOptions,R9v:()=>lc.R,iRW:()=>Dc,pn$:()=>zc,$jN:()=>ce.$,mMX:()=>xe.m,gQx:()=>_c,Ai9:()=>Lc,rsf:()=>Ud.r,sHf:()=>$l,OK9:()=>Na.O,DJl:()=>a.TabConfig,I5H:()=>ki,WLI:()=>K,iA_:()=>pi,h2q:()=>Za.h2,wtM:()=>xi,JAu:()=>Za.TableSortByFieldState,J_V:()=>Ta,Vp9:()=>aa,PST:()=>ia,B7H:()=>Ks,Kx8:()=>gi,yAm:()=>Ts,K4x:()=>ou,XcI:()=>ys,WKf:()=>o.TimeRangePickerProps,pfI:()=>cp,OkK:()=>Bt,hAV:()=>L.hA,RNy:()=>L.RN,ua7:()=>U.u,iiT:()=>Xu,N$r:()=>zu.N,UBi:()=>Bu.U,ffP:()=>Bu.UPlotConfigPrepFn,nAu:()=>ve.n,b59:()=>Xc.b,wcK:()=>Yi.wc,AYi:()=>Rr.A,C9i:()=>Rr.VizLayoutComponentType,Lxb:()=>Rr.VizLayoutLegendProps,wIc:()=>Rr.VizLayoutProps,ltB:()=>Fr,Jn8:()=>m.VizLegendItem,eMh:()=>Or,QBm:()=>Lr,M9j:()=>x.VizRepeaterRenderValueProps,I5C:()=>Li,S$u:()=>Di,zH1:()=>Uo,K2:()=>Gu,Rbc:()=>Yu,PRL:()=>Vo,o5O:()=>$e,ivH:()=>fd,LyM:()=>Iu,SYZ:()=>Cd,hIY:()=>Yr.h,qVi:()=>Vu,sVu:()=>Hi,mcr:()=>Gi,NFT:()=>ja.monacoTypes,RnT:()=>hp.R,JpF:()=>Ed.Z,FMl:()=>_d,rDf:()=>Ro,ZHc:()=>Eo,zrC:()=>up,R9P:()=>mr.R9,ThK:()=>ka,PfY:()=>hl});var a={};s.r(a),s.d(a,{W:()=>K});var n={};s.r(n),s.d(n,{u:()=>ue});var i={};s.r(i),s.d(i,{v:()=>Ce});var r={};s.r(r),s.d(r,{s:()=>Ne});var o={};s.r(o),s.d(o,{sU:()=>vs,Xc:()=>ys});var l={};s.r(l),s.d(l,{M:()=>Fs});var c={};s.r(c),s.d(c,{d:()=>Ls});var d={};s.r(d),s.d(d,{V:()=>aa});var u={};s.r(u),s.d(u,{s:()=>da});var p={};s.r(p),s.d(p,{c:()=>zi,V:()=>Bi});var h={};s.r(h),s.d(h,{x:()=>Ki});var g={};s.r(g),s.d(g,{k:()=>Ji});var m={};s.r(m),s.d(m,{Y:()=>rr});var f={};s.r(f),s.d(f,{g:()=>lr});var b={};s.r(b),s.d(b,{f:()=>dr});var v={};s.r(v),s.d(v,{fm:()=>br,qb:()=>lr,QE:()=>f.ErrorIndicatorProps,E3:()=>or.T,oP:()=>or.LoadingIndicatorProps,vI:()=>b.PanelChromeProps,QP:()=>mr.PanelContext,_w:()=>mr._w,bb:()=>mr.bb,jX:()=>b.PanelPadding,R8:()=>fr,R9:()=>mr.R9});var x={};s.r(x),s.d(x,{Q:()=>Lr});var y={};s.r(y),s.d(y,{U:()=>Vr});var w={};s.r(w),s.d(w,{PR:()=>Vo,rD:()=>Ro,ZH:()=>Eo});var j={};s.r(j),s.d(j,{C:()=>Xo});var k={};s.r(k),s.d(k,{SV:()=>ul,z4:()=>pl,Pf:()=>hl});var S={};s.r(S);var C={};s.r(C),s.d(C,{K:()=>Kd});var T={};s.r(T),s.d(T,{Y:()=>Xd,A:()=>eu});var N={};s.r(N),s.d(N,{_:()=>Cu});var O={};s.r(O),s.d(O,{Z:()=>Ou,L:()=>Iu});var I={};s.r(I),s.d(I,{o:()=>Eu});var P={};s.r(P);var M=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),F=s("./packages/grafana-ui/src/components/IconButton/IconButton.tsx"),A=s("./node_modules/react/index.js"),D=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),$=s("./packages/grafana-ui/src/themes/index.ts"),L=s("./packages/grafana-ui/src/components/Button/index.ts"),E=s("./node_modules/react/jsx-runtime.js");function R(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class _ extends A.PureComponent{constructor(...e){super(...e),R(this,"state",{showConfirm:!1}),R(this,"onClickButton",(e=>{e&&e.preventDefault(),this.setState({showConfirm:!0}),this.props.onClick&&this.props.onClick()})),R(this,"onClickCancel",(e=>{e&&e.preventDefault(),this.setState({showConfirm:!1}),this.props.onCancel&&this.props.onCancel()})),R(this,"onConfirm",(e=>{e&&e.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}))}render(){const{theme:e,className:t,size:s,disabled:a,confirmText:n,confirmVariant:i,children:r}=this.props,o=B(e),l=(0,D.cx)(t,this.state.showConfirm?o.buttonHide:o.buttonShow,a&&o.buttonDisabled),c=(0,D.cx)(o.confirmButton,this.state.showConfirm?o.confirmButtonShow:o.confirmButtonHide),d=a?()=>{}:this.onClickButton;return(0,E.jsxs)("span",{className:o.buttonContainer,children:["string"==typeof r?(0,E.jsx)("span",{className:l,children:(0,E.jsx)(L.zx,{size:s,fill:"text",onClick:d,children:r})}):(0,E.jsx)("span",{className:l,onClick:d,children:r}),(0,E.jsxs)("span",{className:c,children:[(0,E.jsx)(L.zx,{size:s,fill:"text",onClick:this.onClickCancel,children:"Cancel"}),(0,E.jsx)(L.zx,{size:s,variant:i,onClick:this.onConfirm,children:n})]})]})}}const V=(0,$.Zz)(_),B=(0,$.Bb)((e=>({buttonContainer:D.css`
      direction: rtl;
      display: flex;
      align-items: center;
    `,buttonDisabled:D.css`
      text-decoration: none;
      color: ${e.colors.text};
      opacity: 0.65;
      cursor: not-allowed;
      pointer-events: none;
    `,buttonShow:D.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:D.css`
      opacity: 0;
      transition: opacity 0.1s ease;
      z-index: 0;
    `,confirmButton:D.css`
      align-items: flex-start;
      background: ${e.colors.bg1};
      display: flex;
      overflow: hidden;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:D.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:D.css`
      opacity: 0;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in;
      transform: translateX(100px);
    `})));V.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},V.displayName="ConfirmButton";const z=({size:e,disabled:t,onConfirm:s,"aria-label":a})=>(0,E.jsx)(V,{confirmText:"Delete",confirmVariant:"destructive",size:e||"md",disabled:t,onConfirm:s,children:(0,E.jsx)(L.zx,{"aria-label":a,variant:"destructive",icon:"times",size:e||"sm"})});var U=s("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),q=s("./packages/grafana-ui/src/components/Tooltip/PopoverController.tsx"),H=s("./packages/grafana-ui/src/components/Tooltip/Popover.tsx"),G=s("./packages/grafana-ui/src/components/Portal/Portal.tsx"),W=s("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),Z=s("./packages/grafana-ui/src/index.ts");const Q=(0,$.Bb)((e=>({container:D.css`
      height: 100%;
    `,tabContent:D.css`
      padding: ${e.spacing(2)};
      background-color: ${e.colors.background.primary};
      height: 100%;
    `,close:D.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${e.typography.size.lg};
    `,tabs:D.css`
      padding-top: ${e.spacing(1)};
      border-color: ${e.colors.border.weak};
      ul {
        margin-left: ${e.spacing(2)};
      }
    `})));function K(e){var t,s;const[a,n]=(0,A.useState)(e.tabs.some((t=>t.value===e.defaultTab))?e.defaultTab:null===(t=e.tabs)||void 0===t?void 0:t[0].value),{tabs:i,onClose:r,closeIconTooltip:o}=e,l=(0,$.l4)(),c=Q(l);return(0,E.jsxs)("div",{className:c.container,children:[(0,E.jsxs)(Z.TabsBar,{className:c.tabs,children:[i.map((e=>(0,E.jsx)(Z.Tab,{label:e.label,active:e.value===a,onChangeTab:()=>{n(e.value)},icon:e.icon},e.value))),(0,E.jsx)(Z.IconButton,{className:c.close,onClick:r,name:"times",title:null!=o?o:"Close"})]}),(0,E.jsx)(Z.CustomScrollbar,{autoHeightMin:"100%",children:(0,E.jsx)(Z.TabContent,{className:c.tabContent,children:null===(s=i.find((e=>e.value===a)))||void 0===s?void 0:s.content})})]})}var Y=s("./node_modules/clipboard/dist/clipboard.js"),J=s.n(Y);const X=["getText","onClipboardCopy","onClipboardError","children"];function ee(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class te extends A.PureComponent{constructor(...e){super(...e),ee(this,"clipboard",void 0),ee(this,"elem",void 0),ee(this,"setRef",(e=>{this.elem=e}))}componentDidMount(){const{getText:e,onClipboardCopy:t,onClipboardError:s}=this.props;this.clipboard=new(J())(this.elem,{text:()=>e()}),this.clipboard.on("success",(e=>{t&&t(e)})),this.clipboard.on("error",(e=>{s&&s(e)}))}componentWillUnmount(){this.clipboard.destroy()}render(){const e=this.props,{children:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,X);return(0,E.jsx)(L.zx,Object.assign({},s,{ref:this.setRef,children:t}))}}var se=s("./packages/grafana-ui/src/components/Cascader/Cascader.tsx"),ae=s("./node_modules/rc-cascader/es/index.js"),ne=s("./packages/grafana-ui/src/components/Cascader/optionMappings.ts");const ie=["onChange","className","loadData","icon"];const re=(0,$.Bb)((e=>({popup:D.css`
      label: popup;
      z-index: ${e.zIndex.dropdown};
    `,icons:{right:D.css`
        margin: 1px 0 0 4px;
      `,left:D.css`
        margin: -1px 4px 0 0;
      `}}))),oe=e=>{const{onChange:t,className:s,loadData:a,icon:n}=e,i=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,ie),r=(0,$.l4)(),o=re(r);return(0,E.jsx)(ae.Z,Object.assign({onChange:(0,ne.K)(t),loadData:(0,ne.p)(a),popupClassName:o.popup},i,{expandIcon:null,children:(0,E.jsxs)("button",{className:(0,D.cx)("gf-form-label",s),disabled:e.disabled,children:[n&&(0,E.jsx)(M.J,{name:n,className:o.icons.left}),e.children,(0,E.jsx)(M.J,{name:"angle-down",className:o.icons.right})]})}))};oe.displayName="ButtonCascader";var le,ce=s("./packages/grafana-ui/src/components/Spinner/Spinner.tsx");const de=["text","className"];const ue=e=>{let{text:t,className:s}=e,a=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,de);const n=(0,$.yK)(pe);return(0,E.jsxs)("div",Object.assign({className:(0,D.cx)(n.container,s)},a,{children:[t," ",le||(le=(0,E.jsx)(ce.$,{inline:!0}))]}))},pe=e=>({container:D.css`
      margin-bottom: ${e.spacing.xl};
    `});var he=s("./packages/grafana-ui/src/components/ColorPicker/ColorPicker.tsx"),ge=s("./packages/grafana-ui/src/components/OptionsUI/color.tsx"),me=s("./packages/grafana-ui/src/components/ColorPicker/SeriesColorPickerPopover.tsx");const fe=({children:e})=>{const t=(0,$.wW)(be);return(0,E.jsx)("div",{className:t.container,children:e})},be=e=>({container:D.css`
      border-left: 3px solid ${e.colors.info.main};
      background-color: ${e.colors.background.secondary};
      padding: ${e.spacing(2)};
      min-width: 350px;
      border-radius: ${e.shape.borderRadius(2)};
      margin-bottom: ${e.spacing(4)};
    `});var ve=s("./packages/grafana-ui/src/components/UnitPicker/UnitPicker.tsx"),xe=s("./packages/grafana-ui/src/components/StatsPicker/StatsPicker.tsx"),ye=s("./packages/grafana-ui/src/components/ClickOutsideWrapper/ClickOutsideWrapper.tsx"),we=s("./packages/grafana-ui/src/themes/ThemeContext.tsx"),je=s("./node_modules/react-use/esm/useEffectOnce.js");const ke=["header","children","ariaLabel","onOpen","onKeyDown"];const Se=(e,t)=>(e%t+t)%t,Ce=A.forwardRef(((e,t)=>{let{header:s,children:a,ariaLabel:n,onOpen:i,onKeyDown:r}=e,o=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,ke);const l=(0,$.wW)(Te),[c,d]=(0,A.useState)(-1),u=(0,A.useRef)(null);(0,A.useImperativeHandle)(t,(()=>u.current)),(0,A.useEffect)((()=>{var e,t;const s=null==u||null===(e=u.current)||void 0===e?void 0:e.querySelectorAll('[data-role="menuitem"]');null==s||null===(t=s[c])||void 0===t||t.focus(),null==s||s.forEach(((e,t)=>{e.tabIndex=t===c?0:-1}))}),[u,c]),(0,je.Z)((()=>{var e;const t=null==u||null===(e=u.current)||void 0===e?void 0:e.querySelector('[data-role="menuitem"]');t&&(t.tabIndex=0),null==i||i(d)}));return(0,E.jsxs)("div",Object.assign({},o,{ref:u,className:l.wrapper,role:"menu","aria-label":n,onKeyDown:e=>{var t,s;const a=null!==(t=null==u||null===(s=u.current)||void 0===s?void 0:s.querySelectorAll('[data-role="menuitem"]').length)&&void 0!==t?t:0;switch(e.key){case"ArrowUp":e.preventDefault(),e.stopPropagation(),d(Se(c-1,a));break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),d(Se(c+1,a));break;case"Home":e.preventDefault(),e.stopPropagation(),d(0);break;case"End":e.preventDefault(),e.stopPropagation(),d(a-1)}null==r||r(e)},onFocus:()=>{-1===c&&d(0)},children:[s&&(0,E.jsx)("div",{className:l.header,children:s}),a]}))}));Ce.displayName="Menu";const Te=e=>({header:D.css`
      padding: ${e.spacing(.5,.5,1,.5)};
      border-bottom: 1px solid ${e.colors.border.weak};
    `,wrapper:D.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      display: inline-block;
      border-radius: ${e.shape.borderRadius()};
    `}),Ne=A.memo(A.forwardRef((({url:e,icon:t,label:s,ariaLabel:a,target:n,onClick:i,className:r,active:o,tabIndex:l=-1},c)=>{const d=(0,$.wW)(Oe),u=(0,D.cx)({[d.item]:!0,[d.activeItem]:o},r),p=void 0===e?"button":"a";return(0,E.jsxs)(p,{target:n,className:u,rel:"_blank"===n?"noopener noreferrer":void 0,href:e,onClick:i?e=>{e.ctrlKey||e.metaKey||e.shiftKey||!i||(e.preventDefault(),i(e))}:void 0,role:void 0===e?"menuitem":void 0,"data-role":"menuitem",ref:c,"aria-label":a,tabIndex:l,children:[t&&(0,E.jsx)(M.J,{name:t,className:d.icon,"aria-hidden":!0})," ",s]})})));Ne.displayName="MenuItem";const Oe=e=>({item:D.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${e.colors.text.primary};
      display: flex;
      padding: 5px 12px 5px 10px;
      margin: 0;
      border: none;
      width: 100%;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${e.colors.action.hover};
        color: ${e.colors.text.primary};
        text-decoration: none;
      }
    `,activeItem:D.css`
      background: ${e.colors.action.selected};
    `,icon:D.css`
      opacity: 0.7;
      margin-right: 10px;
      color: ${e.colors.text.secondary};
    `}),Ie=["className","options","value","onChange","narrow","variant"];const Pe=e=>{const{className:t,options:s,value:a,onChange:n,narrow:i,variant:r}=e,o=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Ie),[l,c]=(0,A.useState)(!1),d=(0,we.wW)(Fe);return(0,E.jsxs)(L.hE,{className:d.wrapper,children:[(0,E.jsx)(L.hA,Object.assign({className:t,isOpen:l,onClick:e=>{e.stopPropagation(),e.preventDefault(),c(!l)},narrow:i,variant:r},o,{children:(null==a?void 0:a.label)||(null==a?void 0:a.value)})),l&&(0,E.jsx)("div",{className:d.menuWrapper,children:(0,E.jsx)(ye.L,{onClick:()=>{c(!1)},parent:document,children:(0,E.jsx)(Ce,{children:s.map((e=>(0,E.jsx)(Ne,{label:e.label||e.value,onClick:()=>(e=>{n(e),c(!1)})(e),active:e.value===(null==a?void 0:a.value)},`${e.value}`)))})})})]})};Pe.displayName="ButtonSelect";const Me=A.memo(Pe),Fe=e=>({wrapper:D.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:D.css`
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      top: ${e.spacing(4)};
      right: 0;
    `});var Ae=s("./packages/grafana-e2e-selectors/src/index.ts");function De(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $e=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class Le extends A.PureComponent{constructor(e){super(e),De(this,"onChangeSelect",(e=>{const{onIntervalChanged:t}=this.props;t&&t(e.value)}))}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":"default"}render(){const{onRefresh:e,intervals:t,tooltip:s,value:a,text:n,isLoading:i,noIntervalPicker:r}=this.props,o=a||"",l=this.getVariant(),c=function({intervals:e=$e}={}){const t=(e||$e).map((e=>({label:e,value:e})));return t.unshift(Le.offOption),t}({intervals:t});let d=c.find((({value:e})=>e===o))||Le.offOption;return d.label===Le.offOption.label&&(d={value:""}),(0,E.jsxs)(L.hE,{className:"refresh-picker",children:[(0,E.jsx)(L.hA,{tooltip:s,onClick:e,variant:l,icon:i?"fa fa-spinner":"sync","aria-label":Ae.wl.components.RefreshPicker.runButton,children:n}),!r&&(0,E.jsx)(Me,{value:d,options:c,onChange:this.onChangeSelect,variant:l,"aria-label":Ae.wl.components.RefreshPicker.intervalButton})]})}}De(Le,"offOption",{label:"Off",value:""}),De(Le,"liveOption",{label:"Live",value:"LIVE"}),De(Le,"isLive",(e=>e===Le.liveOption.value));var Ee=s("./packages/grafana-data/src/index.ts"),Re=s("./node_modules/react-use/esm/useMedia.js");const _e=(e,t)=>Ee.rangeUtil.convertRawToRange({from:e.from,to:e.to},t),Ve=(0,$.Bb)((e=>({text:D.css`
      font-size: ${e.typography.size.md};
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.formLabel};
      margin: 0;
      display: flex;
    `}))),Be=(0,A.memo)((({children:e})=>{const t=(0,$.Fg)(),s=Ve(t);return(0,E.jsx)("h3",{className:s.text,children:e})}));Be.displayName="TimePickerTitle";var ze,Ue,qe,He=s("./packages/grafana-ui/src/components/Forms/Field.tsx"),Ge=s("./packages/grafana-ui/src/components/Input/Input.tsx"),We=s("./node_modules/react-calendar/dist/entry.nostyle.js");const Ze=(0,$.Bb)(((e,t=!1)=>({container:D.css`
      top: -1px;
      position: absolute;
      ${t?"left":"right"}: 544px;
      box-shadow: ${e.shadows.z3};
      background-color: ${e.colors.background.primary};
      z-index: -1;
      border: 1px solid ${e.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${e.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${t?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${e.colors.border.weak};
      }
    `,modal:D.css`
      position: fixed;
      top: 20%;
      left: 25%;
      width: 100%;
      z-index: ${e.zIndex.modal};
    `,content:D.css`
      margin: 0 auto;
      width: 268px;
    `,backdrop:D.css`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: #202226;
      opacity: 0.7;
      z-index: ${e.zIndex.modalBackdrop};
      text-align: center;
    `}))),Qe=(0,$.Bb)((e=>({container:D.css`
      background-color: ${e.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:D.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `}))),Ke=(0,$.Bb)((e=>({title:D.css`
      color: ${e.colors.text};
      background-color: ${e.colors.background.primary};
      font-size: ${e.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }
    `,body:D.css`
      z-index: ${e.zIndex.modal};
      background-color: ${e.colors.background.primary};
      width: 268px;

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${e.colors.text};
        border: 0;
        font-weight: ${e.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${e.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${e.colors.primary.contrastText};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${e.colors.primary.contrastText};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.primary.main};

        abbr {
          background-color: ${e.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}))),Ye=(0,$.Bb)((e=>({container:D.css`
      background-color: ${e.colors.background.primary};
      display: flex;
      justify-content: space-between;
      padding: 7px;
    `}))),Je=e=>e.stopPropagation(),Xe=(0,A.memo)((e=>{const t=(0,$.l4)(),s=Ze(t,e.isReversed),{isOpen:a,isFullscreen:n}=e;return a?n?(0,E.jsx)(ye.L,{onClick:e.onClose,children:(0,E.jsx)("section",{className:s.container,onClick:Je,"aria-label":Ae.wl.components.TimePicker.calendar,children:(0,E.jsx)(tt,Object.assign({},e))})}):(0,E.jsxs)(G.h,{children:[(0,E.jsx)("div",{className:s.modal,onClick:Je,children:(0,E.jsxs)("div",{className:s.content,"aria-label":Ae.wl.components.TimePicker.calendar,children:[(0,E.jsx)(et,Object.assign({},e)),(0,E.jsx)(tt,Object.assign({},e)),(0,E.jsx)(st,Object.assign({},e))]})}),(0,E.jsx)("div",{className:s.backdrop,onClick:Je})]}):null}));Xe.displayName="TimePickerCalendar";const et=(0,A.memo)((({onClose:e})=>{const t=(0,$.l4)(),s=Ye(t);return(0,E.jsxs)("div",{className:s.container,children:[ze||(ze=(0,E.jsx)(Be,{children:"Select a time range"})),(0,E.jsx)(M.J,{name:"times",onClick:e})]})}));et.displayName="Header";const tt=(0,A.memo)((({onChange:e,from:t,to:s,timeZone:a})=>{const n=function(e,t,s=new Date){const a=e.toDate(),n=t.toDate(),i=(0,Ee.dateTime)(a).isValid()?a:s,r=(0,Ee.dateTime)(n).isValid()?n:s;if(i>r)return[r,i];return[i,r]}(t,s),i=(0,$.l4)(),r=function(e,t){return(0,A.useCallback)((s=>{if(!Array.isArray(s))return console.error("onCalendarChange: should be run in selectRange={true}");const a=(0,Ee.dateTimeParse)(at(s[0]),{timeZone:t}),n=(0,Ee.dateTimeParse)(at(s[1]),{timeZone:t});e(a,n)}),[e,t])}(e,a),o=Ke(i);return(0,E.jsx)(We.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:o.body,tileClassName:o.title,value:n,nextLabel:Ue||(Ue=(0,E.jsx)(M.J,{name:"angle-right"})),prevLabel:qe||(qe=(0,E.jsx)(M.J,{name:"angle-left"})),onChange:r,locale:"en"})}));tt.displayName="Body";const st=(0,A.memo)((({onClose:e,onApply:t})=>{const s=(0,$.l4)(),a=Qe(s);return(0,E.jsxs)("div",{className:a.container,children:[(0,E.jsx)(L.zx,{className:a.apply,onClick:t,children:"Apply time range"}),(0,E.jsx)(L.zx,{variant:"secondary",onClick:e,children:"Cancel"})]})}));function at(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}var nt;st.displayName="Footer";const it='Please enter a past date or "now"',rt='"From" can\'t be after "To"',ot=e=>{const{value:t,isFullscreen:s=!1,timeZone:a,onApply:n,isReversed:i,fiscalYearStartMonth:r}=e,[o,l]=lt(t.raw.from,t.raw.to,a),c=(0,Z.useStyles2)(ut),[d,u]=(0,A.useState)(o),[p,h]=(0,A.useState)(l),[g,m]=(0,A.useState)(!1);(0,A.useEffect)((()=>{const[e,s]=lt(t.raw.from,t.raw.to,a);u(e),h(s)}),[t.raw.from,t.raw.to,a]);const f=(0,A.useCallback)((e=>{e.preventDefault(),m(!0)}),[m]),b=(0,A.useCallback)((e=>{s&&f(e)}),[s,f]),v=(0,A.useCallback)((e=>{if(e.preventDefault(),p.invalid||d.invalid)return;const t={from:d.value,to:p.value},s=Ee.rangeUtil.convertRawToRange(t,a,r);n(s)}),[d.invalid,d.value,n,a,p.invalid,p.value,r]),x=(0,A.useCallback)(((e,t)=>{const[s,n]=lt(e,t,a);u(s),h(n)}),[a]),y=Ee.rangeUtil.convertRawToRange({from:"now/fy",to:"now/fy"},a,r),w=(0,E.jsx)("div",{className:c.tooltip,children:Ee.rangeUtil.isFiscal(t)?(0,E.jsx)(U.u,{content:`Fiscal year: ${y.from.format("MMM-DD")} - ${y.to.format("MMM-DD")}`,children:nt||(nt=(0,E.jsx)(M.J,{name:"info-circle"}))}):null}),j=s?null:(0,E.jsx)(L.zx,{icon:"calendar-alt",variant:"secondary",onClick:f});return(0,E.jsxs)("div",{"aria-label":"Absolute time ranges",children:[(0,E.jsxs)("div",{className:c.fieldContainer,children:[(0,E.jsx)(He.g,{label:"From",invalid:d.invalid,error:d.errorMessage,children:(0,E.jsx)(Ge.I,{onClick:e=>e.stopPropagation(),onFocus:b,onChange:e=>x(e.currentTarget.value,p.value),addonAfter:j,"aria-label":Ae.wl.components.TimePicker.fromField,value:d.value})}),w]}),(0,E.jsxs)("div",{className:c.fieldContainer,children:[(0,E.jsx)(He.g,{label:"To",invalid:p.invalid,error:p.errorMessage,children:(0,E.jsx)(Ge.I,{onClick:e=>e.stopPropagation(),onFocus:b,onChange:e=>x(d.value,e.currentTarget.value),addonAfter:j,"aria-label":Ae.wl.components.TimePicker.toField,value:p.value})}),w]}),(0,E.jsx)(L.zx,{"data-testid":Ae.wl.components.TimePicker.applyTimeRange,onClick:v,children:"Apply time range"}),(0,E.jsx)(Xe,{isFullscreen:s,isOpen:g,from:(0,Ee.dateTimeParse)(d.value),to:(0,Ee.dateTimeParse)(p.value),onApply:v,onClose:()=>m(!1),onChange:x,timeZone:a,isReversed:i})]})};function lt(e,t,s){const a=ct(e,s),n=ct(t,s),i=!dt(a,!1,s),r=!dt(n,!0,s),o=function(e,t,s){const a={from:e,to:t},n=Ee.rangeUtil.convertRawToRange(a,s);return!(n.from.isSame(n.to)||n.from.isBefore(n.to))}(a,n,s)&&!r;return[{value:a,invalid:i||o,errorMessage:o&&!i?rt:it},{value:n,invalid:r,errorMessage:it}]}function ct(e,t){return(0,Ee.isDateTime)(e)?(0,Ee.dateTimeFormat)(e,{timeZone:t}):e}function dt(e,t,s){if((0,Ee.isDateTime)(e))return e.isValid();if(Ee.dateMath.isMathString(e))return Ee.dateMath.isValid(e);return(0,Ee.dateTimeParse)(e,{roundUp:t,timeZone:s}).isValid()}function ut(e){return{fieldContainer:D.css`
      display: flex;
    `,tooltip:D.css`
      padding-left: ${e.spacing(1)};
      padding-top: ${e.spacing(3)};
    `}}var pt=s("./packages/grafana-ui/src/themes/mixins.ts"),ht=s("./node_modules/uuid/dist/esm-browser/v4.js");const gt=e=>({container:D.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${e.colors.action.hover};
        cursor: pointer;
      }
    `,selected:D.css`
      background: ${e.colors.action.selected};
      font-weight: ${e.typography.fontWeightMedium};
    `,radio:D.css`
      opacity: 0;

      &:focus-visible + label {
        ${(0,pt.getFocusStyles)(e)};
      }
    `,label:D.css`
      cursor: pointer;
    `}),mt=(0,A.memo)((({value:e,onSelect:t,selected:s=!1,name:a})=>{const n=(0,we.wW)(gt),i=(0,ht.Z)();return(0,E.jsxs)("li",{onClick:()=>t(e),className:(0,D.cx)(n.container,s&&n.selected),children:[(0,E.jsx)("input",{className:n.radio,checked:s,name:a,type:"checkbox",id:i,onChange:()=>t(e)}),(0,E.jsx)("label",{className:n.label,htmlFor:i,children:e.display})]})}));mt.displayName="TimeRangeOption";const ft=(0,$.Bb)((()=>({title:D.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `}))),bt=(0,$.Bb)((()=>({grow:D.css`
      flex-grow: 1;
      align-items: flex-start;
    `}))),vt=e=>{const t=ft(),{title:s,options:a,placeholderEmpty:n}=e;return void 0!==n&&a.length<=0?(0,E.jsx)(E.Fragment,{children:n}):s?(0,E.jsx)("section",{"aria-label":s,children:(0,E.jsxs)("fieldset",{children:[(0,E.jsx)("div",{className:t.title,children:(0,E.jsx)(Be,{children:s})}),(0,E.jsx)(xt,Object.assign({},e))]})}):(0,E.jsx)(xt,Object.assign({},e))},xt=({options:e,value:t,onChange:s,title:a})=>{const n=bt();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("ul",{"aria-roledescription":"Time range selection",children:e.map(((e,n)=>(0,E.jsx)(mt,{value:e,selected:yt(e,t),onSelect:s,name:null!=a?a:"Time ranges"},function(e,t){return`${e.from}-${e.to}-${t}`}(e,n))))}),(0,E.jsx)("div",{className:n.grow})]})};function yt(e,t){return!(!t||!e)&&(t.from===e.from&&t.to===e.to)}const wt=({title:e})=>{const t=(0,$.Fg)(),s=jt(t);return e?(0,E.jsx)("span",{className:s.title,children:e}):null},jt=(0,$.Bb)((e=>({title:D.css`
      font-weight: ${e.typography.weight.regular};
      text-overflow: ellipsis;
    `}))),kt=({info:e})=>{const t=(0,$.Fg)(),s=Ct(t),a=St(e);return e?(0,E.jsx)("div",{className:s.description,children:a}):null},St=e=>(0,A.useMemo)((()=>{const t=[];if(!e)return"";if(e.countries.length>0){const s=e.countries[0];t.push(s.name)}return e.abbreviation&&t.push(e.abbreviation),t.join(", ")}),[e]),Ct=(0,$.Bb)((e=>({description:D.css`
      font-weight: normal;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      white-space: normal;
      text-overflow: ellipsis;
    `})));var Tt=s("./node_modules/lodash/lodash.js");const Nt=e=>{const t=(0,$.Fg)(),{timestamp:s,timeZone:a,className:n}=e,i=It(t);return(0,Tt.isString)(a)?(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("span",{className:(0,D.cx)(i.offset,n),children:Ot(s,a)})}):null},Ot=(e,t)=>{const s=(0,Ee.dateTimeFormat)(e,{timeZone:t,format:"Z"});return"+00:00"===s?"UTC":`UTC${s}`},It=(0,$.Bb)((e=>{const t=D.css`
    font-weight: normal;
    font-size: ${e.typography.size.sm};
    color: ${e.colors.textWeak};
    white-space: normal;
  `;return{offset:D.css`
      ${t};
      color: ${e.colors.text};
      background: ${e.colors.bg2};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}));var Pt,Mt,Ft=s("./packages/grafana-ui/src/components/Select/Select.tsx"),At=s("./packages/grafana-ui/src/themes/stylesFactory.ts");const Dt="tz-utc-offset",$t=(e,t)=>{const{children:s,innerProps:a,data:n,isSelected:i,isFocused:r}=e,o=(0,we.l4)(),l=Et(o),c=Date.now(),d=(0,D.cx)(l.container,r&&l.containerFocused);return(0,Tt.isString)(n.value)?(0,E.jsx)("div",Object.assign({className:d},a,{"aria-label":"Select option",children:(0,E.jsxs)("div",{className:(0,D.cx)(l.leftColumn,l.row),children:[(0,E.jsxs)("div",{className:(0,D.cx)(l.leftColumn,l.wideRow),children:[(0,E.jsx)(wt,{title:s}),(0,E.jsx)("div",{className:l.spacer}),(0,E.jsx)(kt,{info:(0,Ee.getTimeZoneInfo)(n.value,c)})]}),(0,E.jsxs)("div",{className:l.rightColumn,children:[(0,E.jsx)(Nt,{timeZone:n.value,timestamp:c,className:Dt}),i&&(Pt||(Pt=(0,E.jsx)("span",{children:(0,E.jsx)(M.J,{name:"check"})})))]})]})})):null},Lt=(e,t)=>{const{children:s,innerProps:a,data:n,isSelected:i,isFocused:r}=e,o=(0,we.l4)(),l=Et(o),c=Date.now(),d=(0,D.cx)(l.container,r&&l.containerFocused);return(0,Tt.isString)(n.value)?(0,E.jsx)("div",Object.assign({className:d},a,{"aria-label":"Select option",children:(0,E.jsxs)("div",{className:l.body,children:[(0,E.jsxs)("div",{className:l.row,children:[(0,E.jsx)("div",{className:l.leftColumn,children:(0,E.jsx)(wt,{title:s})}),(0,E.jsx)("div",{className:l.rightColumn,children:i&&(Mt||(Mt=(0,E.jsx)("span",{children:(0,E.jsx)(M.J,{name:"check"})})))})]}),(0,E.jsxs)("div",{className:l.row,children:[(0,E.jsx)("div",{className:l.leftColumn,children:(0,E.jsx)(kt,{info:(0,Ee.getTimeZoneInfo)(n.value,c)})}),(0,E.jsx)("div",{className:l.rightColumn,children:(0,E.jsx)(Nt,{timestamp:c,timeZone:n.value,className:Dt})})]})]})})):null},Et=(0,At.B)((e=>({container:D.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${e.colors.action.hover};
      }
    `,containerFocused:D.css`
      background: ${e.colors.action.hover};
    `,body:D.css`
      display: flex;
      font-weight: ${e.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:D.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:D.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:D.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:D.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:D.css`
      margin-left: 6px;
    `}))),Rt=e=>e.stopPropagation(),_t=e=>{const t=(0,$.Fg)(),{children:s,label:a}=e,n=Vt(t);return a?(0,E.jsxs)("div",{onClick:Rt,children:[(0,E.jsx)("div",{className:n.header,children:(0,E.jsx)("span",{className:n.label,children:a})}),s]}):(0,E.jsx)("div",{onClick:Rt,children:s})},Vt=(0,$.Bb)((e=>({header:D.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${e.colors.border1};
      text-transform: capitalize;
    `,label:D.css`
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      font-weight: ${e.typography.weight.semibold};
    `}))),Bt=e=>{const{onChange:t,width:s,autoFocus:a=!1,onBlur:n,value:i,includeInternal:r=!1,disabled:o=!1}=e,l=zt(r),c=Ut(l,i),d=Ht(),u=s&&s<=45?Lt:$t,p=(0,A.useCallback)((e=>{if(!e||!(0,Tt.isString)(e.value))return t(i);t(e.value)}),[t,i]);return(0,E.jsx)(Ft.Ph,{value:c,placeholder:"Type to search (country, city, abbreviation)",autoFocus:a,openMenuOnFocus:!0,width:s,filterOption:d,options:l,onChange:p,onBlur:n,components:{Option:u,Group:_t},disabled:o,"aria-label":"Time zone picker"})},zt=e=>{const t=Date.now();return(0,Ee.getTimeZoneGroups)(e).map((e=>{const s=e.zones.reduce(((e,s)=>{const a=(0,Ee.getTimeZoneInfo)(s,t);return a?(e.push({label:a.name,value:a.zone,searchIndex:Gt(a,t)}),e):e}),[]);return{label:e.name,options:s}}))},Ut=(e,t)=>(0,A.useMemo)((()=>{if(void 0===t)return;const s=(0,Tt.toLower)(t),a=e.find((e=>e.label?s.startsWith((0,Tt.toLower)(e.label)):qt(s)));return null==a?void 0:a.options.find((e=>(0,Tt.isEmpty)(s)?e.value===Ee.InternalTimeZones.default:(0,Tt.toLower)(e.value)===s))}),[e,t]),qt=e=>{switch(e){case Ee.InternalTimeZones.default:case Ee.InternalTimeZones.localBrowserTime:case Ee.InternalTimeZones.utc:return!0;default:return!1}},Ht=()=>(0,A.useCallback)(((e,t)=>!(t&&e.data&&e.data.searchIndex)||e.data.searchIndex.indexOf((0,Tt.toLower)(t))>-1),[]),Gt=(e,t)=>{const s=[(0,Tt.toLower)(e.name),(0,Tt.toLower)(e.abbreviation),(0,Tt.toLower)(Ot(t,e.zone))];for(const t of e.countries)s.push((0,Tt.toLower)(t.name)),s.push((0,Tt.toLower)(t.code));return s.join("|")},Wt=[{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],Zt=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}],Qt=e=>{const{timeZone:t,fiscalYearStartMonth:s,timestamp:a=Date.now(),onChangeTimeZone:n,onChangeFiscalYearStartMonth:i}=e,[r,o]=(0,A.useState)(!1),[l,c]=(0,A.useState)("tz"),d=(0,A.useCallback)((e=>{e&&e.stopPropagation(),o(!r)}),[r,o]),u=(0,$.l4)(),p=Kt(u);if(!(0,Tt.isString)(t))return null;const h=(0,Ee.getTimeZoneInfo)(t,a);return h?(0,E.jsxs)("div",{children:[(0,E.jsxs)("section",{"aria-label":"Time zone selection",className:p.container,children:[(0,E.jsxs)("div",{className:p.timeZoneContainer,children:[(0,E.jsxs)("div",{className:p.timeZone,children:[(0,E.jsx)(wt,{title:h.name}),(0,E.jsx)("div",{className:p.spacer}),(0,E.jsx)(kt,{info:h})]}),(0,E.jsx)(Nt,{timeZone:t,timestamp:a})]}),(0,E.jsx)("div",{className:p.spacer}),(0,E.jsx)(L.zx,{variant:"secondary",onClick:d,size:"sm",children:"Change time settings"})]}),r?(0,E.jsxs)("div",{className:p.editContainer,children:[(0,E.jsx)("div",{children:(0,E.jsx)(Bd.S,{value:l,options:[{label:"Time Zone",value:"tz"},{label:"Fiscal year",value:"fy"}],onChange:c})}),"tz"===l?(0,E.jsx)("section",{"aria-label":Ae.wl.components.TimeZonePicker.container,className:(0,D.cx)(p.timeZoneContainer,p.timeSettingContainer),children:(0,E.jsx)(Bt,{includeInternal:!0,onChange:e=>{d(),(0,Tt.isString)(e)&&n(e)},onBlur:d})}):(0,E.jsx)("section",{"aria-label":Ae.wl.components.TimeZonePicker.container,className:(0,D.cx)(p.timeZoneContainer,p.timeSettingContainer),children:(0,E.jsx)(He.g,{className:p.fiscalYearField,label:"Fiscal year start month",children:(0,E.jsx)(Ft.Ph,{value:s,options:Zt,onChange:e=>{var t;i&&i(null!==(t=e.value)&&void 0!==t?t:0)}})})})]}):null]}):null},Kt=(0,$.Bb)((e=>({container:D.css`
      border-top: 1px solid ${e.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:D.css`
      border-top: 1px solid ${e.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:D.css`
      margin-left: 7px;
    `,timeSettingContainer:D.css`
      padding-top: ${e.spacing(1)};
    `,fiscalYearField:D.css`
      margin-bottom: 0px;
    `,timeZoneContainer:D.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:D.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `})));var Yt,Jt,Xt,es,ts;const ss=(0,$.Bb)(((e,t,s,a)=>({container:D.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      width: 546px;
      top: 116%;
      border-radius: 2px;
      border: 1px solid ${e.colors.border.weak};
      ${t?"left":"right"}: 0;

      @media only screen and (max-width: ${e.breakpoints.values.lg}px) {
        width: 262px;
      }
    `,body:D.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${a?"381px":"217px"};
    `,leftSide:D.css`
      display: flex;
      flex-direction: column;
      border-right: ${t?"none":`1px solid ${e.colors.border.weak}`};
      width: ${s?"100%":"60%"};
      overflow: hidden;
      order: ${t?1:0};
    `,rightSide:D.css`
      width: 40% !important;
      border-right: ${t?`1px solid ${e.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
      @media only screen and (max-width: ${e.breakpoints.values.lg}px) {
        width: 100% !important;
      }
    `,timeRangeFilter:D.css`
      padding: ${e.spacing(1)};
    `,spacing:D.css`
      margin-top: 16px;
    `}))),as=(0,$.Bb)((e=>({header:D.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${e.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:D.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,pt.getFocusStyles)(e)}
      }
    `,body:D.css`
      border-bottom: 1px solid ${e.colors.border.weak};
    `,form:D.css`
      padding: 7px 9px 7px 9px;
    `}))),ns=(0,$.Bb)(((e,t)=>({container:D.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${t?"11px":"20%"};
    `,title:D.css`
      margin-bottom: 11px;
    `,recent:D.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${e.spacing(1)};
    `}))),is=(0,$.Bb)((e=>({container:D.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }
    `,link:D.css`
      color: ${e.colors.text.link};
    `}))),rs=e=>{const{quickOptions:t=[],isReversed:s,isFullscreen:a,hideQuickRanges:n,timeZone:i,fiscalYearStartMonth:r,value:o,onChange:l,history:c,showHistory:d,className:u,hideTimeZone:p,onChangeTimeZone:h,onChangeFiscalYearStartMonth:g}=e,m=!(null!=c&&c.length),f=a&&d||!a&&(d&&!m||!n),b=(0,$.l4)(),v=ss(b,s,n,f),x=function(e,t){if(!Array.isArray(e)||0===e.length)return[];return e.slice(e.length-4).map((e=>((e,t)=>{const s=(0,Ee.dateTimeFormat)(e.from,{timeZone:t}),a=(0,Ee.dateTimeFormat)(e.to,{timeZone:t});return{from:s,to:a,display:`${s} to ${a}`}})(e,t)))}(c,i),y=us(o.raw,t),[w,j]=(0,A.useState)(""),k=t.filter((e=>e.display.toLowerCase().includes(w.toLowerCase())));return(0,E.jsxs)("div",{id:"TimePickerContent",className:(0,D.cx)(v.container,u),children:[(0,E.jsxs)("div",{className:v.body,children:[(!a||!n)&&(0,E.jsxs)("div",{className:v.rightSide,children:[(0,E.jsx)("div",{className:v.timeRangeFilter,children:(0,E.jsx)(zd,{width:0,autoFocus:!0,value:w,onChange:j,placeholder:"Search quick ranges"})}),(0,E.jsxs)(W.$,{children:[!a&&(0,E.jsx)(ls,Object.assign({},e,{historyOptions:x})),!n&&(0,E.jsx)(vt,{options:k,onChange:e=>l(_e(e)),value:y})]})]}),a&&(0,E.jsx)("div",{className:v.leftSide,children:(0,E.jsx)(cs,Object.assign({},e,{historyOptions:x}))})]}),!p&&a&&(0,E.jsx)(Qt,{timeZone:i,fiscalYearStartMonth:r,onChangeTimeZone:h,onChangeFiscalYearStartMonth:g})]})},os=e=>{const t=(0,$.l4)(),s=(0,Re.Z)(`(min-width: ${t.breakpoints.values.lg}px)`);return(0,E.jsx)(rs,Object.assign({},e,{isFullscreen:s}))},ls=e=>{const{value:t,hideQuickRanges:s,onChange:a,timeZone:n,historyOptions:i=[],showHistory:r}=e,o=(0,$.l4)(),l=as(o),c=(0,Ee.isDateTime)(t.raw.from)||(0,Ee.isDateTime)(t.raw.to),[d,u]=(0,A.useState)(!c),p=!s&&d;return(0,E.jsxs)("fieldset",{children:[(0,E.jsx)("div",{className:l.header,children:(0,E.jsxs)("button",{className:l.expandButton,onClick:()=>{s||u(!p)},"data-testid":Ae.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!p,"aria-controls":"expanded-timerange",children:[Yt||(Yt=(0,E.jsx)(Be,{children:"Absolute time range"})),!s&&(0,E.jsx)(M.J,{name:p?"angle-down":"angle-up"})]})}),!p&&(0,E.jsxs)("div",{className:l.body,id:"expanded-timerange",children:[(0,E.jsx)("div",{className:l.form,children:(0,E.jsx)(ot,{value:t,onApply:a,timeZone:n,isFullscreen:!1})}),r&&(0,E.jsx)(vt,{title:"Recently used absolute ranges",options:i,onChange:e=>a(_e(e)),placeholderEmpty:null})]})]})},cs=e=>{const{onChange:t,value:s,timeZone:a,fiscalYearStartMonth:n,isReversed:i,historyOptions:r}=e,o=(0,$.l4)(),l=ns(o,e.hideQuickRanges);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:l.container,children:[(0,E.jsx)("div",{className:l.title,"data-testid":Ae.wl.components.TimePicker.absoluteTimeRangeTitle,children:Jt||(Jt=(0,E.jsx)(Be,{children:"Absolute time range"}))}),(0,E.jsx)(ot,{value:s,timeZone:a,fiscalYearStartMonth:n,onApply:t,isFullscreen:!0,isReversed:i})]}),e.showHistory&&(0,E.jsx)("div",{className:l.recent,children:(0,E.jsx)(vt,{title:"Recently used absolute ranges",options:r||[],onChange:e=>t(_e(e)),placeholderEmpty:Xt||(Xt=(0,E.jsx)(ds,{}))})})]})},ds=(0,A.memo)((()=>{const e=(0,$.l4)(),t=is(e);return(0,E.jsxs)("div",{className:t.container,children:[es||(es=(0,E.jsx)("div",{children:(0,E.jsx)("span",{children:"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here."})})),(0,E.jsxs)("div",{children:[(0,E.jsx)("a",{className:t.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new",children:"Read the documentation"}),ts||(ts=(0,E.jsx)("span",{children:" to find out more about how to enter custom time ranges."}))]})]})}));ds.displayName="EmptyRecentList";const us=(e,t)=>(0,A.useMemo)((()=>{if(Ee.rangeUtil.isRelativeTimeRange(e))return t.find((t=>t.from===e.from&&t.to===e.to))}),[e,t]);var ps,hs;function gs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ms extends A.PureComponent{constructor(...e){super(...e),gs(this,"state",{isOpen:!1}),gs(this,"onChange",(e=>{this.props.onChange(e),this.setState({isOpen:!1})})),gs(this,"onOpen",(e=>{const{isOpen:t}=this.state;e.stopPropagation(),e.preventDefault(),this.setState({isOpen:!t})})),gs(this,"onKeyUp",(e=>{"Escape"===e.code&&this.onClose()})),gs(this,"onClose",(()=>{this.setState({isOpen:!1})}))}componentDidMount(){window.addEventListener("keyup",this.onKeyUp)}componentWillUnmount(){window.removeEventListener("keyup",this.onKeyUp)}render(){const{value:e,onMoveBackward:t,onMoveForward:s,onZoom:a,timeZone:n,fiscalYearStartMonth:i,timeSyncButton:r,isSynced:o,theme:l,history:c,onChangeTimeZone:d,onChangeFiscalYearStartMonth:u,hideQuickRanges:p}=this.props,{isOpen:h}=this.state,g=ws(l),m=(0,Ee.isDateTime)(e.raw.from)||(0,Ee.isDateTime)(e.raw.to),f=o?"active":"default";return(0,E.jsxs)(L.hE,{className:g.container,children:[m&&(0,E.jsx)(L.hA,{"aria-label":"Move time range backwards",variant:f,onClick:t,icon:"angle-left",narrow:!0}),(0,E.jsx)(U.u,{content:(0,E.jsx)(bs,{timeRange:e,timeZone:n}),placement:"bottom",children:(0,E.jsx)(L.hA,{"data-testid":Ae.wl.components.TimePicker.openButton,"aria-label":`Time range picker with current time range ${xs(e,n)} selected`,"aria-controls":"TimePickerContent",onClick:this.onOpen,icon:"clock-nine",isOpen:h,variant:f,children:(0,E.jsx)(vs,Object.assign({},this.props))})}),h&&(0,E.jsx)(ye.L,{includeButtonPress:!1,onClick:this.onClose,children:(0,E.jsx)(os,{timeZone:n,fiscalYearStartMonth:i,value:e,onChange:this.onChange,quickOptions:Wt,history:c,showHistory:!0,onChangeTimeZone:d,onChangeFiscalYearStartMonth:u,hideQuickRanges:p})}),r,m&&(0,E.jsx)(L.hA,{"aria-label":"Move time range forwards",onClick:s,icon:"angle-right",narrow:!0,variant:f}),(0,E.jsx)(U.u,{content:fs,placement:"bottom",children:(0,E.jsx)(L.hA,{"aria-label":"Zoom out time range",onClick:a,icon:"search-minus",variant:f})})]})}}const fs=()=>(0,E.jsxs)(E.Fragment,{children:["Time range zoom out ",ps||(ps=(0,E.jsx)("br",{}))," CTRL+Z"]}),bs=({timeRange:e,timeZone:t})=>{const s=(0,we.Fg)(),a=js(s);return(0,E.jsxs)(E.Fragment,{children:[(0,Ee.dateTimeFormat)(e.from,{timeZone:t}),hs||(hs=(0,E.jsx)("div",{className:"text-center",children:"to"})),(0,Ee.dateTimeFormat)(e.to,{timeZone:t}),(0,E.jsx)("div",{className:"text-center",children:(0,E.jsx)("span",{className:a.utc,children:(0,Ee.timeZoneFormatUserFriendly)(t)})})]})},vs=(0,A.memo)((({hideText:e,value:t,timeZone:s})=>{const a=(0,we.Fg)(),n=js(a);return e?null:(0,E.jsxs)("span",{className:n.container,children:[(0,E.jsx)("span",{children:xs(t,s)}),(0,E.jsx)("span",{className:n.utc,children:Ee.rangeUtil.describeTimeRangeAbbreviation(t,s)})]})}));vs.displayName="TimePickerButtonLabel";const xs=(e,t)=>{const s={to:Ee.dateMath.isMathString(e.raw.to)?e.raw.to:e.to,from:Ee.dateMath.isMathString(e.raw.from)?e.raw.from:e.from};return Ee.rangeUtil.describeTimeRange(s,t)},ys=(0,we.Zz)(ms),ws=(0,At.B)((e=>({container:D.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `}))),js=(0,At.B)((e=>({container:D.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:D.css`
      color: ${e.palette.orange};
      font-size: ${e.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${e.typography.weight.semibold};
    `})));var ks,Ss=s("./node_modules/rc-time-picker/es/index.js"),Cs=s("./packages/grafana-ui/src/components/Forms/commonStyles.ts");const Ts=({minuteStep:e=1,showHour:t=!0,showSeconds:s=!1,onChange:a,value:n,size:i="auto",disabled:r})=>{const o=(0,Z.useStyles)(Os);return(0,E.jsx)(Ss.Z,{className:(0,D.cx)((0,Cs.ht)()[i],o.input),popupClassName:o.picker,defaultValue:(0,Ee.dateTimeAsMoment)(),onChange:e=>a((0,Ee.dateTime)(e)),allowEmpty:!1,showSecond:s,value:(0,Ee.dateTimeAsMoment)(n),showHour:t,minuteStep:e,inputIcon:(0,E.jsx)(Ns,{wrapperStyle:o.caretWrapper}),disabled:r})},Ns=({wrapperStyle:e=""})=>(0,E.jsx)("div",{className:e,children:ks||(ks=(0,E.jsx)(Z.Icon,{name:"angle-down"}))}),Os=(0,$.Bb)((e=>{const t=e.colors.formInputBg,s=e.colors.dropdownShadow,a=e.colors.dropdownOptionHoverBg,n=e.border.radius.sm,i=e.colors.formInputBorder;return{caretWrapper:D.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${e.colors.textWeak};
    `,picker:D.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${t};
        border-color: ${i};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${e.palette.orange};
            border-radius: ${n};
          }

          &:hover {
            background: ${a};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${s};
        background-color: ${t};
        border-color: ${i};
        border-radius: ${n};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${t};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:D.css`
      .rc-time-picker-input {
        background-color: ${t};
        border-radius: ${n};
        border-color: ${i};
        height: ${e.spacing.formInputHeight}px;

        &:focus {
          ${(0,pt.focusCss)(e)}
        }

        &:disabled {
          background-color: ${e.colors.formInputBgDisabled};
          color: ${e.colors.formInputDisabledText};
          border: 1px solid ${e.colors.formInputBgDisabled};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}));var Is,Ps,Ms=s("./node_modules/emotion/dist/emotion.esm.js");const Fs=(0,A.memo)((e=>{const t=(0,$.wW)(Ds),{isOpen:s,onClose:a}=e;return s?(0,E.jsx)(ye.L,{useCapture:!0,includeButtonPress:!1,onClick:a,children:(0,E.jsx)("div",{className:t.modal,"data-testid":"date-picker",children:(0,E.jsx)(As,Object.assign({},e))})}):null}));Fs.displayName="DatePicker";const As=(0,A.memo)((({value:e,onChange:t})=>{const s=(0,$.wW)(Ke);return(0,E.jsx)(We.ZP,{className:s.body,tileClassName:s.title,value:e||new Date,nextLabel:Is||(Is=(0,E.jsx)(M.J,{name:"angle-right"})),prevLabel:Ps||(Ps=(0,E.jsx)(M.J,{name:"angle-left"})),onChange:e=>{Array.isArray(e)||t(e)},locale:"en"})}));As.displayName="Body";const Ds=e=>({modal:Ms.css`
      z-index: ${e.zIndex.modal};
      position: absolute;
      box-shadow: ${e.shadows.z3};
      background-color: ${e.colors.background.primary};
      border: 1px solid ${e.colors.border.weak};
      border-radius: 2px 0 0 2px;
    `}),$s=["value","onChange","closeOnSelect","placeholder"];const Ls=e=>{let{value:t,onChange:s,closeOnSelect:a,placeholder:n="Date"}=e,i=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,$s);const[r,o]=A.useState(!1),l=(0,$.yK)(Es);return(0,E.jsxs)("div",{className:l.container,children:[(0,E.jsx)(Ge.I,Object.assign({type:"text",autoComplete:"off",placeholder:n,value:t?(c=t,(0,Ee.dateTime)(c).format("L")):t,onClick:()=>o(!0),onChange:e=>{""===e.target.value&&s("")},className:l.input},i)),(0,E.jsx)(Fs,{isOpen:r,value:t&&"string"!=typeof t?t:(0,Ee.dateTime)().toDate(),onChange:e=>{s(e),a&&o(!1)},onClose:()=>o(!1)})]});var c},Es=()=>({container:D.css`
      position: relative;
    `,input:D.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `});function Rs(e,t,s){if((0,Ee.isDateTime)(e))return e.isValid();if(Ee.dateMath.isMathString(e))return Ee.dateMath.isValid(e);return(0,Ee.dateTimeParse)(e,{roundUp:t,timeZone:s}).isValid()}var _s,Vs;const Bs=e=>e.stopPropagation(),zs=({date:e,maxDate:t,label:s,onChange:a})=>{const[n,i]=(0,A.useState)(!1),r=(0,$.l4)(),o=(0,Re.Z)(`(min-width: ${r.breakpoints.values.lg}px)`),l=(0,$.wW)(Ze),c=(0,$.wW)(Hs),d=(0,A.useCallback)((e=>{i(!1),a(e)}),[a]),u=(0,A.useCallback)((e=>{e.preventDefault(),i(!0)}),[i]);return(0,E.jsxs)("div",{"data-testid":"date-time-picker",style:{position:"relative"},children:[(0,E.jsx)(Us,{date:e,onChange:a,isFullscreen:o,onOpen:u,label:s}),n?o?(0,E.jsx)(ye.L,{onClick:()=>i(!1),children:(0,E.jsx)(qs,{date:e,onChange:d,isFullscreen:!0,onClose:()=>i(!1),maxDate:t})}):(0,E.jsx)(G.h,{children:(0,E.jsxs)(ye.L,{onClick:()=>i(!1),children:[(0,E.jsx)("div",{className:c.modal,onClick:Bs,children:(0,E.jsx)(qs,{date:e,onChange:d,isFullscreen:!1,onClose:()=>i(!1)})}),(0,E.jsx)("div",{className:l.backdrop,onClick:Bs})]})}):null]})},Us=({date:e,label:t,onChange:s,isFullscreen:a,onOpen:n})=>{const[i,r]=(0,A.useState)((()=>({value:e?(0,Ee.dateTimeFormat)(e):(0,Ee.dateTimeFormat)((0,Ee.dateTime)()),invalid:!1})));(0,A.useEffect)((()=>{e&&r({invalid:!Rs((0,Ee.dateTimeFormat)(e)),value:(0,Ee.isDateTime)(e)?(0,Ee.dateTimeFormat)(e):e})}),[e]);const o=(0,A.useCallback)((e=>{const t=!Rs(e.currentTarget.value);r({value:e.currentTarget.value,invalid:t})}),[]),l=(0,A.useCallback)((e=>{a&&n(e)}),[a,n]),c=(0,A.useCallback)((()=>{(0,Ee.isDateTime)(i.value)&&s((0,Ee.dateTime)(i.value))}),[i.value,s]),d=(0,E.jsx)(L.zx,{icon:"calendar-alt",variant:"secondary",onClick:n});return(0,E.jsx)(Pl,{label:t,onClick:Bs,invalid:!(!i.value||!i.invalid),className:D.css`
        margin-bottom: 0;
      `,children:(0,E.jsx)(Ge.I,{onClick:Bs,onChange:o,addonAfter:d,value:i.value,onFocus:l,onBlur:c,"data-testid":"date-time-input",placeholder:"Select date/time"})})},qs=({date:e,onClose:t,onChange:s,isFullscreen:a,maxDate:n})=>{const i=(0,$.wW)(Ke),r=(0,$.wW)(Hs),[o,l]=(0,A.useState)((()=>e&&e.isValid()?e.toDate():new Date)),c=(0,A.useCallback)((e=>{Array.isArray(e)||l((t=>(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e)))}),[]),d=(0,A.useCallback)((e=>{l(e.toDate())}),[]);return(0,E.jsxs)("div",{className:(0,D.cx)(r.container,{[r.fullScreen]:a}),onClick:Bs,children:[(0,E.jsx)(We.ZP,{next2Label:null,prev2Label:null,value:o,nextLabel:_s||(_s=(0,E.jsx)(M.J,{name:"angle-right"})),prevLabel:Vs||(Vs=(0,E.jsx)(M.J,{name:"angle-left"})),onChange:c,locale:"en",className:i.body,tileClassName:i.title,maxDate:n}),(0,E.jsx)("div",{className:r.time,children:(0,E.jsx)(Ts,{showSeconds:!0,onChange:d,value:(0,Ee.dateTime)(o)})}),(0,E.jsxs)(Yi.Lh,{children:[(0,E.jsx)(L.zx,{type:"button",onClick:()=>s((0,Ee.dateTime)(o)),children:"Apply"}),(0,E.jsx)(L.zx,{variant:"secondary",type:"button",onClick:t,children:"Cancel"})]})]})},Hs=e=>({container:D.css`
    padding: ${e.spacing(1)};
    border: 1px ${e.colors.border.weak} solid;
    border-radius: ${e.shape.borderRadius(1)};
    background-color: ${e.colors.background.primary};
    z-index: ${e.zIndex.modal};
  `,fullScreen:D.css`
    position: absolute;
  `,time:D.css`
    margin-bottom: ${e.spacing(2)};
  `,modal:D.css`
    position: fixed;
    top: 25%;
    left: 25%;
    width: 100%;
    z-index: ${e.zIndex.modal};
    max-width: 280px;
  `});var Gs=s("./packages/grafana-ui/src/components/List/List.tsx"),Ws=s("./packages/grafana-ui/src/utils/index.ts");const Zs=(0,$.Bb)((({theme:e,name:t})=>{const{color:s,borderColor:a}=(0,Ws.Bx)(t),n=e.spacing.formInputHeight-8;return{itemStyle:D.css`
      display: flex;
      align-items: center;
      height: ${n}px;
      line-height: ${n-2}px;
      background-color: ${s};
      color: ${e.palette.white};
      border: 1px solid ${a};
      border-radius: 3px;
      padding: 0 ${e.spacing.xs};
      margin-right: 3px;
      white-space: nowrap;
      text-shadow: none;
      font-weight: 500;
      font-size: ${e.typography.size.sm};
    `,nameStyle:D.css`
      margin-right: 3px;
    `}})),Qs=({name:e,onRemove:t})=>{const s=(0,$.Fg)(),a=Zs({theme:s,name:e});return(0,E.jsxs)("div",{className:a.itemStyle,children:[(0,E.jsx)("span",{className:a.nameStyle,children:e}),(0,E.jsx)(M.J,{className:"pointer",name:"times",onClick:()=>t(e)})]})},Ks=({placeholder:e="New tag (enter key to add)",tags:t=[],onChange:s,width:a,className:n,disabled:i,addOnBlur:r,invalid:o})=>{const[l,c]=(0,A.useState)(""),d=(0,we.yK)(Ys),u=(0,we.l4)(),p=e=>{i||s(null==t?void 0:t.filter((t=>t!==e)))},h=e=>{null==e||e.preventDefault(),t.includes(l)||s(t.concat(l)),c("")};return(0,E.jsxs)("div",{className:(0,D.cx)(d.wrapper,n,a?(0,D.css)({width:u.spacing(a)}):""),children:[(0,E.jsx)("div",{className:null!=t&&t.length?d.tags:void 0,children:null==t?void 0:t.map(((e,t)=>(0,E.jsx)(Qs,{name:e,onRemove:p},`${e}-${t}`)))}),(0,E.jsx)("div",{children:(0,E.jsx)(Ge.I,{disabled:i,placeholder:e,onChange:e=>{c(e.target.value)},value:l,onKeyUp:e=>{e.preventDefault(),"Enter"===e.key&&""!==l&&(s(t.concat(l)),c(""))},onBlur:()=>{r&&l&&h()},invalid:o,suffix:l.length>0&&(0,E.jsx)(L.zx,{fill:"text",className:d.addButtonStyle,onClick:h,size:"md",children:"Add"})})})]})},Ys=e=>({wrapper:D.css`
    min-height: ${e.spacing.formInputHeight}px;
    align-items: center;
    display: flex;
    flex-wrap: wrap;
  `,tags:D.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    margin-right: ${e.spacing.xs};
  `,addButtonStyle:D.css`
    margin: 0 -${e.spacing.sm};
  `});var Js,Xs;const ea=({currentPage:e,numberOfPages:t,onNavigate:s,hideWhenSinglePage:a})=>{const n=ta(),i=[...new Array(t).keys()],r=t>8,o=(e,t)=>(0,E.jsx)("li",{className:n.item,children:(0,E.jsx)(L.zx,{size:"sm",variant:t,onClick:()=>s(e),children:e})},e),l=i.reduce(((s,a)=>{const i=a+1,l=i===e?"primary":"secondary",c=t-8+1,d=c-8,u=d>-1&&e>=8&&e<=c;return r?1===i||i===t||e<8&&i<8||d>=0&&e>c&&i>c||d<0&&e>=8&&i>c||u&&i>=e-2&&i<=e+2?s.push(o(i,l)):(8===i&&e<8||i===c&&e>c||u&&(i===e-3||i===e+3))&&s.push((0,E.jsx)("li",{className:n.item,children:(0,E.jsx)(M.J,{className:n.ellipsis,name:"ellipsis-v"})},i)):s.push(o(i,l)),s}),[]);return a&&t<=1?null:(0,E.jsx)("div",{className:n.container,children:(0,E.jsxs)("ol",{children:[(0,E.jsx)("li",{className:n.item,children:(0,E.jsx)(L.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>s(e-1),disabled:1===e,children:Js||(Js=(0,E.jsx)(M.J,{name:"angle-left"}))})}),l,(0,E.jsx)("li",{className:n.item,children:(0,E.jsx)(L.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>s(e+1),disabled:e===t,children:Xs||(Xs=(0,E.jsx)(M.J,{name:"angle-right"}))})})]})})},ta=(0,$.Bb)((()=>({container:D.css`
      float: right;
    `,item:D.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:D.css`
      transform: rotate(90deg);
    `}))),sa=["name","onClick","className","colorIndex"];const aa=(0,A.forwardRef)(((e,t)=>{let{name:s,onClick:a,className:n,colorIndex:i}=e,r=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,sa);const o=(0,$.Fg)(),l=na(o,s,i);return(0,E.jsx)("span",Object.assign({ref:t,onClick:e=>{a&&a(s,e)},className:(0,D.cx)(l.wrapper,n,a&&l.hover)},r,{children:s}),s)}));aa.displayName="Tag";const na=(e,t,s)=>{let a;return a=void 0===s?(0,Ws.Bx)(t):(0,Ws.vm)(s),{wrapper:D.css`
      font-weight: ${e.typography.weight.semibold};
      font-size: ${e.typography.size.sm};
      line-height: ${e.typography.lineHeight.xs};
      vertical-align: baseline;
      background-color: ${a.color};
      color: ${e.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${e.border.radius.md};
    `,hover:D.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}},ia=(0,A.memo)((({tags:e,onClick:t,className:s})=>{const a=ra();return(0,E.jsx)("span",{className:(0,D.cx)(a.wrapper,s),children:e.map((e=>(0,E.jsx)(aa,{name:e,onClick:t,className:a.tag},e)))})}));ia.displayName="TagList";const ra=()=>({wrapper:D.css`
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      margin-bottom: -6px;
      justify-content: flex-end;
    `,tag:D.css`
      margin: 0 0 6px 6px;
    `}),oa=({label:e,selected:t,onClick:s,icon:a="check"})=>{const n=(0,$.wW)(la);return(0,E.jsxs)("div",{className:(0,D.cx)(n.wrapper,t&&n.selected),onClick:s,children:[(0,E.jsx)("span",{children:e}),t&&(0,E.jsx)(M.J,{name:a,className:n.icon})]})},la=e=>({wrapper:D.css`
      padding: ${e.spacing(.25)} ${e.spacing(1)};
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(8)};
      padding: ${e.spacing(0,2)};
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;
      cursor: pointer;

      &:hover {
        background: ${e.colors.action.hover};
        color: ${e.colors.text.primary};
      }
    `,selected:D.css`
      color: ${e.colors.text.primary};
      background: ${e.colors.action.selected};

      &:hover {
        background: ${e.colors.action.focus};
      }
    `,icon:D.css`
      margin-left: ${e.spacing(.5)};
    `});var ca=s("./packages/grafana-ui/src/components/Modal/Modal.tsx");const da=({isOpen:e,title:t,body:s,description:a,confirmText:n,confirmationText:i,dismissText:r="Cancel",alternativeText:o,icon:l="exclamation-triangle",onConfirm:c,onDismiss:d,onAlternative:u})=>{const[p,h]=(0,A.useState)(Boolean(i)),g=(0,$.wW)(ua),m=(0,A.useRef)(null);return(0,A.useEffect)((()=>{var e;null===(e=m.current)||void 0===e||e.focus()}),[]),(0,E.jsxs)(ca.u,{className:g.modal,title:t,icon:l,isOpen:e,onDismiss:d,children:[(0,E.jsxs)("div",{className:g.modalText,children:[s,a?(0,E.jsx)("div",{className:g.modalDescription,children:a}):null,i?(0,E.jsx)("div",{className:g.modalConfirmationInput,children:(0,E.jsx)(Yi.Lh,{children:(0,E.jsx)(Ge.I,{placeholder:`Type ${i} to confirm`,onChange:e=>{h(0!==(null==i?void 0:i.localeCompare(e.currentTarget.value)))}})})}):null]}),(0,E.jsxs)(ca.u.ButtonRow,{children:[(0,E.jsx)(L.zx,{variant:"secondary",onClick:d,fill:"outline",children:r}),(0,E.jsx)(L.zx,{variant:"destructive",onClick:c,disabled:p,ref:m,"aria-label":Ae.wl.pages.ConfirmModal.delete,children:n}),u?(0,E.jsx)(L.zx,{variant:"primary",onClick:u,children:o}):null]})]})},ua=e=>({modal:D.css`
    width: 500px;
  `,modalText:(0,D.css)({fontSize:e.typography.h5.fontSize,color:e.colors.text.primary}),modalDescription:(0,D.css)({fontSize:e.typography.body.fontSize}),modalConfirmationInput:(0,D.css)({paddingTop:e.spacing(1)})});var pa=s("./node_modules/@grafana/slate-react/lib/slate-react.es.js"),ha=s("./node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js"),ga=s("./node_modules/classnames/index.js"),ma=s.n(ga),fa=s("./packages/grafana-ui/src/slate-plugins/index.ts");function ba(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class va extends A.PureComponent{constructor(e,t){super(e,t),ba(this,"plugins",void 0),ba(this,"runOnChangeDebounced",void 0),ba(this,"lastExecutedValue",null),ba(this,"mounted",!1),ba(this,"editor",null),ba(this,"onChange",((e,t)=>{const s=e.document!==this.state.value.document,a=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(e),this.setState({value:e},(()=>{if(s){const s=ha.Z.serialize(a)!==ha.Z.serialize(e);s&&t&&this.runOnChangeAndRunQuery(),s&&!t&&this.runOnChangeDebounced()}}))})),ba(this,"runOnChange",(()=>{const{onChange:e}=this.props,t=ha.Z.serialize(this.state.value);e&&e(this.cleanText(t))})),ba(this,"runOnRunQuery",(()=>{const{onRunQuery:e}=this.props;e&&(e(),this.lastExecutedValue=this.state.value)})),ba(this,"runOnChangeAndRunQuery",(()=>{this.runOnChange(),this.runOnRunQuery()})),ba(this,"handleBlur",((e,t,s)=>{const{onBlur:a}=this.props;if(a)a();else{(this.lastExecutedValue?ha.Z.serialize(this.lastExecutedValue):null)!==ha.Z.serialize(t.value)&&this.runOnChangeAndRunQuery()}return s()})),this.runOnChangeDebounced=(0,Tt.debounce)(this.runOnChange,500);const{onTypeahead:s,cleanText:a,portalOrigin:n,onWillApplySuggestion:i}=e;this.plugins=[(0,fa.bm)({onTypeahead:s,cleanText:a,portalOrigin:n,onWillApplySuggestion:i}),(0,fa.dv)({handler:this.runOnChangeAndRunQuery}),(0,fa.z2)(),(0,fa.Gp)(),(0,fa.$L)(),(0,fa.Rc)(),(0,fa.wl)(),...e.additionalPlugins||[]].filter((e=>e)),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,Z.makeValue)(e.query||"",e.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(e,t){const{query:s,syntax:a,syntaxLoaded:n}=this.props;if(!e.syntaxLoaded&&n&&this.editor){const e=this.editor.insertText(" ").deleteBackward(1);this.onChange(e.value,!0)}const{value:i}=this.state;s!==e.query&&s!==ha.Z.serialize(i)&&this.setState({value:(0,Z.makeValue)(s||"",a)})}cleanText(e){return e.replace(/[\r]/g,"")}render(){const{disabled:e}=this.props,t=ma()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":e});return(0,E.jsx)("div",{className:t,children:(0,E.jsx)("div",{className:"slate-query-field","aria-label":Ae.wl.components.QueryField.container,children:(0,E.jsx)(pa.ML,{ref:e=>this.editor=e,schema:Z.SCHEMA,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:e=>{this.onChange(e.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})})})}}var xa=s("./node_modules/react-use/esm/useAsync.js");var ya;const wa=e=>{const{loading:t,error:a,dependency:n}=(e=>{const t=(0,xa.Z)((async()=>await e));return Object.assign({},t,{dependency:t.value})})(s.e(1085).then(s.bind(s,"./packages/grafana-ui/src/components/Monaco/CodeEditor.tsx")));if(t)return ya||(ya=(0,E.jsx)(ue,{text:""}));if(a)return(0,E.jsx)(ll,{title:"Code editor failed to load",error:a,errorInfo:{componentStack:(null==a?void 0:a.stack)||""}});const i=n.default;return(0,E.jsx)(i,Object.assign({},e))};var ja=s("./packages/grafana-ui/src/components/Monaco/types.ts");function ka(e){const t="${"+e.value+"}",s=e.value===e.label?e.origin:`${e.label} / ${e.origin}`;return{label:t,kind:ja.k.Property,detail:s,documentation:e.documentation}}var Sa=s("./packages/grafana-ui/src/components/Modal/ModalHeader.tsx");const Ca=(0,$.Bb)(((e,t=!1)=>({tabsWrapper:!t&&D.css`
        border-bottom: 1px solid ${e.colors.border.weak};
      `,tabs:D.css`
      position: relative;
      display: flex;
      height: 41px;
    `}))),Ta=A.forwardRef((({children:e,className:t,hideBorder:s},a)=>{const n=(0,$.l4)(),i=Ca(n,s);return(0,E.jsx)("div",{className:(0,D.cx)(i.tabsWrapper,t),ref:a,children:(0,E.jsx)("ul",{className:i.tabs,children:e})})}));Ta.displayName="TabsBar";var Na=s("./packages/grafana-ui/src/components/Tabs/Tab.tsx");const Oa=({icon:e,title:t,tabs:s,activeTab:a,onChangeTab:n})=>(0,E.jsx)(Sa.x,{icon:e,title:t,children:(0,E.jsx)(Ta,{hideBorder:!0,children:s.map(((e,t)=>(0,E.jsx)(Na.O,{label:e.label,icon:e.icon,active:e.value===a,onChangeTab:()=>n(e)},`${e.value}-${t}`)))})}),Ia=({children:e})=>(0,E.jsx)("div",{className:"share-modal-body",children:(0,E.jsx)("div",{className:"share-modal-header",children:(0,E.jsx)("div",{className:"share-modal-content",children:e})})});function Pa(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ma=A.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class Fa extends A.Component{constructor(e){super(e),Pa(this,"showModal",((e,t)=>{this.setState({component:e,props:t})})),Pa(this,"hideModal",(()=>{this.setState({component:null,props:{}})})),this.state={component:e.component||null,props:e.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return(0,E.jsx)(Ma.Provider,{value:this.state,children:this.props.children})}}const Aa=()=>(0,E.jsx)(Ma.Consumer,{children:({component:e,props:t})=>e?(0,E.jsx)(e,Object.assign({},t)):null}),Da=Ma.Consumer,$a=A.memo((({title:e,parent:t,pageIcon:s,onGoBack:a,children:n,titleHref:i,parentHref:r,leftItems:o,isFullscreen:l,className:c})=>{const d=(0,we.wW)(La),u=(0,D.cx)("page-toolbar",d.toolbar,{"page-toolbar--fullscreen":l},c);return(0,E.jsxs)("div",{className:u,children:[s&&!a&&(0,E.jsx)("div",{className:d.pageIcon,children:(0,E.jsx)(M.J,{name:s,size:"lg","aria-hidden":!0})}),a&&(0,E.jsx)("div",{className:d.pageIcon,children:(0,E.jsx)(F.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl",surface:"dashboard","aria-label":Ae.wl.components.BackButton.backArrow,onClick:a})}),(0,E.jsxs)("nav",{"aria-label":"Search links",className:d.navElement,children:[t&&r&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(Od,{"aria-label":`Search dashboard in the ${t} folder`,className:(0,D.cx)(d.titleText,d.parentLink,d.titleLink),href:r,children:[t," ",(0,E.jsx)("span",{className:d.parentIcon})]}),i&&(0,E.jsx)("span",{className:(0,D.cx)(d.titleText,d.titleDivider,d.parentLink),"aria-hidden":!0,children:"/"})]}),i&&(0,E.jsx)("h1",{className:d.h1Styles,children:(0,E.jsx)(Od,{"aria-label":"Search dashboard by name",className:(0,D.cx)(d.titleText,d.titleLink),href:i,children:e})}),!i&&(0,E.jsx)("h1",{className:d.titleText,children:e})]}),null==o?void 0:o.map(((e,t)=>(0,E.jsx)("div",{className:d.leftActionItem,children:e},t))),(0,E.jsx)("div",{className:d.spacer}),A.Children.toArray(n).filter(Boolean).map(((e,t)=>(0,E.jsx)("div",{className:d.actionWrapper,children:e},t)))]})}));$a.displayName="PageToolbar";const La=e=>{const{spacing:t,typography:s}=e,a=(0,pt.getFocusStyles)(e),n=D.css`
    font-size: ${s.size.lg};
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0;
    max-width: 240px;
    border-radius: 2px;

    @media ${$.GU.mediaUp(e.v1.breakpoints.xl)} {
      max-width: unset;
    }
  `;return{toolbar:D.css`
      align-items: center;
      background: ${e.colors.background.canvas};
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
      padding: ${e.spacing(1.5,2)};
    `,spacer:D.css`
      flex-grow: 1;
    `,pageIcon:D.css`
      display: none;
      @media ${$.GU.mediaUp(e.v1.breakpoints.md)} {
        display: flex;
        padding-right: ${e.spacing(1)};
        align-items: center;
      }
    `,titleWrapper:D.css`
      display: flex;
      align-items: center;
      min-width: 0;
      overflow: hidden;
    `,navElement:D.css`
      display: flex;
    `,h1Styles:D.css`
      margin: 0;
      line-height: inherit;
      display: flex;
    `,parentIcon:D.css`
      margin-left: ${e.spacing(.5)};
    `,titleText:n,titleLink:D.css`
      &:focus-visible {
        ${a}
      }
    `,titleDivider:D.css`
      padding: ${t(0,.5,0,.5)};
    `,parentLink:D.css`
      display: none;
      @media ${$.GU.mediaUp(e.v1.breakpoints.md)} {
        display: unset;
      }
    `,actionWrapper:D.css`
      padding: ${t(.5,0,.5,1)};
    `,leftActionItem:D.css`
      display: none;
      @media ${$.GU.mediaUp(e.v1.breakpoints.md)} {
        align-items: center;
        display: flex;
        padding-left: ${t(.5)};
      }
    `}};var Ea=s("./node_modules/rxjs/dist/esm5/internal/Subject.js"),Ra=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),_a=s("./node_modules/rxjs/dist/esm5/internal/observable/never.js"),Va=s("./node_modules/rxjs/dist/esm5/internal/observable/interval.js"),Ba=s("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),za=s("./node_modules/rxjs/dist/esm5/internal/operators/tap.js");function Ua(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class qa extends A.PureComponent{constructor(e){super(e),Ua(this,"propsSubject",void 0),Ua(this,"subscription",void 0),this.propsSubject=new Ea.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,Ba.w)((e=>Le.isLive(e.interval)?(0,Ra.of)({}):e.loading?_a.C:(0,Va.F)((0,Ee.stringToMs)(e.interval)))),(0,za.b)((()=>this.props.func()))).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(e){Le.isLive(e.interval)&&Le.isLive(this.props.interval)||(0,Tt.isEqual)(e,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}var Ha=s("./node_modules/react-table/index.js"),Ga=s("./node_modules/react-window/dist/index.esm.js"),Wa=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),Za=s("./packages/grafana-ui/src/components/Table/types.ts"),Qa=s("./node_modules/tinycolor2/tinycolor.js"),Ka=s.n(Qa);const Ya=({cell:e,field:t,tableStyles:s,onCellFilterAdded:a})=>{const n=(0,A.useCallback)((s=>a({key:t.name,operator:Za.PT,value:e.value})),[e,t,a]),i=(0,A.useCallback)((s=>a({key:t.name,operator:Za.tE,value:e.value})),[e,t,a]);return(0,E.jsxs)("div",{className:s.filterWrapper,children:[(0,E.jsx)("div",{className:s.filterItem,children:(0,E.jsx)(U.u,{content:"Filter for value",placement:"top",children:(0,E.jsx)(M.J,{name:"search-plus",onClick:n})})}),(0,E.jsx)("div",{className:s.filterItem,children:(0,E.jsx)(U.u,{content:"Filter out value",placement:"top",children:(0,E.jsx)(M.J,{name:"search-minus",onClick:i})})})]})},Ja=e=>{const{field:t,cell:s,tableStyles:a,row:n,cellProps:i}=e,r=t.display(s.value);let o;o=A.isValidElement(s.value)?s.value:(0,Ee.formattedValueToString)(r);const l=function(e,t,s){var a,n,i;if((null===(a=t.config.custom)||void 0===a?void 0:a.displayMode)===Za.h2.ColorText)return e.buildCellContainerStyle(s.color);if((null===(n=t.config.custom)||void 0===n?void 0:n.displayMode)===Za.h2.ColorBackgroundSolid){const t=Ka()(s.color),a=(0,Ws.Gc)(s.color);return e.buildCellContainerStyle(a,t.toRgbString())}if((null===(i=t.config.custom)||void 0===i?void 0:i.displayMode)===Za.h2.ColorBackground){const t=e.theme.isDark?1:-.7,a=Ka()(s.color).darken(10*t).spin(5).toRgbString(),n=(0,Ws.Gc)(s.color);return e.buildCellContainerStyle(n,`linear-gradient(120deg, ${a}, ${s.color})`)}return e.cellContainer}(a,t,r),c=t.config.filterable,{link:d,onClick:u}=(0,Ws.iu)(t,n);return(0,E.jsxs)("div",Object.assign({},i,{className:l,children:[!d&&(0,E.jsx)("div",{className:a.cellText,children:o}),d&&(0,E.jsx)("a",{href:d.href,onClick:u,target:d.target,title:d.title,className:a.cellLink,children:o}),c&&void 0!==s.value&&(0,E.jsx)(Ya,Object.assign({},e))]}))};var Xa=s("./packages/grafana-ui/src/components/FormattedValueDisplay/FormattedValueDisplay.tsx"),en=s("./packages/grafana-ui/src/utils/measureText.ts");const tn=1.5;let sn;!function(e){e.Basic="basic",e.Lcd="lcd",e.Gradient="gradient"}(sn||(sn={}));class an extends A.PureComponent{render(){const{onClick:e,className:t}=this.props,{title:s}=this.props.value,a=function(e){const t={display:"flex",overflow:"hidden",width:"100%"},s=rn(e),a={fontSize:`${s.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};nn(e.orientation)?(t.flexDirection="column-reverse",a.textAlign="center"):"above"===s.placement?t.flexDirection="column":(t.flexDirection="row",a.width=`${s.width}px`,a.textAlign="right",a.paddingRight="10px");return{wrapper:t,title:a}}(this.props);return s?(0,E.jsxs)("div",{style:a.wrapper,onClick:e,className:t,children:[(0,E.jsx)("div",{style:a.title,children:s}),this.renderBarAndValue()]}):(0,E.jsx)("div",{style:a.wrapper,onClick:e,className:t,children:this.renderBarAndValue()})}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:e,showUnfilled:t}=this.props,s=function(e){var t,s;const{displayMode:a,field:n,value:i,alignmentFactors:r,orientation:o,theme:l,text:c}=e,{valueWidth:d,valueHeight:u,maxBarHeight:p,maxBarWidth:h}=on(e),g=null!==(t=n.min)&&void 0!==t?t:Ee.GAUGE_DEFAULT_MINIMUM,m=null!==(s=n.max)&&void 0!==s?s:Ee.GAUGE_DEFAULT_MAXIMUM,f=cn(i.numeric,g,m),b=un(e),v=pn(r||i,b,d,u,o,c),x="basic"===a,y={display:"flex",flexGrow:1},w={borderRadius:"3px",position:"relative",zIndex:1},j={background:`rgba(${l.isDark?"255,255,255":"0,0,0"}, 0.07)`,flexGrow:1,display:"flex",borderRadius:"3px",position:"relative"};if(nn(o)){const t=Math.max(f*p,1);y.flexDirection="column",y.justifyContent="flex-end",w.transition="height 1s",w.height=`${t}px`,w.width=`${h}px`,j.bottom="-3px",x?(w.background=`${Ka()(b).setAlpha(.35).toRgbString()}`,w.borderTop=`2px solid ${b}`):w.background=dn(e,p)}else{const t=Math.max(f*h,1);y.flexDirection="row-reverse",y.justifyContent="flex-end",y.alignItems="stretch",w.transition="width 1s",w.height=`${p}px`,w.width=`${t}px`,j.left="-3px",x?(w.background=`${Ka()(b).setAlpha(.35).toRgbString()}`,w.borderRight=`2px solid ${b}`):w.background=dn(e,h)}return{wrapper:y,bar:w,value:v,emptyBar:j}}(this.props);return(0,E.jsxs)("div",{style:s.wrapper,children:[(0,E.jsx)(Xa.W,{"aria-label":Ae.wl.components.Panels.Visualization.BarGauge.value,value:e,style:s.value}),t&&(0,E.jsx)("div",{style:s.emptyBar}),(0,E.jsx)("div",{style:s.bar})]})}renderRetroBars(){var e,t;const{display:s,field:a,value:n,itemSpacing:i,alignmentFactors:r,orientation:o,lcdCellWidth:l,text:c}=this.props,{valueHeight:d,valueWidth:u,maxBarHeight:p,maxBarWidth:h,wrapperWidth:g,wrapperHeight:m}=on(this.props),f=null!==(e=a.min)&&void 0!==e?e:Ee.GAUGE_DEFAULT_MINIMUM,b=null!==(t=a.max)&&void 0!==t?t:Ee.GAUGE_DEFAULT_MAXIMUM,v=nn(o),x=b-f,y=v?p:h,w=i,j=Math.floor(y/l),k=Math.floor((y-w*j)/j),S=pn(r||n,un(this.props),u,d,o,c),C={width:`${g}px`,height:`${m}px`,display:"flex"};v?(C.flexDirection="column-reverse",C.alignItems="center"):(C.flexDirection="row",C.alignItems="center",S.justifyContent="flex-end");const T=[];for(let e=0;e<j;e++){const t=ln(f+x/j*e,n,s),a={borderRadius:"2px"};t.isLit?a.backgroundImage=`radial-gradient(${t.background} 10%, ${t.backgroundShade})`:a.backgroundColor=t.background,v?(a.height=`${k}px`,a.width=`${h}px`,a.marginTop=`${w}px`):(a.width=`${k}px`,a.height=`${p}px`,a.marginRight=`${w}px`),T.push((0,E.jsx)("div",{style:a},e.toString()))}return(0,E.jsxs)("div",{style:C,children:[T,(0,E.jsx)(Xa.W,{"aria-label":Ae.wl.components.Panels.Visualization.BarGauge.value,value:n,style:S})]})}}function nn(e){return e===Ee.VizOrientation.Vertical}function rn(e){var t;const{height:s,width:a,alignmentFactors:n,orientation:i,text:r}=e,o=n?n.title:e.value.title;if(!o)return{fontSize:0,width:0,height:0,placement:"above"};if(nn(i)){var l;const e=null!==(l=null==r?void 0:r.titleSize)&&void 0!==l?l:14;return{fontSize:e,width:a,height:e*tn,placement:"below"}}if(s>40){if(null!=r&&r.titleSize)return{fontSize:null==r?void 0:r.titleSize,width:0,height:r.titleSize*tn,placement:"above"};const e=.45,t=Math.max(Math.min(s*e,50),17);return{fontSize:t/tn,width:0,height:t,placement:"above"}}const c=Math.max(.6*s,18)/tn,d=(0,en.X1)(o,c);return{fontSize:null!==(t=null==r?void 0:r.titleSize)&&void 0!==t?t:c,height:0,width:d.width+15,placement:"left"}}function on(e){var t;const{height:s,width:a,orientation:n,text:i,alignmentFactors:r}=e,o=rn(e),l=null!=r?r:e.value,c=(0,Ee.formattedValueToString)(l);let d=0,u=0,p=0,h=0,g=0,m=0;const f=null!==(t=null==i?void 0:i.valueSize)&&void 0!==t?t:Math.max(o.fontSize,12),b=(0,en.X1)(c,f).width+20;return nn(n)?(p=null!=i&&i.valueSize?1*i.valueSize:Math.min(Math.max(.1*s,18),50),h=a,d=s-(o.height+p),u=a,g=a,m=s-o.height):(p=s-o.height,h=Math.max(Math.min(.2*a,150),b),d=s-o.height,u=a-h-o.width,"above"===o.placement?(g=a,m=s-o.height):(g=a-o.width,m=s)),{valueWidth:h,valueHeight:p,maxBarWidth:u,maxBarHeight:d,wrapperHeight:m,wrapperWidth:g}}function ln(e,t,s){if(null===e)return{background:Ee.FALLBACK_COLOR,border:Ee.FALLBACK_COLOR};const a=s?s(e).color:null;return a?null===t||isNaN(t.numeric)||null!==e&&e>t.numeric?{background:Ka()(a).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:Ka()(a).setAlpha(.95).toRgbString(),backgroundShade:Ka()(a).setAlpha(.55).toRgbString(),border:Ka()(a).setAlpha(.9).toRgbString(),isLit:!0}:{background:Ee.FALLBACK_COLOR,border:Ee.FALLBACK_COLOR}}function cn(e,t,s){return Math.min((e-t)/(s-t),1)}function dn(e,t){var s,a;const{field:n,value:i,orientation:r,theme:o}=e,l=nn(r)?"0deg":"90deg",c=n.min,d=n.max;let u="",p=0,h=(0,Ee.getFieldColorMode)(null===(s=n.color)||void 0===s?void 0:s.mode);if(h.id===Ee.FieldColorModeId.Thresholds){const s=n.thresholds;for(let a=0;a<s.steps.length;a++){const n=s.steps[a],r=e.theme.visualization.getColorByName(n.color),o=s.mode===Ee.ThresholdsMode.Percentage?n.value/100:cn(n.value,c,d),h=o*t,g=Math.round(h-(h-p)/2),m=s.mode===Ee.ThresholdsMode.Percentage?c+(d-c)*o:n.value;if(""===u)u=`linear-gradient(${l}, ${r}, ${r}`;else{if(i.numeric<m)break;p=h,u+=` ${g}px, ${r}`}}return u+")"}if(h.isContinuous&&h.getColors){const e=h.getColors(o);for(let s=0;s<e.length;s++){const a=e[s];if(""===u)u=`linear-gradient(${l}, ${a} 0px`;else{u+=`, ${a} ${s/(e.length-1)*t}px`}}return u+")"}return null!==(a=i.color)&&void 0!==a?a:Ee.FALLBACK_COLOR}function un(e){const{value:t}=e;return t.color?t.color:Ee.FALLBACK_COLOR}function pn(e,t,s,a,n,i){const r={color:t,height:`${a}px`,width:`${s}px`,display:"flex",alignItems:"center",lineHeight:1};let o=s;const l=(0,Ee.formattedValueToString)(e);var c,d;nn(n)?(r.fontSize=null!==(c=null==i?void 0:i.valueSize)&&void 0!==c?c:(0,en.MX)(l,o,a,1),r.justifyContent="center"):(r.fontSize=null!==(d=null==i?void 0:i.valueSize)&&void 0!==d?d:(0,en.MX)(l,o-20,a,1),r.justifyContent="flex-end",r.paddingLeft="10px",r.paddingRight="10px",o-=10);return r}!function(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}(an,"defaultProps",{lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:sn.Gradient,orientation:Ee.VizOrientation.Horizontal,field:{min:0,max:100,thresholds:{mode:Ee.ThresholdsMode.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0});const hn={mode:Ee.ThresholdsMode.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},gn=e=>{const{field:t,innerWidth:s,tableStyles:a,cell:n,cellProps:i}=e;let r=(0,Ee.getFieldConfigWithMinMax)(t,!1);r.thresholds||(r=Object.assign({},r,{thresholds:hn}));const o=t.display(n.value);let l=sn.Gradient;return t.config.custom&&t.config.custom.displayMode===Za.h2.LcdGauge?l=sn.Lcd:t.config.custom&&t.config.custom.displayMode===Za.h2.BasicGauge&&(l=sn.Basic),(0,E.jsx)("div",Object.assign({},i,{className:a.cellContainer,children:(0,E.jsx)(an,{width:s,height:a.cellHeightInner,field:r,display:t.display,text:{valueSize:14},value:o,orientation:Ee.VizOrientation.Horizontal,theme:a.theme,itemSpacing:1,lcdCellWidth:8,displayMode:l})}))};function mn(e){return!!e&&"object"===typeof e}function fn(e){if(void 0===e)return"";if(null===e)return"Object";if("object"==typeof e&&!e.constructor)return"Object";const t=/function ([^(]*)/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""}function bn(e){return null===e?"null":typeof e}function vn(e,t){const s=bn(e);return"null"===s||"undefined"===s?s:("string"===s&&(t='"'+(t.replace('"','"')+'"')),"function"===s?e.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{…}":t)}function xn(e){return`json-formatter-${e}`}function yn(e,t,s){const a=document.createElement(e);return t&&a.classList.add(xn(t)),void 0!==s&&(s instanceof Node?a.appendChild(s):a.appendChild(document.createTextNode(String(s)))),a}function wn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const jn=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,kn=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,Sn=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,Cn=window.requestAnimationFrame||(e=>(e(),0)),Tn={animateOpen:!0,animateClose:!0};class Nn{constructor(e,t=1,s=Tn,a){wn(this,"_isOpen",null),wn(this,"element",null),wn(this,"skipChildren",!1),this.json=e,this.open=t,this.config=s,this.key=a}get isOpen(){return null!==this._isOpen?this._isOpen:this.open>0}set isOpen(e){this._isOpen=e}get isDate(){return"string"===this.type&&(jn.test(this.json)||Sn.test(this.json)||kn.test(this.json))}get isUrl(){return"string"===this.type&&0===this.json.indexOf("http")}get isArray(){return Array.isArray(this.json)}get isObject(){return mn(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return void 0!==this.key}get constructorName(){return fn(this.json)}get type(){return bn(this.json)}get keys(){return this.isObject?Object.keys(this.json).map((e=>e||'""')):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(xn("open")))}openAtDepth(e=1){e<0||(this.open=e,this.isOpen=0!==e,this.element&&(this.removeChildren(!1),0===e?this.element.classList.remove(xn("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(xn("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,Tt.isNumber)(this.json[0])||(0,Tt.isNumber)(this.json[1]))}renderArray(){const e=yn("span");return e.appendChild(yn("span","bracket","[")),this.isNumberArray()?(this.json.forEach(((t,s)=>{s>0&&e.appendChild(yn("span","array-comma",",")),e.appendChild(yn("span","number",t))})),this.skipChildren=!0):e.appendChild(yn("span","number",this.json.length)),e.appendChild(yn("span","bracket","]")),e}render(e=!1){this.element=yn("div","row");const t=yn("a","toggler-link"),s=yn("span","toggler");if(this.isObject&&t.appendChild(s),this.hasKey&&t.appendChild(yn("span","key",`${this.key}:`)),this.isObject){const e=yn("span","value"),s=yn("span"),a=yn("span","constructor-name",this.constructorName);if(s.appendChild(a),this.isArray){const e=this.renderArray();s.appendChild(e)}e.appendChild(s),t.appendChild(e)}else{const e=this.isUrl?yn("a"):yn("span");e.classList.add(xn(this.type)),this.isDate&&e.classList.add(xn("date")),this.isUrl&&(e.classList.add(xn("url")),e.setAttribute("href",this.json));const s=vn(this.json,this.json);e.appendChild(document.createTextNode(s)),t.appendChild(e)}const a=yn("div","children");return this.isObject&&a.classList.add(xn("object")),this.isArray&&a.classList.add(xn("array")),this.isEmpty&&a.classList.add(xn("empty")),this.config&&this.config.theme&&this.element.classList.add(xn(this.config.theme)),this.isOpen&&this.element.classList.add(xn("open")),e||this.element.appendChild(t),this.skipChildren?t.removeChild(s):this.element.appendChild(a),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&t.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(e=!1){const t=this.element&&this.element.querySelector(`div.${xn("children")}`);if(t&&!this.isEmpty)if(e){let e=0;const s=()=>{const a=this.keys[e],n=new Nn(this.json[a],this.open-1,this.config,a);t.appendChild(n.render()),e+=1,e<this.keys.length&&(e>10?s():Cn(s))};Cn(s)}else this.keys.forEach((e=>{const s=new Nn(this.json[e],this.open-1,this.config,e);t.appendChild(s.render())}))}removeChildren(e=!1){const t=this.element&&this.element.querySelector(`div.${xn("children")}`);if(e){let e=0;const s=()=>{t&&t.children.length&&(t.removeChild(t.children[0]),e+=1,e>10?s():Cn(s))};Cn(s)}else t&&(t.innerHTML="")}}function On(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class In extends A.PureComponent{constructor(...e){super(...e),On(this,"wrapperRef",(0,A.createRef)()),On(this,"renderJson",(()=>{const{json:e,config:t,open:s,onDidRender:a}=this.props,n=this.wrapperRef.current,i=new Nn(e,s,t);n.hasChildNodes()?n.replaceChild(i.render(),n.lastChild):n.appendChild(i.render()),a&&a(i.json)}))}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:e}=this.props;return(0,E.jsx)("div",{className:e,ref:this.wrapperRef})}}function Pn(e){const{cell:t,tableStyles:s,cellProps:a}=e,n=D.css`
    cursor: pointer;
    font-family: monospace;
  `;let i=t.value,r=i;if((0,Tt.isString)(i))try{i=JSON.parse(i)}catch{}else r=JSON.stringify(i);const o=(0,E.jsx)(Mn,{value:i});return(0,E.jsx)(U.u,{placement:"auto-start",content:o,theme:"info-alt",children:(0,E.jsx)("div",Object.assign({},a,{className:s.cellContainer,children:(0,E.jsx)("div",{className:(0,D.cx)(s.cellText,n),children:r})}))})}function Mn(e){const t=(0,$.wW)(Fn);return(0,E.jsx)("div",{className:t.container,children:(0,E.jsx)("div",{children:(0,E.jsx)(In,{json:e.value,open:4,className:t.json})})})}function Fn(e){return{container:D.css`
      padding: ${e.spacing(.5)};
    `,json:D.css`
      width: fit-content;
      max-height: 70vh;
      overflow-y: auto;
    `}}On(In,"defaultProps",{open:3,config:{animateOpen:!0}});const An=e=>{const{field:t,cell:s,tableStyles:a,row:n,cellProps:i}=e,r=t.display(s.value),{link:o,onClick:l}=(0,Ws.iu)(t,n);return(0,E.jsxs)("div",Object.assign({},i,{className:a.cellContainer,children:[!o&&(0,E.jsx)("img",{src:r.text,className:a.imageCell}),o&&(0,E.jsx)("a",{href:o.href,onClick:l,target:o.target,title:o.title,className:a.imageCellLink,children:(0,E.jsx)("img",{src:r.text,className:a.imageCell})})]}))},Dn=e=>{const{colors:t}=e,s=e.colors.background.secondary,a=e.colors.border.weak,n=e.colors.primary.border,i=e.typography.body.lineHeight,r=12+14*i,o=e.colors.emphasize(e.colors.background.primary,.03),l=Math.max((0,Ws.np)(),6),c=(t,s)=>D.css`
      padding: ${6}px;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      border-right: 1px solid ${a};

      ${t?`color: ${t};`:""};
      ${s?`background: ${s};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
        padding-right: ${l}px;
      }

      &:hover {
        overflow: visible;
        width: auto !important;
        box-shadow: 0 0 2px ${e.colors.primary.main};
        background: ${null!=s?s:o};
        z-index: 1;

        .cell-filter-actions  {
          display: inline-flex;
        }
      }
      a {
        color: inherit;
      }
    `;return{theme:e,cellHeight:r,buildCellContainerStyle:c,cellPadding:6,lastChildExtraPadding:l,cellHeightInner:14*i,rowHeight:r+2,table:D.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
    `,thead:D.css`
      label: thead;
      height: ${r}px;
      overflow-y: auto;
      overflow-x: hidden;
      background: ${s};
      position: relative;
    `,tfoot:D.css`
      label: tfoot;
      height: ${r}px;
      overflow-y: auto;
      overflow-x: hidden;
      background: ${s};
      position: relative;
    `,headerCell:D.css`
      padding: ${6}px;
      overflow: hidden;
      white-space: nowrap;
      color: ${t.primary.text};
      border-right: 1px solid ${e.colors.border.weak};
      display: flex;

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:D.css`
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: flex;
      margin-right: ${e.spacing(.5)};
    `,cellContainer:c(),cellText:D.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,cellLink:D.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      text-decoration: underline;
    `,imageCellLink:D.css`
      cursor: pointer;
      overflow: hidden;
      width: 100%;
      height: 100%;
    `,headerFilter:D.css`
      label: headerFilter;
      cursor: pointer;
    `,row:D.css`
      label: row;
      border-bottom: 1px solid ${a};

      &:hover {
        background-color: ${o};
      }
    `,imageCell:D.css`
      height: 100%;
    `,resizeHandle:D.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${n};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: 3px;
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,filterWrapper:(0,D.cx)(D.css`
        label: filterWrapper;
        display: none;
        justify-content: flex-end;
        flex-grow: 1;
        opacity: 0.6;
        padding-left: ${e.spacing(.25)};
      `,"cell-filter-actions"),filterItem:D.css`
      label: filterItem;
      cursor: pointer;
      padding: 0 ${e.spacing(.025)};
    `,noData:D.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `}};var $n;const Ln=e=>$n||($n=(0,E.jsx)("span",{children:" "})),En=["key"];const Rn=e=>{const{totalColumnsWidth:t,footerGroups:s,footerValues:a}=e,n=Ae.wl.components.Panels.Visualization.Table,i=(0,$.wW)(Dn);if(!a)return null;let r,o=0;for(const e of a)Array.isArray(e)&&e.length>o&&(o=e.length);return a&&o>1&&(r=27*o),(0,E.jsx)("table",{style:{position:"absolute",width:t?`${t}px`:"100%",bottom:"0px"},children:s.map((e=>{const t=e.getFooterGroupProps(),{key:s}=t,a=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,En);return(0,A.createElement)("tfoot",Object.assign({className:i.tfoot},a,{key:s,"data-testid":n.footer,style:r?{height:`${r}px`}:void 0}),(0,E.jsx)("tr",{children:e.headers.map(((e,t)=>function(e,t,s){var a;const n=e.getHeaderProps();if(!n)return null;n.style=null!==(a=n.style)&&void 0!==a?a:{},n.style.position="absolute",n.style.justifyContent=e.justifyContent,s&&(n.style.height=s);return(0,E.jsx)("th",Object.assign({className:t.headerCell},n,{children:e.render("Footer")}))}(e,i,r)))}))}))})};function _n(e,t){return void 0===t?Ln:(e=>{const t=D.css`
    width: 100%;
    list-style: none;
  `,s=D.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return e.value&&!Array.isArray(e.value)?(0,E.jsx)("span",{children:e.value}):e.value&&Array.isArray(e.value)&&e.value.length>0?(0,E.jsx)("ul",{className:t,children:e.value.map(((e,t)=>{const a=Object.keys(e)[0];return(0,E.jsxs)("li",{className:s,children:[(0,E.jsxs)("span",{children:[a,":"]}),(0,E.jsx)("span",{children:e[a]})]},t)}))}):Ln})({value:t[e]})}function Vn(e){if(!e)return"flex-start";if(e.config.custom){switch(e.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}}return e.type===Ee.FieldType.number?"flex-end":"flex-start"}function Bn(e,t){switch(e){case Za.h2.ColorText:case Za.h2.ColorBackground:return Ja;case Za.h2.Image:return An;case Za.h2.LcdGauge:case Za.h2.BasicGauge:case Za.h2.GradientGauge:return gn;case Za.h2.JSONView:return Pn}return t.type===Ee.FieldType.other?Pn:Ja}function zn(e){return function(t,s,a){return 0===t.length?t:a&&e?t.filter((t=>{if(!t.values.hasOwnProperty(s))return!1;const n=Un(t,e);return void 0!==a.find((e=>e.value===n))})):t}}function Un(e,t){if(!t||!e)return"";const s=t.values.get(e.index),a=t.display?t.display(s):s;return t.display?(0,Ee.formattedValueToString)(a):a}function qn(e,t){return void 0===e.label&&void 0===t.label?0:void 0===e.label&&void 0!==t.label?-1:void 0!==e.label&&void 0===t.label?1:e.label<t.label?-1:e.label>t.label?1:0}function Hn(e,t,s){return String(e.values[s]).localeCompare(String(t.values[s]),void 0,{sensitivity:"base"})}function Gn(e,t,s){const a=Wn(e.values[s]),n=Wn(t.values[s]);return a===n?0:a>n?1:-1}function Wn(e){return"number"==typeof e?e:null==e||""===e||isNaN(e)?Number.NEGATIVE_INFINITY:Number(e)}const Zn=({cell:e,field:t,tableStyles:s,onCellFilterAdded:a,columnIndex:n,columnCount:i})=>{var r;const o=e.getCellProps();if(!t.display)return null;o.style&&(o.style.minWidth=o.style.width,o.style.justifyContent=e.column.justifyContent);let l=(null!==(r=e.column.width)&&void 0!==r?r:24)-2*s.cellPadding;return n===i-1&&(l-=s.lastChildExtraPadding),e.render("Cell",{field:t,tableStyles:s,onCellFilterAdded:a,cellProps:o,innerWidth:l})};var Qn;const Kn=({options:e,values:t,onChange:s})=>{const a=(0,$.l4)(),n=Yn(a),[i,r]=(0,A.useState)(""),o=(0,A.useMemo)((()=>e.filter((e=>{var t;return null===(t=e.label)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase())}))),[e,i]),l=a.spacing.gridSize,c=(0,A.useMemo)((()=>Math.min(28*o.length,140)+l),[l,o.length]),d=(0,A.useCallback)((e=>{r(e)}),[r]),u=(0,A.useCallback)((e=>a=>{const n=a.currentTarget.checked?t.concat(e):t.filter((t=>t.value!==e.value));s(n)}),[s,t]);return(0,E.jsxs)(Yi.wc,{spacing:"md",children:[(0,E.jsx)(zd,{placeholder:"Filter values",onChange:d,value:i}),!o.length&&(Qn||(Qn=(0,E.jsx)(bd._,{children:"No values"}))),o.length&&(0,E.jsx)(Ga.t7,{height:c,itemCount:o.length,itemSize:28,width:"100%",className:n.filterList,children:({index:e,style:s})=>{const a=o[e],{value:i,label:r}=a,l=void 0!==t.find((e=>e.value===i));return(0,E.jsx)("div",{className:n.filterListRow,style:s,title:r,children:(0,E.jsx)(kd,{value:l,label:r,onChange:u(a)})})}})]})},Yn=(0,$.Bb)((e=>({filterList:D.css`
    label: filterList;
  `,filterListRow:D.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${e.spacing(.5)};

    :hover {
      background-color: ${e.colors.action.hover};
    }
  `})));var Jn;const Xn=({column:{preFilteredRows:e,filterValue:t,setFilter:s},onClose:a,field:n})=>{const i=(0,A.useMemo)((()=>function(e,t){if(!t||0===e.length)return{};const s={};for(let a=0;a<e.length;a++){const n=Un(e[a],t);s[n||"(Blanks)"]=n}return s}(e,n)),[e,n]),r=(0,A.useMemo)((()=>{return e=i,Object.keys(e).reduce(((t,s)=>t.concat({value:e[s],label:s})),[]).sort(qn);var e}),[i]),o=(0,A.useMemo)((()=>function(e,t){return t?e.filter((e=>t.some((t=>t.value===e.value)))):[]}(r,t)),[r,t]),[l,c]=(0,A.useState)(o),d=(0,A.useCallback)((e=>a()),[a]),u=(0,A.useCallback)((e=>{const t=l.length?l:void 0;s(t),a()}),[s,l,a]),p=(0,A.useCallback)((e=>{s(void 0),a()}),[s,a]),h=(0,A.useMemo)((()=>void 0!==t),[t]),g=(0,$.yK)(ei);return(0,E.jsx)(ye.L,{onClick:d,useCapture:!0,children:(0,E.jsx)("div",{className:(0,D.cx)(g.filterContainer),onClick:ti,children:(0,E.jsxs)(Yi.wc,{spacing:"lg",children:[(0,E.jsxs)(Yi.wc,{spacing:"xs",children:[Jn||(Jn=(0,E.jsx)(bd._,{children:"Filter by values:"})),(0,E.jsx)("div",{className:(0,D.cx)(g.listDivider)}),(0,E.jsx)(Kn,{onChange:c,values:l,options:r})]}),(0,E.jsxs)(Yi.Lh,{spacing:"lg",children:[(0,E.jsxs)(Yi.Lh,{children:[(0,E.jsx)(L.zx,{size:"sm",onClick:u,children:"Ok"}),(0,E.jsx)(L.zx,{size:"sm",variant:"secondary",onClick:d,children:"Cancel"})]}),h&&(0,E.jsx)(Yi.Lh,{children:(0,E.jsx)(L.zx,{fill:"text",size:"sm",onClick:p,children:"Clear filter"})})]})]})})})},ei=(0,$.Bb)((e=>({filterContainer:D.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${e.colors.bg1};
    border: ${e.border.width.sm} solid ${e.colors.border2};
    padding: ${e.spacing.md};
    margin: ${e.spacing.sm} 0;
    box-shadow: 0px 0px 20px ${e.colors.dropdownShadow};
    border-radius: ${e.spacing.xs};
  `,listDivider:D.css`
    label: listDivider;
    width: 100%;
    border-top: ${e.border.width.sm} solid ${e.colors.border2};
    padding: ${e.spacing.xs} ${e.spacing.md};
  `}))),ti=e=>{e.stopPropagation()};var si;const ai=({column:e,field:t,tableStyles:s})=>{var a;const n=(0,A.useRef)(null),[i,r]=(0,A.useState)(!1),o=(0,$.yK)(ni),l=(0,A.useMemo)((()=>Boolean(e.filterValue)),[e.filterValue]),c=(0,A.useCallback)((()=>r(!0)),[r]),d=(0,A.useCallback)((()=>r(!1)),[r]);return t&&null!==(a=t.config.custom)&&void 0!==a&&a.filterable?(0,E.jsxs)("span",{className:(0,D.cx)(s.headerFilter,l?o.filterIconEnabled:o.filterIconDisabled),ref:n,onClick:c,children:[si||(si=(0,E.jsx)(M.J,{name:"filter"})),i&&n.current&&(0,E.jsx)(H.J,{content:(0,E.jsx)(Xn,{column:e,tableStyles:s,field:t,onClose:d}),placement:"bottom-start",referenceElement:n.current,show:!0})]}):null},ni=(0,$.Bb)((e=>({filterIconEnabled:D.css`
    label: filterIconEnabled;
    color: ${e.colors.textBlue};
  `,filterIconDisabled:D.css`
    label: filterIconDisabled;
    color: ${e.colors.textFaint};
  `})));var ii,ri,oi=s("./packages/grafana-ui/src/types/index.ts");const li=["key"];const ci=e=>{const{headerGroups:t,data:s,showTypeIcons:a}=e,n=Ae.wl.components.Panels.Visualization.Table,i=(0,$.wW)(Dn);return(0,E.jsx)("div",{role:"rowgroup",children:t.map((e=>{const t=e.getHeaderGroupProps(),{key:r}=t,o=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,li);return(0,A.createElement)("div",Object.assign({className:i.thead},o,{key:r,"aria-label":n.header,role:"row"}),e.headers.map(((e,t)=>function(e,t,s,a){const n=e.getHeaderProps();e.canResize&&(n.style.userSelect=e.isResizing?"none":"auto");return n.style.position="absolute",n.style.justifyContent=e.justifyContent,(0,E.jsxs)("div",Object.assign({className:t.headerCell},n,{role:"columnheader",children:[e.canSort&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",Object.assign({},e.getSortByToggleProps(),{className:t.headerCellLabel,title:e.render("Header"),children:[a&&(0,E.jsx)(M.J,{name:(0,oi.e7)(s),title:null==s?void 0:s.type,size:"sm",style:{marginRight:"8px"}}),(0,E.jsx)("div",{children:e.render("Header")}),(0,E.jsx)("div",{children:e.isSorted&&(e.isSortedDesc?ii||(ii=(0,E.jsx)(M.J,{name:"arrow-down"})):ri||(ri=(0,E.jsx)(M.J,{name:"arrow-up"})))})]})),e.canFilter&&(0,E.jsx)(ai,{column:e,tableStyles:t,field:s})]}),!e.canSort&&e.render("Header"),!e.canSort&&e.canFilter&&(0,E.jsx)(ai,{column:e,tableStyles:t,field:s}),e.canResize&&(0,E.jsx)("div",Object.assign({},e.getResizerProps(),{className:t.resizeHandle}))]}))}(e,i,s.fields[t],a))))}))})};const di=150;function ui(e,t){const s={};if(e){s.sortBy=[];for(const a of e)for(const e of t)e.Header===a.displayName&&s.sortBy.push({id:e.id,desc:a.desc})}return s}const pi=(0,A.memo)((e=>{const{ariaLabel:t,data:s,height:a,onCellFilterAdded:n,width:i,columnMinWidth:r=di,noHeader:o,resizable:l=!0,initialSortBy:c,footerValues:d,showTypeIcons:u}=e,p=(0,$.wW)(Dn),h=(0,A.useMemo)((()=>s.fields.length?Array(s.length).fill(0):[]),[s]),g=(0,A.useMemo)((()=>function(e,t,s,a){const n=[];let i=e.fields.length;for(const[r,o]of e.fields.entries()){const l=o.config.custom||{};if(l.hidden)continue;l.width&&(t-=l.width,i-=1);const c=e=>{switch(e){case Ee.FieldType.number:return"number";case Ee.FieldType.time:return"basic";default:return"alphanumeric-insensitive"}},d=Bn(l.displayMode,o);n.push({Cell:d,id:r.toString(),Header:(0,Ee.getFieldDisplayName)(o,e),accessor:(e,t)=>o.values.get(t),sortType:c(o.type),width:l.width,minWidth:l.minWidth||s,filter:(0,Wa.default)(zn(o)),justifyContent:Vn(o),Footer:_n(r,a)})}let r=t/i;for(let e=i;e>0;e--)for(const e of n)!e.width&&e.minWidth>r&&(e.width=e.minWidth,i-=1,r=(t-=e.width)/i);for(const e of n)e.width||(e.width=r),e.minWidth=50;return n}(s,i,r,d)),[s,i,r,d]),m=function({onColumnResize:e,onSortByChange:t,data:s}){return(0,A.useCallback)(((a,n)=>{switch(n.type){case"columnDoneResizing":if(e){const t=a.columnResizing.headerIdWidths[0][0],n=parseInt(t,10),i=Math.round(a.columnResizing.columnWidths[t]),r=s.fields[n];if(!r)return a;const o=(0,Ee.getFieldDisplayName)(r,s);e(o,i)}case"toggleSortBy":if(t){const e=[];for(const t of a.sortBy){const a=s.fields[parseInt(t.id,10)];a&&e.push({displayName:(0,Ee.getFieldDisplayName)(a,s),desc:t.desc})}t(e)}}return a}),[s,e,t])}(e),f=(0,A.useMemo)((()=>({columns:g,data:h,disableResizing:!l,stateReducer:m,initialState:ui(c,g),sortTypes:{number:Gn,"alphanumeric-insensitive":Hn}})),[c,g,h,l,m]),{getTableProps:b,headerGroups:v,rows:x,prepareRow:y,totalColumnsWidth:w,footerGroups:j}=(0,Ha.useTable)(f,Ha.useFilters,Ha.useSortBy,Ha.useAbsoluteLayout,Ha.useResizeColumns),{fields:k}=s,S=A.useCallback((({index:e,style:t})=>{const s=x[e];return y(s),(0,E.jsx)("div",Object.assign({},s.getRowProps({style:t}),{className:p.row,children:s.cells.map(((e,t)=>(0,E.jsx)(Zn,{field:k[t],tableStyles:p,cell:e,onCellFilterAdded:n,columnIndex:t,columnCount:s.cells.length},t)))}))}),[k,n,y,x,p]),C=o?0:p.cellHeight;return(0,E.jsx)("div",Object.assign({},b(),{className:p.table,"aria-label":t,role:"table",children:(0,E.jsx)(W.$,{hideVerticalTrack:!0,children:(0,E.jsxs)("div",{style:{width:w?`${w}px`:"100%"},children:[!o&&(0,E.jsx)(ci,{data:s,headerGroups:v,showTypeIcons:u}),x.length>0?(0,E.jsx)(Ga.t7,{height:a-C,itemCount:x.length,itemSize:p.rowHeight,width:"100%",style:{overflow:"hidden auto"},children:S}):(0,E.jsx)("div",{style:{height:a-C},className:p.noData,children:"No data"}),(0,E.jsx)(Rn,{footerValues:d,footerGroups:j,totalColumnsWidth:w})]})})}))}));pi.displayName="Table";const hi=["invalid","className"];const gi=A.forwardRef(((e,t)=>{let{invalid:s,className:a}=e,n=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,hi);const i=(0,$.l4)(),r=mi(i,s);return(0,E.jsx)("textarea",Object.assign({},n,{className:(0,D.cx)(r.textarea,a),ref:t}))})),mi=(0,$.Bb)(((e,t=!1)=>({textarea:(0,D.cx)((0,Cs.RK)(e),(0,Cs.GL)(e.v1),D.css`
        border-radius: ${e.shape.borderRadius()};
        padding: ${e.spacing.gridSize/4}px ${e.spacing.gridSize}px;
        width: 100%;
        border-color: ${t?e.colors.error.border:e.components.input.borderColor};
      `)})));var fi;function bi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}gi.displayName="TextArea";class vi extends A.PureComponent{constructor(e){super(e),bi(this,"readCSV",(0,Tt.debounce)((()=>{const{config:e}=this.props,{text:t}=this.state;this.setState({data:(0,Ee.readCSV)(t,{config:e})})}),150)),bi(this,"onTextChange",(e=>{this.setState({text:e.target.value})}));const{text:t,config:s}=e;this.state={text:t,data:(0,Ee.readCSV)(t,{config:s})}}componentDidUpdate(e,t){const{text:s}=this.state;s===t.text&&this.props.config===e.config||this.readCSV(),this.props.text!==e.text&&this.props.text!==s&&this.setState({text:this.props.text}),this.state.data!==t.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:e,height:t,theme:s}=this.props,{data:a}=this.state,n=yi(s);return(0,E.jsxs)("div",{className:n.tableInputCsv,children:[(0,E.jsx)(gi,{style:{width:e,height:t},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:n.textarea}),a&&(0,E.jsx)("footer",{className:n.footer,children:a.map(((e,t)=>(0,E.jsxs)("span",{children:["Rows:",e.length,", Columns:",e.fields.length,"  ",fi||(fi=(0,E.jsx)(M.J,{name:"check-circle"}))]},t)))})]})}}const xi=(0,$.Zz)(vi);xi.displayName="TableInputCSV";const yi=(0,$.Bb)((e=>({tableInputCsv:D.css`
      position: relative;
    `,textarea:D.css`
      height: 100%;
      width: 100%;
    `,footer:D.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${e.palette.online};
      padding: 1px ${e.spacing.xs};
      font-size: 80%;
    `}))),wi=["children","className"];const ji=(0,$.Bb)((e=>({tabContent:D.css`
      background: ${e.colors.background.primary};
    `}))),ki=e=>{let{children:t,className:s}=e,a=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,wi);const n=(0,$.l4)(),i=ji(n);return(0,E.jsx)("div",Object.assign({},a,{className:(0,D.cx)(i.tabContent,s),children:t}))};var Si=s("./packages/grafana-ui/src/components/Tabs/Counter.tsx"),Ci=s("./packages/grafana-ui/src/components/BigValue/BigValue.tsx"),Ti=s("./node_modules/jquery/dist/jquery-exposed.js"),Ni=s.n(Ti);function Oi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Ii extends A.PureComponent{constructor(...e){super(...e),Oi(this,"canvasElement",void 0),Oi(this,"renderVisualization",(()=>{var e;const{width:t,value:s,height:a,onClick:n,text:i}=this.props,r=Pi(t,a,s.title);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{style:{height:`${r.gaugeHeight}px`,width:"100%"},ref:e=>this.canvasElement=e,onClick:n}),r.showLabel&&(0,E.jsx)("div",{style:{textAlign:"center",fontSize:null!==(e=null==i?void 0:i.titleSize)&&void 0!==e?e:r.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"},children:s.title})]})}))}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}getFormattedThresholds(e){var t,s,a,n,i;const{field:r,theme:o,value:l}=this.props;var c,d;if((null===(t=r.color)||void 0===t?void 0:t.mode)!==Ee.FieldColorModeId.Thresholds)return[{value:null!==(c=r.min)&&void 0!==c?c:Ee.GAUGE_DEFAULT_MINIMUM,color:null!==(d=l.color)&&void 0!==d?d:Ee.FALLBACK_COLOR}];const u=null!==(s=r.thresholds)&&void 0!==s?s:null===(a=Ii.defaultProps.field)||void 0===a?void 0:a.thresholds,p=u.mode===Ee.ThresholdsMode.Percentage,h=u.steps;let g=null!==(n=r.min)&&void 0!==n?n:Ee.GAUGE_DEFAULT_MINIMUM,m=null!==(i=r.max)&&void 0!==i?i:Ee.GAUGE_DEFAULT_MAXIMUM;p&&(g=0,m=100);const f=(0,Ee.getActiveThreshold)(g,h),b=(0,Ee.getActiveThreshold)(m,h),v=[];v.push({value:+g.toFixed(e),color:(0,Ee.getColorForTheme)(f.color,o)});let x=!0;for(let e=0;e<h.length;e++){const t=h[e];if(x){f===t&&(x=!1);continue}const s=h[e-1];if(v.push({value:t.value,color:(0,Ee.getColorForTheme)(s.color,o)}),t===b)break}return v.push({value:+m.toFixed(e),color:(0,Ee.getColorForTheme)(b.color,o)}),v}draw(){var e,t,s,a,n;const{field:i,showThresholdLabels:r,showThresholdMarkers:o,width:l,height:c,theme:d,value:u}=this.props,p=Pi(l,c,u.title),h=Math.min(l,p.gaugeHeight),g=d.colors.bg2,m=r?1.5:1,f=Math.min(h/5.5,40)/m,b=f/5,v=(0,Ee.formattedValueToString)(u),x=.9*Math.min(l,1.3*h)-(2*(f+(o?b:0)+(r?10:0))+10),y=null!==(e=null===(t=this.props.text)||void 0===t?void 0:t.valueSize)&&void 0!==e?e:(0,en.MX)(v,x,h,1,1.7*f),w=Math.max(y/2.5,12);let j=null!==(s=i.min)&&void 0!==s?s:Ee.GAUGE_DEFAULT_MINIMUM,k=null!==(a=i.max)&&void 0!==a?a:Ee.GAUGE_DEFAULT_MAXIMUM,S=u.numeric;(null===(n=i.thresholds)||void 0===n?void 0:n.mode)===Ee.ThresholdsMode.Percentage&&(j=0,k=100,S=void 0===u.percent?(S-j)/(k-j)*100:100*u.percent);const C=void 0===i.decimals?2:i.decimals;o&&(j=+j.toFixed(C),k=+k.toFixed(C));const T={series:{gauges:{gauge:{min:j,max:k,background:{color:g},border:{color:null},shadow:{show:!1},width:f},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:this.getFormattedThresholds(C),label:{show:r,margin:b+1,font:{size:w}},show:o,width:b},value:{color:u.color,formatter:()=>v,font:{size:y,family:d.typography.fontFamily.sansSerif}},show:!0}}},N={data:[[0,S]],label:u.title};try{Ni().plot(this.canvasElement,[N],T)}catch(e){console.error("Gauge rendering error",e,T,u)}}render(){return(0,E.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className,children:this.renderVisualization()})}}function Pi(e,t,s){const a=null!=s,n=Math.min(.15*e/1.5,20),i=a?t-1.5*n:t;return{showLabel:a,gaugeHeight:Math.min(i,e),titleFontSize:n}}Oi(Ii,"defaultProps",{showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:{mode:Ee.ThresholdsMode.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]}}});var Mi=s("./packages/grafana-schema/src/index.ts"),Fi=s("./node_modules/react-use/lib/useWindowSize.js");const Ai=["position","offset","children","className"];const Di=e=>{let{position:{x:t,y:s},offset:{x:a,y:n},children:i,className:r}=e,o=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Ai);const l=(0,A.useRef)(null),[c,d]=(0,A.useState)({width:0,height:0}),{width:u,height:p}=(0,Fi.Z)(),[h,g]=(0,A.useState)({x:t+a,y:s+n}),m=(0,A.useMemo)((()=>new ResizeObserver((e=>{for(let t of e){const e=Math.floor(t.contentRect.width+16),s=Math.floor(t.contentRect.height+16);c.width===e&&c.height===s||d({width:e,height:s})}}))),[c]);(0,A.useLayoutEffect)((()=>(l.current&&m.observe(l.current),()=>{m.disconnect()})),[m]),(0,A.useLayoutEffect)((()=>{if(l&&l.current){const{x:e,y:i}=((e=0,t=0,s=0,a=0,n=0,i=0,r=0,o=0)=>{let l=e,c=t;const d=Math.max(e+n+s-(r-n),0),u=Math.abs(Math.min(e-n-s-n,0)),p=d>0,h=u>0,g=Math.max(t+i+a-(o-i),0),m=Math.abs(Math.min(t-i-a-i,0)),f=g>0;return l=p&&h?d>u?n:r-n-s:p?e-n-s:e+n,c=f&&m>0?g>m?i:o-i-a:f?t-i-a:t+i,{x:l,y:c}})(t,s,c.width,c.height,a,n,u,p);g({x:e,y:i})}}),[u,p,t,a,s,n,c]);const f=(0,$.wW)($i);return(0,E.jsx)("div",Object.assign({ref:l,style:{position:"fixed",left:0,pointerEvents:"none",top:0,transform:`translate(${h.x}px, ${h.y}px)`,transition:"transform ease-out 0.1s"}},o,{className:(0,D.cx)(f.wrapper,r),children:i}))};Di.displayName="VizTooltipContainer";const $i=e=>({wrapper:D.css`
    ${(0,pt.getTooltipContainerStyles)(e)}
  `}),Li=({content:e,position:t,offset:s})=>{const a=(0,$.yK)(Ei);return t?(0,E.jsx)(G.h,{className:a.portal,children:(0,E.jsx)(Di,{position:t,offset:s||{x:0,y:0},children:e})}):null};Li.displayName="VizTooltip";const Ei=()=>({portal:D.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `}),Ri=["color","className","gradient"];const _i=A.forwardRef(((e,t)=>{let{color:s,className:a,gradient:n}=e,i=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Ri);const r=(0,$.l4)();let o;if(n){var l,c;const e=null===(l=(c=Ee.fieldColorModeRegistry.get(n)).getColors)||void 0===l?void 0:l.call(c,r);o=null!=e&&e.length?`linear-gradient(90deg, ${e.join(", ")})`:r.visualization.getColorByName("")}else o=s;const d={background:o,width:"14px",height:"4px",borderRadius:"1px",display:"inline-block",marginRight:"8px"};return(0,E.jsx)("div",Object.assign({ref:t,className:a,style:d},i))}));_i.displayName="SeriesIcon";const Vi=e=>({icon:D.css`
      margin-right: ${e.spacing(1)};
      vertical-align: middle;
    `,seriesTable:D.css`
      display: table;
    `,seriesTableRow:D.css`
      display: table-row;
      font-size: ${e.typography.bodySmall.fontSize};
    `,seriesTableCell:D.css`
      display: table-cell;
    `,label:D.css`
      word-break: break-all;
    `,value:D.css`
      padding-left: ${e.spacing(2)};
    `,activeSeries:D.css`
      font-weight: ${e.typography.fontWeightBold};
      color: ${e.colors.text.maxContrast};
    `,timestamp:D.css`
      font-weight: ${e.typography.fontWeightBold};
      font-size: ${e.typography.bodySmall.fontSize};
    `}),Bi=({color:e,label:t,value:s,isActive:a})=>{const n=(0,$.wW)(Vi);return(0,E.jsxs)("div",{className:(0,D.cx)(n.seriesTableRow,a&&n.activeSeries),children:[e&&(0,E.jsx)("div",{className:n.seriesTableCell,children:(0,E.jsx)(_i,{color:e,className:n.icon})}),t&&(0,E.jsx)("div",{className:(0,D.cx)(n.seriesTableCell,n.label),children:t}),s&&(0,E.jsx)("div",{className:(0,D.cx)(n.seriesTableCell,n.value),children:s})]})},zi=({timestamp:e,series:t})=>{const s=(0,$.wW)(Vi);return(0,E.jsxs)(E.Fragment,{children:[e&&(0,E.jsx)("div",{className:s.timestamp,"aria-label":"Timestamp",children:e}),t.map(((e,t)=>(0,E.jsx)(Bi,{isActive:e.isActive,label:e.label,color:e.color,value:e.value},`${e.label}-${t}`)))]})},Ui=({dimensions:e,activeDimensions:t,timeZone:s})=>{if(null===t.yAxis||void 0===t.yAxis[1]||null===t.xAxis||void 0===t.xAxis[1])return null;const a=(0,Ee.getValueFromDimension)(e.xAxis,t.xAxis[0],t.xAxis[1]),n=(0,Ee.getColumnFromDimension)(e.xAxis,t.xAxis[0]),i=n.display?(0,Ee.formattedValueToString)(n.display(a)):a,r=(0,Ee.getColumnFromDimension)(e.yAxis,t.yAxis[0]),o=(0,Ee.getValueFromDimension)(e.yAxis,t.yAxis[0],t.yAxis[1]),l=(0,r.display)(o);return(0,E.jsx)(zi,{series:[{color:l.color,label:(0,Ee.getFieldDisplayName)(r),value:(0,Ee.formattedValueToString)(l)}],timestamp:i})};Ui.displayName="SingleModeGraphTooltip";const qi=(e,t)=>{let s,a=0,n=e.values.length-1;for(;;){if(a>n)return Math.max(n,0);s=Math.floor((a+n)/2);const i=e.values.get(s);if(i===t)return s;i&&i<t?a=s+1:n=s-1}},Hi=(e,t)=>{var s,a;return(0,Ee.dateTimeFormat)(e,{format:null==t||null===(s=t.options)||void 0===s?void 0:s.timeformat,timeZone:null==t||null===(a=t.options)||void 0===a?void 0:a.timezone})},Gi=(e,t,s)=>{if(t&&s&&e){const a=s-t,n=a/e/1e3,i=86400010,r=31536e6;return n<=45?Ee.systemDateFormats.interval.second:a<=i?Ee.systemDateFormats.interval.minute:n<=8e4?Ee.systemDateFormats.interval.hour:a<=r?Ee.systemDateFormats.interval.day:n<=31536e3?Ee.systemDateFormats.interval.month:Ee.systemDateFormats.interval.year}return Ee.systemDateFormats.interval.minute},Wi=({dimensions:e,activeDimensions:t,pos:s,timeZone:a})=>{let n=null;if(null===t.xAxis)return null;t.yAxis&&(n=t.yAxis[0]);const i=t.xAxis[1]?(0,Ee.getValueFromDimension)(e.xAxis,t.xAxis[0],t.xAxis[1]):s.x,r=((e,t,s,a)=>{let n,i,r,o,l;const c=[];let d,u;for(n=0;n<e.length;n++){i=e[n];const a=t[n];r=qi(a,s),o=s-a.values.get(r),l=a.values.get(r),(void 0===d||o>=0&&(o<d||d<0)||o<0&&o>d)&&(d=o,u=a.display?(0,Ee.formattedValueToString)(a.display(l)):l);const p=i.display(i.values.get(r));c.push({value:(0,Ee.formattedValueToString)(p),datapointIndex:r,seriesIndex:n,color:p.color,label:(0,Ee.getFieldDisplayName)(i),time:a.display?(0,Ee.formattedValueToString)(a.display(l)):l})}return{results:c,time:u}})(e.yAxis.columns,e.xAxis.columns,i),o=r.time,l=r.results.map(((e,t)=>({color:e.color,label:e.label,value:e.value,isActive:n===t})));return(0,E.jsx)(zi,{series:l,timestamp:o})};Wi.displayName="MultiModeGraphTooltip";const Zi=({mode:e="single",dimensions:t,activeDimensions:s,pos:a,timeZone:n})=>s&&s.xAxis?"single"===e?(0,E.jsx)(Ui,{dimensions:t,activeDimensions:s,timeZone:n}):(0,E.jsx)(Wi,{dimensions:t,activeDimensions:s,pos:a,timeZone:n}):null;Zi.displayName="GraphTooltip";var Qi=s("./node_modules/react-use/esm/useClickAway.js");const Ki=A.memo((({x:e,y:t,onClose:s,renderMenuItems:a,renderHeader:n})=>{const i=(0,A.useRef)(null),[r,o]=(0,A.useState)({});(0,A.useLayoutEffect)((()=>{const s=i.current;if(s){const a=s.getBoundingClientRect(),n=5,i={right:window.innerWidth<e+a.width,bottom:window.innerHeight<a.bottom+a.height+n};o({position:"fixed",left:i.right?e-a.width-n:e-n,top:i.bottom?t-a.height-n:t+n})}}),[e,t]),(0,Qi.Z)(i,(()=>{null==s||s()}));const l=null==n?void 0:n(),c=null==a?void 0:a();return(0,E.jsx)(G.h,{children:(0,E.jsx)(Ce,{header:l,ref:i,style:r,ariaLabel:Ae.wl.components.Menu.MenuComponent("Context"),onOpen:e=>{e(0)},onClick:s,onKeyDown:e=>{"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),null==s||s())},children:c})})}));Ki.displayName="ContextMenu";var Yi=s("./packages/grafana-ui/src/components/Layout/Layout.tsx");const Ji=({label:e,ariaLabel:t,children:s})=>{const a=(0,$.wW)(Xi),n=`group-label-${(0,Tt.uniqueId)()}`;return(0,E.jsxs)("div",{role:"group","aria-labelledby":!t&&e?n:void 0,"aria-label":t,children:[e&&(0,E.jsx)("label",{id:n,className:a.groupLabel,"aria-hidden":!0,children:e}),s]})};Ji.displayName="MenuGroup";const Xi=e=>({groupLabel:D.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      padding: ${e.spacing(.5,1)};
    `}),er=["getContextMenuSource","timeZone","itemsGroup","dimensions","contextDimensions"];const tr=e=>{let{getContextMenuSource:t,timeZone:s,itemsGroup:a,dimensions:n,contextDimensions:i}=e,r=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,er);const o=t(),l=a?a.map((e=>{var t;return Object.assign({},e,{items:null===(t=e.items)||void 0===t?void 0:t.filter((e=>e.label))})})):[];return(0,E.jsx)(Ki,Object.assign({},r,{renderMenuItems:()=>null==l?void 0:l.map(((e,t)=>(0,E.jsx)(Ji,{label:e.label,children:(e.items||[]).map((e=>(0,E.jsx)(Ne,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},`${e.label}`)))},`${e.label}${t}`))),renderHeader:()=>{var e;if(!o)return null;let t;if(null!=n&&n.yAxis&&null!=i&&null!==(e=i.yAxis)&&void 0!==e&&e[1]){const e=(0,Ee.getValueFromDimension)(n.yAxis,i.yAxis[0],i.yAxis[1]);t=(0,o.series.valueField.display)(e)}const a=(0,Ee.dateTimeFormat)(o.datapoint[0],{defaultWithMS:o.series.hasMsResolution,timeZone:s});return(0,E.jsx)(sr,{timestamp:a,seriesColor:o.series.color,displayName:o.series.alias||o.series.label,displayValue:t})}}))},sr=({timestamp:e,seriesColor:t,displayName:s,displayValue:a})=>{const n=(0,$.Fg)();return(0,E.jsxs)("div",{className:D.css`
        padding: ${n.spacing.xs} ${n.spacing.sm};
        font-size: ${n.typography.size.sm};
        z-index: ${n.zIndex.tooltip};
      `,children:[(0,E.jsx)("strong",{children:e}),(0,E.jsxs)(Yi.Lh,{children:[(0,E.jsxs)("div",{children:[(0,E.jsx)(_i,{color:t}),(0,E.jsx)("span",{className:D.css`
              white-space: nowrap;
              padding-left: ${n.spacing.xs};
            `,children:s})]}),a&&(0,E.jsx)(Xa.W,{value:a})]})]})};var ar;function nr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ir extends A.PureComponent{constructor(...e){super(...e),nr(this,"state",{isTooltipVisible:!1,isContextVisible:!1}),nr(this,"element",null),nr(this,"$element",void 0),nr(this,"onPlotSelected",((e,t)=>{const{onHorizontalRegionSelected:s}=this.props;s&&s(t.xaxis.from,t.xaxis.to)})),nr(this,"onPlotHover",((e,t,s)=>{this.setState({isTooltipVisible:!0,activeItem:s,pos:t})})),nr(this,"onPlotClick",((e,t,s)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:s,contextPos:t})})),nr(this,"renderTooltip",(()=>{const{children:e,series:t,timeZone:s}=this.props,{pos:a,activeItem:n,isTooltipVisible:i}=this.state;let r=null;if(!i||!a||0===t.length)return null;if(A.Children.forEach(e,(e=>{if(r)return;(e&&e.type&&(e.type.displayName||e.type.name))===Li.displayName&&(r=e)})),!r)return null;const o=r.props,l=o.mode||"single";if(!n&&"single"===l)return null;const c=o.tooltipComponent||Zi,d={xAxis:[n?n.series.seriesIndex:0,n?n.dataIndex:void 0],yAxis:n?[n.series.seriesIndex,n.dataIndex]:null},u={dimensions:{xAxis:(0,Ee.createDimension)("xAxis",t.map((e=>e.timeField))),yAxis:(0,Ee.createDimension)("yAxis",t.map((e=>e.valueField)))},activeDimensions:d,pos:a,mode:o.mode||Mi.f3.Single,timeZone:s},p=A.createElement(c,Object.assign({},u));return A.cloneElement(r,{content:p,position:{x:a.pageX,y:a.pageY},offset:{x:10,y:10}})})),nr(this,"renderContextMenu",(()=>{const{series:e}=this.props,{contextPos:t,contextItem:s,isContextVisible:a}=this.state;if(!a||!t||!s||0===e.length)return null;const n={xAxis:[s?s.series.seriesIndex:0,s?s.dataIndex:void 0],yAxis:s?[s.series.seriesIndex,s.dataIndex]:null},i={xAxis:(0,Ee.createDimension)("xAxis",e.map((e=>e.timeField))),yAxis:(0,Ee.createDimension)("yAxis",e.map((e=>e.valueField)))},r={x:t.pageX,y:t.pageY,onClose:()=>this.setState({isContextVisible:!1}),getContextMenuSource:()=>({datapoint:s.datapoint,dataIndex:s.dataIndex,series:s.series,seriesIndex:s.series.seriesIndex,pageX:t.pageX,pageY:t.pageY}),timeZone:this.props.timeZone,dimensions:i,contextDimensions:n};return(0,E.jsx)(tr,Object.assign({},r))})),nr(this,"getBarWidth",(()=>{const{series:e}=this.props;return Math.min(...e.map((e=>e.timeStep)))}))}componentDidUpdate(e,t){e!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=Ni()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(e){return 0===e.length?[{show:!0,min:-1,max:1}]:(0,Tt.uniqBy)(e.map((e=>{const t=e.yAxis?e.yAxis.index:1;return{show:!0,index:t,position:1===t?"left":"right",min:e.yAxis&&!isNaN(e.yAxis.min)?e.yAxis.min:null,tickDecimals:e.yAxis&&!isNaN(e.yAxis.tickDecimals)?e.yAxis.tickDecimals:null}})),(e=>e.index))}draw(){if(null===this.element)return;const{width:e,series:t,timeRange:s,showLines:a,showBars:n,showPoints:i,isStacked:r,lineWidth:o,timeZone:l,onHorizontalRegionSelected:c}=this.props;if(!e)return;const d=e/100,u=s.from.valueOf(),p=s.to.valueOf(),h=this.getYAxes(t),g={legend:{show:!1},series:{stack:r,lines:{show:a,lineWidth:o,zero:!1},points:{show:i,fill:1,fillColor:!1,radius:2},bars:{show:n,fill:1,barWidth:n?this.getBarWidth()/1.5:1,zero:!1,lineWidth:o},shadowSize:0},xaxis:{timezone:l,show:!0,mode:"time",min:u,max:p,label:"Datetime",ticks:d,timeformat:Gi(d,u,p),tickFormatter:Hi},yaxes:h,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:c?"x":null,color:"#666"},crosshair:{mode:"x"}};try{Ni().plot(this.element,t.filter((e=>e.isVisible)),g)}catch(e){throw console.error("Graph rendering error",e,g,t),new Error("Error rendering panel")}}render(){const{ariaLabel:e,height:t,width:s,series:a}=this.props,n=0===a.length,i=this.renderTooltip(),r=this.renderContextMenu();return(0,E.jsxs)("div",{className:"graph-panel","aria-label":e,children:[(0,E.jsx)("div",{className:"graph-panel__chart",ref:e=>this.element=e,style:{height:t,width:s},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),n&&(ar||(ar=(0,E.jsx)("div",{className:"datapoints-warning",children:"No data"}))),i,r]})}}nr(ir,"defaultProps",{showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1});let rr;!function(e){e[e.Isolate=0]="Isolate",e[e.Hide=1]="Hide"}(rr||(rr={}));var or=s("./packages/grafana-ui/src/components/PanelChrome/LoadingIndicator.tsx");const lr=({error:e,onClick:t})=>{const s=(0,$.yK)(cr);return e?(0,E.jsx)(U.u,{theme:"error",content:e,children:(0,E.jsx)(M.J,{onClick:t,className:(0,D.cx)(s.icon,{[s.clickable]:!!t}),size:"sm",name:"exclamation-triangle"})}):null},cr=e=>({clickable:D.css`
      cursor: pointer;
    `,icon:D.css`
      color: ${e.palette.red88};
    `}),dr=({title:e="",children:t,width:s,height:a,padding:n="md",leftItems:i=[]})=>{const r=(0,$.l4)(),o=(0,$.wW)(gr),l=pr(r,e,i),{contentStyle:c,innerWidth:d,innerHeight:u}=hr(n,r,s,l,a),p={height:l},h={width:s,height:a};return(0,E.jsxs)("div",{className:o.container,style:h,children:[(0,E.jsxs)("div",{className:o.header,style:p,children:[(0,E.jsx)("div",{className:o.headerTitle,children:e}),ur(i,(e=>(0,E.jsx)("div",{className:o.leftItems,children:e})))]}),(0,E.jsx)("div",{className:o.content,style:c,children:t(d,u)})]})},ur=(e,t)=>{const s=A.Children.toArray(e).filter(Boolean);return s.length>0?t(s):null},pr=(e,t,s)=>t.length>0||s.length>0?e.spacing.gridSize*e.components.panel.headerHeight:0,hr=(e,t,s,a,n)=>{const i="md"===e?t.components.panel.padding:0;return{contentStyle:{padding:i},innerWidth:s-2*i-2,innerHeight:n-a-2*i-2}},gr=e=>{const{padding:t,background:s,borderColor:a}=e.components.panel;return{container:D.css`
      label: panel-container;
      background-color: ${s};
      border: 1px solid ${a};
      position: relative;
      border-radius: 3px;
      height: 100%;
      display: flex;
      flex-direction: column;
      flex: 0 0 0;
    `,content:D.css`
      label: panel-content;
      width: 100%;
      flex-grow: 1;
    `,header:D.css`
      label: panel-header;
      display: flex;
      align-items: center;
    `,headerTitle:D.css`
      label: panel-header;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      padding-left: ${e.spacing(t)};
      flex-grow: 1;
      font-weight: ${e.typography.fontWeightMedium};
    `,leftItems:D.css`
      display: flex;
      padding-right: ${e.spacing(t)};
    `}};var mr=s("./packages/grafana-ui/src/components/PanelChrome/PanelContext.ts");let fr;!function(e){e.ToggleSelection="select",e.AppendToSelection="append"}(fr||(fr={}));const br=dr;br.LoadingIndicator=or.T,br.ErrorIndicator=lr;const vr=({seriesName:e,color:t,gradient:s,readonly:a})=>{const{onSeriesColorChange:n}=(0,mr.R9)(),i=(0,A.useCallback)((t=>n(e,t)),[e,n]);return e&&n&&t&&!a?(0,E.jsx)(he.sp,{color:t,onChange:i,enableNamedColors:!0,children:({ref:e,showColorPicker:s,hideColorPicker:a})=>(0,E.jsx)(_i,{color:t,className:"pointer",ref:e,onClick:s,onMouseLeave:a})}):(0,E.jsx)(_i,{color:t,gradient:s})};vr.displayName="VizLegendSeriesIcon";const xr=({item:e,onLabelClick:t,onLabelMouseEnter:s,onLabelMouseOut:a,className:n,readonly:i})=>{const r=(0,we.wW)(yr),o=(0,A.useCallback)((t=>{s&&s(e,t)}),[e,s]),l=(0,A.useCallback)((t=>{a&&a(e,t)}),[e,a]),c=(0,A.useCallback)((s=>{t&&t(e,s)}),[e,t]);return(0,E.jsxs)("tr",{className:(0,D.cx)(r.row,n),children:[(0,E.jsx)("td",{children:(0,E.jsxs)("span",{className:r.itemWrapper,children:[(0,E.jsx)(vr,{color:e.color,seriesName:e.label,readonly:i}),(0,E.jsxs)("div",{onMouseEnter:o,onMouseOut:l,onClick:i?void 0:c,className:(0,D.cx)(r.label,e.disabled&&r.labelDisabled,!i&&r.clickable),children:[e.label," ",2===e.yAxis&&(0,E.jsx)("span",{className:r.yAxisLabel,children:"(right y-axis)"})]})]})}),e.getDisplayValues&&e.getDisplayValues().map(((e,t)=>(0,E.jsx)("td",{className:r.value,children:(0,Ee.formattedValueToString)(e)},`${e.title}-${t}`)))]})};xr.displayName="LegendTableItem";const yr=e=>{const t=$.GU.hoverColor(e.colors.background.primary,e);return{row:D.css`
      label: LegendRow;
      font-size: ${e.v1.typography.size.sm};
      border-bottom: 1px solid ${e.colors.border.weak};
      td {
        padding: ${e.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${t};
      }
    `,label:D.css`
      label: LegendLabel;
      white-space: nowrap;
    `,labelDisabled:D.css`
      label: LegendLabelDisabled;
      color: ${e.colors.text.disabled};
    `,clickable:D.css`
      label: LegendClickable;
      cursor: pointer;
    `,itemWrapper:D.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:D.css`
      text-align: right;
    `,yAxisLabel:D.css`
      color: ${e.colors.text.secondary};
    `}};var wr;const jr=({items:e,sortBy:t,sortDesc:s,itemRenderer:a,className:n,onToggleSort:i,onLabelClick:r,onLabelMouseEnter:o,onLabelMouseOut:l,readonly:c})=>{const d=(0,we.wW)(kr),u={};for(const t of e)if(t.getDisplayValues)for(const e of t.getDisplayValues()){var p;u[null!==(p=e.title)&&void 0!==p?p:"?"]=e}const h=t?(0,Tt.sortBy)(e,(e=>{if(e.getDisplayValues){const s=e.getDisplayValues().filter((e=>e.title===t))[0];return s&&s.numeric}})):e;return a||(a=(e,t)=>(0,E.jsx)(xr,{item:e,onLabelClick:r,onLabelMouseEnter:o,onLabelMouseOut:l,readonly:c},`${e.label}-${t}`)),(0,E.jsxs)("table",{className:(0,D.cx)(d.table,n),children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{children:[wr||(wr=(0,E.jsx)("th",{})),Object.keys(u).map((e=>{const a=u[e];return(0,E.jsxs)("th",{title:a.description,className:(0,D.cx)(d.header,i&&d.headerSortable),onClick:()=>{i&&i(e)},children:[e,t===e&&(0,E.jsx)(M.J,{className:d.sortIcon,name:s?"angle-down":"angle-up"})]},e)}))]})}),(0,E.jsx)("tbody",{children:h.map(a)})]})},kr=e=>({table:D.css`
    width: 100%;
    th:first-child {
      width: 100%;
    }
  `,header:D.css`
    color: ${e.colors.primary.text};
    font-weight: ${e.typography.fontWeightMedium};
    border-bottom: 1px solid ${e.colors.border.weak};
    padding: ${e.spacing(.25,1)};
    font-size: ${e.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,headerSortable:D.css`
    cursor: pointer;
  `,sortIcon:D.css`
    margin-left: ${e.spacing(1)};
  `});var Sr=s("./packages/grafana-ui/src/components/List/AbstractList.tsx");class Cr extends A.PureComponent{render(){return(0,E.jsx)(Sr.L,Object.assign({inline:!0},this.props))}}const Tr=({stats:e})=>{const t=(0,we.yK)(Nr);return 0===e.length?null:(0,E.jsx)(Cr,{className:t.list,items:e,renderItem:e=>(0,E.jsxs)("div",{className:t.item,title:e.description,children:[e.title&&`${(0,Tt.capitalize)(e.title)}:`," ",(0,Ee.formattedValueToString)(e)]})})},Nr=()=>({list:D.css`
    flex-grow: 1;
    text-align: right;
  `,item:D.css`
    margin-left: 8px;
  `});Tr.displayName="VizLegendStatsList";const Or=({item:e,onLabelClick:t,onLabelMouseEnter:s,onLabelMouseOut:a,className:n,readonly:i})=>{const r=(0,$.yK)(Ir),o=(0,A.useCallback)((t=>{s&&s(e,t)}),[e,s]),l=(0,A.useCallback)((t=>{a&&a(e,t)}),[e,a]),c=(0,A.useCallback)((s=>{t&&t(e,s)}),[e,t]);return(0,E.jsxs)("div",{className:(0,D.cx)(r.itemWrapper,n),"aria-label":Ae.wl.components.VizLegend.seriesName(e.label),children:[(0,E.jsx)(vr,{seriesName:e.label,color:e.color,gradient:e.gradient,readonly:i}),(0,E.jsx)("div",{onMouseEnter:o,onMouseOut:l,onClick:i?void 0:c,className:(0,D.cx)(r.label,e.disabled&&r.labelDisabled,!i&&r.clickable),children:e.label}),e.getDisplayValues&&(0,E.jsx)(Tr,{stats:e.getDisplayValues()})]})};Or.displayName="VizLegendListItem";const Ir=e=>({label:D.css`
    label: LegendLabel;
    white-space: nowrap;
  `,clickable:D.css`
    label: LegendClickabel;
    cursor: pointer;
  `,labelDisabled:D.css`
    label: LegendLabelDisabled;
    color: ${e.colors.linkDisabled};
  `,itemWrapper:D.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:D.css`
    text-align: right;
  `,yAxisLabel:D.css`
    color: ${e.palette.gray2};
  `}),Pr=({items:e,itemRenderer:t,onLabelMouseEnter:s,onLabelMouseOut:a,onLabelClick:n,placement:i,className:r,readonly:o})=>{var l;const c=(0,$.yK)(Mr);t||(t=e=>(0,E.jsx)(Or,{item:e,onLabelClick:n,onLabelMouseEnter:s,onLabelMouseOut:a,readonly:o}));const d=e=>`${e.getItemKey?e.getItemKey():e.label}`;switch(i){case"right":{const s=(e,s)=>(0,E.jsx)("span",{className:c.itemRight,children:t(e,s)});return(0,E.jsx)("div",{className:(0,D.cx)(c.rightWrapper,r),children:l||(l=(0,E.jsx)(Gs.a,{items:e,renderItem:s,getItemKey:d}))})}case"bottom":default:{const s=(e,s)=>(0,E.jsx)("span",{className:c.itemBottom,children:t(e,s)});return(0,E.jsxs)("div",{className:(0,D.cx)(c.bottomWrapper,r),children:[(0,E.jsx)("div",{className:c.section,children:(0,E.jsx)(Cr,{items:e.filter((e=>1===e.yAxis)),renderItem:s,getItemKey:d})}),(0,E.jsx)("div",{className:(0,D.cx)(c.section,c.sectionRight),children:(0,E.jsx)(Cr,{items:e.filter((e=>1!==e.yAxis)),renderItem:s,getItemKey:d})})]})}}};Pr.displayName="VizLegendList";const Mr=e=>{const t=D.css`
    padding-right: 10px;
    display: flex;
    font-size: ${e.typography.size.sm};
    white-space: nowrap;
  `;return{itemBottom:t,itemRight:(0,D.cx)(t,D.css`
        margin-bottom: ${e.spacing.xs};
      `),rightWrapper:D.css`
      padding-left: ${e.spacing.sm};
    `,bottomWrapper:D.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${e.spacing.md};
    `,section:D.css`
      display: flex;
    `,sectionRight:D.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};function Fr({items:e,displayMode:t,sortBy:s,seriesVisibilityChangeBehavior:a=rr.Isolate,sortDesc:n,onLabelClick:i,onToggleSort:r,placement:o,className:l,itemRenderer:c,readonly:d}){const{eventBus:u,onToggleSeriesVisibility:p}=(0,mr.R9)(),h=(0,A.useCallback)(((e,t)=>{null==u||u.publish({type:Ee.DataHoverEvent.type,payload:{raw:t,x:0,y:0,dataId:e.label}})}),[u]),g=(0,A.useCallback)(((e,t)=>{null==u||u.publish({type:Ee.DataHoverClearEvent.type,payload:{raw:t,x:0,y:0,dataId:e.label}})}),[u]),m=(0,A.useCallback)(((e,t)=>{i&&i(e,t),p&&p(e.label,a===rr.Hide?fr.AppendToSelection:function(e){return e.ctrlKey||e.metaKey||e.shiftKey?fr.AppendToSelection:fr.ToggleSelection}(t))}),[p,i,a]);switch(t){case Mi.jK.Table:return(0,E.jsx)(jr,{className:l,items:e,placement:o,sortBy:s,sortDesc:n,onLabelClick:m,onToggleSort:r,onLabelMouseEnter:h,onLabelMouseOut:g,itemRenderer:c,readonly:d});case Mi.jK.List:return(0,E.jsx)(Pr,{className:l,items:e,placement:o,onLabelMouseEnter:h,onLabelMouseOut:g,onLabelClick:m,itemRenderer:c,readonly:d});default:return null}}Fr.displayName="Legend";const Ar=(0,$.Bb)((({placement:e})=>({wrapper:D.css`
    display: flex;
    flex-direction: ${"bottom"===e?"column":"row"};
  `,graphContainer:D.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:D.css`
    padding: 10px 0;
    max-height: ${"bottom"===e?"35%":"none"};
  `}))),Dr=e=>{const{series:t,timeRange:s,width:a,height:n,showBars:i,showLines:r,showPoints:o,sortLegendBy:l,sortLegendDesc:c,legendDisplayMode:d,placement:u,onSeriesToggle:p,onToggleSort:h,hideEmpty:g,hideZero:m,isStacked:f,lineWidth:b,onHorizontalRegionSelected:v,timeZone:x,children:y,ariaLabel:w}=e,{graphContainer:j,wrapper:k,legendContainer:S}=Ar(e),C=t.reduce(((e,t)=>((e,t=!1,s=!1)=>{const a=0===e.reduce(((e,t)=>e+(t[1]||0)),0),n=!e.reduce(((e,t)=>e&&null!==t[1]),!0);return t&&n||s&&a})(t.data,g,m)?e:e.concat([{label:t.label,color:t.color||"",disabled:!t.isVisible,yAxis:t.yAxis.index,getDisplayValues:()=>t.info||[]}])),[]);return(0,E.jsxs)("div",{className:k,"aria-label":w,children:[(0,E.jsx)("div",{className:j,children:(0,E.jsx)(ir,{series:t,timeRange:s,timeZone:x,showLines:r,showPoints:o,showBars:i,width:a,height:n,isStacked:f,lineWidth:b,onHorizontalRegionSelected:v,children:y})}),d!==Mi.jK.Hidden&&(0,E.jsx)("div",{className:S,children:(0,E.jsx)(W.$,{hideHorizontalTrack:!0,children:(0,E.jsx)(Fr,{items:C,displayMode:d,placement:u,sortBy:l,sortDesc:c,onLabelClick:(e,t)=>{p&&p(e.label,t)},onToggleSort:h})})})]})};function $r(e,t,s){const a=Math.ceil(Math.sqrt(s*e/t));return Math.floor(a*t/e)*a<s?t/Math.ceil(a*t/e):e/a}class Lr extends A.PureComponent{constructor(e){super(e),this.state={values:e.getValues()}}componentDidUpdate(e){const{renderCounter:t,source:s}=this.props;t===e.renderCounter&&s===e.source||this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:e,width:t,height:s}=this.props;return e===Ee.VizOrientation.Auto?t>s?Ee.VizOrientation.Vertical:Ee.VizOrientation.Horizontal:e}renderGrid(){const{renderValue:e,height:t,width:s,itemSpacing:a,getAlignmentFactors:n,orientation:i}=this.props,{values:r}=this.state,o=((e,t,s,a)=>{const n=$r(e,t,a),i=$r(t,e,a),r=Math.max(n,i);let o=Math.floor(e/r),l=Math.ceil(a/o);o=Math.ceil(a/l);const c=o-(o*l-a);return{width:e/o-s+s/o,height:t/l-s+s/l,widthOnLastRow:e/c-s+s/c,xCount:o,yCount:l}})(s,t,a,r.length),l=n?n(r,o.width,o.height):{};let c=0,d=0,u=[];for(let t=0;t<r.length;t++){const s=r[t],n=d===o.yCount-1?o.widthOnLastRow:o.width,p=o.height,h={position:"absolute",left:c*n+a*c,top:d*p+a*d,width:`${n}px`,height:`${p}px`};u.push((0,E.jsx)("div",{style:h,children:e({value:s,width:n,height:p,alignmentFactors:l,orientation:i,count:r.length})},t)),c++,c===o.xCount&&(c=0,d++)}return(0,E.jsx)("div",{style:{position:"relative"},children:u})}render(){const{renderValue:e,height:t,width:s,itemSpacing:a,getAlignmentFactors:n,autoGrid:i,orientation:r,minVizHeight:o}=this.props,{values:l}=this.state;if(i&&r===Ee.VizOrientation.Auto)return this.renderGrid();const c={display:"flex"},d={display:"flex",overflow:o?"hidden auto":"hidden"};let u=t,p=s,h=this.getOrientation();switch(h){case Ee.VizOrientation.Horizontal:d.flexDirection="column",d.height=`${t}px`,c.marginBottom=`${a}px`,p=s,u=Math.max(t/l.length-a+a/l.length,null!=o?o:0);break;case Ee.VizOrientation.Vertical:d.flexDirection="row",d.justifyContent="space-between",c.marginRight=`${a}px`,u=t,p=s/l.length-a+a/l.length}c.width=`${p}px`,c.height=`${u}px`;const g=n?n(l,p,u):{};return(0,E.jsx)("div",{style:d,children:l.map(((t,s)=>(0,E.jsx)("div",{style:Er(c,s,l.length),children:e({value:t,width:p,height:u,alignmentFactors:g,orientation:h,count:l.length})},s)))})}}function Er(e,t,s){return t===s-1?Object.assign({},e,{marginRight:0,marginBottom:0}):e}!function(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}(Lr,"defaultProps",{itemSpacing:8});var Rr=s("./packages/grafana-ui/src/components/VizLayout/VizLayout.tsx"),_r=s("./packages/grafana-ui/src/components/Alert/Alert.tsx");class Vr extends A.Component{constructor(e){super(e),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:e.series}}componentDidUpdate(e){const{series:t}=this.props;(0,Tt.isEqual)(e.series,t)||this.setState({hiddenSeries:[],toggledSeries:t})}onSeriesToggle(e,t){const{series:s,onHiddenSeriesChanged:a}=this.props,{hiddenSeries:n}=this.state;if(t.ctrlKey||t.metaKey||t.shiftKey){const t=n.indexOf(e)>-1?n.filter((t=>t!==e)):n.concat([e]),i=s.map((e=>Object.assign({},e,{isVisible:-1===t.indexOf(e.label)})));return void this.setState({hiddenSeries:t,toggledSeries:i},(()=>a?a(t):void 0))}const i=s.map((e=>e.label)),r=n.length+1===i.length?[]:(0,Tt.difference)(i,[e]),o=s.map((e=>Object.assign({},e,{isVisible:-1===r.indexOf(e.label)})));this.setState({hiddenSeries:r,toggledSeries:o},(()=>a?a(r):void 0))}render(){const{children:e}=this.props,{toggledSeries:t}=this.state;return e({onSeriesToggle:this.onSeriesToggle,toggledSeries:t})}}const Br=["isOpen","onToggle"];const zr=e=>({collapse:D.css`
    label: collapse;
    margin-bottom: ${e.spacing(1)};
  `,collapseBody:D.css`
    label: collapse__body;
    padding: ${e.spacing(e.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:D.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:D.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${e.spacing(.5)};
  `,loaderActive:D.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${e.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:D.css`
    label: collapse__header;
    padding: ${e.spacing(1,2,.5,2)};
    display: flex;
    cursor: inherit;
    transition: all 0.1s linear;
    cursor: pointer;
  `,headerCollapsed:D.css`
    label: collapse__header--collapsed;
    padding: ${e.spacing(1,2,.5,2)};
  `,headerLabel:D.css`
    label: collapse__header-label;
    font-weight: ${e.typography.fontWeightMedium};
    margin-right: ${e.spacing(1)};
    font-size: ${e.typography.size.md};
  `,icon:D.css`
    label: collapse__icon;
    margin: ${e.spacing(0,1,0,-1)};
  `}),Ur=e=>{let{isOpen:t,onToggle:s}=e,a=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Br);const[n,i]=(0,A.useState)(t);return(0,E.jsx)(qr,Object.assign({isOpen:n,collapsible:!0},a,{onToggle:()=>{i(!n),s&&s(!n)}}))},qr=({isOpen:e,label:t,loading:s,collapsible:a,onToggle:n,className:i,children:r})=>{const o=(0,we.wW)(zr),l=(0,D.cx)([o.collapse,"panel-container",i]),c=s?(0,D.cx)([o.loader,o.loaderActive]):(0,D.cx)([o.loader]),d=a?(0,D.cx)([o.header]):(0,D.cx)([o.headerCollapsed]);return(0,E.jsxs)("div",{className:l,children:[(0,E.jsxs)("div",{className:d,onClick:()=>{n&&n(!e)},children:[a&&(0,E.jsx)(M.J,{className:o.icon,name:e?"angle-up":"angle-down"}),(0,E.jsx)("div",{className:(0,D.cx)([o.headerLabel]),children:t})]}),e&&(0,E.jsxs)("div",{className:(0,D.cx)([o.collapseBody]),children:[(0,E.jsx)("div",{className:c}),(0,E.jsx)("div",{className:o.bodyContentWrapper,children:r})]})]})};qr.displayName="Collapse";const Hr=({label:e,isOpen:t,children:s})=>{const[a,n]=(0,A.useState)(t),i=(0,$.wW)(Gr),r=a?i.header:i.headerCollapsed,o="Click to "+(a?"collapse":"expand");return(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{onClick:()=>n(!a),className:r,title:o,children:[e,(0,E.jsx)(M.J,{name:a?"angle-down":"angle-right",size:"xl",className:i.icon})]}),a&&(0,E.jsx)("div",{className:i.content,children:s})]})},Gr=e=>{const t=(0,D.css)({display:"flex",justifyContent:"space-between",fontSize:e.typography.size.lg,padding:`${e.spacing(.5)} 0`,cursor:"pointer"});return{header:t,headerCollapsed:(0,D.css)(t,{borderBottom:`1px solid ${e.colors.border.weak}`}),icon:(0,D.css)({color:e.colors.text.secondary}),content:(0,D.css)({padding:`${e.spacing(2)} 0`})}},Wr=["level","lvl","filename"],Zr=(0,$.Bb)((e=>({logsLabels:D.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${e.typography.size.xs};
    `,logsLabel:D.css`
      label: logs-label;
      display: flex;
      padding: 0 2px;
      background-color: ${e.colors.bg2};
      border-radius: ${e.border.radius};
      margin: 1px 4px 0 0;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:D.css`
      label: logs-label__value;
      display: inline-block;
      max-width: 20em;
      text-overflow: ellipsis;
      overflow: hidden;
    `}))),Qr=(0,we.Zz)((({labels:e,theme:t})=>{const s=Zr(t),a=Object.keys(e).filter((e=>!e.startsWith("_")&&!Wr.includes(e)));return 0===a.length?(0,E.jsx)("span",{className:(0,D.cx)([s.logsLabels]),children:(0,E.jsx)("span",{className:(0,D.cx)([s.logsLabel]),children:"(no unique labels)"})}):(0,E.jsx)("span",{className:(0,D.cx)([s.logsLabels]),children:a.sort().map((t=>{const a=e[t];if(!a)return;const n=`${t}: ${a}`;return(0,E.jsx)("span",{className:(0,D.cx)([s.logsLabel]),children:(0,E.jsx)("span",{className:(0,D.cx)([s.logsLabelValue]),title:n,children:a})},t)}))})}));Qr.displayName="LogLabels";var Kr=s("./packages/grafana-ui/src/components/Logs/LogMessageAnsi.tsx"),Yr=s("./packages/grafana-ui/src/components/Logs/getLogRowStyles.ts"),Jr=s("./node_modules/react-use/lib/useAsync.js");const Xr=({getRowContext:e,row:t,children:s,logsSortOrder:a})=>{const[n,i]=(0,A.useState)(10),[r,o]=(0,A.useState)(null),[l,c]=(0,A.useState)({before:!0,after:!0}),{value:d}=(0,Jr.Z)((async()=>await(async(e,t,s,a)=>{const n=[e(t,{limit:s}),e(t,{limit:s+1,direction:"FORWARD"})],i=await Promise.all(n.map((e=>e.catch((e=>e))))),r=i.map((e=>{const s=e;if(!s.data)return[];const n=[];for(let e=0;e<s.data.length;e++){const a=(0,Ee.toDataFrame)(s.data[e]),i=new Ee.FieldCache(a),r=i.getFieldByName("ts"),o=i.getFieldByName("id");for(let e=0;e<r.values.length;e++){if(o){if(o.values.get(e)===t.uid)continue}else if(parseInt(r.values.get(e),10)===t.timeEpochMs)continue;const s=a.fields.filter((e=>"line"===e.name))[0].values.get(e);n.push(s)}}return a===Ee.LogsSortOrder.Ascending?n.reverse():n})),o=i.map((e=>{const t=e;return t.message?t.message:""}));return{data:a===Ee.LogsSortOrder.Ascending?r.reverse():r,errors:a===Ee.LogsSortOrder.Ascending?o.reverse():o}})(e,t,n,a)),[n]);return(0,A.useEffect)((()=>{d&&o((e=>{let t=!0,s=!0;const a=null==e?void 0:e.data[0],n=null==e?void 0:e.data[1],i=d.data[0],r=d.data[1];return!e||i&&a.length!==i.length||(t=!1),!e||r&&n.length!==r.length||(s=!1),c({before:t,after:s}),d}))}),[d]),s({result:{before:r?r.data[0]:[],after:r?r.data[1]:[]},errors:{before:r?r.errors[0]:void 0,after:r?r.errors[1]:void 0},hasMoreContextRows:l,updateLimit:()=>i(n+10),limit:n})};var eo=s("./packages/grafana-ui/src/components/Logs/LogRowMessage.tsx");const to=(0,Wa.default)(Ee.getParser),so=(0,Wa.default)(((e,t)=>{const s=ao(e.entry),a=[...no(e,t),...s].reduce(((e,t)=>{const s=t.value.replace(/(^")|("$)/g,""),a=`${t.key}=${s}`;return e[a]?e[a].links=[...e[a].links||[],...t.links||[]]:e[a]=t,e}),{}),n=Object.values(a);return n.sort(io),n})),ao=(0,Wa.default)((e=>{if(e.length>eo.n)return[];const t=to(e);if(!t)return[];return t.getFields(e).map((e=>({key:t.getLabelFromField(e),value:t.getValueFromField(e)})))})),no=(0,Wa.default)(((e,t)=>e.dataFrame.fields.map(((e,t)=>Object.assign({},e,{index:t}))).filter(((t,s)=>{var a;return!("id"===t.name||e.entryFieldIndex===s||null!==(a=t.config.custom)&&void 0!==a&&a.hidden)})).filter((t=>{const s=t.values.get(e.rowIndex);return null!=s})).map((s=>{const a=t?t(s,e.rowIndex):[];return{key:s.name,value:s.values.get(e.rowIndex).toString(),links:a,fieldIndex:s.index}}))));function io(e,t){var s,a,n,i;return null===(s=e.links)||void 0===s||!s.length||null!==(a=t.links)&&void 0!==a&&a.length?null!==(n=e.links)&&void 0!==n&&n.length||null===(i=t.links)||void 0===i||!i.length?e.key>t.key?1:e.key<t.key?-1:0:1:-1}const ro=e=>({logsStatsRow:D.css`
    label: logs-stats-row;
    margin: ${parseInt(e.spacing.d,10)/1.75}px 0;
  `,logsStatsRowActive:D.css`
    label: logs-stats-row--active;
    color: ${e.colors.textBlue};
    position: relative;
  `,logsStatsRowLabel:D.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:D.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:D.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: 0.5em;
  `,logsStatsRowPercent:D.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: 0.5em;
    width: 3em;
  `,logsStatsRowBar:D.css`
    label: logs-stats-row__bar;
    height: 4px;
    overflow: hidden;
    background: ${e.colors.textFaint};
  `,logsStatsRowInnerBar:D.css`
    label: logs-stats-row__innerbar;
    height: 4px;
    overflow: hidden;
    background: ${e.colors.bgBlue1};
  `}),oo=({active:e,count:t,proportion:s,value:a})=>{const n=(0,we.yK)(ro),i=`${Math.round(100*s)}%`,r={width:i},o=e?(0,D.cx)([n.logsStatsRow,n.logsStatsRowActive]):(0,D.cx)([n.logsStatsRow]);return(0,E.jsxs)("div",{className:o,children:[(0,E.jsxs)("div",{className:(0,D.cx)([n.logsStatsRowLabel]),children:[(0,E.jsx)("div",{className:(0,D.cx)([n.logsStatsRowValue]),title:a,children:a}),(0,E.jsx)("div",{className:(0,D.cx)([n.logsStatsRowCount]),children:t}),(0,E.jsx)("div",{className:(0,D.cx)([n.logsStatsRowPercent]),children:i})]}),(0,E.jsx)("div",{className:(0,D.cx)([n.logsStatsRowBar]),children:(0,E.jsx)("div",{className:(0,D.cx)([n.logsStatsRowInnerBar]),style:r})})]})};oo.displayName="LogLabelStatsRow";const lo=(0,$.Bb)((e=>({logsStats:D.css`
      label: logs-stats;
      column-span: 2;
      background: inherit;
      color: ${e.colors.text};
      word-break: break-all;
    `,logsStatsHeader:D.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${e.colors.border2};
      display: flex;
    `,logsStatsTitle:D.css`
      label: logs-stats__title;
      font-weight: ${e.typography.weight.semibold};
      padding-right: ${e.spacing.d};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:D.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:D.css`
      label: logs-stats__body;
      padding: 5px 0;
    `})));class co extends A.PureComponent{render(){const{label:e,rowCount:t,stats:s,value:a,theme:n,isLabel:i}=this.props,r=lo(n),o=s.slice(0,5);let l=o.find((e=>e.value===a)),c=s.slice(5);const d=!l;d&&(l=c.find((e=>e.value===a)),c=c.filter((e=>e.value!==a)));const u=c.reduce(((e,t)=>e+t.count),0),p=o.reduce(((e,t)=>e+t.count),0)+u,h=u/p;return(0,E.jsxs)("td",{className:r.logsStats,"data-testid":"logLabelStats",children:[(0,E.jsx)("div",{className:r.logsStatsHeader,children:(0,E.jsxs)("div",{className:r.logsStatsTitle,children:[e,": ",p," of ",t," rows have that ",i?"label":"field"]})}),(0,E.jsxs)("div",{className:r.logsStatsBody,children:[o.map((e=>(0,E.jsx)(oo,Object.assign({},e,{active:e.value===a}),e.value))),d&&l&&(0,E.jsx)(oo,Object.assign({},l,{active:!0}),l.value),u>0&&(0,E.jsx)(oo,{count:u,value:"Other",proportion:h},"__OTHERS__")]})]})}}const uo=(0,$.Zz)(co);function po({link:e,buttonProps:t}){return(0,E.jsx)("a",{href:e.href,target:e.target,rel:"noreferrer",onClick:e.onClick?t=>{t.ctrlKey||t.metaKey||t.shiftKey||!e.onClick||(t.preventDefault(),e.onClick(t))}:void 0,children:(0,E.jsx)(L.zx,Object.assign({icon:"external-link-alt",variant:"primary",size:"sm"},t,{children:e.title}))})}function ho(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}uo.displayName="LogLabelStats";class go extends A.PureComponent{constructor(...e){super(...e),ho(this,"state",{showFieldsStats:!1,fieldCount:0,fieldStats:null}),ho(this,"showField",(()=>{const{onClickShowDetectedField:e,parsedKey:t}=this.props;e&&e(t)})),ho(this,"hideField",(()=>{const{onClickHideDetectedField:e,parsedKey:t}=this.props;e&&e(t)})),ho(this,"filterLabel",(()=>{const{onClickFilterLabel:e,parsedKey:t,parsedValue:s}=this.props;e&&e(t,s)})),ho(this,"filterOutLabel",(()=>{const{onClickFilterOutLabel:e,parsedKey:t,parsedValue:s}=this.props;e&&e(t,s)})),ho(this,"showStats",(()=>{const{showFieldsStats:e}=this.state;if(!e){const e=this.props.getStats(),t=e?e.reduce(((e,t)=>e+t.count),0):0;this.setState({fieldStats:e,fieldCount:t})}this.toggleFieldsStats()}))}toggleFieldsStats(){this.setState((e=>({showFieldsStats:!e.showFieldsStats})))}render(){const{theme:e,parsedKey:t,parsedValue:s,isLabel:a,links:n,showDetectedFields:i,wrapLogMessage:r,onClickShowDetectedField:o,onClickHideDetectedField:l,onClickFilterLabel:c,onClickFilterOutLabel:d}=this.props,{showFieldsStats:u,fieldStats:p,fieldCount:h}=this.state,g=(e=>({noHoverBackground:D.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:D.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:D.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:D.css`
      color: ${e.colors.primary.text};
    `,wrapLine:D.css`
      label: wrapLine;
      white-space: pre-wrap;
    `}))(e),m=(0,Yr.h)(e),f=o&&l,b=c&&d,v=!a&&i&&i.includes(t)?(0,E.jsx)(F.h,{name:"eye",className:g.showingField,title:"Hide this field",onClick:this.hideField}):(0,E.jsx)(F.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return(0,E.jsxs)("tr",{className:(0,D.cx)(m.logDetailsValue,{[g.noHoverBackground]:u}),children:[(0,E.jsx)("td",{className:m.logsDetailsIcon,children:(0,E.jsx)(F.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})}),b&&a&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("td",{className:m.logsDetailsIcon,children:(0,E.jsx)(F.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})}),(0,E.jsx)("td",{className:m.logsDetailsIcon,children:(0,E.jsx)(F.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel})})]}),f&&!a&&(0,E.jsx)("td",{className:m.logsDetailsIcon,colSpan:2,children:v}),(0,E.jsx)("td",{className:m.logDetailsLabel,children:t}),(0,E.jsxs)("td",{className:(0,D.cx)(g.wordBreakAll,r&&g.wrapLine),children:[s,null==n?void 0:n.map((e=>(0,E.jsxs)("span",{children:[" ",(0,E.jsx)(po,{link:e})]},e.title))),u&&(0,E.jsx)(uo,{stats:p,label:t,value:s,rowCount:h,isLabel:a})]})]})}}const mo=(0,$.HE)(go);var fo,bo;function vo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}mo.displayName="LogDetailsRow";class xo extends A.PureComponent{constructor(...e){super(...e),vo(this,"getParser",(0,Wa.default)(Ee.getParser)),vo(this,"getStatsForDetectedField",(e=>{const t=this.getParser(this.props.row.entry).buildMatcher(e);return(0,Ee.calculateFieldStats)(this.props.getRows(),t)}))}render(){const{row:e,theme:t,hasError:s,onClickFilterOutLabel:a,onClickFilterLabel:n,getRows:i,showDuplicates:r,className:o,onClickShowDetectedField:l,onClickHideDetectedField:c,showDetectedFields:d,getFieldLinks:u,wrapLogMessage:p}=this.props,h=(0,Yr.h)(t,e.logLevel),g=(e=>({logsRowLevelDetails:D.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:D.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${e.colors.background.primary};
      }
    `}))(t),m=e.labels?e.labels:{},f=Object.keys(m).length>0,b=so(e,u),v=b&&b.length>0,x=(0,D.cx)(!s&&[h.logsRowLevel,g.logsRowLevelDetails]);return(0,E.jsxs)("tr",{className:(0,D.cx)(o,g.logDetails),children:[r&&(fo||(fo=(0,E.jsx)("td",{}))),(0,E.jsx)("td",{className:x,"aria-label":"Log level"}),(0,E.jsx)("td",{colSpan:4,children:(0,E.jsx)("div",{className:h.logDetailsContainer,children:(0,E.jsx)("table",{className:h.logDetailsTable,children:(0,E.jsxs)("tbody",{children:[f&&(0,E.jsx)("tr",{children:(0,E.jsx)("td",{colSpan:5,className:h.logDetailsHeading,"aria-label":"Log labels",children:"Log labels"})}),Object.keys(m).sort().map((e=>{const t=m[e];return(0,E.jsx)(mo,{parsedKey:e,parsedValue:t,isLabel:!0,getStats:()=>(0,Ee.calculateLogsLabelStats)(i(),e),onClickFilterOutLabel:a,onClickFilterLabel:n},`${e}=${t}`)})),v&&(0,E.jsx)("tr",{children:(0,E.jsxs)("td",{colSpan:5,className:h.logDetailsHeading,"aria-label":"Detected fields",children:["Detected fields",(0,E.jsx)(U.u,{content:"Fields that are parsed from log message and detected by Grafana.",children:(0,E.jsx)(M.J,{name:"question-circle",size:"xs",className:D.css`
                            margin-left: 4px;
                          `})})]})}),b.sort().map((t=>{const{key:s,value:a,links:n,fieldIndex:i}=t;return(0,E.jsx)(mo,{parsedKey:s,parsedValue:a,links:n,onClickShowDetectedField:l,onClickHideDetectedField:c,getStats:()=>void 0===i?this.getStatsForDetectedField(s):(0,Ee.calculateStats)(e.dataFrame.fields[i].values.toArray()),showDetectedFields:d,wrapLogMessage:p},`${s}=${a}`)})),!v&&!f&&(bo||(bo=(0,E.jsx)("tr",{children:(0,E.jsx)("td",{colSpan:5,"aria-label":"No details",children:"No details available"})})))]})})})})]})}}const yo=(0,$.HE)(xo);yo.displayName="LogDetails";class wo extends A.PureComponent{render(){const{row:e,showDetectedFields:t,getFieldLinks:s,wrapLogMessage:a}=this.props,n=so(e,s),i=(0,D.cx)(a&&D.css`
          white-space: pre-wrap;
        `),r=t.map((e=>{const t=n.find((t=>{const{key:s}=t;return s===e}));return t?`${e}=${t.value}`:null})).filter((e=>null!==e)).join(" ");return(0,E.jsx)("td",{className:i,children:r})}}const jo=(0,$.Zz)(wo);function ko(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}jo.displayName="LogRowMessageDetectedFields";class So extends A.PureComponent{constructor(...e){super(...e),ko(this,"state",{showContext:!1,showDetails:!1}),ko(this,"toggleContext",(()=>{this.setState((e=>({showContext:!e.showContext})))})),ko(this,"toggleDetails",(()=>{this.props.enableLogDetails&&this.setState((e=>({showDetails:!e.showDetails})))}))}renderTimeStamp(e){return(0,Ee.dateTimeFormat)(e,{timeZone:this.props.timeZone})}renderLogRow(e,t,s,a){const{getRows:n,onClickFilterLabel:i,onClickFilterOutLabel:r,onClickShowDetectedField:o,onClickHideDetectedField:l,enableLogDetails:c,row:d,showDuplicates:u,showContextToggle:p,showLabels:h,showTime:g,showDetectedFields:m,wrapLogMessage:f,prettifyLogMessage:b,theme:v,getFieldLinks:x,forceEscape:y}=this.props,{showDetails:w,showContext:j}=this.state,k=(0,Yr.h)(v,d.logLevel),S=(e=>({topVerticalAlign:D.css`
      label: topVerticalAlign;
      vertical-align: top;
      margin-top: -${e.spacing(.5)};
      margin-left: -${e.spacing(.25)};
    `,detailsOpen:D.css`
      &:hover {
        background-color: ${$.GU.hoverColor(e.colors.background.primary,e)};
      }
    `,errorLogRow:D.css`
      label: erroredLogRow;
      color: ${e.colors.text.secondary};
    `}))(v),{errorMessage:C,hasError:T}=(0,Ee.checkLogsError)(d),N=(0,D.cx)(k.logsRow,{[S.errorLogRow]:T}),O=d.hasUnescapedContent&&y?Object.assign({},d,{entry:(0,Ee.escapeUnescapedString)(d.entry),raw:(0,Ee.escapeUnescapedString)(d.raw)}):d;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("tr",{className:N,onClick:this.toggleDetails,children:[u&&(0,E.jsx)("td",{className:k.logsRowDuplicates,children:O.duplicates&&O.duplicates>0?`${O.duplicates+1}x`:null}),(0,E.jsx)("td",{className:(0,D.cx)({[k.logsRowLevel]:!T}),children:T&&(0,E.jsx)(U.u,{content:`Error: ${C}`,placement:"right",theme:"error",children:(0,E.jsx)(M.J,{className:k.logIconError,name:"exclamation-triangle",size:"xs"})})}),c&&(0,E.jsx)("td",{title:w?"Hide log details":"See log details",className:k.logsRowToggleDetails,children:(0,E.jsx)(M.J,{className:S.topVerticalAlign,name:w?"angle-down":"angle-right"})}),g&&(0,E.jsx)("td",{className:k.logsRowLocalTime,children:this.renderTimeStamp(d.timeEpochMs)}),h&&O.uniqueLabels&&(0,E.jsx)("td",{className:k.logsRowLabels,children:(0,E.jsx)(Qr,{labels:O.uniqueLabels})}),m&&m.length>0?(0,E.jsx)(jo,{row:O,showDetectedFields:m,getFieldLinks:x,wrapLogMessage:f}):(0,E.jsx)(eo.r,{row:O,getRows:n,errors:t,hasMoreContextRows:s,updateLimit:a,context:e,contextIsOpen:j,showContextToggle:p,wrapLogMessage:f,prettifyLogMessage:b,onToggleContext:this.toggleContext})]}),this.state.showDetails&&(0,E.jsx)(yo,{className:N,showDuplicates:u,getFieldLinks:x,onClickFilterLabel:i,onClickFilterOutLabel:r,onClickShowDetectedField:o,onClickHideDetectedField:l,getRows:n,row:O,wrapLogMessage:f,hasError:T,showDetectedFields:m})]})}render(){const{showContext:e}=this.state,{logsSortOrder:t,row:s,getRowContext:a}=this.props;return e?(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(Xr,{row:s,getRowContext:a,logsSortOrder:t,children:({result:e,errors:t,hasMoreContextRows:s,updateLimit:a})=>(0,E.jsx)(E.Fragment,{children:this.renderLogRow(e,t,s,a)})})}):this.renderLogRow()}}const Co=(0,$.HE)(So);function To(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Co.displayName="LogRow";class No extends A.PureComponent{constructor(...e){super(...e),To(this,"renderAllTimer",null),To(this,"state",{renderAll:!1}),To(this,"makeGetRows",(0,Wa.default)((e=>()=>e))),To(this,"sortLogs",(0,Wa.default)(((e,t)=>(0,Ee.sortLogRows)(e,t))))}componentDidMount(){const{logRows:e,previewLimit:t}=this.props,s=(e?e.length:0)<=2*t;s?this.setState({renderAll:s}):this.renderAllTimer=window.setTimeout((()=>this.setState({renderAll:!0})),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:e,showContextToggle:t,showLabels:s,showTime:a,wrapLogMessage:n,prettifyLogMessage:i,logRows:r,deduplicatedRows:o,timeZone:l,onClickFilterLabel:c,onClickFilterOutLabel:d,theme:u,enableLogDetails:p,previewLimit:h,getFieldLinks:g,logsSortOrder:m,showDetectedFields:f,onClickShowDetectedField:b,onClickHideDetectedField:v,forceEscape:x}=this.props,{renderAll:y}=this.state,{logsRowsTable:w}=(0,Yr.h)(u),j=o||r,k=r&&r.length>0,S=j?j.reduce(((e,t)=>t.duplicates?e+t.duplicates:e),0):0,C=e!==Ee.LogsDedupStrategy.none&&S>0,T=j||[],N=m?this.sortLogs(T,m):T,O=N.slice(0,h),I=N.slice(h,N.length),P=this.makeGetRows(N),M=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return(0,E.jsx)("table",{className:w,children:(0,E.jsxs)("tbody",{children:[k&&O.map(((e,r)=>(0,E.jsx)(Co,{getRows:P,getRowContext:M,row:e,showContextToggle:t,showDuplicates:C,showLabels:s,showTime:a,showDetectedFields:f,wrapLogMessage:n,prettifyLogMessage:i,timeZone:l,enableLogDetails:p,onClickFilterLabel:c,onClickFilterOutLabel:d,onClickShowDetectedField:b,onClickHideDetectedField:v,getFieldLinks:g,logsSortOrder:m,forceEscape:x},e.uid))),k&&y&&I.map(((e,r)=>(0,E.jsx)(Co,{getRows:P,getRowContext:M,row:e,showContextToggle:t,showDuplicates:C,showLabels:s,showTime:a,showDetectedFields:f,wrapLogMessage:n,prettifyLogMessage:i,timeZone:l,enableLogDetails:p,onClickFilterLabel:c,onClickFilterOutLabel:d,onClickShowDetectedField:b,onClickHideDetectedField:v,getFieldLinks:g,logsSortOrder:m,forceEscape:x},e.uid))),k&&!y&&(0,E.jsx)("tr",{children:(0,E.jsxs)("td",{colSpan:5,children:["Rendering ",N.length-h," rows..."]})})]})})}}To(No,"defaultProps",{previewLimit:100});const Oo=(0,$.HE)(No);var Io;function Po({links:e}){const t=(0,$.yK)(Mo);if(1===e.length)return(0,E.jsx)(po,{link:e[0]});const s=e.filter((e=>"_blank"===e.target)),a=e.filter((e=>"_self"===e.target));return(0,E.jsxs)(E.Fragment,{children:[a.map(((e,t)=>(0,E.jsx)(po,{link:e},t))),(0,E.jsxs)("div",{className:t.wrapper,children:[(0,E.jsx)("p",{className:t.externalLinksHeading,children:"External links"}),s.map(((e,s)=>(0,E.jsxs)("a",{href:e.href,target:e.target,className:t.externalLink,children:[Io||(Io=(0,E.jsx)(M.J,{name:"external-link-alt"})),e.title]},s)))]})]})}Oo.displayName="LogsRows";const Mo=e=>({wrapper:D.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${e.spacing.sm};
  `,externalLinksHeading:D.css`
    color: ${e.colors.textWeak};
    font-weight: ${e.typography.weight.regular};
    font-size: ${e.typography.size.sm};
    margin: 0;
  `,externalLink:D.css`
    color: ${e.colors.linkExternal};
    font-weight: ${e.typography.weight.regular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${e.spacing.sm};
    }
  `});var Fo=s("./packages/grafana-ui/src/components/Button/FullWidthButtonContainer.tsx");const Ao=["override"],Do=["mappings"];function $o(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}const Lo=["reduceOptions","orientation"];function Eo(e,t,s){let a=e.options;if(e.fieldConfig=e.fieldConfig||{defaults:{},overrides:[]},"singlestat"===t&&s.angular)return function(e,t){const s=t.angular,a=Ee.fieldReducers.getIfExists(s.valueName),n={reduceOptions:{calcs:[a?a.id:Ee.ReducerID.mean]},orientation:Ee.VizOrientation.Horizontal},i={};s.format&&(i.unit=s.format);s.tableColumn&&(n.reduceOptions.fields=`/^${s.tableColumn}$/`);s.nullPointMode&&(i.nullValueMode=s.nullPointMode);s.nullText&&(i.noValue=s.nullText);(s.decimals||0===s.decimals)&&(i.decimals=s.decimals);if(s.thresholds&&s.colors){const e=s.thresholds.split(",").map((e=>Number(e.trim()))),t=[];for(const a of s.colors){const s=t.length-1;s>=0?t.push({value:e[s],color:a}):t.push({value:-1/0,color:a})}i.thresholds={mode:Ee.ThresholdsMode.Absolute,steps:t}}const r=(0,Ee.convertOldAngularValueMappings)(s,i.thresholds);r&&r.length&&(i.mappings=r);s.gauge&&s.gauge.show&&(i.min=s.gauge.minValue,i.max=s.gauge.maxValue);return e.fieldConfig.defaults=i,n}(e,s);for(const e of Lo)s.hasOwnProperty(e)&&(a[e]=(0,Tt.cloneDeep)(s[e]));return a}function Ro(e){if(!e.options)return{};const t=parseFloat(e.pluginVersion||"6.1");let s=e.options;t<6.2&&(s=function(e){const{valueOptions:t}=e;if(!t)return e;const s={},a={};if(s.mappings=e.valueMappings,s.thresholds=e.thresholds,s.defaults=a,a.unit=t.unit,a.decimals=t.decimals,t.stat){const e=Ee.fieldReducers.get(t.stat);e&&(s.calcs=[e.id])}a.min=e.minValue,a.max=e.maxValue;const n=Object.assign({},e,{fieldOptions:s});return(0,Tt.omit)(n,"valueMappings","thresholds","valueOptions","minValue","maxValue")}(s)),t<6.3&&(s=function(e){const{fieldOptions:t}=e;if(!t)return e;const s=e.fieldOptions,{mappings:a}=s,n=$o(s,Do);let i;e.thresholds&&(i={mode:Ee.ThresholdsMode.Absolute,steps:_o(e.thresholds)});return Object.assign({},e,{fieldOptions:Object.assign({},n,{defaults:Object.assign({},t.defaults,{mappings:a,thresholds:i})})})}(s));const{fieldOptions:a}=s;if(t<6.6&&a){var n;if(a&&a.override){const e=$o(s.fieldOptions,Ao);s=Object.assign({},s,{fieldOptions:Object.assign({},e,{overrides:[]})})}let e=null==a||null===(n=a.defaults)||void 0===n?void 0:n.thresholds;e?delete a.defaults.thresholds:(e=null==a?void 0:a.thresholds,delete a.thresholds),e&&(a.defaults.thresholds={mode:Ee.ThresholdsMode.Absolute,steps:e});const{defaults:t}=a;t.color&&"string"==typeof t.color&&(t.color={mode:Ee.FieldColorModeId.Fixed,fixedColor:t.color}),(0,Ee.validateFieldConfig)(t)}if(t<7&&(e.fieldConfig=e.fieldConfig||{defaults:{},overrides:[]},e.fieldConfig={defaults:a&&a.defaults?Object.assign({},e.fieldConfig.defaults,a.defaults):e.fieldConfig.defaults,overrides:a&&a.overrides?[...e.fieldConfig.overrides,...a.overrides]:e.fieldConfig.overrides},a&&(s.reduceOptions={values:a.values,limit:a.limit,calcs:a.calcs}),delete s.fieldOptions),t<7.1){const t=e.fieldConfig.defaults.title;null!=t&&(e.fieldConfig.defaults.displayName=t,delete e.fieldConfig.defaults.title)}if(t<8){var i;const t=null===(i=e.fieldConfig)||void 0===i?void 0:i.defaults;let s=null==t?void 0:t.unit;"percent"===s?((0,Tt.isNumber)(t.min)||(t.min=0),(0,Tt.isNumber)(t.max)||(t.max=100)):"percentunit"===s&&((0,Tt.isNumber)(t.min)||(t.min=0),(0,Tt.isNumber)(t.max)||(t.max=1))}return s}function _o(e){if(!e||!e.length)return;const t=e.map((e=>({value:null===e.value?-1/0:e.value,color:e.color})));return(0,Ee.sortThresholds)(t),t[0].value=-1/0,t}function Vo(e){return(0,Ee.convertOldAngularValueMappings)(e)}const Bo=({message:e,callToActionElement:t,footer:s,className:a})=>{const n=(0,we.wW)(zo);return(0,E.jsxs)("div",{className:(0,D.cx)([n.wrapper,a]),children:[e&&(0,E.jsx)("div",{className:n.message,children:e}),t,s&&(0,E.jsx)("div",{className:n.footer,children:s})]})},zo=e=>({wrapper:D.css`
    label: call-to-action-card;
    padding: ${e.spacing(3)};
    background: ${e.colors.background.secondary};
    border-radius: ${e.shape.borderRadius(2)};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:D.css`
    margin-bottom: ${e.spacing(3)};
    font-style: italic;
  `,footer:D.css`
    margin-top: ${e.spacing(3)}};
  `}),Uo=({children:e,renderMenuItems:t})=>{const[s,a]=(0,A.useState)(!1),[n,i]=(0,A.useState)({x:0,y:0});return(0,E.jsxs)(E.Fragment,{children:[e({openMenu:e=>{a(!0),i({x:e.pageX,y:e.pageY})}}),s&&(0,E.jsx)(Ki,{onClose:()=>a(!1),x:n.x,y:n.y,renderMenuItems:t})]})};var qo=s("./packages/grafana-ui/src/components/DataLinks/DataLinksInlineEditor/DataLinksInlineEditor.tsx"),Ho=s("./packages/grafana-ui/src/components/DataLinks/DataLinkInput.tsx"),Go=s("./packages/grafana-ui/src/utils/dataLinks.ts");const Wo=({children:e,links:t,config:s})=>{const a=s.links.length,n=[{items:(0,Go.R)(t),label:"Data links"}],i=()=>n.map(((e,t)=>(0,E.jsx)(Ji,{label:e.label,children:(e.items||[]).map((e=>(0,E.jsx)(Ne,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},e.label)))},`${e.label}${t}`))),r=D.css`
    cursor: context-menu;
  `;if(a>1)return(0,E.jsx)(Uo,{renderMenuItems:i,children:({openMenu:t})=>e({openMenu:t,targetClassName:r})});{const s=t()[0];return(0,E.jsx)("a",{href:s.href,onClick:s.onClick,target:s.target,title:s.title,style:{display:"flex"},"aria-label":Ae.wl.components.DataLinksContextMenu.singleLink,children:e({})})}};var Zo;const Qo=["title","className","children","branded","url","urlTitle","onDismiss","severity"];const Ko=A.memo(A.forwardRef(((e,t)=>{let{title:s,className:a,children:n,url:i,urlTitle:r,severity:o="info"}=e,l=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Qo);const c=(0,$.wW)(Yo);return(0,E.jsxs)(_r.b,Object.assign({severity:o,className:a},l,{ref:t,title:s,children:[(0,E.jsx)("div",{children:n}),i&&(0,E.jsxs)("a",{href:i,className:(0,D.cx)("external-link",c.docsLink),target:"_blank",rel:"noreferrer",children:[Zo||(Zo=(0,E.jsx)(M.J,{name:"book"}))," ",r||"Read more"]})]}))})));Ko.displayName="InfoBox";const Yo=(0,$.Bb)((e=>({docsLink:D.css`
      display: inline-block;
      margin-top: ${e.spacing(2)};
    `}))),Jo=["icon","color","text","tooltip","className"];const Xo=A.memo((e=>{let{icon:t,color:s,text:a,tooltip:n,className:i}=e,r=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Jo);const o=(0,we.Fg)(),l=el(o,s),c=(0,E.jsx)("div",Object.assign({className:(0,D.cx)(l.wrapper,i)},r,{children:(0,E.jsxs)(Yi.Lh,{align:"center",spacing:"xs",children:[t&&(0,E.jsx)(M.J,{name:t,size:"sm"}),(0,E.jsx)("span",{children:a})]})}));return n?(0,E.jsx)(U.u,{content:n,placement:"auto",children:c}):c}));Xo.displayName="Badge";const el=(0,At.B)(((e,t)=>{let s=(0,Ee.getColorForTheme)(t,e),a="",n="",i="";return e.isDark?(n=Ka()(s).setAlpha(.15).toString(),a=Ka()(s).darken(30).toString(),i=Ka()(s).lighten(15).toString()):(n=Ka()(s).setAlpha(.15).toString(),a=Ka()(s).lighten(20).toString(),i=Ka()(s).darken(15).toString()),{wrapper:D.css`
      font-size: ${e.typography.size.sm};
      display: inline-flex;
      padding: 1px 4px;
      border-radius: 3px;
      background: ${n};
      border: 1px solid ${a};
      color: ${i};
      font-weight: ${e.typography.weight.regular};

      > span {
        position: relative;
        top: 1px;
        margin-left: 2px;
      }
    `}})),tl=["title","featureState"];const sl=A.memo(A.forwardRef(((e,t)=>{let{title:s,featureState:a}=e,n=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,tl);const i=(0,$.yK)(al),r=a?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:i.badge,children:(0,E.jsx)(nl,{featureState:a})}),(0,E.jsx)("h3",{children:s})]}):(0,E.jsx)("h3",{children:s});return(0,E.jsx)(Ko,Object.assign({branded:!0,title:r,urlTitle:"Read documentation",ref:t},n))})));sl.displayName="FeatureInfoBox";const al=(0,$.Bb)((e=>({badge:D.css`
      margin-bottom: ${e.spacing.sm};
    `}))),nl=({featureState:e,tooltip:t})=>{const s=function(e){switch(e){case Ee.FeatureState.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}(e);return(0,E.jsx)(Xo,{text:s.text,color:s.color,icon:s.icon,tooltip:t})};var il,rl=s("./node_modules/@sentry/minimal/esm/index.js");const ol=(0,$.Bb)((()=>D.css`
    width: 500px;
    margin: 64px auto;
  `)),ll=({error:e,errorInfo:t,title:s})=>(0,E.jsxs)("div",{className:ol(),children:[(0,E.jsx)("h2",{children:s}),(0,E.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[e&&e.toString(),il||(il=(0,E.jsx)("br",{})),t&&t.componentStack]})]});var cl;function dl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}ll.displayName="ErrorWithStack";class ul extends A.PureComponent{constructor(...e){super(...e),dl(this,"state",{error:null,errorInfo:null})}componentDidCatch(e,t){(0,rl.Tb)(e,{contexts:{react:{componentStack:t.componentStack}}}),this.setState({error:e,errorInfo:t})}render(){const{children:e}=this.props,{error:t,errorInfo:s}=this.state;return e({error:t,errorInfo:s})}}class pl extends A.PureComponent{render(){const{title:e,children:t,style:s}=this.props;return(0,E.jsx)(ul,{children:({error:a,errorInfo:n})=>n?"alertbox"===s?(0,E.jsx)(_r.b,{title:e||"",children:(0,E.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[a&&a.toString(),cl||(cl=(0,E.jsx)("br",{})),n.componentStack]})}):(0,E.jsx)(ll,{title:e||"",error:a,errorInfo:n}):t})}}function hl(e,t={}){const s=s=>(0,E.jsx)(pl,Object.assign({},t,{children:(0,E.jsx)(e,Object.assign({},s))}));return s.displayName="WithErrorBoundary",s}dl(pl,"defaultProps",{title:"An unexpected error happened",style:"alertbox"});const gl=["children","isFocused","isInvalid","className","htmlFor","tooltip","width"];const ml=e=>{let{children:t,isFocused:s,isInvalid:a,className:n,htmlFor:i,tooltip:r,width:o}=e,l=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,gl);const c=ma()(n,`gf-form-label width-${o||"10"}`,{"gf-form-label--is-focused":s,"gf-form-label--is-invalid":a});return(0,E.jsxs)("label",Object.assign({className:c},l,{htmlFor:i,children:[t,r&&(0,E.jsx)(U.u,{placement:"top",content:r,theme:"info",children:(0,E.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,E.jsx)(M.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})})]}))},fl=["label","tooltip","labelWidth","inputWidth","inputEl","className"];const bl=e=>{let{label:t,tooltip:s,labelWidth:a,inputWidth:n,inputEl:i,className:r}=e,o=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,fl);const l=vl();return(0,E.jsxs)("div",{className:(0,D.cx)(l.formField,r),children:[(0,E.jsx)(ml,{width:a,tooltip:s,children:t}),i||(0,E.jsx)("input",Object.assign({type:"text",className:"gf-form-input "+(n?`width-${n}`:"")},o))]})};bl.displayName="FormField",bl.defaultProps={labelWidth:6,inputWidth:12};const vl=()=>({formField:D.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `});var xl=s("./packages/grafana-ui/src/components/Button/Button.tsx");const yl=["label","labelWidth","inputWidth","onReset","isConfigured","tooltip","placeholder"];const wl=e=>{let{label:t="Password",labelWidth:s,inputWidth:a=12,onReset:n,isConfigured:i,tooltip:r,placeholder:o="Password"}=e,l=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,yl);const c={noRadiusInput:D.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:D.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `};return(0,E.jsx)(bl,{label:t,tooltip:r,labelWidth:s,inputEl:i?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("input",Object.assign({type:"text",className:(0,D.cx)(`gf-form-input width-${a}`,c.noRadiusInput),disabled:!0,value:"configured"},(0,Tt.omit)(l,"value"))),(0,E.jsx)(xl.zx,{onClick:n,variant:"secondary",children:"Reset"})]}):(0,E.jsx)("input",Object.assign({type:"password",className:`gf-form-input width-${a}`,placeholder:o},l))})};wl.displayName="SecretFormField";const jl=({dataSourceConfig:e,onChange:t})=>{const s=e.secureJsonData?e.secureJsonData.basicAuthPassword:"";return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Z.InlineField,{children:(0,E.jsx)(bl,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:e.basicAuthUser,onChange:s=>t(Object.assign({},e,{basicAuthUser:s.currentTarget.value}))})}),(0,E.jsx)(Z.InlineField,{children:(0,E.jsx)(wl,{isConfigured:!!e.basicAuthPassword||!(!e.secureJsonFields||!e.secureJsonFields.basicAuthPassword),value:s||"",inputWidth:18,labelWidth:10,onReset:()=>{t(Object.assign({},e,{basicAuthPassword:"",secureJsonData:Object.assign({},e.secureJsonData,{basicAuthPassword:""}),secureJsonFields:Object.assign({},e.secureJsonFields,{basicAuthPassword:!1})}))},onChange:s=>{t(Object.assign({},e,{secureJsonData:Object.assign({},e.secureJsonData,{basicAuthPassword:s.currentTarget.value})}))}})})]})};var kl=s("./packages/grafana-ui/src/components/Forms/Legacy/Switch/Switch.tsx");const Sl=({dataSourceConfig:e,onChange:t,showForwardOAuthIdentityOption:s=!0})=>(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"gf-form-inline",children:[(0,E.jsx)(kl.r,{label:"TLS Client Auth",labelClass:"width-13",checked:e.jsonData.tlsAuth||!1,onChange:s=>t(Object.assign({},e.jsonData,{tlsAuth:s.currentTarget.checked}))}),(0,E.jsx)(kl.r,{label:"With CA Cert",labelClass:"width-13",checked:e.jsonData.tlsAuthWithCACert||!1,onChange:s=>t(Object.assign({},e.jsonData,{tlsAuthWithCACert:s.currentTarget.checked})),tooltip:"Needed for verifying self-signed TLS Certs"})]}),(0,E.jsx)("div",{className:"gf-form-inline",children:(0,E.jsx)(kl.r,{label:"Skip TLS Verify",labelClass:"width-13",checked:e.jsonData.tlsSkipVerify||!1,onChange:s=>t(Object.assign({},e.jsonData,{tlsSkipVerify:s.currentTarget.checked}))})}),s&&(0,E.jsx)("div",{className:"gf-form-inline",children:(0,E.jsx)(kl.r,{label:"Forward OAuth Identity",labelClass:"width-13",checked:e.jsonData.oauthPassThru||!1,onChange:s=>t(Object.assign({},e.jsonData,{oauthPassThru:s.currentTarget.checked})),tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along)."})})]}),Cl=["children","className","tooltip","width","transparent","as"];const Tl=e=>{let{children:t,className:s,tooltip:a,width:n,transparent:i,as:r="label"}=e,o=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Cl);const l=(0,$.Fg)(),c=Nl(l,i,n);return(0,E.jsxs)(r,Object.assign({className:(0,D.cx)(c.label,s)},o,{children:[t,a&&(0,E.jsx)(U.u,{placement:"top",content:a,theme:"info",children:(0,E.jsx)(M.J,{name:"info-circle",size:"sm",className:c.icon})})]}))},Nl=(e,t=!1,s)=>({label:D.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${e.spacing.sm};
      font-weight: ${e.typography.weight.semibold};
      font-size: ${e.typography.size.sm};
      background-color: ${t?"transparent":e.colors.bg2};
      height: ${e.height.md}px;
      line-height: ${e.height.md}px;
      margin-right: ${e.spacing.xs};
      border-radius: ${e.border.radius.md};
      border: none;
      width: ${s?"auto"!==s?8*s+"px":s:"100%"};
      color: ${e.colors.textHeading};
    `,icon:D.css`
      color: ${e.colors.textWeak};
      margin-left: 10px;

      :hover {
        color: ${e.colors.text};
      }
    `});var Ol=s("./packages/grafana-ui/src/utils/children.ts");const Il=["children","label","tooltip","labelWidth","invalid","loading","disabled","className","htmlFor","grow","transparent"];const Pl=e=>{let{children:t,label:s,tooltip:a,labelWidth:n="auto",invalid:i,loading:r,disabled:o,className:l,htmlFor:c,grow:d,transparent:u}=e,p=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Il);const h=(0,$.Fg)(),g=Ml(h,d),m=null!=c?c:(0,Ol.l)(t),f="string"==typeof s?(0,E.jsx)(Tl,{width:n,tooltip:a,htmlFor:m,transparent:u,children:s}):s;return(0,E.jsxs)("div",Object.assign({className:(0,D.cx)(g.container,l)},p,{children:[f,A.cloneElement(t,{invalid:i,disabled:o,loading:r})]}))};Pl.displayName="InlineField";const Ml=(e,t)=>({container:D.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${t?1:0} 0 auto;
      margin: 0 ${e.spacing.xs} ${e.spacing.xs} 0;
    `});var Fl;const Al=({hasCert:e,label:t,onChange:s,onClick:a,placeholder:n})=>(0,E.jsx)(Pl,{label:t,labelWidth:14,children:e?(0,E.jsxs)(E.Fragment,{children:[Fl||(Fl=(0,E.jsx)(Ge.I,{type:"text",disabled:!0,value:"configured",width:24})),(0,E.jsx)(L.zx,{variant:"secondary",onClick:a,style:{marginLeft:4},children:"Reset"})]}):(0,E.jsx)(gi,{rows:7,onChange:s,placeholder:n,required:!0})});var Dl;const $l=({dataSourceConfig:e,onChange:t})=>{const s=e.secureJsonFields&&e.secureJsonFields.tlsCACert,a=e.secureJsonFields&&e.secureJsonFields.tlsClientCert,n=e.secureJsonFields&&e.secureJsonFields.tlsClientKey,i=e.jsonData&&e.jsonData.serverName,r=s=>a=>{a.preventDefault();const n=Object.assign({},e.secureJsonFields);n[s]=!1,t(Object.assign({},e,{secureJsonFields:n}))},o=s=>a=>{const n=Object.assign({},e.secureJsonData);n[s]=a.currentTarget.value,t(Object.assign({},e,{secureJsonData:n}))};return(0,E.jsxs)("div",{className:"gf-form-group",children:[(0,E.jsxs)("div",{className:(0,D.cx)("gf-form",D.css`
            align-items: baseline;
          `),children:[Dl||(Dl=(0,E.jsx)("h6",{children:"TLS/SSL Auth Details"})),(0,E.jsx)(U.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info",children:(0,E.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,E.jsx)(M.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})})})]}),(0,E.jsxs)("div",{children:[e.jsonData.tlsAuthWithCACert&&(0,E.jsx)(Al,{hasCert:!!s,onChange:o("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:r("tlsCACert")}),e.jsonData.tlsAuth&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"gf-form",children:(0,E.jsx)(bl,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:i&&e.jsonData.serverName,onChange:s=>{const a=Object.assign({},e.jsonData,{serverName:s.currentTarget.value});t(Object.assign({},e,{jsonData:a}))}})}),(0,E.jsx)(Al,{hasCert:!!a,label:"Client Cert",onChange:o("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:r("tlsClientCert")}),(0,E.jsx)(Al,{hasCert:!!n,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:o("tlsClientKey"),onClick:r("tlsClientKey")})]})]})]})};var Ll,El;function Rl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _l=(0,$.Bb)((()=>({layout:D.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `}))),Vl=({header:e,onBlur:t,onChange:s,onRemove:a,onReset:n})=>{const i=_l();return(0,E.jsxs)("div",{className:i.layout,children:[(0,E.jsx)(bl,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:e.name||"",onChange:t=>s(Object.assign({},e,{name:t.target.value})),onBlur:t}),(0,E.jsx)(wl,{label:"Value",name:"value",isConfigured:e.configured,value:e.value,labelWidth:5,inputWidth:e.configured?11:12,placeholder:"Header Value",onReset:()=>n(e.id),onChange:t=>s(Object.assign({},e,{value:t.target.value})),onBlur:t}),(0,E.jsx)(L.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:t=>a(e.id),children:Ll||(Ll=(0,E.jsx)(M.J,{name:"trash-alt"}))})]})};Vl.displayName="CustomHeaderRow";class Bl extends A.PureComponent{constructor(e){super(e),Rl(this,"state",{headers:[]}),Rl(this,"updateSettings",(()=>{const{headers:e}=this.state,t=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter((([e,t])=>!e.startsWith("httpHeaderName")))),s=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter((([e,t])=>!e.startsWith("httpHeaderValue"))));for(const[a,n]of e.entries())t[`httpHeaderName${a+1}`]=n.name,n.configured||(s[`httpHeaderValue${a+1}`]=n.value);this.props.onChange(Object.assign({},this.props.dataSourceConfig,{jsonData:t,secureJsonData:s}))})),Rl(this,"onHeaderAdd",(()=>{this.setState((e=>({headers:[...e.headers,{id:(0,Tt.uniqueId)(),name:"",value:"",configured:!1}]})))})),Rl(this,"onHeaderChange",((e,t)=>{this.setState((({headers:s})=>({headers:s.map(((s,a)=>e!==a?s:Object.assign({},t)))})))})),Rl(this,"onHeaderReset",(e=>{this.setState((({headers:t})=>({headers:t.map(((t,s)=>t.id!==e?t:Object.assign({},t,{value:"",configured:!1})))})))})),Rl(this,"onHeaderRemove",(e=>{this.setState((({headers:t})=>({headers:t.filter((t=>t.id!==e))})),this.updateSettings)}));const{jsonData:t,secureJsonData:s,secureJsonFields:a}=this.props.dataSourceConfig;this.state={headers:Object.keys(t).sort().filter((e=>e.startsWith("httpHeaderName"))).map(((e,n)=>({id:(0,Tt.uniqueId)(),name:t[e],value:void 0!==s?s[e]:"",configured:a&&a[`httpHeaderValue${n+1}`]||!1})))}}render(){const{headers:e}=this.state;return(0,E.jsxs)("div",{className:"gf-form-group",children:[El||(El=(0,E.jsx)("div",{className:"gf-form",children:(0,E.jsx)("h6",{children:"Custom HTTP Headers"})})),(0,E.jsx)("div",{children:e.map(((e,t)=>(0,E.jsx)(Vl,{header:e,onChange:e=>{this.onHeaderChange(t,e)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset},e.id)))}),(0,E.jsx)("div",{className:"gf-form",children:(0,E.jsx)(L.zx,{variant:"secondary",icon:"plus",type:"button",onClick:e=>{this.onHeaderAdd()},children:"Add header"})})]})}}var zl,Ul=s("./packages/grafana-ui/src/components/Forms/Legacy/Select/Select.tsx"),ql=s("./packages/grafana-ui/src/components/Forms/Legacy/Input/Input.tsx"),Hl=s("./node_modules/@grafana/aws-sdk/index.js");const Gl=e=>{var t,s,a,n;const{dataSourceConfig:i,onChange:r}=e,o={onOptionsChange:e=>{var t,s,a,n;const o=Object.assign({},i,{jsonData:Object.assign({},i.jsonData,{sigV4AuthType:e.jsonData.authType,sigV4Profile:e.jsonData.profile,sigV4AssumeRoleArn:e.jsonData.assumeRoleArn,sigV4ExternalId:e.jsonData.externalId,sigV4Region:e.jsonData.defaultRegion,sigV4Endpoint:e.jsonData.endpoint}),secureJsonFields:{sigV4AccessKey:null===(t=e.secureJsonFields)||void 0===t?void 0:t.accessKey,sigV4SecretKey:null===(s=e.secureJsonFields)||void 0===s?void 0:s.secretKey},secureJsonData:{sigV4AccessKey:null===(a=e.secureJsonData)||void 0===a?void 0:a.accessKey,sigV4SecretKey:null===(n=e.secureJsonData)||void 0===n?void 0:n.secretKey}});r(o)},options:Object.assign({},i,{jsonData:Object.assign({},i.jsonData,{authType:i.jsonData.sigV4AuthType,profile:i.jsonData.sigV4Profile,assumeRoleArn:i.jsonData.sigV4AssumeRoleArn,externalId:i.jsonData.sigV4ExternalId,defaultRegion:i.jsonData.sigV4Region,endpoint:i.jsonData.sigV4Endpoint}),secureJsonFields:{accessKey:null===(t=i.secureJsonFields)||void 0===t?void 0:t.sigV4AccessKey,secretKey:null===(s=i.secureJsonFields)||void 0===s?void 0:s.sigV4SecretKey},secureJsonData:{accessKey:null===(a=i.secureJsonData)||void 0===a?void 0:a.sigV4AccessKey,secretKey:null===(n=i.secureJsonData)||void 0===n?void 0:n.sigV4SecretKey}})};return(0,E.jsxs)(E.Fragment,{children:[zl||(zl=(0,E.jsx)("div",{className:"gf-form",children:(0,E.jsx)("h6",{children:"SigV4 Auth Details"})})),(0,E.jsx)(Hl.ConnectionConfig,Object.assign({},o,{skipHeader:!0,skipEndpoint:!0}))]})};var Wl,Zl,Ql,Kl,Yl,Jl,Xl,ec;const tc=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],sc={label:"Server (default)",value:"proxy"},ac=()=>Wl||(Wl=(0,E.jsxs)("div",{className:"grafana-info-box m-t-2",children:[(0,E.jsxs)("p",{children:["Access mode controls how requests to the data source will be handled.",(0,E.jsxs)("strong",{children:[" ",(0,E.jsx)("i",{children:"Server"})]})," ","should be the preferred way if nothing else is stated."]}),(0,E.jsx)("div",{className:"alert-title",children:"Server access mode (Default):"}),(0,E.jsx)("p",{children:"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."}),(0,E.jsx)("div",{className:"alert-title",children:"Browser access mode:"}),(0,E.jsx)("p",{children:"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode."})]})),nc=e=>{const{defaultUrl:t,dataSourceConfig:s,onChange:a,showAccessOptions:n,sigV4AuthToggleEnabled:i,showForwardOAuthIdentityOption:r,azureAuthSettings:o}=e;let l;const[c,d]=(0,A.useState)(!1),u=(0,$.Fg)(),p=(0,A.useCallback)((e=>{a(Object.assign({},s,e))}),[s,a]);switch(s.access){case"direct":l=(0,E.jsxs)(E.Fragment,{children:["Your access method is ",Zl||(Zl=(0,E.jsx)("em",{children:"Browser"})),", this means the URL needs to be accessible from the browser."]});break;case"proxy":l=(0,E.jsxs)(E.Fragment,{children:["Your access method is ",Ql||(Ql=(0,E.jsx)("em",{children:"Server"})),", this means the URL needs to be accessible from the grafana backend/server."]});break;default:l="Specify a complete HTTP URL (for example http://your_server:8080)"}const h=(0,E.jsx)(Ul.Ph,{menuShouldPortal:!0,width:20,options:tc,value:tc.filter((e=>e.value===s.access))[0]||sc,onChange:e=>p({access:e.value})}),g=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(s.url),m=D.css`
    box-shadow: inset 0 0px 5px ${u.palette.red};
  `,f=(0,D.cx)({"width-20":!0,[m]:!g}),b=(0,E.jsx)(ql.I,{className:f,placeholder:t,value:s.url,onChange:e=>p({url:e.currentTarget.value})});return(0,E.jsxs)("div",{className:"gf-form-group",children:[(0,E.jsxs)(E.Fragment,{children:[Kl||(Kl=(0,E.jsx)("h3",{className:"page-heading",children:"HTTP"})),(0,E.jsxs)("div",{className:"gf-form-group",children:[(0,E.jsx)("div",{className:"gf-form",children:(0,E.jsx)(bl,{label:"URL",labelWidth:13,tooltip:l,inputEl:b})}),n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"gf-form-inline",children:[(0,E.jsx)("div",{className:"gf-form",children:(0,E.jsx)(bl,{label:"Access",labelWidth:13,inputWidth:20,inputEl:h})}),(0,E.jsx)("div",{className:"gf-form",children:(0,E.jsxs)("label",{className:"gf-form-label query-keyword pointer",onClick:()=>d((e=>!e)),children:["Help ",(0,E.jsx)(M.J,{name:c?"angle-down":"angle-right",style:{marginBottom:0}})]})})]}),c&&(Yl||(Yl=(0,E.jsx)(ac,{})))]}),"proxy"===s.access&&(0,E.jsxs)("div",{className:"gf-form-group",children:[(0,E.jsxs)("div",{className:"gf-form",children:[Jl||(Jl=(0,E.jsx)(ml,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",children:"Allowed cookies"})),(0,E.jsx)(Ks,{tags:s.jsonData.keepCookies,width:40,onChange:e=>p({jsonData:Object.assign({},s.jsonData,{keepCookies:e})})})]}),(0,E.jsx)("div",{className:"gf-form",children:(0,E.jsx)(bl,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",value:s.jsonData.timeout,onChange:e=>{p({jsonData:Object.assign({},s.jsonData,{timeout:parseInt(e.currentTarget.value,10)})})}})})]})]})]}),(0,E.jsxs)(E.Fragment,{children:[Xl||(Xl=(0,E.jsx)("h3",{className:"page-heading",children:"Auth"})),(0,E.jsxs)("div",{className:"gf-form-group",children:[(0,E.jsxs)("div",{className:"gf-form-inline",children:[(0,E.jsx)(kl.r,{label:"Basic auth",labelClass:"width-13",checked:s.basicAuth,onChange:e=>{p({basicAuth:e.currentTarget.checked})}}),(0,E.jsx)(kl.r,{label:"With Credentials",labelClass:"width-13",checked:s.withCredentials,onChange:e=>{p({withCredentials:e.currentTarget.checked})},tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests."})]}),(null==o?void 0:o.azureAuthEnabled)&&(0,E.jsx)("div",{className:"gf-form-inline",children:(0,E.jsx)(kl.r,{label:"Azure Authentication",labelClass:"width-13",checked:s.jsonData.azureAuth||!1,onChange:e=>{p({jsonData:Object.assign({},s.jsonData,{azureAuth:e.currentTarget.checked})})},tooltip:"Use Azure authentication for Azure endpoint."})}),i&&(0,E.jsx)("div",{className:"gf-form-inline",children:(0,E.jsx)(kl.r,{label:"SigV4 auth",labelClass:"width-13",checked:s.jsonData.sigV4Auth||!1,onChange:e=>{p({jsonData:Object.assign({},s.jsonData,{sigV4Auth:e.currentTarget.checked})})}})}),"proxy"===s.access&&(0,E.jsx)(Sl,{dataSourceConfig:s,onChange:e=>p({jsonData:e}),showForwardOAuthIdentityOption:r})]}),s.basicAuth&&(0,E.jsxs)(E.Fragment,{children:[ec||(ec=(0,E.jsx)("h6",{children:"Basic Auth Details"})),(0,E.jsx)("div",{className:"gf-form-group",children:(0,E.jsx)(jl,Object.assign({},e))})]}),(null==o?void 0:o.azureAuthEnabled)&&(null==o?void 0:o.azureSettingsUI)&&s.jsonData.azureAuth&&(0,E.jsx)(o.azureSettingsUI,{dataSourceConfig:s,onChange:a}),s.jsonData.sigV4Auth&&i&&(0,E.jsx)(Gl,Object.assign({},e)),(s.jsonData.tlsAuth||s.jsonData.tlsAuthWithCACert)&&(0,E.jsx)($l,{dataSourceConfig:s,onChange:a}),"proxy"===s.access&&(0,E.jsx)(Bl,{dataSourceConfig:s,onChange:a})]})]})};var ic;function rc({options:e,onOptionsChange:t}){return(0,E.jsxs)(E.Fragment,{children:[ic||(ic=(0,E.jsx)("h3",{className:"page-heading",children:"Alerting"})),(0,E.jsx)("div",{className:"gf-form-group",children:(0,E.jsx)("div",{className:"gf-form-inline",children:(0,E.jsx)("div",{className:"gf-form",children:(0,E.jsx)(kl.r,{label:"Manage alerts via Alerting UI",labelClass:"width-13",checked:!1!==e.jsonData.manageAlerts,onChange:s=>t(Object.assign({},e,{jsonData:Object.assign({},e.jsonData,{manageAlerts:s.currentTarget.checked})}))})})})})]})}var oc=s("./packages/grafana-ui/src/components/transitions/FadeTransition.tsx"),lc=s("./packages/grafana-ui/src/components/transitions/SlideOutTransition.tsx");const cc=e=>({segment:D.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:D.css`
      color: ${e.palette.gray2};
    `,disabled:D.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}),dc=["options","value","onChange","Component","className","allowCustomValue","allowEmptyValue","placeholder","disabled","inputMinWidth","inputPlaceholder","onExpandedChange","autofocus"];function uc(e){let{options:t,value:s,onChange:a,Component:n,className:i,allowCustomValue:r,allowEmptyValue:o,placeholder:l,disabled:c,inputMinWidth:d,inputPlaceholder:u,onExpandedChange:p,autofocus:h=!1}=e,g=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,dc);const[m,f,b,v]=Nc(h,p),x=d?Math.max(d,f):f,y=(0,$.yK)(cc);if(!b){const e=(0,Tt.isObject)(s)?s.label:s;return(0,E.jsx)(m,{disabled:c,Component:n||(0,E.jsx)(Tl,{className:(0,D.cx)(y.segment,{[y.queryPlaceholder]:void 0!==l&&!s,[y.disabled]:c},i),children:e||l})})}return(0,E.jsx)(hc,Object.assign({},g,{value:s&&!(0,Tt.isObject)(s)?{value:s}:s,placeholder:u,options:t,width:x,onClickOutside:()=>v(!1),allowCustomValue:r,allowEmptyValue:o,onChange:e=>{v(!1),a(e)}}))}const pc=["value","placeholder","options","onChange","onClickOutside","loadOptions","width","noOptionsMessage","allowCustomValue","allowEmptyValue"];function hc(e){let{value:t,placeholder:s="",options:a=[],onChange:n,onClickOutside:i,loadOptions:r,width:o,noOptionsMessage:l="",allowCustomValue:c=!1,allowEmptyValue:d=!1}=e,u=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,pc);const p=(0,A.useRef)(null),h=(0,we.l4)();let g,m=o>0?o/h.spacing.gridSize:void 0,f={};return r?(g=Ft.qb,f={loadOptions:r,defaultOptions:!0}):g=Ft.Ph,(0,E.jsx)("div",Object.assign({},u,{ref:p,children:(0,E.jsx)(g,Object.assign({menuShouldPortal:!0,width:m,noOptionsMessage:l,placeholder:s,autoFocus:!0,isOpen:!0,onChange:n,options:a,value:t,closeMenuOnSelect:!1,onCloseMenu:()=>{if(p&&p.current){const e=p.current.querySelector('input[id^="react-select-"]');e&&(e.value||d)?n({value:e.value,label:e.value}):i()}},allowCustomValue:c},f))}))}var gc=s("./node_modules/react-use/esm/useAsyncFn.js");const mc=["value","onChange","loadOptions","reloadOptionsOnChange","Component","className","allowCustomValue","allowEmptyValue","disabled","placeholder","inputMinWidth","inputPlaceholder","autofocus","onExpandedChange","noOptionMessageHandler"];function fc(e){var t;let{value:s,onChange:a,loadOptions:n,reloadOptionsOnChange:i=!1,Component:r,className:o,allowCustomValue:l,allowEmptyValue:c,disabled:d,placeholder:u,inputMinWidth:p,inputPlaceholder:h,autofocus:g=!1,onExpandedChange:m,noOptionMessageHandler:f=bc}=e,b=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,mc);const[v,x]=(0,gc.Z)(n,[n]),[y,w,j,k]=Nc(g,m),S=p?Math.max(p,w):w,C=(0,$.yK)(cc);if(!j){const e=(0,Tt.isObject)(s)?s.label:s;return(0,E.jsx)(y,{onClick:i?void 0:x,disabled:d,Component:r||(0,E.jsx)(Tl,{className:(0,D.cx)(C.segment,{[C.queryPlaceholder]:void 0!==u&&!s,[C.disabled]:d},o),children:e||u})})}return(0,E.jsx)(hc,Object.assign({},b,{value:s&&!(0,Tt.isObject)(s)?{value:s}:s,placeholder:h,options:null!==(t=v.value)&&void 0!==t?t:[],loadOptions:i?x:void 0,width:S,noOptionsMessage:f(v),allowCustomValue:l,allowEmptyValue:c,onClickOutside:()=>{k(!1)},onChange:e=>{k(!1),a(e)}}))}function bc(e){return e.loading?"Loading options...":e.error?"Failed to load options":Array.isArray(e.value)&&0!==e.value.length?"":"No options found"}var vc=s("./node_modules/react-use/lib/useClickAway.js");const xc=["value","onChange","Component","className","placeholder","inputPlaceholder","disabled","autofocus","onExpandedChange"];function yc(e){let{value:t,onChange:s,Component:a,className:n,placeholder:i,inputPlaceholder:r,disabled:o,autofocus:l=!1,onExpandedChange:c}=e,d=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,xc);const u=(0,A.useRef)(null),[p,h]=(0,A.useState)(t),[g,m]=(0,A.useState)((0,en.X1)((t||"").toString(),14).width),[f,,b,v]=Nc(l,c),x=(0,$.yK)(cc);if((0,vc.Z)(u,(()=>{v(!1),s(p)})),!b)return(0,E.jsx)(f,{disabled:o,Component:a||(0,E.jsx)(Tl,{className:(0,D.cx)(x.segment,{[x.queryPlaceholder]:void 0!==i&&!p,[x.disabled]:o},n),children:t||i})});const y=D.css`
    width: ${Math.max(g+20,32)}px;
  `;return(0,E.jsx)("input",Object.assign({},d,{ref:u,autoFocus:!0,className:(0,D.cx)("gf-form gf-form-input",y),value:p,placeholder:r,onChange:e=>{const{width:t}=(0,en.X1)(e.target.value,14);m(t),h(e.target.value)},onBlur:()=>{v(!1),s(p)},onKeyDown:e=>{[13,27].includes(e.keyCode)&&(v(!1),s(p))}}))}const wc=["children","className"];const jc=e=>{let{children:t,className:s}=e,a=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,wc);const n=(0,$.yK)(kc);return(0,E.jsx)("div",Object.assign({className:(0,D.cx)(n.container,s)},a,{children:t}))},kc=e=>({container:D.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${e.spacing.xs};
    `});var Sc;const Cc=({label:e,children:t,fill:s})=>{const a=(0,$.wW)(Tc);return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(jc,{children:[(0,E.jsx)(Tl,{width:12,className:a.label,children:e}),t,s&&(0,E.jsx)("div",{className:a.fill,children:Sc||(Sc=(0,E.jsx)(Tl,{children:""}))})]})})},Tc=e=>({label:D.css`
    color: ${e.colors.primary.text};
  `,fill:D.css`
    flex-grow: 1;
    margin-bottom: ${e.spacing(.5)};
  `}),Nc=(e,t)=>{const s=(0,A.useRef)(null),[a,n]=(0,A.useState)(e),[i,r]=(0,A.useState)(0),o=e=>{n(e),t&&t(e)};return[({Component:e,onClick:t,disabled:a})=>(0,E.jsx)("div",{ref:s,onClick:a?void 0:()=>{o(!0),s&&s.current&&r(1.25*s.current.clientWidth),t&&t()},children:e}),i,a,o]};var Oc=s("./node_modules/rc-drawer/es/index.js");const Ic=(0,$.Bb)(((e,t)=>({drawer:D.css`
      .drawer-content {
        background-color: ${e.colors.background.primary};
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      &.drawer-open .drawer-mask {
        background-color: ${e.components.overlay.background};
        backdrop-filter: blur(1px);
        opacity: 1;
      }
      .drawer-mask {
        background-color: ${e.components.overlay.background};
        backdrop-filter: blur(1px);
      }
      .drawer-open .drawer-content-wrapper {
        box-shadow: ${e.shadows.z3};
      }
      z-index: ${e.zIndex.dropdown};
    `,header:D.css`
      background-color: ${e.colors.background.canvas};
      z-index: 1;
      flex-grow: 0;
      padding-top: ${e.spacing(.5)};
    `,actions:D.css`
      display: flex;
      align-items: baseline;
      justify-content: flex-end;
    `,titleWrapper:D.css`
      margin-bottom: ${e.spacing(3)};
      padding: ${e.spacing(0,1,0,3)};
      overflow-wrap: break-word;
    `,titleSpacing:D.css`
      margin-bottom: ${e.spacing(2)};
    `,content:D.css`
      padding: ${e.spacing(2)};
      flex-grow: 1;
      overflow: ${t?"auto":"hidden"};
      z-index: 0;
      height: 100%;
    `}))),Pc=({children:e,inline:t=!1,onClose:s,closeOnMaskClick:a=!0,scrollableContent:n=!1,title:i,subtitle:r,width:o="40%",expandable:l=!1})=>{const c=(0,$.l4)(),d=Ic(c,n),[u,p]=(0,A.useState)(!1),[h,g]=(0,A.useState)(!1),m=u?"100%":o;return(0,A.useEffect)((()=>{g(!0)}),[]),(0,E.jsxs)(Oc.Z,{level:null,handler:!1,open:h,onClose:s,maskClosable:a,placement:"right",width:m,getContainer:t?void 0:"body",style:{position:`${t&&"absolute"}`},className:d.drawer,"aria-label":"string"==typeof i?Ae.wl.components.Drawer.General.title(i):Ae.wl.components.Drawer.General.title("no title"),children:["string"==typeof i&&(0,E.jsxs)("div",{className:d.header,children:[(0,E.jsxs)("div",{className:d.actions,children:[l&&!u&&(0,E.jsx)(F.h,{name:"angle-left",size:"xl",onClick:()=>p(!0),surface:"header","aria-label":Ae.wl.components.Drawer.General.expand}),l&&u&&(0,E.jsx)(F.h,{name:"angle-right",size:"xl",onClick:()=>p(!1),surface:"header","aria-label":Ae.wl.components.Drawer.General.contract}),(0,E.jsx)(F.h,{name:"times",size:"xl",onClick:s,surface:"header","aria-label":Ae.wl.components.Drawer.General.close})]}),(0,E.jsxs)("div",{className:d.titleWrapper,children:[(0,E.jsx)("h3",{children:i}),"string"==typeof r&&(0,E.jsx)("div",{className:"muted",children:r}),"string"!=typeof r&&r]})]}),"string"!=typeof i&&i,(0,E.jsx)("div",{className:d.content,children:n?(0,E.jsx)(W.$,{children:e}):e})]})};var Mc=s("./node_modules/rc-slider/es/index.js"),Fc=s("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js");const Ac=(0,$.Bb)(((e,t)=>{const{spacing:s}=e,a=e.colors.border.strong,n=e.colors.primary.main,i=e.colors.primary.main,r=`box-shadow: 0px 0px 0px 6px ${e.colors.primary.transparent}`;return{container:D.css`
      width: 100%;
      margin: ${t?"none":`${s(1,3,1,1)}`};
      height: ${t?"auto":"100%"};
    `,slider:D.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-vertical .rc-slider-handle {
        margin-top: -10px;
      }
      .rc-slider-handle {
        border: none;
        background-color: ${i};
        box-shadow: ${e.shadows.z1};
        cursor: pointer;
      }
      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle:focus,
      .rc-slider-handle-click-focused:focus,
      .rc-slider-dot-active {
        ${r};
      }
      .rc-slider-track {
        background-color: ${n};
      }
      .rc-slider-rail {
        background-color: ${a};
        cursor: pointer;
      }
    `,tooltip:Fc.iv`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${e.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${e.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:D.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:D.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:D.css`
      margin-left: ${e.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:D.css`
      margin: 0 0 ${e.spacing(3)} 0;
      order: 1;
    `}})),Dc=({min:e,max:t,onChange:s,onAfterChange:a,orientation:n="horizontal",reverse:i,step:r,value:o})=>{const l="horizontal"===n,c=(0,we.l4)(),d=Ac(c,l),u=Mc.ZP,[p,h]=(0,A.useState)(o||e),g=(0,A.useCallback)((e=>{h(e),s&&s(e)}),[h,s]),m=(0,A.useCallback)((n=>{let i=+n.target.value;Number.isNaN(i)&&(i=0),i>t&&(i=t),i<e&&(i=e),h(i),s&&s(i),a&&a(i)}),[t,e,s,a]),f=l?[]:[d.sliderInputVertical],b=l?[]:[d.sliderInputFieldVertical];return(0,E.jsxs)("div",{className:(0,D.cx)(d.container,d.slider),children:[(0,E.jsx)(Fc.xB,{styles:d.tooltip}),(0,E.jsxs)("label",{className:(0,D.cx)(d.sliderInput,...f),children:[(0,E.jsx)(u,{min:e,max:t,step:r,defaultValue:o,value:p,onChange:g,onAfterChange:a,vertical:!l,reverse:i}),(0,E.jsx)(Ge.I,{type:"text",className:(0,D.cx)(d.sliderInputField,...b),value:`${p}`,onChange:m,min:e,max:t})]})]})};Dc.displayName="Slider";const $c=({min:e,max:t,onChange:s,onAfterChange:a,orientation:n="horizontal",reverse:i,step:r,formatTooltipResult:o,value:l,tooltipAlwaysVisible:c=!0})=>{const d="horizontal"===n,u=(0,we.l4)(),p=Ac(u,d),h=(0,Mc.u7)(Mc.e6);return(0,E.jsxs)("div",{className:(0,D.cx)(p.container,p.slider),children:[(0,E.jsx)(Fc.xB,{styles:p.tooltip}),(0,E.jsx)(h,{tipProps:{visible:c,placement:d?"top":"right"},min:e,max:t,step:r,defaultValue:l,tipFormatter:e=>o?o(e):e,onChange:s,onAfterChange:a,vertical:!d,reverse:i})]})};$c.displayName="Range";const Lc=({value:e,onChange:t,item:s})=>{var a,n,i,r;const o=null!==(a=s.settings)&&void 0!==a&&a.useTextarea?gi:Ge.I,l=(0,A.useCallback)((a=>{let n=null!=e?e:"";if(a.hasOwnProperty("key")){var i;const e=a;"Enter"!==e.key||null!==(i=s.settings)&&void 0!==i&&i.useTextarea||(n=e.currentTarget.value.trim())}else{n=a.currentTarget.value.trim()}n!==e&&t(""===n?void 0:n)}),[e,null===(n=s.settings)||void 0===n?void 0:n.useTextarea,t]);return(0,E.jsx)(o,{placeholder:null===(i=s.settings)||void 0===i?void 0:i.placeholder,defaultValue:e||"",rows:(null===(r=s.settings)||void 0===r?void 0:r.useTextarea)&&s.settings.rows||5,onBlur:l,onKeyDown:l})};var Ec;function Rc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class _c extends A.PureComponent{constructor(...e){super(...e),Rc(this,"state",{showAdd:!1}),Rc(this,"onRemoveString",(e=>{const{value:t,onChange:s}=this.props,a=[...t];a.splice(e,1),s(a)})),Rc(this,"onValueChange",((e,t)=>{const s=e;if(e.hasOwnProperty("key")&&"Enter"!==s.key)return;const{value:a,onChange:n}=this.props,i=s.currentTarget.value.trim();if(t<0)return i&&(s.currentTarget.value="",n([...a,i])),void this.setState({showAdd:!1});if(!i)return this.onRemoveString(t);const r=[...a];r[t]=i,n(r)}))}render(){var e;const{value:t,item:s}=this.props,{showAdd:a}=this.state,n=Vc((0,$.gh)()),i=(null===(e=s.settings)||void 0===e?void 0:e.placeholder)||"Add text";return(0,E.jsxs)("div",{children:[t.map(((e,t)=>(0,E.jsx)(Ge.I,{className:n.textInput,defaultValue:e||"",onBlur:e=>this.onValueChange(e,t),onKeyDown:e=>this.onValueChange(e,t),suffix:(0,E.jsx)(M.J,{className:n.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(t)})},`${t}/${e}`))),a?(0,E.jsx)(Ge.I,{autoFocus:!0,className:n.textInput,placeholder:i,defaultValue:"",onBlur:e=>this.onValueChange(e,-1),onKeyDown:e=>this.onValueChange(e,-1),suffix:Ec||(Ec=(0,E.jsx)(M.J,{name:"plus-circle"}))}):(0,E.jsx)(L.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0}),children:i})]})}}const Vc=(0,$.Bb)((e=>({textInput:D.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${e.colors.formInputBorderHover};
      }
    `,trashIcon:D.css`
      color: ${e.colors.textWeak};
      cursor: pointer;

      &:hover {
        color: ${e.colors.text};
      }
    `}))),Bc=({value:e,onChange:t,item:s})=>{const{settings:a}=s,n=(0,A.useCallback)((e=>{if(e.hasOwnProperty("key")){const s=e;"Enter"===s.key&&t(null!=a&&a.integer?(0,Ee.toIntegerOrUndefined)(s.currentTarget.value):(0,Ee.toFloatOrUndefined)(s.currentTarget.value))}else{const s=e;t(null!=a&&a.integer?(0,Ee.toIntegerOrUndefined)(s.currentTarget.value):(0,Ee.toFloatOrUndefined)(s.currentTarget.value))}}),[t,null==a?void 0:a.integer]),i=null==e||isNaN(e)?"":e.toString();return(0,E.jsx)(Ge.I,{defaultValue:i,min:null==a?void 0:a.min,max:null==a?void 0:a.max,type:"number",step:null==a?void 0:a.step,placeholder:null==a?void 0:a.placeholder,onBlur:n,onKeyDown:n})},zc=({value:e,onChange:t,item:s})=>{const{settings:a}=s,n="number"==typeof e?e:"string"==typeof e?+e:0;return(0,E.jsx)(Dc,{value:n,min:(null==a?void 0:a.min)||0,max:(null==a?void 0:a.max)||100,step:null==a?void 0:a.step,onChange:t})};function Uc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class qc extends A.PureComponent{constructor(...e){super(...e),Uc(this,"state",{isLoading:!0,options:[]}),Uc(this,"updateOptions",(async()=>{var e;const{item:t}=this.props,{settings:s}=t;let a=(null===(e=t.settings)||void 0===e?void 0:e.options)||[];null!=s&&s.getOptions&&(a=await s.getOptions(this.props.context)),this.state.options!==a&&this.setState({isLoading:!1,options:a})}))}componentDidMount(){this.updateOptions()}componentDidUpdate(e){var t,s;const a=null===(t=e.item)||void 0===t?void 0:t.settings,n=null===(s=this.props.item)||void 0===s?void 0:s.settings;if(a!==n)this.updateOptions();else if(null!=n&&n.getOptions){var i,r;(null===(i=e.context)||void 0===i?void 0:i.data)!==(null===(r=this.props.context)||void 0===r?void 0:r.data)&&this.updateOptions()}}render(){const{options:e,isLoading:t}=this.state,{value:s,onChange:a,item:n}=this.props,{settings:i}=n;let r=e.find((e=>e.value===s));return!r&&s&&(r={label:`${s}`,value:s}),(0,E.jsx)(Ft.Ph,{menuShouldPortal:!0,isLoading:t,value:r,defaultValue:s,allowCustomValue:null==i?void 0:i.allowCustomValue,onChange:e=>a(e.value),options:e})}}function Hc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Gc extends A.PureComponent{constructor(...e){super(...e),Hc(this,"state",{isLoading:!0,options:[]}),Hc(this,"updateOptions",(async()=>{var e;const{item:t}=this.props,{settings:s}=t;let a=(null===(e=t.settings)||void 0===e?void 0:e.options)||[];null!=s&&s.getOptions&&(a=await s.getOptions(this.props.context)),this.state.options!==a&&this.setState({isLoading:!1,options:a})}))}componentDidMount(){this.updateOptions()}componentDidUpdate(e){var t,s;const a=null===(t=e.item)||void 0===t?void 0:t.settings,n=null===(s=this.props.item)||void 0===s?void 0:s.settings;if(a!==n)this.updateOptions();else if(null!=n&&n.getOptions){var i,r;(null===(i=e.context)||void 0===i?void 0:i.data)!==(null===(r=this.props.context)||void 0===r?void 0:r.data)&&this.updateOptions()}}render(){const{options:e,isLoading:t}=this.state,{value:s,onChange:a,item:n}=this.props,{settings:i}=n;return(0,E.jsx)(Ft.NU,{menuShouldPortal:!0,isLoading:t,value:s,defaultValue:s,allowCustomValue:null==i?void 0:i.allowCustomValue,onChange:e=>{a(e.map((e=>e.value)).flatMap((e=>void 0!==e?[e]:[])))},options:e})}}var Wc=s("./node_modules/react-hook-form/dist/index.esm.js");const Zc=["defaultValues","onSubmit","validateOnMount","validateFieldsOnMount","children","validateOn","maxWidth"],Qc=["handleSubmit","trigger","formState"];function Kc(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}function Yc(e){let{defaultValues:t,onSubmit:s,validateOnMount:a=!1,validateFieldsOnMount:n,children:i,validateOn:r="onSubmit",maxWidth:o=600}=e,l=Kc(e,Zc);const c=(0,Wc.cI)({mode:r,defaultValues:t}),{handleSubmit:d,trigger:u,formState:p}=c,h=Kc(c,Qc);return(0,A.useEffect)((()=>{a&&u(n)}),[u,n,a]),(0,E.jsx)("form",Object.assign({className:D.css`
        max-width: ${"none"!==o?o+"px":o};
        width: 100%;
      `,onSubmit:d(s)},l,{children:i(Object.assign({errors:p.errors,formState:p},h))}))}const Jc=Wc.Qr;var Xc=s("./packages/grafana-ui/src/components/ValuePicker/ValuePicker.tsx"),ed=s("./packages/grafana-ui/src/components/MatchersUI/utils.ts");const td=(0,A.memo)((e=>{const{data:t,options:s,onChange:a}=e,n=(0,ed.IX)(t),i=(0,ed.nw)(n,s),r=(0,A.useCallback)((e=>{if((0,ed.w3)(e.value,n))return a(e.value)}),[n,a]),o=i.find((e=>e.value===s));return(0,E.jsx)(Ft.Ph,{menuShouldPortal:!0,value:o,options:i,onChange:r})}));td.displayName="FieldNameMatcherEditor";const sd={id:Ee.FieldMatcherID.byName,component:td,matcher:Ee.fieldMatchers.get(Ee.FieldMatcherID.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:e=>e},ad=(0,A.memo)((e=>{const{options:t,onChange:s}=e,a=(0,A.useCallback)((e=>s(e.target.value)),[s]);return(0,E.jsx)(Ge.I,{placeholder:"Enter regular expression",defaultValue:t,onBlur:a})}));ad.displayName="FieldNameByRegexMatcherEditor";const nd={id:Ee.FieldMatcherID.byRegexp,component:ad,matcher:Ee.fieldMatchers.get(Ee.FieldMatcherID.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:e=>e},id=(0,A.memo)((e=>{const{data:t,options:s,onChange:a}=e,n=od(t),i=ld(n,s),r=(0,A.useCallback)((e=>a(e.value)),[a]),o=i.find((e=>e.value===s));return(0,E.jsx)(Ft.Ph,{menuShouldPortal:!0,value:o,options:i,onChange:r})}));id.displayName="FieldTypeMatcherEditor";const rd=[{value:Ee.FieldType.number,label:"Numeric"},{value:Ee.FieldType.string,label:"String"},{value:Ee.FieldType.time,label:"Time"},{value:Ee.FieldType.boolean,label:"Boolean"},{value:Ee.FieldType.trace,label:"Traces"},{value:Ee.FieldType.other,label:"Other"}],od=e=>(0,A.useMemo)((()=>{const t=new Map;for(const e of rd)t.set(e.value,0);for(const s of e)for(const e of s.fields){const s=e.type||Ee.FieldType.other;let a=t.get(s);a||(a=0),t.set(s,a+1)}return t}),[e]),ld=(e,t)=>(0,A.useMemo)((()=>{let s=!1;const a=[];for(const n of rd){const i=e.get(n.value),r=t===n.value;(i||r)&&a.push(Object.assign({},n,{label:`${n.label} (${e.get(n.value)})`})),r&&(s=!0)}return t&&!s&&a.push({value:t,label:`${t} (No matches)`}),a}),[e,t]),cd={id:Ee.FieldMatcherID.byType,component:id,matcher:Ee.fieldMatchers.get(Ee.FieldMatcherID.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:e=>e},dd=(0,A.memo)((e=>{const{data:t,options:s,onChange:a}=e,n=pd(t),i=hd(n),r=(0,A.useCallback)((e=>{if(e.value&&n.has(e.value))return a(e.value)}),[n,a]),o=i.find((e=>e.value===s));return(0,E.jsx)(Ft.Ph,{menuShouldPortal:!0,value:o,options:i,onChange:r})}));dd.displayName="FieldsByFrameRefIdMatcher";const ud={id:Ee.FieldMatcherID.byFrameRefID,component:dd,matcher:Ee.fieldMatchers.get(Ee.FieldMatcherID.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:e=>e},pd=e=>(0,A.useMemo)((()=>{const t=new Set;for(const s of e)s.refId&&t.add(s.refId);return t}),[e]),hd=e=>(0,A.useMemo)((()=>Array.from(e).map((e=>({value:e,label:e})))),[e]),gd=(0,A.memo)((e=>{const{data:t,options:s,onChange:a}=e,{readOnly:n,prefix:i}=s,r=(0,ed.IX)(t),o=(0,ed.nw)(r,void 0),l=(0,A.useCallback)((e=>{if(Array.isArray(e))return a(Object.assign({},s,{names:e.reduce(((e,t)=>(0,ed.w3)(t.value,r)?(e.push(t.value),e):e),[])}))}),[r,a,s]);if(n){var c;const e=(null!==(c=s.names)&&void 0!==c?c:[]).join(", ");return(0,E.jsx)(Ge.I,{value:e,readOnly:!0,disabled:!0,prefix:i})}return(0,E.jsx)(Ft.NU,{menuShouldPortal:!0,value:s.names,options:o,onChange:l})}));gd.displayName="FieldNameMatcherEditor";const md={id:Ee.FieldMatcherID.byNames,component:gd,matcher:Ee.fieldMatchers.get(Ee.FieldMatcherID.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:e=>{var t;return(null!==(t=e.names)&&void 0!==t?t:[]).join(", ")},excludeFromPicker:!0},fd=new Ee.Registry((()=>[sd,nd,cd,ud,md]));var bd=s("./packages/grafana-ui/src/components/Forms/Label.tsx");const vd=["children","className"];const xd=(0,$.Bb)((e=>({legend:D.css`
      font-size: ${e.typography.heading.h3};
      font-weight: ${e.typography.weight.regular};
      margin: 0 0 ${e.spacing.md} 0;
    `}))),yd=e=>{let{children:t,className:s}=e,a=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,vd);const n=(0,$.Fg)(),i=xd(n);return(0,E.jsx)("legend",Object.assign({className:(0,D.cx)(i.legend,s)},a,{children:t}))};var wd=s("./packages/grafana-ui/src/components/Forms/FieldValidationMessage.tsx");const jd=["label","description","value","onChange","disabled","className"];const kd=A.forwardRef(((e,t)=>{let{label:s,description:a,value:n,onChange:i,disabled:r,className:o}=e,l=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,jd);const c=(0,A.useCallback)((e=>{i&&i(e)}),[i]),d=(0,$.wW)(Sd);return(0,E.jsxs)("label",{className:(0,D.cx)(d.wrapper,o),children:[(0,E.jsx)("input",Object.assign({type:"checkbox",className:d.input,checked:n,disabled:r,onChange:c},l,{ref:t})),(0,E.jsx)("span",{className:d.checkmark}),s&&(0,E.jsx)("span",{className:d.label,children:s}),a&&(0,E.jsx)("span",{className:d.description,children:a})]})})),Sd=(0,$.Bb)((e=>{const t=(0,bd.F)(e);return{wrapper:D.css`
      position: relative;
      vertical-align: middle;
      font-size: 0;
    `,input:D.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,pt.getFocusStyles)(e)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,pt.getMouseFocusStyles)(e)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: blue;
        background: ${e.colors.primary.main};
        border: none;

        &:hover {
          background: ${e.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${e.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${e.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${e.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${e.colors.action.disabledText};
        }
      }
    `,checkmark:D.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${e.spacing(2)};
      height: ${e.spacing(2)};
      border-radius: ${e.shape.borderRadius()};
      background: ${e.components.input.background};
      border: 1px solid ${e.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${e.components.input.borderHover};
      }
    `,label:(0,D.cx)(t.label,D.css`
        position: relative;
        z-index: 2;
        padding-left: ${e.spacing(1)};
        white-space: nowrap;
        cursor: pointer;
        position: relative;
        top: -3px;
      `),description:(0,D.cx)(t.description,D.css`
        line-height: ${e.typography.bodySmall.lineHeight};
        padding-left: ${e.spacing(3)};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}}));kd.displayName="Checkbox";const Cd=(0,$.Bb)(((e,t)=>(console.warn("getFormStyles is deprecated"),{label:(0,bd.F)(e),legend:xd(e.v1),fieldValidationMessage:(0,wd.A)(e),button:(0,L.fW)({theme:e,variant:t.variant,size:t.size}),input:(0,Ge.H)({theme:e,invalid:t.invalid}),checkbox:Sd(e)})));var Td=s("./node_modules/react-router-dom/esm/react-router-dom.js");const Nd=["href","children"];const Od=(0,A.forwardRef)(((e,t)=>{let{href:s,children:a}=e,n=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Nd);const i=Ee.locationUtil.stripBaseFromUrl(Ee.textUtil.sanitizeUrl(null!=s?s:""));return(0,E.jsx)(Td.Link,Object.assign({ref:t,to:i},n,{children:a}))}));Od.displayName="Link";const Id=["label","children","className"];const Pd=e=>{let{label:t,children:s,className:a}=e,n=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Id);const i=(0,$.l4)(),r=Md(i);return(0,E.jsxs)("fieldset",Object.assign({className:(0,D.cx)(r.wrapper,a)},n,{children:[t&&(0,E.jsx)(yd,{children:t}),s]}))},Md=(0,$.Bb)((e=>({wrapper:D.css`
      margin-bottom: ${e.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))),Fd=["children","className","grow"];const Ad=e=>{let{children:t,className:s,grow:a}=e,n=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Fd);const i=(0,$.Fg)(),r=Dd(i,a);return(0,E.jsx)("div",Object.assign({className:(0,D.cx)(r.container,s)},n,{children:t}))};Ad.displayName="InlineSegmentGroup";const Dd=(e,t)=>({container:D.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${t?1:0} 0 auto;
      margin-bottom: ${e.spacing.xs};
    `}),$d=["name","control","children"];const Ld=e=>{let{name:t,control:s,children:a}=e,n=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,$d);const{fields:i,append:r,prepend:o,remove:l,swap:c,move:d,insert:u}=(0,Wc.Dq)(Object.assign({control:s,name:t},n));return a({fields:i,append:r,prepend:o,remove:l,swap:c,move:d,insert:u})};var Ed=s("./packages/grafana-ui/src/components/Select/resetSelectStyles.ts"),Rd=s("./node_modules/react-select-event/lib/react-select-event.es.js");const _d=async(e,t)=>await(0,Rd.Ys)(e,t,{container:document.body});var Vd,Bd=s("./packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx");const zd=({value:e,placeholder:t,width:s,onChange:a,onKeyDown:n,autoFocus:i})=>{const[r,o]=function(){const e=(0,A.useRef)(null);return[e,()=>{e.current&&e.current.focus()}]}(),l=""!==e?(0,E.jsx)(L.zx,{icon:"times",fill:"text",size:"sm",onClick:e=>{o(),a(""),e.stopPropagation()},children:"Clear"}):null;return(0,E.jsx)(Ge.I,{autoFocus:null!=i&&i,prefix:Vd||(Vd=(0,E.jsx)(M.J,{name:"search"})),ref:r,suffix:l,width:s,type:"text",value:e?(0,Ee.unEscapeStringFromRegex)(e):"",onChange:e=>a((0,Ee.escapeStringForRegex)(e.currentTarget.value)),onKeyDown:n,placeholder:t})};var Ud=s("./packages/grafana-ui/src/components/Switch/Switch.tsx");function qd(e){const t=e.lastIndexOf("."),s=e.substring(t),a=e.substring(0,t);return a.length<16?e:`${a.substring(0,16)}...${s}`}const Hd=({onFileUpload:e,className:t,children:s="Upload file",accept:a="*",size:n="md"})=>{const i=(0,$.l4)(),r=Gd(i,n),[o,l]=(0,A.useState)(""),c=(0,A.useCallback)((t=>{var s,a;const n=null===(s=t.currentTarget)||void 0===s||null===(a=s.files)||void 0===a?void 0:a[0];var i;n&&l(null!==(i=n.name)&&void 0!==i?i:"");e(t)}),[e]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("label",{className:(0,D.cx)(r.button,t),children:[(0,E.jsx)(M.J,{name:"upload",className:r.icon}),s,(0,E.jsx)("input",{type:"file",id:"fileUpload",className:r.fileUpload,onChange:c,multiple:!1,accept:a})]}),o&&(0,E.jsx)("span",{"aria-label":"File name",className:r.fileName,children:qd(o)})]})},Gd=(0,$.Bb)(((e,t)=>{const s=(0,L.fW)({theme:e,variant:"primary",size:t,iconOnly:!1});return{fileUpload:D.css`
      display: none;
    `,button:s.button,icon:s.icon,fileName:D.css`
      margin-left: ${e.spacing(.5)};
    `}}));var Wd,Zd=s("./node_modules/react-dropzone/dist/es/index.js");const Qd="Remove file";function Kd({file:e,removeFile:t}){var s,a;const n=(0,$.wW)(Yd),{file:i,progress:r,error:o,abortUpload:l,retryUpload:c}=e,d=(0,Ee.getValueFormat)("decbytes")(i.size);return(0,E.jsxs)("div",{className:n.fileListContainer,children:[(0,E.jsxs)("span",{className:n.fileNameWrapper,children:[Wd||(Wd=(0,E.jsx)(M.J,{name:"file-blank",size:"lg","aria-hidden":!0})),(0,E.jsx)("span",{className:n.padding,children:qd(i.name)}),(0,E.jsx)("span",{children:(0,Ee.formattedValueToString)(d)})]}),(0,E.jsx)("div",{className:n.fileNameWrapper,children:o?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("span",{className:n.error,children:o.message}),c&&(s||(s=(0,E.jsx)(F.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:c}))),t&&(0,E.jsx)(F.h,{className:c?n.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>t(e),tooltip:Qd,"aria-label":Qd})]}):r&&i.size>r?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("progress",{className:n.progressBar,max:i.size,value:r}),(0,E.jsxs)("span",{className:n.paddingLeft,children:[Math.round(r/i.size*100),"%"]}),l&&(a||(a=(0,E.jsx)(L.zx,{variant:"secondary",type:"button",fill:"text",onClick:l,children:"Cancel upload"})))]}):t&&(0,E.jsx)(F.h,{name:"trash-alt",onClick:()=>t(e),tooltip:Qd,"aria-label":Qd,type:"button",tooltipPlacement:"top"})})]})}function Yd(e){return{fileListContainer:D.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${e.spacing(2)};
      border: 1px dashed ${e.colors.border.medium};
      background-color: ${e.colors.background.secondary};
      margin-top: ${e.spacing(1)};
    `,fileNameWrapper:D.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:D.css`
      padding: ${e.spacing(0,1)};
    `,paddingLeft:D.css`
      padding-left: ${e.spacing(2)};
    `,marginLeft:D.css`
      margin-left: ${e.spacing(1)};
    `,error:D.css`
      padding-right: ${e.spacing(2)};
      color: ${e.colors.error.text};
    `,progressBar:D.css`
      border-radius: ${e.spacing(1)};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${e.colors.border.weak};
        border-radius: ${e.spacing(1)};
      }
      ::-webkit-progress-value {
        background-color: ${e.colors.primary.main};
        border-radius: ${e.spacing(1)};
      }
    `}}var Jd;function Xd({options:e,children:t,readAs:s,onLoad:a,fileListRenderer:n}){const[i,r]=(0,A.useState)([]),o=(0,A.useCallback)(((e,t)=>{r((s=>s.map((s=>s.id===e.id?(t(s),s):s))))}),[]),l=(0,A.useCallback)(((t,n,i)=>{let l=t.map(au);if(!1===(null==e?void 0:e.multiple)?r(l):r((e=>[...e,...l])),null!=e&&e.onDrop)e.onDrop(t,n,i);else for(const e of l){const t=new FileReader,n=()=>{s?t[s](e.file):t.readAsText(e.file)};o(e,(s=>{s.abortUpload=()=>{t.abort()},s.retryUpload=()=>{o(e,(e=>{e.error=null,e.progress=void 0})),n()}})),t.onabort=()=>{o(e,(e=>{e.error=new DOMException("Aborted")}))},t.onprogress=t=>{o(e,(e=>{e.progress=t.loaded}))},t.onload=()=>{null==a||a(t.result)},t.onerror=()=>{o(e,(e=>{e.error=t.error}))},n()}}),[a,e,s,o]),c=e=>{const t=i.filter((t=>e.id!==t.id));r(t)},{getRootProps:d,getInputProps:u,isDragActive:p}=(0,Zd.u)(Object.assign({},e,{onDrop:l})),h=nu((0,$.l4)(),p),g=i.map((e=>n?n(e,c):(0,E.jsx)(Kd,{file:e,removeFile:c},e.id)));return(0,E.jsxs)("div",{className:h.container,children:[(0,E.jsxs)("div",Object.assign({"data-testid":"dropzone"},d({className:h.dropzone}),{children:[(0,E.jsx)("input",Object.assign({},u())),null!=t?t:(0,E.jsx)(eu,{primaryText:tu(i,e)})]})),(null==e?void 0:e.accept)&&(0,E.jsx)("small",{className:(0,D.cx)(h.small,h.acceptMargin),children:su(e)}),g]})}function eu({primaryText:e="Upload file",secondaryText:t="Drag and drop here or browse"}){const s=nu((0,$.l4)());return(0,E.jsxs)("div",{className:s.iconWrapper,children:[Jd||(Jd=(0,E.jsx)(M.J,{name:"upload",size:"xxl"})),(0,E.jsx)("h3",{children:e}),(0,E.jsx)("small",{className:s.small,children:t})]})}function tu(e,t){return void 0===(null==t?void 0:t.multiple)||null!=t&&t.multiple?"Upload file":e.length?"Replace file":"Upload file"}function su(e){return Array.isArray(e.accept)?`Accepted file types: ${e.accept.join(", ")}`:`Accepted file type: ${e.accept}`}function au(e){return{id:(0,Tt.uniqueId)("file"),file:e,error:null}}function nu(e,t){return{container:D.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:D.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${e.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${e.colors.border.medium};
      background-color: ${t?e.colors.background.secondary:e.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:D.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:D.css`
      margin: ${e.spacing(2,0,1)};
    `,small:D.css`
      color: ${e.colors.text.secondary};
    `}}const iu=e=>Ee.dateMath.isValid(e.from)&&Ee.dateMath.isValid(e.to),ru=()=>{},ou=({value:e,onChange:t,onChangeTimeZone:s=ru,clearable:a,hideTimeZone:n=!0,timeZone:i="browser",placeholder:r="Select time range",isReversed:o=!0,hideQuickRanges:l=!1,disabled:c=!1})=>{const[d,u]=(0,A.useState)(!1),p=(0,we.l4)(),h=lu(p,c),g=()=>{u(!1)};return(0,E.jsxs)("div",{className:h.container,children:[(0,E.jsxs)("div",{tabIndex:0,className:h.pickerInput,"aria-label":Ae.wl.components.TimePicker.openButton,onClick:e=>{e.stopPropagation(),e.preventDefault(),c||u(!d)},children:[iu(e)?(0,E.jsx)(vs,{value:e,timeZone:i}):(0,E.jsx)("span",{className:h.placeholder,children:r}),!c&&(0,E.jsxs)("span",{className:h.caretIcon,children:[iu(e)&&a&&(0,E.jsx)(M.J,{className:h.clearIcon,name:"times",size:"lg",onClick:e=>{e.stopPropagation();const s=(0,Ee.dateTime)(null),a=(0,Ee.dateTime)(null);t({from:s,to:a,raw:{from:s,to:a}})}}),(0,E.jsx)(M.J,{name:d?"angle-up":"angle-down",size:"lg"})]})]}),d&&(0,E.jsx)(ye.L,{includeButtonPress:!1,onClick:g,children:(0,E.jsx)(os,{timeZone:i,value:iu(e)?e:(0,Ee.getDefaultTimeRange)(),onChange:e=>{g(),t(e)},quickOptions:Wt,onChangeTimeZone:s,className:h.content,hideTimeZone:n,isReversed:o,hideQuickRanges:l})})]})},lu=(0,$.Bb)(((e,t=!1)=>{const s=(0,Ge.H)({theme:e,invalid:!1});return{container:D.css`
      display: flex;
      position: relative;
    `,content:D.css`
      margin-left: 0;
    `,pickerInput:(0,D.cx)(s.input,t&&s.inputDisabled,s.wrapper,D.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${e.v1.spacing.formInputHeight-2}px;
      `),caretIcon:(0,D.cx)(s.suffix,D.css`
        position: relative;
        top: -1px;
        margin-left: ${e.v1.spacing.xs};
      `),clearIcon:D.css`
      margin-right: ${e.v1.spacing.xs};
      &:hover {
        color: ${e.v1.colors.linkHover};
      }
    `,placeholder:D.css`
      color: ${e.v1.colors.formInputPlaceholderText};
      opacity: 1;
    `}})),cu=/^now$|^now\-(\d{1,10})([wdhms])$/,du=e=>({from:hu(e.from),to:hu(e.to)}),uu=(e,t=Date.now())=>{if(!pu(e))return{isValid:!1,errorMessage:"Value not in relative time format."};return hu(e)>Math.ceil(t/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}},pu=e=>cu.test(e),hu=e=>{const t=cu.exec(e);if(!t||3!==t.length)return 0;const[,s,a]=t,n=parseInt(s,10);return isNaN(n)?0:n*gu[a]},gu={w:604800,d:86400,h:3600,m:60,s:1},mu=e=>e<=0?"now":e>=gu.w&&e%gu.w==0?`now-${e/gu.w}w`:e>=gu.d&&e%gu.d==0?`now-${e/gu.d}d`:e>=gu.h&&e%gu.h==0?`now-${e/gu.h}h`:e>=gu.m&&e%gu.m==0?`now-${e/gu.m}m`:`now-${e}s`;var fu,bu,vu;const xu=Wt.filter((e=>pu(e.from)));function yu(e){const{timeRange:t,onChange:s}=e,[a,n]=(0,A.useState)(!1),i=(0,A.useCallback)((()=>n(!1)),[]),r=(e=>{const t=mu(e.from),s=mu(e.to);return{from:t,to:s,display:`${t} to ${s}`}})(t),[o,l]=(0,A.useState)({value:r.from,validation:uu(r.from)}),[c,d]=(0,A.useState)({value:r.to,validation:uu(r.to)}),u=(0,$.wW)(wu(o.validation.errorMessage,c.validation.errorMessage)),p=(0,A.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),n(!a)}),[a]);return(0,E.jsxs)("div",{className:u.container,children:[(0,E.jsxs)("div",{tabIndex:0,className:u.pickerInput,onClick:p,children:[(0,E.jsx)("span",{className:u.clockIcon,children:fu||(fu=(0,E.jsx)(M.J,{name:"clock-nine"}))}),(0,E.jsxs)("span",{children:[r.from," to ",r.to]}),(0,E.jsx)("span",{className:u.caretIcon,children:(0,E.jsx)(M.J,{name:a?"angle-up":"angle-down",size:"lg"})})]}),a&&(0,E.jsx)(ye.L,{includeButtonPress:!1,onClick:i,children:(0,E.jsx)("div",{className:u.content,children:(0,E.jsxs)("div",{className:u.body,children:[(0,E.jsx)(W.Z,{className:u.leftSide,hideHorizontalTrack:!0,children:(0,E.jsx)(vt,{title:"Example time ranges",options:xu,onChange:e=>{const t=du(e);t&&(i(),l(Object.assign({},o,{value:e.from})),d(Object.assign({},c,{value:e.to})),s(t))},value:r})}),(0,E.jsxs)("div",{className:u.rightSide,children:[(0,E.jsxs)("div",{className:u.title,children:[bu||(bu=(0,E.jsx)(Be,{children:"Specify time range"})),(0,E.jsxs)("div",{className:u.description,children:["Specify a relative time range, for more information see"," ",vu||(vu=(0,E.jsxs)("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/",children:["docs ",(0,E.jsx)(M.J,{name:"external-link-alt"})]})),"."]})]}),(0,E.jsx)(He.g,{label:"From",invalid:!o.validation.isValid,error:o.validation.errorMessage,children:(0,E.jsx)(Ge.I,{onClick:e=>e.stopPropagation(),onBlur:()=>l(Object.assign({},o,{validation:uu(o.value)})),onChange:e=>l(Object.assign({},o,{value:e.currentTarget.value})),value:o.value})}),(0,E.jsx)(He.g,{label:"To",invalid:!c.validation.isValid,error:c.validation.errorMessage,children:(0,E.jsx)(Ge.I,{onClick:e=>e.stopPropagation(),onBlur:()=>d(Object.assign({},c,{validation:uu(c.value)})),onChange:e=>d(Object.assign({},c,{value:e.currentTarget.value})),value:c.value})}),(0,E.jsx)(L.zx,{"aria-label":"TimePicker submit button",onClick:e=>{if(e.preventDefault(),!c.validation.isValid||!o.validation.isValid)return;const t=du({from:o.value,to:c.value,display:""});t&&(s(t),n(!1))},children:"Apply time range"})]})]})})})]})}const wu=(e,t)=>s=>{const a=(0,Ge.H)({theme:s,invalid:!1}),n=250+ju(s,e)+ju(s,t);return{container:D.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,D.cx)(a.input,a.wrapper,D.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${s.v1.spacing.formInputHeight-2}px;
      `),caretIcon:(0,D.cx)(a.suffix,D.css`
        position: relative;
        margin-left: ${s.v1.spacing.xs};
      `),clockIcon:(0,D.cx)(a.prefix,D.css`
        position: relative;
        margin-right: ${s.v1.spacing.xs};
      `),content:D.css`
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      position: absolute;
      z-index: ${s.zIndex.dropdown};
      width: 500px;
      top: 100%;
      border-radius: 2px;
      border: 1px solid ${s.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:D.css`
      display: flex;
      height: ${n}px;
    `,description:D.css`
      color: ${s.colors.text.secondary};
      font-size: ${s.typography.size.sm};
    `,leftSide:D.css`
      width: 50% !important;
      border-right: 1px solid ${s.colors.border.medium};
    `,rightSide:D.css`
      width: 50%;
      padding: ${s.spacing(1)};
    `,title:D.css`
      margin-bottom: ${s.spacing(1)};
    `}};function ju(e,t){return t?t.length>34?6.5*e.spacing.gridSize:4*e.spacing.gridSize:0}const ku=["href","children","disableEvents","disableHover","className"];const Su=({children:e,href:t})=>{const s=(0,$.l4)(),{inner:a}=Tu(s);return t?(0,E.jsx)("a",{className:a,href:t,children:e}):(0,E.jsx)("div",{className:a,children:e})},Cu=e=>{let{href:t,children:s,disableEvents:a,disableHover:n,className:i}=e,r=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,ku);const o=(0,$.l4)(),{container:l}=Tu(o,a,n);return(0,E.jsx)("div",Object.assign({},r,{className:(0,D.cx)(l,i),children:(0,E.jsx)(Su,{href:t,children:s})}))},Tu=(0,$.Bb)(((e,t=!1,s=!1)=>({container:(0,D.css)(Object.assign({display:"flex",width:"100%",background:e.colors.background.secondary,borderRadius:e.shape.borderRadius(),position:"relative",pointerEvents:t?"none":"auto",marginBottom:e.spacing(1),transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short})},!s&&{"&:hover":{background:e.colors.emphasize(e.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":$.GU.getFocusStyles(e)})),inner:(0,D.css)({display:"flex",width:"100%",padding:e.spacing(2)})}))),Nu=["heading","description","disabled","href","onClick","children"];const Ou=e=>{let{heading:t,description:s,disabled:a,href:n,onClick:i,children:r}=e,o=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Nu);const l=(0,$.l4)(),c=Iu(l),[d,u,p,h,g]=["Tags","Figure","Meta","Actions","SecondaryActions"].map((e=>{const t=A.Children.toArray(r).find((t=>(null==t?void 0:t.type)&&t.type.displayName===e));return t?A.cloneElement(t,Object.assign({disabled:a,styles:c},t.props)):t})),m=Boolean(h||g),f=a||!i&&!n,b=a&&!h,v=i&&!a?i:void 0,x=i&&!a?function(e){return t=>{"Enter"===t.key&&e()}}(i):void 0;return(0,E.jsxs)(Cu,Object.assign({tabIndex:f?void 0:0,onClick:v,onKeyDown:x,disableEvents:b,disableHover:f,href:n},o,{children:[u,(0,E.jsxs)("div",{className:c.inner,children:[(0,E.jsxs)("div",{className:c.info,children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("h2",{className:c.heading,children:t}),p,s&&(0,E.jsx)("p",{className:c.description,children:s})]}),d]}),m&&(0,E.jsxs)("div",{className:c.actionRow,children:[h,g]})]})]}))};const Iu=(0,$.Bb)((e=>({inner:D.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `,heading:D.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin-bottom: 0;
      font-size: ${e.typography.size.md};
      letter-spacing: inherit;
      line-height: ${e.typography.body.lineHeight};
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightMedium};
    `,info:D.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,metadata:D.css`
      display: flex;
      align-items: center;
      width: 100%;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      margin: ${e.spacing(.5,0,0)};
      line-height: ${e.typography.bodySmall.lineHeight};
      overflow-wrap: anywhere;
    `,description:D.css`
      width: 100%;
      margin: ${e.spacing(1,0,0)};
      color: ${e.colors.text.secondary};
      line-height: ${e.typography.body.lineHeight};
    `,media:D.css`
      margin-right: ${e.spacing(2)};
      width: 40px;

      & > * {
        width: 100%;
      }

      &:empty {
        display: none;
      }
    `,actionRow:D.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin-top: ${e.spacing(2)};
    `,actions:D.css`
      & > * {
        margin-right: ${e.spacing(1)};
      }
    `,secondaryActions:D.css`
      display: flex;
      align-items: center;
      color: ${e.colors.text.secondary};
      // align to the right
      margin-left: auto;
      & > * {
        margin-right: ${e.spacing(1)} !important;
      }
    `,separator:D.css`
      margin: 0 ${e.spacing(1)};
    `,tagList:D.css`
      max-width: 50%;
    `}))),Pu=({children:e,styles:t})=>(0,E.jsx)("div",{className:null==t?void 0:t.tagList,children:e});Pu.displayName="Tags";const Mu=({children:e,styles:t,align:s="top",className:a})=>(0,E.jsx)("div",{className:(0,D.cx)(null==t?void 0:t.media,a,"center"===s&&D.css`
            display: flex;
            align-items: center;
          `),children:e});Mu.displayName="Figure";const Fu=(0,A.memo)((({children:e,styles:t,separator:s="|"})=>{let a=e;if(Array.isArray(e)&&s){const n=A.Children.toArray(e).filter(Boolean);if(!n.length)return null;a=n.reduce(((e,a,n)=>[e,(0,E.jsx)("span",{className:null==t?void 0:t.separator,children:s},`separator_${n}`),a]))}return(0,E.jsx)("div",{className:null==t?void 0:t.metadata,children:a})}));Fu.displayName="Meta";const Au=({children:e,styles:t,disabled:s,variant:a})=>{const n="primary"===a?null==t?void 0:t.actions:null==t?void 0:t.secondaryActions;return(0,E.jsx)("div",{className:n,children:A.Children.map(e,(e=>A.isValidElement(e)?(0,A.cloneElement)(e,Object.assign({disabled:s},e.props)):null))})},Du=({children:e,styles:t,disabled:s})=>(0,E.jsx)(Au,{variant:"primary",disabled:s,styles:t,children:e});Du.displayName="Actions";const $u=({children:e,styles:t,disabled:s})=>(0,E.jsx)(Au,{variant:"secondary",disabled:s,styles:t,children:e});$u.displayName="SecondaryActions",Ou.Tags=Pu,Ou.Figure=Mu,Ou.Meta=Fu,Ou.Actions=Du,Ou.SecondaryActions=$u;const Lu=["status"];const Eu=e=>{let{status:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Lu);const a=function(e){e||(e=Ee.PluginSignatureStatus.invalid);switch(e){case Ee.PluginSignatureStatus.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case Ee.PluginSignatureStatus.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case Ee.PluginSignatureStatus.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case Ee.PluginSignatureStatus.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case Ee.PluginSignatureStatus.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}(t);return(0,E.jsx)(Xo,Object.assign({text:a.text,color:a.color,icon:a.icon,tooltip:a.tooltip},s))};Eu.displayName="PluginSignatureBadge";var Ru=s("./packages/grafana-ui/src/components/Forms/Legacy/Select/IndicatorsContainer.tsx"),_u=s("./packages/grafana-ui/src/components/Forms/Legacy/Select/NoOptionsMessage.tsx");const Vu={drawStyle:[{label:"Lines",value:Mi.l8.Line},{label:"Bars",value:Mi.l8.Bars},{label:"Points",value:Mi.l8.Points}],lineInterpolation:[{description:"Linear",value:Mi.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:Mi.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:Mi.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:Mi.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:Mi.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:Mi.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:Mi.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:Mi.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:Mi.Jp.Always},{label:"Never",value:Mi.Jp.Never}],axisPlacement:[{label:"Auto",value:Mi.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:Mi.LB.Left},{label:"Right",value:Mi.LB.Right},{label:"Hidden",value:Mi.LB.Hidden}],fillGradient:[{label:"None",value:Mi.FI.None},{label:"Opacity",value:Mi.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:Mi.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:Mi.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:Mi.o0.None},{label:"Normal",value:Mi.o0.Normal},{label:"100%",value:Mi.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:Mi.i3.Off},{label:"As lines",value:Mi.i3.Line},{label:"As filled regions",value:Mi.i3.Area},{label:"As filled regions and lines",value:Mi.i3.LineAndArea}]};var Bu=s("./packages/grafana-ui/src/components/uPlot/config/UPlotConfigBuilder.ts"),zu=s("./packages/grafana-ui/src/components/uPlot/Plot.tsx");const Uu=["data","config","placement","calcs","displayMode"];const qu=e=>null==e?"-":e.toFixed(1),Hu=e=>{let{data:t,config:s,placement:a,calcs:n,displayMode:i}=e,r=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Uu);const o=(0,$.l4)(),l=s.getSeries().map((e=>{var a,i,r,l;const c=e.props,d=c.dataFrameFieldIndex,u=s.getAxisPlacement(e.props.scaleKey);if(!d)return;const p=null===(a=t[d.frameIndex])||void 0===a?void 0:a.fields[d.fieldIndex];if(!p||null!==(i=p.config.custom)&&void 0!==i&&null!==(r=i.hideFrom)&&void 0!==r&&r.legend)return;const h=(0,Ee.getFieldDisplayName)(p,t[d.frameIndex],t),g=(0,Ee.getFieldSeriesColor)(p,o).color;return{disabled:!(null===(l=c.show)||void 0===l||l),fieldIndex:d,color:g,label:h,yAxis:u===Mi.LB.Left?1:2,getDisplayValues:()=>{var e;if(null==n||!n.length)return[];const t=null!==(e=p.display)&&void 0!==e?e:qu,s=(0,Ee.reduceField)({field:p,reducers:n});return n.map((e=>{const a=Ee.fieldReducers.get(e);return Object.assign({},t(s[e]),{title:a.name,description:a.description})}))},getItemKey:()=>`${h}-${d.frameIndex}-${d.fieldIndex}`}})).filter((e=>void 0!==e));return(0,E.jsx)(Rr.A.Legend,Object.assign({placement:a},r,{children:(0,E.jsx)(Fr,{placement:a,items:l,displayMode:i})}))};Hu.displayName="PlotLegend";const Gu=({children:e,left:t,top:s})=>{const a=(0,A.useMemo)((()=>D.css`
      position: absolute;
      overflow: visible;
      left: ${t}px;
      top: ${s}px;
    `),[t,s]);return(0,E.jsx)("div",{className:a,children:e})},Wu=({x:e,y:t,children:s})=>(0,E.jsx)("div",{style:{position:"absolute",top:`${t}px`,left:`${e}px`},children:s});var Zu=s("./node_modules/react-use/esm/useMountedState.js");function Qu({id:e,events:t,renderEventMarker:s,mapEventToXYCoords:a,config:n}){const i=(0,A.useRef)(),[r,o]=(0,A.useState)(0),l=(0,Zu.Z)();(0,A.useLayoutEffect)((()=>{n.addHook("init",(e=>{i.current=e})),n.addHook("draw",(()=>{l()&&o((e=>e+1))}))}),[n,o]);const c=(0,A.useMemo)((()=>{const n=[];if(!i.current||0===t.length)return n;for(let i=0;i<t.length;i++){const r=t[i];for(let t=0;t<r.length;t++){const o=a(r,{fieldIndex:t,frameIndex:i});o&&n.push((0,A.createElement)(Wu,Object.assign({},o,{key:`${e}-marker-${i}-${t}`}),s(r,{fieldIndex:t,frameIndex:i})))}}return(0,E.jsx)(E.Fragment,{children:n})}),[t,s,r]);return i.current?(0,E.jsx)(Gu,{left:i.current.bbox.left/window.devicePixelRatio,top:i.current.bbox.top/window.devicePixelRatio,children:c}):null}var Ku=s("./packages/grafana-ui/src/components/uPlot/utils.ts");const Yu=({onZoom:e,config:t})=>{const[s,a]=(0,A.useState)(null);return(0,A.useEffect)((()=>{if(s){if((0,Ku.Zp)("ZoomPlugin",!1,"selected",s),s.bbox.width<5)return;e({from:s.min,to:s.max})}}),[s]),(0,A.useLayoutEffect)((()=>{t.addHook("setSelect",(e=>{const t=e.posToVal(e.select.left,"x"),s=e.posToVal(e.select.left+e.select.width,"x");a({min:t,max:s,bbox:{left:e.bbox.left/window.devicePixelRatio+e.select.left,top:e.bbox.top/window.devicePixelRatio,height:e.bbox.height/window.devicePixelRatio,width:e.select.width}}),e.setSelect({left:0,width:0},!1)}))}),[t]),null},Ju=["mode","sync","timeZone","config","renderTooltip"];const Xu=e=>{let{mode:t=Mi.f3.Single,sync:s,timeZone:a,config:n,renderTooltip:i}=e,r=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Ju);const o=(0,we.l4)(),[l,c]=(0,A.useState)(null),[d,u]=(0,A.useState)(null),[p,h]=(0,A.useState)([]),[g,m]=(0,A.useState)(null),[f,b]=(0,A.useState)(!1),v=(0,Zu.Z)();if((0,A.useEffect)((()=>{(0,Ku.Zp)("TooltipPlugin",!0,`Focused series: ${l}, focused point: ${d}`)}),[d,l]),(0,A.useLayoutEffect)((()=>{let e,t;const a=()=>{var t;v()&&(m(null),b(!1),null===(t=e)||void 0===t||t.root.classList.remove("plot-active"))},i=()=>{var t;v()&&(b(!0),null===(t=e)||void 0===t||t.root.classList.add("plot-active"))};n.addHook("syncRect",((e,s)=>{t=s})),n.addHook("init",(t=>{e=t,t.over.addEventListener("mouseleave",a),t.over.addEventListener("mouseenter",i),s===Ee.DashboardCursorSync.Crosshair&&t.root.classList.add("shared-crosshair")}));const r=n.getTooltipInterpolator();return r?n.addHook("setCursor",(e=>{r(c,u,(s=>{if(s)return void m(null);if(!t)return;const{x:a,y:n}=ep(e,t);void 0!==a&&void 0!==n&&m({x:a,y:n})}),e)})):(n.addHook("setLegend",(e=>{v()&&(u(e.legend.idx),h(e.legend.idxs.slice()))})),n.addHook("setCursor",(e=>{if(!t||!v())return;const{x:s,y:a}=ep(e,t);m(void 0!==s&&void 0!==a?{x:s,y:a}:null)})),n.addHook("setSeries",((e,t)=>{v()&&c(t)}))),()=>{m(null),e&&(e.over.removeEventListener("mouseleave",a),e.over.removeEventListener("mouseenter",i))}}),[n,m,b,u,h]),null===d||!f&&s===Ee.DashboardCursorSync.Crosshair)return null;let x=r.data.fields[0];if(!x)return null;let y=null;const w=(x.display||(0,Ee.getDisplayProcessor)({field:x,timeZone:a,theme:o}))(x.values.get(d)).text;if(i)y=i(r.data,l,d);else{if(t===Mi.f3.Single&&null!==l){const e=r.data.fields[l];if(!e)return null;const t=(e.display||(0,Ee.getDisplayProcessor)({field:e,timeZone:a,theme:o}))(e.values.get(d));y=(0,E.jsx)(zi,{series:[{color:t.color||Ee.FALLBACK_COLOR,label:(0,Ee.getFieldDisplayName)(e,r.data),value:t?(0,Ee.formattedValueToString)(t):null}],timestamp:w})}if(t===Mi.f3.Multi){let e=[];const t=r.data,s=t.fields;for(let a=0;a<s.length;a++){var j,k,S,C;const s=t.fields[a];if(!s||s===x||s.type===Ee.FieldType.time||s.type!==Ee.FieldType.number||null!==(j=s.config.custom)&&void 0!==j&&null!==(k=j.hideFrom)&&void 0!==k&&k.tooltip||null!==(S=s.config.custom)&&void 0!==S&&null!==(C=S.hideFrom)&&void 0!==C&&C.viz)continue;const n=s.display(r.data.fields[a].values.get(p[a]));e.push({color:n.color||Ee.FALLBACK_COLOR,label:(0,Ee.getFieldDisplayName)(s,t),value:n?(0,Ee.formattedValueToString)(n):null,isActive:l===a})}y=(0,E.jsx)(zi,{series:e,timestamp:w})}}return(0,E.jsx)(G.h,{children:y&&g&&(0,E.jsx)(Di,{position:{x:g.x,y:g.y},offset:{x:10,y:10},children:y})})};function ep(e,t){let s,a;const n=e.cursor.left||0,i=e.cursor.top||0;if(function({left:e,top:t},s){return void 0!==e&&void 0!==t&&(e<0||e>s.width||t<0||t>s.height)}(e.cursor,t)){const r=e.posToIdx(n);if(i<0||i>t.height){let i=(0,Ku.ah)(e,r);i&&(a=t.top+i,n>=0&&n<=t.width&&(s=t.left+e.valToPos(e.data[0][e.posToIdx(n)],e.series[0].scale)))}}else s=t.left+n,a=t.top+i;return{x:s,y:a}}var tp=s("./packages/grafana-ui/src/components/uPlot/types.ts"),sp=s("./packages/grafana-ui/src/components/GraphNG/GraphNG.tsx");const ap=e=>null==e?"-":e.toFixed(1),np={drawStyle:Mi.l8.Line,showPoints:Mi.Jp.Auto,axisPlacement:Mi.LB.Auto};function ip(e,t){const s=new Map;for(let n=0;n<e.fields.length;n++){var a;const i=null===(a=e.fields[n].state)||void 0===a?void 0:a.origin;i&&s.set((0,Ee.getFieldDisplayName)(t[i.frameIndex].fields[i.fieldIndex],t[i.frameIndex],t),n)}return s}function rp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const op=[];class lp extends A.Component{constructor(...e){super(...e),rp(this,"panelContext",{}),rp(this,"prepConfig",((e,t,s)=>{const{eventBus:a,sync:n}=this.context,{theme:i,timeZone:r}=this.props;return(({frame:e,theme:t,timeZone:s,getTimeRange:a,eventBus:n,sync:i,allFrames:r})=>{const o=new Bu.U(s);o.setPrepData(Ku.k6);const l=e.fields[0];if(!l)return o;let c=0;const d="x";let u="_x",p="";var h,g;l.type===Ee.FieldType.time?(u="time",o.addScale({scaleKey:d,orientation:Mi.wN.Horizontal,direction:Mi.bQ.Right,isTime:!0,range:()=>{const e=a();return[e.from.valueOf(),e.to.valueOf()]}}),o.addAxis({scaleKey:d,isTime:!0,placement:Mi.LB.Bottom,timeZone:s,theme:t,grid:{show:null===(h=l.config.custom)||void 0===h?void 0:h.axisGridShow}})):(l.config.unit&&(u=l.config.unit),o.addScale({scaleKey:d,orientation:Mi.wN.Horizontal,direction:Mi.bQ.Right}),o.addAxis({scaleKey:d,placement:Mi.LB.Bottom,theme:t,grid:{show:null===(g=l.config.custom)||void 0===g?void 0:g.axisGridShow}}));const m=new Map;let f;for(let s=1;s<e.fields.length;s++){var b,v,x,y,w,j,k;const a=e.fields[s],n=a.config,i=Object.assign({},np,n.custom);if(a===l||a.type!==Ee.FieldType.number)continue;a.state.seriesIndex=c++;const d=null!==(b=a.display)&&void 0!==b?b:ap,u=n.unit||sp.j,h=(0,Ee.getFieldColorModeForField)(a),g=(0,Ee.getFieldSeriesColor)(a,t).color;var S;o.addScale({scaleKey:u,orientation:Mi.wN.Vertical,direction:Mi.bQ.Up,distribution:null===(v=i.scaleDistribution)||void 0===v?void 0:v.type,log:null===(x=i.scaleDistribution)||void 0===x?void 0:x.log,min:a.config.min,max:a.config.max,softMin:i.axisSoftMin,softMax:i.axisSoftMax}),p||(p=u),i.axisPlacement!==Mi.LB.Hidden&&o.addAxis({scaleKey:u,label:i.axisLabel,size:i.axisWidth,placement:null!==(S=i.axisPlacement)&&void 0!==S?S:Mi.LB.Auto,formatValue:e=>(0,Ee.formattedValueToString)(d(e)),theme:t,grid:{show:i.axisGridShow}});const T=i.drawStyle===Mi.l8.Points?Mi.Jp.Always:i.showPoints;let N=()=>null;!0!==i.spanNulls&&(N=(e,t,s,a)=>{let n=[],i=e.series[t];if(!s&&a&&a.length){const[t,s]=i.idxs,r=e.data[0],o=Math.round(e.valToPos(r[t],"x",!0)),l=Math.round(e.valToPos(r[s],"x",!0));a[0][0]===o&&n.push(t);for(let t=0;t<a.length;t++){let s=a[t],i=a[t+1];i&&s[1]===i[0]&&n.push(e.posToIdx(s[1],!0))}a[a.length-1][1]===l&&n.push(s)}return n.length?n:null});let{fillOpacity:O}=i;if(i.fillBelowTo&&null!==(y=a.state)&&void 0!==y&&y.origin){f||(f=ip(e,r));const t=r[a.state.origin.frameIndex],s=t.fields[a.state.origin.fieldIndex],n=f.get((0,Ee.getFieldDisplayName)(s,t,r)),l=f.get(i.fillBelowTo);(0,Tt.isNumber)(l)&&(0,Tt.isNumber)(n)&&o.addBand({series:[n,l],fill:null}),O||(O=35)}var C;if(o.addSeries({scaleKey:u,showPoints:T,pointsFilter:N,colorMode:h,fillOpacity:O,theme:t,drawStyle:i.drawStyle,lineColor:null!==(w=i.lineColor)&&void 0!==w?w:g,lineWidth:i.lineWidth,lineInterpolation:i.lineInterpolation,lineStyle:i.lineStyle,barAlignment:i.barAlignment,barWidthFactor:i.barWidthFactor,barMaxWidth:i.barMaxWidth,pointSize:i.pointSize,spanNulls:i.spanNulls||!1,show:!(null!==(j=i.hideFrom)&&void 0!==j&&j.viz),gradientMode:i.gradientMode,thresholds:n.thresholds,hardMin:a.config.min,hardMax:a.config.max,softMin:i.axisSoftMin,softMax:i.axisSoftMax,dataFrameFieldIndex:null===(k=a.state)||void 0===k?void 0:k.origin}),i.thresholdsStyle&&n.thresholds)(null!==(C=i.thresholdsStyle.mode)&&void 0!==C?C:Mi.i3.Off)!==Mi.i3.Off&&o.addThresholds({config:i.thresholdsStyle,thresholds:n.thresholds,scaleKey:u,theme:t,hardMin:a.config.min,hardMax:a.config.max,softMin:i.axisSoftMin,softMax:i.axisSoftMax});(0,Ku.oP)(a,m,c)}if(0!==m.size){o.setStacking(!0);for(const[e,t]of m.entries())for(let e=t.length-1;e>0;e--)o.addBand({series:[t[e],t[e-1]]})}o.scaleKeys=[d,p];let T={dataIdx:(e,t,s,a)=>{let n=e.data[t];if(null==n[s]){let t,i=s,r=s;for(t=s;i===s&&t-- >0;)null!=n[t]&&(i=t);for(t=s;r===s&&t++<n.length;)null!=n[t]&&(r=t);let o=e.data[0],l=e.valToPos(a,"x"),c=e.valToPos(o[r],"x"),d=l-e.valToPos(o[i],"x"),u=c-l;d<=u?d<=15&&(s=i):u<=15&&(s=r)}return s}};if(i!==Ee.DashboardCursorSync.Off){const t={point:{[d]:null,[p]:null},data:e},s=new Ee.DataHoverEvent(t);T.sync={key:"__global_",filters:{pub:(e,a,i,r,o,l,c)=>(t.rowIndex=c,i<0&&r<0?(t.point[u]=null,t.point[p]=null,n.publish(new Ee.DataHoverClearEvent(t))):(t.point[u]=a.posToVal(i,d),t.point[p]=a.posToVal(r,p),n.publish(s),s.payload.down=void 0),!0)},scales:o.scaleKeys,match:[()=>!0,()=>!0]}}return o.setSync(),o.setCursor(T),o})({frame:e,theme:i,timeZone:r,getTimeRange:s,eventBus:a,sync:n,allFrames:t})})),rp(this,"renderLegend",(e=>{const{legend:t,frames:s}=this.props;return!e||t&&t.displayMode===Mi.jK.Hidden?null:(0,E.jsx)(Hu,Object.assign({data:s,config:e},t))}))}render(){return(0,E.jsx)(sp.d,Object.assign({},this.props,{prepConfig:this.prepConfig,propsToDiff:op,renderLegend:this.renderLegend}))}}rp(lp,"contextType",mr.bb);const cp=(0,we.HE)(lp);cp.displayName="TimeSeries";const dp=A.createContext({}),up=()=>{const{data:e,dimFields:t,mapSeriesIndexToDataFrameFieldIndex:s}=(0,A.useContext)(dp),a=(0,A.useCallback)((()=>{const s=t.x;let a=null;for(let t=0;t<e.fields.length;t++)if(s(e.fields[t],e,[e])){a=e.fields[t];break}return a}),[e,t]);return{dimFields:t,mapSeriesIndexToDataFrameFieldIndex:s,getXAxisField:a,alignedData:e}};var pp,hp=s("./packages/grafana-ui/src/components/GraphNG/utils.ts"),gp=s("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function mp(){return console.log("process.env.NODE_ENV","production"),pp||(pp=(0,gp.BX)(Yi.wc,{children:[(0,gp.tZ)("div",{children:"Emotion performance tests"}),(0,gp.tZ)(fp,{name:"No styles",Component:Sp}),(0,gp.tZ)(fp,{name:"inline emotion/css",Component:kp}),(0,gp.tZ)(fp,{name:"useStyles no cx",Component:vp}),(0,gp.tZ)(fp,{name:"useStyles with conditional cx styles",Component:xp}),(0,gp.tZ)(fp,{name:"useStyles with css prop",Component:wp}),(0,gp.tZ)(fp,{name:"useStyles with conditional css prop",Component:jp}),(0,gp.tZ)(fp,{name:"useStyles with conditional classnames",Component:yp})]}))}const fp=({name:e,Component:t})=>{const[s,a]=(0,A.useState)(0);return(0,gp.BX)("div",{children:[(0,gp.tZ)(L.zx,{onClick:()=>a(s>2?0:s+1),children:e}),s>0&&(0,gp.tZ)(Cp,{id:e,children:bp(t)})]})};function bp(e){const t=[];for(let s=0;s<5e3;s++)t.push((0,gp.tZ)(e,{index:s},s.toString()));return(0,gp.tZ)("div",{style:{display:"flex",flexWrap:"wrap"},children:t})}function vp({index:e}){const t=(0,$.wW)(Tp);return(0,gp.tZ)("div",{className:t.main,children:(0,gp.tZ)("div",{className:t.child,children:e})})}function xp({index:e}){const t=(0,$.wW)(Tp),s=(0,D.cx)(t.main,{[t.large]:e>10,[t.disabed]:e%10==0});return(0,gp.tZ)("div",{className:s,children:(0,gp.tZ)("div",{className:t.child,children:e})})}function yp({index:e}){const t=(0,$.wW)(Tp),s=ma()(t.main,{[t.large]:e>10,[t.disabed]:e%10==0});return(0,gp.tZ)("div",{className:s,children:(0,gp.tZ)("div",{className:t.child,children:e})})}function wp({index:e}){const t=(0,$.wW)(Np);return(0,gp.tZ)("div",{css:t.main,children:(0,gp.tZ)("div",{css:t.child,children:e})})}function jp({index:e}){const t=(0,$.wW)(Np),s=[t.main,e>10&&t.large,e%10==0&&t.disabed];return(0,gp.tZ)("div",{css:s,children:(0,gp.tZ)("div",{css:t.child,children:e})})}function kp({index:e}){const t=(0,$.l4)(),s=Tp(t);return(0,gp.tZ)("div",{className:s.main,children:(0,gp.tZ)("div",{className:s.child,children:e})})}function Sp({index:e}){return(0,gp.tZ)("div",{className:"no-styles-main",children:(0,gp.tZ)("div",{className:"no-styles-child",children:e})})}function Cp({children:e,id:t}){return(0,gp.tZ)(A.Profiler,{id:t,onRender:(e,t,s,a,n,i)=>{console.log("Profile "+e,s)},children:e})}fp.displayName="TestScenario";const Tp=e=>({main:(0,D.css)(Op(e)),large:(0,D.css)({fontSize:"20px",color:"red"}),disabed:(0,D.css)({fontSize:"10px",color:"gray"}),child:(0,D.css)({padding:"2px",fontSize:"10px",boxShadow:"none",textAlign:"center",textDecoration:"none"})}),Np=e=>({main:Op(e),large:{fontSize:"20px",color:"red"},disabed:{fontSize:"10px",color:"gray"},child:{padding:"2px",fontSize:"10px",boxShadow:"none",textAlign:"center",textDecoration:"none"}});function Op(e){return{background:"blue",border:"1px solid red",color:"white",padding:e.spacing(1),shadow:e.shadows.z1,":hover":{background:e.colors.background.primary}}}var Ip=s("./node_modules/react-highlight-words/dist/main.js"),Pp=s.n(Ip),Mp=s("./packages/grafana-ui/src/components/Typeahead/PartialHighlighter.tsx");const Fp=["name","value","hidden","facets","onClick","className","loading","searchTerm","active","style","title","highlightParts"];const Ap=(0,A.forwardRef)(((e,t)=>{let{name:s,value:a,hidden:n,facets:i,onClick:r,className:o,loading:l,searchTerm:c,active:d,style:u,title:p,highlightParts:h}=e,g=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Fp);const m=(0,$.l4)(),f=Dp(m),b=c?[c]:[],v=(0,A.useCallback)((e=>{r&&!n&&r(s,a,e)}),[r,s,n,a]);let x=a||s;return i&&(x=`${x} (${i})`),(0,E.jsx)("span",Object.assign({ref:t,onClick:v,style:u,title:p||x,role:"option","aria-selected":!!d,className:(0,D.cx)(f.base,d&&f.active,l&&f.loading,n&&f.hidden,o,r&&!n&&f.hover)},g,{children:void 0!==h?(0,E.jsx)(Mp.H,{text:x,highlightClassName:f.matchHighLight,highlightParts:h}):(0,E.jsx)(Pp(),{textToHighlight:x,searchWords:b,autoEscape:!0,highlightClassName:f.matchHighLight})}),x)}));Ap.displayName="Label";const Dp=e=>({base:D.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${e.typography.size.sm};
    line-height: ${e.typography.bodySmall.lineHeight};
    background-color: ${e.colors.background.secondary};
    color: ${e.colors.text};
    white-space: nowrap;
    text-shadow: none;
    padding: ${e.spacing(.5)};
    border-radius: ${e.shape.borderRadius()};
    margin-right: ${e.spacing(1)};
    margin-bottom: ${e.spacing(.5)};
  `,loading:D.css`
    font-weight: ${e.typography.fontWeightMedium};
    background-color: ${e.colors.primary.shade};
    color: ${e.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${e.colors.text.primary};
      }
      50% {
        color: ${e.colors.text.secondary};
      }
      100% {
        color: ${e.colors.text.disabled};
      }
    }
  `,active:D.css`
    font-weight: ${e.typography.fontWeightMedium};
    background-color: ${e.colors.primary.main};
    color: ${e.colors.primary.contrastText};
  `,matchHighLight:D.css`
    background: inherit;
    color: ${e.colors.primary.text};
    background-color: ${e.colors.primary.transparent};
  `,hidden:D.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:D.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `}),$p={SecretFormField:wl,FormField:bl,Select:Ul.Ph,AsyncSelect:Ul.qb,IndicatorsContainer:Ru.B,NoOptionsMessage:_u.P,Input:ql.I,Switch:kl.r}},"./packages/grafana-ui/src/components/transitions/FadeTransition.tsx":(e,t,s)=>{"use strict";s.d(t,{n:()=>l});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./node_modules/react-transition-group/esm/CSSTransition.js"),i=s("./packages/grafana-ui/src/themes/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=(0,i.Bb)((e=>({enter:a.css`
      label: enter;
      opacity: 0;
    `,enterActive:a.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${e}ms ease-out;
    `,exit:a.css`
      label: exit;
      opacity: 1;
    `,exitActive:a.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${e}ms ease-out;
    `})));function l(e){const{visible:t,children:s,duration:a=250}=e,i=o(a);return(0,r.jsx)(n.Z,{in:t,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:i,children:s})}},"./packages/grafana-ui/src/components/transitions/SlideOutTransition.tsx":(e,t,s)=>{"use strict";s.d(t,{R:()=>l});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./node_modules/react-transition-group/esm/CSSTransition.js"),i=s("./packages/grafana-ui/src/themes/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=(0,i.Bb)(((e,t,s)=>({enter:a.css`
      label: enter;
      ${t}: 0;
      opacity: 0;
    `,enterActive:a.css`
      label: enterActive;
      ${t}: ${s}px;
      opacity: 1;
      transition: opacity ${e}ms ease-out, ${t} ${e}ms ease-out;
    `,exit:a.css`
      label: exit;
      ${t}: ${s}px;
      opacity: 1;
    `,exitActive:a.css`
      label: exitActive;
      opacity: 0;
      ${t}: 0;
      transition: opacity ${e}ms ease-out, ${t} ${e}ms ease-out;
    `})));function l(e){const{visible:t,children:s,duration:a=250,horizontal:i,size:l}=e,c=o(a,i?"width":"height",l);return(0,r.jsx)(n.Z,{in:t,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:c,children:s})}},"./packages/grafana-ui/src/components/uPlot/Plot.tsx":(e,t,s)=>{"use strict";s.d(t,{N:()=>l});var a=s("./node_modules/react/index.js"),n=s("./node_modules/uplot/dist/uPlot.esm.js"),i=s("./packages/grafana-ui/src/components/uPlot/utils.ts"),r=s("./node_modules/react/jsx-runtime.js");function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l extends a.Component{constructor(e){super(e),o(this,"plotContainer",(0,a.createRef)()),o(this,"plotCanvasBBox",(0,a.createRef)()),this.state={plot:null}}reinitPlot(){var e;let{width:t,height:s,plotRef:a}=this.props;if(null===(e=this.state.plot)||void 0===e||e.destroy(),0===t&&0===s)return;this.props.config.addHook("setSize",(e=>{e.over}));const r=Object.assign({},i.qt,{width:this.props.width,height:this.props.height,ms:1},this.props.config.getConfig());(0,i.Zp)("UPlot",!1,"Reinitializing plot",r);const o=new n.Z(r,this.props.data,this.plotContainer.current);a&&a(o),this.setState({plot:o})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){var e;null===(e=this.state.plot)||void 0===e||e.destroy()}componentDidUpdate(e){let{plot:t}=this.state;if(function(e,t){return t.width===e.width&&t.height===e.height}(e,this.props))if(function(e,t){return t.config===e.config}(e,this.props))if(function(e,t){return t.data===e.data}(e,this.props))(function(e,t){let s=e.timeRange,a=t.timeRange;return s===a||a.from.valueOf()===s.from.valueOf()&&a.to.valueOf()===s.to.valueOf()})(e,this.props)||null==t||t.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()});else{var s;null==t||t.setData(this.props.data),t&&"string"==typeof(null===(s=this.props.data[0])||void 0===s?void 0:s[0])&&(t.axes[0]._values=this.props.data[0])}else this.reinitPlot();else null==t||t.setSize({width:this.props.width,height:this.props.height})}render(){return(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children]})}}},"./packages/grafana-ui/src/components/uPlot/config/UPlotConfigBuilder.ts":(e,t,s)=>{"use strict";s.d(t,{U:()=>M});var a=s("./node_modules/uplot/dist/uPlot.esm.js"),n=s("./node_modules/lodash/lodash.js"),i=s("./packages/grafana-data/src/index.ts"),r=s("./packages/grafana-ui/src/components/uPlot/types.ts"),o=s("./packages/grafana-schema/src/index.ts");class l extends r.L{merge(e){this.props.min=c("min",this.props.min,e.min),this.props.max=c("max",this.props.max,e.max)}getConfig(){var e;let{isTime:t,scaleKey:s,min:n,max:r,softMin:l,softMax:c,range:d,direction:u,orientation:p}=this.props;const h=t?{}:{distr:this.props.distribution===o.wf.Log?3:this.props.distribution===o.wf.Ordinal?2:1,log:this.props.distribution===o.wf.Log?this.props.log||2:void 0};const g={min:{pad:.1,hard:null!=n?n:-1/0,soft:l||0,mode:null==l?3:1},max:{pad:.1,hard:null!=r?r:1/0,soft:c||0,mode:null==c?3:1}};let m=null==l&&null!=n,f=null==c&&null!=r;let b=!(t||m&&f);return(0,i.isBooleanUnit)(s)&&(b=!1,d=[0,1]),{[s]:Object.assign({time:t,auto:b,range:null!==(e=d)&&void 0!==e?e:(e,t,s,i)=>{const o=e.scales[i];let l=[t,s];if(1===o.distr||2===o.distr)l=a.Z.rangeNum(m?n:t,f?r:s,g);else if(3===o.distr){var c;l=a.Z.rangeLog(t,s,null!==(c=o.log)&&void 0!==c?c:10,!0)}return m&&(l[0]=n),f&&(l[1]=r),l},dir:u,ori:p},h)}}}function c(e,t,s){return!(null==t)?!(null==s)?"min"===e?t<s?t:s:t>s?t:s:t:s}var d=s("./node_modules/tinycolor2/tinycolor.js"),u=s.n(d),p=s("./packages/grafana-ui/src/utils/measureText.ts");let h,g;function m(e,t,s,a,n=!1){let i=e.scales[t],r=null,o=null;for(let e=0;e<a.length;e++){let t=a[e][0];if((t<=i.min||null==r)&&(r=e),o=e,t>=i.max)break}if(r===o)return a[r][1];let l=a[r][0],c=a[o][0];l===-1/0&&(l=i.min),c===1/0&&(c=i.max);let d,u,g,m,f=Math.round(e.valToPos(l,t,!0)),b=Math.round(e.valToPos(c,t,!0)),v=f-b;s===h.Up?(d=g=0,u=f,m=b):(u=m=0,d=f,g=b);let x,y=(0,p.AE)().createLinearGradient(d,u,g,m);for(let s=r;s<=o;s++){let i=a[s],l=(f-(s===r?f:s===o?b:Math.round(e.valToPos(i[0],t,!0))))/v;n&&s>r&&y.addColorStop(l,x),y.addColorStop(l,x=i[1])}return y}function f(e,t,s,a,n,i){var r,o;let l=null!==(r=null!=s?s:n)&&void 0!==r?r:null,c=null!==(o=null!=a?a:i)&&void 0!==o?o:null;if(null==l||null==c){var d,u,p,h;let[s,a]=function(e,t){let s=e.scales[t],a=1/0,n=-1/0;return e.series.forEach(((s,i)=>{if(s.show&&s.scale===t)if(null==s.min){let t=e.data[i];for(let e=0;e<t.length;e++)null!=t[e]&&(a=Math.min(a,t[e]),n=Math.max(n,t[e]))}else a=Math.min(a,s.min),n=Math.max(n,s.max)})),n===a&&(a=s.min,n=s.max),[a,n]}(e,t);l=null!==(d=null!==(u=l)&&void 0!==u?u:s)&&void 0!==d?d:0,c=null!==(p=null!==(h=c)&&void 0!==h?h:a)&&void 0!==p?p:100}return[l,c]}function b(e,t,s,a,n,r,o,l){if(!s)throw Error("Missing colorMode required for color scheme gradients");if(!a)throw Error("Missing thresholds required for color scheme gradients");return(c,d)=>{let u=c.series[d].scale,p="";if(s.id===i.FieldColorModeId.Thresholds)if(a.mode===i.ThresholdsMode.Absolute){const s=a.steps.map((s=>[s.value,i.colorManipulator.alpha(t.visualization.getColorByName(s.color),e)]));p=m(c,u,h.Up,s,!0)}else{const[s,d]=f(c,u,n,r,o,l),g=d-s,b=a.steps.map((a=>[s+g*(a.value/100),i.colorManipulator.alpha(t.visualization.getColorByName(a.color),e)]));p=m(c,u,h.Up,b,!0)}else if(s.getColors){const a=s.getColors(t),[d,g]=f(c,u,n,r,o,l),b=g-d,v=a.map(((s,n)=>[d+b*(n/(a.length-1)),i.colorManipulator.alpha(t.visualization.getColorByName(s),e)]));p=m(c,u,h.Up,v,!1)}return p}}!function(e){e[e.Right=0]="Right",e[e.Up=1]="Up"}(h||(h={}));class v extends r.L{getConfig(){const{facets:e,drawStyle:t,pathBuilder:s,pointsBuilder:n,pointsFilter:i,lineInterpolation:r,lineWidth:l,lineStyle:c,barAlignment:d,barWidthFactor:u,barMaxWidth:p,showPoints:h,pointSize:m,scaleKey:f,pxAlign:b,spanNulls:v,show:x=!0}=this.props;let y={},w=this.getLineColor();if(y.stroke=w,null!=s)y.paths=s,y.width=l;else if(t===o.l8.Points)y.paths=()=>null;else if(null!=t){var j;if(y.width=l,c&&"solid"!==c.fill)"dot"===c.fill&&(y.cap="round"),y.dash=null!==(j=c.dash)&&void 0!==j?j:[10,10];y.paths=(e,s,n,i)=>function(e,t,s=0,n=.6,i=1/0){const r=a.Z.paths;g||(g={linear:r.linear(),smooth:r.spline(),stepBefore:r.stepped({align:-1}),stepAfter:r.stepped({align:1})});if(e===o.l8.Bars){let e=`bars|${s}|${n}|${i}`;return g[e]||(g[e]=r.bars({size:[n,i],align:s})),g[e]}if(e===o.l8.Line){if(t===o.KC.StepBefore)return g.stepBefore;if(t===o.KC.StepAfter)return g.stepAfter;if(t===o.KC.Smooth)return g.smooth}return g.linear}(t,r,d,u,p)(e,s,n,i)}const k="string"==typeof w?w:(e,t)=>e.series[t]._stroke,S={points:{stroke:k,fill:k,size:m,filter:i}};return null!=n?S.points.show=n:t===o.l8.Points?S.points.show=!0:h===o.Jp.Auto?t===o.l8.Bars&&(S.points.show=!1):h===o.Jp.Never?S.points.show=!1:h===o.Jp.Always&&(S.points.show=!0),Object.assign({scale:f,facets:e,spanGaps:"number"!=typeof v&&v,value:()=>"",pxAlign:b,show:x,fill:this.getFill()},y,S)}getLineColor(){const{lineColor:e,gradientMode:t,colorMode:s,thresholds:a,theme:n,hardMin:r,hardMax:l,softMin:c,softMax:d}=this.props;return t===o.FI.Scheme&&(null==s?void 0:s.id)!==i.FieldColorModeId.Fixed?b(1,n,s,a,r,l,c,d):null!=e?e:i.FALLBACK_COLOR}getFill(){const{lineColor:e,fillColor:t,gradientMode:s,fillOpacity:a,colorMode:n,thresholds:r,theme:l,hardMin:c,hardMax:d,softMin:h,softMax:g}=this.props;if(t)return t;const m=(null!=a?a:0)/100;switch(null!=s?s:o.FI.None){case o.FI.Opacity:return f=null!=t?t:e,v=m,(e,t)=>{const s=(0,p.AE)().createLinearGradient(0,e.bbox.top,0,e.bbox.top+e.bbox.height);return s.addColorStop(0,i.colorManipulator.alpha(f,v)),s.addColorStop(1,i.colorManipulator.alpha(f,0)),s};case o.FI.Hue:return function(e,t,s){return(a,n)=>{const i=(0,p.AE)().createLinearGradient(0,a.bbox.top,0,a.bbox.top+a.bbox.height),r=u()(e).spin(-15),o=u()(e).spin(15);return s.isDark?(i.addColorStop(0,o.lighten(10).setAlpha(t).toString()),i.addColorStop(1,r.darken(10).setAlpha(t).toString())):(i.addColorStop(0,o.lighten(10).setAlpha(t).toString()),i.addColorStop(1,r.setAlpha(t).toString())),i}}(null!=t?t:e,m,l);case o.FI.Scheme:if((null==n?void 0:n.id)!==i.FieldColorModeId.Fixed)return b(m,l,n,r,c,d,h,g);default:if(m>0)return i.colorManipulator.alpha(null!=e?e:"",m)}var f,v}}class x extends r.L{merge(e){this.props.size=c("max",this.props.size,e.size),this.props.label||(this.props.label=e.label),this.props.placement===o.LB.Auto&&(this.props.placement=e.placement)}getConfig(){var e;let{scaleKey:t,label:s,show:a=!0,placement:n=o.LB.Auto,grid:r={show:!0},ticks:l=!0,gap:c=5,formatValue:d,splits:u,values:p,isTime:h,timeZone:g,theme:m}=this.props;const f=`12px ${m.typography.fontFamily}`,b=m.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,i.isBooleanUnit)(t)&&(u=[0,1]);let v={scale:t,show:a,stroke:m.colors.text.primary,side:N(n),font:f,size:null!==(e=this.props.size)&&void 0!==e?e:w,gap:c,labelGap:0,grid:{show:r.show,stroke:b,width:1/devicePixelRatio},ticks:{show:l,stroke:b,width:1/devicePixelRatio,size:4},splits:u,values:p,space:y};return null!=s&&s.length>0&&(v.label=s,v.labelSize=20,v.labelFont=f,v.labelGap=8),p?v.values=p:h?v.values=T:d&&(v.values=(e,t)=>t.map(d)),v.timeZone=g,v}}function y(e,t,s,a,n){const i=e.axes[t],r=e.scales[i.scale];if(2!==i.side||!r)return 30;if(r.time){const i=T(e,[s],t,40,(a-s)/(n/40));return(0,p.X1)(i[0],12).width+18}return 40}function w(e,t,s){const a=e.axes[s];let n=a.ticks.size;if(2===a.side)n+=a.gap+12;else if(null!=t&&t.length){let e=t.reduce(((e,t)=>Math.max(e,(0,p.X1)(t,12).width)),0);n+=a.gap+a.labelGap+e}return Math.ceil(n)}const j=1e3,k=6e4,S=864e5,C=31536e6;function T(e,t,s,a,n){var r,o;const l=e.axes[s].timeZone,c=e.scales.x,d=(null!==(r=null==c?void 0:c.max)&&void 0!==r?r:0)-(null!==(o=null==c?void 0:c.min)&&void 0!==o?o:0),u=Math.round(C/S)*S,p=Math.round(n/S)*S;let h=i.systemDateFormats.interval.year;return n<j?h=i.systemDateFormats.interval.second.replace("ss","ss.SS"):n<=k?h=i.systemDateFormats.interval.second:d<=S?h=i.systemDateFormats.interval.minute:n<=S?h=i.systemDateFormats.interval.hour:d<C?h=i.systemDateFormats.interval.day:p===u?h=i.systemDateFormats.interval.year:n<=C&&(h=i.systemDateFormats.interval.month),t.map((e=>(0,i.dateTimeFormat)(e,{format:h,timeZone:l})))}function N(e){switch(e){case o.LB.Top:return 0;case o.LB.Right:return 1;case o.LB.Bottom:return 2;case o.LB.Left:}return 3}var O=s("./packages/grafana-ui/src/components/uPlot/utils.ts");function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const P={drag:{setScale:!1},points:{size:(e,t)=>2*e.series[t].points.size,width:(e,t,s)=>s/4},focus:{prox:30}};class M{constructor(e=i.DefaultTimeZone){var t;I(this,"series",[]),I(this,"axes",{}),I(this,"scales",[]),I(this,"bands",[]),I(this,"cursor",void 0),I(this,"isStacking",!1),I(this,"select",void 0),I(this,"hasLeftAxis",!1),I(this,"hooks",{}),I(this,"tz",void 0),I(this,"sync",!1),I(this,"mode",1),I(this,"frames",void 0),I(this,"thresholds",{}),I(this,"tooltipInterpolator",void 0),I(this,"padding",void 0),I(this,"prepData",void 0),I(this,"scaleKeys",["",""]),I(this,"tzDate",(e=>{let t=new Date(e);return this.tz?a.Z.tzDate(t,this.tz):t})),this.tz=null===(t=(0,i.getTimeZoneInfo)(e,Date.now()))||void 0===t?void 0:t.ianaName}addHook(e,t){(0,O.Zp)("UPlotConfigBuilder",!1,"addHook",e),this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(t)}addThresholds(e){this.thresholds[e.scaleKey]||(this.thresholds[e.scaleKey]=e,this.addHook("drawClear",function(e){return t=>{const s=t.ctx,{scaleKey:a,thresholds:n,theme:r,config:l,hardMin:c,hardMax:d,softMin:p,softMax:g}=e,{min:b,max:v}=t.scales.x,{min:x,max:y}=t.scales[a];if(null==b||null==v||null==x||null==y)return;let{steps:w,mode:j}=n;if(j===i.ThresholdsMode.Percentage){let[e,s]=f(t,a,c,d,p,g),n=s-e;w=w.map((t=>Object.assign({},t,{value:e+n*(t.value/100)})))}function k(){let e=0;for(let t=0;t<w.length;t++)if("transparent"===w[t].color){e=t;break}for(let n=1;n<w.length;n++){const i=w[n];let o;o=e>=n&&n>0?u()(r.visualization.getColorByName(w[n-1].color)):u()(r.visualization.getColorByName(i.color)),1===o.getAlpha()&&o.setAlpha(.7);let l=Math.round(t.valToPos(b,"x",!0)),c=Math.round(t.valToPos(i.value,a,!0)),d=Math.round(t.valToPos(v,"x",!0)),p=Math.round(t.valToPos(i.value,a,!0));s.beginPath(),s.lineWidth=2,s.strokeStyle=o.toString(),s.moveTo(l,c),s.lineTo(d,p),s.stroke(),s.closePath()}}function S(){let e=m(t,t.series[1].scale,h.Up,w.map((e=>{let t=u()(r.visualization.getColorByName(e.color));return 1===t.getAlpha()&&t.setAlpha(.15),[e.value,t.toString()]})),!0);s.save(),s.fillStyle=e,s.fillRect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),s.restore()}switch(l.mode){case o.i3.Line:k();break;case o.i3.Area:S();break;case o.i3.LineAndArea:k(),S()}}}(e)))}addAxis(e){var t,s;e.placement=null!==(t=e.placement)&&void 0!==t?t:o.LB.Auto,e.grid=null!==(s=e.grid)&&void 0!==s?s:{},this.axes[e.scaleKey]?this.axes[e.scaleKey].merge(e):(e.placement===o.LB.Auto&&(e.placement=this.hasLeftAxis?o.LB.Right:o.LB.Left),e.placement===o.LB.Left&&(this.hasLeftAxis=!0),e.placement===o.LB.Hidden&&(e.grid.show=!1,e.size=0),this.axes[e.scaleKey]=new x(e))}getAxisPlacement(e){var t;const s=this.axes[e];return null!==(t=null==s?void 0:s.props.placement)&&void 0!==t?t:o.LB.Left}setCursor(e){this.cursor=(0,n.merge)({},this.cursor,e)}setMode(e){this.mode=e}setSelect(e){this.select=e}setStacking(e=!0){this.isStacking=e}addSeries(e){this.series.push(new v(e))}getSeries(){return this.series}addScale(e){const t=this.scales.find((t=>t.props.scaleKey===e.scaleKey));t?t.merge(e):this.scales.push(new l(e))}addBand(e){this.bands.push(e)}setTooltipInterpolator(e){this.tooltipInterpolator=e}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(e){this.prepData=t=>(this.frames=t,e(t))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(e){this.padding=e}getConfig(){const e={mode:this.mode,series:[2===this.mode?null:{value:()=>""}]};e.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map((e=>e.getConfig())),e.series=[...e.series,...this.series.map((e=>e.getConfig()))],e.scales=this.scales.reduce(((e,t)=>Object.assign({},e,t.getConfig())),{}),e.hooks=this.hooks,e.select=this.select;const t=(e="")=>(t,s)=>{let a=t.series[s].points._stroke;if("string"!=typeof a){let e=this.frames[0].fields[s];a=e.display(e.values.get(t.cursor.idxs[s])).color}return a+e};var s;if(e.cursor=(0,n.merge)({},P,{points:{stroke:t("80"),fill:t()}},this.cursor),e.tzDate=this.tzDate,e.padding=this.padding,this.isStacking)e.bands=this.bands;else if(null!==(s=this.bands)&&void 0!==s&&s.length){e.bands=this.bands;const t=new Set;for(const s of e.bands)t.add(s.series[0]);for(let s=1;s<e.series.length;s++)t.has(s)||(e.series[s].fill=void 0)}return e}ensureNonOverlappingAxes(e){const t=e.find((e=>"x"===e.props.scaleKey)),s=e.filter((e=>{var t;return void 0===(null===(t=e.props.grid)||void 0===t?void 0:t.show)})),a=s.findIndex((e=>e.props.placement===o.LB.Left||e.props.placement===o.LB.Bottom&&e!==t));for(let e=0;e<s.length;e++)s[e]===t||e===a?s[e].props.grid.show=!0:s[e].props.grid.show=!1;return e}}},"./packages/grafana-ui/src/components/uPlot/types.ts":(e,t,s)=>{"use strict";s.d(t,{L:()=>a});class a{constructor(e){this.props=e}}},"./packages/grafana-ui/src/components/uPlot/utils.ts":(e,t,s)=>{"use strict";s.d(t,{qt:()=>l,k6:()=>c,oP:()=>d,ah:()=>u,Zp:()=>h});var a=s("./packages/grafana-data/src/index.ts"),n=s("./packages/grafana-schema/src/index.ts"),i=s("./packages/grafana-ui/src/utils/logger.ts"),r=s("./packages/grafana-ui/src/utils/index.ts");const o=(e,t,s)=>{let a=t%2?s[0]||s[2]:s[1]||s[3];return s[t]||!a?0:8},l={focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[o,o,o,o],series:[],hooks:{}};function c(e,t){const s=e[0],i=[],r=new Map;let o=0;for(let e=0;e<s.fields.length;e++){const t=s.fields[e];t.type!==a.FieldType.time?(d(t,r,o),i.push(t.values.toArray()),o++):(i.push((0,a.ensureTimeField)(t).values.toArray()),o++)}if(0!==r.size){var l,c;const e=(null===(l=s.fields[1].config.custom)||void 0===l||null===(c=l.stacking)||void 0===c?void 0:c.mode)===n.o0.Percent,a=i[0].length,o=Array(r.size);o[0]=null;for(const[t,s]of r.entries()){const t=e?Array(a).fill(0):null;if(e)for(let e=0;e<s.length;e++){const n=i[s[e]];for(let e=0;e<a;e++){const s=n[e];t[e]+=null==s?0:+s}}const n=Array(a).fill(0);for(let r=0;r<s.length;r++){let l=s[r];o[l]=t;const c=i[l];for(let s=0;s<a;s++){const a=c[s];n[s]+=null==a?0:a/(e?t[s]:1)}i[l]=n.slice()}}t&&t({totals:o})}return i}function d(e,t,s){var a,i,r;const o=e.config.custom;o&&((null===(a=o.stacking)||void 0===a?void 0:a.mode)===n.o0.None||null===(i=o.stacking)||void 0===i||!i.group||null!==(r=o.hideFrom)&&void 0!==r&&r.viz||(t.has(o.stacking.group)?t.set(o.stacking.group,t.get(o.stacking.group).concat(s)):t.set(o.stacking.group,[s])))}function u(e,t){let s,a=1,n=1,i=e.data[1][t],r=e.data[1][t];for(let s=1;s<e.data.length;s++){const o=e.data[s][t];null!=o&&(null==i?i=o:o>i&&(i=e.data[s][t],a=s),null==r?r=o:o<r&&(r=e.data[s][t],n=s))}return s=null==r&&null==i?void 0:null!=r&&null!=i?(e.valToPos(r,e.series[n].scale)+e.valToPos(i,e.series[a].scale))/2:e.valToPos(r||i,e.series[a||n].scale),s}const p=(0,i.h)("uPlot"),h=p.logger;(0,r.xq)("graphng",void 0,p)},"./packages/grafana-ui/src/index.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ALERTING_COLOR:()=>r.ns,Alert:()=>n.bZj,AlertVariant:()=>n.Uxq,AlertingSettings:()=>n.O5T,AsyncMultiSelect:()=>n.M8I,AsyncSelect:()=>n.qbS,AxisConfig:()=>d.AxisConfig,AxisPlacement:()=>d.LB,Badge:()=>n.Cts,BadgeColor:()=>n.JVe,BadgeProps:()=>n.u8S,BarAlignment:()=>d.pu,BarConfig:()=>d.BarConfig,BarGauge:()=>n.xfx,BarGaugeDisplayMode:()=>n.QHm,BarValueVisibility:()=>d.Jp,BigValue:()=>n.w6I,BigValueColorMode:()=>n.pcF,BigValueGraphMode:()=>n.IGx,BigValueJustifyMode:()=>n.apN,BigValueTextMode:()=>n.jGm,BracesPlugin:()=>T.hP,BrowserLabel:()=>n.dI4,Button:()=>n.zxk,ButtonCascader:()=>n.OSz,ButtonGroup:()=>n.hE2,ButtonSelect:()=>n.doH,ButtonVariant:()=>n.Wu3,CallToActionCard:()=>n._d,Card:()=>n.Zbd,CardContainer:()=>n._L7,CardContainerProps:()=>n.jUt,CardProps:()=>n.dwY,Cascader:()=>n.vTp,CascaderOption:()=>n.iNw,CertificationKey:()=>n.WTJ,Checkbox:()=>n.XZJ,ClearPlugin:()=>T.Gp,ClickOutsideWrapper:()=>n.LVf,ClipboardButton:()=>n.mUV,ClipboardPlugin:()=>T.wl,CodeEditor:()=>n.pq4,CodeEditorMonacoOptions:()=>n.EGH,CodeEditorSuggestionItem:()=>n.L0D,CodeEditorSuggestionItemKind:()=>n.kwZ,CollapsableSection:()=>n.s2J,Collapse:()=>n.UO1,ColorPicker:()=>n.zH8,ColorValueEditor:()=>n.Bw9,ColorValueEditorProps:()=>n.kp4,CompletionItemKind:()=>i.cm,ConfirmButton:()=>n.puI,ConfirmModal:()=>n.sm4,ConfirmModalProps:()=>n.feC,Container:()=>n.W20,ContextMenu:()=>n.xVl,ContextMenuProps:()=>n.CMg,ControlledCollapse:()=>n.ybu,Counter:()=>n.ATJ,CustomScrollbar:()=>n.$TT,DEFAULT_ANNOTATION_COLOR:()=>r.Jx,DOMUtil:()=>r.Qi,DataLinkButton:()=>n.kuP,DataLinkInput:()=>n.vmb,DataLinksContextMenu:()=>n.V5N,DataLinksInlineEditor:()=>n.dIl,DataSourceHttpSettings:()=>n.E1E,DatePicker:()=>n.Mtg,DatePickerProps:()=>n.kse,DatePickerWithInput:()=>n.d2U,DatePickerWithInputProps:()=>n.Qiu,DateTimePicker:()=>n.xZq,DeleteButton:()=>n.m1X,DrawStyle:()=>d.l8,Drawer:()=>n.dys,DropzoneFile:()=>n.isR,EmotionPerfTest:()=>n.jye,EmptySearchResult:()=>n.KBh,ErrorBoundary:()=>n.SVk,ErrorBoundaryAlert:()=>n.z4Q,ErrorBoundaryAlertProps:()=>n.M_3,ErrorWithStack:()=>n.X2N,EventsCanvas:()=>n.TZ,EventsWithValidation:()=>r.JU,FIXED_UNIT:()=>n.jKV,FadeTransition:()=>n.nTT,FeatureBadge:()=>n.aXU,FeatureInfoBox:()=>n.ZjK,Field:()=>n.gNt,FieldArray:()=>n.F26,FieldLinkList:()=>n.Zjt,FieldSet:()=>n.C3N,FieldTextAlignment:()=>d.FieldTextAlignment,FieldValidationMessage:()=>n.S0X,FileDropzone:()=>n.YoT,FileDropzoneDefaultChildren:()=>n.A_i,FileDropzoneProps:()=>n.G1O,FileListItem:()=>n.K$w,FileListItemProps:()=>n.wEv,FileUpload:()=>n.p0f,FillConfig:()=>d.FillConfig,FilterInput:()=>n.HSx,FilterPill:()=>n.BmQ,Form:()=>n.l09,FormFieldErrors:()=>i.nj,FormInputSize:()=>n.YE$,FormattedValueDisplay:()=>n.WRj,FormsOnSubmit:()=>i.lD,FullWidthButtonContainer:()=>n.fiX,Gauge:()=>n.aCY,GlobalStyles:()=>o.nz,Graph:()=>n.kJb,GraphContextMenu:()=>n.wvn,GraphContextMenuHeader:()=>n.bpR,GraphFieldConfig:()=>d.GraphFieldConfig,GraphGradientMode:()=>d.FI,GraphNG:()=>n.drZ,GraphNGLegendEvent:()=>n.aSI,GraphNGProps:()=>n.E2j,GraphSeriesToggler:()=>n.UNL,GraphSeriesTogglerAPI:()=>n.pK4,GraphThresholdsStyleConfig:()=>d.GraphThresholdsStyleConfig,GraphTresholdsStyleMode:()=>d.i3,GraphWithLegend:()=>n.UAG,HideSeriesConfig:()=>d.HideSeriesConfig,HideableFieldConfig:()=>d.HideableFieldConfig,HorizontalGroup:()=>n.LhK,Icon:()=>n.JO$,IconButton:()=>n.hU,IconButtonVariant:()=>n.gZk,IndentationPlugin:()=>T.Rc,InfoBox:()=>n.vDh,InlineField:()=>n._9$,InlineFieldRow:()=>n.Z6t,InlineFormLabel:()=>n.cJ0,InlineLabel:()=>n.W4p,InlineSegmentGroup:()=>n.mOU,InlineSwitch:()=>n.x$6,Input:()=>n.IIB,InputControl:()=>n.gs_,JSONFormatter:()=>n.gwK,JsonExplorer:()=>n.uC,Label:()=>n.__J,LegacyForms:()=>n.vw6,LegacyInputStatus:()=>n.Gdq,Legend:()=>n.DeQ,LegendDisplayMode:()=>d.jK,LegendPlacement:()=>d.LegendPlacement,LineConfig:()=>d.LineConfig,LineInterpolation:()=>d.KC,LineStyle:()=>d.LineStyle,Link:()=>n.rUS,LinkButton:()=>n.Qjf,List:()=>n.aVo,LoadingPlaceholder:()=>n.u3Z,LoadingPlaceholderProps:()=>n.c02,LogLabels:()=>n.jwW,LogMessageAnsi:()=>n.QNy,LogRows:()=>n.w3v,Marker:()=>n.JxD,Menu:()=>n.v2r,MenuGroup:()=>n.kSQ,MenuGroupProps:()=>n.VO7,MenuItem:()=>n.sNh,MenuItemProps:()=>n.T4d,MenuItemsGroup:()=>n.oOs,MenuProps:()=>n.ZyH,Modal:()=>n.u_l,ModalHeader:()=>n.xBx,ModalRoot:()=>n.Y0X,ModalTabContent:()=>n.QEF,ModalTabsHeader:()=>n.Han,ModalsController:()=>n.JYt,ModalsProvider:()=>n.$iA,Monaco:()=>n.d$d,MonacoEditor:()=>n.rEm,MultiSelect:()=>n.NUq,MultiSelectValueEditor:()=>n.Ytm,NO_DATA_COLOR:()=>r._V,NewlinePlugin:()=>T.z2,NodeGraphDataFrameFieldNames:()=>r.zG,NumberValueEditor:()=>n.wYs,OK_COLOR:()=>r.te,OnTagClick:()=>n.k8K,OptionsWithLegend:()=>d.OptionsWithLegend,OptionsWithTextFormatting:()=>d.OptionsWithTextFormatting,OptionsWithTooltip:()=>d.OptionsWithTooltip,PENDING_COLOR:()=>r.f7,PageToolbar:()=>n.XDu,Pagination:()=>n.tlE,PanelChrome:()=>n.fmR,PanelChromeErrorIndicator:()=>n.qbG,PanelChromeErrorIndicatorProps:()=>n.QEv,PanelChromeLoadingIndicator:()=>n.E3Q,PanelChromeLoadingIndicatorProps:()=>n.oP_,PanelChromeProps:()=>n.vIs,PanelChromeType:()=>n.swS,PanelContext:()=>n.QPw,PanelContextProvider:()=>n._wC,PanelContextRoot:()=>n.bbH,PanelPadding:()=>n.jX4,PlotLegend:()=>n.lNn,PlotSelection:()=>n.isz,PlotTooltipInterpolator:()=>n.xyZ,PluginSignatureBadge:()=>n.oDb,PluginSignatureBadgeProps:()=>n.bvM,PointVisibility:()=>d.Jp,PointsConfig:()=>d.PointsConfig,Popover:()=>n.J2e,PopoverContent:()=>n.yky,PopoverController:()=>n.Dh5,Portal:()=>n.h_i,QueryField:()=>n.qjJ,REGION_FILL_ALPHA:()=>r.iV,RadioButtonGroup:()=>n.SYO,RangeSlider:()=>n.U2U,RefreshPicker:()=>n.dPd,RelativeTimeRangePicker:()=>n.xpf,RunnerPlugin:()=>T.dv,SCHEMA:()=>r.Yi,ScaleDirection:()=>d.bQ,ScaleDistribution:()=>n.wf3,ScaleDistributionConfig:()=>d.ScaleDistributionConfig,ScaleOrientation:()=>d.wN,ScrollbarPosition:()=>n.fqL,SearchFunctionType:()=>r.nu,Segment:()=>n.XX7,SegmentAsync:()=>n.VXm,SegmentInput:()=>n.Xrl,SegmentSection:()=>n.fT$,SegmentSelect:()=>n.VBk,Select:()=>n.PhF,SelectValueEditor:()=>n.Y3l,SelectionShortcutsPlugin:()=>T.$L,SeriesColorPicker:()=>n.spA,SeriesColorPickerPopover:()=>n.jx7,SeriesColorPickerPopoverWithTheme:()=>n.qRd,SeriesIcon:()=>n.FiV,SeriesTable:()=>n.cS8,SeriesTableProps:()=>n.VbF,SeriesTableRow:()=>n.VtB,SeriesTableRowProps:()=>n.ha2,SeriesVisibilityChangeBehavior:()=>n.YvT,SeriesVisibilityChangeMode:()=>n.R8q,SetInterval:()=>n.FOj,SingleStatBaseOptions:()=>n.U_X,SlatePrism:()=>T.Ze,SlideOutTransition:()=>n.R9v,Slider:()=>n.iRW,SliderValueEditor:()=>n.pn$,Spinner:()=>n.$jN,StackableFieldConfig:()=>d.StackableFieldConfig,StackingConfig:()=>d.StackingConfig,StackingMode:()=>d.o0,StatsPicker:()=>n.mMX,StringArrayEditor:()=>n.gQx,StringValueEditor:()=>n.Ai9,SuggestionsPlugin:()=>T.bm,Switch:()=>n.rsf,TLSAuthSettings:()=>n.sHf,Tab:()=>n.OK9,TabConfig:()=>n.DJl,TabContent:()=>n.I5H,TabbedContainer:()=>n.WLI,Table:()=>n.iA_,TableCellDisplayMode:()=>n.h2q,TableFieldOptions:()=>d.TableFieldOptions,TableInputCSV:()=>n.wtM,TableSortByFieldState:()=>n.JAu,TabsBar:()=>n.J_V,Tag:()=>n.Vp9,TagList:()=>n.PST,TagsInput:()=>n.B7H,TextArea:()=>n.Kx8,ThemeContext:()=>o.Ni,TimeOfDayPicker:()=>n.yAm,TimeRangeInput:()=>n.K4x,TimeRangePicker:()=>n.XcI,TimeRangePickerProps:()=>n.WKf,TimeSeries:()=>n.pfI,TimeZonePicker:()=>n.OkK,Token:()=>T.WU,ToolbarButton:()=>n.hAV,ToolbarButtonRow:()=>n.RNy,Tooltip:()=>n.ua7,TooltipDisplayMode:()=>d.f3,TooltipPlugin:()=>n.iiT,UPlotChart:()=>n.N$r,UPlotConfigBuilder:()=>n.UBi,UPlotConfigPrepFn:()=>n.ffP,UnitPicker:()=>n.nAu,ValuePicker:()=>n.b59,VerticalGroup:()=>n.wcK,VizLayout:()=>n.AYi,VizLayoutComponentType:()=>n.C9i,VizLayoutLegendProps:()=>n.Lxb,VizLayoutProps:()=>n.wIc,VizLegend:()=>n.ltB,VizLegendItem:()=>n.Jn8,VizLegendListItem:()=>n.eMh,VizLegendOptions:()=>d.VizLegendOptions,VizRepeater:()=>n.QBm,VizRepeaterRenderValueProps:()=>n.M9j,VizTextDisplayOptions:()=>d.VizTextDisplayOptions,VizTooltip:()=>n.I5C,VizTooltipContainer:()=>n.S$u,VizTooltipOptions:()=>d.VizTooltipOptions,WithContextMenu:()=>n.zH1,XYCanvas:()=>n.K2,ZoomPlugin:()=>n.Rbc,ansicolor:()=>r._J,attachDebugger:()=>r.xq,calculateFontSize:()=>r.MX,colors:()=>r.O9,commonOptionsBuilder:()=>a,convertOldAngularValueMapping:()=>n.PRL,createLogger:()=>r.hu,defaultIntervals:()=>n.o5O,fieldMatchersUI:()=>n.ivH,fuzzyMatch:()=>r.C6,getAvailableIcons:()=>i.BI,getCanvasContext:()=>r.AE,getCardStyles:()=>n.LyM,getCellLinks:()=>r.iu,getFieldTypeIcon:()=>i.e7,getFormStyles:()=>n.SYZ,getLogRowStyles:()=>n.hIY,getScrollbarWidth:()=>r.np,getStandardFieldConfigs:()=>we,getStandardOptionEditors:()=>je,getTagColor:()=>r.vm,getTagColorsFromName:()=>r.Bx,getTextColorForBackground:()=>r.Gc,getTheme:()=>o.gh,graphFieldOptions:()=>n.qVi,graphTickFormatter:()=>n.sVu,graphTimeFormat:()=>n.mcr,hasValidationEvent:()=>r.z3,linkModelToContextMenuItems:()=>r.Rc,makeFragment:()=>r.xl,makeValue:()=>r.l1,measureText:()=>r.X1,mockTheme:()=>o.Zu,mockThemeContext:()=>o.sJ,monacoTypes:()=>n.NFT,preparePlotFrame:()=>n.RnT,regexValidation:()=>r.FE,renderOrCallToRender:()=>r.Ty,resetSelectStyles:()=>n.JpF,selectOptionInTest:()=>n.FMl,sharedSingleStatMigrationHandler:()=>n.rDf,sharedSingleStatPanelChangedHandler:()=>n.ZHc,sortedColors:()=>r.Wm,styleMixins:()=>o.GU,stylesFactory:()=>o.Bb,useForceUpdate:()=>r.NW,useGraphNGContext:()=>n.zrC,usePanelContext:()=>n.R9P,useStyles:()=>o.yK,useStyles2:()=>o.wW,useTheme:()=>o.Fg,useTheme2:()=>o.l4,validate:()=>r.Gu,variableSuggestionToCodeEditorSuggestion:()=>n.ThK,withErrorBoundary:()=>n.PfY,withTheme:()=>o.Zz,withTheme2:()=>o.HE});var a={};s.r(a),s.d(a,{StackingEditor:()=>k,addAxisConfig:()=>p,addHideFrom:()=>v,addLegendOptions:()=>x,addStackingConfig:()=>S,addTextSizeOptions:()=>w,addTooltipOptions:()=>y});var n=s("./packages/grafana-ui/src/components/index.ts"),i=s("./packages/grafana-ui/src/types/index.ts"),r=s("./packages/grafana-ui/src/utils/index.ts"),o=s("./packages/grafana-ui/src/themes/index.ts"),l=s("./node_modules/react/index.js"),c=s("./packages/grafana-data/src/index.ts"),d=s("./packages/grafana-schema/src/index.ts"),u=s("./node_modules/react/jsx-runtime.js");function p(e,t,s){const a=["Axis"];e.addRadio({path:"axisPlacement",name:"Placement",category:a,defaultValue:n.qVi.axisPlacement[0].value,settings:{options:n.qVi.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:a,defaultValue:"",settings:{placeholder:"Optional text"},showIf:e=>e.axisPlacement!==d.LB.Hidden,shouldApply:()=>!0}).addNumberInput({path:"axisWidth",name:"Width",category:a,settings:{placeholder:"Auto"},showIf:e=>e.axisPlacement!==d.LB.Hidden}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:t.axisSoftMin,category:a,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:t.axisSoftMax,category:a,settings:{placeholder:"See: Standard options > Max"}}).addRadio({path:"axisGridShow",name:"Show grid lines",category:a,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}),s||e.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:a,editor:m,override:m,defaultValue:{type:d.wf.Linear},shouldApply:e=>e.type===c.FieldType.number,process:c.identityOverrideProcessor})}const h=[{label:"Linear",value:d.wf.Linear},{label:"Logarithmic",value:d.wf.Log}],g=[{label:"2",value:2},{label:"10",value:10}],m=({value:e,onChange:t})=>(0,u.jsxs)(n.LhK,{children:[(0,u.jsx)(n.SYO,{value:e.type||d.wf.Linear,options:h,onChange:s=>{console.log(s,e),t(Object.assign({},e,{type:s,log:s===d.wf.Linear?void 0:2}))}}),e.type===d.wf.Log&&(0,u.jsx)(n.PhF,{menuShouldPortal:!0,allowCustomValue:!1,autoFocus:!0,options:g,value:e.log||2,prefix:"base",width:12,onChange:s=>{t(Object.assign({},e,{log:s.value}))}})]});var f=s("./node_modules/lodash/lodash.js");const b=e=>{const{value:t,onChange:s}=e,a=(0,l.useCallback)((e=>{s(Object.assign({},t,{[e]:!t[e]}))}),[t,s]);return(0,u.jsx)(n.LhK,{spacing:"xs",children:Object.keys(t).map((e=>{const s=e;return(0,u.jsx)(n.BmQ,{icon:t[s]?"eye-slash":"eye",onClick:()=>a(s),label:(0,f.startCase)(s),selected:t[s]},s)}))})};function v(e){e.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:b,override:b,shouldApply:()=>!0,hideFromDefaults:!0,process:e=>e})}function x(e,t=!0){e.addRadio({path:"legend.displayMode",name:"Legend mode",category:["Legend"],description:"",defaultValue:d.jK.List,settings:{options:[{value:d.jK.List,label:"List"},{value:d.jK.Table,label:"Table"},{value:d.jK.Hidden,label:"Hidden"}]}}).addRadio({path:"legend.placement",name:"Legend placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:e=>e.legend.displayMode!==d.jK.Hidden}),t&&e.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Legend values",category:["Legend"],description:"Select values or calculations to show in legend",editor:c.standardEditorsRegistry.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:e=>e.legend.displayMode!==d.jK.Hidden})}function y(e,t=!1){const s=t?[{value:"single",label:"Single"},{value:"none",label:"Hidden"}]:[{value:"single",label:"Single"},{value:"multi",label:"All"},{value:"none",label:"Hidden"}];e.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:["Tooltip"],description:"",defaultValue:"single",settings:{options:s}})}function w(e,t=!0){t&&e.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),e.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}var j;const k=({value:e,context:t,onChange:s,item:a})=>(0,u.jsxs)(n.LhK,{children:[(0,u.jsx)(n.SYO,{value:(null==e?void 0:e.mode)||d.o0.None,options:a.settings.options,onChange:t=>{s(Object.assign({},e,{mode:t}))}}),t.isOverride&&(null==e?void 0:e.mode)&&(null==e?void 0:e.mode)!==d.o0.None&&(0,u.jsx)(n.IIB,{type:"text",placeholder:"Group",suffix:j||(j=(0,u.jsx)(n.ua7,{content:"Name of the stacking group",placement:"top",children:(0,u.jsx)(n.hU,{name:"question-circle"})})),defaultValue:null==e?void 0:e.group,onChange:t=>{s(Object.assign({},e,{group:t.currentTarget.value.trim()}))}})]});function S(e,t,s=["Graph styles"]){e.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:s,defaultValue:t,editor:k,override:k,settings:{options:n.qVi.stacking},process:c.identityOverrideProcessor,shouldApply:e=>e.type===c.FieldType.number})}var C,T=s("./packages/grafana-ui/src/slate-plugins/index.ts"),N=s("./packages/grafana-ui/src/components/Switch/Switch.tsx"),O=s("./packages/grafana-ui/src/components/Button/Button.tsx"),I=s("./packages/grafana-ui/src/components/Modal/Modal.tsx"),P=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),M=s("./packages/grafana-ui/src/components/Input/Input.tsx"),F=s("./node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),A=s("./packages/grafana-ui/src/components/Icon/Icon.tsx"),D=s("./packages/grafana-ui/src/components/ColorPicker/ColorPicker.tsx"),$=s("./packages/grafana-ui/src/components/Button/index.ts"),L=s("./packages/grafana-ui/src/components/Layout/Layout.tsx"),E=s("./packages/grafana-ui/src/components/IconButton/IconButton.tsx"),R=s("./packages/grafana-ui/src/themes/ThemeContext.tsx"),_=s("./packages/grafana-ui/src/components/Select/Select.tsx");function V({mapping:e,index:t,onChange:s,onRemove:a,onDuplicate:n}){var i;const{key:r,result:o}=e,d=(0,R.wW)(B),p=(0,l.useRef)(null),h=(0,l.useCallback)((a=>{const n=Object.assign({},e,{result:Object.assign({},e.result)});a(n),s(t,n)}),[e,t,s]);(0,l.useEffect)((()=>{p.current&&e.isNew&&(p.current.focus(),h((e=>{e.isNew=!1})))}),[e,p,h]);const g=e=>{h((t=>{t.result.color=e}))},m=()=>{h((e=>{e.result.color=void 0}))},f=e=>{h((t=>{t.key=e.currentTarget.value}))},b=e=>{h((t=>{t.result.text=e.currentTarget.value}))},v=e=>{h((t=>{t.from=parseFloat(e.currentTarget.value)}))},x=e=>{h((t=>{t.to=parseFloat(e.currentTarget.value)}))},y=e=>{h((t=>{t.pattern=e.currentTarget.value}))},w=e=>{h((t=>{t.specialMatch=e.value}))},j=[{label:"Null",value:c.SpecialValueMatch.Null,description:"Matches null and undefined values"},{label:"NaN",value:c.SpecialValueMatch.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:c.SpecialValueMatch.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:c.SpecialValueMatch.True,description:"Boolean true values"},{label:"False",value:c.SpecialValueMatch.False,description:"Boolean false values"},{label:"Empty",value:c.SpecialValueMatch.Empty,description:"Empty string"}];return(0,u.jsx)(F._l,{draggableId:`mapping-${t}`,index:t,children:s=>{var l,h,k,S;return(0,u.jsxs)("tr",Object.assign({ref:s.innerRef},s.draggableProps,{children:[(0,u.jsx)("td",{children:(0,u.jsx)("div",Object.assign({},s.dragHandleProps,{className:d.dragHandle,children:C||(C=(0,u.jsx)(A.J,{name:"draggabledots",size:"lg"}))}))}),(0,u.jsx)("td",{className:d.typeColumn,children:e.type}),(0,u.jsxs)("td",{children:[e.type===c.MappingType.ValueToText&&(0,u.jsx)(M.I,{ref:p,type:"text",value:null!=r?r:"",onChange:f,placeholder:"Exact value to match"}),e.type===c.MappingType.RangeToText&&(0,u.jsxs)("div",{className:d.rangeInputWrapper,children:[(0,u.jsx)(M.I,{type:"number",value:null!==(l=e.from)&&void 0!==l?l:"",placeholder:"Range start",onChange:v,prefix:"From"}),(0,u.jsx)(M.I,{type:"number",value:null!==(h=e.to)&&void 0!==h?h:"",placeholder:"Range end",onChange:x,prefix:"To"})]}),e.type===c.MappingType.RegexToText&&(0,u.jsx)(M.I,{type:"text",value:null!==(k=e.pattern)&&void 0!==k?k:"",placeholder:"Regular expression",onChange:y}),e.type===c.MappingType.SpecialValue&&(0,u.jsx)(_.Ph,{menuShouldPortal:!0,value:j.find((t=>t.value===e.specialMatch)),options:j,onChange:w})]}),(0,u.jsx)("td",{children:(0,u.jsx)(M.I,{type:"text",value:null!==(S=o.text)&&void 0!==S?S:"",onChange:b,placeholder:"Optional display text"})}),(0,u.jsxs)("td",{className:d.textAlignCenter,children:[o.color&&(0,u.jsxs)(L.Lh,{spacing:"sm",justify:"center",children:[(0,u.jsx)(D.zH,{color:o.color,onChange:g,enableNamedColors:!0}),i||(i=(0,u.jsx)(E.h,{name:"times",onClick:m,tooltip:"Remove color",tooltipPlacement:"top"}))]}),!o.color&&(0,u.jsx)(D.zH,{color:"gray",onChange:g,enableNamedColors:!0,children:e=>(0,u.jsx)($.Qj,{variant:"primary",fill:"text",onClick:e.showColorPicker,ref:e.ref,size:"sm",children:"Set color"})})]}),(0,u.jsx)("td",{className:d.textAlignCenter,children:(0,u.jsxs)(L.Lh,{spacing:"sm",children:[(0,u.jsx)(E.h,{name:"copy",onClick:()=>n(t),"data-testid":"duplicate-value-mapping"}),(0,u.jsx)(E.h,{name:"trash-alt",onClick:()=>a(t),"data-testid":"remove-value-mapping"})]})})]}))}})}const B=e=>({dragHandle:(0,P.css)({cursor:"grab"}),rangeInputWrapper:(0,P.css)({display:"flex","> div:first-child":{marginRight:e.spacing(2)}}),regexInputWrapper:(0,P.css)({display:"flex","> div:first-child":{marginRight:e.spacing(2)}}),typeColumn:(0,P.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,P.css)({textAlign:"center"})});var z=s("./packages/grafana-ui/src/components/ValuePicker/ValuePicker.tsx");function U({value:e,onChange:t,onClose:s}){const a=(0,o.wW)(q),[n,i]=(0,l.useState)([]);(0,l.useEffect)((()=>{i(G(e))}),[e]);const r=(e,t)=>{const s=[...n];s.splice(e,1,t),i(s)},d=e=>{const t=[...n];t.splice(e,1),i(t)},p=[{label:"Value",value:c.MappingType.ValueToText,description:"Match a specific text value"},{label:"Range",value:c.MappingType.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:c.MappingType.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:c.MappingType.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],h=e=>{const t=n[e],s=[...n];s.splice(e,0,Object.assign({},t));for(let t=e;t<n.length;t++)s[t].result.index=t;i(s)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("table",{className:a.editTable,children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{style:{width:"1%"}}),(0,u.jsx)("th",{style:{width:"40%",textAlign:"left"},colSpan:2,children:"Condition"}),(0,u.jsx)("th",{style:{textAlign:"left"},children:"Display text"}),(0,u.jsx)("th",{style:{width:"10%"},children:"Color"}),(0,u.jsx)("th",{style:{width:"1%"}})]})}),(0,u.jsx)(F.Z5,{onDragEnd:t=>{if(!e||!t.destination)return;const s=[...n],a=s[t.source.index];s.splice(t.source.index,1),s.splice(t.destination.index,0,a),i(s)},children:(0,u.jsx)(F.bK,{droppableId:"sortable-field-mappings",direction:"vertical",children:e=>(0,u.jsxs)("tbody",Object.assign({ref:e.innerRef},e.droppableProps,{children:[n.map(((e,t)=>(0,u.jsx)(V,{mapping:e,index:t,onChange:r,onRemove:d,onDuplicate:h},t.toString()))),e.placeholder]}))})})]}),(0,u.jsx)(z.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",isFullWidth:!1,options:p,onChange:e=>{i([...n,{type:e.value,isNew:!0,result:{}}])}}),(0,u.jsxs)(I.u.ButtonRow,{children:[(0,u.jsx)(O.zx,{variant:"secondary",fill:"outline",onClick:s,children:"Cancel"}),(0,u.jsx)(O.zx,{variant:"primary",onClick:()=>{t(H(n)),s()},children:"Update"})]})]})}const q=e=>({editTable:(0,P.css)({width:"100%",marginBottom:e.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:e.colors.action.hover}," th, td":{padding:e.spacing(1)}})});function H(e){const t=[],s={type:c.MappingType.ValueToText,options:{}};return e.forEach(((e,a)=>{const n=Object.assign({},e.result,{index:a});switch(n.text&&0!==n.text.trim().length||(n.text=void 0),e.type){case c.MappingType.ValueToText:null!=e.key&&(s.options[e.key]=n);break;case c.MappingType.RangeToText:null!=e.from&&null!=e.to&&t.push({type:e.type,options:{from:e.from,to:e.to,result:n}});break;case c.MappingType.RegexToText:null!=e.pattern&&t.push({type:e.type,options:{pattern:e.pattern,result:n}});break;case c.MappingType.SpecialValue:t.push({type:e.type,options:{match:e.specialMatch,result:n}})}})),Object.keys(s.options).length>0&&t.unshift(s),t}function G(e){var t,s,a;const n=[];for(const i of e)switch(i.type){case c.MappingType.ValueToText:for(const e of Object.keys(i.options))n.push({type:i.type,result:i.options[e],key:e});break;case c.MappingType.RangeToText:n.push({type:i.type,result:i.options.result,from:null!==(t=i.options.from)&&void 0!==t?t:0,to:null!==(s=i.options.to)&&void 0!==s?s:0});break;case c.MappingType.RegexToText:n.push({type:i.type,result:i.options.result,pattern:i.options.pattern});break;case c.MappingType.SpecialValue:n.push({type:i.type,result:i.options.result,specialMatch:null!==(a=i.options.match)&&void 0!==a?a:c.SpecialValueMatch.Null})}return n.sort(((e,t)=>{var s,a;return(null!==(s=e.result.index)&&void 0!==s?s:0)>(null!==(a=t.result.index)&&void 0!==a?a:0)?1:-1})),n}var W,Z,Q;const K=l.memo((({value:e,onChange:t})=>{const s=(0,o.wW)(Y),[a,n]=(0,l.useState)(!1),i=(0,l.useCallback)((()=>{n(!1)}),[n]),r=(0,l.useMemo)((()=>G(e)),[e]),d=(0,l.useCallback)(((e,s)=>{r[s].result.color=e,t(H(r))}),[r,t]);return(0,u.jsxs)(L.wc,{children:[(0,u.jsx)("table",{className:s.compactTable,children:(0,u.jsx)("tbody",{children:r.map(((e,t)=>(0,u.jsxs)("tr",{children:[(0,u.jsxs)("td",{children:[e.type===c.MappingType.ValueToText&&e.key,e.type===c.MappingType.RangeToText&&(0,u.jsxs)("span",{children:["[",e.from," - ",e.to,"]"]}),e.type===c.MappingType.RegexToText&&e.pattern,e.type===c.MappingType.SpecialValue&&e.specialMatch]}),W||(W=(0,u.jsx)("td",{children:(0,u.jsx)(A.J,{name:"arrow-right"})})),(0,u.jsx)("td",{children:e.result.text}),(0,u.jsx)("td",{children:e.result.color&&(0,u.jsx)(D.zH,{color:e.result.color,onChange:e=>d(e,t),enableNamedColors:!0})})]},t.toString())))})}),(0,u.jsxs)(O.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>n(!0),children:[r.length>0&&(Z||(Z=(0,u.jsx)("span",{children:"Edit value mappings"}))),0===r.length&&(Q||(Q=(0,u.jsx)("span",{children:"Add value mappings"})))]}),(0,u.jsx)(I.u,{isOpen:a,title:"Value mappings",onDismiss:i,className:s.modal,closeOnBackdropClick:!1,children:(0,u.jsx)(U,{value:e,onChange:t,onClose:i})})]})}));K.displayName="ValueMappingsEditor";const Y=e=>({modal:(0,P.css)({width:"980px"}),compactTable:(0,P.css)({width:"100%","tbody td":{padding:e.spacing(.5)}})});class J extends l.PureComponent{constructor(e){super(e)}render(){const{onChange:e}=this.props;let t=this.props.value;return t||(t=[]),(0,u.jsx)(K,{value:t,onChange:e})}}var X=s("./packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx"),ee=s("./packages/grafana-ui/src/components/Forms/Label.tsx");const te=["key"];var se;function ae(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ne=[{value:c.ThresholdsMode.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:c.ThresholdsMode.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class ie extends l.PureComponent{constructor(e){super(e),ae(this,"latestThresholdInputRef",void 0),ae(this,"onAddThreshold",(()=>{const{steps:e}=this.state;let t=0;e.length>1&&(t=e[e.length-1].value+10);let s=r.O9.filter((t=>!e.some((e=>e.color===t))))[1];s||(s="#CCCCCC");const a={value:t,color:s,key:re++},n=[...e,a];(0,c.sortThresholds)(n),this.setState({steps:n},(()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()}))})),ae(this,"onRemoveThreshold",(e=>{const{steps:t}=this.state;t.length&&e.key!==t[0].key&&this.setState({steps:t.filter((t=>t.key!==e.key))},this.onChange)})),ae(this,"onChangeThresholdValue",((e,t)=>{const s=e.target.value.replace(/,/g,"."),a=parseFloat(s),n=isNaN(a)?"":a,i=this.state.steps.map((e=>(e.key===t.key&&(e=Object.assign({},e,{value:n})),e)));i.length&&(i[0].value=-1/0),(0,c.sortThresholds)(i),this.setState({steps:i})})),ae(this,"onChangeThresholdColor",((e,t)=>{const{steps:s}=this.state,a=s.map((s=>(s.key===e.key&&(s=Object.assign({},s,{color:t})),s)));this.setState({steps:a},this.onChange)})),ae(this,"onBlur",(()=>{const e=[...this.state.steps];(0,c.sortThresholds)(e),this.setState({steps:e},this.onChange)})),ae(this,"onChange",(()=>{var e,t,s;this.props.onChange((e=this.props.thresholds,t=this.state.steps,{mode:null!==(s=e.mode)&&void 0!==s?s:c.ThresholdsMode.Absolute,steps:t.map((e=>function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,te)))}))})),ae(this,"onModeChanged",(e=>{this.props.onChange(Object.assign({},this.props.thresholds,{mode:e}))}));const t=function(e){e&&0!==e.length||(e=[{value:-1/0,color:"green"}]);return e.filter(((e,t)=>(0,f.isNumber)(e.value)||0===t)).map((e=>({color:e.color,value:null===e.value?-1/0:e.value,key:re++})))}(e.thresholds.steps);t[0].value=-1/0,this.state={steps:t},this.latestThresholdInputRef=l.createRef()}renderInput(e,t,s){const a=this.props.thresholds.mode===c.ThresholdsMode.Percentage;return isFinite(e.value)?(0,u.jsx)(M.I,{type:"number",step:"0.0001",onChange:t=>this.onChangeThresholdValue(t,e),value:e.value,ref:0===s?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:(0,u.jsxs)("div",{className:t.inputPrefix,children:[(0,u.jsx)("div",{className:t.colorPicker,children:(0,u.jsx)(D.zH,{color:e.color,onChange:t=>this.onChangeThresholdColor(e,t),enableNamedColors:!0})}),a&&(0,u.jsx)("div",{className:t.percentIcon,children:"%"})]}),suffix:(0,u.jsx)(A.J,{className:t.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(e)})},a.toString()):(0,u.jsx)(M.I,{type:"text",value:"Base",disabled:!0,prefix:(0,u.jsx)("div",{className:t.colorPicker,children:(0,u.jsx)(D.zH,{color:e.color,onChange:t=>this.onChangeThresholdColor(e,t),enableNamedColors:!0})})})}render(){const{thresholds:e}=this.props,{steps:t}=this.state;return(0,u.jsx)(R.Ni.Consumer,{children:s=>{const a=oe(s.v1);return(0,u.jsxs)("div",{className:a.wrapper,children:[(0,u.jsx)($.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:a.addButton,fullWidth:!0,children:"Add threshold"}),(0,u.jsx)("div",{className:a.thresholds,children:t.slice(0).reverse().map(((e,t)=>(0,u.jsx)("div",{className:a.item,children:this.renderInput(e,a,t)},`${e.key}`)))}),(0,u.jsxs)("div",{children:[se||(se=(0,u.jsx)(ee._,{description:"Percentage means thresholds relative to min & max",children:"Thresholds mode"})),(0,u.jsx)(X.S,{options:ne,onChange:this.onModeChanged,value:e.mode})]})]})}})}}let re=100;const oe=(0,o.Bb)((e=>({wrapper:P.css`
        display: flex;
        flex-direction: column;
      `,thresholds:P.css`
        display: flex;
        flex-direction: column;
        margin-bottom: ${2*e.spacing.formSpacingBase}px;
      `,item:P.css`
        margin-bottom: ${e.spacing.sm};

        &:last-child {
          margin-bottom: 0;
        }
      `,colorPicker:P.css`
        padding: 0 ${e.spacing.sm};
      `,addButton:P.css`
        margin-bottom: ${e.spacing.sm};
      `,percentIcon:P.css`
        font-size: ${e.typography.size.sm};
        color: ${e.colors.textWeak};
      `,inputPrefix:P.css`
        display: flex;
        align-items: center;
      `,trashIcon:P.css`
        color: ${e.colors.textWeak};
        cursor: pointer;

        &:hover {
          color: ${e.colors.text};
        }
      `})));class le extends l.PureComponent{constructor(e){super(e)}render(){const{onChange:e}=this.props;let t=this.props.value;return t||(t={mode:c.ThresholdsMode.Percentage,steps:[]}),(0,u.jsx)(ie,{thresholds:t,onChange:e})}}var ce=s("./packages/grafana-ui/src/components/UnitPicker/UnitPicker.tsx");const de=({value:e,onChange:t})=>(0,u.jsx)(ce.n,{value:e,onChange:t});var ue=s("./packages/grafana-ui/src/components/DataLinks/DataLinksInlineEditor/DataLinksInlineEditor.tsx");const pe=({value:e,onChange:t,context:s})=>(0,u.jsx)(ue.d,{links:e,onChange:t,data:s.data,getSuggestions:()=>s.getSuggestions?s.getSuggestions(c.VariableSuggestionsScope.Values):[]});var he=s("./packages/grafana-ui/src/components/OptionsUI/color.tsx"),ge=s("./packages/grafana-ui/src/components/Forms/Field.tsx");const me=({value:e,onChange:t,item:s})=>{var a,n,i,r;const o=(0,R.l4)(),l=(0,R.wW)(be),d=(0,c.getFieldColorMode)(null==e?void 0:e.mode),p=(null!==(a=s.settings)&&void 0!==a&&a.byValueSupport?c.fieldColorModeRegistry.list():c.fieldColorModeRegistry.list().filter((e=>!e.isByValue))).map((e=>{var t;let s=e.isByValue?" (by value)":"";return{value:e.id,label:`${e.name}${s}`,description:e.description,isContinuous:e.isContinuous,isByValue:e.isByValue,component:()=>t||(t=(0,u.jsx)(fe,{mode:e,theme:o}))}})),h=s=>{t(Object.assign({},e,{mode:s.value}))},g=s=>{t(Object.assign({},e,{mode:f,fixedColor:s}))},m=s=>{t(Object.assign({},e,{mode:f,seriesBy:s}))},f=null!==(n=null==e?void 0:e.mode)&&void 0!==n?n:c.FieldColorModeId.Thresholds;if(f===c.FieldColorModeId.Fixed)return(0,u.jsxs)("div",{className:l.group,children:[(0,u.jsx)(_.Ph,{menuShouldPortal:!0,minMenuHeight:200,options:p,value:f,onChange:h,className:l.select}),(0,u.jsx)(he.B,{value:null==e?void 0:e.fixedColor,onChange:g})]});if(null!==(i=s.settings)&&void 0!==i&&i.bySeriesSupport&&d.isByValue){var b;const t=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{style:{marginBottom:o.spacing(2)},children:r||(r=(0,u.jsx)(_.Ph,{menuShouldPortal:!0,minMenuHeight:200,options:p,value:f,onChange:h}))}),(0,u.jsx)(ge.g,{label:"Color series by",children:(0,u.jsx)(X.S,{value:null!==(b=null==e?void 0:e.seriesBy)&&void 0!==b?b:"last",options:t,onChange:m})})]})}return(0,u.jsx)(_.Ph,{menuShouldPortal:!0,minMenuHeight:200,options:p,value:f,onChange:h})},fe=({mode:e,theme:t})=>{if(!e.getColors)return null;const s=e.getColors(t).map(t.visualization.getColorByName),a={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(e.isContinuous)a.background=`linear-gradient(90deg, ${s.join(",")})`;else{let e="",t="";for(let a=0;a<s.length;a++){const n=s[a];if(""===e)e=`linear-gradient(90deg, ${n} 0%`;else{const i=100*(a/(s.length-1));e+=`, ${t} ${i}%, ${n} ${i}%`}t=n}a.background=e}return(0,u.jsx)("div",{style:a})},be=e=>({group:P.css`
      display: flex;
    `,select:P.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var ve=s("./packages/grafana-ui/src/components/StatsPicker/StatsPicker.tsx");const xe=({value:e,onChange:t,item:s})=>{var a,n;return(0,u.jsx)(ve.m,{stats:e,onChange:t,allowMultiple:!(null===(a=s.settings)||void 0===a||!a.allowMultiple),defaultStat:null===(n=s.settings)||void 0===n?void 0:n.defaultStat})};var ye=s("./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx");const we=()=>{const e=["Standard options"],t={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:c.standardEditorsRegistry.get("text").editor,override:c.standardEditorsRegistry.get("text").editor,process:c.displayNameOverrideProcessor,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:e},s={id:"unit",path:"unit",name:"Unit",description:"",editor:c.standardEditorsRegistry.get("unit").editor,override:c.standardEditorsRegistry.get("unit").editor,process:c.stringOverrideProcessor,settings:{placeholder:"none"},shouldApply:()=>!0,category:e},a={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:c.standardEditorsRegistry.get("number").editor,override:c.standardEditorsRegistry.get("number").editor,process:c.numberOverrideProcessor,settings:{placeholder:"auto"},shouldApply:e=>e.type===c.FieldType.number,category:e},n={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:c.standardEditorsRegistry.get("number").editor,override:c.standardEditorsRegistry.get("number").editor,process:c.numberOverrideProcessor,settings:{placeholder:"auto"},shouldApply:e=>e.type===c.FieldType.number,category:e},i={id:"decimals",path:"decimals",name:"Decimals",editor:c.standardEditorsRegistry.get("number").editor,override:c.standardEditorsRegistry.get("number").editor,process:c.numberOverrideProcessor,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:e=>e.type===c.FieldType.number,category:e},r={id:"thresholds",path:"thresholds",name:"Thresholds",editor:c.standardEditorsRegistry.get("thresholds").editor,override:c.standardEditorsRegistry.get("thresholds").editor,process:c.thresholdsOverrideProcessor,settings:{},defaultValue:{mode:c.ThresholdsMode.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:e=>e?e.steps.length:0},o={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:c.standardEditorsRegistry.get("mappings").editor,override:c.standardEditorsRegistry.get("mappings").editor,process:c.valueMappingsOverrideProcessor,settings:{},defaultValue:[],shouldApply:()=>!0,category:["Value mappings"],getItemsCount:e=>e?e.length:0},l={id:"noValue",path:"noValue",name:"No Value",description:"What to show when there is no value",editor:c.standardEditorsRegistry.get("text").editor,override:c.standardEditorsRegistry.get("text").editor,process:c.stringOverrideProcessor,settings:{placeholder:"-"},shouldApply:()=>!0,category:e},d={id:"links",path:"links",name:"Data links",editor:c.standardEditorsRegistry.get("links").editor,override:c.standardEditorsRegistry.get("links").editor,process:c.dataLinksOverrideProcessor,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:e=>e?e.length:0};return[s,a,n,i,t,{id:"color",path:"color",name:"Color scheme",editor:c.standardEditorsRegistry.get("fieldColor").editor,override:c.standardEditorsRegistry.get("fieldColor").editor,process:c.identityOverrideProcessor,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:e},l,r,o,d]},je=()=>{const e={id:"number",name:"Number",description:"Allows numeric values input",editor:n.wYs},t={id:"slider",name:"Slider",description:"Allows numeric values input",editor:n.pn$},s={id:"text",name:"Text",description:"Allows string values input",editor:n.Ai9},a={id:"strings",name:"String array",description:"An array of strings",editor:n.gQx},i={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor:e=>(0,u.jsx)(N.r,Object.assign({},e,{onChange:t=>e.onChange(t.currentTarget.checked)}))},r={id:"select",name:"Select",description:"Allows option selection",editor:n.Y3l},o={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:n.Ytm},l={id:"color",name:"Color",description:"Allows color selection",editor:e=>(0,u.jsx)(he.B,{value:e.value,onChange:e.onChange})},c={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:me};return[s,e,t,i,{id:"radio",name:"Radio",description:"Allows option selection",editor(e){var t;return(0,u.jsx)(n.SYO,Object.assign({},e,{options:null===(t=e.item.settings)||void 0===t?void 0:t.options}))}},r,{id:"unit",name:"Unit",description:"Allows unit input",editor:de},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:J},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:le},{id:"links",name:"Links",description:"Allows defining data links",editor:pe},{id:"stats-picker",name:"Stats Picker",editor:xe,description:""},a,{id:"timezone",name:"Time Zone",description:"Time zone selection",editor:n.OkK},c,l,o,{id:"field-name",name:"Field name",description:"Time zone selection",editor:ye.b}]}},"./packages/grafana-ui/src/slate-plugins/index.ts":(e,t,s)=>{"use strict";s.d(t,{hP:()=>i,Gp:()=>r,wl:()=>l,Rc:()=>f,z2:()=>b,dv:()=>v,$L:()=>y,Ze:()=>j.Z,bm:()=>J,WU:()=>j.Token});var a=s("./node_modules/uuid/dist/esm-browser/v4.js");const n={"[":"]","{":"}","(":")"};function i(){return{onKeyDown(e,t,s){const i=e,{value:r}=t;switch(i.key){case"(":case"{":case"[":{const{start:{offset:e,key:s},end:{offset:o,key:l},focus:{offset:c}}=r.selection,d=r.focusText.text;if(r.selection.isExpanded)return i.preventDefault(),t.insertTextByKey(s,e,i.key).insertTextByKey(l,o+1,n[i.key]).moveEndBackward(1),!0;if(c===d.length||" "===d[c]||Object.values(n).includes(d[c])){i.preventDefault();const r=n[i.key],c={key:`brace_match-${(0,a.Z)()}`,type:`brace_match-${r}`,anchor:{key:s,offset:e,object:"point"},focus:{key:l,offset:o+1,object:"point"},object:"annotation"};return t.insertText(i.key).insertText(r).addAnnotation(c).moveBackward(1),!0}break}case")":case"}":case"]":{const e=r.anchorText.text[r.selection.anchor.offset],s=i.key,a=`brace_match-${s}`,n=r.annotations.find((e=>(null==e?void 0:e.type)===a&&e.anchor.key===r.anchorText.key));if(n&&e===s&&!r.selection.isExpanded)return i.preventDefault(),t.moveFocusForward(1).removeAnnotation(n).moveAnchorForward(1),!0;break}case"Backspace":{const e=r.anchorText.text,s=r.selection.anchor.offset,a=e[s-1],o=e[s];if(n[a]&&n[a]===o)return i.preventDefault(),t.deleteBackward(1).deleteForward(1).focus(),!0}}return s()}}}function r(){return{onKeyDown(e,t,s){const a=e,n=t.value;if(n.selection.isExpanded)return s();if("k"===a.key&&a.ctrlKey){a.preventDefault();const e=n.anchorText.text,s=n.selection.anchor.offset,i=e.length-s;return t.deleteForward(i),!0}return s()}}}const o=e=>null==e?void 0:e.replace(/[\uFEFF]/g,"");function l(){const e={onCopy(e,t,s){const a=e;a.preventDefault();const{document:n,selection:i}=t.value,{start:{offset:r},end:{offset:l}}=i,c=n.getLeafBlocksAtRange(i).toArray().map((e=>e.text)),d=o(((e,t,s)=>{if(!e.length)return;const a=e.slice(0,-1).join("").length+e.length-1;return e.join("\n").slice(t,a+s)})(c,r,l));return d&&a.clipboardData&&a.clipboardData.setData("Text",d),!0},onPaste(e,t,s){const a=e;if(a.preventDefault(),a.clipboardData){const e=o(a.clipboardData.getData("Text")),s=null==e?void 0:e.split("\n");if(s&&s.length){t.insertText(s[0]);for(const e of s.slice(1))t.splitBlock().insertText(e)}}return!0}};return Object.assign({},e,{onCut(t,s,a){const n=t;return e.onCopy(n,s,a),s.deleteAtRange(s.value.selection),!0}})}var c=s("./node_modules/slate/lib/slate.es.js"),d=s("./node_modules/is-hotkey/lib/index.js");const u=(0,d.TB)("mod+["),p=(0,d.TB)("shift+tab"),h=(0,d.TB)("mod+]"),g="  ",m=(e,t)=>{const s=e.value.selection,a=e.value.document.getLeafBlocksAtRange(s).toArray();if("left"===t)for(const t of a){const s=t.text.length-t.text.trimLeft().length,a=t.getFirstText().key,n={anchor:{key:a,offset:s,path:[]},focus:{key:a,offset:s,path:[]}};e.deleteBackwardAtRange(c.e6.create(n),Math.min(g.length,s))}else{const{startText:t}=e.value,n=t.text.slice(0,s.start.offset),i=/^\s*$/.test(n);for(const t of a)e.insertTextByKey(t.getFirstText().key,0,g);i&&e.moveStartBackward(g.length)}};function f(){return{onKeyDown(e,t,s){const a=e;if(u(a)||p(a))a.preventDefault(),m(t,"left");else if(h(a))a.preventDefault(),m(t,"right");else{if("Tab"!==a.key)return s();a.preventDefault(),((e,t,s)=>{const{startBlock:a,endBlock:n,selection:{start:{offset:i,key:r},end:{offset:o,key:l}}}=t.value,c=a.getFirstText();c&&0===i&&r===c.key&&o===c.text.length&&l===c.key||!a.equals(n)?m(t,"right"):t.insertText(g)})(0,t)}return!0}}}function b(){return{onKeyDown(e,t,s){const a=e,n=t.value;if(n.selection.isExpanded)return s();if("Enter"===a.key){a.preventDefault();const{startBlock:e}=n,s=function(e){let t=e.length-e.trimLeft().length;if(t){let s=e[0];for(;--t;)s+=e[0];return s}return""}(e.text);return t.splitBlock().insertText(s).focus()}return s()}}}function v({handler:e}){return{onKeyDown(t,s,a){const n=t;return e&&"Enter"===n.key&&(n.shiftKey||n.ctrlKey)?(n.preventDefault(),e(n),s):a()}}}const x=(0,d.TB)("mod+l");function y(){return{onKeyDown(e,t,s){const a=e;if(!x(a))return s();{a.preventDefault();const{focusBlock:e,document:s}=t.value;t.moveAnchorToStartOfBlock();s.getNextBlock(e.key)?t.moveFocusToStartOfNextBlock():t.moveFocusToEndOfText()}return!0}}}var w,j=s("./packages/grafana-ui/src/slate-plugins/slate-prism/index.ts"),k=s("./node_modules/react/index.js"),S=s("./node_modules/lodash/lodash.js"),C=s("./packages/grafana-ui/src/slate-plugins/slate-prism/TOKEN_MARK.ts"),T=s("./node_modules/react-dom/index.js"),N=s("./node_modules/react-window/dist/index.esm.js"),O=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),I=s("./packages/grafana-data/src/index.ts"),P=s("./packages/grafana-ui/src/themes/ThemeContext.tsx"),M=s("./node_modules/react/jsx-runtime.js");const F=({item:e,height:t})=>{const s=e&&!!e.documentation,a=e?e.label:"",n=(0,I.renderMarkdown)(null==e?void 0:e.documentation),i=((e,t,s)=>({typeaheadItem:O.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.md};
      border-radius: ${e.border.radius.md};
      border: ${e.colors.border2};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${e.colors.bg2};
      color: ${e.colors.text};
      box-shadow: 0 0 20px ${e.colors.dropdownShadow};
      visibility: ${!0===s?"visible":"hidden"};
      width: 250px;
      height: ${t+parseInt(e.spacing.xxs,10)}px;
      position: relative;
      word-break: break-word;
    `}))((0,P.Fg)(),t,s);return(0,M.jsxs)("div",{className:(0,O.cx)([i.typeaheadItem]),children:[(0,M.jsx)("b",{children:a}),w||(w=(0,M.jsx)("hr",{})),(0,M.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})]})};var A=s("./node_modules/react-highlight-words/dist/main.js"),D=s.n(A),$=s("./packages/grafana-ui/src/types/completion.ts"),L=s("./packages/grafana-ui/src/components/Typeahead/PartialHighlighter.tsx");const E=e=>({typeaheadItem:O.css`
    label: type-ahead-item;
    height: auto;
    font-family: ${e.typography.fontFamily.monospace};
    padding: ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.md};
    font-size: ${e.typography.size.sm};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:O.css`
    label: type-ahead-item-selected;
    background-color: ${e.colors.bg2};
  `,typeaheadItemMatch:O.css`
    label: type-ahead-item-match;
    color: ${e.palette.yellow};
    border-bottom: 1px solid ${e.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:O.css`
    label: type-ahead-item-group-title;
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
    line-height: ${e.typography.lineHeight.md};
    padding: ${e.spacing.sm};
  `}),R=e=>{const t=(0,P.yK)(E),{isSelected:s,item:a,prefix:n,style:i,onMouseEnter:r,onMouseLeave:o,onClickItem:l}=e,c=s?(0,O.cx)([t.typeaheadItem,t.typeaheadItemSelected]):(0,O.cx)([t.typeaheadItem]),d=(0,O.cx)([t.typeaheadItemMatch]),u=(0,O.cx)([t.typeaheadItemGroupTitle]),p=a.label||"";return a.kind===$.c.GroupTitle?(0,M.jsx)("li",{className:u,style:i,children:(0,M.jsx)("span",{children:p})}):(0,M.jsx)("li",{className:c,style:i,onMouseDown:l,onMouseEnter:r,onMouseLeave:o,children:void 0!==a.highlightParts?(0,M.jsx)(L.H,{text:p,highlightClassName:d,highlightParts:a.highlightParts}):(0,M.jsx)(D(),{textToHighlight:p,searchWords:[null!=n?n:""],highlightClassName:d})})};var _=s("./node_modules/calculate-size/lib/index.js");const V=e=>e.reduce(((e,{items:t,label:s})=>(e.push({label:s,kind:$.c.GroupTitle}),t.reduce(((e,t)=>(e.push(t),e)),e))),[]),B=e=>e.reduce(((e,t)=>e.length<t.label.length?t.label:e),""),z=(e,t,s)=>{const a=(0,_.Z)(s,{font:e.typography.fontFamily.monospace,fontSize:e.typography.size.sm,fontWeight:"normal"}),n=q(a.width,e),i=U(a.height,e);return{listWidth:n,listHeight:H(i,t),itemHeight:i}},U=(e,t)=>e+2*parseInt(t.spacing.sm,10),q=(e,t)=>{const s=parseInt(t.spacing.sm,10)+parseInt(t.spacing.md,10);return Math.min(Math.max(e+s,200),800)},H=(e,t)=>{const s=Math.min(t.length,10)*e;return Math.max(s,100)};function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const W=(e,t)=>e-t*Math.floor(e/t);class Z extends k.PureComponent{constructor(...e){super(...e),G(this,"context",void 0),G(this,"listRef",(0,k.createRef)()),G(this,"state",{hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1}),G(this,"componentDidMount",(()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const e=V(this.props.groupedItems),t=B(e),{listWidth:s,listHeight:a,itemHeight:n}=z(this.context.v1,e,t);this.setState({listWidth:s,listHeight:a,itemHeight:n,allItems:e})})),G(this,"componentWillUnmount",(()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)})),G(this,"handleSelectionChange",(()=>{this.forceUpdate()})),G(this,"componentDidUpdate",((e,t)=>{if(null!==this.state.typeaheadIndex&&t.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(1===this.state.typeaheadIndex)return void this.listRef.current.scrollToItem(0);this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if(!1===(0,S.isEqual)(e.groupedItems,this.props.groupedItems)){const e=V(this.props.groupedItems),t=B(e),{listWidth:s,listHeight:a,itemHeight:n}=z(this.context.v1,e,t);this.setState({listWidth:s,listHeight:a,itemHeight:n,allItems:e,typeaheadIndex:null})}})),G(this,"onMouseEnter",(e=>{this.setState({hoveredItem:e})})),G(this,"onMouseLeave",(()=>{this.setState({hoveredItem:null})})),G(this,"moveMenuIndex",(e=>{const t=this.state.allItems.length;if(t){const s=this.state.typeaheadIndex||0;let a=W(s+e,t);return this.state.allItems[a].kind===$.c.GroupTitle&&(a=W(a+e,t)),void this.setState({typeaheadIndex:a})}})),G(this,"insertSuggestion",(()=>{this.props.onSelectSuggestion&&null!==this.state.typeaheadIndex&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}))}get menuPosition(){if(!window.getSelection)return"";const e=window.getSelection(),t=e&&e.anchorNode;if(t&&t.parentElement){const e=t.parentElement.getBoundingClientRect(),s=window.scrollX,a=window.scrollY;return`position: absolute; display: flex; top: ${e.top+a+e.height+6}px; left: ${e.left+s-2}px`}return""}render(){const{prefix:e,isOpen:t=!1,origin:s}=this.props,{allItems:a,listWidth:n,listHeight:i,itemHeight:r,hoveredItem:o,typeaheadIndex:l}=this.state,c=o||l,d=a[o||(l||0)];return(0,M.jsxs)(Q,{origin:s,isOpen:t,style:this.menuPosition,children:[(0,M.jsx)("ul",{className:"typeahead",children:(0,M.jsx)(N.t7,{ref:this.listRef,itemCount:a.length,itemSize:r,itemKey:e=>{const t=a&&a[e];return t?`${e}-${t.label}`:`${e}`},width:n,height:i,children:({index:t,style:s})=>{const n=a&&a[t];return n?(0,M.jsx)(R,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(n):{},isSelected:null!==l&&a[l]===n,item:n,prefix:e,style:s,onMouseEnter:()=>this.onMouseEnter(t),onMouseLeave:this.onMouseLeave}):null}})}),c&&(0,M.jsx)(F,{height:i,item:d})]})}}G(Z,"contextType",P.Ni);class Q extends k.PureComponent{constructor(e){super(e),G(this,"node",void 0);const{index:t=0,origin:s="query",style:a}=e;this.node=document.createElement("div"),this.node.setAttribute("style",a),this.node.classList.add("slate-typeahead",`slate-typeahead-${s}-${t}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),T.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var K=s("./packages/grafana-ui/src/utils/index.ts"),Y=s("./packages/grafana-ui/src/utils/searchFunctions.ts");function J({onTypeahead:e,cleanText:t,onWillApplySuggestion:s,portalOrigin:a}){let n,i={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const r=(0,S.debounce)(X,250),o=e=>{i=Object.assign({},i,e)};return{onBlur:(e,t,s)=>(i=Object.assign({},i,{groupedItems:[]}),s()),onClick:(e,t,s)=>(i=Object.assign({},i,{groupedItems:[]}),s()),onKeyDown:(s,a,l)=>{const c=s,d=i.groupedItems.length;switch(c.key){case"Escape":if(d)return c.preventDefault(),i=Object.assign({},i,{groupedItems:[]}),a.insertText("");break;case"ArrowDown":case"ArrowUp":if(d)return c.preventDefault(),void n.moveMenuIndex("ArrowDown"===c.key?1:-1);break;case"Enter":if(!c.shiftKey&&!c.ctrlKey&&d)return c.preventDefault(),n.insertSuggestion();break;case"Tab":if(d)return c.preventDefault(),n.insertSuggestion();break;default:1===c.key.length&&r(a,o,e,t)}return l()},commands:{selectSuggestion:(s,a)=>{const n=i.groupedItems;if(!n||!n.length)return s;const l=s.applyTypeahead(a);return r(s,o,e,t),l},applyTypeahead:(e,a)=>{let n=a.insertText||a.label;const r="function"===a.kind,o=a.move||0,{typeaheadPrefix:l,typeaheadText:c,typeaheadContext:d}=i;s&&(n=s(n,{groupedItems:i.groupedItems,typeaheadContext:d,typeaheadPrefix:l,typeaheadText:c}));const u=a.deleteBackwards||l.length,p=(t?t(c):c).length-l.length,h=c.indexOf(l),g=l&&(p>0&&h>-1||n===c)&&!r?p+h:0;if(n.match(/\n/)){const t=(0,K.xl)(n);return e.deleteBackward(u).deleteForward(g).insertFragment(t).focus()}return i=Object.assign({},i,{groupedItems:[]}),e.deleteBackward(u).deleteForward(g).insertText(n).moveForward(o).focus()}},renderEditor(e,t,s){if(t.value.selection.isExpanded)return s();const r=s();return(0,M.jsxs)(M.Fragment,{children:[r,(0,M.jsx)(Z,{menuRef:e=>n=e,origin:a,prefix:i.typeaheadPrefix,isOpen:!!i.groupedItems.length,groupedItems:i.groupedItems,onSelectSuggestion:t.selectSuggestion})]})}}}const X=async(e,t,s,a)=>{if(!s)return;const{value:n}=e,{selection:i}=n,r=n.document.getClosestBlock(n.focusBlock.key),o=n.selection.start.offset-1,l=r&&r.getDecorations(e),c=l?l.filter((e=>e.start.offset<=o&&e.end.offset>o&&e.type===C.Z)).toArray():[],d=l&&l.filter((e=>e.end.offset<=o&&e.type===C.Z&&e.data.get("className").includes("label-key"))).last(),u=d&&n.focusText.text.slice(d.start.offset,d.end.offset),p=c.map((e=>e.data.get("className"))).join(" ").split(" ").filter((e=>e.length));let h=n.focusText.text,g=h.slice(0,i.focus.offset);c.length&&(h=n.focusText.text.slice(c[0].start.offset,c[0].end.offset),g=n.focusText.text.slice(c[0].start.offset,i.focus.offset));const m=g.match(/(?:!?=~?"?|")(.*)/);m?g=m[1]:a&&(g=a(g));const{suggestions:f,context:b}=await s({prefix:g,text:h,value:n,wrapperClasses:p,labelKey:u||void 0,editor:e});t({groupedItems:f.map((e=>{if(!e.items)return e;const t=e.searchFunctionType||(e.prefixMatch?K.nu.Prefix:K.nu.Word),s=Y.n[t];let a=Object.assign({},e);return g&&(e.skipFilter||(a.items=a.items.filter((e=>(e.filterText||e.label).length>=g.length)),a.items=s(a.items,g)),a.items=a.items.filter((e=>{var t;return!(e.insertText===g||(null!==(t=e.filterText)&&void 0!==t?t:e.label)===g)}))),e.skipSort||(a.items=(0,S.sortBy)(a.items,(e=>void 0===e.sortText?void 0!==e.sortValue?e.sortValue:e.label:e.sortText||e.label))),a})).filter((e=>e.items&&e.items.length)),typeaheadPrefix:g,typeaheadContext:b,typeaheadText:h}),e.blur().focus()}},"./packages/grafana-ui/src/slate-plugins/slate-prism/TOKEN_MARK.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a="prism-token"},"./packages/grafana-ui/src/slate-plugins/slate-prism/index.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>g,a:()=>b});var a=s("./node_modules/prismjs/prism.js"),n=s.n(a),i=s("./node_modules/slate/lib/slate.es.js"),r=(s("./node_modules/react/index.js"),s("./packages/grafana-ui/node_modules/immutable/dist/immutable.js")),o=s("./packages/grafana-ui/src/slate-plugins/slate-prism/TOKEN_MARK.ts"),l=s("./node_modules/react/jsx-runtime.js");function c(e){return"block"===e.object&&"code_block"===e.type}function d(e){return"javascript"}function u(e,t,s){const{decoration:a}=e;if(a.type!==o.Z)return s();const n=a.data.get("className");return(0,l.jsx)("span",{className:n,children:e.children})}class p extends((0,r.Record)({onlyIn:c,getSyntax:d,renderDecoration:u})){constructor(e){super(e)}}const h=p;function g(e={},t=n().languages){const s=new h(e);return{decorateNode:(e,a,r)=>{if(!s.onlyIn(e))return r();const o=i.gO.create(e),l=s.getSyntax(o),c=t[l];if(!c)return[];const d=o.getTexts().map((e=>e&&e.getText())).join("\n"),u=n().tokenize(d,c),p=b(u),h=a.value.data.set("tokens",p);return a.setData(h),function(e,t,s){const a=s.getTexts(),n=[];let i=0,r=0;return a.forEach((e=>{r=i+e.getText().length;let a=0;function o(t,l){if("string"==typeof t){if(l){const o=m({text:e,textStart:i,textEnd:r,start:a,end:a+t.length,className:`prism-token token ${l}`,block:s});o&&n.push(o)}a+=t.length}else if(l=`${l} ${t.type}`,t.alias&&(l+=" "+t.alias),"string"==typeof t.content){const o=m({text:e,textStart:i,textEnd:r,start:a,end:a+t.content.length,className:`prism-token token ${l}`,block:s});o&&n.push(o),a+=t.content.length}else for(let e=0;e<t.content.length;e+=1)o(t.content[e],l)}t.forEach(o),i=r+1})),n}(0,u,o)},renderDecoration:(e,t,a)=>s.renderDecoration({children:e.children,decoration:e.decoration},t,a)}}function m({text:e,textStart:t,textEnd:s,start:a,end:n,className:i,block:r}){if(a>=s||n<=t)return null;a=Math.max(a,t),n=Math.min(n,s),a-=t,n-=t;return r.createDecoration({object:"decoration",anchor:{key:e.key,offset:a,object:"point"},focus:{key:e.key,offset:n,object:"point"},type:o.Z,data:{className:i}})}function f(e){return"string"==typeof e?[{content:e,types:[],aliases:[]}]:Array.isArray(e)?e.flatMap((e=>f(e))):e instanceof n().Token?f(e.content).flatMap((t=>{let s=[];var a;"string"==typeof e.alias?s=[e.alias]:s=null!==(a=e.alias)&&void 0!==a?a:[];return{content:t.content,types:[e.type,...t.types],aliases:[...s,...t.aliases]}})):[]}function b(e){const t=f(e);if(!t.length)return[];const s=t[0];s.prev=null,s.next=t.length>=2?t[1]:null,s.offsets={start:0,end:s.content.length};for(let e=1;e<t.length-1;e++)t[e].prev=t[e-1],t[e].next=t[e+1],t[e].offsets={start:t[e-1].offsets.end,end:t[e-1].offsets.end+t[e].content.length};const a=t[t.length-1];return a.prev=t.length>=2?t[t.length-2]:null,a.next=null,a.offsets={start:t.length>=2?t[t.length-2].offsets.end:0,end:t.length>=2?t[t.length-2].offsets.end+a.content.length:a.content.length},t}},"./packages/grafana-ui/src/themes/ThemeContext.tsx":(e,t,s)=>{"use strict";s.d(t,{Ni:()=>u,Zz:()=>p,HE:()=>h,Fg:()=>g,l4:()=>m,yK:()=>f,wW:()=>b,sJ:()=>v});var a=s("./packages/grafana-data/src/index.ts"),n=s("./packages/grafana-ui/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js"),i=s.n(n),r=s("./node_modules/react/index.js"),o=s("./packages/grafana-ui/src/themes/stylesFactory.ts"),l=s("./node_modules/react/jsx-runtime.js");let c=null;const d=new WeakMap,u=r.createContext((0,a.createTheme)());u.displayName="ThemeContext";const p=e=>{const t=t=>{const s=c||u;return(0,l.jsx)(s.Consumer,{children:s=>(0,l.jsx)(e,Object.assign({},t,{theme:s.v1}))})};return t.displayName=`WithTheme(${e.displayName})`,i()(t,e),t},h=e=>{const t=t=>{const s=c||u;return(0,l.jsx)(s.Consumer,{children:s=>(0,l.jsx)(e,Object.assign({},t,{theme:s}))})};return t.displayName=`WithTheme(${e.displayName})`,i()(t,e),t};function g(){return(0,r.useContext)(c||u).v1}function m(){return(0,r.useContext)(c||u)}function f(e){const t=g();let s=d.get(e);return s||(s=(0,o.B)(e),d.set(e,s)),s(t)}function b(e){const t=m();let s=d.get(e);return s||(s=(0,o.B)(e),d.set(e,s)),s(t)}const v=e=>(c=r.createContext(e),()=>{c=null})},"./packages/grafana-ui/src/themes/index.ts":(e,t,s)=>{"use strict";s.d(t,{nz:()=>b,Ni:()=>a.Ni,gh:()=>r,Zu:()=>o,sJ:()=>a.sJ,GU:()=>d,Bb:()=>l.B,yK:()=>a.yK,wW:()=>a.wW,Fg:()=>a.Fg,l4:()=>a.l4,Zz:()=>a.Zz,HE:()=>a.HE});var a=s("./packages/grafana-ui/src/themes/ThemeContext.tsx"),n=s("./packages/grafana-data/src/index.ts");let i;const r=(e="dark")=>i?i(e):(0,n.createTheme)({colors:{mode:e}}).v1,o=e=>(i=e,()=>{i=null});var l=s("./packages/grafana-ui/src/themes/stylesFactory.ts"),c=(s("./node_modules/react/index.js"),s("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js")),d=s("./packages/grafana-ui/src/themes/mixins.ts");function u(e){return c.iv`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${e.typography.htmlFontSize}px;
      font-family: ${e.typography.fontFamily};
      line-height: ${e.typography.body.lineHeight};
      font-kerning: normal;
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${e.colors.text.primary};
      background-color: ${e.colors.background.canvas};
      ${p(e.typography.body)}
    }

    h1,
    .h1 {
      ${p(e.typography.h1)}
    }
    h2,
    .h2 {
      ${p(e.typography.h2)}
    }
    h3,
    .h3 {
      ${p(e.typography.h3)}
    }
    h4,
    .h4 {
      ${p(e.typography.h4)}
    }
    h5,
    .h5 {
      ${p(e.typography.h5)}
    }
    h6,
    .h6 {
      ${p(e.typography.h6)}
    }

    p {
      margin: 0 0 ${e.spacing(2)};
    }

    button {
      letter-spacing: ${e.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,d.getFocusStyles)(e)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${e.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${e.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${e.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${e.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${e.colors.text.primary};
    }

    .text-warning {
      color: ${e.colors.warning.text};

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${e.colors.error.text};

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${e.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,d.getFocusStyles)(e)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }
  `}function p(e){return`\n    margin: 0;\n    font-size: ${e.fontSize};    \n    line-height: ${e.lineHeight};\n    font-weight: ${e.fontWeight};\n    letter-spacing: ${e.letterSpacing};\n    font-family: ${e.fontFamily};\n    margin-bottom: 0.45em;\n  `}function h(e){return c.iv`
    .card-section {
      margin-bottom: ${e.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${e.colors.background.secondary};
      box-shadow: none;
      padding: ${e.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${e.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${e.spacing(2)};
    }

    .card-item-type {
      color: ${e.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${e.typography.size.sm};
    }

    .card-item-name {
      color: ${e.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${e.spacing(1)};
    }

    .card-item-sub-name {
      color: ${e.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${e.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${e.spacing(2)};
      font-size: ${e.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${e.typography.size.sm};
        display: inline-block;
        margin-left: ${e.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${e.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${e.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${e.typography.h3.fontSize};
      }

      ${e.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${e.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${e.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${e.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${e.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${e.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${e.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}function g(e){return c.iv`
    .panel-options-group {
      border-bottom: 1px solid ${e.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${e.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${e.colors.text.primary};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${e.colors.text.secondary};
      margin-right: ${e.spacing(1)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${e.spacing(1,2,1,4)};
    }
  `}function m(e){const t=e.breakpoints.values.xxl+2*e.spacing.gridSize+e.components.sidemenu.width;return c.iv`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
    }

    .page-scrollbar-wrapper {
      width: 100%;
      flex-grow: 1;
      width: 100%;
      min-height: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${e.spacing(2)};
      padding-right: ${e.spacing(2)};

      ${e.breakpoints.up("sm")} {
        margin: ${e.spacing(0,1)};
      }

      ${e.breakpoints.up("md")} {
        margin: ${e.spacing(0,2)};
      }

      @media (min-width: ${t}px) {
        max-width: ${e.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${e.spacing(2)};
      padding-left: ${e.spacing(2)};
      padding-right: ${e.spacing(2)};
    }

    .page-body {
      padding: ${e.spacing(1)};
      background: ${e.components.panel.background};
      border: 1px solid ${e.components.panel.borderColor};
      margin-bottom: 32px;

      ${e.breakpoints.up("md")} {
        padding: ${e.spacing(2)};
      }

      ${e.breakpoints.up("lg")} {
        padding: ${e.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${e.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${e.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${e.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button {
        margin-left: ${e.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${e.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${e.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${e.spacing(1)};
      margin-top: ${e.spacing(.5)};
    }
  `}var f=s("./node_modules/react/jsx-runtime.js");function b(){const e=(0,a.l4)();return(0,f.jsx)(c.xB,{styles:[u(e),m(e),h(e),g(e),c.iv`
    // TODO copy from _utils.scss
  `]})}},"./packages/grafana-ui/src/themes/mixins.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{cardChrome:()=>i,hoverColor:()=>r,listItem:()=>o,listItemSelected:()=>l,mediaUp:()=>c,focusCss:()=>d,getMouseFocusStyles:()=>u,getFocusStyles:()=>p,getTooltipContainerStyles:()=>h});var a=s("./node_modules/tinycolor2/tinycolor.js"),n=s.n(a);function i(e){return`\n    background: ${e.colors.background.secondary};\n    &:hover {\n      background: ${r(e.colors.background.secondary,e)};\n    }\n    box-shadow: ${e.components.panel.boxShadow};\n    border-radius: ${e.shape.borderRadius(2)};\n`}function r(e,t){return t.isDark?n()(e).brighten(2).toString():n()(e).darken(2).toString()}function o(e){return`\n  background: ${e.colors.background.secondary};\n  &:hover {\n    background: ${r(e.colors.background.secondary,e)};\n  }\n  box-shadow: ${e.components.panel.boxShadow};\n  border-radius: ${e.shape.borderRadius(2)};\n`}function l(e){return`\n    background: ${r(e.colors.background.secondary,e)};\n    color: ${e.colors.text.maxContrast};\n`}function c(e){return`only screen and (min-width: ${e})`}const d=e=>`\n  outline: 2px dotted transparent;\n  outline-offset: 2px;\n  box-shadow: 0 0 0 2px ${e.colors.bodyBg}, 0 0 0px 4px ${e.colors.formFocusOutline};\n  transition: all 0.2s cubic-bezier(0.19, 1, 0.22, 1);\n`;function u(e){return{outline:"none",boxShadow:"none"}}function p(e){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${e.colors.background.canvas}, 0 0 0px 4px ${e.colors.primary.main}`,transition:"all 0.2s cubic-bezier(0.19, 1, 0.22, 1)"}}const h=e=>`\n  overflow: hidden;\n  background: ${e.colors.background.secondary};\n  box-shadow: ${e.shadows.z2};\n  max-width: 800px;\n  padding: ${e.spacing(1)};\n  border-radius: ${e.shape.borderRadius()};\n  z-index: ${e.zIndex.tooltip};\n`},"./packages/grafana-ui/src/themes/stylesFactory.ts":(e,t,s)=>{"use strict";s.d(t,{B:()=>n});var a=s("./node_modules/memoize-one/dist/memoize-one.esm.js");function n(e){return(0,a.default)(e)}},"./packages/grafana-ui/src/types/completion.ts":(e,t,s)=>{"use strict";let a;s.d(t,{c:()=>a}),function(e){e.GroupTitle="GroupTitle"}(a||(a={}))},"./packages/grafana-ui/src/types/index.ts":(e,t,s)=>{"use strict";s.d(t,{cm:()=>a.c,nj:()=>n.FieldErrors,lD:()=>n.SubmitHandler,BI:()=>r,e7:()=>o});var a=s("./packages/grafana-ui/src/types/completion.ts"),n=s("./node_modules/react-hook-form/dist/index.esm.js"),i=s("./packages/grafana-data/src/index.ts");const r=()=>["angle-double-down","angle-double-right","angle-down","angle-left","angle-right","angle-up","apps","arrow","arrow-down","arrow-from-right","arrow-left","arrow-random","arrow-right","arrow-up","arrows-h","bars","bell","bell-slash","bolt","book","book-open","brackets-curly","bug","building","calculator-alt","calendar-alt","camera","channel-add","chart-line","check","check-circle","circle","clipboard-alt","clock-nine","cloud","cloud-download","cloud-upload","code-branch","cog","columns","comment-alt","comments-alt","compass","copy","credit-card","cube","database","document-info","download-alt","draggabledots","edit","ellipsis-v","envelope","exchange-alt","exclamation-triangle","external-link-alt","eye","eye-slash","fa fa-spinner","favorite","file-alt","file-blank","file-copy-alt","filter","folder","font","fire","folder-open","folder-plus","folder-upload","forward","gf-grid","gf-interpolation-linear","gf-interpolation-smooth","gf-interpolation-step-after","gf-interpolation-step-before","gf-landscape","gf-layout-simple","gf-logs","gf-portrait","grafana","graph-bar","heart","heart-break","history","home-alt","hourglass","import","info-circle","key-skeleton-alt","keyboard","layer-group","library-panel","line-alt","link","list-ui-alt","list-ul","lock","message","minus","minus-circle","mobile-android","monitor","palette","panel-add","pause","pen","percentage","play","plug","plus","plus-circle","plus-square","power","question-circle","repeat","rocket","save","search","search-minus","search-plus","share-alt","shield","shield-exclamation","sign-in-alt","signal","signin","signout","slack","sliders-v-alt","sort-amount-down","square-shape","star","step-backward","sync","table","tag-alt","times","toggle-on","trash-alt","unlock","upload","user","users-alt","wrap-text","x"];function o(e){if(e)switch(e.type){case i.FieldType.time:return"clock-nine";case i.FieldType.string:return"font";case i.FieldType.number:return"calculator-alt";case i.FieldType.boolean:return"toggle-on";case i.FieldType.trace:return"info-circle";case i.FieldType.other:return"brackets-curly"}return"question-circle"}},"./packages/grafana-ui/src/utils/children.ts":(e,t,s)=>{"use strict";s.d(t,{l:()=>n});var a=s("./node_modules/react/index.js");function n(e){let t;const s=a.Children.only(e);return"id"in(null==s?void 0:s.props)?t=s.props.id:"inputId"in s.props&&(t=null==s?void 0:s.props.inputId),"string"==typeof t?t:void 0}},"./packages/grafana-ui/src/utils/dataLinks.ts":(e,t,s)=>{"use strict";s.d(t,{R:()=>a});const a=e=>e().map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:""+("_self"===e.target?"link":"external-link-alt"),onClick:e.onClick})))},"./packages/grafana-ui/src/utils/fuzzy.ts":(e,t,s)=>{"use strict";s.d(t,{C:()=>n});var a=s("./node_modules/lodash/lodash.js");function n(e,t){let s=0,n=e.indexOf(t);t=t.replace(/\s/g,"");const i=[];if(-1!==n)return{distance:0,found:!0,ranges:[{start:n,end:n+t.length-1}]};for(const r of t){const t=e.indexOf(r,n);if(-1===t)return{distance:1/0,ranges:[],found:!1};if(-1!==n&&(s+=t-n),n=t+1,0===i.length)i.push({start:t,end:t});else{const e=(0,a.last)(i);t===e.end+1?e.end++:i.push({start:t,end:t})}}return{distance:s,ranges:i,found:!0}}},"./packages/grafana-ui/src/utils/index.ts":(e,t,s)=>{"use strict";s.d(t,{ns:()=>c,Jx:()=>o,Qi:()=>a,JU:()=>b,_V:()=>d,zG:()=>B,te:()=>l,f7:()=>u,iV:()=>p,Yi:()=>j.Yi,nu:()=>D.Z,_J:()=>$._J,xq:()=>V,MX:()=>M.MX,O9:()=>h,hu:()=>_.h,C6:()=>z.C,AE:()=>M.AE,iu:()=>P,np:()=>I,vm:()=>N,Bx:()=>T,Gc:()=>f,z3:()=>y,Rc:()=>k.R,xl:()=>j.xl,l1:()=>j.l1,X1:()=>M.X1,FE:()=>w,Ty:()=>R,Wm:()=>v,NW:()=>A,Gu:()=>x});var a={};s.r(a),s.d(a,{getNextCharacter:()=>E,getPreviousCousin:()=>L});var n=s("./node_modules/lodash/lodash.js"),i=s("./node_modules/tinycolor2/tinycolor.js"),r=s.n(i);const o="rgba(0, 211, 255, 1)",l="rgba(11, 237, 50, 1)",c="rgba(237, 46, 24, 1)",d="rgba(150, 150, 150, 1)",u="rgba(247, 149, 32, 1)",p=.09,h=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function g(e){return r()(e).toHsl()}function m(e){return r()(e).toHexString()}function f(e){return r()(e).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let b,v=function(e){const t=(0,n.map)(e,g),s=(0,n.sortBy)(t,["h"]),a=(0,n.chunk)(s,4),i=(0,n.map)(a,(e=>(0,n.sortBy)(e,"l"))),r=(0,n.flattenDeep)((0,n.zip)(...i));return(0,n.map)(r,m)}(h);!function(e){e.onBlur="onBlur",e.onFocus="onFocus",e.onChange="onChange"}(b||(b={}));const x=(e,t)=>{const s=t.reduce(((t,s)=>s.rule(e)?t:t.concat(s.errorMessage)),[]);return s.length>0?s:null},y=(e,t)=>t&&t[e],w=(e,t)=>({rule:t=>!!t.match(e),errorMessage:t||"Value is not valid"});var j=s("./packages/grafana-ui/src/utils/slate.ts"),k=s("./packages/grafana-ui/src/utils/dataLinks.ts");const S=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],C=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function T(e=""){const t=function(e){let t=5381;for(let s=0;s<e.length;s++)t=(t<<5)+t+e.charCodeAt(s);return t}(e.toLowerCase());return N(Math.abs(t%S.length))}function N(e){return{color:S[e],borderColor:C[e]}}let O=null;function I(){if(null!==O)return O;if("undefined"!=typeof document){const e=document.createElement("div"),t={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(t).map((s=>{e.style[s]=t[s]})),document.body.appendChild(e),O=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}else O=0;return O||0}const P=(e,t)=>{var s;let a,n;return e.getLinks&&(a=e.getLinks({valueRowIndex:t.index})[0]),null!==(s=a)&&void 0!==s&&s.onClick&&(n=s=>{s.ctrlKey||s.metaKey||s.shiftKey||(s.preventDefault(),a.onClick(s,{field:e,rowIndex:t.index}))}),{link:a,onClick:n}};var M=s("./packages/grafana-ui/src/utils/measureText.ts"),F=s("./node_modules/react/index.js");function A(){const[e,t]=(0,F.useState)(0);return()=>t(e+1)}var D=s("./packages/grafana-ui/src/utils/searchFunctions.ts"),$=s("./node_modules/ansicolor/build/ansicolor.mjs");function L(e,t){let s,a=e.parentElement.previousSibling;for(;a;){if(s=a.querySelector(t),s)return s;a=a.previousSibling}}function E(e){const t=(e||window).getSelection();if(!t||!t.anchorNode)return null;const s=t.getRangeAt(0),a=t.anchorNode.textContent,n=s.startOffset;return a.substr(n,1)}function R(e,t){if(F.isValidElement(e)||"string"==typeof e||"number"==typeof e)return e;if("function"==typeof e)return e(t);throw new Error(`${e} is not a React element nor a function that returns React element`)}"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let s,a=this;do{for(s=t.length;--s>=0&&t.item(s)!==a;);a=a.parentElement}while(s<0&&a);return a});var _=s("./packages/grafana-ui/src/utils/logger.ts");function V(e,t,s){}let B;!function(e){e.id="id",e.title="title",e.subTitle="subTitle",e.mainStat="mainStat",e.secondaryStat="secondaryStat",e.source="source",e.target="target",e.detail="detail__",e.arc="arc__",e.color="color"}(B||(B={}));var z=s("./packages/grafana-ui/src/utils/fuzzy.ts")},"./packages/grafana-ui/src/utils/logger.ts":(e,t,s)=>{"use strict";s.d(t,{h:()=>n});var a=s("./node_modules/lodash/lodash.js");(0,a.throttle)(((...e)=>{console.log(...e)}),500);const n=e=>{let t=!1;return{logger:(e,t=!1,...s)=>{},enable:()=>t=!0,disable:()=>t=!1,isEnabled:()=>t}}},"./packages/grafana-ui/src/utils/measureText.ts":(e,t,s)=>{"use strict";s.d(t,{AE:()=>r,X1:()=>o,MX:()=>l});const a=document.createElement("canvas").getContext("2d"),n=new Map;let i="";function r(){return a}function o(e,t){const s=`${t}px 'Roboto'`,r=e+s,o=n.get(r);if(o)return o;i!==s&&(a.font=i=s);const l=a.measureText(e);return 500===n.size&&n.clear(),n.set(r,l),l}function l(e,t,s,a,n){const i=t/(o(e,14).width+2)*14,r=s/a,l=Math.min(r,i);return Math.min(l,null!=n?n:l)}},"./packages/grafana-ui/src/utils/searchFunctions.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n,n:()=>i});var a=s("./packages/grafana-ui/src/utils/fuzzy.ts");let n;!function(e){e.Word="Word",e.Prefix="Prefix",e.Fuzzy="Fuzzy"}(n||(n={}));const i={[n.Word]:(e,t)=>e.filter((e=>(e.filterText||e.label).includes(t))),[n.Prefix]:(e,t)=>e.filter((e=>(e.filterText||e.label).startsWith(t))),[n.Fuzzy]:(e,t)=>(t=t.toLowerCase(),e.filter((e=>{const{distance:s,ranges:n,found:i}=(0,a.C)(e.label.toLowerCase(),t);return!!i&&(e.sortValue=s,e.highlightParts=n,!0)})))}},"./packages/grafana-ui/src/utils/slate.ts":(e,t,s)=>{"use strict";s.d(t,{Yi:()=>n,xl:()=>i,l1:()=>r});var a=s("./node_modules/slate/lib/slate.es.js");const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},i=(e,t)=>{const s=e.split("\n").map((e=>a.gO.create({type:"code_line",nodes:[a.xv.create(e)]}))),n=a.gO.create({data:{syntax:t},type:"code_block",nodes:s});return a.BB.create({nodes:[n]})},r=(e,t)=>{const s=i(e,t);return a.B4.create({document:s})}},"./public/app/angular/AngularLocationWrapper.ts":(e,t,s)=>{"use strict";s.d(t,{O:()=>r});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./packages/grafana-data/src/index.ts");const i={http:80,https:443,ftp:21};class r{constructor(){this.absUrl=this.wrapInDeprecationWarning(this.absUrl),this.hash=this.wrapInDeprecationWarning(this.hash),this.host=this.wrapInDeprecationWarning(this.host),this.path=this.wrapInDeprecationWarning(this.path),this.port=this.wrapInDeprecationWarning(this.port,"window.location"),this.protocol=this.wrapInDeprecationWarning(this.protocol,"window.location"),this.replace=this.wrapInDeprecationWarning(this.replace),this.search=this.wrapInDeprecationWarning(this.search),this.state=this.wrapInDeprecationWarning(this.state),this.url=this.wrapInDeprecationWarning(this.url)}wrapInDeprecationWarning(e,t){let s=this;return function(){return(0,n.deprecationWarning)("$location",e.name,t||"locationService"),e.apply(s,arguments)}}absUrl(){return`${window.location.origin}${this.url()}`}hash(e){if((0,a.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: hash"),e)throw new Error("AngularLocationWrapper method not implemented.");return a.locationService.getLocation().hash.substr(1)}host(){return new URL(window.location.href).hostname}path(e){(0,a.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: path");const t=a.locationService.getLocation();if(null!=e){let s=String(e);s=s.startsWith("/")?s:`/${s}`;const n=new URL(`${window.location.origin}${s}`);return a.locationService.push({pathname:n.pathname,search:n.search.length>0?n.search:t.search,hash:n.hash.length>0?n.hash:t.hash}),this}return null===e?(a.locationService.push("/"),this):t.pathname}port(){const e=new URL(window.location.href);return parseInt(e.port,10)||i[e.protocol]||null}protocol(){return new URL(window.location.href).protocol.slice(0,-1)}replace(){throw new Error("AngularLocationWrapper method not implemented.")}search(e,t){if((0,a.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: search"),!e)return a.locationService.getSearchObject();if(e&&arguments.length>1)return a.locationService.partial({[e]:t}),this;if(e){let t;t="object"==typeof e?Object.assign({},e):(0,a.locationSearchToObject)(e);for(const e of Object.keys(t))null!==t[e]&&void 0!==t[e]||delete t[e];const s=n.urlUtil.renderUrl(a.locationService.getLocation().pathname,t);a.locationService.push(s)}return this}state(e){throw(0,a.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: state"),new Error("AngularLocationWrapper method not implemented.")}url(e){if((0,a.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: url"),void 0!==e)return e.startsWith("#")?a.locationService.push(Object.assign({},a.locationService.getLocation(),{hash:e})):e.startsWith("?")?a.locationService.push(Object.assign({},a.locationService.getLocation(),{search:e})):0===e.trim().length?(console.log("pushing emptu"),a.locationService.push("/")):a.locationService.push(e),a.locationService;const t=a.locationService.getLocation();return`${t.pathname}${t.search}${t.hash}`}}},"./public/app/core/actions/cleanUp.ts":(e,t,s)=>{"use strict";s.d(t,{e:()=>a});const a=(0,s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").PH)("core/cleanUpState")},"./public/app/core/actions/index.ts":(e,t,s)=>{"use strict";s.d(t,{RL:()=>n.RL,H7:()=>n.H7,$l:()=>a.$l,uY:()=>a.uY});var a=s("./public/app/core/reducers/appNotification.ts"),n=s("./public/app/core/reducers/navModel.ts")},"./public/app/core/app_events.ts":(e,t,s)=>{"use strict";s.d(t,{h:()=>a,Z:()=>n});const a=new(s("./packages/grafana-data/src/index.ts").EventBusSrv),n=a},"./public/app/core/components/Animations/SlideDown.tsx":(e,t,s)=>{"use strict";s.d(t,{s:()=>r});s("./node_modules/react/index.js");var a=s("./node_modules/react-transition-group/esm/Transition.js"),n=s("./node_modules/react/jsx-runtime.js");const i={transition:"max-height 200ms ease-in-out",overflow:"hidden"},r=({children:e,in:t,maxHeight:s="200px",style:r=i})=>{const o={exited:{maxHeight:0},entering:{maxHeight:s},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return(0,n.jsx)(a.ZP,{in:t,timeout:200,children:t=>(0,n.jsx)("div",{style:Object.assign({},r,o[t]),children:e})})}},"./public/app/core/components/Branding/Branding.tsx":(e,t,s)=>{"use strict";s.d(t,{c:()=>l});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./packages/grafana-data/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l{}o(l,"LoginLogo",(({className:e})=>(0,r.jsx)("img",{className:e,src:"public/img/msupply_icon.svg",alt:"Grafana"}))),o(l,"LoginBackground",(({className:e,children:t})=>{const s=(0,n.useTheme2)(),i=a.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${s.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${n.styleMixins.mediaUp(s.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return(0,r.jsx)("div",{className:(0,a.cx)(i,e),children:t})})),o(l,"MenuLogo",(({className:e})=>(0,r.jsx)("img",{className:e,src:"public/img/msupply_light_icon.svg",alt:"Grafana"}))),o(l,"LoginBoxBackground",(()=>{const e=(0,n.useTheme2)();return a.css`
    background: ${i.colorManipulator.alpha(e.colors.background.primary,.7)};
    background-size: cover;
  `})),o(l,"AppTitle","Grafana"),o(l,"LoginTitle","Welcome to Grafana"),o(l,"GetLoginSubTitle",(()=>null))},"./public/app/core/components/CloseButton/CloseButton.tsx":(e,t,s)=>{"use strict";s.d(t,{P:()=>r});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/react/jsx-runtime.js");const r=({onClick:e,"aria-label":t})=>{const s=(0,n.useStyles2)(o);return(0,i.jsx)(n.IconButton,{"aria-label":null!=t?t:"Close",className:s,name:"times",onClick:e})},o=e=>a.css`
    position: absolute;
    right: ${e.spacing(.5)};
    top: ${e.spacing(1)};
  `},"./public/app/core/components/CopyToClipboard/CopyToClipboard.tsx":(e,t,s)=>{"use strict";s.d(t,{h:()=>l});var a=s("./node_modules/react/index.js"),n=s("./node_modules/clipboard/dist/clipboard.js"),i=s.n(n);const r=["elType","text","children","onError","onSuccess"];function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l extends a.PureComponent{constructor(e){super(e),o(this,"clipboardjs",void 0),o(this,"myRef",void 0),o(this,"initClipboardJS",(()=>{const{text:e,onSuccess:t,onError:s}=this.props;this.clipboardjs=new(i())(this.myRef.current,{text:e}),t&&this.clipboardjs.on("success",(e=>{e.clearSelection(),t(e)})),s&&this.clipboardjs.on("error",(e=>{console.error("Action:",e.action),console.error("Trigger:",e.trigger),s(e)}))})),o(this,"getElementType",(()=>this.props.elType||"button")),this.myRef=a.createRef()}componentDidMount(){this.initClipboardJS()}componentDidUpdate(){this.clipboardjs&&this.clipboardjs.destroy(),this.initClipboardJS()}componentWillUnmount(){this.clipboardjs&&this.clipboardjs.destroy()}render(){const e=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(this.props,r);return a.createElement(this.getElementType(),Object.assign({ref:this.myRef},e),this.props.children)}}},"./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});s("./node_modules/react/index.js");var a,n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./packages/grafana-e2e-selectors/src/index.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=n.css`
  text-align: center;
`,c=n.css`
  max-width: 700px;
  margin: 0 auto;
`,d=({title:e,buttonIcon:t,buttonLink:s,buttonTitle:d,buttonDisabled:u,onClick:p,proTip:h,proTipLink:g,proTipLinkTitle:m,proTipTarget:f,infoBox:b,infoBoxTitle:v})=>{var x,y,w;const j=()=>(0,o.jsxs)(o.Fragment,{children:[h?(0,o.jsxs)("span",{children:[a||(a=(0,o.jsx)(i.Icon,{name:"rocket"})),(0,o.jsxs)(o.Fragment,{children:[" ProTip: ",h," "]}),g&&(x||(x=(0,o.jsx)("a",{href:g,target:f,className:"text-link",children:m})))]},"proTipFooter"):"",b?(0,o.jsxs)("div",{className:`grafana-info-box ${c}`,children:[v&&(y||(y=(0,o.jsx)("h5",{children:v}))),w||(w=(0,o.jsx)("div",{dangerouslySetInnerHTML:b}))]},"infoBoxHtml"):""]}),k=j()?"":n.css`
        margin-bottom: 20px;
      `,S=(0,o.jsx)(i.LinkButton,{size:"lg",onClick:p,href:s,icon:t,className:k,"aria-label":r.wl.components.CallToActionCard.button(d),disabled:u,children:d});return(0,o.jsx)(i.CallToActionCard,{className:l,message:e,footer:j(),callToActionElement:S})}},"./public/app/core/components/Footer/Footer.tsx":(e,t,s)=>{"use strict";s.d(t,{dP:()=>o,$_:()=>c});var a=s("./node_modules/react/index.js"),n=s("./public/app/core/config.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");let o=()=>[{text:"Documentation",icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer",target:"_blank"},{text:"Support",icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer",target:"_blank"},{text:"Community",icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer",target:"_blank"}],l=()=>{const{buildInfo:e,licenseInfo:t}=n.ZP,s=[],a=t.stateInfo?` (${t.stateInfo})`:"";return s.push({text:`${e.edition}${a}`,url:t.licenseUrl}),e.hideVersion||(s.push({text:`v${e.version} (${e.commit})`}),e.hasUpdate&&s.push({text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer",target:"_blank"})),s};const c=a.memo((()=>{const e=o().concat(l());return(0,r.jsx)("footer",{className:"footer",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("ul",{children:e.map((e=>(0,r.jsx)("li",{children:(0,r.jsxs)("a",{href:e.url,target:e.target,rel:"noopener",children:[e.icon&&(0,r.jsx)(i.Icon,{name:e.icon})," ",e.text]})},e.text)))})})})}));c.displayName="Footer"},"./public/app/core/components/ForgottenPassword/ChangePassword.tsx":(e,t,s)=>{"use strict";s.d(t,{G:()=>c});s("./node_modules/react/index.js");var a,n=s("./packages/grafana-ui/src/index.ts"),i=s("./packages/grafana-e2e-selectors/src/index.ts"),r=s("./public/app/core/components/Login/LoginForm.tsx"),o=s("./public/app/core/components/PasswordField/PasswordField.tsx"),l=s("./node_modules/react/jsx-runtime.js");const c=({onSubmit:e,onSkip:t})=>(0,l.jsx)(n.Form,{onSubmit:t=>{e(t.newPassword)},children:({errors:e,register:s,getValues:c})=>{var d,u;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Field,{label:"New password",invalid:!!e.newPassword,error:null==e||null===(d=e.newPassword)||void 0===d?void 0:d.message,children:(0,l.jsx)(o.Z,Object.assign({id:"new-password",autoFocus:!0,autoComplete:"new-password"},s("newPassword",{required:"New Password is required"})))}),(0,l.jsx)(n.Field,{label:"Confirm new password",invalid:!!e.confirmNew,error:null==e||null===(u=e.confirmNew)||void 0===u?void 0:u.message,children:(0,l.jsx)(o.Z,Object.assign({id:"confirm-new-password",autoComplete:"new-password"},s("confirmNew",{required:"Confirmed Password is required",validate:e=>e===c().newPassword||"Passwords must match!"})))}),(0,l.jsxs)(n.VerticalGroup,{children:[a||(a=(0,l.jsx)(n.Button,{type:"submit",className:r.F,children:"Submit"})),t&&(0,l.jsx)(n.Tooltip,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom",children:(0,l.jsx)(n.Button,{fill:"text",onClick:t,type:"button","aria-label":i.wl.pages.Login.skip,children:"Skip"})})]})]})}})},"./public/app/core/components/LocalStorageValueProvider/index.tsx":(e,t,s)=>{"use strict";s.d(t,{G:()=>r});var a=s("./node_modules/react/index.js"),n=s("./public/app/core/store.ts"),i=s("./node_modules/react/jsx-runtime.js");class r extends a.PureComponent{constructor(e){var t,s,a;super(e),a=e=>{const{storageKey:t}=this.props;try{n.Z.setObject(t,e)}catch(e){console.error(e)}this.setState({value:e})},(s="onSaveToStore")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a;const{storageKey:i,defaultValue:r}=e;this.state={value:n.Z.getObject(i,r)}}render(){const{children:e}=this.props,{value:t}=this.state;return(0,i.jsx)(i.Fragment,{children:e(t,this.onSaveToStore)})}}},"./public/app/core/components/Login/LoginCtrl.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var a=s("./node_modules/react/index.js"),n=s("./public/app/core/config.ts"),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./public/app/core/app_events.ts"),o=s("./packages/grafana-data/src/index.ts"),l=s("./node_modules/react/jsx-runtime.js");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends a.PureComponent{constructor(e){super(e),c(this,"result",{}),c(this,"changePassword",(e=>{const t={newPassword:e,confirmNew:e,oldPassword:"admin"};this.props.resetCode||(0,i.getBackendSrv)().put("/api/user/password",t).then((()=>{this.toGrafana()})).catch((e=>console.error(e)));const s={code:this.props.resetCode,newPassword:e,confirmPassword:e};(0,i.getBackendSrv)().post("/api/user/password/reset",s).then((()=>{this.toGrafana()}))})),c(this,"login",(e=>{this.setState({isLoggingIn:!0}),(0,i.getBackendSrv)().post("/login",e).then((t=>{this.result=t,"admin"!==e.password||n.ZP.ldapEnabled||n.ZP.authProxyEnabled?this.toGrafana():this.changeView()})).catch((()=>{this.setState({isLoggingIn:!1})}))})),c(this,"changeView",(()=>{this.setState({isChangingPassword:!0})})),c(this,"toGrafana",(()=>{this.result.redirectUrl?""===n.ZP.appSubUrl||this.result.redirectUrl.startsWith(n.ZP.appSubUrl)?window.location.assign(this.result.redirectUrl):window.location.assign(n.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(n.ZP.appSubUrl+"/")})),this.state={isLoggingIn:!1,isChangingPassword:!1},n.ZP.loginError&&r.Z.emit(o.AppEvents.alertWarning,["Login Failed",n.ZP.loginError])}render(){const{children:e}=this.props,{isLoggingIn:t,isChangingPassword:s}=this.state,{login:a,toGrafana:i,changePassword:r}=this,{loginHint:o,passwordHint:c,disableLoginForm:d,ldapEnabled:u,authProxyEnabled:p,disableUserSignUp:h}=n.ZP;return(0,l.jsx)(l.Fragment,{children:e({isOauthEnabled:!!n.ZP.oauth&&Object.keys(n.ZP.oauth).length>0,loginHint:o,passwordHint:c,disableLoginForm:d,ldapEnabled:u,authProxyEnabled:p,disableUserSignUp:h,login:a,isLoggingIn:t,changePassword:r,skipPasswordChange:i,isChangingPassword:s})})}}const u=d},"./public/app/core/components/Login/LoginForm.tsx":(e,t,s)=>{"use strict";s.d(t,{F:()=>c,U:()=>d});s("./node_modules/react/index.js");var a=s("./packages/grafana-e2e-selectors/src/index.ts"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./public/app/core/components/PasswordField/PasswordField.tsx"),o=s("./node_modules/react/jsx-runtime.js");const l=i.css`
  width: 100%;
  padding-bottom: 16px;
`,c=i.css`
  justify-content: center;
  width: 100%;
`,d=({children:e,onSubmit:t,isLoggingIn:s,passwordHint:i,loginHint:d})=>(0,o.jsx)("div",{className:l,children:(0,o.jsx)(n.Form,{onSubmit:t,validateOn:"onChange",children:({register:t,errors:l})=>{var u,p;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Field,{label:"Email or username",invalid:!!l.user,error:null===(u=l.user)||void 0===u?void 0:u.message,children:(0,o.jsx)(n.Input,Object.assign({},t("user",{required:"Email or username is required"}),{autoFocus:!0,autoCapitalize:"none",placeholder:d,"aria-label":a.wl.pages.Login.username}))}),(0,o.jsx)(n.Field,{label:"Password",invalid:!!l.password,error:null===(p=l.password)||void 0===p?void 0:p.message,children:(0,o.jsx)(r.Z,Object.assign({id:"current-password",autoComplete:"current-password",passwordHint:i},t("password",{required:"Password is required"})))}),(0,o.jsx)(n.Button,{"aria-label":a.wl.pages.Login.submit,className:c,disabled:s,children:s?"Logging in...":"Log in"}),e]})}})})},"./public/app/core/components/Login/LoginLayout.tsx":(e,t,s)=>{"use strict";s.d(t,{$s:()=>d,dd:()=>u});var a,n=s("./node_modules/react/index.js"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./public/app/core/components/Branding/Branding.tsx"),l=s("./public/app/core/components/Footer/Footer.tsx"),c=s("./node_modules/react/jsx-runtime.js");const d=({children:e,enterAnimation:t=!0})=>{const s=(0,r.useStyles2)(h);return(0,c.jsx)("div",{className:(0,i.cx)(s.loginInnerBox,t&&s.enterAnimation),children:e})},u=({children:e})=>{const t=(0,r.useStyles2)(h),s=o.c.GetLoginSubTitle(),[d,u]=(0,n.useState)(!1);return(0,n.useEffect)((()=>u(!0)),[]),(0,c.jsxs)(o.c.LoginBackground,{className:(0,i.cx)(t.container,d&&t.loginAnim),children:[(0,c.jsxs)("div",{className:(0,i.cx)(t.loginContent,o.c.LoginBoxBackground(),"login-content-box"),children:[(0,c.jsxs)("div",{className:t.loginLogoWrapper,children:[(0,c.jsx)(o.c.LoginLogo,{className:t.loginLogo}),(0,c.jsxs)("div",{className:t.titleWrapper,children:[(0,c.jsx)("h1",{className:t.mainTitle,children:o.c.LoginTitle}),s&&(0,c.jsx)("h3",{className:t.subTitle,children:o.c.GetLoginSubTitle()})]})]}),(0,c.jsx)("div",{className:t.loginOuterBox,children:e})]}),a||(a=(0,c.jsx)(l.$_,{}))]})},p=i.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,h=e=>{const t=e.isDark?"#000":e.colors.background.canvas;return{container:(0,i.css)({minHeight:"100vh",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:t,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:i.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:i.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:i.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${r.styleMixins.mediaUp(e.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:i.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${e.spacing(3)};
    `,titleWrapper:i.css`
      text-align: center;
    `,mainTitle:i.css`
      font-size: 22px;

      @media ${r.styleMixins.mediaUp(e.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:i.css`
      font-size: ${e.typography.size.md};
      color: ${e.colors.text.secondary};
    `,loginContent:i.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${e.shape.borderRadius(4)};
      padding: ${e.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${r.styleMixins.mediaUp(e.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:i.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:i.css`
      padding: ${e.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:i.css`
      animation: ${p} ease-out 0.2s;
    `}}},"./public/app/core/components/Page/Page.tsx":(e,t,s)=>{"use strict";s.d(t,{T:()=>m,Z:()=>f});var a,n=s("./node_modules/react/index.js"),i=s("./public/app/core/selectors/navModel.ts"),r=s("./public/app/core/components/PageHeader/PageHeader.tsx"),o=s("./public/app/core/components/Footer/Footer.tsx"),l=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),c=s("./public/app/core/components/PageLoader/PageLoader.tsx"),d=s("./node_modules/react/jsx-runtime.js");var u,p=s("./packages/grafana-ui/src/index.ts"),h=s("./public/app/core/components/Branding/Branding.tsx");const g=["navModel","children","className"];const m=e=>{let{navModel:t,children:s,className:a}=e,c=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,g);const m=(0,p.useStyles2)(b);return(0,n.useEffect)((()=>{if(t){const e=(0,i.o)(t);document.title=e?`${e} - ${h.c.AppTitle}`:h.c.AppTitle}else document.title=h.c.AppTitle}),[t]),(0,d.jsx)("div",Object.assign({},c,{className:(0,l.cx)(m.wrapper,a),children:(0,d.jsx)(p.CustomScrollbar,{autoHeightMin:"100%",children:(0,d.jsxs)("div",{className:"page-scrollbar-content",children:[t&&(0,d.jsx)(r.Z,{model:t}),s,u||(u=(0,d.jsx)(o.$_,{}))]})})}))};m.Header=r.Z,m.Contents=({isLoading:e,children:t,className:s})=>(0,d.jsx)("div",{className:(0,l.cx)("page-container","page-body",s),children:e?a||(a=(0,d.jsx)(c.Z,{})):t});const f=m,b=e=>({wrapper:l.css`
    width: 100%;
    flex-grow: 1;
    width: 100%;
    min-height: 0;
  `})},"./public/app/core/components/PageHeader/PageHeader.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/features/dashboard/dashgrid/PanelHeader/PanelHeaderMenuItem.tsx"),r=s("./node_modules/react/jsx-runtime.js");const o=({children:e,customCss:t})=>{if(!e||0===e.length)return null;const s=e.find((e=>!0===e.active));return(0,r.jsx)("div",{className:`gf-form-select-wrapper width-20 ${t}`,children:(0,r.jsxs)("div",{className:"dropdown",children:[(0,r.jsx)("div",{className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",children:null==s?void 0:s.text}),(0,r.jsx)("ul",{className:"dropdown-menu dropdown-menu--menu",children:e.map((e=>e.hideFromTabs?null:(0,r.jsx)(i.u,{iconClassName:e.icon,text:e.text,href:e.url},e.url)))})]})})},l=({children:e})=>e&&0!==e.length?(0,r.jsxs)("nav",{children:[(0,r.jsx)(o,{customCss:"page-header__select-nav",children:e}),(0,r.jsx)(n.TabsBar,{className:"page-header__tabs",hideBorder:!0,children:e.map(((e,t)=>!e.hideFromTabs&&(0,r.jsx)(n.Tab,{label:e.text,active:e.active,icon:e.icon,href:e.url},`${e.url}-${t}`)))})]}):null;function c(e){var t;const s="grafana"===e.icon?12:14;return(0,r.jsxs)("div",{className:"page-header__inner",children:[(0,r.jsxs)("span",{className:"page-header__logo",children:[e.icon&&(0,r.jsx)(n.Icon,{name:e.icon,size:"xxxl",style:{marginTop:s}}),e.img&&(0,r.jsx)("img",{className:"page-header__img",src:e.img,alt:`logo of ${e.text}`})]}),(0,r.jsxs)("div",{className:"page-header__info-block",children:[d(e.text,null!==(t=e.breadcrumbs)&&void 0!==t?t:[]),e.subTitle&&(0,r.jsx)("div",{className:"page-header__sub-title",children:e.subTitle})]})]})}function d(e,t){if(!(e||t&&0!==t.length))return null;if(!t||0===t.length)return(0,r.jsx)("h1",{className:"page-header__title",children:e});const s=[];for(const e of t)e.url?s.push((0,r.jsx)("a",{className:"page-header__link",href:e.url,children:e.title},s.length)):s.push((0,r.jsxs)("span",{children:[" / ",e.title]},s.length));return s.push((0,r.jsxs)("span",{children:[" / ",e]},t.length+1)),(0,r.jsx)("h1",{className:"page-header__title",children:s})}const u=e=>({headerCanvas:a.css`
    background: ${e.colors.background.canvas};
  `}),p=({model:e})=>{const t=(0,n.useStyles2)(u);if(!e)return null;const s=e.main,a=s.children;return(0,r.jsx)("div",{className:t.headerCanvas,children:(0,r.jsx)("div",{className:"page-container",children:(0,r.jsxs)("div",{className:"page-header",children:[c(s),a&&a.length&&(0,r.jsx)(l,{children:a})]})})})}},"./public/app/core/components/PageLoader/PageLoader.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/react/jsx-runtime.js");const i=({pageName:e=""})=>{const t=`Loading ${e}...`;return(0,n.jsx)("div",{className:"page-loader-wrapper",children:(0,n.jsx)(a.LoadingPlaceholder,{text:t})})}},"./public/app/core/components/PasswordField/PasswordField.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-e2e-selectors/src/index.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=["autoComplete","autoFocus","id","passwordHint"];const l=a.forwardRef(((e,t)=>{let{autoComplete:s,autoFocus:l,id:c,passwordHint:d}=e,u=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,o);const[p,h]=(0,a.useState)(!1);return(0,r.jsx)(i.Input,Object.assign({id:c,autoFocus:l,autoComplete:s},u,{type:p?"text":"password",placeholder:d,"aria-label":n.wl.pages.Login.password,ref:t,suffix:(0,r.jsx)(i.IconButton,{name:p?"eye-slash":"eye",type:"button","aria-controls":c,role:"switch","aria-checked":p,"aria-label":"Show password",onClick:()=>{h(!p)}})}))}));l.displayName="PasswordField"},"./public/app/core/components/PermissionList/AddPermission.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>v});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./public/app/core/config.ts"),r=s("./public/app/core/components/Select/UserPicker.tsx"),o=s("./node_modules/lodash/lodash.js"),l=s("./packages/grafana-ui/src/index.ts"),c=s("./packages/grafana-runtime/src/index.ts"),d=s("./node_modules/react/jsx-runtime.js");class u extends a.Component{constructor(e){var t,s,a;super(e),a=void 0,(s="debouncedSearch")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,o.debounce)(this.search,300,{leading:!0,trailing:!0})}search(e){return this.setState({isLoading:!0}),(0,o.isNil)(e)&&(e=""),(0,c.getBackendSrv)().get(`/api/teams/search?perpage=100&page=1&query=${e}`).then((e=>{const t=e.teams.map((e=>({value:e,label:e.name,imgUrl:e.avatarUrl})));return this.setState({isLoading:!1}),t}))}render(){const{onSelected:e,className:t}=this.props,{isLoading:s}=this.state;return(0,d.jsx)("div",{className:"user-picker","data-testid":"teamPicker",children:(0,d.jsx)(l.AsyncSelect,{menuShouldPortal:!0,isLoading:s,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:e,className:t,placeholder:"Select a team",noOptionsMessage:"No teams found"})})}}var p,h=s("./public/app/types/acl.ts"),g=s("./public/app/core/components/CloseButton/CloseButton.tsx");function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class f extends a.Component{constructor(e){super(e),m(this,"onTypeChanged",(e=>{const t=e.value;switch(t){case h.pC.User:case h.pC.Team:this.setState({type:t,userId:0,teamId:0,role:void 0});break;case h.pC.Editor:this.setState({type:t,userId:0,teamId:0,role:h.B5.Editor});break;case h.pC.Viewer:this.setState({type:t,userId:0,teamId:0,role:h.B5.Viewer})}})),m(this,"onUserSelected",(e=>{this.setState({userId:e&&!Array.isArray(e)?e.id:0})})),m(this,"onTeamSelected",(e=>{var t;this.setState({teamId:null!==(t=e.value)&&void 0!==t&&t.id&&!Array.isArray(e.value)?e.value.id:0})})),m(this,"onPermissionChanged",(e=>{this.setState({permission:e.value})})),m(this,"onSubmit",(async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())})),this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:h.pC.Team,permission:h.V5.View}}isValid(){switch(this.state.type){case h.pC.Team:return this.state.teamId>0;case h.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:e}=this.props,t=this.state,s="min-width-20",a=this.isValid(),n=b(i.ZP.theme);return(0,d.jsxs)("div",{className:"cta-form",children:[(0,d.jsx)(g.P,{onClick:e}),p||(p=(0,d.jsx)("h5",{children:"Add Permission For"})),(0,d.jsx)(l.Form,{maxWidth:"none",onSubmit:this.onSubmit,children:()=>(0,d.jsxs)(l.HorizontalGroup,{children:[(0,d.jsx)(l.Select,{menuShouldPortal:!0,isSearchable:!1,value:this.state.type,options:h.BL,onChange:this.onTypeChanged}),t.type===h.pC.User?(0,d.jsx)(r.f,{onSelected:this.onUserSelected,className:s}):null,t.type===h.pC.Team?(0,d.jsx)(u,{onSelected:this.onTeamSelected,className:s}):null,(0,d.jsx)("span",{className:n.label,children:"Can"}),(0,d.jsx)(l.Select,{menuShouldPortal:!0,isSearchable:!1,value:this.state.permission,options:h.vT,onChange:this.onPermissionChanged,width:25}),(0,d.jsx)(l.Button,{"data-save-permission":!0,type:"submit",disabled:!a,children:"Save"})]})})]})}}m(f,"defaultProps",{showPermissionLevels:!0});const b=(0,l.stylesFactory)((e=>({label:n.css`
    color: ${e.colors.textBlue};
    font-weight: bold;
  `}))),v=f},"./public/app/core/components/PermissionList/PermissionList.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>O});var a,n,i,r,o,l,c,d,u=s("./node_modules/react/index.js"),p=s("./packages/grafana-ui/src/index.ts"),h=s("./public/app/types/acl.ts"),g=s("./node_modules/react/jsx-runtime.js");function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function f({item:e}){return e.userAvatarUrl?(0,g.jsx)("img",{className:"filter-table__avatar",src:e.userAvatarUrl}):e.teamAvatarUrl?(0,g.jsx)("img",{className:"filter-table__avatar",src:e.teamAvatarUrl}):"Editor"===e.role?a||(a=(0,g.jsx)(p.Icon,{size:"lg",name:"edit"})):n||(n=(0,g.jsx)(p.Icon,{size:"lg",name:"eye"}))}function b({item:e}){return e.userId?i||(i=(0,g.jsx)("span",{className:"filter-table__weak-italic",children:"(User)"})):e.teamId?r||(r=(0,g.jsx)("span",{className:"filter-table__weak-italic",children:"(Team)"})):o||(o=(0,g.jsx)("span",{className:"filter-table__weak-italic",children:"(Role)"}))}class v extends u.PureComponent{constructor(...e){super(...e),m(this,"onPermissionChanged",(e=>{this.props.onPermissionChanged(this.props.item,e.value)})),m(this,"onRemoveItem",(()=>{this.props.onRemoveItem(this.props.item)}))}render(){const{item:e,folderInfo:t}=this.props,s=-1===e.dashboardId&&!e.inherited,a=h.vT.find((t=>t.value===e.permission));return(0,g.jsxs)("tr",{className:(n=Boolean(null==e?void 0:e.inherited),n?"gf-form-disabled":""),children:[(0,g.jsx)("td",{style:{width:"1%"},children:(0,g.jsx)(f,{item:e})}),(0,g.jsxs)("td",{style:{width:"90%"},children:[e.name," ",(0,g.jsx)(b,{item:e})]}),(0,g.jsxs)("td",{children:[e.inherited&&t&&(0,g.jsxs)("em",{className:"muted no-wrap",children:["Inherited from folder"," ",(0,g.jsx)("a",{className:"text-link",href:`${t.url}/permissions`,children:t.title})," "]}),s&&(l||(l=(0,g.jsx)("em",{className:"muted no-wrap",children:"Default Permission"})))]}),c||(c=(0,g.jsx)("td",{className:"query-keyword",children:"Can"})),(0,g.jsx)("td",{children:(0,g.jsx)(p.Select,{menuShouldPortal:!0,isSearchable:!1,options:h.vT,onChange:this.onPermissionChanged,disabled:e.inherited,value:a,width:25})}),(0,g.jsx)("td",{children:e.inherited?d||(d=(0,g.jsx)(p.Button,{size:"sm",disabled:!0,icon:"times"})):(0,g.jsx)(p.Button,{size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})})]});var n}}var x,y,w,j,k,S,C;class T extends u.Component{render(){const{item:e}=this.props,t=h.vT.find((t=>t.value===e.permission));return(0,g.jsxs)("tr",{className:"gf-form-disabled",children:[(0,g.jsx)("td",{style:{width:"1%"},children:x||(x=(0,g.jsx)(p.Icon,{size:"lg",name:"shield"}))}),(0,g.jsxs)("td",{style:{width:"90%"},children:[e.name,y||(y=(0,g.jsx)("span",{className:"filter-table__weak-italic",children:" (Role)"}))]}),w||(w=(0,g.jsx)("td",{})),j||(j=(0,g.jsx)("td",{className:"query-keyword",children:"Can"})),(0,g.jsx)("td",{children:(0,g.jsx)("div",{className:"gf-form",children:(0,g.jsx)(p.Select,{menuShouldPortal:!0,options:h.vT,onChange:()=>{},disabled:!0,value:t})})}),k||(k=(0,g.jsx)("td",{children:(0,g.jsx)(p.Button,{size:"sm",disabled:!0,icon:"lock"})}))]})}}class N extends u.PureComponent{render(){const{items:e,onRemoveItem:t,onPermissionChanged:s,isFetching:a,folderInfo:n}=this.props;return(0,g.jsx)("table",{className:"filter-table gf-form-group",children:(0,g.jsxs)("tbody",{children:[(0,g.jsx)(T,{item:{name:"Admin",permission:4}},0),e.map(((e,a)=>(0,g.jsx)(v,{item:e,onRemoveItem:t,onPermissionChanged:s,folderInfo:n},a+1))),!0===a&&e.length<1?S||(S=(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:4,children:(0,g.jsx)("em",{children:"Loading permissions..."})})})):null,!1===a&&e.length<1?C||(C=(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:4,children:(0,g.jsx)("em",{children:"No permissions are set. Will only be accessible by admins."})})})):null]})})}}const O=N},"./public/app/core/components/PermissionList/PermissionsInfo.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});s("./node_modules/react/index.js");var a,n=s("./node_modules/react/jsx-runtime.js");const i=()=>a||(a=(0,n.jsxs)("div",{children:[(0,n.jsx)("h5",{children:"What are Permissions?"}),(0,n.jsx)("p",{children:"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."})]}))},"./public/app/core/components/PluginHelp/PluginHelp.tsx":(e,t,s)=>{"use strict";s.d(t,{R:()=>d});var a,n,i=s("./node_modules/react/index.js"),r=s("./packages/grafana-data/src/index.ts"),o=s("./packages/grafana-runtime/src/index.ts"),l=s("./node_modules/react/jsx-runtime.js");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends i.PureComponent{constructor(...e){super(...e),c(this,"state",{isError:!1,isLoading:!1,help:""}),c(this,"loadHelp",(()=>{const{plugin:e,type:t}=this.props;this.setState({isLoading:!0}),(0,o.getBackendSrv)().get(`/api/plugins/${e.id}/markdown/${t}`).then((e=>{const s=(0,r.renderMarkdown)(e);""===e&&"help"===t?this.setState({isError:!1,isLoading:!1,help:this.constructPlaceholderInfo()}):this.setState({isError:!1,isLoading:!1,help:s})})).catch((()=>{this.setState({isError:!0,isLoading:!1})}))}))}componentDidMount(){this.loadHelp()}constructPlaceholderInfo(){return"No plugin help or readme markdown file was found"}render(){const{type:e}=this.props,{isError:t,isLoading:s,help:i}=this.state;return s?a||(a=(0,l.jsx)("h2",{children:"Loading help..."})):t?n||(n=(0,l.jsx)("h3",{children:"'Error occurred when loading help'"})):(0,l.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:i}})}}},"./public/app/core/components/QueryOperationRow/OperationRowHelp.tsx":(e,t,s)=>{"use strict";s.d(t,{h:()=>c});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-data/src/index.ts"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=["className","children","markdown","onRemove"];const c=a.memo(a.forwardRef(((e,t)=>{let{className:s,children:a,markdown:i}=e,c=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,l);const p=(0,r.useStyles2)(u);return(0,o.jsxs)("div",Object.assign({className:(0,n.cx)(p.wrapper,s)},c,{ref:t,children:[i&&d(i),a]}))})));function d(e){const t=(0,i.renderMarkdown)(e);return(0,o.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:t}})}c.displayName="OperationRowHelp";const u=e=>{const t=e.shape.borderRadius();return{wrapper:n.css`
      padding: ${e.spacing(2)};
      border: 2px solid ${e.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${t} ${t};
      position: relative;
      top: -4px;
    `}}},"./public/app/core/components/QueryOperationRow/QueryOperationAction.tsx":(e,t,s)=>{"use strict";s.d(t,{y:()=>o});var a=s("./packages/grafana-ui/src/index.ts"),n=(s("./node_modules/react/index.js"),s("./node_modules/@emotion/css/dist/emotion-css.esm.js")),i=s("./packages/grafana-e2e-selectors/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=({icon:e,active:t,disabled:s,title:o,onClick:c})=>{const d=(0,a.useStyles2)(l);return(0,r.jsx)("div",{className:(0,n.cx)(d.icon,t&&d.active),children:(0,r.jsx)(a.IconButton,{name:e,title:o,className:d.icon,disabled:!!s,onClick:c,surface:"header",type:"button","aria-label":i.wl.components.QueryEditorRow.actionButton(o)})})};o.displayName="QueryOperationAction";const l=e=>({icon:n.css`
      display: flex;
      position: relative;
      color: ${e.colors.text.secondary};
    `,active:n.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: 2px;
        bottom: -8px;
        background-image: ${e.colors.gradients.brandHorizontal} !important;
      }
    `})},"./public/app/core/components/QueryOperationRow/QueryOperationRow.tsx":(e,t,s)=>{"use strict";s.d(t,{t:()=>c});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./node_modules/react-use/esm/useUpdateEffect.js"),o=s("./node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),l=s("./node_modules/react/jsx-runtime.js");const c=({children:e,actions:t,title:s,headerElement:c,onClose:u,onOpen:p,isOpen:h,disabled:g,draggable:m,index:f,id:b})=>{const[v,x]=(0,a.useState)(void 0===h||h),y=(0,n.useTheme)(),w=d(y),j=(0,a.useCallback)((()=>{x(!v)}),[v,x]);(0,r.Z)((()=>{v?p&&p():u&&u()}),[v]);const k={isOpen:v,onOpen:()=>{x(!0)},onClose:()=>{x(!1)}},S=s&&(0,n.renderOrCallToRender)(s,k),C=t&&(0,n.renderOrCallToRender)(t,k),T=c&&(0,n.renderOrCallToRender)(c,k),N=(0,l.jsxs)("div",{className:w.header,children:[(0,l.jsxs)("div",{className:w.column,children:[(0,l.jsx)(n.Icon,{name:v?"angle-down":"angle-right",className:w.collapseIcon,onClick:j}),s&&(0,l.jsx)("div",{className:w.titleWrapper,onClick:j,"aria-label":"Query operation row title",children:(0,l.jsx)("div",{className:(0,i.cx)(w.title,g&&w.disabled),children:S})}),T]}),(0,l.jsxs)("div",{className:w.column,children:[C,m&&(0,l.jsx)(n.Icon,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:w.dragIcon})]})]});return m?(0,l.jsx)(o._l,{draggableId:b,index:f,children:t=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",Object.assign({ref:t.innerRef,className:w.wrapper},t.draggableProps,{children:[(0,l.jsx)("div",Object.assign({},t.dragHandleProps,{children:N})),v&&(0,l.jsx)("div",{className:w.content,children:e})]}))})}):(0,l.jsxs)("div",{className:w.wrapper,children:[N,v&&(0,l.jsx)("div",{className:w.content,children:e})]})},d=(0,n.stylesFactory)((e=>({wrapper:i.css`
      margin-bottom: ${e.spacing.md};
    `,header:i.css`
      label: Header;
      padding: ${e.spacing.xs} ${e.spacing.sm};
      border-radius: ${e.border.radius.sm};
      background: ${e.colors.bg2};
      min-height: ${e.spacing.formInputHeight}px;
      display: grid;
      grid-template-columns: minmax(100px, max-content) min-content;
      align-items: center;
      justify-content: space-between;
      white-space: nowrap;

      &:focus {
        outline: none;
      }
    `,column:i.css`
      label: Column;
      display: flex;
      align-items: center;
    `,dragIcon:i.css`
      cursor: drag;
      color: ${e.colors.textWeak};
      &:hover {
        color: ${e.colors.text};
      }
    `,collapseIcon:i.css`
      color: ${e.colors.textWeak};
      cursor: pointer;
      &:hover {
        color: ${e.colors.text};
      }
    `,titleWrapper:i.css`
      display: flex;
      align-items: center;
      flex-grow: 1;
      cursor: pointer;
      overflow: hidden;
      margin-right: ${e.spacing.sm};
    `,title:i.css`
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.textBlue};
      margin-left: ${e.spacing.sm};
      overflow: hidden;
      text-overflow: ellipsis;
    `,content:i.css`
      margin-top: ${e.spacing.inlineFormMargin};
      margin-left: ${e.spacing.lg};
    `,disabled:i.css`
      color: ${e.colors.textWeak};
    `})));c.displayName="QueryOperationRow"},"./public/app/core/components/Select/FolderPicker.tsx":(e,t,s)=>{"use strict";s.d(t,{E:()=>g});var a=s("./node_modules/react/index.js"),n=s("./node_modules/lodash/lodash.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./packages/grafana-e2e-selectors/src/index.ts"),l=s("./public/app/core/app_events.ts"),c=s("./public/app/core/services/context_srv.ts"),d=s("./public/app/features/manage-dashboards/state/actions.ts"),u=s("./public/app/types/index.ts"),p=s("./node_modules/react/jsx-runtime.js");function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class g extends a.PureComponent{constructor(e){super(e),h(this,"debouncedSearch",void 0),h(this,"componentDidMount",(async()=>{if(this.props.skipInitialLoad){const e=await async function({folderName:e,folderId:t,getFolder:s}){if(null==t||t<0)throw new Error("folderId should to be greater or equal to zero.");if(e)return{label:e,value:t};return{label:(await s(t)).title,value:t}}({getFolder:d.EW,folderId:this.props.initialFolderId,folderName:this.props.initialTitle});this.setState({folder:e})}else await this.loadInitialValue()})),h(this,"getOptions",(async e=>{const{rootName:t,enableReset:s,initialTitle:a,permissionLevel:n,initialFolderId:i,showRoot:r}=this.props,o=(await(0,d.ZL)(e,n)).map((e=>({label:e.title,value:e.id})));return c.Vt.isEditor&&null!=t&&t.toLowerCase().startsWith(e.toLowerCase())&&r&&o.unshift({label:t,value:0}),s&&""===e&&""!==a&&!o.find((e=>e.label===a))&&o.unshift({label:a,value:i}),o})),h(this,"onFolderChange",(e=>{e||(e={value:0,label:this.props.rootName}),this.setState({folder:e},(()=>this.props.onChange({id:e.value,title:e.label})))})),h(this,"createNewFolder",(async e=>{const t=await(0,d.L6)({title:e});let s={value:-1,label:"Not created"};return t.id>-1?(l.Z.emit(r.AppEvents.alertSuccess,["Folder Created","OK"]),s={value:t.id,label:t.title},await this.onFolderChange(s)):l.Z.emit(r.AppEvents.alertError,["Folder could not be created"]),s})),h(this,"loadInitialValue",(async()=>{const{initialTitle:e,rootName:t,initialFolderId:s,enableReset:a,dashboardId:n}=this.props,i={label:e,value:void 0},r={label:t,value:0},o=await this.getOptions("");let l=null;if(null!=s&&s>-1?l=o.find((e=>e.value===s))||null:a&&e?l=i:s&&(l=o.find((e=>e.id===s))||null),!l&&!this.props.allowEmpty)if(c.Vt.isEditor)l=r;else{l=!!n?i:o.length>0?o[0]:i}this.setState({folder:l},(()=>{l&&l.value!==s&&this.props.onChange({id:l.value,title:l.label})}))})),this.state={folder:null},this.debouncedSearch=(0,n.debounce)(this.getOptions,300,{leading:!0,trailing:!0})}render(){const{folder:e}=this.state,{enableCreateNew:t}=this.props;return(0,p.jsx)("div",{"aria-label":o.wl.components.FolderPicker.container,children:(0,p.jsx)(i.AsyncSelect,{menuShouldPortal:!0,loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:e,value:e,allowCustomValue:t,loadOptions:this.debouncedSearch,onChange:this.onFolderChange,onCreateOption:this.createNewFolder})})}}h(g,"defaultProps",{rootName:"General",enableReset:!1,initialTitle:"",enableCreateNew:!1,permissionLevel:u.bf.Edit,allowEmpty:!1,showRoot:!0})},"./public/app/core/components/Select/SortPicker.tsx":(e,t,s)=>{"use strict";s.d(t,{P:()=>c});s("./node_modules/react/index.js");var a=s("./node_modules/react-use/esm/useAsync.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/features/search/constants.ts"),r=s("./public/app/core/services/search_srv.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=new r.i,c=({onChange:e,value:t,placeholder:s,filter:r})=>{const{loading:c,value:d}=(0,a.Z)((()=>(e=>l.getSortOptions().then((({sortOptions:t})=>(e?t.filter((t=>e.includes(t.name))):t).map((e=>({label:e.displayName,value:e.name}))))))(r)),[]),u=null==d?void 0:d.find((e=>e.value===t));return c?null:(0,o.jsx)(n.Select,{menuShouldPortal:!0,width:25,onChange:e,value:null!=u?u:null,options:d,"aria-label":"Sort",placeholder:null!=s?s:`Sort (Default ${i.yw.label})`,prefix:(0,o.jsx)(n.Icon,{name:null!=t&&t.includes("asc")?"sort-amount-up":"sort-amount-down"})},t)}},"./public/app/core/components/Select/UserPicker.tsx":(e,t,s)=>{"use strict";s.d(t,{f:()=>l});var a=s("./node_modules/react/index.js"),n=s("./node_modules/lodash/lodash.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./packages/grafana-runtime/src/index.ts"),o=s("./node_modules/react/jsx-runtime.js");class l extends a.Component{constructor(e){var t,s,a;super(e),a=void 0,(s="debouncedSearch")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}search(e){return this.setState({isLoading:!0}),(0,n.isNil)(e)&&(e=""),(0,r.getBackendSrv)().get(`/api/org/users/lookup?query=${e}&limit=100`).then((e=>e.map((e=>({id:e.userId,value:e.userId,label:e.login,imgUrl:e.avatarUrl,login:e.login}))))).finally((()=>{this.setState({isLoading:!1})}))}render(){const{className:e,onSelected:t,inputId:s}=this.props,{isLoading:a}=this.state;return(0,o.jsx)("div",{className:"user-picker","data-testid":"userPicker",children:(0,o.jsx)(i.AsyncSelect,{menuShouldPortal:!0,isClearable:!0,className:e,inputId:s,isLoading:a,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:t,placeholder:"Start typing to search for user",noOptionsMessage:"No users found"})})}}},"./public/app/core/components/TagFilter/TagBadge.tsx":(e,t,s)=>{"use strict";s.d(t,{e:()=>o});var a,n=s("./node_modules/react/index.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");class o extends n.Component{constructor(e){super(e)}render(){const{label:e,removeIcon:t,count:s}=this.props,{color:n}=(0,i.getTagColorsFromName)(e),o={backgroundColor:n},l=0!==s&&(0,r.jsx)("span",{className:"tag-count-label",children:`(${s})`});return(0,r.jsxs)("span",{className:"label label-tag",style:o,children:[t&&(a||(a=(0,r.jsx)(i.Icon,{name:"times"}))),e," ",l]})}}},"./public/app/core/components/TagFilter/TagFilter.tsx":(e,t,s)=>{"use strict";s.d(t,{D:()=>h});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./node_modules/react-select/dist/index-4bd03571.esm.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/core/components/TagFilter/TagBadge.tsx"),l=s("./node_modules/react/jsx-runtime.js");const c=({data:e,className:t,label:s,isFocused:n,innerProps:r})=>{var c;const u=(0,i.useTheme)(),p=d(u);return(0,l.jsx)("div",Object.assign({className:(0,a.cx)(p.option,n&&p.optionFocused),"aria-label":"Tag option"},r,{children:(0,l.jsx)("div",{className:`tag-filter-option ${t||""}`,children:(0,l.jsx)(o.e,{label:s,removeIcon:!1,count:null!==(c=e.count)&&void 0!==c?c:0})})}))},d=(0,i.stylesFactory)((e=>({option:a.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${e.colors.dropdownOptionHoverBg};
      }
    `,optionFocused:a.css`
      background: ${e.colors.dropdownOptionHoverBg};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `})));var u;const p=(e,t)=>RegExp((0,r.escapeStringForRegex)(t),"i").test(e.value),h=({allowCustomValue:e=!1,formatCreateLabel:t,hideValues:s,inputId:a,isClearable:r,onChange:d,placeholder:h="Filter by tag",tagOptions:m,tags:f,width:b})=>{const v=(0,i.useTheme)(),x=g(v),y=e=>{d((e||[]).map((e=>e.value)))},w=f.map((e=>({value:e,label:e,count:0}))),j={allowCustomValue:e,formatCreateLabel:t,defaultOptions:!0,filterOption:p,getOptionLabel:e=>e.label,getOptionValue:e=>e.value,inputId:a,isMulti:!0,loadOptions:e=>m().then((e=>e.map((e=>({value:e.term,label:e.term,count:e.count}))))),loadingMessage:"Loading...",noOptionsMessage:"No tags found",onChange:y,placeholder:h,styles:(0,i.resetSelectStyles)(),value:w,width:b,components:{Option:c,MultiValueLabel:()=>null,MultiValueRemove(e){const{data:t}=e;return(0,l.jsx)(n.c.MultiValueRemove,Object.assign({},e,{children:(0,l.jsx)(o.e,{label:t.label,removeIcon:!0,count:t.count},t.label)}))},MultiValueContainer:s?()=>null:n.c.MultiValueContainer}};return(0,l.jsxs)("div",{className:x.tagFilter,children:[r&&f.length>0&&(0,l.jsx)("span",{className:x.clear,onClick:()=>y([]),children:"Clear tags"}),(0,l.jsx)(i.AsyncMultiSelect,Object.assign({menuShouldPortal:!0},j,{prefix:u||(u=(0,l.jsx)(i.Icon,{name:"tag-alt"})),"aria-label":"Tag filter"}))]})};h.displayName="TagFilter";const g=(0,i.stylesFactory)((e=>({tagFilter:a.css`
      position: relative;
      min-width: 180px;
      flex-grow: 1;

      .label-tag {
        margin-left: 6px;
        cursor: pointer;
      }
    `,clear:a.css`
      text-decoration: underline;
      font-size: 12px;
      position: absolute;
      top: -22px;
      right: 0;
      cursor: pointer;
      color: ${e.colors.textWeak};

      &:hover {
        color: ${e.colors.textStrong};
      }
    `})))},"./public/app/core/components/TimePicker/TimePickerWithHistory.tsx":(e,t,s)=>{"use strict";s.d(t,{a:()=>o});s("./node_modules/react/index.js");var a=s("./public/app/core/components/LocalStorageValueProvider/index.tsx"),n=s("./packages/grafana-data/src/index.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=e=>(0,r.jsx)(a.G,{storageKey:"grafana.dashboard.timepicker.history",defaultValue:[],children:(t,s)=>{return(0,r.jsx)(i.TimeRangePicker,Object.assign({},e,{history:(a=t,a.map((e=>(0,n.isDateTime)(e.from)?e:{from:(0,n.toUtc)(e.from),to:(0,n.toUtc)(e.to),raw:e.raw}))),onChange:a=>{!function(e,t,s){if(!function(e){return(0,n.isDateTime)(e.raw.from)||(0,n.isDateTime)(e.raw.to)}(e))return;const a=function(e){return e.slice(0,4)}([e,...t]);s(a)}(a,t,s),e.onChange(a)}}));var a}})},"./public/app/core/components/help/HelpModal.tsx":(e,t,s)=>{"use strict";s.d(t,{B:()=>l});s("./node_modules/react/index.js");var a,n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o={Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","p"],description:"Go to Profile"},{keys:["s","o"],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"}],Dashboard:[{keys:["mod+s"],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:["mod+o"],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","←"],description:"Move time range back"},{keys:["t","→"],description:"Move time range forward"}]},l=({onDismiss:e})=>{const t=(0,i.useStyles2)(c);return(0,r.jsxs)(i.Modal,{title:"Shortcuts",isOpen:!0,onDismiss:e,onClickBackdrop:e,children:[(0,r.jsxs)("div",{className:t.titleDescription,children:[(0,r.jsx)("span",{className:t.shortcutTableKey,children:"mod"})," =",a||(a=(0,r.jsx)("span",{children:" CTRL on windows or linux and CMD key on Mac"}))]}),(0,r.jsx)("div",{className:t.categories,children:Object.entries(o).map((([e,s],a)=>(0,r.jsx)("div",{className:t.shortcutCategory,children:(0,r.jsx)("table",{className:t.shortcutTable,children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{children:(0,r.jsx)("th",{className:t.shortcutTableCategoryHeader,colSpan:2,children:e})}),s.map(((e,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:t.shortcutTableKeys,children:e.keys.map(((e,n)=>(0,r.jsx)("span",{className:t.shortcutTableKey,children:e},`${a}-${s}-${n}`)))}),(0,r.jsx)("td",{className:t.shortcutTableDescription,children:e.description})]},`${a}-${s}`)))]})})},a)))})]})};function c(e){return{titleDescription:n.css`
      font-size: ${e.typography.bodySmall.fontSize};
      font-weight: ${e.typography.bodySmall.fontWeight};
      color: ${e.colors.text.disabled};
      padding-bottom: ${e.spacing(2)};
    `,categories:n.css`
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:n.css`
      width: 50%;
      font-size: ${e.typography.bodySmall.fontSize};
    `,shortcutTable:n.css`
      margin-bottom: ${e.spacing(2)};
    `,shortcutTableCategoryHeader:n.css`
      font-weight: normal;
      font-size: ${e.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:n.css`
      text-align: left;
      color: ${e.colors.text.disabled};
      width: 99%;
      padding: ${e.spacing(1,2)};
    `,shortcutTableKeys:n.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${e.colors.text.primary};
    `,shortcutTableKey:n.css`
      display: inline-block;
      text-align: center;
      margin-right: ${e.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${e.colors.border.medium};
      border-radius: ${e.shape.borderRadius(3)};
      color: ${e.colors.text.primary};
      background-color: ${e.colors.background.secondary};
    `}}},"./public/app/core/components/query_part/query_part.ts":(e,t,s)=>{"use strict";s.d(t,{zU:()=>i,XN:()=>r,D:()=>o,C7:()=>l});var a=s("./node_modules/lodash/lodash.js");function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e){n(this,"type",void 0),n(this,"params",void 0),n(this,"defaultParams",void 0),n(this,"renderer",void 0),n(this,"category",void 0),n(this,"addStrategy",void 0),this.type=e.type,this.params=e.params,this.defaultParams=e.defaultParams,this.renderer=e.renderer,this.category=e.category,this.addStrategy=e.addStrategy}}class r{constructor(e,t){if(n(this,"part",void 0),n(this,"def",void 0),n(this,"params",void 0),n(this,"text",void 0),this.part=e,this.def=t,!this.def)throw{message:"Could not find query part "+e.type};e.params=e.params||(0,a.clone)(this.def.defaultParams),this.params=e.params,this.text="",this.updateText()}render(e){return this.def.renderer(this,e)}hasMultipleParamsInString(e,t){return-1!==e.indexOf(",")&&(this.def.params[t+1]&&this.def.params[t+1].optional)}updateParam(e,t){this.hasMultipleParamsInString(e,t)?(0,a.each)(e.split(","),((e,t)=>{this.updateParam(e.trim(),t)})):(""===e&&this.def.params[t].optional?this.params.splice(t,1):this.params[t]=e,this.part.params=this.params,this.updateText())}updateText(){if(0===this.params.length)return void(this.text=this.def.type+"()");let e=this.def.type+"(";e+=this.params.join(", "),e+=")",this.text=e}}function o(e,t){const s=e.def.type+"(",n=(0,a.map)(e.params,((t,s)=>{const a=e.def.params[s];return"time"===a.type&&"auto"===t&&(t="$__interval"),"single"===a.quote?"'"+t+"'":"double"===a.quote?'"'+t+'"':t}));return t&&n.unshift(t),s+n.join(", ")+")"}function l(e,t){return t+" "+e.params[0]}},"./public/app/core/config.ts":(e,t,s)=>{"use strict";s.d(t,{vc:()=>i.config,ZP:()=>l,iE:()=>c,Oh:()=>d});var a,n,i=s("./packages/grafana-runtime/src/index.ts"),r=s("./packages/grafana-data/src/index.ts");let o=i.config;const l=o,c=()=>o,d=Boolean((null===(a=i.config.panels)||void 0===a||null===(n=a.debug)||void 0===n?void 0:n.state)===r.PluginState.alpha)},"./public/app/core/constants.ts":(e,t,s)=>{"use strict";s.d(t,{K3:()=>a,hD:()=>n,cz:()=>i,OA:()=>r,kh:()=>o,b0:()=>l,AV:()=>c,zF:()=>d,QO:()=>u,Ck:()=>p,gN:()=>h});const a=30,n=8,i=24,r="v",o=4,l=250,c=3*a,d="panel-copy",u=2,p=23763571993,h=40},"./public/app/core/copy/appNotification.ts":(e,t,s)=>{"use strict";s.d(t,{AT:()=>c,t_:()=>d,ZR:()=>u});var a=s("./public/app/types/index.ts"),n=s("./public/app/core/utils/errors.ts"),i=s("./node_modules/uuid/dist/esm-browser/v4.js");const r={title:"",text:"",severity:a.F1.Success,icon:"check",timeout:a.bd.Success},o={title:"",text:"",severity:a.F1.Warning,icon:"exclamation-triangle",timeout:a.bd.Warning},l={title:"",text:"",severity:a.F1.Error,icon:"exclamation-triangle",timeout:a.bd.Error},c=(e,t="")=>Object.assign({},r,{title:e,text:t,id:(0,i.Z)()}),d=(e,t="",s)=>Object.assign({},l,{text:(0,n.i)(t),title:e,id:(0,i.Z)(),component:s}),u=(e,t="")=>Object.assign({},o,{title:e,text:t,id:(0,i.Z)()})},"./public/app/core/core.ts":(e,t,s)=>{"use strict";s.d(t,{h$:()=>se.Z,Vt:()=>de.Vt,hF:()=>r.ZP,rv:()=>ye.r,Yd:()=>Je,Wz:()=>Xe.W});var a=s("./node_modules/lodash/lodash.js"),n=s("./node_modules/jquery/dist/jquery-exposed.js"),i=s.n(n),r=s("./public/app/core/core_module.ts");function o(e){return{scope:{menuItems:"=dropdownTypeahead",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel"},link:(t,s,n)=>{const r=i()('<input type="text" class="gf-form-input input-medium tight-form-input" spellcheck="false" style="display:none"></input>'),o=i()('<a class="gf-form-label tight-form-func dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>');r.appendTo(s),o.appendTo(s),n.linkText&&o.html(n.linkText),n.ngModel&&t.$watch("model",(e=>{(0,a.each)(t.menuItems,(t=>{(0,a.each)(t.submenu,(t=>{t.value===e&&o.html(t.text)}))}))}));const l=(0,a.reduce)(t.menuItems,((e,t,s)=>(t.submenu?(0,a.each)(t.submenu,((a,n)=>{a.click="menuItemSelected("+s+","+n+")",e.push(t.text+" "+a.text)})):(t.click="menuItemSelected("+s+")",e.push(t.text)),e)),[]);t.menuItemSelected=(e,a)=>{const n=t.menuItems[e],i={$item:n};n.submenu&&void 0!==a&&(i.$subItem=n.submenu[a]),t.dropdownTypeaheadOnSelect(i),r.hide(),r.val(""),o.show(),o.focus(),s.removeClass("open")},r.attr("data-provide","typeahead"),r.typeahead({source:l,minLength:1,items:10,updater:e=>{const s={};return(0,a.each)(t.menuItems,(t=>{(0,a.each)(t.submenu,(a=>{e===t.text+" "+a.text&&(s.$subItem=a,s.$item=t)}))})),s.$item&&t.$apply((()=>{t.dropdownTypeaheadOnSelect(s)})),r.trigger("blur"),""}}),o.click((()=>{o.hide(),r.show(),r.focus()})),r.keyup((()=>{s.toggleClass("open",""===r.val())})),s.mousedown((e=>{e.preventDefault()})),r.blur((()=>{r.hide(),r.val(""),o.show(),o.focus(),setTimeout((()=>{s.removeClass("open")}),200)})),e(s.contents())(t)}}}function l(e){return{scope:{menuItems:"=dropdownTypeahead2",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel",buttonTemplateClass:"@"},link:(t,s,n)=>{const r=i()('<input type="text" class="gf-form-input" spellcheck="false" style="display:none"></input>');t.buttonTemplateClass||(t.buttonTemplateClass="gf-form-input");const o=i()('<a class="{{buttonTemplateClass}} dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>'),l={blur:null};r.appendTo(s),o.appendTo(s),n.linkText&&o.html(n.linkText),n.ngModel&&t.$watch("model",(e=>{(0,a.each)(t.menuItems,(t=>{(0,a.each)(t.submenu,(t=>{t.value===e&&o.html(t.text)}))}))}));const c=(0,a.reduce)(t.menuItems,((e,t,s)=>(t.submenu?(0,a.each)(t.submenu,((a,n)=>{a.click="menuItemSelected("+s+","+n+")",e.push(t.text+" "+a.text)})):(t.click="menuItemSelected("+s+")",e.push(t.text)),e)),[]),d=()=>{r.hide(),r.val(""),o.show(),o.focus(),s.removeClass("open")};t.menuItemSelected=(e,s)=>{const a=t.menuItems[e],n={$item:a};a.submenu&&void 0!==s&&(n.$subItem=a.submenu[s]),t.dropdownTypeaheadOnSelect(n),d()},r.attr("data-provide","typeahead"),r.typeahead({source:c,minLength:1,items:10,updater:e=>{const s={};return(0,a.each)(t.menuItems,(t=>{(0,a.each)(t.submenu,(a=>{e===t.text+" "+a.text&&(s.$subItem=a,s.$item=t)}))})),s.$item&&t.$apply((()=>{t.dropdownTypeaheadOnSelect(s)})),r.trigger("blur"),""}}),o.click((()=>{o.hide(),r.show(),r.focus()})),r.keyup((()=>{s.toggleClass("open",""===r.val())})),s.mousedown((e=>{e.preventDefault(),l.blur=null})),r.blur((()=>{l.blur=setTimeout((()=>{d()}),1)})),e(s.contents())(t)}}}function c(e){return{link:(e,t)=>{const s=t[0],a=()=>{const e=new Event("change");return s.dispatchEvent(e)},n=({animationName:e})=>{switch(e){case"onAutoFillStart":case"onAutoFillCancel":return a()}return null};s.addEventListener("animationstart",n),e.$on("$destroy",(()=>{s.removeEventListener("animationstart",n)}))}}}function d(e,t,s){return{scope:{segment:"=",getOptions:"&",onChange:"&",debounce:"@"},link:(n,r)=>{const o=i()('<input type="text" data-provide="typeahead"  class="gf-form-input input-medium" spellcheck="false" style="display:none"></input>'),l=n.segment,c=i()(l.selectMode?'<a class="gf-form-input gf-form-input--dropdown" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>':'<a class="gf-form-label" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>');let d=null,u=null,p=!0;const h=n.debounce;o.appendTo(r),c.appendTo(r),n.updateVariableValue=e=>{""!==e&&l.value!==e&&n.$apply((()=>{const i=(0,a.find)(n.altSegments,{value:e});i?(l.value=i.value,l.html=i.html||t.trustAsHtml(s.highlightVariablesAsHtml(i.value)),l.fake=!1,l.expandable=i.expandable,i.type&&(l.type=i.type)):"false"!==l.custom&&(l.value=e,l.html=t.trustAsHtml(s.highlightVariablesAsHtml(e)),l.expandable=!0,l.fake=!1),n.onChange()}))},n.switchToLink=e=>{p&&!e||(clearTimeout(u),u=null,p=!0,o.hide(),c.show(),n.updateVariableValue(o.val()))},n.inputBlur=()=>{u=setTimeout(n.switchToLink,200)},n.source=(e,t)=>{n.$apply((()=>{n.getOptions({$query:e}).then((e=>{n.altSegments=e,d=(0,a.map)(n.altSegments,(e=>(0,a.escape)(e.value))),"false"!==l.custom&&(l.fake||-1!==(0,a.indexOf)(d,l.value)||d.unshift((0,a.escape)(l.value))),t(d)}))}))},n.updater=e=>(e=(0,a.unescape)(e))===l.value?(clearTimeout(u),o.focus(),e):(o.val(e),n.switchToLink(!0),e),n.matcher=function(e){if(p)return!1;let t=this.query;"/"===t[0]&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1));try{return e.toLowerCase().match(t.toLowerCase())}catch(e){return!1}},o.attr("data-provide","typeahead"),o.typeahead({source:n.source,minLength:0,items:1e4,updater:n.updater,matcher:n.matcher});const g=o.data("typeahead");g.lookup=function(){this.query=this.$element.val()||"";const e=this.source(this.query,i().proxy(this.process,this));return e?this.process(e):e},h&&(g.lookup=(0,a.debounce)(g.lookup,500,{leading:!0})),c.keydown((e=>{40!==e.keyCode&&13!==e.keyCode||c.click()})),c.click((()=>{d=null,o.css("width",Math.max(c.width(),80)+16+"px"),c.hide(),o.show(),o.focus(),p=!1;const e=o.data("typeahead");e&&(o.val(""),e.lookup())})),o.blur(n.inputBlur),e(r.contents())(n)}}}function u(e){return{template:'<metric-segment segment="segment" get-options="getOptionsInternal()" on-change="onSegmentChange()"></metric-segment>',restrict:"E",scope:{property:"=",options:"=",getOptions:"&",onChange:"&"},link:{pre:function(t,s,n){let i;t.valueToSegment=s=>{const i=(0,a.find)(t.options,{value:s}),r={cssClass:n.cssClass,custom:n.custom,value:i?i.text:s,selectMode:n.selectMode};return e.newSegment(r)},t.getOptionsInternal=()=>t.options?(i=t.options,Promise.resolve((0,a.map)(t.options,(e=>({value:e.text}))))):t.getOptions().then((e=>(i=e,(0,a.map)(e,(e=>e.html?e:{value:e.text}))))),t.onSegmentChange=()=>{if(i){const e=(0,a.find)(i,{text:t.segment.value});e&&e.value!==t.property?t.property=e.value:"false"!==n.custom&&(t.property=t.segment.value)}else t.property=t.segment.value;t.$$postDigest((()=>{t.$apply((()=>{t.onChange()}))}))},t.segment=t.valueToSegment(t.property)}}}}l.$inject=["$compile"],o.$inject=["$compile"],r.ZP.directive("dropdownTypeahead",o),r.ZP.directive("dropdownTypeahead2",l),c.$inject=["$compile"],r.ZP.directive("autofillEventFix",c),u.$inject=["uiSegmentSrv"],d.$inject=["$compile","$sce","templateSrv"],r.ZP.directive("metricSegment",d),r.ZP.directive("metricSegmentModel",u);var p=s("./node_modules/angular/index.js"),h=s.n(p),g=s("./node_modules/clipboard/dist/clipboard.js"),m=s.n(g),f=s("./public/app/core/utils/kbn.ts"),b=s("./packages/grafana-data/src/index.ts");function v(e){return{restrict:"E",link:(t,s,a)=>{let n='<i class="grafana-tip fa fa-'+(a.icon||"question-circle")+'" bs-tooltip="\''+f.Z.addSlashes(s.text())+"'\"></i>";n=n.replace(/{/g,"\\{").replace(/}/g,"\\}"),s.replaceWith(e(h().element(n))(t))}}}function x(e){return{restrict:"A",link:(t,s,a)=>{t.$watch((e=>e.$eval(a.compile)),(a=>{s.html(a),e(s.contents())(t)}))}}}function y(e){return{restrict:"E",link:(t,s,a)=>{const n=a.change?' ng-change="'+a.change+'"':"",i=a.tip?" <tip>"+a.tip+"</tip>":"",r='<div class="editor-option gf-form-checkbox text-center"'+(a.showIf?' ng-show="'+a.showIf+'" ':"")+'> <label for="'+a.model+'" class="small">'+a.text+i+'</label><input class="cr1" id="'+a.model+'" type="checkbox"        ng-model="'+a.model+'"'+n+'       ng-checked="'+a.model+'"></input> <label for="'+a.model+'" class="cr1"></label>';s.replaceWith(e(h().element(r))(t))}}}function w(e,t){return{restrict:"E",link:(s,a,n)=>{const i=t(n.text)(s),r=t(n.model)(s),o=n.change?' ng-change="'+n.change+'"':"",l=n.tip?" <tip>"+n.tip+"</tip>":"",c='<label for="'+s.$id+r+'" class="checkbox-label">'+i+l+"</label>";let d='<input class="cr1" id="'+s.$id+r+'" type="checkbox"        ng-model="'+r+'"'+o+'       ng-checked="'+r+'"></input> <label for="'+s.$id+r+'" class="cr1"></label>';d+=c,a.addClass("gf-form-checkbox"),a.html(e(h().element(d))(s))}}}function j(e,t,s){function a(e,t){const s=['<ul class="dropdown-menu '+("top"===t?"dropup":"")+'" role="menu" aria-labelledby="drop1">',"</ul>"];for(let t=0;t<e.length;t++){const n=e[t];if(n.divider){s.splice(t+1,0,'<li class="divider"></li>');continue}let i="<li"+(n.submenu&&n.submenu.length?' class="dropdown-submenu"':"")+'><a tabindex="-1" ng-href="'+(n.href||"")+'"'+(n.click?' ng-click="'+n.click+'"':"")+(n.target?' target="'+n.target+'"':"")+(n.method?' data-method="'+n.method+'"':"")+">"+(n.text||"")+"</a>";n.submenu&&n.submenu.length&&(i+=a(n.submenu).join("\n")),i+="</li>",s.splice(t+1,0,i)}return s}return{restrict:"EA",scope:!0,link:function(n,i,r){const o=e(r.gfDropdown)(n);s((()=>{const e=i.data("placement");h().element(a(o,e).join("")).insertAfter(i),t(i.next("ul.dropdown-menu"))(n)})),i.addClass("dropdown-toggle").attr("data-toggle","dropdown")}}}j.$inject=["$parse","$compile","$timeout"],w.$inject=["$compile","$interpolate"],y.$inject=["$compile"],x.$inject=["$compile"],v.$inject=["$compile"],r.ZP.directive("tip",v),r.ZP.directive("clipboardButton",(function(){return{scope:{getText:"&clipboardButton"},link:(e,t)=>{e.clipboard=new(m())(t[0],{text:()=>e.getText()}),e.clipboard.on("success",(()=>{se.Z.emit(b.AppEvents.alertSuccess,["Content copied to clipboard"])})),e.$on("$destroy",(()=>{e.clipboard&&e.clipboard.destroy()}))}}})),r.ZP.directive("compile",x),r.ZP.directive("watchChange",(function(){return{scope:{onchange:"&watchChange"},link:(e,t)=>{t.on("input",(()=>{e.$apply((()=>{e.onchange({inputValue:t.val()})}))}))}}})),r.ZP.directive("editorOptBool",y),r.ZP.directive("editorCheckbox",w),r.ZP.directive("gfDropdown",j),r.ZP.directive("ngModelOnblur",(function(){return{restrict:"A",priority:1,require:"ngModel",link:(e,t,s,a)=>{"radio"!==s.type&&"checkbox"!==s.type&&(t.off("input keydown change"),t.bind("blur",(()=>{e.$apply((()=>{a.$setViewValue(t.val())}))})))}}})),r.ZP.directive("emptyToNull",(function(){return{restrict:"A",require:"ngModel",link:(e,t,s,a)=>{a.$parsers.push((e=>""===e?null:e))}}})),r.ZP.directive("validTimeSpan",(function(){return{require:"ngModel",link:(e,t,s,a)=>{a.$validators.integer=(e,t)=>{if(a.$isEmpty(e))return!0;if(0===t.indexOf("$")||0===t.indexOf("+$"))return!0;return!0!==b.rangeUtil.describeTextRange(t).invalid}}}}));var k=s("./packages/grafana-ui/src/index.ts");s("./public/vendor/tagsinput/bootstrap-tagsinput.js");function S(e,t){const{color:s,borderColor:a}=(0,k.getTagColorsFromName)(e);t.css("background-color",s),t.css("border-color",a)}function C(e){return{multiElement:!0,terminal:!0,transclude:!0,priority:600,restrict:"E",link:(t,s,a,n,r)=>{let o,l,c;function d(){c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),o&&(c=function(e){let t=e[0];const s=e[e.length-1];let a;t=t.nextSibling;for(let n=1;t!==s&&t;n++)(a||e[n]!==t)&&(a||(a=i()([].slice.call(e,0,n))),a.push(t)),t=t.nextSibling;return a||e}(o.clone),e.leave(c).then((()=>{c=null})),o=null)}t.$watch(a.property,(function(t,n){l&&t!==n&&d(),l||!t&&!a.showNull?d():r(((t,a)=>{l=a,t[t.length++]=document.createComment(" end rebuild on change "),o={clone:t},e.enter(t,s.parent(),s)}))}))}}}r.ZP.directive("tagColorFromName",(function(){return{scope:{tagColorFromName:"="},link:(e,t)=>{S(e.tagColorFromName,t)}}})),r.ZP.directive("bootstrapTagsinput",(function(){function e(e,t){if(t)return h().isFunction(e.$parent[t])?e.$parent[t]:e=>e[t]}return{restrict:"EA",scope:{model:"=ngModel",onTagsUpdated:"&"},template:"<select multiple></select>",replace:!1,link:function(t,s,a){h().isArray(t.model)||(t.model=[]);const n=i()("select",s);a.placeholder&&n.attr("placeholder",a.placeholder),n.tagsinput({typeahead:{source:h().isFunction(t.$parent[a.typeaheadSource])?t.$parent[a.typeaheadSource]:null},widthClass:a.widthClass,itemValue:e(t,a.itemvalue),itemText:e(t,a.itemtext),tagClass:h().isFunction(t.$parent[a.tagclass])?t.$parent[a.tagclass]:()=>a.tagclass}),n.on("itemAdded",(e=>{-1===t.model.indexOf(e.item)&&(t.model.push(e.item),t.onTagsUpdated&&t.onTagsUpdated());const s=n.next().children("span").filter((()=>i()(this).text()===e.item));S(e.item,s)})),n.on("itemRemoved",(e=>{const s=t.model.indexOf(e.item);-1!==s&&(t.model.splice(s,1),t.onTagsUpdated&&t.onTagsUpdated())})),t.$watch("model",(()=>{h().isArray(t.model)||(t.model=[]),n.tagsinput("removeAll");for(let e=0;e<t.model.length;e++)n.tagsinput("add",t.model[e])}),!0)}}})),C.$inject=["$animate"],r.ZP.directive("rebuildOnChange",C),r.ZP.directive("giveFocus",(()=>(e,t,s)=>{t.click((e=>{e.stopPropagation()})),e.$watch(s.giveFocus,(e=>{e&&setTimeout((()=>{t.focus();const e=t[0];if(e.setSelectionRange){const s=2*t.val().length;e.setSelectionRange(s,s)}}),200)}),!0)}));class T{constructor(){var e,t,s;s=void 0,(t="observer")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s;this.observer=new MutationObserver((()=>{}));this.observer.observe(h().element(".delta-html")[0],{attributes:!0,attributeFilter:["class"],characterData:!1,childList:!0,subtree:!1})}$onDestroy(){this.observer.disconnect()}}T.$inject=[],r.ZP.directive("diffDelta",(function(){return{controller:T,replace:!1,restrict:"A"}}));class N{constructor(e,t,s){this.$scope=e,this.$rootScope=t,this.$anchorScroll=s}goToLine(e){let t;const s=()=>{this.$anchorScroll(`l${e}`),t()};this.$scope.switchView().then((()=>{t=this.$rootScope.$on("json-diff-ready",s.bind(this))}))}}N.$inject=["$scope","$rootScope","$anchorScroll"],r.ZP.directive("diffLinkJson",(function(){return{controller:N,controllerAs:"ctrl",replace:!0,restrict:"E",scope:{line:"@lineDisplay",link:"@lineLink",switchView:"&"},template:'<a class="diff-linenum btn btn-inverse btn-small" ng-click="ctrl.goToLine(link)">Line {{ line }}</a>'}}));const O=i()(window);i().fn.place_tt=(()=>{const e={offset:5};return function(t,s,n){return n=i().extend(!0,{},e,n),this.each((()=>{const e=i()(this);let r,o;e.addClass("grafana-tooltip"),i()("#tooltip").remove(),e.appendTo(document.body),n.compile&&h().element(document).injector().invoke(["$compile","$rootScope",(t,s)=>{const i=s.$new(!0);(0,a.extend)(i,n.scopeData),t(e)(i),i.$digest(),i.$destroy()}]),r=e.outerWidth(!0),o=e.outerHeight(!0);const l=t+n.offset+r>O.width()?t-n.offset-r:t+n.offset,c=s+n.offset+o>O.height()?s-n.offset-o:s+n.offset;e.css("left",l>0?l:0),e.css("top",c>0?c:0)}))}})();s("./public/app/core/partials.ts");r.ZP.directive("jsonTree",[function(){return{restrict:"E",scope:{object:"=",startExpanded:"@",rootName:"@"},link:(e,t)=>{let s=e.startExpanded;"true"===e.startExpanded?s=2:"false"===e.startExpanded&&(s=1);const a={[e.rootName]:e.object},n=new k.JsonExplorer(a,s,{animateOpen:!0}).render(!0);t.append(n)}}}]);var I=s("./public/app/core/config.ts");async function P(e,t,a){const n=a.mode||"text",i=a.maxLines||10,r=void 0!==a.showGutter,o=a.tabSize||2,l=!a.behavioursEnabled||"true"===a.behavioursEnabled,c=!a.snippetsEnabled||"true"===a.snippetsEnabled,d=t.get(0),{default:u}=await s.e(5673).then(s.t.bind(s,"./node_modules/brace/index.js",23));await s.e(5335).then(s.t.bind(s,"./node_modules/brace/ext/language_tools.js",23)),await s.e(2089).then(s.t.bind(s,"./node_modules/brace/theme/textmate.js",23)),await s.e(5694).then(s.t.bind(s,"./node_modules/brace/mode/text.js",23)),await s.e(7030).then(s.t.bind(s,"./node_modules/brace/snippets/text.js",23)),await s.e(8883).then(s.t.bind(s,"./node_modules/brace/mode/sql.js",23)),await s.e(8023).then(s.t.bind(s,"./node_modules/brace/snippets/sql.js",23)),await s.e(574).then(s.t.bind(s,"./node_modules/brace/mode/sqlserver.js",23)),await s.e(5948).then(s.t.bind(s,"./node_modules/brace/snippets/sqlserver.js",23)),await s.e(6061).then(s.t.bind(s,"./node_modules/brace/mode/markdown.js",23)),await s.e(4662).then(s.t.bind(s,"./node_modules/brace/snippets/markdown.js",23)),await s.e(8750).then(s.t.bind(s,"./node_modules/brace/mode/json.js",23)),await s.e(8055).then(s.t.bind(s,"./node_modules/brace/snippets/json.js",23)),await s.e(5052).then(s.t.bind(s,"./public/app/core/components/code_editor/theme-grafana-dark.js",23));const p=u.edit(d),h=p.getSession(),g={maxLines:i,showGutter:r,tabSize:o,behavioursEnabled:l,highlightActiveLine:!1,showPrintMargin:!1,autoScrollEditorIntoView:!0};p.setOptions(g),p.$blockScrolling=1/0,p.renderer.setScrollMargin(10,10),p.renderer.setPadding(10),function(){let e="ace/theme/grafana-dark";I.ZP.bootData.user.lightTheme&&(e="ace/theme/textmate");p.setTheme(e)}(),function(t){if(u.acequire("ace/ext/language_tools"),p.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:c}),e.getCompleter()){const t=p;t.completers=t.completers.slice(),t.completers.push(e.getCompleter())}const s=`ace/mode/${t}`;h.setMode(s)}(n),f(e.content),t.addClass("gf-code-editor");const m=t.find("textarea");function f(e){p.setValue(e),p.clearSelection()}m.addClass("gf-form-input"),e.codeEditorFocus&&setTimeout((()=>{m.focus();const e=m[0];if(e.setSelectionRange){const t=2*m.val().length;e.setSelectionRange(t,t)}}),100),h.on("change",(t=>{e.$apply((()=>{const t=p.getValue();e.content=t}))})),e.$watch("content",((t,s)=>{const a=p.getValue();t!==a&&t!==s&&e.$$postDigest((()=>{f(t)}))})),p.on("blur",(()=>{e.onChange()})),e.$on("$destroy",(()=>{p.destroy()})),p.commands.addCommand({name:"executeQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:()=>{e.onChange()}})}r.ZP.directive("codeEditor",(function(){return{restrict:"E",template:"<div></div>",scope:{content:"=",datasource:"=",codeEditorFocus:"<",onChange:"&",getCompleter:"&"},link:P}})),r.ZP.directive("spectrumPicker",(function(){return{restrict:"E",require:"ngModel",scope:!0,replace:!0,template:'<color-picker color="ngModel.$viewValue" on-change="onColorChange"></color-picker>',link:(e,t,s,a)=>{e.ngModel=a,e.onColorChange=e=>{a.$setViewValue(e)}}}}));s("./public/app/core/services/search_srv.ts");var M=s("./node_modules/react/index.js"),F=s("./node_modules/react-dom/index.js");function A(e,t){if(h().isFunction(e))return e;if(!e)throw new Error("ReactComponent name attribute must be specified");let s;try{s=t.get(e)}catch(e){}if(!s)try{s=e.split(".").reduce(((e,t)=>e[t]),window)}catch(e){}if(!s)throw Error("Cannot find react component "+e);return s}function D(e,t,s){return Object.keys(e||{}).reduce(((a,n)=>{const i=e[n],r=(s||{})[n]||{};return a[n]=h().isFunction(i)&&!1!==r.wrapApply?function(e,t){if(e.wrappedInApply)return e;const s=function(){const s=arguments,a=t.$root.$$phase;return"$apply"===a||"$digest"===a?e.apply(null,s):t.$apply((()=>e.apply(null,s)))};return s.wrappedInApply=!0,s}(i,t):i,a}),{})}function $(e,t,s,a){const n=h().isFunction(t.$watchCollection),i=h().isFunction(t.$watchGroup),r=[];for(const l of s){const s=(o=l,Array.isArray(o)?o[0]:o),c=_(e,l);s&&!s.match(/\(.*\)/)&&"one-time"!==c&&("collection"===c&&n?t.$watchCollection(s,a):"reference"===c&&i?r.push(s):t.$watch(s,a,"reference"!==c))}var o;"one-time"===e&&a(),r.length&&t.$watchGroup(r,a)}function L(e,t,s,a){s.$evalAsync((()=>{F.render(M.createElement(e,t),a[0])}))}function E(e){return Array.isArray(e)?e[1]:{}}function R(e,t){return e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()||e.toLowerCase()===(0,a.kebabCase)(t)))]}function _(e,t){return Array.isArray(t)&&h().isObject(t[1])&&t[1].watchDepth||e}const V=h().module("react",[]);V.directive("reactComponent",["$injector",e=>({restrict:"E",replace:!0,link:function(t,s,a){const n=A(a.name,e),i=()=>{const e=D(t.$eval(a.props),t);L(n,e,t,s)};a.props?$(a.watchDepth,t,[a.props],i):i(),t.$on("$destroy",(()=>{a.onScopeDestroy?t.$eval(a.onScopeDestroy,{unmountComponent:F.unmountComponentAtNode.bind(this,s[0])}):F.unmountComponentAtNode(s[0])}))}})]),V.factory("reactDirective",["$injector",e=>(t,s,a,n)=>{const i={restrict:"E",replace:!0,link:function(a,i,r){const o=A(t,e),l=()=>{let e={};const t={};s.forEach((s=>{const n=function(e){return Array.isArray(e)?e[0]:e}(s);e[n]=a.$eval(R(r,n)),t[n]=E(s)})),e=D(e,a,t),e=h().extend({},e,n),L(o,e,a,i)},c=(s=s||Object.keys(o.propTypes||{})).map((e=>Array.isArray(e)?[R(r,e[0]),E(e)]:R(r,e)));s.length?$(r.watchDepth,a,c,l):l(),a.$on("$destroy",(()=>{r.onScopeDestroy?a.$eval(r.onScopeDestroy,{unmountComponent:F.unmountComponentAtNode.bind(this,i[0])}):F.unmountComponentAtNode(i[0])}))}};return h().extend(i,a)}]);var B=s("./node_modules/tether-drop/dist/js/drop.js"),z=s.n(B);function U(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}r.ZP.directive("infoPopover",(function(){return{restrict:"E",template:'<icon name="\'info-circle\'" style="margin-left: 10px;" size="\'xs\'"></icon>',transclude:!0,link:(e,t,s,n,i)=>{const r=s.offset||"0 -10px",o=s.position||"right middle";let l="drop-help drop-hide-out-of-bounds";t.addClass("gf-form-help-icon"),s.wide&&(l+=" drop-wide"),s.mode&&t.addClass("gf-form-help-icon--"+s.mode),i(((s,n)=>{const i=document.createElement("div");i.className="markdown-html",(0,a.each)(s,(e=>{i.appendChild(e)}));const c={target:t[0],content:i,position:o,classes:l,openOn:"hover",hoverOpenDelay:400,tetherOptions:{offset:r,constraints:[{to:"window",attachment:"together",pin:!0}]}};e.$applyAsync((()=>{const t=new(z())(c),s=e.$on("$destroy",(()=>{t.destroy(),s()}))}))}))}}})),r.ZP.directive("arrayJoin",(function(){return{restrict:"A",require:"ngModel",link:(e,t,s,n)=>{n.$parsers.push((function(e){return(e||"").split(",")})),n.$formatters.push((function(e){return(0,a.isArray)(e)?(e||"").join(","):e}))}}}));class q{constructor(e,t){U(this,"onChange",void 0),U(this,"checked",void 0),U(this,"show",void 0),U(this,"id",void 0),U(this,"label",void 0),this.$timeout=t,this.show=!0,this.id=e.$id}internalOnChange(){return this.$timeout((()=>this.onChange()))}}q.$inject=["$scope","$timeout"],r.ZP.directive("gfFormSwitch",(function(){return{restrict:"E",controller:q,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:'\n<label for="check-{{ctrl.id}}" class="gf-form-switch-container">\n  <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">\n    {{ctrl.label}}\n    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">\n      {{ctrl.tooltip}}\n    </info-popover>\n  </div>\n  <div class="gf-form-switch {{ctrl.switchClass}}" ng-if="ctrl.show">\n    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">\n    <span class="gf-form-switch__slider"></span>\n  </div>\n</label>\n'}})),r.ZP.directive("gfFormCheckbox",(function(){return{restrict:"E",controller:q,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:'\n<label for="check-{{ctrl.id}}" class="gf-form-switch-container">\n   <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">\n    {{ctrl.label}}\n    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">\n      {{ctrl.tooltip}}\n    </info-popover>\n  </div>\n  <div class="gf-form-checkbox {{ctrl.switchClass}}" ng-if="ctrl.show">\n    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">\n    <span class="gf-form-switch__checkbox"></span>\n  </div>\n</label>\n'}}));var H=s("./public/app/core/services/backend_srv.ts");function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class W{constructor(){G(this,"model",void 0),G(this,"options",void 0)}$onInit(){return this.options=[{value:0,text:"Default"}],H.ae.search({starred:!0}).then((e=>{e.forEach((e=>{this.options.push({value:e.id,text:e.title})}))}))}}W.$inject=[],r.ZP.directive("dashboardSelector",(function(){return{restrict:"E",controller:W,bindToController:!0,controllerAs:"ctrl",template:'\n<select class="gf-form-input" ng-model="ctrl.model" ng-options="f.value as f.text for f in ctrl.options"></select>\n',scope:{model:"="}}}));var Z=s("./public/app/core/utils/promiseToDigest.ts");Q.$inject=["templateSrv"];function Q(e){return{restrict:"E",template:'\n<div class="dropdown cascade-open">\n<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.def.type}}</a>\n<span>(</span><span class="query-part-parameters"></span><span>)</span>\n<ul class="dropdown-menu">\n  <li ng-repeat="action in partActions">\n    <a ng-click="triggerPartAction(action)">{{action.text}}</a>\n  </li>\n</ul>\n',scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(t,s){const n=t.part,r=n.def,o=s.find(".query-part-parameters"),l=t.debounce;function c(e){const t=i()(this),s=t.next();s.val(n.params[e]),s.css("width",t.width()+16+"px"),t.hide(),s.show(),s.focus(),s.select();const a=s.data("typeahead");a&&(s.val(""),a.lookup())}function d(s){const a=i()(this),r=a.prev(),o=a.val();(""!==o||n.def.params[s].optional)&&(r.html(e.highlightVariablesAsHtml(o)),n.updateParam(a.val(),s),t.$apply((()=>{t.handleEvent({$event:{name:"part-param-changed"}})}))),a.hide(),r.show()}function u(e,t){13===t.which&&d.call(this,e)}function p(){this.style.width=8*(3+this.value.length)+"px"}function h(){(0,a.each)(r.params,((s,r)=>{if(s.optional&&n.params.length<=r)return;r>0&&i()("<span>, </span>").appendTo(o);const h=e.highlightVariablesAsHtml(n.params[r]),g=i()('<a class="graphite-func-param-link pointer">'+h+"</a>"),m=i()('<input type="text" class="hide input-mini tight-form-func-param"></input>');g.appendTo(o),m.appendTo(o),m.blur((0,a.partial)(d,r)),m.keyup(p),m.keypress((0,a.partial)(u,r)),g.click((0,a.partial)(c,r)),function(e,s,n){if(!s.options&&!s.dynamicLookup)return;e.attr("data-provide","typeahead"),e.typeahead({source:(e,n)=>{if(s.options){let e=s.options;return"int"===s.type&&(e=(0,a.map)(e,(e=>e.toString()))),e}t.$apply((()=>{t.handleEvent({$event:{name:"get-param-options"}}).then((e=>{const t=(0,a.map)(e,(e=>(0,a.escape)(e.value)));n(t)}))}))},minLength:0,items:1e3,updater:t=>(t=(0,a.unescape)(t),setTimeout((()=>{d.call(e[0],n)}),0),t)});const r=e.data("typeahead");r.lookup=function(){this.query=this.$element.val()||"";const e=this.source(this.query,i().proxy(this.process,this));return e?this.process(e):e},l&&(r.lookup=(0,a.debounce)(r.lookup,500,{leading:!0}))}(m,s,r)}))}t.partActions=[],t.showActionsMenu=()=>{(0,Z.E)(t)(t.handleEvent({$event:{name:"get-part-actions"}}).then((e=>{t.partActions=e})))},t.triggerPartAction=e=>{t.handleEvent({$event:{name:"action",action:e}})},o.empty(),h()}}}r.ZP.directive("queryPartEditor",Q),K.$inject=["templateSrv"];function K(e){return{restrict:"E",template:'\n<div class="dropdown cascade-open">\n<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.label}}</a>\n<span>{{part.def.wrapOpen}}</span><span class="query-part-parameters"></span><span>{{part.def.wrapClose}}</span>\n<ul class="dropdown-menu">\n  <li ng-repeat="action in partActions">\n    <a ng-click="triggerPartAction(action)">{{action.text}}</a>\n  </li>\n</ul>\n',scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(t,s){const n=t.part,r=n.def,o=s.find(".query-part-parameters"),l=t.debounce;let c=null;function d(e){const t=i()(this),s=t.next();s.val(n.params[e]),s.css("width",t.width()+16+"px"),t.hide(),s.show(),s.focus(),s.select();const a=s.data("typeahead");a&&(s.val(""),a.lookup())}function u(e,t){c=setTimeout((()=>{p(e,t)}),200)}function p(s,a){const i=s.prev(),r=s.val();(""!==r||n.def.params[a].optional)&&(i.html(e.highlightVariablesAsHtml(r)),n.updateParam(s.val(),a),t.$apply((()=>{t.handleEvent({$event:{name:"part-param-changed"}})}))),s.hide(),i.show()}function h(e,t){13===t.which&&p(i()(this),e)}function g(){this.style.width=8*(3+this.value.length)+"px"}function m(){(0,a.each)(r.params,((s,p)=>{if(s.optional&&n.params.length<=p)return;p>0&&i()("<span>"+r.separator+"</span>").appendTo(o);const m=e.highlightVariablesAsHtml(n.params[p]),f=i()('<a class="query-part__link">'+m+"</a>"),b=i()('<input type="text" class="hide input-mini"></input>');f.appendTo(o),b.appendTo(o),b.blur((0,a.partial)(u,b,p)),b.keyup(g),b.keypress((0,a.partial)(h,p)),f.click((0,a.partial)(d,p)),function(e,s,r){if(!s.options&&!s.dynamicLookup)return;e.attr("data-provide","typeahead"),e.typeahead({source:(e,i)=>{if(s.options){let e=s.options;return"int"===s.type&&(e=(0,a.map)(e,(e=>e.toString()))),e}t.$apply((()=>{t.handleEvent({$event:{name:"get-param-options",param:s}}).then((e=>{const t=(0,a.map)(e,(e=>(0,a.escape)(e.value)));-1===(0,a.indexOf)(t,n.params[r])&&t.unshift((0,a.escape)(n.params[r])),i(t)}))}))},minLength:0,items:1e3,updater:t=>(t=(0,a.unescape)(t))===n.params[r]?(clearTimeout(c),e.focus(),t):t});const o=e.data("typeahead");o.lookup=function(){this.query=this.$element.val()||"";const e=this.source(this.query,i().proxy(this.process,this));return e?this.process(e):e},l&&(o.lookup=(0,a.debounce)(o.lookup,500,{leading:!0}))}(b,s,p)}))}t.partActions=[],t.showActionsMenu=()=>{t.handleEvent({$event:{name:"get-part-actions"}}).then((e=>{t.partActions=e}))},t.triggerPartAction=e=>{t.handleEvent({$event:{name:"action",action:e}})},o.empty(),m()}}}function Y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function J(e){let t=this.query;return""===t||("/"===t[0]&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),e.toLowerCase().match(t.toLowerCase()))}r.ZP.directive("sqlPartEditor",K);class X{constructor(e,t,s,a){Y(this,"inputElement",void 0),Y(this,"linkElement",void 0),Y(this,"model",void 0),Y(this,"display",void 0),Y(this,"text",void 0),Y(this,"options",void 0),Y(this,"cssClass",void 0),Y(this,"cssClasses",void 0),Y(this,"allowCustom",void 0),Y(this,"labelMode",void 0),Y(this,"linkMode",void 0),Y(this,"cancelBlur",void 0),Y(this,"onChange",void 0),Y(this,"getOptions",void 0),Y(this,"optionCache",void 0),Y(this,"lookupText",void 0),Y(this,"placeholder",void 0),Y(this,"startOpen",void 0),Y(this,"debounce",void 0),this.$scope=e,this.$sce=s,this.templateSrv=a,this.inputElement=t.find("input").first(),this.linkElement=t.find("a").first(),this.linkMode=!0,this.cancelBlur=null,this.labelMode=!1,this.lookupText=!1,this.debounce=!1,e.$watch("ctrl.model",this.modelChanged.bind(this))}$onInit(){this.labelMode?this.cssClasses="gf-form-label "+this.cssClass:this.cssClasses="gf-form-input gf-form-input--dropdown "+this.cssClass,this.placeholder&&this.inputElement.attr("placeholder",this.placeholder),this.inputElement.attr("data-provide","typeahead"),this.inputElement.typeahead({source:this.typeaheadSource.bind(this),minLength:0,items:1e4,updater:this.typeaheadUpdater.bind(this),matcher:J});const e=this.inputElement.data("typeahead");e.lookup=function(){this.query=this.$element.val()||"",this.source(this.query,this.process.bind(this))},this.debounce&&(e.lookup=(0,a.debounce)(e.lookup,500,{leading:!0})),this.linkElement.keydown((e=>{40!==e.keyCode&&13!==e.keyCode||this.linkElement.click()})),this.inputElement.keydown((e=>{13===e.keyCode&&setTimeout((()=>{this.inputElement.blur()}),300)})),this.inputElement.blur(this.inputBlur.bind(this)),this.startOpen&&setTimeout(this.open.bind(this),0)}getOptionsInternal(e){return(0,Z.E)(this.$scope)(Promise.resolve(this.getOptions({$query:e})))}isPromiseLike(e){return e&&"function"==typeof e.then}modelChanged(){(0,a.isObject)(this.model)?this.updateDisplay(this.model.text):this.lookupText?this.getOptionsInternal("").then((e=>{const t=(0,a.find)(e,{value:this.model});this.updateDisplay(t?t.text:this.model)})):this.updateDisplay(this.model)}typeaheadSource(e,t){this.getOptionsInternal(e).then((e=>{this.optionCache=e;const s=(0,a.map)(e,(e=>(0,a.escape)(e.text)));this.allowCustom&&""!==this.text&&-1===(0,a.indexOf)(s,this.text)&&s.unshift(this.text),t(s)}))}typeaheadUpdater(e){return e===this.text?(clearTimeout(this.cancelBlur),this.inputElement.focus(),e):(this.inputElement.val(e),this.switchToLink(!0),e)}switchToLink(e){this.linkMode&&!e||(clearTimeout(this.cancelBlur),this.cancelBlur=null,this.linkMode=!0,this.inputElement.hide(),this.linkElement.show(),this.updateValue(this.inputElement.val()))}inputBlur(){this.cancelBlur=setTimeout(this.switchToLink.bind(this),200)}updateValue(e){""!==(e=(0,a.unescape)(e))&&this.text!==e&&this.$scope.$apply((()=>{const t=(0,a.find)(this.optionCache,{text:e});t?((0,a.isObject)(this.model)?this.model=t:this.model=t.value,this.text=t.text):this.allowCustom&&((0,a.isObject)(this.model)?this.model.text=this.model.value=e:this.model=e,this.text=e),this.$scope.$$postDigest((()=>{this.$scope.$apply((()=>{this.onChange({$option:t})}))}))}))}updateDisplay(e){this.text=e,this.display=this.$sce.trustAsHtml(this.templateSrv.highlightVariablesAsHtml(e))}open(){this.inputElement.css("width",Math.max(this.linkElement.width(),80)+16+"px"),this.inputElement.show(),this.inputElement.focus(),this.linkElement.hide(),this.linkMode=!1;const e=this.inputElement.data("typeahead");e&&(this.inputElement.val(""),e.lookup())}}X.$inject=["$scope","$element","$sce","templateSrv"];r.ZP.directive("gfFormDropdown",(function(){return{restrict:"E",template:'\n<input type="text"\n  data-provide="typeahead"\n  class="gf-form-input"\n  spellcheck="false"\n  style="display:none">\n</input>\n<a ng-class="ctrl.cssClasses"\n   tabindex="1"\n   ng-click="ctrl.open()"\n   give-focus="ctrl.focus"\n   ng-bind-html="ctrl.display || \'&nbsp;\'">\n</a>\n',controller:X,bindToController:!0,controllerAs:"ctrl",scope:{model:"=",getOptions:"&",onChange:"&",cssClass:"@",allowCustom:"@",labelMode:"@",lookupText:"@",placeholder:"@",startOpen:"@",debounce:"@"}}}));class ee{constructor(){}set(){console.warn("old deprecated alert srv being used")}}ee.$inject=[],r.ZP.service("alertSrv",ee);var te,se=s("./public/app/core/app_events.ts"),ae=s("./public/app/core/utils/connectWithReduxStore.tsx"),ne=s("./node_modules/react/jsx-runtime.js");const ie=(0,ae.k)((e=>(0,ne.jsx)(ne.Fragment,{children:(0,ne.jsx)(k.ModalsProvider,Object.assign({},e,{children:te||(te=(0,ne.jsx)(k.ModalRoot,{}))}))})));var re=s("./public/app/core/utils/ConfigProvider.tsx"),oe=s("./public/app/types/events.ts");function le(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ce{constructor(e,t){le(this,"modalScope",void 0),le(this,"reactModalRoot",document.body),le(this,"reactModalNode",document.createElement("div")),le(this,"onReactModalDismiss",(()=>{F.unmountComponentAtNode(this.reactModalNode),this.reactModalRoot.removeChild(this.reactModalNode)})),this.$rootScope=e,this.$modal=t,this.reactModalNode.setAttribute("id","angular2ReactModalRoot")}init(){se.Z.subscribe(oe.le,(e=>this.showModal(e.payload))),se.Z.subscribe(oe.OW,this.hideModal.bind(this)),se.Z.subscribe(oe.VJ,(e=>this.showConfirmModal(e.payload))),se.Z.subscribe(oe.Dn,(e=>this.showModalReact(e.payload)))}showModalReact(e){const{component:t,props:s}=e,a={component:t,props:Object.assign({},s,{isOpen:!0,onDismiss:this.onReactModalDismiss})},n=M.createElement((0,re.ER)(ie),a);this.reactModalRoot.appendChild(this.reactModalNode),F.render(n,this.reactModalNode)}hideModal(){(0,b.deprecationWarning)("UtilSrv","hideModal","showModalReact"),this.modalScope&&this.modalScope.dismiss&&this.modalScope.dismiss()}showModal(e){(0,b.deprecationWarning)("UtilSrv","showModal","showModalReact"),this.modalScope&&this.modalScope.dismiss&&this.modalScope.dismiss(),this.modalScope=e.scope,e.model?(this.modalScope=this.$rootScope.$new(),this.modalScope.model=e.model):this.modalScope||(this.modalScope=this.$rootScope.$new());const t=this.$modal({modalClass:e.modalClass,template:e.src,templateHtml:e.templateHtml,persist:!1,show:!1,scope:this.modalScope,keyboard:!1,backdrop:e.backdrop});Promise.resolve(t).then((e=>{e.modal("show")}))}showConfirmModal(e){const{confirmText:t,onConfirm:s=(()=>{}),text2:a,altActionText:n,onAltAction:i,noText:r,text:o,text2htmlBind:l,yesText:c="Yes",icon:d,title:u="Confirm"}=e,p={confirmText:c,confirmationText:t,icon:d,title:u,body:o,description:a&&l?b.textUtil.sanitize(a):a,isOpen:!0,dismissText:r,onConfirm:()=>{s(),this.onReactModalDismiss()},onDismiss:this.onReactModalDismiss,onAlternative:i?()=>{i(),this.onReactModalDismiss()}:void 0,alternativeText:n},h={component:k.ConfirmModal,props:p},g=M.createElement((0,re.ER)(ie),h);this.reactModalRoot.appendChild(this.reactModalNode),F.render(g,this.reactModalNode)}}ce.$inject=["$rootScope","$modal"],r.ZP.service("utilSrv",ce);var de=s("./public/app/core/services/context_srv.ts");class ue{constructor(e){var t,s,a;a=[],(s="timers")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,this.$timeout=e}register(e){return this.timers.push(e),e}cancel(e){this.timers=(0,a.without)(this.timers,e),this.$timeout.cancel(e)}cancelAll(){(0,a.each)(this.timers,(e=>{this.$timeout.cancel(e)})),this.timers=[]}}function pe(e,t,s){let n=null;this.close=()=>{n&&n.close()},this.show=i=>{n&&(n.close(),n=null);const r=(0,a.extend)(t.$new(!0),i.model);let o;r.dismiss=()=>{o.close()};const l=document.createElement("div");return l.innerHTML=i.template,e(l)(r),s((()=>{o=new(z())({target:i.element,content:l,position:i.position,classes:i.classNames||"drop-popover",openOn:i.openOn,hoverCloseDelay:200,tetherOptions:{constraints:[{to:"scrollParent",attachment:"together"}]}}),o.on("close",(()=>{setTimeout((()=>{r.$destroy(),o.tether&&o.destroy(),i.onClose&&i.onClose()})),n=null})),n=o,n.open()}),100),()=>{o&&o.close()}}}function he(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ge(e,t){const s=this;class n{constructor(s){return he(this,"value",void 0),he(this,"html",void 0),he(this,"type",void 0),he(this,"expandable",void 0),he(this,"text",void 0),he(this,"cssClass",void 0),he(this,"fake",void 0),he(this,"custom",void 0),he(this,"selectMode",void 0),"*"===s||"*"===s.value?(this.value="*",this.html=e.trustAsHtml('<i class="fa fa-asterisk"><i>'),this.type=s.type,void(this.expandable=!0)):(0,a.isString)(s)?(this.value=s,void(this.html=e.trustAsHtml(t.highlightVariablesAsHtml(this.value)))):(this.text=s.value,this.cssClass=s.cssClass,this.custom=s.custom,this.type=s.type,this.fake=s.fake,this.value=s.value,this.selectMode=s.selectMode,this.expandable=s.expandable,void(this.html=s.html||e.trustAsHtml(t.highlightVariablesAsHtml(this.value))))}}this.getSegmentForValue=function(e,t){return e?this.newSegment(e):this.newSegment({value:t,fake:!0})},this.newSelectMeasurement=()=>new n({value:"select measurement",fake:!0}),this.newFake=(e,t,s)=>new n({value:e,fake:!0,type:t,cssClass:s}),this.newSegment=e=>new n(e),this.newKey=e=>new n({value:e,type:"key",cssClass:"query-segment-key"}),this.newKeyValue=e=>new n({value:e,type:"value",cssClass:"query-segment-value"}),this.newCondition=e=>new n({value:e,type:"condition",cssClass:"query-keyword"}),this.newOperator=e=>new n({value:e,type:"operator",cssClass:"query-segment-operator"}),this.newOperators=e=>(0,a.map)(e,(e=>new n({value:e,type:"operator",cssClass:"query-segment-operator"}))),this.transformToSegments=(e,n)=>i=>{const r=(0,a.map)(i,(e=>s.newSegment({value:e.text,expandable:e.expandable})));return e&&(0,a.each)(t.getVariables(),(e=>{void 0!==n&&n!==e.type||r.unshift(s.newSegment({type:"value",value:"$"+e.name,expandable:!0}))})),r},this.newSelectMetric=()=>new n({value:"select metric",fake:!0}),this.newPlusButton=()=>new n({fake:!0,html:'<i class="fa fa-plus "></i>',type:"plus-button",cssClass:"query-part"})}ue.$inject=["$timeout"],r.ZP.service("timer",ue),pe.$inject=["$compile","$rootScope","$timeout"],r.ZP.service("popoverSrv",pe),ge.$inject=["$sce","templateSrv"],r.ZP.service("uiSegmentSrv",ge);class me{constructor(e){this.$compile=e}addDirective(e,t,s){const a=h().element(document.createElement(t));this.$compile(a)(s),e.empty(),e.append(a)}link(e,t,s,a){const n=a.directive(e);n&&n.fn?(n.fn.registered||(r.ZP.directive(s.$normalize(n.name),n.fn),n.fn.registered=!0),this.addDirective(t,n.name,e)):t.empty()}create(e){return{restrict:"E",scope:e.scope,link:(t,s,a)=>{if(e.watchPath){let n=null;t.$watch(e.watchPath,(()=>{n&&n.$destroy(),n=t.$new(),this.link(n,s,a,e)}))}else this.link(t,s,a,e)}}}}me.$inject=["$compile"],r.ZP.service("dynamicDirectiveSrv",me);var fe=s("./public/app/features/templating/template_srv.ts");function be(e=(0,fe.J)()){const t=(t,s)=>{let a;return a=s.ctrl?(s.ctrl.panel||s.ctrl.row).scopedVars:s.row.scopedVars,e.replaceWithText(t,a)};return t.$stateful=!0,t}be.$inject=["templateSrv"],r.ZP.filter("stringSort",(()=>e=>e.sort())),r.ZP.filter("slice",(()=>(e,t,s)=>(0,a.isUndefined)(e)?e:e.slice(t,s))),r.ZP.filter("stringify",(()=>e=>(0,a.isObject)(e)&&!(0,a.isArray)(e)?h().toJson(e):(0,a.isNull)(e)?null:e.toString())),r.ZP.filter("moment",(()=>(e,t)=>{switch(t){case"ago":return(0,b.dateTime)(e).fromNow()}return(0,b.dateTime)(e).fromNow()})),r.ZP.filter("interpolateTemplateVars",be);s("./public/app/core/services/keybindingSrv.ts"),s("./public/app/core/nav_model_srv.ts");var ve=s("./node_modules/baron/src/core.js"),xe=s.n(ve);r.ZP.directive("grafanaScrollbar",(function(){return{restrict:"A",link:(e,t,s)=>{let a=t.parent();const n=t;s.grafanaScrollbar&&"scrollonroot"===s.grafanaScrollbar&&(a=n),a.addClass("baron baron__root"),i()('\n<div class="baron__track">\n  <div class="baron__bar"></div>\n</div>\n').appendTo(a),t.addClass("baron__scroller");const r={root:a[0],scroller:n[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling",track:".baron__track",direction:"v"},o=xe()(r);e.$on("$destroy",(()=>{o.dispose()}))}}}));var ye=s("./public/app/core/profiler.ts");function we(e,t,s){r.ZP.directive(e,["reactDirective",e=>e((0,re.ER)(t),s)])}var je,ke=s("./public/app/plugins/datasource/cloud-monitoring/components/QueryEditor.tsx"),Se=s("./public/app/plugins/datasource/cloud-monitoring/components/index.ts"),Ce=s("./public/app/plugins/datasource/cloud-monitoring/functions.ts"),Te=s("./public/app/plugins/datasource/cloud-monitoring/types.ts");function Ne(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Input:Oe}=k.LegacyForms,Ie={editorMode:Te.je.Visual,projectName:"",projects:[],metricType:"",filters:[],metricKind:Te.lH.GAUGE,valueType:"",refId:"annotationQuery",title:"",text:"",labels:{},variableOptionGroup:{},variableOptions:[]};class Pe extends M.Component{constructor(...e){super(...e),Ne(this,"state",Ie),Ne(this,"onMetricTypeChange",(({valueType:e,metricKind:t,type:s,unit:a})=>{const{onQueryChange:n,datasource:i}=this.props;this.setState({metricType:s,unit:a,valueType:e,metricKind:t},(()=>{n(this.state)})),i.getLabels(s,this.state.refId,this.state.projectName).then((e=>this.setState({labels:e})))}))}async UNSAFE_componentWillMount(){const{target:e,datasource:t}=this.props;e.projectName||(e.projectName=t.getDefaultProject());const s={label:"Template Variables",options:t.getVariables().map(Ce.Er)},a=await t.getProjects();this.setState(Object.assign({variableOptionGroup:s,variableOptions:s.options},e,{projects:a})),t.getLabels(e.metricType,e.projectName,e.refId).then((e=>this.setState({labels:e})))}onChange(e,t){this.setState({[e]:t},(()=>{this.props.onQueryChange(this.state)}))}render(){const{metricType:e,projectName:t,filters:s,title:a,text:n,variableOptionGroup:i,labels:r,variableOptions:o}=this.state,{datasource:l}=this.props;return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Se.IK,{templateVariableOptions:o,datasource:l,projectName:t||l.getDefaultProject(),onChange:e=>this.onChange("projectName",e)}),(0,ne.jsx)(Se.C3,{projectName:t,metricType:e,templateSrv:l.templateSrv,datasource:l,templateVariableOptions:o,onChange:e=>this.onMetricTypeChange(e),children:e=>(0,ne.jsx)(ne.Fragment,{children:(0,ne.jsx)(Se.pj,{labels:r,filters:s,onChange:e=>this.onChange("filters",e),variableOptionGroup:i})})}),(0,ne.jsx)(Se.x5,{label:"Title",children:(0,ne.jsx)(Oe,{type:"text",className:"gf-form-input width-20",value:a,onChange:e=>this.onChange("title",e.target.value)})}),(0,ne.jsx)(Se.x5,{label:"Text",children:(0,ne.jsx)(Oe,{type:"text",className:"gf-form-input width-20",value:n,onChange:e=>this.onChange("text",e.target.value)})}),je||(je=(0,ne.jsx)(Se.zI,{}))]})}}var Me,Fe=s("./public/app/plugins/datasource/cloudwatch/components/index.ts");const{Switch:Ae}=k.LegacyForms;function De(e){const{query:t,onChange:s}=e;return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Fe.SA,Object.assign({},e,{onChange:e=>s(Object.assign({},t,e)),onRunQuery:()=>{},history:[]})),(0,ne.jsxs)("div",{className:"gf-form-inline",children:[(0,ne.jsx)(Ae,{label:"Enable Prefix Matching",labelClass:"query-keyword",checked:t.prefixMatching,onChange:()=>s(Object.assign({},t,{prefixMatching:!t.prefixMatching}))}),(0,ne.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,ne.jsx)(Fe.qj,{label:"Action",children:(0,ne.jsx)("input",{disabled:!t.prefixMatching,className:"gf-form-input width-12",value:t.actionPrefix||"",onChange:e=>s(Object.assign({},t,{actionPrefix:e.target.value}))})}),(0,ne.jsx)(Fe.qj,{label:"Alarm Name",children:(0,ne.jsx)("input",{disabled:!t.prefixMatching,className:"gf-form-input width-12",value:t.alarmNamePrefix||"",onChange:e=>s(Object.assign({},t,{alarmNamePrefix:e.target.value}))})}),Me||(Me=(0,ne.jsx)("div",{className:"gf-form gf-form--grow",children:(0,ne.jsx)("div",{className:"gf-form-label gf-form-label--grow"})}))]})]})]})}var $e=s("./public/app/core/components/PageHeader/PageHeader.tsx"),Le=s("./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx"),Ee=s("./public/app/core/components/TagFilter/TagFilter.tsx");const{Select:Re}=k.LegacyForms,_e=e=>{const{value:t,placeholder:s,className:a,isSearchable:n,onChange:i}=e,r=Ve(e),o=Be(r,t),l=(0,M.useCallback)((e=>i(e.value)),[i]);return(0,ne.jsx)(Re,{menuShouldPortal:!0,className:a,isMulti:!1,isClearable:!1,backspaceRemovesValue:!1,onChange:l,options:r,isSearchable:n,maxMenuHeight:500,placeholder:s,noOptionsMessage:()=>"No options found",value:o})},Ve=({variables:e=[],options:t})=>(0,M.useMemo)((()=>Array.isArray(e)&&0!==e.length?[{label:"Template Variables",options:e.map((({name:e})=>({label:`$${e}`,value:`$${e}`})))},...t]:t),[e,t]),Be=(e,t)=>(0,M.useMemo)((()=>(e.every((e=>e.options))?(0,a.flatten)(e.map((e=>e.options))):e).find((e=>e.value===t))),[e,t]);var ze=s("./public/app/plugins/datasource/loki/components/LokiQueryField.tsx"),Ue=s("./public/app/plugins/datasource/loki/components/LokiOptionFields.tsx");const qe=(0,M.memo)((function(e){var t;const{expr:s,maxLines:a,instant:n,datasource:i,onChange:r}=e,o={refId:"",expr:s,maxLines:a,instant:n};return(0,ne.jsx)("div",{className:"gf-form-group",children:(0,ne.jsx)(ze.n,{datasource:i,query:o,onChange:r,onRunQuery:()=>{},onBlur:()=>{},history:[],ExtraFieldElement:(0,ne.jsx)(Ue.JX,{queryType:o.instant?"instant":"range",lineLimitValue:(null==o||null===(t=o.maxLines)||void 0===t?void 0:t.toString())||"",resolution:o.resolution||1,query:o,onRunQuery:()=>{},onChange:r})})})}));var He=s("./public/app/core/components/help/HelpModal.tsx"),Ge=s("./public/app/core/components/Footer/Footer.tsx"),We=s("./public/app/core/components/Select/FolderPicker.tsx"),Ze=s("./public/app/features/search/index.ts"),Qe=s("./public/app/features/dashboard/components/DashboardSettings/TimePickerSettings.tsx"),Ke=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/QueryEditor/QueryEditor.tsx");const{SecretFormField:Ye}=k.LegacyForms;function Je(){we("footer",Ge.$_,[]),we("icon",k.Icon,["name","size","type",["onClick",{watchDepth:"reference",wrapApply:!0}]]),we("spinner",k.Spinner,["inline"]),we("helpModal",He.B,[]),we("pageHeader",$e.Z,["model","noTabs"]),we("emptyListCta",Le.Z,["title","buttonIcon","buttonLink","buttonTitle",["onClick",{watchDepth:"reference",wrapApply:!0}],"proTip","proTipLink","proTipLinkTitle","proTipTarget","infoBox","infoBoxTitle"]),we("searchField",Ze.Um,["query","autoFocus",["onChange",{watchDepth:"reference"}],["onKeyDown",{watchDepth:"reference"}]]),we("searchResults",Ze.sZ,["results","editable","selectors",["onSelectionChanged",{watchDepth:"reference"}],["onTagSelected",{watchDepth:"reference"}],["onFolderExpanding",{watchDepth:"reference"}],["onToggleSelection",{watchDepth:"reference"}]]),we("searchFilters",Ze.fC,["allChecked","canMove","canDelete","tagFilterOptions","selectedStarredFilter","selectedTagFilter",["onSelectAllChanged",{watchDepth:"reference"}],["deleteItem",{watchDepth:"reference"}],["moveTo",{watchDepth:"reference"}],["onStarredFilterChange",{watchDepth:"reference"}],["onTagFilterChange",{watchDepth:"reference"}]]),we("tagFilter",Ee.D,["tags",["onChange",{watchDepth:"reference"}],["tagOptions",{watchDepth:"reference"}]]),we("colorPicker",k.ColorPicker,["color",["onChange",{watchDepth:"reference",wrapApply:!0}]]),we("seriesColorPickerPopover",k.SeriesColorPickerPopoverWithTheme,["color","series","onColorChange","onToggleAxis"]),we("unitPicker",k.UnitPicker,["value","width",["onChange",{watchDepth:"reference",wrapApply:!0}]]),we("metricSelect",_e,["options","onChange","value","isSearchable","className","placeholder",["variables",{watchDepth:"reference"}]]),we("cloudMonitoringQueryEditor",ke.W,["target","onQueryChange","onExecuteQuery",["events",{watchDepth:"reference"}],["datasource",{watchDepth:"reference"}],["templateSrv",{watchDepth:"reference"}]]),we("cloudMonitoringAnnotationQueryEditor",Pe,["target","onQueryChange",["datasource",{watchDepth:"reference"}],["templateSrv",{watchDepth:"reference"}]]),we("cloudwatchAnnotationQueryEditor",De,["query","onChange",["datasource",{watchDepth:"reference"}]]),we("secretFormField",Ye,["value","isConfigured","inputWidth","labelWidth",["onReset",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),we("graphContextMenu",k.GraphContextMenu,["x","y","itemsGroup",["onClose",{watchDepth:"reference",wrapApply:!0}],["getContextMenuSource",{watchDepth:"reference",wrapApply:!0}],["timeZone",{watchDepth:"reference",wrapApply:!0}]]),we("drilldownLinksEditor",k.DataLinksInlineEditor,["value","links","suggestions",["onChange",{watchDepth:"reference",wrapApply:!0}]]),we("lokiAnnotationsQueryEditor",qe,["expr","maxLines","instant","onChange",["datasource",{watchDepth:"reference"}]]),we("datasourceHttpSettingsNext",k.DataSourceHttpSettings,["defaultUrl","showAccessOptions","dataSourceConfig","showForwardOAuthIdentityOption",["onChange",{watchDepth:"reference",wrapApply:!0}]]),we("folderPicker",We.E,["labelClass","rootName","enableCreateNew","enableReset","initialTitle","initialFolderId","dashboardId","onCreateFolder",["enterFolderCreation",{watchDepth:"reference",wrapApply:!0}],["exitFolderCreation",{watchDepth:"reference",wrapApply:!0}],["onLoad",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),we("timePickerSettings",Qe.P,["renderCount","refreshIntervals","timePickerHidden","nowDelay","timezone",["onTimeZoneChange",{watchDepth:"reference",wrapApply:!0}],["onRefreshIntervalChange",{watchDepth:"reference",wrapApply:!0}],["onNowDelayChange",{watchDepth:"reference",wrapApply:!0}],["onHideTimePickerChange",{watchDepth:"reference",wrapApply:!0}]]),we("azureMonitorQueryEditor",Ke.Z,["query",["datasource",{watchDepth:"reference"}],"onChange"])}var Xe=s("./public/app/core/time_series2.ts")},"./public/app/core/core_module.ts":(e,t,s)=>{"use strict";s.d(t,{rb:()=>r,hF:()=>i,ZP:()=>o});var a=s("./node_modules/angular/index.js"),n=s.n(a);const i=n().module("grafana.core",["ngRoute"]),r=[i,n().module("grafana.controllers",[]),n().module("grafana.directives",[]),n().module("grafana.factories",[]),n().module("grafana.services",[]),n().module("grafana.filters",[]),n().module("grafana.routes",[])],o=i},"./public/app/core/logs_model.ts":(e,t,s)=>{"use strict";s.d(t,{Qp:()=>d,aB:()=>v,UW:()=>m,nu:()=>f});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-schema/src/index.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/core/config.ts");var l=s("./packages/grafana-data/src/valueFormats/symbolFormatters.ts");const c="Line limit",d="Common labels",u={[r.LogLevel.critical]:i.colors[7],[r.LogLevel.warning]:i.colors[1],[r.LogLevel.error]:i.colors[4],[r.LogLevel.info]:i.colors[0],[r.LogLevel.debug]:i.colors[5],[r.LogLevel.trace]:i.colors[2],[r.LogLevel.unknown]:(p="#8e8e8e",h="#dde4ed",o.ZP.bootData.user.lightTheme?h:p)};var p,h;const g=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function m(e,t){return t===r.LogsDedupStrategy.none?e:e.reduce(((e,s,a)=>{const n=Object.assign({},s),i=e[e.length-1];return a>0&&function(e,t,s){switch(s){case r.LogsDedupStrategy.exact:return e.entry.replace(g,"")===t.entry.replace(g,"");case r.LogsDedupStrategy.numbers:return e.entry.replace(/\d/g,"")===t.entry.replace(/\d/g,"");case r.LogsDedupStrategy.signature:return e.entry.replace(/\w/g,"")===t.entry.replace(/\w/g,"");default:return!1}}(s,i,t)?i.duplicates++:(n.duplicates=0,e.push(n)),e}),[])}function f(e,t){return 0===t.size?e:e.filter((e=>!t.has(e.logLevel)))}function b(e){return e.fields.some((e=>e.type===r.FieldType.time))&&e.fields.some((e=>e.type===r.FieldType.string))}function v(e,t,s,o){const{logSeries:p}=function(e){const t=[],s=[];for(const a of e)!b(a)&&a.fields.length?a.length>0&&t.push(a):s.push(a);return{logSeries:s,metricSeries:t}}(e),h=function(e){if(0===e.length)return;const t=[];let s=[];const n=e.filter((e=>e.fields.length));n.length&&(s=n.map((e=>{const s=new r.FieldCache(e),a=s.getFirstFieldOfType(r.FieldType.string);return null!=a&&a.labels&&t.push(a.labels),{series:e,timeField:s.getFirstFieldOfType(r.FieldType.time),timeNanosecondField:s.hasFieldWithNameAndType("tsNs",r.FieldType.time)?s.getFieldByName("tsNs"):void 0,stringField:a,logLevelField:s.getFieldByName("level"),idField:x(s)}})));const o=t.length>0?(0,r.findCommonLabels)(t):{},u=[];let p=!1;for(const e of s){const{timeField:t,timeNanosecondField:s,stringField:a,logLevelField:n,idField:l,series:c}=e,d=a.labels,g=(0,r.findUniqueLabels)(d,o);let m;Object.keys(g).length>0&&(p=!0),d&&-1!==Object.keys(d).indexOf("level")&&(m=(0,r.getLogLevelFromKey)(d.level));for(let e=0;e<c.length;e++){var h;const o=t.values.get(e),d=(0,r.dateTime)(o),p=s?s.values.get(e):void 0,f=p||d.valueOf()+"000000",b=null!==(h=a.values.get(e))&&void 0!==h?h:"",v="string"==typeof b?b:JSON.stringify(b),x=r.textUtil.hasAnsiCodes(v),y=!!v.match(/\\n|\\t|\\r/),w=c.meta&&c.meta.searchWords?c.meta.searchWords:[],j=x?i.ansicolor.strip(v):v;let k=r.LogLevel.unknown;k=n&&n.values.get(e)?(0,r.getLogLevelFromKey)(n.values.get(e)):m||(0,r.getLogLevel)(j),u.push({entryFieldIndex:a.index,rowIndex:e,dataFrame:c,logLevel:k,timeFromNow:(0,r.dateTimeFormatTimeAgo)(o),timeEpochMs:d.valueOf(),timeEpochNs:f,timeLocal:(0,r.dateTimeFormat)(o,{timeZone:"browser"}),timeUtc:(0,r.dateTimeFormat)(o,{timeZone:"utc"}),uniqueLabels:g,hasAnsi:x,hasUnescapedContent:y,searchWords:w,entry:j,raw:v,labels:a.labels||{},uid:l?l.values.get(e):e.toString()})}}const g=[];(0,a.size)(o)>0&&g.push({label:d,value:o,kind:r.LogsMetaKind.LabelsMap});const m=e.filter((e=>e.meta&&e.meta.limit)),f=Object.values(m.reduce(((e,t)=>(e[t.refId]=t.meta.limit,e)),{})).reduce(((e,t)=>e+t),0);f>0&&g.push({label:c,value:f,kind:r.LogsMetaKind.Number});let b=0;const v={};let y=!1;for(const t of e){var w,j,k,S;const e=null===(w=t.meta)||void 0===w||null===(j=w.custom)||void 0===j?void 0:j.lokiQueryStatKey,{refId:s}=t;var C;if(!y&&null!==(k=t.meta)&&void 0!==k&&null!==(S=k.custom)&&void 0!==S&&S.error)g.push({label:"",value:null===(C=t.meta)||void 0===C?void 0:C.custom.error,kind:r.LogsMetaKind.Error}),y=!0;if(s&&!v[s]){var T;if(e&&null!==(T=t.meta)&&void 0!==T&&T.stats){const s=t.meta.stats.find((t=>t.displayName===e));s&&(b+=s.value)}v[s]=!0}}if(b>0){const{text:e,suffix:t}=(0,l.i7)("B")(b);g.push({label:"Total bytes processed",value:`${e} ${t}`,kind:r.LogsMetaKind.String})}return{hasUniqueLabels:p,meta:g,rows:u}}(p);if(h){if(t&&h.rows.length>0){const e=h.rows.sort(r.sortInAscendingOrder),{visibleRange:a,bucketSize:i,visibleRangeMs:o,requestedRangeMs:l}=function(e,t,s,a=20,n=1e3){let i,r,o=s,l=t,c=Math.max(l*a,n);if(s){const t=e[0].timeEpochMs;if(r=s.to-s.from,i=s.to-t,i>0){l*=i/r,c=Math.max(Math.ceil(l*a),n);o={from:Math.floor(t/c)*c,to:s.to}}else i=1}return{bucketSize:c,visibleRange:o,visibleRangeMs:i,requestedRangeMs:r}}(e,t,s);h.visibleRange=a,h.series=function(e,t){const s={},a=[];for(const n of e){let e=s[n.logLevel];e||(s[n.logLevel]=e={lastTs:null,datapoints:[],target:n.logLevel,color:u[n.logLevel]},a.push(e));const i=Math.floor(n.timeEpochMs/t)*t;i===e.lastTs?e.datapoints[e.datapoints.length-1][0]++:(e.datapoints.push([1,i]),e.lastTs=i);for(const t of a)t!==e&&t.lastTs!==i&&(t.datapoints.push([0,i]),t.lastTs=i)}return a.map(((e,t)=>{e.datapoints.sort(((e,t)=>e[1]-t[1]));const s=(0,r.toDataFrame)(e),a=new r.FieldCache(s).getFirstFieldOfType(r.FieldType.number);return s.fields[a.index].config.min=0,s.fields[a.index].config.decimals=0,s.fields[a.index].config.color={mode:r.FieldColorModeId.Fixed,fixedColor:e.color},s.fields[a.index].config.custom={drawStyle:n.l8.Bars,barAlignment:n.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:e.color,pointColor:e.color,fillColor:e.color,lineWidth:0,fillOpacity:100,stacking:{mode:n.o0.Normal,group:"A"}},s}))}(e,i),h.meta&&(h.meta=function(e,t,s){var a;let n=[...e.meta];const i=n.findIndex((e=>e.label===c)),o=i>=0&&(null===(a=n[i])||void 0===a?void 0:a.value);if(o&&o>0){let a;if(o===e.rows.length&&t&&s){a=`${o} reached, received logs cover ${(t/s*100).toFixed(2)}% (${r.rangeUtil.msRangeToTimeString(t)}) of your selected time range (${r.rangeUtil.msRangeToTimeString(s)})`}else a=`${o} (${e.rows.length} returned)`;n[i]={label:c,value:a,kind:r.LogsMetaKind.String}}return n}(h,o,l))}else h.series=[];return h.queries=o,h}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:o}}function x(e){const t=["id"];for(const s of t){const t=e.getFieldByName(s);if(t)return t}}},"./public/app/core/nav_model_srv.ts":(e,t,s)=>{"use strict";s.d(t,{rR:()=>o,GO:()=>l});var a=s("./public/app/core/core_module.ts"),n=s("./public/app/core/config.ts"),i=s("./node_modules/lodash/lodash.js");class r{constructor(){var e,t,s;s=void 0,(t="navItems")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,this.navItems=n.ZP.bootData.navTree}getCfgNode(){return(0,i.find)(this.navItems,{id:"cfg"})}getNav(...e){let t=this.navItems;const s={breadcrumbs:[]};for(const a of e){if((0,i.isNumber)(a)){s.main=s.breadcrumbs[a];break}const e=(0,i.find)(t,{id:a});s.breadcrumbs.push(e),s.node=e,s.main=e,t=e.children}if(s.main.children)for(const e of s.main.children)e.active=!1,e.url===s.node.url&&(e.active=!0);return s}getNotFoundNav(){return o()}}function o(){return l("Page not found","404 Error")}function l(e,t){const s={text:e,subTitle:t,icon:"exclamation-triangle"};return{breadcrumbs:[s],node:s,main:s}}r.$inject=[],a.ZP.service("navModelSrv",r)},"./public/app/core/navigation/hooks.ts":(e,t,s)=>{"use strict";s.d(t,{H:()=>i});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./node_modules/react-router/esm/react-router.js");function i(){const e=(0,n.TH)();return[new URLSearchParams(e.search),(e,t)=>{a.locationService.partial(e,t)}]}},"./public/app/core/navigation/kiosk.ts":(e,t,s)=>{"use strict";s.d(t,{qk:()=>o,U6:()=>l,ZC:()=>c});var a=s("./packages/grafana-data/src/index.ts"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./public/app/core/app_events.ts"),r=s("./public/app/types/index.ts");function o(){let e=n.locationService.getSearchObject().kiosk;switch(e){case"tv":e=!0,i.Z.emit(a.AppEvents.alertSuccess,["Press ESC to exit Kiosk mode"]);break;case"1":case!0:e=null;break;default:e="tv"}n.locationService.partial({kiosk:e})}function l(e){switch(e){case"tv":return r.UX.TV;case"1":case!0:return r.UX.Full;default:return r.UX.Off}}function c(){n.locationService.partial({kiosk:null})}},"./public/app/core/partials.ts":(e,t,s)=>{let a=s("./public/app sync recursive \\.html$");a.keys().forEach((e=>{a(e)}))},"./public/app/core/profiler.ts":(e,t,s)=>{"use strict";function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{r:()=>n});const n=new class{constructor(){a(this,"panelsRendered",0),a(this,"enabled",void 0),a(this,"$rootScope",void 0),a(this,"window",void 0)}init(e,t){this.$rootScope=t,this.window=window,this.enabled}renderingCompleted(){this.panelsRendered+=1,this.window.panelsRendered=this.panelsRendered}}},"./public/app/core/reducers/appNotification.ts":(e,t,s)=>{"use strict";s.d(t,{$l:()=>n,uY:()=>i,VW:()=>r});const a=(0,s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"appNotifications",initialState:{appNotifications:[]},reducers:{notifyApp:(e,t)=>{const s=t.payload;for(const t of e.appNotifications)if(s.icon===t.icon&&s.severity===t.severity&&s.text===t.text&&s.title===t.title&&s.component===t.component)return;e.appNotifications.push(s)},clearAppNotification:(e,t)=>Object.assign({},e,{appNotifications:e.appNotifications.filter((e=>e.id!==t.payload))})}}),{notifyApp:n,clearAppNotification:i}=a.actions,r=a.reducer},"./public/app/core/reducers/navModel.ts":(e,t,s)=>{"use strict";s.d(t,{Cu:()=>i,RL:()=>l,H7:()=>c,G4:()=>u});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./public/app/core/config.ts");function i(){const e={};return r(e,n.ZP.bootData.navTree),e}function r(e,t,s){for(const a of t)e[a.id]=Object.assign({},a,{parentItem:s}),a.children&&r(e,a.children,a);e["not-found"]=Object.assign({},function(e,t){const s={text:e,subTitle:t,icon:"exclamation-triangle"};return{breadcrumbs:[s],node:s,main:s}}("Page not found","404 Error").node)}const o={},l=(0,a.PH)("navIndex/updateNavIndex"),c=(0,a.PH)("navIndex/updateConfigurationSubtitle"),d=(e,t)=>{var s,a;return Object.assign({},e,{parentItem:Object.assign({},e.parentItem,{text:null!==(s=null===(a=e.parentItem)||void 0===a?void 0:a.text)&&void 0!==s?s:"",subTitle:t})})},u=(e=o,t)=>{if(l.match(t)){const s={},a=t.payload;for(const e of a.children)s[e.id]=Object.assign({},e,{parentItem:a});return Object.assign({},e,s)}if(c.match(t)){const s=`Organization: ${t.payload}`;return Object.assign({},e,{cfg:Object.assign({},e.cfg,{subTitle:s}),datasources:d(e.datasources,s),users:d(e.users,s),teams:d(e.teams,s),plugins:d(e.plugins,s),"org-settings":d(e["org-settings"],s),apikeys:d(e.apikeys,s)})}return e}},"./public/app/core/selectors/navModel.ts":(e,t,s)=>{"use strict";s.d(t,{h:()=>a,o:()=>n});const a=(e,t,s,a=!1)=>{if(e[t]){const s=e[t];let n;return!a&&s.parentItem?(n=Object.assign({},s.parentItem),n.children=n.children&&n.children.map((e=>Object.assign({},e,{active:e.url===s.url})))):n=s,{node:s,main:n}}return s||(()=>{const e={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:e,main:e}})()},n=e=>`${e.main.text}${e.node.text?": "+e.node.text:""}`},"./public/app/core/services/PreferencesService.ts":(e,t,s)=>{"use strict";s.d(t,{y:()=>n});var a=s("./public/app/core/services/backend_srv.ts");class n{constructor(e){this.resourceUri=e}update(e){return a.ae.put(`/api/${this.resourceUri}/preferences`,e)}load(){return a.ae.get(`/api/${this.resourceUri}/preferences`)}}},"./public/app/core/services/backend_srv.ts":(e,t,s)=>{"use strict";s.d(t,{y$:()=>G,ae:()=>W,i:()=>Z});var a=s("./node_modules/rxjs/dist/esm5/internal/Subject.js"),n=s("./node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),i=s("./node_modules/rxjs/dist/esm5/internal/Observable.js"),r=s("./node_modules/rxjs/dist/esm5/internal/Subscription.js"),o=s("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),l=s("./node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),c=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),d=s("./node_modules/rxjs/dist/esm5/internal/observable/from.js"),u=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),p=s("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),h=s("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),g=s("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),m=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),f=s("./node_modules/rxjs/dist/esm5/internal/operators/share.js"),b=s("./node_modules/rxjs/dist/esm5/internal/operators/retryWhen.js"),v=s("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),x=s("./node_modules/rxjs/dist/esm5/internal/operators/throwIfEmpty.js"),y=s("./node_modules/rxjs/dist/esm5/internal/observable/dom/fetch.js"),w=s("./node_modules/uuid/dist/esm-browser/v4.js"),j=s("./packages/grafana-data/src/index.ts"),k=s("./public/app/core/app_events.ts"),S=s("./public/app/core/config.ts"),C=s("./public/app/core/core_module.ts"),T=s("./public/app/core/services/context_srv.ts"),N=s("./public/app/core/utils/fetch.ts"),O=s("./public/app/core/utils/query.ts");function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let P;!function(e){e[e.Pending=0]="Pending",e[e.InProgress=1]="InProgress",e[e.Done=2]="Done"}(P||(P={}));class M{constructor(e=!1){I(this,"state",{}),I(this,"queue",new a.x),I(this,"updates",new a.x),I(this,"add",((e,t)=>this.queue.next({id:e,options:t,state:P.Pending}))),I(this,"setInProgress",(e=>this.queue.next({id:e,state:P.InProgress}))),I(this,"setDone",(e=>this.queue.next({id:e,state:P.Done}))),I(this,"getUpdates",(()=>this.updates.asObservable())),I(this,"getUpdate",(e=>{const t=Object.keys(e).filter((t=>e[t].state===P.InProgress)).length;return{noOfPending:Object.keys(e).filter((t=>e[t].state===P.Pending)).length,noOfInProgress:t,state:e}})),I(this,"publishUpdate",((e,t)=>{this.printState(e,t),this.updates.next(e)})),I(this,"printState",((e,t)=>{if(!t)return;const s=Object.keys(e.state).reduce(((t,s)=>{const a={id:s,state:e.state[s].state};return t.push(a),t}),[]);console.log("FetchQueue noOfStarted",e.noOfInProgress),console.log("FetchQueue noOfNotStarted",e.noOfPending),console.log("FetchQueue state",s)})),this.queue.subscribe((t=>{const{id:s,state:a,options:n}=t;if(this.state[s]||(this.state[s]={state:P.Pending,options:{}}),a===P.Done){delete this.state[s];const t=this.getUpdate(this.state);return void this.publishUpdate(t,e)}this.state[s].state=a,n&&(this.state[s].options=n);const i=this.getUpdate(this.state);this.publishUpdate(i,e)}))}}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class A{constructor(e,t){F(this,"queue",new a.x),F(this,"responses",new a.x),F(this,"add",((e,t)=>{this.queue.next({id:e,options:t})})),F(this,"getResponses",(e=>this.responses.asObservable().pipe((0,p.h)((t=>t.id===e))))),this.queue.subscribe((s=>{const{id:a,options:n}=s;e.setInProgress(a),this.responses.next({id:a,observable:t(n)})}))}}var D=s("./node_modules/rxjs/dist/esm5/internal/operators/concatMap.js");class ${constructor(e,t,s){const a=null!=s&&s.http2Enabled?1e3:5;e.getUpdates().pipe((0,p.h)((({noOfPending:e})=>e>0)),(0,D.b)((({state:e,noOfInProgress:t})=>{const s=Object.keys(e).filter((t=>e[t].state===P.Pending&&!(0,O.mu)(e[t].options.url))).reduce(((t,s)=>{const a={id:s,options:e[s].options};return t.push(a),t}),[]),n=Object.keys(e).filter((t=>e[t].state===P.Pending&&(0,O.mu)(e[t].options.url))).reduce(((t,s)=>{const a={id:s,options:e[s].options};return t.push(a),t}),[]),i=Math.max(a-t-s.length,0),r=n.slice(0,i);return s.concat(r)}))).subscribe((({id:e,options:s})=>{t.add(e,s)}))}}s("./node_modules/react/index.js");var L,E=s("./packages/grafana-ui/src/index.ts"),R=s("./packages/grafana-ui/src/components/Modal/getModalStyles.ts"),_=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),V=s("./node_modules/react/jsx-runtime.js");const B=e=>{const t=(0,E.useTheme2)(),s=z(t),a=(0,R.J)(t),n=Boolean(e.maxConcurrentSessions);return(0,V.jsxs)(E.Portal,{children:[(0,V.jsx)("div",{className:a.modal,children:(0,V.jsxs)(E.InfoBox,{title:"You have been automatically signed out",severity:"warning",className:s.infobox,children:[(0,V.jsxs)("div",{className:s.text,children:[(0,V.jsxs)("p",{children:["Your session token was automatically revoked because you have reached",(0,V.jsx)("strong",{children:` the maximum number of ${n?e.maxConcurrentSessions:""} concurrent sessions `}),"for your account."]}),L||(L=(0,V.jsxs)("p",{children:[(0,V.jsx)("strong",{children:"To resume your session, sign in again."}),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically."]}))]}),(0,V.jsx)(E.Button,{size:"md",variant:"primary",onClick:()=>{window.location.reload()},children:"Sign in"})]})}),(0,V.jsx)("div",{className:(0,_.cx)(a.modalBackdrop,s.backdrop)})]})},z=(0,E.stylesFactory)((e=>({infobox:_.css`
      margin-bottom: 0;
    `,text:_.css`
      margin: ${e.spacing(1,0,2)};
    `,backdrop:_.css`
      background-color: ${e.colors.background.canvas};
      opacity: 0.8;
    `})));var U=s("./public/app/types/events.ts");function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const H="cancel_all_requests_request_id";class G{constructor(e){q(this,"inFlightRequests",new a.x),q(this,"HTTP_REQUEST_CANCELED",-1),q(this,"noBackendCache",void 0),q(this,"inspectorStream",new a.x),q(this,"fetchQueue",void 0),q(this,"responseQueue",void 0),q(this,"dependencies",{fromFetch:y.U,appEvents:k.Z,contextSrv:T.Vt,logout:()=>{T.Vt.setLoggedOut(),window.location.reload()}}),e&&(this.dependencies=Object.assign({},this.dependencies,e)),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new M,this.responseQueue=new A(this.fetchQueue,this.internalFetch),new $(this.fetchQueue,this.responseQueue,(0,S.iE)())}async request(e){return await(0,n.n)(this.fetch(e).pipe((0,u.U)((e=>e.data))))}fetch(e){const t=(0,w.Z)(),s=this.fetchQueue;return new i.y((a=>{const n=new r.w0;return n.add(this.responseQueue.getResponses(t).subscribe((e=>{n.add(e.observable.subscribe(a))}))),this.fetchQueue.add(t,e),function(){s.setDone(t),n.unsubscribe()}}))}internalFetch(e){e.requestId&&this.inFlightRequests.next(e.requestId),e=this.parseRequestOptions(e);const t=this.getFromFetchStream(e),s=t.pipe(this.toFailureStream(e)),a=t.pipe((0,p.h)((e=>!0===e.ok)),(0,h.b)((e=>{this.showSuccessAlert(e),this.inspectorStream.next(e)})));return(0,o.T)(a,s).pipe((0,g.K)((t=>(0,l._)(this.processRequestError(e,t)))),this.handleStreamCancellation(e))}resolveCancelerIfExists(e){this.inFlightRequests.next(e)}cancelAllInFlightRequests(){this.inFlightRequests.next(H)}async datasourceRequest(e){return(0,n.n)(this.fetch(e))}parseRequestOptions(e){var t,s;const a=null===(t=this.dependencies.contextSrv.user)||void 0===t?void 0:t.orgId;if(e.retry=null!==(s=e.retry)&&void 0!==s?s:0,(0,O.R8)(e.url)){var n,i,r;if(a)e.headers=null!==(i=e.headers)&&void 0!==i?i:{},e.headers["X-Grafana-Org-Id"]=a;if(e.url.startsWith("/")&&(e.url=e.url.substring(1)),null!==(n=e.headers)&&void 0!==n&&n.Authorization&&(e.headers["X-DS-Authorization"]=e.headers.Authorization,delete e.headers.Authorization),this.noBackendCache)e.headers=null!==(r=e.headers)&&void 0!==r?r:{},e.headers["X-Grafana-NoCache"]="true"}return void 0===e.hideFromInspector&&(e.hideFromInspector=(0,O.R8)(e.url)&&!(0,O.mu)(e.url)),e}getFromFetchStream(e){const t=(0,N.Xv)(e),s=(0,N.nS)(e);return this.dependencies.fromFetch(t,s).pipe((0,m.z)((async t=>{const{status:s,statusText:a,ok:n,headers:i,url:r,type:o,redirected:l}=t;return{status:s,statusText:a,ok:n,data:await(0,N.aO)(t,e.responseType),headers:i,url:r,type:o,redirected:l,config:e}})),(0,f.B)())}toFailureStream(e){const{isSignedIn:t}=this.dependencies.contextSrv.user;return s=>s.pipe((0,p.h)((e=>!1===e.ok)),(0,m.z)((t=>{const{status:s,statusText:a,data:n}=t,i={status:s,statusText:a,data:n,config:e};return(0,l._)(i)})),(0,b.a)((s=>s.pipe((0,m.z)(((s,a)=>{const n=0===a&&0===e.retry;var i,r,o,u;return 401===s.status&&(0,O.R8)(e.url)&&n&&t?"ERR_TOKEN_REVOKED"===(null===(i=s.data)||void 0===i||null===(r=i.error)||void 0===r?void 0:r.id)?(this.dependencies.appEvents.publish(new U.Dn({component:B,props:{maxConcurrentSessions:null===(o=s.data)||void 0===o||null===(u=o.error)||void 0===u?void 0:u.maxConcurrentSessions}})),(0,c.of)({})):(0,d.Dp)(this.loginPing()).pipe((0,g.K)((e=>401===e.status?(this.dependencies.logout(),(0,l._)(e)):(0,l._)(e)))):(0,l._)(s)}))))))}showApplicationErrorAlert(e){}showSuccessAlert(e){const{config:t}=e;if(!1===t.showSuccessAlert)return;if(void 0===t.showSuccessAlert&&("GET"===t.method||(0,O.mu)(t.url)||!(0,O.R8)(t.url)))return;const s=e.data;null!=s&&s.message&&this.dependencies.appEvents.emit(j.AppEvents.alertSuccess,[s.message])}showErrorAlert(e,t){if(!1===e.showErrorAlert)return;if(void 0===e.showErrorAlert&&((0,O.mu)(e.url)||!(0,O.R8)(e.url)))return;let s="",a=t.data.message;a.length>80&&(s=a,a="Error"),422===t.status&&(a="Validation failed"),this.dependencies.appEvents.emit(t.status<500?j.AppEvents.alertWarning:j.AppEvents.alertError,[a,s])}processRequestError(e,t){var s;return t.data=null!==(s=t.data)&&void 0!==s?s:{message:"Unexpected error"},"string"==typeof t.data&&(t.data={message:t.data,error:t.statusText,response:t.data}),t.data&&!t.data.message&&"string"==typeof t.data.error&&(t.data.message=t.data.error),t.data.message&&setTimeout((()=>{t.isHandled||this.showErrorAlert(e,t)}),50),this.inspectorStream.next(t),t}handleStreamCancellation(e){return t=>t.pipe((0,v.R)(this.inFlightRequests.pipe((0,p.h)((t=>{let s=!1;return e&&e.requestId&&e.requestId===t&&(s=!0),t===H&&(s=!0),s})))),(0,x.T)((()=>({type:j.DataQueryErrorType.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:e}))))}getInspectorStream(){return this.inspectorStream}async get(e,t,s){return await this.request({method:"GET",url:e,params:t,requestId:s})}async delete(e){return await this.request({method:"DELETE",url:e})}async post(e,t){return await this.request({method:"POST",url:e,data:t})}async patch(e,t){return await this.request({method:"PATCH",url:e,data:t})}async put(e,t){return await this.request({method:"PUT",url:e,data:t})}withNoBackendCache(e){return this.noBackendCache=!0,e().finally((()=>{this.noBackendCache=!1}))}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(e){return this.get("/api/search",e)}getDashboardByUid(e){return this.get(`/api/dashboards/uid/${e}`)}getFolderByUid(e){return this.get(`/api/folders/${e}`)}}C.hF.factory("backendSrv",(()=>W));const W=new G,Z=()=>W},"./public/app/core/services/context_srv.ts":(e,t,s)=>{"use strict";s.d(t,{Vt:()=>d});var a=s("./public/app/core/config.ts"),n=s("./node_modules/lodash/lodash.js"),i=s("./public/app/core/core_module.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/types/index.ts");function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class c{constructor(){l(this,"id",void 0),l(this,"isGrafanaAdmin",void 0),l(this,"isSignedIn",void 0),l(this,"orgRole",void 0),l(this,"orgId",void 0),l(this,"orgName",void 0),l(this,"login",void 0),l(this,"orgCount",void 0),l(this,"timezone",void 0),l(this,"fiscalYearStartMonth",void 0),l(this,"helpFlags1",void 0),l(this,"lightTheme",void 0),l(this,"hasEditPermissionInFolders",void 0),l(this,"email",void 0),l(this,"permissions",void 0),this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.lightTheme=!1,this.hasEditPermissionInFolders=!1,this.email=void 0,a.ZP.bootData.user&&(0,n.extend)(this,a.ZP.bootData.user)}}let d=new class{constructor(){l(this,"pinned",void 0),l(this,"version",void 0),l(this,"user",void 0),l(this,"isSignedIn",void 0),l(this,"isGrafanaAdmin",void 0),l(this,"isEditor",void 0),l(this,"sidemenuSmallBreakpoint",!1),l(this,"hasEditPermissionInFolders",void 0),l(this,"minRefreshInterval",void 0),a.ZP.bootData||(a.ZP.bootData={user:{},settings:{}}),this.user=new c,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=a.ZP.minRefreshInterval}setLoggedOut(){this.user.isSignedIn=!1,this.isSignedIn=!1}hasRole(e){return this.user.orgRole===e}hasPermission(e){var t;return!a.ZP.featureToggles.accesscontrol||!(null===(t=this.user.permissions)||void 0===t||!t[e])}isGrafanaVisible(){return!(void 0!==document.visibilityState&&"visible"!==document.visibilityState)}isAllowedInterval(e){return!a.ZP.minRefreshInterval||r.rangeUtil.intervalToMs(e)>=r.rangeUtil.intervalToMs(a.ZP.minRefreshInterval)}getValidInterval(e){return this.isAllowedInterval(e)?e:a.ZP.minRefreshInterval}hasAccessToExplore(){return a.ZP.featureToggles.accesscontrol?this.hasPermission(o.bW.DataSourcesExplore):(this.isEditor||a.ZP.viewersCanEdit)&&a.ZP.exploreEnabled}};i.ZP.factory("contextSrv",(()=>d))},"./public/app/core/services/impression_srv.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s("./public/app/core/store.ts"),n=s("./node_modules/lodash/lodash.js"),i=s("./public/app/core/config.ts");const r=new class{constructor(){}addDashboardImpression(e){const t=this.impressionKey();let s=[];a.Z.exists(t)&&(s=JSON.parse(a.Z.get(t)),(0,n.isArray)(s)||(s=[])),s=s.filter((t=>e!==t)),s.unshift(e),s.length>50&&s.pop(),a.Z.set(t,JSON.stringify(s))}getDashboardOpened(){let e=a.Z.get(this.impressionKey())||"[]";return e=JSON.parse(e),e=(0,n.filter)(e,(e=>(0,n.isNumber)(e))),e}impressionKey(){return"dashboard_impressions-"+i.ZP.bootData.user.orgId}}},"./public/app/core/services/keybindingSrv.ts":(e,t,s)=>{"use strict";s.d(t,{K:()=>y});var a=s("./node_modules/mousetrap/mousetrap.js"),n=s.n(a),i=(s("./node_modules/mousetrap-global-bind/mousetrap-global-bind.js"),s("./packages/grafana-data/src/index.ts")),r=s("./public/app/core/app_events.ts"),o=s("./public/app/core/utils/explore.ts"),l=s("./public/app/features/dashboard/components/ShareModal/index.ts"),c=s("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardModalProxy.tsx"),d=s("./packages/grafana-runtime/src/index.ts"),u=s("./public/app/core/navigation/kiosk.ts"),p=s("./public/app/types/events.ts"),h=s("./public/app/core/core.ts"),g=s("./public/app/features/plugins/datasource_srv.ts"),m=s("./public/app/features/dashboard/services/TimeSrv.ts"),f=s("./public/app/core/config.ts"),b=s("./public/app/core/services/PreferencesService.ts");async function v(e){const t=f.vc.theme,s=(0,i.createTheme)({colors:{mode:t.isDark?"light":"dark"}});if(r.Z.publish(new p.hD(s)),e)return;const a=document.createElement("link");a.rel="stylesheet",a.href=f.vc.bootData.themePaths[s.colors.mode],document.body.appendChild(a);const n=document.getElementsByTagName("link");for(let e=0;e<n.length;e++){const s=n[e];s.href&&s.href.indexOf(`build/grafana.${t.type}`)>0&&setTimeout((()=>s.remove()),500)}if(!h.Vt.isSignedIn)return;const o=new b.y("user"),l=await o.load();await o.update(Object.assign({},l,{theme:s.colors.mode}))}var x=s("./public/app/core/components/help/HelpModal.tsx");const y=new class{constructor(){var e,t,s;s=!1,(t="modalOpen")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,r.Z.subscribe(p.le,(()=>this.modalOpen=!0))}reset(){n().reset()}initGlobals(){"/login"!==d.locationService.getLocation().pathname&&(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("s o",this.openSearch),this.bind("f",this.openSearch),this.bind("esc",this.exit),this.bindGlobal("esc",this.globalEsc)),this.bind("t t",(()=>v(!1))),this.bind("t r",(()=>v(!0)))}globalEsc(){const e=document,t=e.activeElement;document.querySelectorAll(".slate-typeahead--open").length>0||(t&&t.blur&&("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName||t.hasAttribute("data-slate-editor"))?e.activeElement.blur():this.exit())}openSearch(){d.locationService.partial({search:"open"})}closeSearch(){d.locationService.partial({search:null})}openAlerting(){d.locationService.push("/alerting")}goToHome(){d.locationService.push("/")}goToProfile(){d.locationService.push("/profile")}showHelpModal(){r.Z.publish(new p.Dn({component:x.B}))}exit(){if(r.Z.publish(new p.OW),this.modalOpen)return void(this.modalOpen=!1);const e=d.locationService.getSearchObject();e.editview?d.locationService.partial({editview:null}):e.inspect?d.locationService.partial({inspect:null,inspectTab:null}):e.editPanel?d.locationService.partial({editPanel:null,tab:null}):e.viewPanel?d.locationService.partial({viewPanel:null,tab:null}):(e.kiosk&&(0,u.ZC)(),e.search&&this.closeSearch())}showDashEditView(){d.locationService.partial({editview:"settings"})}bind(e,t){n().bind(e,(e=>{e.preventDefault(),e.stopPropagation(),e.returnValue=!1,t.call(this)}),"keydown")}bindGlobal(e,t){n().bindGlobal(e,(e=>{e.preventDefault(),e.stopPropagation(),e.returnValue=!1,t.call(this)}),"keydown")}unbind(e,t){n().unbind(e,t)}bindWithPanelId(e,t){this.bind(e,function(e){return()=>{const t=document.querySelectorAll(":hover");for(let n=t.length-1;n>0;n--){var s;const i=t[n];var a;null!==(s=i.dataset)&&void 0!==s&&s.panelid&&e(parseInt(null===(a=i.dataset)||void 0===a?void 0:a.panelid,10))}}}(t))}setupDashboardBindings(e){this.bind("mod+o",(()=>{e.graphTooltip=(e.graphTooltip+1)%3,e.events.publish(new i.LegacyGraphHoverClearEvent),e.startRefresh()})),this.bind("mod+s",(()=>{r.Z.publish(new p.Dn({component:c.D,props:{dashboard:e}}))})),this.bind("t z",(()=>{r.Z.publish(new p.p8(2))})),this.bind("ctrl+z",(()=>{r.Z.publish(new p.p8(2))})),this.bind("t left",(()=>{r.Z.publish(new p.Qt(p.uV.Left))})),this.bind("t right",(()=>{r.Z.publish(new p.Qt(p.uV.Right))})),this.bindWithPanelId("e",(t=>{if(e.canEditPanelById(t)){const e=void 0!==d.locationService.getSearchObject().editPanel;d.locationService.partial({editPanel:e?null:t})}})),this.bindWithPanelId("v",(e=>{const t=void 0!==d.locationService.getSearchObject().viewPanel;d.locationService.partial({viewPanel:t?null:e})})),this.bindWithPanelId("i",(e=>{d.locationService.partial({inspect:e})})),h.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",(async t=>{const s=e.getPanelById(t),a=await(0,g.ak)().get(s.datasource),n=await(0,o.H6)({panel:s,panelTargets:s.targets,panelDatasource:a,datasourceSrv:(0,g.ak)(),timeSrv:(0,m.$t)()});if(n){const e=i.locationUtil.stripBaseFromUrl(n);e&&d.locationService.push(e)}})),this.bindWithPanelId("p r",(t=>{!e.canEditPanelById(t)||e.panelInView||e.panelInEdit||r.Z.publish(new p.Eb(t))})),this.bindWithPanelId("p d",(t=>{if(e.canEditPanelById(t)){const s=e.getPanelInfoById(t).index;e.duplicatePanel(e.panels[s])}})),this.bindWithPanelId("p s",(t=>{const s=e.getPanelInfoById(t);r.Z.publish(new p.Dn({component:l.V8,props:{dashboard:e,panel:null==s?void 0:s.panel}}))})),this.bindWithPanelId("p l",(t=>{const s=e.getPanelInfoById(t);s.panel.legend&&(s.panel.legend.show=!s.panel.legend.show,s.panel.render())})),this.bind("d l",(()=>{e.toggleLegendsForAll()})),this.bind("d shift+c",(()=>{e.collapseRows()})),this.bind("d shift+e",(()=>{e.expandRows()})),this.bind("d n",(()=>{d.locationService.push("/dashboard/new")})),this.bind("d r",(()=>{e.startRefresh()})),this.bind("d s",(()=>{this.showDashEditView()})),this.bind("d k",(()=>{(0,u.qk)()})),this.bind("d a",(()=>{const e=d.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+e}))}}},"./public/app/core/services/search_srv.ts":(e,t,s)=>{"use strict";s.d(t,{i:()=>u});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/core/services/impression_srv.ts"),i=s("./public/app/core/store.ts"),r=s("./public/app/core/services/context_srv.ts"),o=s("./public/app/features/search/utils.ts"),l=s("./public/app/features/search/constants.ts"),c=s("./public/app/features/search/types.ts"),d=s("./public/app/core/services/backend_srv.ts");class u{getRecentDashboards(e){return this.queryForRecentDashboards().then((t=>{t.length>0&&(e.recent={title:"Recent",icon:"clock-nine",score:-1,expanded:i.Z.getBool(`${l.qi}.recent`,!0),items:t,type:c.o.DashFolder})}))}queryForRecentDashboards(){const e=(0,a.take)(n.Z.getDashboardOpened(),30);return 0===e.length?Promise.resolve([]):d.ae.search({dashboardIds:e}).then((t=>e.map((e=>t.find((t=>t.id===e)))).filter((e=>e&&!e.isStarred))))}getStarred(e){return r.Vt.isSignedIn?d.ae.search({starred:!0,limit:30}).then((t=>{t.length>0&&(e.starred={title:"Starred",icon:"star",score:-2,expanded:i.Z.getBool(`${l.qi}.starred`,!0),items:t,type:c.o.DashFolder})})):Promise.resolve()}search(e){var t;const s={},n=[],i=(0,a.clone)(e),r=(0,o.L)(e)||(null===(t=i.folderIds)||void 0===t?void 0:t.length)>0;return i.folderIds=i.folderIds||[],i.layout===c.A.List?d.ae.search(Object.assign({},i,{type:c.o.DashDB})).then((e=>e.length?[{title:"",items:e}]:[])):(r||(i.folderIds=[0]),e.skipRecent||r||n.push(this.getRecentDashboards(s)),e.skipStarred||r||n.push(this.getStarred(s)),n.push(d.ae.search(i).then((e=>this.handleSearchResult(s,e)))),Promise.all(n).then((()=>(0,a.sortBy)((0,a.values)(s),"score"))))}handleSearchResult(e,t){if(0===t.length)return e;for(const s of t)"dash-folder"===s.type&&(e[s.id]={id:s.id,uid:s.uid,title:s.title,expanded:!1,items:[],url:s.url,icon:"folder",score:(0,a.keys)(e).length,type:s.type});for(const s of t){if("dash-folder"===s.type)continue;let t=e[s.folderId||0];t||(t=s.folderId?{id:s.folderId,uid:s.folderUid,title:s.folderTitle,url:s.folderUrl,items:[],icon:"folder-open",score:(0,a.keys)(e).length,type:c.o.DashFolder}:{id:0,title:"General",items:[],icon:"folder-open",score:(0,a.keys)(e).length,type:c.o.DashFolder},e[s.folderId||0]=t),t.expanded=!0,t.items&&t.items.push(s)}}getDashboardTags(){return d.ae.get("/api/dashboards/tags")}getSortOptions(){return d.ae.get("/api/search/sorting")}}},"./public/app/core/store.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a=new class{get(e){return window.localStorage[e]}set(e,t){window.localStorage[e]=t}getBool(e,t){return void 0===t||this.exists(e)?"true"===window.localStorage[e]:t}getObject(e,t){let s=t;if(this.exists(e)){const a=window.localStorage[e];try{s=JSON.parse(a)}catch(s){console.error(`Error parsing store object: ${e}. Returning default: ${t}. [${s}]`)}}return s}setObject(e,t){let s;try{s=JSON.stringify(t)}catch(t){throw new Error(`Could not stringify object: ${e}. [${t}]`)}try{this.set(e,s)}catch(t){throw new Error(`Could not save item in localStorage: ${e}. [${t}]`)}return!0}exists(e){return void 0!==window.localStorage[e]}delete(e){window.localStorage.removeItem(e)}}},"./public/app/core/table_model.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i,M:()=>o});var a=s("./node_modules/lodash/lodash.js");function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e){if(n(this,"columns",void 0),n(this,"rows",void 0),n(this,"type",void 0),n(this,"columnMap",void 0),n(this,"refId",void 0),n(this,"meta",void 0),this.columns=[],this.columnMap={},this.rows=[],this.type="table",e){if(e.columns)for(const t of e.columns)this.addColumn(t);if(e.rows)for(const t of e.rows)this.addRow(t)}}sort(e){null===e.col||this.columns.length<=e.col||(this.rows.sort(((t,s)=>+(null==(t=t[e.col]))-+(null==(s=s[e.col]))||+(t>s)||-(t<s))),e.desc&&this.rows.reverse(),this.columns[e.col].sort=!0,this.columns[e.col].desc=e.desc)}addColumn(e){this.columnMap[e.text]||(this.columns.push(e),this.columnMap[e.text]=e)}addRow(e){this.rows.push(e)}}function r(e,t,s){let a=!1;for(let n=0;n<e.length;n++)if(void 0!==t[n]&&void 0!==s[n]){if(t[n]!==s[n])return!1}else void 0!==t[n]&&void 0!==s[n]||(a=!0);return a}function o(e,...t){const s=e||new i;if(1===arguments.length)return s;if(2===arguments.length)return s.columns=t[0].hasOwnProperty("columns")?[...t[0].columns]:[],s.rows=t[0].hasOwnProperty("rows")?[...t[0].rows]:[],s;const n=t.filter((e=>!!e.columns)),o={},l=n.slice().reduce(((e,t)=>(t.columns.forEach((t=>{const{text:s}=t;void 0===o[s]&&(o[s]=e.length,e.push(t))})),e)),[]),c=n.map((e=>e.columns.map((e=>o[e.text])))),d=n.reduce(((e,t,s)=>{const a=c[s];return t.rows.forEach((t=>{const s=[];a.forEach(((e,a)=>{s[e]=t[a]})),e.push(s)})),e}),[]),u={},p=d.reduce(((e,t,s)=>{if(!u[s]){let n=s+1;for(;n<d.length;){const e=(0,a.findIndex)(d,(e=>r(l,t,e)),n);if(!(e>-1))break;{const s=d[e];for(let e=0;e<l.length;e++)void 0===t[e]&&void 0!==s[e]&&(t[e]=s[e]);u[e]=s,n=e+1}}e.push(t)}return e}),[]);return s.columns=l,s.rows=p,s}},"./public/app/core/time_series2.ts":(e,t,s)=>{"use strict";s.d(t,{W:()=>o,Z:()=>l});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/index.ts");function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function r(e,t){if(!e)return!1;if("/"===e[0]){const s=(0,n.stringToJsRegex)(e);return null!=t.match(s)}return e===t}function o(e,t,s){for(let s=0;s<e.length;s++){const i=e[s],r=t.yaxes[(i.yaxis||1)-1],o=(0,n.getValueFormat)(r.format);(0,a.isNumber)(t.decimals)?i.updateLegendValues(o,t.decimals):(0,a.isNumber)(r.decimals)?i.updateLegendValues(o,r.decimals+1):i.updateLegendValues(o,null)}}class l{constructor(e){i(this,"datapoints",void 0),i(this,"id",void 0),i(this,"dataFrameIndex",void 0),i(this,"fieldIndex",void 0),i(this,"label",void 0),i(this,"alias",void 0),i(this,"aliasEscaped",void 0),i(this,"color",void 0),i(this,"valueFormater",void 0),i(this,"stats",void 0),i(this,"legend",void 0),i(this,"hideTooltip",void 0),i(this,"allIsNull",void 0),i(this,"allIsZero",void 0),i(this,"decimals",void 0),i(this,"hasMsResolution",void 0),i(this,"isOutsideRange",void 0),i(this,"lines",void 0),i(this,"hiddenSeries",void 0),i(this,"dashes",void 0),i(this,"bars",void 0),i(this,"points",void 0),i(this,"yaxis",void 0),i(this,"zindex",void 0),i(this,"stack",void 0),i(this,"nullPointMode",void 0),i(this,"fillBelowTo",void 0),i(this,"transform",void 0),i(this,"flotpairs",void 0),i(this,"unit",void 0),this.datapoints=e.datapoints,this.label=e.alias,this.id=e.alias,this.alias=e.alias,this.aliasEscaped=(0,a.escape)(e.alias),this.color=e.color,this.bars={fillColor:e.color},this.valueFormater=(0,n.getValueFormat)("none"),this.stats={},this.legend=!0,this.unit=e.unit,this.dataFrameIndex=e.dataFrameIndex,this.fieldIndex=e.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(e){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let a=0;a<e.length;a++){const n=e[a];r(n.alias,this.alias)&&(void 0!==n.lines&&(this.lines.show=n.lines),void 0!==n.dashes&&(this.dashes.show=n.dashes,this.lines.lineWidth=0),void 0!==n.points&&(this.points.show=n.points),void 0!==n.bars&&(this.bars.show=n.bars),void 0!==n.fill&&(this.lines.fill=0===(s=n.fill)?.001:s/10),void 0!==n.fillGradient&&(this.lines.fillColor=(t=n.fillGradient)?{colors:[{opacity:0},{opacity:t/10}]}:null),void 0!==n.stack&&(this.stack=n.stack),void 0!==n.linewidth&&(this.lines.lineWidth=this.dashes.show?0:n.linewidth,this.dashes.lineWidth=n.linewidth),void 0!==n.dashLength&&(this.dashes.dashLength[0]=n.dashLength),void 0!==n.spaceLength&&(this.dashes.dashLength[1]=n.spaceLength),void 0!==n.nullPointMode&&(this.nullPointMode=n.nullPointMode),void 0!==n.pointradius&&(this.points.radius=n.pointradius),void 0!==n.steppedLine&&(this.lines.steps=n.steppedLine),void 0!==n.zindex&&(this.zindex=n.zindex),void 0!==n.fillBelowTo&&(this.fillBelowTo=n.fillBelowTo),void 0!==n.color&&this.setColor(n.color),void 0!==n.transform&&(this.transform=n.transform),void 0!==n.legend&&(this.legend=n.legend),void 0!==n.hideTooltip&&(this.hideTooltip=n.hideTooltip),void 0!==n.yaxis&&(this.yaxis=n.yaxis),void 0!==n.hiddenSeries&&(this.hiddenSeries=n.hiddenSeries))}var t,s}getFlotPairs(e){const t=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const s="connected"===e,n="null as zero"===e;let i,r,o,l=0,c=0,d=!0;for(let e=0;e<this.datapoints.length;e++){if(r=this.datapoints[e][0],i=this.datapoints[e][1],void 0!==o){const e=i-o;e<this.stats.timeStep&&(this.stats.timeStep=e)}if(o=i,null===r){if(s)continue;n&&(r=0)}null!==r&&((0,a.isNumber)(r)&&(this.stats.total+=r,this.allIsNull=!1,l++),r>this.stats.max&&(this.stats.max=r),r<this.stats.min&&(this.stats.min=r),null===this.stats.first?this.stats.first=r:c>r?(d=!1,e===this.datapoints.length-1&&(this.stats.delta+=r)):(this.stats.delta+=d?r-c:r,d=!0),c=r,r<this.stats.logmin&&r>0&&(this.stats.logmin=r),0!==r&&(this.allIsZero=!1)),t.push([i,r])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),t.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/l,this.stats.current=t[t.length-1][1],null===this.stats.current&&t.length>1&&(this.stats.current=t[t.length-2][1])),null!==this.stats.max&&null!==this.stats.min&&(this.stats.range=this.stats.max-this.stats.min),null!==this.stats.current&&null!==this.stats.first&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=t.length,t}updateLegendValues(e,t){this.valueFormater=e,this.decimals=t}formatValue(e){return(0,a.isFinite)(e)||(e=null),(0,n.formattedValueToString)(this.valueFormater(e,this.decimals))}isMsResolutionNeeded(){for(let e=0;e<this.datapoints.length;e++)if(null!==this.datapoints[e][1]&&void 0!==this.datapoints[e][1]){const t=this.datapoints[e][1].toString();if(13===t.length&&t%1e3!=0)return!0}return!1}hideFromLegend(e){return!(!e.hideEmpty||!this.allIsNull)||(!this.legend||!(!e.hideZero||!this.allIsZero))}setColor(e){this.color=e,this.bars.fillColor=e}}},"./public/app/core/utils/ConfigProvider.tsx":(e,t,s)=>{"use strict";s.d(t,{E_:()=>d,f6:()=>u,ER:()=>p});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./public/app/core/core.ts"),o=s("./public/app/types/events.ts"),l=s("./packages/grafana-data/src/index.ts"),c=s("./node_modules/react/jsx-runtime.js");const d=a.createContext(n.config),u=(d.Consumer,({children:e})=>{const[t,s]=(0,a.useState)((0,l.createTheme)({colors:{mode:n.config.bootData.user.lightTheme?"light":"dark"}}));return(0,a.useEffect)((()=>{const e=r.h$.subscribe(o.hD,(e=>{s(e.payload)}));return()=>e.unsubscribe()}),[]),(0,c.jsx)(i.ThemeContext.Provider,{value:t,children:e})});const p=e=>(e=>t=>(0,c.jsx)(d.Provider,{value:n.config,children:a.createElement(e,Object.assign({},t))}))((t=>(0,c.jsx)(u,{children:a.createElement(e,Object.assign({},t))})))},"./public/app/core/utils/acl.ts":(e,t,s)=>{"use strict";function a(e){return e.map(n).sort(((e,t)=>t.sortRank-e.sortRank||e.name.localeCompare(t.name)))}function n(e){const t=e;return t.sortRank=0,t.userId>0?(t.name=t.userLogin,t.sortRank=10):t.teamId>0?(t.name=t.team,t.sortRank=20):t.role&&(t.icon="fa fa-fw fa-street-view",t.name=t.role,t.sortRank=30,"Editor"===t.role&&(t.sortRank+=1)),t.inherited&&(t.sortRank+=100),t}s.d(t,{A:()=>a})},"./public/app/core/utils/arrayMove.ts":(e,t,s)=>{"use strict";s.d(t,{R:()=>a});const a=(e,t,s)=>(e.splice(s,0,e.splice(t,1)[0]),e)},"./public/app/core/utils/connectWithReduxStore.tsx":(e,t,s)=>{"use strict";s.d(t,{R:()=>r,k:()=>o});s("./node_modules/react/index.js");var a=s("./node_modules/react-redux/es/index.js"),n=s("./public/app/store/store.ts"),i=s("./node_modules/react/jsx-runtime.js");function r(e,...t){const s=(0,a.connect)(...t)(e);return e=>(0,i.jsx)(s,Object.assign({},e,{store:n.h}))}function o(e,...t){const s=(0,a.connect)(...t)(e);return e=>(0,i.jsx)(a.Provider,{store:n.h,children:(0,i.jsx)(s,Object.assign({},e,{store:n.h}))})}},"./public/app/core/utils/errors.ts":(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var a=s("./node_modules/lodash/lodash.js");function n(e){return e&&!(0,a.isString)(e)?e.message?e.message:e.data&&e.data.message?e.data.message:e.statusText?e.statusText:JSON.stringify(e):e}},"./public/app/core/utils/explore.ts":(e,t,s)=>{"use strict";s.d(t,{UI:()=>u,I$:()=>p,H6:()=>h,Zf:()=>g,uC:()=>m,Xh:()=>v,J5:()=>x,Xk:()=>w,fR:()=>j,Z8:()=>k,z_:()=>C,_Q:()=>T,$$:()=>N,OQ:()=>O,vP:()=>P,Oy:()=>M,F3:()=>F,RZ:()=>A,n9:()=>D});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./public/app/core/store.ts"),r=s("./node_modules/uuid/dist/esm-browser/v4.js"),o=s("./public/app/core/utils/query.ts"),l=s("./packages/grafana-ui/src/index.ts"),c=s("./public/app/core/config.ts");const d=["key"];const u={from:"now-1h",to:"now"},p=(n.LogsDedupStrategy.none,e=>`grafana.explore.datasource.${e}`);async function h(e){var t;const{panel:s,panelTargets:i,panelDatasource:r,datasourceSrv:o,timeSrv:l}=e;let c,d=r,u=i.map((e=>(0,a.omit)(e,"legendFormat")));if("mixed"===(null===(t=r.meta)||void 0===t?void 0:t.id)&&u)for(const e of u){const t=await o.get(e.datasource||void 0);if(t){d=t,u=i.filter((e=>e.datasource===t.name));break}}if(d){let e={range:l.timeRangeForUrl()};if(d.interpolateVariablesInQueries){const t=s.scopedVars||{};e=Object.assign({},e,{datasource:d.name,context:"explore",queries:d.interpolateVariablesInQueries(u,t)})}else e=Object.assign({},e,{datasource:d.name,context:"explore",queries:u.map((e=>Object.assign({},e,{datasource:d.name})))});const t=JSON.stringify(Object.assign({},e,{originPanelId:s.getSavedId()}));c=n.urlUtil.renderUrl("/explore",{left:t})}return c}function g(e,t,s,a,i,r){const o=t.reduce(((e,t)=>e+=t.key),""),{interval:l,intervalMs:c}=function(e,t,s){if(!s)return{interval:"1s",intervalMs:1e3};return n.rangeUtil.calculateInterval(e,s,t)}(a,s.minInterval,s.maxDataPoints),d=`${o}`;return{queries:t,request:{app:n.CoreApp.Explore,dashboardId:0,timezone:r||n.DefaultTimeZone,startTime:Date.now(),interval:l,intervalMs:c,panelId:d,targets:t,range:a,requestId:"explore_"+e,rangeRaw:a.raw,scopedVars:{__interval:{text:l,value:l},__interval_ms:{text:c,value:c}},maxDataPoints:s.maxDataPoints,liveStreaming:s.liveStreaming},scanning:i,id:y(),done:!1}}const m=e=>function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,d),f=(e,...t)=>t.some((t=>e.hasOwnProperty(t)));var b;!function(e){e[e.RangeFrom=0]="RangeFrom",e[e.RangeTo=1]="RangeTo",e[e.Datasource=2]="Datasource",e[e.SegmentsStart=3]="SegmentsStart"}(b||(b={}));const v=(e,t)=>{if(!e)return"";try{return JSON.stringify(e,null,t)}catch(e){console.error(e)}return""};function x(e){const t=(e=>{if(e)try{return JSON.parse(e)}catch(e){console.error(e)}})(e),s={datasource:null,queries:[],range:u,mode:null,originPanelId:null};if(!t)return s;if(!Array.isArray(t))return t;if(t.length<=b.SegmentsStart)return console.error("Error parsing compact URL state for Explore."),s;const a={from:t[b.RangeFrom],to:t[b.RangeTo]},n=t[b.Datasource],i=t.slice(b.SegmentsStart);return{datasource:n,queries:i.filter((e=>!f(e,"ui","originPanelId","mode"))),range:a,originPanelId:i.filter((e=>f(e,"originPanelId")))[0]}}function y(e=0){return`Q-${(0,r.Z)()}-${e}`}function w(e,t=0){return{refId:(0,o.Hs)(e),key:y(t)}}const j=(e,t,s=0)=>{const a=y(s),n=e.refId||(0,o.Hs)(t);return Object.assign({},e,{refId:n,key:a})};function k(e){if(e&&"object"==typeof e&&e.length>0){const t=[];for(let s=0;s<e.length;s++){const a=e[s],n=y(s);let i=a.refId;i||(i=(0,o.Hs)(t)),t.push(Object.assign({},a,{refId:i,key:n}))}return t}return[Object.assign({},w(null!=e?e:[]))]}const S=["refId","key","context"];function C(e){return e&&e.some((e=>Object.keys(e).filter((e=>-1===S.indexOf(e))).map((t=>e[t])).filter((e=>e)).length>0))}function T(e,t,s){const a=Date.now();let n=e;s.forEach((e=>{n=[{query:e,ts:a},...n]})),n.length>100&&(n=n.slice(0,100));const r=`grafana.explore.history.${t}`;try{return i.Z.setObject(r,n),n}catch(t){return console.error(t),e}}const N=(e,t)=>e.reduce(((e,s,a)=>{const n=t&&t.name?t.name:s.key;return e.concat(`${n}-${a}`)}),[]),O=(e,t,s)=>({from:n.dateMath.parse(t.from,!1,e,s),to:n.dateMath.parse(t.to,!0,e,s),raw:t}),I=e=>{if(null===e)return null;if((0,n.isDateTime)(e))return e;if(-1!==e.indexOf("now"))return e;if(8===e.length)return(0,n.toUtc)(e,"YYYYMMDD");if(15===e.length)return(0,n.toUtc)(e,"YYYYMMDDTHHmmss");if(19===e.length)return(0,n.toUtc)(e,"YYYY-MM-DD HH:mm:ss");if(e.match(/^\d+$/)){const t=parseInt(e,10);return(0,n.toUtc)(t)}const t=(0,n.toUtc)(e);return t.isValid()?t:null},P=(e,t,s)=>{const a={from:I(e.from),to:I(e.to)};return{from:n.dateMath.parse(a.from,!1,t),to:n.dateMath.parse(a.to,!0,t),raw:a}},M=e=>l.RefreshPicker.isLive(e)?n.LogsSortOrder.Ascending:n.LogsSortOrder.Descending,F=e=>{let t=`${"https:"===window.location.protocol?"wss://":"ws://"}${window.location.host}${c.vc.appSubUrl}`;return t.endsWith("/")&&(t=t.slice(0,-1)),`${t}${e}`},A=e=>{e&&e.unsubscribe()};const D=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},"./public/app/core/utils/fetch.ts":(e,t,s)=>{"use strict";s.d(t,{nS:()=>i,aO:()=>u,tW:()=>p,Xv:()=>h});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/index.ts");const i=e=>{const t=e.method,s=l(e),a=c(s);return{method:t,headers:s,body:d(e,a),credentials:g(e)}},r=e=>({canParse:t=>(null!=t&&t.method?null==t?void 0:t.method.toLowerCase():"")===e,parse:e=>(e.get("content-type")||e.set("content-type","application/json"),e)}),o=[r("post"),r("put"),r("patch"),{canParse:()=>!0,parse:e=>(e.get("accept")||e.set("accept","application/json, text/plain, */*"),e)}],l=e=>{const t=null!=e&&e.headers?new Headers(e.headers):new Headers;return o.filter((t=>t.canParse(e))).reduce(((e,t)=>t.parse(e)),t)},c=e=>{if(!e)return!1;const t=e.get("content-type");return!(!t||"application/json"!==t.toLowerCase())},d=(e,t)=>e?e.data&&"string"!=typeof e.data?t?JSON.stringify(e.data):new URLSearchParams(e.data):e.data:e;async function u(e,t){if(t)switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json();case"text":return e.text()}const s=await e.text();try{return JSON.parse(s)}catch{}return s}function p(e){return Object.keys(e).map((t=>{const s=e[t];return Array.isArray(s)?s.map((e=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"):`${encodeURIComponent(t)}=${encodeURIComponent(s)}`})).join("&")}const h=e=>{const t=p((0,a.omitBy)(e.params,(e=>void 0===e||e&&0===e.length)));return e.params&&t.length?`${e.url}?${t}`:e.url},g=e=>e?e.credentials?e.credentials:e.withCredentials?((0,n.deprecationWarning)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin":e},"./public/app/core/utils/flatten.ts":(e,t,s)=>{"use strict";function a(e,t){const s=(t=t||{}).delimiter||".";let a=t.maxDepth||3,n=1;const i={};return function e(r,o){Object.keys(r).forEach((l=>{var c,d;const u=r[l],p=(null===(c=t)||void 0===c?void 0:c.safe)&&Array.isArray(u),h="[object Object]"===Object.prototype.toString.call(u),g=o?o+s+l:l;if(null!==(d=t)&&void 0!==d&&d.maxDepth||(a=n+1),!p&&h&&Object.keys(u).length&&n<a)return++n,e(u,g);i[g]=u}))}(e,null),i}s.r(t),s.d(t,{default:()=>a})},"./public/app/core/utils/kbn.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s("./packages/grafana-data/src/index.ts");const n={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:e=>e.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&"),roundInterval:e=>((0,a.deprecationWarning)("kbn.ts","kbn.roundInterval()","@grafana/data"),a.rangeUtil.roundInterval(e)),secondsToHms:e=>((0,a.deprecationWarning)("kbn.ts","kbn.secondsToHms()","@grafana/data"),a.rangeUtil.secondsToHms(e)),secondsToHhmmss:e=>{const t=[],s=Math.floor(e/3600),a=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return s>9?t.push(""+s):t.push("0"+s),a>9?t.push(""+a):t.push("0"+a),n>9?t.push(""+n):t.push("0"+n),t.join(":")},toPercent:(e,t)=>Math.floor(e/t*1e4)/100+"%",addSlashes:e=>e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\'/g,"\\'")).replace(/\"/g,'\\"')).replace(/\0/g,"\\0"),describeInterval:e=>((0,a.deprecationWarning)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),a.rangeUtil.describeInterval(e)),intervalToSeconds:e=>((0,a.deprecationWarning)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),a.rangeUtil.intervalToSeconds(e)),intervalToMs:e=>((0,a.deprecationWarning)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),a.rangeUtil.intervalToMs(e)),calculateInterval:(e,t,s)=>((0,a.deprecationWarning)("kbn.ts","kbn.calculateInterval()","@grafana/data"),a.rangeUtil.calculateInterval(e,t,s)),queryColorDot:(e,t)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+e,"font-size:"+t+"px"].join(";")+'"></div>',slugifyForUrl:e=>e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:e=>((0,a.deprecationWarning)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,a.stringToJsRegex)(e)),toFixed:(e,t)=>{if(null===e)return"";const s=t?Math.pow(10,Math.max(0,t)):1,a=String(Math.round(e*s)/s);if(-1!==a.indexOf("e")||0===e)return a;if(null!=t){const e=a.indexOf("."),n=-1===e?0:a.length-e-1;if(n<t)return(n?a:a+".")+String(s).substr(1,t-n)}return a},toFixedScaled:(e,t,s,a,i)=>null===s?n.toFixed(e,t)+i:n.toFixed(e,s+a)+i,roundValue:(e,t)=>{if(null===e)return null;const s=Math.pow(10,t),a=(s*e).toFixed(t);return Math.round(parseFloat(a))/s},getUnitFormats:a.getValueFormats};"undefined"!=typeof Proxy?n.valueFormats=new Proxy(n.valueFormats,{get(e,t,s){if("string"!=typeof t)throw{message:`Value format ${String(t)} is not a string`};const n=(0,a.getValueFormat)(t);return n?(e,t,s,i)=>(0,a.formattedValueToString)(n(e,t,s,i?"utc":"browser")):Reflect.get(e,t,s)}}):n.valueFormats=(0,a.getValueFormatterIndex)();const i=n},"./public/app/core/utils/promiseToDigest.ts":(e,t,s)=>{"use strict";s.d(t,{E:()=>a});const a=e=>t=>t.finally(e.$evalAsync)},"./public/app/core/utils/query.ts":(e,t,s)=>{"use strict";s.d(t,{Hs:()=>a,DI:()=>n,mu:()=>i,R8:()=>r});const a=e=>{for(let t=0;;t++){const s=o(t);if(!e.some((e=>e.refId===s)))return s}};function n(e,t){const s=t||{};return s.refId=a(e),s.hide=!1,[...e,s]}function i(e){return-1!==e.indexOf("api/datasources/proxy")||-1!==e.indexOf("api/tsdb/query")||-1!==e.indexOf("api/ds/query")}function r(e){return!e.match(/^http/)}function o(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e<t.length?t[e]:o(Math.floor(e/t.length)-1)+t[e%t.length]}},"./public/app/core/utils/richHistory.ts":(e,t,s)=>{"use strict";s.d(t,{hO:()=>p,As:()=>h,au:()=>g,ub:()=>m,HK:()=>f,VI:()=>b,gt:()=>v,y9:()=>x,t2:()=>y,bQ:()=>w,OH:()=>S,k4:()=>C,DR:()=>T,ZX:()=>N});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./public/app/core/store.ts"),r=s("./public/app/store/store.ts"),o=s("./public/app/core/actions/index.ts"),l=s("./public/app/core/copy/appNotification.ts"),c=s("./packages/grafana-data/src/utils/url.ts"),d=s("./packages/grafana-runtime/src/index.ts");const u="grafana.explore.richHistory",p={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"};let h;function g(e,t,s,n,c,d,h){const g=Date.now(),m=n&&n.filter((e=>function(e){const t=(0,a.omit)(e,["key","refId","datasource"]);if(Object.keys(t).length>0)return!0;return!1}(e))),f=i.Z.getObject(p.retentionPeriod,7),b=j(f,!1),v=e.filter((e=>e.ts>b||!0===e.starred))||[];if(m.length>0){const n=m.map((e=>(0,a.omit)(e,["key","refId"]))),p=v.length>0&&v[0].queries.map((e=>(0,a.omit)(e,["key","refId"])));if((0,a.isEqual)(n,p))return e;let f=[{queries:m,ts:g,datasourceId:t,datasourceName:s,starred:c,comment:d,sessionName:h},...v];try{return i.Z.setObject(u,f),f}catch(t){return(0,r.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",t.message))),e}}return e}function m(){return function(e){return e.map((e=>{const t=e.queries.map(((e,t)=>function(e,t,s){const a="ABCDEFGHIJKLMNOPQRSTUVXYZ";if("object"==typeof t)return t;if(function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(t))return JSON.parse(t);return{expr:t,refId:a[s]}}(0,e,t)));return Object.assign({},e,{queries:t})}))}(i.Z.getObject(u,[]))}function f(){return i.Z.delete(u)}function b(e,t){const s=e.map((e=>{if(e.ts===t){const t=e.starred;return Object.assign({},e,{starred:!t})}return e}));try{return i.Z.setObject(u,s),s}catch(t){return(0,r.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",t.message))),e}}function v(e,t,s){const a=e.map((e=>{if(e.ts===t){return Object.assign({},e,{comment:s})}return e}));try{return i.Z.setObject(u,a),a}catch(t){return(0,r.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",t.message))),e}}function x(e,t){const s=e.filter((e=>e.ts!==t));try{return i.Z.setObject(u,s),s}catch(t){return(0,r.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",t.message))),e}}!function(e){e.Descending="Descending",e.Ascending="Ascending",e.DatasourceAZ="Datasource A-Z",e.DatasourceZA="Datasource Z-A"}(h||(h={}));const y=e=>{const t={range:{from:"now-1h",to:"now"},datasource:e.datasourceName,queries:e.queries,context:"explore"},s=(0,c.S)(t,!0),a=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return n.urlUtil.renderUrl(`${a}/explore`,{left:s})},w=e=>{let t;switch(e){case 0:t="today";break;case 1:t="yesterday";break;case 7:t="a week ago";break;case 14:t="two weeks ago";break;default:t=`${e} days ago`}return t},j=(e,t)=>{const s=new Date,a=new Date(s.setDate(s.getDate()-e));return t?a.setHours(24,0,0,0):a.setHours(0,0,0,0)};function k(e,t){let s="";var a;return t===h.DatasourceAZ||t===h.DatasourceZA?s=e.datasourceName:(a=e.ts,s=(0,n.dateTimeFormat)(a,{format:"MMMM D"})),s}function S(e,t){return null!=t&&t.getQueryDisplayText?t.getQueryDisplayText(e):function(e){const t=(0,a.omit)(e,["key","refId","datasource"]);return JSON.stringify(t)}(e)}function C(e,t){let s={};return e.forEach((e=>{let a=k(e,t);s[a]=a in s?[...s[a],e]:[e]})),s}function T(e){const t=[];return e.forEach((e=>{const s=(0,d.getDataSourceSrv)().getInstanceSettings(e);s?t.push({label:s.name,value:s.name,imgUrl:s.meta.info.logos.small,isRemoved:!1}):t.push({label:e,value:e,imgUrl:"public/img/icn-datasource.svg",isRemoved:!0})})),t}function N(e,t,s,n,i){const r=function(e,t){return e.filter((e=>!!e.comment.includes(t)||e.queries.filter((e=>Object.values((0,a.omit)(e,["datasource","key","refId","hide","queryType"])).some((e=>null==e?void 0:e.toString().includes(t))))).length>0))}(function(e,t){return t&&t.length>0?e.filter((e=>t.includes(e.datasourceName))):e}(e,s),n);return((e,t)=>{let s;return t===h.Ascending&&(s=(e,t)=>e.ts<t.ts?-1:e.ts>t.ts?1:0),t===h.Descending&&(s=(e,t)=>e.ts<t.ts?1:e.ts>t.ts?-1:0),t===h.DatasourceZA&&(s=(e,t)=>e.datasourceName<t.datasourceName?-1:e.datasourceName>t.datasourceName?1:0),t===h.DatasourceAZ&&(s=(e,t)=>e.datasourceName<t.datasourceName?1:e.datasourceName>t.datasourceName?-1:0),e.sort(s)})(i?function(e,t){return e.filter((e=>e.ts<j(t[0],!0)&&e.ts>j(t[1],!1)))}(r,i):r,t)}},"./public/app/core/utils/shortLinks.ts":(e,t,s)=>{"use strict";s.d(t,{D:()=>d,L:()=>u});var a=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./public/app/core/utils/explore.ts"),r=s("./public/app/store/store.ts"),o=s("./public/app/core/actions/index.ts"),l=s("./public/app/core/copy/appNotification.ts");function c(e){let t=e.replace(`${window.location.protocol}//${window.location.host}${n.config.appSubUrl}`,"");return t.startsWith("/")?t.substring(1,t.length):t}const d=(0,a.default)((async function(e){try{return(await(0,n.getBackendSrv)().post("/api/short-urls",{path:c(e)})).url}catch(e){console.error("Error when creating shortened link: ",e),(0,r.WI)((0,o.$l)((0,l.t_)("Error generating shortened link")))}})),u=async e=>{const t=await d(e);t?((0,i.n9)(t),(0,r.WI)((0,o.$l)((0,l.AT)("Shortened link copied to clipboard")))):(0,r.WI)((0,o.$l)((0,l.t_)("Error generating shortened link")))}},"./public/app/core/utils/timePicker.ts":(e,t,s)=>{"use strict";s.d(t,{e:()=>n,h:()=>i});var a=s("./packages/grafana-data/src/index.ts");const n=(e,t)=>{const s={from:(0,a.toUtc)(t.from),to:(0,a.toUtc)(t.to)},n=(s.to.valueOf()-s.from.valueOf())/2;let i,r;return-1===e?(i=s.to.valueOf()-n,r=s.from.valueOf()-n):1===e?(i=s.to.valueOf()+n,r=s.from.valueOf()+n,i>Date.now()&&s.to.valueOf()<Date.now()&&(i=Date.now(),r=s.from.valueOf())):(i=s.to.valueOf(),r=s.from.valueOf()),{from:r,to:i}},i=(e,t)=>{const s=e.to.valueOf()-e.from.valueOf(),a=e.to.valueOf()-s/2;return{from:a-s*t/2,to:a+s*t/2}}},"./public/app/features/admin/OrgRolePicker.tsx":(e,t,s)=>{"use strict";s.d(t,{A:()=>l});s("./node_modules/react/index.js");var a=s("./packages/grafana-data/src/index.ts"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/react/jsx-runtime.js");const r=["value","onChange","aria-label"];const o=Object.keys(a.OrgRole).map((e=>({label:e,value:e}))),l=e=>{let{value:t,onChange:s,"aria-label":a}=e,l=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,r);return(0,i.jsx)(n.Select,Object.assign({menuShouldPortal:!0,value:t,options:o,onChange:e=>s(e.value),placeholder:"Choose role...","aria-label":a},l))}},"./public/app/features/admin/state/actions.ts":(e,t,s)=>{"use strict";s.d(t,{PK:()=>d,Nq:()=>u,tQ:()=>p,B9:()=>h,Dx:()=>g,h8:()=>m,Xx:()=>f,bN:()=>b,Jk:()=>v,uV:()=>x,_1:()=>w,Fm:()=>j,j4:()=>k,CP:()=>S,Y3:()=>C,b_:()=>T,V0:()=>N,IS:()=>O,uh:()=>I,R5:()=>M,M6:()=>F,oO:()=>A});var a=s("./public/app/core/config.ts"),n=s("./packages/grafana-data/src/index.ts"),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./public/app/types/index.ts"),o=s("./public/app/features/admin/state/reducers.ts"),l=s("./node_modules/lodash/lodash.js"),c=s("./public/app/core/core.ts");function d(e){return async t=>{try{t((0,o.UA)(!1)),await t(function(e){return async t=>{const s=await(0,i.getBackendSrv)().get(`/api/users/${e}`);t((0,o.pm)(s))}}(e)),await t(function(e){return async t=>{const s=await(0,i.getBackendSrv)().get(`/api/users/${e}/orgs`);t((0,o.fm)(s))}}(e)),await t(y(e)),a.ZP.ldapEnabled&&a.ZP.licenseInfo.hasLicense&&await t(k()),t((0,o.UA)(!0))}catch(e){console.error(e);const s={title:e.data.message,body:e.data.error};t((0,o.sL)(s))}}}function u(e){return async t=>{await(0,i.getBackendSrv)().put(`/api/users/${e.id}`,e),t(d(e.id))}}function p(e,t){return async s=>{const a={password:t};await(0,i.getBackendSrv)().put(`/api/admin/users/${e}/password`,a),s(d(e))}}function h(e){return async t=>{await(0,i.getBackendSrv)().post(`/api/admin/users/${e}/disable`),i.locationService.push("/admin/users")}}function g(e){return async t=>{await(0,i.getBackendSrv)().post(`/api/admin/users/${e}/enable`),t(d(e))}}function m(e){return async t=>{await(0,i.getBackendSrv)().delete(`/api/admin/users/${e}`),i.locationService.push("/admin/users")}}function f(e,t){return async s=>{const a={isGrafanaAdmin:t};await(0,i.getBackendSrv)().put(`/api/admin/users/${e}/permissions`,a),s(d(e))}}function b(e,t,s){return async a=>{const n={loginOrEmail:e.login,role:s};await(0,i.getBackendSrv)().post(`/api/orgs/${t}/users/`,n),a(d(e.id))}}function v(e,t,s){return async a=>{const n={role:s};await(0,i.getBackendSrv)().patch(`/api/orgs/${t}/users/${e}`,n),a(d(e))}}function x(e,t){return async s=>{await(0,i.getBackendSrv)().delete(`/api/orgs/${t}/users/${e}`),s(d(e))}}function y(e){return async t=>{if(!c.Vt.hasPermission(r.bW.UsersAuthTokenList))return;const s=await(0,i.getBackendSrv)().get(`/api/admin/users/${e}/auth-tokens`);s.reverse();const a=s.map((e=>({id:e.id,isActive:e.isActive,seenAt:(0,n.dateTimeFormatTimeAgo)(e.seenAt),createdAt:(0,n.dateTimeFormat)(e.createdAt,{format:"MMMM DD, YYYY"}),clientIp:e.clientIp,browser:e.browser,browserVersion:e.browserVersion,os:e.os,osVersion:e.osVersion,device:e.device})));t((0,o.RC)(a))}}function w(e,t){return async s=>{const a={authTokenId:e};await(0,i.getBackendSrv)().post(`/api/admin/users/${t}/revoke-auth-token`,a),s(y(t))}}function j(e){return async t=>{await(0,i.getBackendSrv)().post(`/api/admin/users/${e}/logout`),t(y(e))}}function k(){return async e=>{const t=c.Vt.hasPermission(r.bW.LDAPStatusRead);if(a.ZP.licenseInfo.hasLicense&&t){const t=await(0,i.getBackendSrv)().get("/api/admin/ldap-sync-status");e((0,o.CY)(t))}}}function S(e){return async t=>{await(0,i.getBackendSrv)().post(`/api/admin/ldap/sync/${e}`),t(d(e))}}function C(){return async e=>{if(c.Vt.hasPermission(r.bW.LDAPStatusRead))try{const t=await(0,i.getBackendSrv)().get("/api/admin/ldap/status");e((0,o.Ls)(t))}catch(t){t.isHandled=!0;const s={title:t.data.message,body:t.data.error};e((0,o.y3)(s))}}}function T(e){return async t=>{try{const s=await(0,i.getBackendSrv)().get(`/api/admin/ldap/${encodeURIComponent(e)}`),{name:a,surname:n,email:r,login:l,isGrafanaAdmin:c,isDisabled:d,roles:u,teams:p}=s,h={info:{name:a,surname:n,email:r,login:l},permissions:{isGrafanaAdmin:c,isDisabled:d},roles:u,teams:p};t((0,o.sJ)(h))}catch(e){e.isHandled=!0;const s={title:e.data.message,body:e.data.error};t((0,o.eq)()),t((0,o.VB)(s))}}}function N(){return e=>{e((0,o.WO)())}}function O(){return e=>{e((0,o.WO)()),e((0,o.eq)())}}function I(){return async(e,t)=>{try{const{perPage:s,page:a,query:n,filter:r}=t().userListAdmin,l=await(0,i.getBackendSrv)().get(`/api/users/search?perpage=${s}&page=${a}&query=${n}&filter=${r}`);e((0,o.xh)(l))}catch(e){(0,o.k7)(),console.error(e)}}}const P=(0,l.debounce)((e=>e(I())),500);function M(e){return async t=>{t((0,o.tZ)()),t((0,o.aj)(e)),P(t)}}function F(e){return async t=>{t((0,o.tZ)()),t((0,o.qz)(e)),P(t)}}function A(e){return async t=>{t((0,o.tZ)()),t((0,o.PJ)(e)),t(I())}}},"./public/app/features/admin/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{WO:()=>o,eq:()=>l,Ls:()=>c,y3:()=>d,CY:()=>u,VB:()=>p,sJ:()=>h,pm:()=>b,fm:()=>v,RC:()=>x,UA:()=>y,sL:()=>w,xh:()=>S,tZ:()=>C,k7:()=>T,aj:()=>N,PJ:()=>O,qz:()=>I,ZP:()=>P});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const n=["totalCount","perPage"];const i={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},r=(0,a.oM)({name:"ldap",initialState:i,reducers:{ldapConnectionInfoLoadedAction:(e,t)=>Object.assign({},e,{ldapError:void 0,connectionInfo:t.payload}),ldapFailedAction:(e,t)=>Object.assign({},e,{ldapError:t.payload}),ldapSyncStatusLoadedAction:(e,t)=>Object.assign({},e,{syncInfo:t.payload}),userMappingInfoLoadedAction:(e,t)=>Object.assign({},e,{user:t.payload,userError:void 0}),userMappingInfoFailedAction:(e,t)=>Object.assign({},e,{user:void 0,userError:t.payload}),clearUserMappingInfoAction:(e,t)=>Object.assign({},e,{user:void 0}),clearUserErrorAction:(e,t)=>Object.assign({},e,{userError:void 0})}}),{clearUserErrorAction:o,clearUserMappingInfoAction:l,ldapConnectionInfoLoadedAction:c,ldapFailedAction:d,ldapSyncStatusLoadedAction:u,userMappingInfoFailedAction:p,userMappingInfoLoadedAction:h}=r.actions,g=r.reducer,m={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},f=(0,a.oM)({name:"userAdmin",initialState:m,reducers:{userProfileLoadedAction:(e,t)=>Object.assign({},e,{user:t.payload}),userOrgsLoadedAction:(e,t)=>Object.assign({},e,{orgs:t.payload}),userSessionsLoadedAction:(e,t)=>Object.assign({},e,{sessions:t.payload}),userAdminPageLoadedAction:(e,t)=>Object.assign({},e,{isLoading:!t.payload}),userAdminPageFailedAction:(e,t)=>Object.assign({},e,{error:t.payload,isLoading:!1})}}),{userProfileLoadedAction:b,userOrgsLoadedAction:v,userSessionsLoadedAction:x,userAdminPageLoadedAction:y,userAdminPageFailedAction:w}=f.actions,j=f.reducer,k=(0,a.oM)({name:"userListAdmin",initialState:{users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filter:"all",isLoading:!1},reducers:{usersFetched:(e,t)=>{const s=t.payload,{totalCount:a,perPage:i}=s,r=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(s,n),o=Math.ceil(a/i);return Object.assign({},e,r,{totalPages:o,perPage:i,showPaging:o>1,isLoading:!1})},usersFetchBegin:e=>Object.assign({},e,{isLoading:!0}),usersFetchEnd:e=>Object.assign({},e,{isLoading:!1}),queryChanged:(e,t)=>Object.assign({},e,{query:t.payload,page:0}),pageChanged:(e,t)=>Object.assign({},e,{page:t.payload}),filterChanged:(e,t)=>Object.assign({},e,{filter:t.payload})}}),{usersFetched:S,usersFetchBegin:C,usersFetchEnd:T,queryChanged:N,pageChanged:O,filterChanged:I}=k.actions,P={ldap:g,userAdmin:j,userListAdmin:k.reducer}},"./public/app/features/alerting/AlertTabCtrl.ts":(e,t,s)=>{"use strict";s.d(t,{n:()=>v});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/core/core_module.ts"),i=s("./public/app/features/alerting/state/ThresholdMapper.ts"),r=s("./public/app/core/components/query_part/query_part.ts"),o=s("./public/app/features/alerting/state/alertDef.ts"),l=s("./public/app/core/config.ts"),c=s("./public/app/core/app_events.ts"),d=s("./packages/grafana-runtime/src/index.ts"),u=s("./packages/grafana-data/src/index.ts"),p=s("./public/app/features/alerting/getAlertingValidationMessage.ts"),h=s("./public/app/types/index.ts"),g=s("./public/app/core/utils/promiseToDigest.ts"),m=s("./public/app/types/events.ts");function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class b{constructor(e,t,s,a){f(this,"panel",void 0),f(this,"panelCtrl",void 0),f(this,"subTabIndex",void 0),f(this,"conditionTypes",void 0),f(this,"alert",void 0),f(this,"conditionModels",void 0),f(this,"evalFunctions",void 0),f(this,"evalOperators",void 0),f(this,"noDataModes",void 0),f(this,"executionErrorModes",void 0),f(this,"addNotificationSegment",void 0),f(this,"notifications",void 0),f(this,"alertNotifications",void 0),f(this,"error",void 0),f(this,"appSubUrl",void 0),f(this,"alertHistory",void 0),f(this,"newAlertRuleTag",void 0),f(this,"alertingMinIntervalSecs",void 0),f(this,"alertingMinInterval",void 0),f(this,"frequencyWarning",void 0),f(this,"enable",(()=>{this.panel.alert={},this.initModel(),this.panel.alert.for="5m"})),this.$scope=e,this.dashboardSrv=t,this.uiSegmentSrv=s,this.datasourceSrv=a,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.$scope.ctrl=this,this.subTabIndex=0,this.evalFunctions=o.Z.evalFunctions,this.evalOperators=o.Z.evalOperators,this.conditionTypes=o.Z.conditionTypes,this.noDataModes=o.Z.noDataModes,this.executionErrorModes=o.Z.executionErrorModes,this.appSubUrl=l.ZP.appSubUrl,this.panelCtrl._enableAlert=this.enable,this.alertingMinIntervalSecs=l.ZP.alertingMinInterval,this.alertingMinInterval=u.rangeUtil.secondsToHms(l.ZP.alertingMinInterval)}$onInit(){this.addNotificationSegment=this.uiSegmentSrv.newPlusButton();const e=this.graphThresholdChanged.bind(this);return this.panelCtrl.events.on(h.RW.GL,e),this.$scope.$on("$destroy",(()=>{this.panelCtrl.events.off(h.RW.GL,e),this.panelCtrl.editingThresholds=!1,this.panelCtrl.render()})),this.notifications=[],this.alertNotifications=[],this.alertHistory=[],(0,g.E)(this.$scope)((0,d.getBackendSrv)().get("/api/alert-notifications/lookup").then((e=>{this.notifications=e,this.initModel(),this.validateModel()})))}getAlertHistory(){(0,g.E)(this.$scope)((0,d.getBackendSrv)().get(`/api/annotations?dashboardId=${this.panelCtrl.dashboard.id}&panelId=${this.panel.id}&limit=50&type=alert`).then((e=>{this.alertHistory=(0,a.map)(e,(e=>{var t;return e.time=null===(t=this.dashboardSrv.getCurrent())||void 0===t?void 0:t.formatDate(e.time,"MMM D, YYYY HH:mm:ss"),e.stateModel=o.Z.getStateDisplayModel(e.newState),e.info=o.Z.getAlertAnnotationInfo(e),e}))})))}getNotificationIcon(e){switch(e){case"email":return"envelope";case"slack":return"slack";case"victorops":return"fa fa-pagelines";case"webhook":return"cube";case"pagerduty":return"fa fa-bullhorn";case"opsgenie":return"bell";case"hipchat":return"fa fa-mail-forward";case"pushover":return"mobile-android";case"kafka":return"arrow-random";case"teams":return"fa fa-windows"}return"bell"}getNotifications(){return Promise.resolve(this.notifications.map((e=>this.uiSegmentSrv.newSegment(e.name))))}notificationAdded(){const e=(0,a.find)(this.notifications,{name:this.addNotificationSegment.value});e&&(this.alertNotifications.push({name:e.name,iconClass:this.getNotificationIcon(e.type),isDefault:!1,uid:e.uid}),(0,a.find)(this.alert.notifications,(t=>t.id===e.id||t.uid===e.uid))||this.alert.notifications.push({uid:e.uid}),this.addNotificationSegment.value=this.uiSegmentSrv.newPlusButton().value,this.addNotificationSegment.html=this.uiSegmentSrv.newPlusButton().html,this.addNotificationSegment.fake=!0)}removeNotification(e){(0,a.remove)(this.alert.notifications,(t=>t.uid===e.uid||t.id===e.id)),(0,a.remove)(this.alertNotifications,(t=>t.uid===e.uid||t.id===e.id))}addAlertRuleTag(){this.newAlertRuleTag.name&&(this.alert.alertRuleTags[this.newAlertRuleTag.name]=this.newAlertRuleTag.value),this.newAlertRuleTag.name="",this.newAlertRuleTag.value=""}removeAlertRuleTag(e){delete this.alert.alertRuleTags[e]}initModel(){const e=this.alert=this.panel.alert;if(!e)return;this.checkFrequency(),e.conditions=e.conditions||[],0===e.conditions.length&&e.conditions.push((0,p.z)()),e.noDataState=e.noDataState||l.ZP.alertingNoDataOrNullValues,e.executionErrorState=e.executionErrorState||l.ZP.alertingErrorOrTimeout,e.frequency=e.frequency||"1m",e.handler=e.handler||1,e.notifications=e.notifications||[],e.for=e.for||"0m",e.alertRuleTags=e.alertRuleTags||{};const t=this.panel.title+" alert";e.name=e.name||t,this.conditionModels=(0,a.reduce)(e.conditions,((e,t)=>(e.push(this.buildConditionModel(t)),e)),[]),i.X.alertToGraphThresholds(this.panel);for(const t of e.notifications){let e=t.uid,s=(0,a.find)(this.notifications,{uid:e});!s&&t.id&&(e=t.id,s=(0,a.find)(this.notifications,{id:e})),s||c.Z.publish(new m.VJ({title:"Notifier with invalid identifier is detected",text:`Do you want to delete notifier with invalid identifier: ${e} from the dashboard JSON?`,text2:"After successful deletion, make sure to save the dashboard for storing the update JSON.",icon:"trash-alt",confirmText:"Delete",yesText:"Delete",onConfirm:async()=>{this.removeNotification(t)}})),s&&!1===s.isDefault&&(s.iconClass=this.getNotificationIcon(s.type),this.alertNotifications.push(s))}for(const e of this.notifications)e.isDefault&&(e.iconClass=this.getNotificationIcon(e.type),this.alertNotifications.push(e));this.panelCtrl.editingThresholds=!0,this.panelCtrl.render()}checkFrequency(){if(this.frequencyWarning="",this.alert.frequency)if(this.alert.frequency.match(/^\d+([dhms])$/))try{u.rangeUtil.intervalToSeconds(this.alert.frequency)<this.alertingMinIntervalSecs&&(this.frequencyWarning="A minimum evaluation interval of "+this.alertingMinInterval+" have been configured in Grafana and will be used for this alert rule. Please contact the administrator to configure a lower interval.")}catch(e){this.frequencyWarning=e}else this.frequencyWarning='Invalid frequency, has to be numeric followed by one of the following units: "d, h, m, s"'}graphThresholdChanged(e){for(const t of this.alert.conditions)if("query"===t.type){t.evaluator.params[e.handleIndex]=e.threshold.value,this.evaluatorParamsChanged();break}}validateModel(){if(!this.alert)return;let e,t=null;const s=[];for(const a of this.alert.conditions){if("query"!==a.type)continue;for(const s of this.panel.targets)if(e||(e=s),a.query.params[0]===s.refId){t=s;break}if(!t){if(!e)return void(this.error="Could not find any metric queries");a.query.params[0]=e.refId,t=e}const n=t.datasource||this.panel.datasource;s.push(this.datasourceSrv.get(n).then((e=>t=>t.meta.alerting?t.targetContainsTemplate&&t.targetContainsTemplate(e)?Promise.reject("Template variables are not supported in alert queries"):Promise.resolve():Promise.reject("The datasource does not support alerting queries"))(t)))}Promise.all(s).then((()=>{this.error="",this.$scope.$apply()}),(e=>{this.error=e,this.$scope.$apply()}))}buildConditionModel(e){const t={source:e,type:e.type};return t.queryPart=new r.XN(e.query,o.Z.alertQueryDef),t.reducerPart=o.Z.createReducerPart(e.reducer),t.evaluator=e.evaluator,t.operator=e.operator,t}handleQueryPartEvent(e,t){switch(t.name){case"action-remove-part":break;case"get-part-actions":return Promise.resolve([]);case"part-param-changed":this.validateModel();case"get-param-options":{const e=this.panel.targets.map((e=>this.uiSegmentSrv.newSegment({value:e.refId})));return Promise.resolve(e)}default:return Promise.resolve()}return Promise.resolve()}handleReducerPartEvent(e,t){switch(t.name){case"action":e.source.reducer.type=t.action.value,e.reducerPart=o.Z.createReducerPart(e.source.reducer),this.evaluatorParamsChanged();break;case"get-part-actions":{const t=[];for(const s of o.Z.reducerTypes)s.value!==e.source.reducer.type&&t.push(s);return Promise.resolve(t)}}return Promise.resolve()}addCondition(e){const t=(0,p.z)();this.alert.conditions.push(t),this.conditionModels.push(this.buildConditionModel(t))}removeCondition(e){this.alert.conditions.splice(e,1),this.conditionModels.splice(e,1)}delete(){c.Z.publish(new m.VJ({title:"Delete Alert",text:"Are you sure you want to delete this alert rule?",text2:"You need to save dashboard for the delete to take effect",icon:"trash-alt",yesText:"Delete",onConfirm:()=>{delete this.panel.alert,this.alert=null,this.panel.thresholds=[],this.conditionModels=[],this.panelCtrl.alertState=null,this.panelCtrl.render()}}))}evaluatorParamsChanged(){i.X.alertToGraphThresholds(this.panel),this.panelCtrl.render()}evaluatorTypeChanged(e){switch(e.type){case"lt":case"gt":e.params=[e.params[0]];break;case"within_range":case"outside_range":e.params=[e.params[0],e.params[1]];break;case"no_value":e.params=[]}this.evaluatorParamsChanged()}clearHistory(){c.Z.publish(new m.VJ({title:"Delete Alert History",text:"Are you sure you want to remove all history & annotations for this alert?",icon:"trash-alt",yesText:"Yes",onConfirm:()=>{(0,g.E)(this.$scope)((0,d.getBackendSrv)().post("/api/annotations/mass-delete",{dashboardId:this.panelCtrl.dashboard.id,panelId:this.panel.id}).then((()=>{this.alertHistory=[],this.panelCtrl.refresh()})))}}))}}function v(){return{restrict:"E",scope:!0,templateUrl:"public/app/features/alerting/partials/alert_tab.html",controller:b}}b.$inject=["$scope","dashboardSrv","uiSegmentSrv","datasourceSrv"],n.ZP.directive("alertTab",v)},"./public/app/features/alerting/getAlertingValidationMessage.ts":(e,t,s)=>{"use strict";s.d(t,{z:()=>a,E:()=>n});const a=()=>({type:"query",query:{params:["A","5m","now"]},reducer:{type:"avg",params:[]},evaluator:{type:"gt",params:[null]},operator:{type:"and"}}),n=async(e,t,s,a)=>{if(0===t.length)return"Could not find any metric queries";if(e&&e.length)return"Transformations are not supported in alert queries";let n=0,i=0;for(const e of t){const t=e.datasource||a,r=await s.get(t);r.meta.alerting?r.targetContainsTemplate&&r.targetContainsTemplate(e)&&i++:n++}return n===t.length?"The datasource does not support alerting queries":i===t.length?"Template variables are not supported in alert queries":""}},"./public/app/features/alerting/state/ThresholdMapper.ts":(e,t,s)=>{"use strict";s.d(t,{X:()=>i});var a=s("./public/app/core/config.ts");const n=["percent_diff","percent_diff_abs"];class i{static alertToGraphThresholds(e){if(!e.alert||a.vc.featureToggles.ngalert)return!1;for(let s=0;s<e.alert.conditions.length;s++){var t;const a=e.alert.conditions[s];if("query"!==a.type)continue;const i=a.evaluator,r=e.thresholds=[],o=-1===n.indexOf(null===(t=a.reducer)||void 0===t?void 0:t.type);switch(i.type){case"gt":{const e=i.params[0];r.push({value:e,op:"gt",visible:o});break}case"lt":{const e=i.params[0];r.push({value:e,op:"lt",visible:o});break}case"outside_range":{const e=i.params[0],t=i.params[1];e>t?(r.push({value:e,op:"gt",visible:o}),r.push({value:t,op:"lt",visible:o})):(r.push({value:e,op:"lt",visible:o}),r.push({value:t,op:"gt",visible:o}));break}case"within_range":{const e=i.params[0],t=i.params[1];e>t?(r.push({value:e,op:"lt",visible:o}),r.push({value:t,op:"gt",visible:o})):(r.push({value:e,op:"gt",visible:o}),r.push({value:t,op:"lt",visible:o}));break}}break}for(const t of e.thresholds)t.fill=e.options.alertThreshold,t.line=e.options.alertThreshold,t.colorMode="critical";return!0}}},"./public/app/features/alerting/state/alertDef.ts":(e,t,s)=>{"use strict";s.d(t,{$:()=>r,Z:()=>l});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/core/components/query_part/query_part.ts");const i=new n.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]});let r;!function(e){e.IsAbove="gt",e.IsBelow="lt",e.IsOutsideRange="outside_range",e.IsWithinRange="within_range",e.HasNoValue="no_value"}(r||(r={}));function o(e,t){return(0,a.reduce)(e,((e,t)=>(void 0!==t.metric&&void 0!==t.value&&e.push(t.metric+"="+t.value),void 0!==t.Metric&&void 0!==t.Value&&e.push(t.Metric+"="+t.Value),e)),[]).join(t)}const l={alertQueryDef:i,getStateDisplayModel:function(e){switch(e.toLowerCase().replace(/_/g,"")){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"unknown":return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"}}throw{message:"Unknown alert state"}},conditionTypes:[{text:"Query",value:"query"}],evalFunctions:[{value:r.IsAbove,text:"IS ABOVE"},{value:r.IsBelow,text:"IS BELOW"},{value:r.IsOutsideRange,text:"IS OUTSIDE RANGE"},{value:r.IsWithinRange,text:"IS WITHIN RANGE"},{value:r.HasNoValue,text:"HAS NO VALUE"}],evalOperators:[{text:"OR",value:"or"},{text:"AND",value:"and"}],noDataModes:[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],executionErrorModes:[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}],reducerTypes:[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],createReducerPart:function(e){const t=new n.zU({type:e.type,defaultParams:[]});return new n.XN(e,t)},getAlertAnnotationInfo:function(e){return(0,a.isArray)(e.data)?o(e.data,", "):(0,a.isArray)(e.data.evalMatches)?o(e.data.evalMatches,", "):e.data.error?"Error: "+e.data.error:""},alertStateSortScore:{alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5}}},"./public/app/features/alerting/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{ZP:()=>v,gz:()=>p,Oc:()=>h,K:()=>f,J0:()=>b,T2:()=>m,ql:()=>g});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./public/app/features/alerting/state/alertDef.ts"),r=s("./node_modules/redux/es/redux.js"),o=s("./public/app/features/alerting/unified/utils/redux.ts"),l=s("./public/app/features/alerting/unified/state/actions.ts");const c=(0,r.combineReducers)({promRules:(0,o.jK)("promRules",l.y6,(e=>e)).reducer,rulerRules:(0,o.jK)("rulerRules",l.UR,(e=>e)).reducer,amConfigs:(0,o.jK)("amConfigs",l.Yh,(e=>e)).reducer,silences:(0,o.jK)("silences",l.je,(e=>e)).reducer,ruleForm:(0,r.combineReducers)({saveRule:(0,o.i6)("saveRule",l.wy).reducer,existingRule:(0,o.i6)("existingRule",l.on).reducer}),grafanaNotifiers:(0,o.i6)("grafanaNotifiers",l.Vj).reducer,saveAMConfig:(0,o.i6)("saveAMConfig",l.mM).reducer,deleteAMConfig:(0,o.i6)("deleteAMConfig",l.Nc).reducer,updateSilence:(0,o.i6)("updateSilence",l.QY).reducer,amAlerts:(0,o.jK)("amAlerts",l.dB,(e=>e)).reducer,folders:(0,o.jK)("folders",l.vL,(e=>e)).reducer,amAlertGroups:(0,o.jK)("amAlertGroups",l.mS,(e=>e)).reducer,lotexSupportsRuleEditing:(0,o.jK)("lotexSupportsRuleEditing",l.Yb,(e=>e)).reducer,testReceivers:(0,o.i6)("testReceivers",l.D8).reducer,updateLotexNamespaceAndGroup:(0,o.i6)("updateLotexNamespaceAndGroup",l.hv).reducer});const d=(0,a.oM)({name:"alertRules",initialState:{items:[],searchQuery:"",isLoading:!1},reducers:{loadAlertRules:e=>Object.assign({},e,{isLoading:!0}),loadedAlertRules:(e,t)=>{const s=t.payload.map((e=>function(e,t){const s=i.Z.getStateDisplayModel(t),a=Object.assign({},e,{stateText:s.text,stateIcon:s.iconClass,stateClass:s.stateClass,stateAge:(0,n.dateTime)(e.newStateDate).fromNow(!0)});return"paused"!==a.state&&(a.executionError&&(a.info="Execution Error: "+a.executionError),a.evalData&&a.evalData.noData&&(a.info="Query returned no data")),a}(e,e.state)));return Object.assign({},e,{items:s,isLoading:!1})},setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload})}}),u=(0,a.oM)({name:"notificationChannel",initialState:{notificationChannelTypes:[],notificationChannel:{},notifiers:[]},reducers:{setNotificationChannels:(e,t)=>{return Object.assign({},e,{notificationChannelTypes:(s=t.payload,s.map((e=>Object.assign({value:e.type,label:e.name},e,{typeName:e.type}))).sort(((e,t)=>e.name>t.name?1:-1))),notifiers:t.payload});var s},notificationChannelLoaded:(e,t)=>{const s=t.payload,a=e.notifiers.find((e=>e.type===s.type)).options.filter((e=>e.secure));return a.length>0&&a.some((e=>""!==s.settings[e.propertyName]))?function(e,t,s){const a={},n={};return s.forEach((e=>{n[e.propertyName]=t.settings[e.propertyName],a[e.propertyName]=""})),Object.assign({},e,{notificationChannel:Object.assign({},t,{settings:Object.assign({},t.settings,a),secureSettings:Object.assign({},n)})})}(e,t.payload,a):Object.assign({},e,{notificationChannel:s})},resetSecureField:(e,t)=>Object.assign({},e,{notificationChannel:Object.assign({},e.notificationChannel,{secureFields:Object.assign({},e.notificationChannel.secureFields,{[t.payload]:!1})})})}}),{loadAlertRules:p,loadedAlertRules:h,setSearchQuery:g}=d.actions,{setNotificationChannels:m,notificationChannelLoaded:f,resetSecureField:b}=u.actions,v={alertRules:d.reducer,notificationChannel:u.reducer,unifiedAlerting:c}},"./public/app/features/alerting/unified/components/AlertLabel.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>r});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./node_modules/react/jsx-runtime.js");const r=({labelKey:e,value:t,operator:s="=",onRemoveLabel:n})=>(0,i.jsxs)("div",{className:(0,a.useStyles)(o),children:[e,s,t,!!n&&(0,i.jsx)(a.IconButton,{name:"times",size:"xs",onClick:n})]}),o=e=>n.css`
  padding: ${e.spacing.xs} ${e.spacing.sm};
  border-radius: ${e.border.radius.sm};
  border: solid 1px ${e.colors.border2};
  font-size: ${e.typography.size.sm};
  background-color: ${e.colors.bg2};
  font-weight: ${e.typography.weight.bold};
  color: ${e.colors.formLabel};
  display: inline-block;
  line-height: 1.2;
`},"./public/app/features/alerting/unified/components/AlertLabels.tsx":(e,t,s)=>{"use strict";s.d(t,{s:()=>o});var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=(s("./node_modules/react/index.js"),s("./public/app/features/alerting/unified/components/AlertLabel.tsx")),r=s("./node_modules/react/jsx-runtime.js");const o=({labels:e,className:t})=>{const s=(0,a.useStyles)(l),o=Object.entries(e).filter((([e])=>!(e.startsWith("__")&&e.endsWith("__"))));return(0,r.jsx)("div",{className:(0,n.cx)(s.wrapper,t),children:o.map((([e,t],s)=>(0,r.jsx)(i.i,{labelKey:e,value:t},`${e}-${t}-${s}`)))})},l=e=>({wrapper:n.css`
    & > * {
      margin-bottom: ${e.spacing.xs};
      margin-right: ${e.spacing.xs};
    }
    padding-bottom: ${e.spacing.xs};
  `})},"./public/app/features/alerting/unified/components/AlertManagerPicker.tsx":(e,t,s)=>{"use strict";s.d(t,{P:()=>c});var a=s("./public/app/features/alerting/unified/utils/datasource.ts"),n=s("./node_modules/react/index.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./public/app/features/alerting/unified/utils/config.ts"),o=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),l=s("./node_modules/react/jsx-runtime.js");const c=({onChange:e,current:t,disabled:s=!1})=>{const o=(0,i.useStyles2)(d),c=(0,n.useMemo)((()=>[{label:"Grafana",value:a.GC,imgUrl:"public/img/grafana_icon.svg",meta:{}},...(0,r.x)().filter((e=>e.type===a.ye.Alertmanager)).map((e=>({label:e.name.substr(0,37),value:e.name,imgUrl:e.meta.info.logos.small,meta:e.meta})))]),[]);return 1===c.length?null:(0,l.jsx)(i.Field,{className:o.field,label:s?"Alertmanager":"Choose Alertmanager",disabled:s,"data-testid":"alertmanager-picker",children:(0,l.jsx)(i.Select,{menuShouldPortal:!0,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:t=>t.value&&e(t.value),options:c,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:t,getOptionLabel:e=>e.label})})},d=e=>({field:o.css`
    margin-bottom: ${e.spacing(4)};
  `})},"./public/app/features/alerting/unified/components/CollapseToggle.tsx":(e,t,s)=>{"use strict";s.d(t,{U:()=>o});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/react/jsx-runtime.js");const r=["isCollapsed","onToggle","className","text","size"];const o=e=>{let{isCollapsed:t,onToggle:s,className:o,text:c,size:d="xl"}=e,u=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,r);const p=(0,n.useStyles)(l);return(0,i.jsxs)("button",Object.assign({className:(0,a.cx)(p.expandButton,o),onClick:()=>s(!t)},u,{children:[(0,i.jsx)(n.Icon,{size:d,name:t?"angle-right":"angle-down"}),c]}))},l=()=>({expandButton:a.css`
    background: none;
    border: none;

    outline: none !important;

    display: inline-flex;
    align-items: center;

    svg {
      margin-bottom: 0;
    }
  `})},"./public/app/features/alerting/unified/components/StateTag.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>r});var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=(s("./node_modules/react/index.js"),s("./node_modules/react/jsx-runtime.js"));const r=({children:e,state:t})=>{const s=(0,a.useStyles2)(o);return(0,i.jsx)("span",{className:(0,n.cx)(s.common,s[t]),children:e||t})},o=e=>({common:n.css`
    display: inline-block;
    color: white;
    border-radius: ${e.shape.borderRadius()};
    font-size: ${e.typography.size.sm};
    padding: ${e.spacing(.5,1)};
    text-transform: capitalize;
    line-height: 1.2;
    min-width: ${e.spacing(8)};
    text-align: center;
    font-weight: ${e.typography.fontWeightBold};
  `,good:n.css`
    background-color: ${e.colors.success.main};
    border: solid 1px ${e.colors.success.main};
    color: ${e.colors.success.contrastText};
  `,warning:n.css`
    background-color: ${e.colors.warning.main};
    border: solid 1px ${e.colors.warning.main};
    color: ${e.colors.warning.contrastText};
  `,bad:n.css`
    background-color: ${e.colors.error.main};
    border: solid 1px ${e.colors.error.main};
    color: ${e.colors.error.contrastText};
  `,neutral:n.css`
    background-color: ${e.colors.secondary.main};
    border: solid 1px ${e.colors.secondary.main};
    color: ${e.colors.secondary.contrastText};
  `,info:n.css`
    background-color: ${e.colors.primary.main};
    border: solid 1px ${e.colors.primary.main};
    color: ${e.colors.primary.contrastText};
  `})},"./public/app/features/alerting/unified/components/alert-groups/AlertGroupHeader.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/index.ts"),n=s("./public/app/features/alerting/unified/styles/notifications.ts"),i=s("./node_modules/pluralize/pluralize.js"),r=s.n(i),o=s("./node_modules/react/jsx-runtime.js");const l=({group:e})=>{const t=(0,a.useStyles2)(n.r),s=e.alerts.length,i=e.alerts.reduce(((e,t)=>(e[t.status.state]?e[t.status.state]+=1:e[t.status.state]=1,e)),{});return(0,o.jsxs)("div",{children:[`${s} ${r()("alert",s)}: `,Object.entries(i).map((([s,a],n)=>(0,o.jsxs)("span",{className:t[s],children:[n>0&&", ",`${a} ${s}`]},`${JSON.stringify(e.labels)}-notifications-${n}`)))]})}},"./public/app/features/alerting/unified/components/rule-editor/RuleFolderPicker.tsx":(e,t,s)=>{"use strict";s.d(t,{W:()=>r});s("./node_modules/react/index.js");var a=s("./public/app/core/components/Select/FolderPicker.tsx"),n=s("./node_modules/react/jsx-runtime.js");const i=["value"];const r=e=>{let{value:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,i);return(0,n.jsx)(a.E,Object.assign({showRoot:!1,allowEmpty:!0,initialTitle:null==t?void 0:t.title,initialFolderId:null==t?void 0:t.id},s))}},"./public/app/features/alerting/unified/components/rules/AlertStateTag.tsx":(e,t,s)=>{"use strict";s.d(t,{l:()=>r});s("./node_modules/react/index.js");var a=s("./public/app/features/alerting/unified/utils/rules.ts"),n=s("./public/app/features/alerting/unified/components/StateTag.tsx"),i=s("./node_modules/react/jsx-runtime.js");const r=({state:e})=>(0,i.jsx)(n.i,{state:a.Aq[e],children:(0,a.SS)(e)})},"./public/app/features/alerting/unified/hooks/useUnifiedAlertingSelector.ts":(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var a=s("./node_modules/react-redux/es/index.js");function n(e,t){return(0,a.useSelector)((t=>e(t.unifiedAlerting)),t)}},"./public/app/features/alerting/unified/state/actions.ts":(e,t,s)=>{"use strict";s.d(t,{Yb:()=>Z,QY:()=>z,Nc:()=>Q,X4:()=>U,hS:()=>$,S6:()=>q,yO:()=>B,mS:()=>W,Yh:()=>N,ei:()=>P,lB:()=>M,dB:()=>V,on:()=>A,vL:()=>H,sw:()=>G,Vj:()=>R,y6:()=>T,UR:()=>O,je:()=>I,wy:()=>E,D8:()=>K,mM:()=>_,hv:()=>Y});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");var i=s("./node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/features/alerting/unified/utils/datasource.ts");async function l(e){try{var t,s;const n=await(0,i.n)((0,a.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:null!==(t=n.data.template_files)&&void 0!==t?t:{},alertmanager_config:null!==(s=n.data.alertmanager_config)&&void 0!==s?s:{}}}catch(t){var n,r;if(e===o.GC&&null!==(n=t.data)&&void 0!==n&&null!==(r=n.message)&&void 0!==r&&r.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw t}}async function c(e){return(await(0,i.n)((0,a.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}function d(e){return e.replace(/"/g,'\\"')}var u=s("./public/app/features/alerting/unified/utils/constants.ts");async function p(e,t,s){await(0,i.n)((0,a.getBackendSrv)().fetch({method:"POST",url:`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}`,data:s,showErrorAlert:!1,showSuccessAlert:!1}))}async function h(e){return f(`/api/ruler/${(0,o.aK)(e)}/api/v1/rules`,{})}async function g(e,t,s){return f(`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}/${encodeURIComponent(s)}`,null)}async function m(e,t,s){await(0,i.n)((0,a.getBackendSrv)().fetch({url:`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}/${encodeURIComponent(s)}`,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1}))}async function f(e,t){try{return(await(0,i.n)((0,a.getBackendSrv)().fetch({url:e,showErrorAlert:!1,showSuccessAlert:!1}))).data}catch(e){var s,n;if(404===(null==e?void 0:e.status)){var r,o,l,c;if(null!=e&&null!==(r=e.data)&&void 0!==r&&null!==(o=r.message)&&void 0!==o&&o.includes("group does not exist")||null!=e&&null!==(l=e.data)&&void 0!==l&&null!==(c=l.message)&&void 0!==c&&c.includes("no rule groups found"))return t;throw new Error("404 from rules config endpoint. Perhaps ruler API is not enabled?")}if(500===(null==e?void 0:e.status)&&null!=e&&null!==(s=e.data)&&void 0!==s&&null!==(n=s.message)&&void 0!==n&&n.includes("unexpected content type from upstream. expected YAML, got text/html"))throw Object.assign({},e,{data:Object.assign({},null==e?void 0:e.data,{message:u.jZ})});throw e}}var b=s("./public/app/features/alerting/unified/types/rule-form.ts"),v=s("./public/app/features/alerting/unified/utils/misc.ts"),x=s("./public/app/features/alerting/unified/utils/redux.ts"),y=s("./public/app/features/alerting/unified/utils/rule-form.ts"),w=s("./public/app/features/alerting/unified/utils/rules.ts"),j=s("./public/app/features/alerting/unified/utils/alertmanager.ts"),k=s("./public/app/features/alerting/unified/utils/rule-id.ts"),S=s("./node_modules/lodash/lodash.js"),C=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/messageFromError.ts");const T=(0,n.hg)("unifiedalerting/fetchPromRules",(e=>(0,x.$b)(async function(e){const t=await(0,i.n)((0,a.getBackendSrv)().fetch({url:`/api/prometheus/${(0,o.aK)(e)}/api/v1/rules`,showErrorAlert:!1,showSuccessAlert:!1})).catch((e=>{if("status"in e&&404===e.status)throw new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?");throw e})),s={};return t.data.data.groups.forEach((t=>{t.rules.forEach((e=>{e.query=e.query||""})),s[t.file]?s[t.file].groups.push(t):s[t.file]={dataSourceName:e,name:t.file,groups:[t]}})),Object.values(s)}(e)))),N=(0,n.hg)("unifiedalerting/fetchAmConfig",(e=>(0,x.$b)((async()=>(0,o.RY)(e)?c(e).then((e=>({alertmanager_config:e.config,template_files:{}}))):(0,v.fm)((()=>l(e)),(e=>{var t;return!(null===(t=(0,C.Z)(e))||void 0===t||!t.includes("alertmanager storage object not found"))}),3e4).then((t=>(0,S.isEmpty)(t.alertmanager_config)&&(0,S.isEmpty)(t.template_files)&&e!==o.GC?c(e).then((e=>({alertmanager_config:e.config,template_files:{}}))):t)))()))),O=(0,n.hg)("unifiedalerting/fetchRulerRules",(e=>(0,x.$b)(h(e)))),I=(0,n.hg)("unifiedalerting/fetchSilences",(e=>(0,x.$b)(async function(e){return(await(0,i.n)((0,a.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}(e))));function P(e=!1){return(t,s)=>{const{promRules:a,rulerRules:n}=s().unifiedAlerting;(0,o.mA)().map((s=>{var i,r;!e&&null!==(i=a[s])&&void 0!==i&&i.loading||t(T(s)),!e&&null!==(r=n[s])&&void 0!==r&&r.loading||t(O(s))}))}}function M(e=!1){return(t,s)=>{const{promRules:a}=s().unifiedAlerting;(0,o.mA)().map((s=>{var n;!e&&null!==(n=a[s])&&void 0!==n&&n.loading||t(T(s))}))}}async function F(e){if((0,w.Kl)(e)){const t=await h(o.GC);for(const[s,a]of Object.entries(t))for(const t of a){const a=t.rules.find((t=>{var s;return(0,w.Pc)(t)&&(null===(s=t.grafana_alert)||void 0===s?void 0:s.uid)===e.uid}));if(a)return{group:t,ruleSourceName:o.GC,namespace:s,rule:a}}}if((0,w.E4)(e)){const{ruleSourceName:t,namespace:s,groupName:a}=e,n=await g(t,s,a);if(!n)return null;const i=n.rules.find((a=>{const i=k.Zk(t,s,n.name,a);return k.Dg(i,e)}));return i?{group:n,ruleSourceName:t,namespace:s,rule:i}:null}if((0,w.qE)(e))throw new Error("Native prometheus rules can not be edited in grafana.");return null}const A=(0,n.hg)("unifiedalerting/fetchEditableRule",(e=>(0,x.$b)(F(e))));async function D(e){const{ruleSourceName:t,namespace:s,group:a,rule:n}=e;(0,o.HY)(t)?await m(o.GC,s,a.name):1!==a.rules.length?await p(t,s,Object.assign({},a,{rules:a.rules.filter((e=>e!==n))})):await m(t,s,a.name)}function $(e,t={}){return async s=>{(0,x.Ez)((async()=>{const n=await F(e);if(!n)throw new Error("Rule not found.");await D(n),s(O(n.ruleSourceName)),s(T(n.ruleSourceName)),t.navigateTo&&a.locationService.replace(t.navigateTo)})(),{successMessage:"Rule deleted."})}}async function L(e,t){const{folder:s,evaluateEvery:a}=e,n=(0,y.mI)(e);if(s){var i,r;if(t){const e=await F(k.CK(t));if(!e)throw new Error("Rule not found.");if(e.namespace===s.title){const t=e.rule.grafana_alert.uid;return n.grafana_alert.uid=t,await p(o.GC,e.namespace,{name:e.group.name,interval:a,rules:[n]}),{uid:t}}await D(e)}const l=await async function(e,t){return(await f(`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}`,{}))[t]||[]}(o.GC,s.title);let c=e.name,d=1;for(;l.find((e=>e.name===c));)c=`${e.name}-${++d}`;const u={name:c,interval:a,rules:[n]};await p(o.GC,s.title,u);const h=await g(o.GC,s.title,c),m=null==h||null===(i=h.rules[0])||void 0===i||null===(r=i.grafana_alert)||void 0===r?void 0:r.uid;if(m)return{uid:m};throw new Error("Failed to fetch created rule.")}throw new Error("Folder must be specified")}const E=(0,n.hg)("unifiedalerting/saveRuleForm",(({values:e,existing:t,redirectOnSave:s})=>(0,x.Ez)((0,x.$b)((async()=>{const{type:n}=e;let i;if(n===b.$.cloudAlerting||n===b.$.cloudRecording)i=await async function(e,t){const{dataSourceName:s,group:a,namespace:n}=e,i=(0,y.yh)(e);if(s&&a&&n){if(t){const e=await F(k.CK(t));if(!e)throw new Error("Rule not found.");if(e.namespace===n&&e.group.name===a){const t=Object.assign({},e.group,{rules:e.group.rules.map((t=>t===e.rule?i:t))});return await p(s,n,t),k.Zk(s,n,a,i)}await D(e)}const e=await g(s,n,a),r=e?Object.assign({},e,{rules:[...e.rules,i]}):{name:a,rules:[i]};return await p(s,n,r),k.Zk(s,n,a,i)}throw new Error("Data source and location must be specified")}(e,t);else{if(n!==b.$.grafana)throw new Error("Unexpected rule form type");i=await L(e,t)}if(s)a.locationService.push(s);else{const e=`/alerting/${encodeURIComponent(k.$V(i))}/edit`;a.locationService.getLocation().pathname!==e&&a.locationService.replace(e)}})()),{successMessage:t?`Rule "${e.name}" updated.`:`Rule "${e.name}" saved.`,errorMessage:"Failed to save rule"}))),R=(0,n.hg)("unifiedalerting/fetchGrafanaNotifiers",(()=>(0,x.$b)((0,a.getBackendSrv)().get("/api/alert-notifiers")))),_=(0,n.hg)("unifiedalerting/updateAMConfig",(({alertManagerSourceName:e,oldConfig:t,newConfig:s,successMessage:n,redirectPath:r,refetch:c},d)=>(0,x.Ez)((0,x.$b)((async()=>{const n=await l(e);if(!((0,S.isEmpty)(n.alertmanager_config)&&(0,S.isEmpty)(n.template_files)||JSON.stringify(n)===JSON.stringify(t)))throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await async function(e,t){await(0,i.n)((0,a.getBackendSrv)().fetch({method:"POST",url:`/api/alertmanager/${(0,o.aK)(e)}/config/api/v1/alerts`,data:t,showErrorAlert:!1,showSuccessAlert:!1}))}(e,(0,j.X4)(s)),c&&await d.dispatch(N(e)),r&&a.locationService.push((0,v.eQ)(r,e))})()),{successMessage:n}))),V=(0,n.hg)("unifiedalerting/fetchAmAlerts",(e=>(0,x.$b)(async function(e,t,s=!0,n=!0,l=!0){const c=r.urlUtil.toUrlParams({silenced:s,active:n,inhibited:l})+(null==t?void 0:t.map((e=>`filter=${encodeURIComponent(`${d(e.name)}=${e.isRegex?"~":""}"${d(e.value)}"`)}`)).join("&"))||"";return(await(0,i.n)((0,a.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/alerts`+(c?"?"+c:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}(e,[],!0,!0,!0)))),B=(e,t)=>async s=>{await(0,x.Ez)(async function(e,t){await(0,a.getBackendSrv)().delete(`/api/alertmanager/${(0,o.aK)(e)}/api/v2/silence/${encodeURIComponent(t)}`)}(e,t),{successMessage:"Silence expired."}),s(I(e)),s(V(e))},z=(0,n.hg)("unifiedalerting/updateSilence",(({alertManagerSourceName:e,payload:t,exitOnSave:s,successMessage:n})=>(0,x.Ez)((0,x.$b)((async()=>{await async function(e,t){return(await(0,i.n)((0,a.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/silences`,data:t,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}(e,t),s&&a.locationService.push("/alerting/silences")})()),{successMessage:n}))),U=(e,t)=>(s,a)=>{var n,i,r;const o=null===(n=a().unifiedAlerting.amConfigs)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.result;if(!o)throw new Error(`Config for ${t} not found`);if(null===(r=o.alertmanager_config.receivers)||void 0===r||!r.find((t=>t.name===e)))throw new Error(`Cannot delete receiver ${e}: not found in config.`);const l=Object.assign({},o,{alertmanager_config:Object.assign({},o.alertmanager_config,{receivers:o.alertmanager_config.receivers.filter((t=>t.name!==e))})});return s(_({newConfig:l,oldConfig:o,alertManagerSourceName:t,successMessage:"Contact point deleted.",refetch:!0}))},q=(e,t)=>(s,a)=>{var n,i,r,o;const l=null===(n=a().unifiedAlerting.amConfigs)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.result;if(!l)throw new Error(`Config for ${t} not found`);if("string"!=typeof(null===(r=l.template_files)||void 0===r?void 0:r[e]))throw new Error(`Cannot delete template ${e}: not found in config.`);const c=Object.assign({},l.template_files);delete c[e];const d=Object.assign({},l,{alertmanager_config:Object.assign({},l.alertmanager_config,{templates:null===(o=l.alertmanager_config.templates)||void 0===o?void 0:o.filter((t=>t!==e))}),template_files:c});return s(_({newConfig:d,oldConfig:l,alertManagerSourceName:t,successMessage:"Template deleted.",refetch:!0}))},H=(0,n.hg)("unifiedalerting/fetchFolder",(e=>(0,x.$b)((0,a.getBackendSrv)().getFolderByUid(e)))),G=e=>(t,s)=>{var a;null!==(a=s().unifiedAlerting.folders[e])&&void 0!==a&&a.dispatched||t(H(e))},W=(0,n.hg)("unifiedalerting/fetchAlertGroups",(e=>(0,x.$b)(async function(e){return(await(0,i.n)((0,a.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}(e)))),Z=(0,n.hg)("unifiedalerting/checkIfLotexRuleEditingSupported",(async e=>(0,x.Ez)((async()=>{try{return await g(e,"test","test"),!0}catch(e){var t,s,a;if((0,x.kW)(e)&&(null!==(t=e.data.message)&&void 0!==t&&t.includes("GetRuleGroup unsupported in rule local store")||null!==(s=e.data.message)&&void 0!==s&&s.includes("page not found"))||null!==(a=e.message)&&void 0!==a&&a.includes("404 from rules config endpoint"))return!1;throw e}})(),{errorMessage:`Failed to determine if "${e}" allows editing rules`}))),Q=(0,n.hg)("unifiedalerting/deleteAlertManagerConfig",(async(e,t)=>(0,x.Ez)((0,x.$b)((async()=>{await async function(e){await(0,i.n)((0,a.getBackendSrv)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,o.aK)(e)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}(e),await t.dispatch(N(e))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."}))),K=(0,n.hg)("unifiedalerting/testReceivers",(({alertManagerSourceName:e,receivers:t})=>(0,x.Ez)((0,x.$b)(async function(e,t){const s={receivers:t},n=await(0,i.n)((0,a.getBackendSrv)().fetch({method:"POST",data:s,url:`/api/alertmanager/${(0,o.aK)(e)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(207===n.status)throw new Error(n.data.receivers.flatMap((e=>e.grafana_managed_receiver_configs.filter((e=>"failed"===e.status)).map((e=>{var t;return null!==(t=e.error)&&void 0!==t?t:"Unknown error."})))).join("; "))}(e,t)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."}))),Y=(0,n.hg)("unifiedalerting/updateLotexNamespaceAndGroup",(async(e,t)=>(0,x.Ez)((0,x.$b)((async()=>{const{rulesSourceName:s,namespaceName:n,groupName:r,newNamespaceName:l,newGroupName:c,groupInterval:d}=e;if(e.rulesSourceName===o.GC)throw new Error("this action does not support Grafana rules");const u=await h(s);if(!u[n])throw new Error(`Namespace "${n}" not found.`);const g=u[n].find((e=>e.name===r));if(!g)throw new Error(`Group "${r}" not found.`);if(c!==r&&u[n].find((e=>e.name===c)))throw new Error(`Group "${c}" already exists.`);if(l!==n&&u[l])throw new Error(`Namespace "${l}" already exists.`);if(l===n&&r===c&&d===g.interval)throw new Error("Nothing changed.");if(l!==n){for(const e of u[n])await p(s,l,e.name===r?Object.assign({},e,{name:c,interval:d}):e);await async function(e,t){await(0,i.n)((0,a.getBackendSrv)().fetch({method:"DELETE",url:`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}`,showErrorAlert:!1,showSuccessAlert:!1}))}(s,n)}else await p(s,n,Object.assign({},g,{name:c,interval:d})),c!==r&&await m(s,n,r);await t.dispatch(O(s))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})))},"./public/app/features/alerting/unified/styles/notifications.ts":(e,t,s)=>{"use strict";s.d(t,{r:()=>i});var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./public/app/plugins/datasource/alertmanager/types.ts");const i=e=>({[n.Z9.Active]:a.css`
    color: ${e.colors.error.text};
  `,[n.Z9.Suppressed]:a.css`
    color: ${e.colors.primary.text};
  `,[n.Z9.Unprocessed]:a.css`
    color: ${e.colors.secondary.text};
  `})},"./public/app/features/alerting/unified/types/rule-form.ts":(e,t,s)=>{"use strict";let a;s.d(t,{$:()=>a}),function(e){e.grafana="grafana",e.cloudAlerting="cloud-alerting",e.cloudRecording="cloud-recording"}(a||(a={}))},"./public/app/features/alerting/unified/utils/alertmanager.ts":(e,t,s)=>{"use strict";s.d(t,{X4:()=>n,nv:()=>r,zy:()=>o,cm:()=>l,_J:()=>c,tA:()=>d,tC:()=>p,Zh:()=>h,eD:()=>g});var a=s("./public/app/plugins/datasource/alertmanager/types.ts");function n(e){return e.alertmanager_config.receivers||(e.alertmanager_config.receivers=[{name:"default "}]),e.alertmanager_config.route||(e.alertmanager_config.route={receiver:e.alertmanager_config.receivers[0].name}),e.template_files||(e.template_files={}),e}function i(e,t){var s,a;return null!==(s=t.receiver===e||(null===(a=t.routes)||void 0===a?void 0:a.some((t=>i(e,t)))))&&void 0!==s&&s}function r(e,t){var s;return null!==(s=t.alertmanager_config.route&&i(e,t.alertmanager_config.route))&&void 0!==s&&s}function o(e){return e.isEqual?e.isRegex?a._M.regex:a._M.equal:e.isRegex?a._M.notRegex:a._M.notEqual}function l(e){return{name:e.name,value:e.value,operator:o(e)}}function c(e){return Object.assign({name:e.name,value:e.value},function(e){switch(e){case a._M.equal:return{isEqual:!0,isRegex:!1};case a._M.notEqual:return{isEqual:!1,isRegex:!1};case a._M.regex:return{isEqual:!0,isRegex:!0};case a._M.notRegex:return{isEqual:!1,isRegex:!0}}}(e.operator))}const d=[{label:a._M.equal,description:"Equals",value:a._M.equal},{label:a._M.notEqual,description:"Does not equal",value:a._M.notEqual},{label:a._M.regex,description:"Matches regex",value:a._M.regex},{label:a._M.notRegex,description:"Does not match regex",value:a._M.notRegex}],u=[a._M.regex,a._M.notRegex,a._M.notEqual,a._M.equal];function p(e){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${t}`);const s=u.map((e=>[e,t.indexOf(e)])).filter((([e,t])=>t>-1)).sort(((e,t)=>e[1]-t[1]));if(!s.length)throw new Error(`Invalid matcher: ${t}`);const[n,i]=s[0],r=t.substr(0,i).trim(),o=function(e){let t=e.trim().replace(/\\"/g,'"');return t.startsWith('"')&&t.endsWith('"')&&!t.endsWith('\\"')&&(t=t.substr(1,t.length-2)),t.replace(/\\"/g,'"')}(t.substr(i+n.length).trim());if(!r)throw new Error(`Invalid matcher: ${t}`);return{name:r,value:o,isRegex:n===a._M.regex||n===a._M.notRegex,isEqual:n===a._M.equal||n===a._M.regex}}function h(e){const t=[];return e.replace(/\b(\w+)(=~|!=|!~|=(?="?\w))"?([^"\n,]*)"?/g,((e,s,n,i)=>{const r=n===a._M.equal||n===a._M.regex,o=n===a._M.regex||n===a._M.notRegex;return t.push({name:s,value:i,isEqual:r,isRegex:o}),""})),t}function g(e,t){return t.every((({name:t,value:s,isRegex:a,isEqual:n})=>Object.entries(e).some((([e,i])=>{const r=t===e;let o;return n&&!a&&(o=s===i),n||a||(o=s!==i),n&&a&&(o=new RegExp(s).test(i)),!n&&a&&(o=!new RegExp(s).test(i)),r&&o}))))}},"./public/app/features/alerting/unified/utils/config.ts":(e,t,s)=>{"use strict";s.d(t,{x:()=>n});var a=s("./packages/grafana-runtime/src/index.ts");function n(){return Object.values(a.config.datasources)}},"./public/app/features/alerting/unified/utils/constants.ts":(e,t,s)=>{"use strict";s.d(t,{jZ:()=>a,p4:()=>n,c4:()=>i,de:()=>r,cm:()=>o,iF:()=>l,GC:()=>c,Fe:()=>d,Kd:()=>u,q6:()=>p,vY:()=>h});const a="ruler not supported",n=2e4,i="alertmanager",r="alerting-alertmanager",o=2e4,l=2e4,c="timeseries",d="table",u="stat";let p;!function(e){e.description="description",e.summary="summary",e.runbookURL="runbook_url",e.alertId="__alertId__",e.dashboardUID="__dashboardUid__",e.panelID="__panelId__"}(p||(p={}));const h={[p.description]:"Description",[p.summary]:"Summary",[p.runbookURL]:"Runbook URL",[p.dashboardUID]:"Dashboard UID",[p.panelID]:"Panel ID",[p.alertId]:"Alert ID"}},"./public/app/features/alerting/unified/utils/datasource.ts":(e,t,s)=>{"use strict";s.d(t,{GC:()=>i,ye:()=>r,Eu:()=>l,aM:()=>c,mA:()=>d,h_:()=>u,EG:()=>p,jq:()=>h,RY:()=>g,HY:()=>m,o_:()=>b,aK:()=>v});var a=s("./public/app/plugins/datasource/alertmanager/types.ts"),n=s("./public/app/features/alerting/unified/utils/config.ts");const i="grafana";let r;!function(e){e.Alertmanager="alertmanager",e.Loki="loki",e.Prometheus="prometheus"}(r||(r={}));const o=[r.Loki,r.Prometheus];function l(){return(0,n.x)().filter((e=>o.includes(e.type)&&!1!==e.jsonData.manageAlerts)).sort(((e,t)=>e.name.localeCompare(t.name)))}function c(){return(0,n.x)().filter((e=>e.type===r.Alertmanager)).sort(((e,t)=>e.name.localeCompare(t.name)))}function d(){return[...l().map((e=>e.name)),i]}function u(){return[...l(),i]}function p(e){return h(e)?e.name:e}function h(e){return e!==i}function g(e){var t,s;return e!==i&&(null===(t=f(e))||void 0===t||null===(s=t.jsonData)||void 0===s?void 0:s.implementation)===a.sK.prometheus}function m(e){return e===i}function f(e){return(0,n.x)().find((t=>t.name===e))}function b(e){return e===i?i:f(e)}function v(e){if(e===i)return i;const t=f(e);if(!t)throw new Error(`Datasource "${e}" not found`);return String(t.id)}},"./public/app/features/alerting/unified/utils/matchers.ts":(e,t,s)=>{"use strict";s.d(t,{R:()=>n,r:()=>i});var a=s("./public/app/features/alerting/unified/utils/alertmanager.ts");function n(e){return e.split(",").filter((e=>!!e.trim())).map((e=>(0,a.tC)(e.trim())))}const i=e=>`matchers=${encodeURIComponent(Object.entries(e).filter((([e])=>!(e.startsWith("__")&&e.endsWith("__")))).map((([e,t])=>`${e}=${t}`)).join(","))}`},"./public/app/features/alerting/unified/utils/misc.ts":(e,t,s)=>{"use strict";s.d(t,{V2:()=>l,mH:()=>c,S0:()=>d,lC:()=>u,pF:()=>p,J8:()=>h,eQ:()=>g,fm:()=>m});var a=s("./packages/grafana-data/src/index.ts"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./public/app/features/alerting/unified/utils/constants.ts"),r=s("./public/app/features/alerting/unified/utils/datasource.ts"),o=s("./public/app/features/alerting/unified/utils/rule-id.ts");function l(e,t,s){const i=(0,r.EG)(e),l=o.Yd(i,t),c=encodeURIComponent(o.$V(l)),d=encodeURIComponent(i);return a.urlUtil.renderUrl(`${n.config.appSubUrl}/alerting/${d}/${c}/view`,{returnTo:s})}function c(e,t){return a.urlUtil.renderUrl(`${n.config.appSubUrl}/explore`,{left:JSON.stringify(["now-1h","now",e,{datasource:e,expr:t},{ui:[!0,!0,!0,"none"]}])})}function d(e){return e.reduce(((e,{key:t,value:s})=>(e[t]=s,e)),{})}const u=e=>({queryString:void 0===e.queryString?void 0:String(e.queryString),alertState:void 0===e.alertState?void 0:String(e.alertState),dataSource:void 0===e.dataSource?void 0:String(e.dataSource),groupBy:void 0===e.groupBy?void 0:String(e.groupBy).split(","),silenceState:void 0===e.silenceState?void 0:String(e.silenceState)}),p=e=>({queryString:void 0===e.queryString?void 0:String(e.queryString),silenceState:void 0===e.silenceState?void 0:String(e.silenceState)});function h(e){return Object.entries(e).map((([e,t])=>({key:e,value:t})))}function g(e,t){return`${e}${t?`?${i.c4}=${encodeURIComponent(t)}`:""}`}function m(e,t,s,a=1e3){const n=(new Date).getTime(),i=()=>e().catch((e=>{if(t(e)&&(new Date).getTime()-n<s)return new Promise((e=>setTimeout(e,a))).then(i);throw e}));return i()}},"./public/app/features/alerting/unified/utils/redux.ts":(e,t,s)=>{"use strict";s.d(t,{oq:()=>o,i6:()=>c,jK:()=>d,$b:()=>u,Ez:()=>p,kW:()=>h,kk:()=>g});var a=s("./node_modules/angular/index.js"),n=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),i=s("./packages/grafana-data/src/index.ts"),r=s("./public/app/core/core.ts");const o=Object.freeze({loading:!1,dispatched:!1});function l(e,t=o,s){if(e.pending.match(s))return{result:t.result,loading:!0,error:t.error,dispatched:!0,requestId:s.meta.requestId};if(e.fulfilled.match(s)){if(void 0===t.requestId||t.requestId===s.meta.requestId)return Object.assign({},t,{result:s.payload,loading:!1,error:void 0})}else if(e.rejected.match(s)&&t.requestId===s.meta.requestId)return Object.assign({},t,{loading:!1,error:s.error});return t}function c(e,t){return(0,n.oM)({name:e,initialState:o,reducers:{},extraReducers:e=>e.addDefaultCase(((e,s)=>l(t,e,s)))})}function d(e,t,s){return(0,n.oM)({name:e,initialState:{},reducers:{},extraReducers:e=>e.addDefaultCase(((e,a)=>{if((0,n.Gx)(t)(a)){const n=a,i=s(n.meta.arg);return Object.assign({},e,{[i]:l(t,e[i],n)})}return e}))})}function u(e){return e.catch((e=>{throw{message:g(e),code:e.statusCode}}))}function p(e,t){return e.then((e=>(t.successMessage&&r.h$.emit(i.AppEvents.alertSuccess,[t.successMessage]),e))).catch((e=>{var s;const a=g(e);throw r.h$.emit(i.AppEvents.alertError,[`${null!==(s=t.errorMessage)&&void 0!==s?s:"Error"}: ${a}`]),e}))}function h(e){return"object"==typeof e&&null!==e&&"status"in e&&"data"in e}function g(e){if(h(e)){var t,s;if(null!==(t=e.data)&&void 0!==t&&t.message){var n,i;let t=null===(n=e.data)||void 0===n?void 0:n.message;return"string"==typeof(null===(i=e.data)||void 0===i?void 0:i.error)&&(t+=`; ${e.data.error}`),t}if((0,a.isArray)(e.data)&&e.data.length&&null!==(s=e.data[0])&&void 0!==s&&s.message)return e.data.map((e=>null==e?void 0:e.message)).filter((e=>!!e)).join(" ");if(e.statusText)return e.statusText}return(null==e?void 0:e.message)||String(e)}},"./public/app/features/alerting/unified/utils/rule-form.ts":(e,t,s)=>{"use strict";s.d(t,{uZ:()=>b,yh:()=>v,mI:()=>y,DQ:()=>w,s0:()=>j,aR:()=>S});var a=s("./packages/grafana-data/src/index.ts"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./public/app/core/services/context_srv.ts"),r=s("./public/app/core/utils/query.ts"),o=s("./public/app/features/expressions/ExpressionDatasource.ts"),l=s("./public/app/features/expressions/types.ts"),c=s("./public/app/types/unified-alerting-dto.ts"),d=s("./public/app/features/alerting/state/alertDef.ts"),u=s("./public/app/features/alerting/unified/types/rule-form.ts"),p=s("./public/app/features/alerting/unified/utils/constants.ts"),h=s("./public/app/features/alerting/unified/utils/datasource.ts"),g=s("./public/app/features/alerting/unified/utils/misc.ts"),m=s("./public/app/features/alerting/unified/utils/rules.ts"),f=s("./public/app/features/alerting/unified/utils/time.ts");const b=()=>Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:p.q6.summary,value:""},{key:p.q6.description,value:""},{key:p.q6.runbookURL,value:""}],dataSourceName:null,type:i.Vt.isEditor?void 0:u.$.grafana,folder:null,queries:[],condition:"",noDataState:c.g0.NoData,execErrState:c.g0.Alerting,evaluateEvery:"1m",evaluateFor:"5m",group:"",namespace:"",expression:"",forTime:1,forTimeUnit:"m"});function v(e){const{name:t,expression:s,forTime:a,forTimeUnit:n,type:i}=e;if(i===u.$.cloudAlerting)return{alert:t,for:`${a}${n}`,annotations:(0,g.S0)(e.annotations||[]),labels:(0,g.S0)(e.labels||[]),expr:s};if(i===u.$.cloudRecording)return{record:t,labels:(0,g.S0)(e.labels||[]),expr:s};throw new Error(`unexpected rule type: ${i}`)}function x(e){return[...(0,g.J8)(e||{}),{key:"",value:""}]}function y(e){const{name:t,condition:s,noDataState:a,execErrState:n,evaluateFor:i,queries:r}=e;if(s)return{grafana_alert:{title:t,condition:s,no_data_state:a,exec_err_state:n,data:r},for:i,annotations:(0,g.S0)(e.annotations||[]),labels:(0,g.S0)(e.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function w(e){const{ruleSourceName:t,namespace:s,group:a,rule:n}=e,i=b();if((0,h.HY)(t)){if((0,m.Pc)(n)){const e=n.grafana_alert;return Object.assign({},i,{name:e.title,type:u.$.grafana,evaluateFor:n.for||"0",evaluateEvery:a.interval||i.evaluateEvery,noDataState:e.no_data_state,execErrState:e.exec_err_state,queries:e.data,condition:e.condition,annotations:x(n.annotations),labels:x(n.labels),folder:{title:s,id:e.namespace_id}})}throw new Error("Unexpected type of rule for grafana rules source")}if((0,m.cG)(n)){const[e,r]=n.for?(0,f.bG)(n.for):[i.forTime,i.forTimeUnit];return Object.assign({},i,{name:n.alert,type:u.$.cloudAlerting,dataSourceName:t,namespace:s,group:a.name,expression:n.expr,forTime:e,forTimeUnit:r,annotations:x(n.annotations),labels:x(n.labels)})}if((0,m.yF)(n))return Object.assign({},i,{name:n.record,type:u.$.cloudRecording,dataSourceName:t,namespace:s,group:a.name,expression:n.expr,labels:x(n.labels)});throw new Error("Unexpected type of rule for cloud rules source")}const j=()=>{const e=(0,n.getDataSourceSrv)().getInstanceSettings("default");if(!e)return[k("A")];const t=(0,a.getDefaultRelativeTimeRange)();return[{refId:"A",datasourceUid:e.uid,queryType:"",relativeTimeRange:t,model:{refId:"A",hide:!1}},k("B")]},k=e=>{const t={refId:e,hide:!1,type:l.Us.classic,datasource:o.DB,conditions:[{type:"query",evaluator:{params:[3],type:d.$.IsAbove},operator:{type:"and"},query:{params:["A"]},reducer:{params:[],type:"last"}}]};return{refId:e,datasourceUid:o.Yq,queryType:"",model:t}},S=async(e,t)=>{var s,i,l;const{targets:c}=e;if(!e.editSourceId||!t.uid)return;const d=a.rangeUtil.timeRangeToRelative(a.rangeUtil.convertRawToRange(t.time)),h=await(async(e,t,s,i,r,l)=>{const c=[];for(const u of e){const e=u.datasource||i,p=await(0,n.getDataSourceSrv)().get(e),h=a.rangeUtil.relativeToTimeRange(t),{interval:g,intervalMs:m}=C(h,null!=l?l:p.interval,r),f=Object.assign({__interval:{text:g,value:g},__interval_ms:{text:m,value:m}},s),b=p.interpolateVariablesInQueries?await p.interpolateVariablesInQueries([u],f)[0]:u;if(e)if(e===o.DB){const e={refId:b.refId,queryType:"",relativeTimeRange:t,datasourceUid:o.Yq,model:b};c.push(e)}else{const s=(0,n.getDataSourceSrv)().getInstanceSettings(e);if(s&&s.meta.alerting){var d;const e={refId:b.refId,queryType:null!==(d=b.queryType)&&void 0!==d?d:"",relativeTimeRange:t,datasourceUid:s.uid,model:Object.assign({},b,{maxDataPoints:r,intervalMs:m})};c.push(e)}}}return c})(c,d,e.scopedVars||{},null!==(s=e.datasource)&&void 0!==s?s:void 0,null!==(i=e.maxDataPoints)&&void 0!==i?i:void 0,null!==(l=e.interval)&&void 0!==l?l:void 0);if(!h.length||!h.find((e=>e.datasourceUid!==o.Yq)))return;h.find((e=>e.datasourceUid===o.Yq))||h.push(k((0,r.Hs)(h.map((e=>e.model)))));const{folderId:g,folderTitle:m}=t.meta;return{type:u.$.grafana,folder:g&&m?{id:g,title:m}:void 0,queries:h,name:e.title,condition:h[h.length-1].refId,annotations:[{key:p.q6.dashboardUID,value:t.uid},{key:p.q6.panelID,value:String(e.editSourceId)}]}};function C(e,t,s){return s?a.rangeUtil.calculateInterval(e,s,t):t&&a.rangeUtil.intervalToMs(t)>1e3?{interval:t,intervalMs:a.rangeUtil.intervalToMs(t)}:{interval:"1s",intervalMs:1e3}}},"./public/app/features/alerting/unified/utils/rule-id.ts":(e,t,s)=>{"use strict";s.d(t,{Zk:()=>i,Yd:()=>r,CK:()=>o,Dg:()=>l,OA:()=>h,$V:()=>g,s0:()=>x});var a=s("./public/app/features/alerting/unified/utils/datasource.ts"),n=s("./public/app/features/alerting/unified/utils/rules.ts");function i(e,t,s,a){return(0,n.Pc)(a)?{uid:a.grafana_alert.uid}:{ruleSourceName:e,namespace:t,groupName:s,rulerRuleHash:f(a)}}function r(e,t){const s=t.namespace.name,a=t.group.name;if(t.rulerRule)return i(e,s,a,t.rulerRule);if(t.promRule)return function(e,t,s,a){return{ruleSourceName:e,namespace:t,groupName:s,ruleHash:b(a)}}(e,s,a,t.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function o(e){return i(e.ruleSourceName,e.namespace,e.group.name,e.rule)}function l(e,t){return(0,n.Kl)(e)&&(0,n.Kl)(t)?e.uid===t.uid:(0,n.E4)(e)&&(0,n.E4)(t)?e.groupName===t.groupName&&e.namespace===t.namespace&&e.rulerRuleHash===t.rulerRuleHash&&e.ruleSourceName===t.ruleSourceName:!(!(0,n.qE)(e)||!(0,n.qE)(t))&&(e.groupName===t.groupName&&e.namespace===t.namespace&&e.ruleHash===t.ruleHash&&e.ruleSourceName===t.ruleSourceName)}const c="cri",d="pri";function u(e){return e.replace(/\$/g,"_DOLLAR_")}function p(e){return e.replace(/\_DOLLAR\_/g,"$")}function h(e,t=!1){if(e)try{return function(e,t=!1){const s=(t?decodeURIComponent(e):e).split("$");if(1===s.length)return{uid:e};if(5===s.length){const[e,t,a,n,i]=s.map(p);if(e===c)return{ruleSourceName:t,namespace:a,groupName:n,rulerRuleHash:Number(i)};if(e===d)return{ruleSourceName:t,namespace:a,groupName:n,ruleHash:Number(i)}}throw new Error(`Failed to parse rule location: ${e}`)}(e,t)}catch(e){return}}function g(e){return(0,n.Kl)(e)?e.uid:(0,n.E4)(e)?[c,e.ruleSourceName,e.namespace,e.groupName,e.rulerRuleHash].map(String).map(u).join("$"):[d,e.ruleSourceName,e.namespace,e.groupName,e.ruleHash].map(String).map(u).join("$")}function m(e){let t=0;if(0===e.length)return t;for(var s=0;s<e.length;s++){t=(t<<5)-t+e.charCodeAt(s),t&=t}return t}function f(e){if((0,n.yF)(e))return m(JSON.stringify([e.record,e.expr,v(e.labels)]));if((0,n.cG)(e))return m(JSON.stringify([e.alert,e.expr,v(e.annotations),v(e.labels)]));throw new Error("only recording and alerting ruler rules can be hashed")}function b(e){if((0,n.OP)(e))return m(JSON.stringify([e.type,e.query,v(e.labels)]));if((0,n.x_)(e))return m(JSON.stringify([e.type,e.query,v(e.annotations),v(e.labels)]));throw new Error("only recording and alerting rules can be hashed")}function v(e){return JSON.stringify(Object.entries(e||{}).sort(((e,t)=>e[0].localeCompare(t[0]))))}function x(e){return(0,n.Kl)(e)?a.GC:e.ruleSourceName}},"./public/app/features/alerting/unified/utils/rules.ts":(e,t,s)=>{"use strict";s.d(t,{x_:()=>r,OP:()=>o,cG:()=>l,yF:()=>c,Pc:()=>d,pB:()=>u,m$:()=>p,Kl:()=>h,E4:()=>g,qE:()=>m,SS:()=>f,ZL:()=>b,Aq:()=>v,ub:()=>x});var a=s("./public/app/types/unified-alerting-dto.ts"),n=s("./public/app/features/alerting/unified/utils/constants.ts"),i=s("./node_modules/lodash/lodash.js");function r(e){return"object"==typeof e&&e.type===a.pz.Alerting}function o(e){return e.type===a.pz.Recording}function l(e){return"object"==typeof e&&"alert"in e}function c(e){return"object"==typeof e&&"record"in e}function d(e){return"object"==typeof e&&"grafana_alert"in e}function u(e){return JSON.stringify(e.labels)}function p(e){var t;return e.error&&(null===(t=e.error)||void 0===t?void 0:t.message)===n.jZ}function h(e){return"uid"in e}function g(e){return"rulerRuleHash"in e}function m(e){return"ruleHash"in e}function f(e){return e===a.x_.Inactive?"Normal":(0,i.capitalize)(e)}const b=e=>e.reduce(((e,{dataSourceName:t,name:s,groups:a})=>(a.forEach((({name:a,rules:n})=>{n.forEach((n=>{r(n)&&e.push({dataSourceName:t,namespaceName:s,groupName:a,rule:n})}))})),e)),[]),v={[a.x_.Inactive]:"good",[a.x_.Firing]:"bad",[a.x_.Pending]:"warning",[a.bj.Alerting]:"bad",[a.bj.Error]:"bad",[a.bj.NoData]:"info",[a.bj.Normal]:"good",[a.bj.Pending]:"warning"};function x(e){return e.alerts?e.alerts.reduce(((e,t)=>{if(t.activeAt&&t.state!==a.bj.Normal){const s=new Date(t.activeAt);if(null===e||e.getTime()>s.getTime())return s}return e}),null):null}},"./public/app/features/alerting/unified/utils/time.ts":(e,t,s)=>{"use strict";s.d(t,{lR:()=>o,bG:()=>n,O8:()=>r,qr:()=>i});s("./packages/grafana-data/src/datetime/rangeutil.ts");let a;function n(e){const t=e.match(/(\d+)(\w+)/);if(t)return[Number(t[1]),t[2]];throw new Error(`Invalid interval description: ${e}`)}!function(e){e.seconds="s",e.minutes="m",e.hours="h",e.days="d",e.weeks="w"}(a||(a={}));const i=Object.entries(a).map((([e,t])=>({label:e[0].toUpperCase()+e.slice(1),value:t}))),r={value:new RegExp(`^\\d+(${Object.values(a).join("|")})$`),message:`Must be of format "(number)(unit)" , for example "1m". Available units: ${Object.values(a).join(", ")}`},o={value:new RegExp(`^\\d+(${Object.values(a).join("|")})|0$`),message:`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(a).join(", ")}`}},"./public/app/features/annotations/all.ts":(e,t,s)=>{"use strict";s.d(t,{Qz:()=>m});s("./public/app/features/annotations/annotations_srv.ts");var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/core/core.ts"),i=s("./packages/grafana-data/src/index.ts"),r=s("./public/app/features/annotations/api.ts"),o=s("./public/app/features/query/state/DashboardQueryRunner/DashboardQueryRunner.ts");function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class c{constructor(){l(this,"panelCtrl",void 0),l(this,"event",void 0),l(this,"timeRange",void 0),l(this,"form",void 0),l(this,"close",void 0),l(this,"timeFormated",void 0)}$onInit(){var e;this.event.panelId=null!==(e=this.panelCtrl.panel.editSourceId)&&void 0!==e?e:this.panelCtrl.panel.id,this.event.dashboardId=this.panelCtrl.dashboard.id,this.event.time=d(this.event.time),this.event.isRegion&&(this.event.timeEnd=d(this.event.timeEnd)),this.timeFormated=this.panelCtrl.dashboard.formatDate(this.event.time)}async save(){if(!this.form.$valid)return;const e=(0,a.cloneDeep)(this.event);if(e.time=e.time.valueOf(),e.timeEnd=0,e.isRegion&&(e.timeEnd=this.event.timeEnd.valueOf(),e.timeEnd<e.time))return void console.log("invalid time");let t=r.xD;e.id&&(t=r._E);try{await t(e)}catch(e){console.log(e)}finally{this.close(),(0,o.kt)().run({dashboard:this.panelCtrl.dashboard,range:this.panelCtrl.range})}}async delete(){try{await(0,r.Dl)(this.event)}catch(e){console.log(e)}finally{this.close(),(0,o.kt)().run({dashboard:this.panelCtrl.dashboard,range:this.panelCtrl.range})}}}function d(e){if(e&&(0,a.isNumber)(e)){const t=Number(e);return(0,i.dateTime)(t)}return e}c.$inject=[],n.hF.directive("eventEditor",(function(){return{restrict:"E",controller:c,bindToController:!0,controllerAs:"ctrl",templateUrl:"public/app/features/annotations/partials/event_editor.html",scope:{panelCtrl:"=",event:"=",close:"&"}}}));var u=s("./node_modules/tinycolor2/tinycolor.js"),p=s.n(u),h=s("./packages/grafana-ui/src/index.ts");function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class m{constructor(e){g(this,"event",null),g(this,"editorOpen",!1),this.panelCtrl=e}editorClosed(){this.event=null,this.editorOpen=!1,this.panelCtrl.render()}editorOpened(){this.editorOpen=!0}updateTime(e){this.event||(this.event={},this.event.dashboardId=this.panelCtrl.dashboard.id,this.event.panelId=this.panelCtrl.panel.id),this.event.time=e.from,this.event.isRegion=!1,e.to&&(this.event.timeEnd=e.to,this.event.isRegion=!0),this.panelCtrl.render()}editEvent(e,t){this.event=e,this.panelCtrl.render()}addFlotEvents(e,t){if(!this.event&&0===e.length)return;const s={$__alerting:{color:h.ALERTING_COLOR,position:"BOTTOM",markerSize:5},$__ok:{color:h.OK_COLOR,position:"BOTTOM",markerSize:5},$__no_data:{color:h.NO_DATA_COLOR,position:"BOTTOM",markerSize:5},$__pending:{color:h.PENDING_COLOR,position:"BOTTOM",markerSize:5},$__editing:{color:h.DEFAULT_ANNOTATION_COLOR,position:"BOTTOM",markerSize:5}};if(this.event)e=this.event.isRegion?[{isRegion:!0,min:this.event.time,timeEnd:this.event.timeEnd,text:this.event.text,eventType:"$__editing",editModel:this.event}]:[{min:this.event.time,text:this.event.text,editModel:this.event,eventType:"$__editing"}];else for(let t=0;t<e.length;t++){const a=e[t];a.min=a.time,a.max=a.time,a.eventType=a.type,a.newState?a.eventType="$__"+a.newState:s[a.type]||(s[a.type]={color:a.color,position:"BOTTOM",markerSize:5})}var n;!function(e,t){const s=t.grid.markings,n=h.DEFAULT_ANNOTATION_COLOR;let i;(0,a.each)(e,(e=>{i=e.source&&e.color||n,i=function(e,t){const s=p()(e);return s.isValid()?(s.setAlpha(t),s.toRgbString()):e}(i,h.REGION_FILL_ALPHA),s.push({xaxis:{from:e.min,to:e.timeEnd},color:i})}))}((n=e,(0,a.filter)(n,"isRegion")),t);t.grid.eventSectionHeight=7,t.xaxis.eventSectionHeight=20,t.events={levels:(0,a.keys)(s).length+1,data:e,types:s,manager:this}}}var f=s("./node_modules/jquery/dist/jquery-exposed.js"),b=s.n(f),v=s("./public/app/core/core_module.ts"),x=s("./public/app/features/alerting/state/alertDef.ts");function y(e,t,s,n){function i(t){try{return e(t)}catch(e){return console.log("Could not sanitize annotation string, html escaping instead"),(0,a.escape)(t)}}return{restrict:"E",scope:{event:"=",onEdit:"&"},link:(e,s)=>{const r=e.event;let o=r.title,l=r.text;const c=t.getCurrent();let d='<div class="graph-annotation">',u="";if(void 0!==r.alertId){const e=x.Z.getStateDisplayModel(r.newState);u=e.stateClass,o=`<i class="${e.iconClass}"></i> ${e.text}`,l=x.Z.getAlertAnnotationInfo(r),r.text&&(l=l+"<br />"+r.text)}else o&&(l=o+"<br />"+((0,a.isString)(l)?l:""),o="");let p='<div class="graph-annotation__header">';r.login&&(p+=`<div class="graph-annotation__user" bs-tooltip="'Created by ${r.login}'"><img src="${r.avatarUrl}" /></div>`),p+=`\n          <span class="graph-annotation__title ${u}">${i(o)}</span>\n          <span class="graph-annotation__time">${null==c?void 0:c.formatDate(r.min)}</span>\n      `,r.id&&null!=c&&c.canAddAnnotations()&&(p+='\n          <span class="pointer graph-annotation__edit-icon" ng-click="onEdit()">\n            <i class="fa fa-pencil-square"></i>\n          </span>\n        '),p+="</div>",d+=p,d+='<div class="graph-annotation__body">',l&&(d+="<div ng-non-bindable>"+i(l.replace(/\n/g,"<br>"))+"</div>");const h=r.tags;h&&h.length&&(e.tags=h,d+='<span class="label label-tag small" ng-repeat="tag in tags" tag-color-from-name="tag">{{tag}}</span><br/>'),d+="</div>",d+="</div>";b()(d).appendTo(s),n(s.contents())(e)}}}y.$inject=["$sanitize","dashboardSrv","contextSrv","$compile"],v.ZP.directive("annotationTooltip",y)},"./public/app/features/annotations/annotations_srv.ts":(e,t,s)=>{"use strict";s.d(t,{r:()=>w});var a=s("./node_modules/lodash/lodash.js"),n=s("./node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),i=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),r=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),o=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),l=s("./packages/grafana-data/src/index.ts"),c=s("./packages/grafana-runtime/src/index.ts"),d=s("./public/app/core/core_module.ts"),u=s("./public/app/features/annotations/events_processing.ts"),p=s("./public/app/core/core.ts"),h=s("./public/app/features/dashboard/services/TimeSrv.ts"),g=s("./public/app/features/annotations/standardAnnotationSupport.ts"),m=s("./public/app/features/query/state/runRequest.ts"),f=s("./public/app/types/events.ts"),b=s("./public/app/features/annotations/api.ts");function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let x=100;class y{constructor(){v(this,"globalAnnotationsPromise",void 0),v(this,"alertStatesPromise",void 0),v(this,"datasourcePromises",void 0)}init(e){this.clearPromiseCaches(),e.events.subscribe(f.U5,this.clearPromiseCaches.bind(this))}clearPromiseCaches(){this.globalAnnotationsPromise=null,this.alertStatesPromise=null,this.datasourcePromises=null}getAnnotations(e){return Promise.all([this.getGlobalAnnotations(e),this.getAlertStates(e)]).then((t=>{let s=(0,a.flattenDeep)(t[0]),n=e.panel.getSavedId();s=s.filter((e=>!e.panelId||"dashboard"!==e.source.type||e.panelId===n)),s=(0,u.o)(s);return{annotations:s,alertState:t[1].find((e=>e.panelId===n))}})).catch((e=>(e.cancelled||(!e.message&&e.data&&e.data.message&&(e.message=e.data.message),console.error("AnnotationSrv.query error",e),p.h$.emit(l.AppEvents.alertError,["Annotation Query Failed",e.message||e])),[])))}getAlertStates(e){return e.dashboard.id?e.panel&&!e.panel.alert||"now"!==e.range.raw.to?Promise.resolve([]):(this.alertStatesPromise||(this.alertStatesPromise=(0,c.getBackendSrv)().get("/api/alerts/states-for-dashboard",{dashboardId:e.dashboard.id},`get-alert-states-${e.dashboard.id}`)),this.alertStatesPromise):Promise.resolve([])}getGlobalAnnotations(e){const t=e.dashboard;if(this.globalAnnotationsPromise)return this.globalAnnotationsPromise;const s=(0,h.$t)().timeRange(),i=[],r=[];for(const o of t.annotations.list){if(!o.enable)continue;if(o.snapshotData)return this.translateQueryResult(o,o.snapshotData);const l=(0,c.getDataSourceSrv)().get(o.datasource);r.push(l),i.push(l.then((a=>a.annotationQuery&&!a.annotations?a.annotationQuery({range:s,rangeRaw:s.raw,annotation:o,dashboard:t}):(0,n.n)(w(e,a,o)).then((e=>{var t;return null!==(t=e.events)&&void 0!==t?t:[]})))).then((e=>(t.snapshot&&(o.snapshotData=(0,a.cloneDeep)(e)),this.translateQueryResult(o,e)))))}return this.datasourcePromises=Promise.all(r),this.globalAnnotationsPromise=Promise.all(i),this.globalAnnotationsPromise}saveAnnotationEvent(e){return this.globalAnnotationsPromise=null,(0,b.xD)(e)}updateAnnotationEvent(e){return this.globalAnnotationsPromise=null,(0,b._E)(e)}deleteAnnotationEvent(e){return this.globalAnnotationsPromise=null,(0,b.Dl)(e)}translateQueryResult(e,t){e.snapshotData&&delete(e=(0,a.cloneDeep)(e)).snapshotData;for(const s of t)s.source=e,s.color=e.iconColor,s.type=e.name,s.isRegion=s.timeEnd&&s.time!==s.timeEnd;return t}}function w(e,t,s){const a=Object.assign({},g.yA,t.annotations),n=a.prepareAnnotation(s);if(!n)return(0,i.of)({});const c=a.prepareQuery(n);if(!c)return(0,i.of)({});const d=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,u=l.rangeUtil.calculateInterval(e.range,d,t.interval),p={__interval:{text:u.interval,value:u.interval},__interval_ms:{text:u.intervalMs.toString(),value:u.intervalMs},__annotation:{text:n.name,value:n}},h=Object.assign({startTime:Date.now(),requestId:"AQ"+x++,range:e.range,maxDataPoints:d,scopedVars:p},u,{app:l.CoreApp.Dashboard,timezone:e.dashboard.timezone,targets:[Object.assign({},c,{refId:"Anno"})]});return(0,m.v7)(t,h).pipe((0,r.z)((e=>e.series?a.processEvents(n,e.series).pipe((0,o.U)((t=>({panelData:e,events:t})))):(0,i.of)({panelData:e,events:[]}))))}y.$inject=[],d.ZP.service("annotationsSrv",y)},"./public/app/features/annotations/api.ts":(e,t,s)=>{"use strict";s.d(t,{xD:()=>n,_E:()=>i,Dl:()=>r,lK:()=>o});var a=s("./packages/grafana-runtime/src/index.ts");function n(e){return(0,a.getBackendSrv)().post("/api/annotations",e)}function i(e){return(0,a.getBackendSrv)().put(`/api/annotations/${e.id}`,e)}function r(e){return(0,a.getBackendSrv)().delete(`/api/annotations/${e.id}`)}async function o(){return(await(0,a.getBackendSrv)().get("/api/annotations/tags")).result.tags.map((({tag:e,count:t})=>({term:e,count:t})))}},"./public/app/features/annotations/events_processing.ts":(e,t,s)=>{"use strict";s.d(t,{o:()=>n});var a=s("./node_modules/lodash/lodash.js");function n(e){let t=[];const s=(0,a.partition)(e,"id"),n=(0,a.groupBy)(s[0],"id");return t=(0,a.map)(n,(e=>e.length>1&&!(0,a.every)(e,i)?(0,a.find)(e,(e=>"panel-alert"!==e.eventType)):(0,a.head)(e))),t=(0,a.concat)(t,s[1]),t}function i(e){return"panel-alert"===e.eventType}},"./public/app/features/annotations/standardAnnotationSupport.ts":(e,t,s)=>{"use strict";s.d(t,{yA:()=>c,r0:()=>d});var a=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),n=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),i=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),r=s("./packages/grafana-data/src/index.ts"),o=s("./node_modules/lodash/lodash.js");const l=["query"];const c={prepareAnnotation:e=>{if((0,o.isString)(null==e?void 0:e.query)){const{query:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,l);return Object.assign({},s,{target:{query:t},mappings:{}})}return e},prepareQuery:e=>e.target,processEvents:(e,t)=>function(e,t){return(0,a.of)(e).pipe((e=>e.pipe((0,n.z)((e=>null!=e&&e.length?1===e.length?(0,a.of)(e[0]):(0,a.of)(e).pipe(r.standardTransformers.mergeTransformer.operator({}),(0,i.U)((e=>e[0]))):(0,a.of)(void 0))))),(0,i.U)((e=>{if(null==e||!e.length)return[];let s=!1,a=!1;const n={};for(const t of e.fields){n[(0,r.getFieldDisplayName)(t,e).toLowerCase()]=t}t||(t={});const i=[];for(const o of u){const l=t[o.key]||{};if(l.source===r.AnnotationEventFieldSource.Skip)continue;const c={key:o.key,split:o.split};if(l.source===r.AnnotationEventFieldSource.Text)c.text=l.value;else{const t=(l.value||o.key).toLowerCase();c.field=n[t],!c.field&&o.field&&(c.field=o.field(e))}(c.field||c.text)&&(i.push(c),"time"===c.key?s=!0:"text"===c.key&&(a=!0))}if(!s||!a)return[];const o=[];for(let t=0;t<e.length;t++){const e={type:"default",color:"red"};for(const s of i){let a;if(s.text)a=s.text;else if(s.field&&(a=s.field.values.get(t),void 0!==a&&s.regex)){const e=s.regex.exec(a);e&&(a=e[1]?e[1]:e[0])}null!=a&&(s.split&&"string"==typeof a&&(a=a.split(",")),e[s.key]=a)}o.push(e)}return o})))}(t,e.mappings)};const d=[{key:"time",field:e=>e.fields.find((e=>e.type===r.FieldType.time)),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:e=>e.fields.find((e=>e.type===r.FieldType.string)),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],u=[...d,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"}]},"./public/app/features/api-keys/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{ql:()=>n,iK:()=>i,ZP:()=>r});const a=(0,s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"apiKeys",initialState:{keys:[],searchQuery:"",hasFetched:!1},reducers:{apiKeysLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,keys:t.payload}),setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload})}}),{setSearchQuery:n,apiKeysLoaded:i}=a.actions,r={apiKeys:a.reducer}},"./public/app/features/dashboard/components/DashExportModal/index.ts":(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/core/config.ts"),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./public/app/features/variables/types.ts"),o=s("./public/app/features/variables/guard.ts");class l{makeExportable(e){e.cleanUpRepeats();const t=e.getSaveModelClone();t.id=null,e.processRepeats();const s=[],l={},c={},d=[],u={};for(const e of t.getVariables())u[e.name]=e;const p=e=>{let t=e.datasource,s=null;t&&0===t.indexOf("$")&&(s=u[t.substring(1)],s&&s.current&&(t=s.current.value)),d.push((0,i.getDataSourceSrv)().get(t).then((t=>{var a,n,i,r;if(null!==(a=t.meta)&&void 0!==a&&a.builtIn)return;if(l["datasource"+(null===(n=t.meta)||void 0===n?void 0:n.id)]={type:"datasource",id:t.meta.id,name:t.meta.name,version:t.meta.info.version||"1.0.0"},s)return;const o="DS_"+t.name.replace(" ","_").toUpperCase();c[o]={name:o,label:t.name,description:"",type:"datasource",pluginId:null===(i=t.meta)||void 0===i?void 0:i.id,pluginName:null===(r=t.meta)||void 0===r?void 0:r.name},e.datasource="${"+o+"}"})))},h=e=>{if(void 0!==e.datasource&&null!==e.datasource&&p(e),e.targets)for(const t of e.targets)void 0!==t.datasource&&p(t);const t=n.ZP.panels[e.type];t&&(l["panel"+t.id]={type:"panel",id:t.id,name:t.name,version:t.info.version})};for(const e of t.panels)if(h(e),void 0!==e.collapsed&&!0===e.collapsed&&e.panels)for(const t of e.panels)h(t);for(const e of t.getVariables())(0,o.Xh)(e)&&(p(e),e.options=[],e.current={},e.refresh=e.refresh!==r.Bd.never?e.refresh:r.Bd.onDashboardLoad);for(const e of t.annotations.list)p(e);return l.grafana={type:"grafana",id:"grafana",name:"Grafana",version:n.ZP.buildInfo.version},Promise.all(d).then((()=>{(0,a.each)(c,(e=>{s.push(e)}));for(const e of t.getVariables())if((0,o.VC)(e)){const t="VAR_"+e.name.replace(" ","_").toUpperCase();s.push({name:t,type:"constant",label:e.label||e.name,value:e.query,description:""}),e.query="${"+t+"}",e.current={value:e.query,text:e.query,selected:!1},e.options=[e.current]}const e={};return e.__inputs=s,e.__requires=(0,a.sortBy)(l,["id"]),(0,a.defaults)(e,t),e})).catch((e=>(console.error("Export failed:",e),{error:e})))}}},"./public/app/features/dashboard/components/DashNav/DashNavTimeControls.tsx":(e,t,s)=>{"use strict";s.d(t,{C:()=>p});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./public/app/core/components/TimePicker/TimePickerWithHistory.tsx"),o=s("./public/app/features/dashboard/services/TimeSrv.ts"),l=s("./public/app/core/core.ts"),c=s("./public/app/types/events.ts"),d=s("./node_modules/react/jsx-runtime.js");function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class p extends a.Component{constructor(...e){super(...e),u(this,"sub",void 0),u(this,"onChangeRefreshInterval",(e=>{(0,o.$t)().setAutoRefresh(e),this.forceUpdate()})),u(this,"onRefresh",(()=>((0,o.$t)().refreshDashboard(),Promise.resolve()))),u(this,"onMoveBack",(()=>{l.h$.publish(new c.Qt(c.uV.Left))})),u(this,"onMoveForward",(()=>{l.h$.publish(new c.Qt(c.uV.Right))})),u(this,"onChangeTimePicker",(e=>{const{dashboard:t}=this.props,s=t.timepicker,a=s.nowDelay&&"now"===e.raw.to,i=n.dateMath.isMathString(e.raw.from)?e.raw.from:e.from,r=n.dateMath.isMathString(e.raw.to)?e.raw.to:e.to,l={from:i,to:a?"now-"+s.nowDelay:r};(0,o.$t)().setTime(l)})),u(this,"onChangeTimeZone",(e=>{this.props.dashboard.timezone=e,this.props.onChangeTimeZone(e),this.onRefresh()})),u(this,"onChangeFiscalYearStartMonth",(e=>{this.props.dashboard.fiscalYearStartMonth=e,this.onRefresh()})),u(this,"onZoom",(()=>{l.h$.publish(new c.p8(2))}))}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(c.md,(()=>this.forceUpdate()))}componentWillUnmount(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe()}render(){var e;const{dashboard:t}=this.props,{refresh_intervals:s}=t.timepicker,a=(0,o.$t)().getValidIntervals(s||i.defaultIntervals),n=(0,o.$t)().timeRange(),l=t.getTimezone(),c=t.fiscalYearStartMonth,u=null===(e=t.panelInEdit)||void 0===e?void 0:e.isEditing;return(0,d.jsxs)(i.ToolbarButtonRow,{children:[(0,d.jsx)(r.a,{value:n,onChange:this.onChangeTimePicker,timeZone:l,fiscalYearStartMonth:c,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth}),(0,d.jsx)(i.RefreshPicker,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:t.refresh,intervals:a,tooltip:"Refresh dashboard",noIntervalPicker:u})]})}}},"./public/app/features/dashboard/components/DashNav/index.ts":(e,t,s)=>{"use strict";s.d(t,{t:()=>T});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./public/app/features/playlist/PlaylistSrv.ts"),r=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),o=s("./packages/grafana-ui/src/index.ts"),l=s("./node_modules/react/jsx-runtime.js");const c=({icon:e,iconType:t,iconSize:s,tooltip:a,onClick:n,children:i})=>{const r=(0,o.useTheme)(),c=d(r);return(0,l.jsxs)("div",{className:c.noBorderContainer,children:[e&&(0,l.jsx)(o.IconButton,{name:e,size:s,iconType:t,tooltip:a,tooltipPlacement:"bottom",onClick:n}),i]})},d=(0,o.stylesFactory)((e=>({noBorderContainer:r.css`
    padding: 0 ${e.spacing.xs};
    display: flex;
  `})));var u=s("./public/app/features/dashboard/components/DashNav/DashNavTimeControls.tsx"),p=s("./packages/grafana-data/src/index.ts"),h=s("./public/app/features/profile/state/reducers.ts"),g=s("./public/app/types/index.ts"),m=s("./public/app/features/dashboard/components/ShareModal/index.ts"),f=s("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardModalProxy.tsx"),b=s("./packages/grafana-runtime/src/index.ts"),v=s("./public/app/core/navigation/kiosk.ts"),x=s("./public/app/features/dashboard/services/DashboardSrv.ts");function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w={updateTimeZoneForSession:h.YT},j=(0,n.connect)(null,w),k=[],S=[];class C extends a.PureComponent{constructor(e){super(e),y(this,"onClose",(()=>{b.locationService.partial({viewPanel:null})})),y(this,"onToggleTVMode",(()=>{(0,v.qk)()})),y(this,"onOpenSettings",(()=>{b.locationService.partial({editview:"settings"})})),y(this,"onStarDashboard",(()=>{const{dashboard:e}=this.props;(0,x.h4)().starDashboard(e.id,e.meta.isStarred).then((t=>{e.meta.isStarred=t,this.forceUpdate()}))})),y(this,"onPlaylistPrev",(()=>{i.r0.prev()})),y(this,"onPlaylistNext",(()=>{i.r0.next()})),y(this,"onPlaylistStop",(()=>{i.r0.stop(),this.forceUpdate()}))}addCustomContent(e,t){e.map(((e,s)=>{const n=e.component,i=(0,a.createElement)(n,Object.assign({},this.props,{key:`button-custom-${s}`}));"number"==typeof e.index?t.splice(e.index,0,i):t.push(i)}))}isPlaylistRunning(){return i.r0.isPlaying}renderLeftActionsButton(){const{dashboard:e,kioskMode:t}=this.props,{canStar:s,canShare:a,isStarred:n}=e.meta,i=[];if(t!==g.UX.Off||this.isPlaylistRunning())return[];if(s){let e=n?"Unmark as favorite":"Mark as favorite";i.push((0,l.jsx)(c,{tooltip:e,icon:n?"favorite":"star",iconType:n?"mono":"default",iconSize:"lg",onClick:this.onStarDashboard},"button-star"))}if(a){let t="Share dashboard or panel";i.push((0,l.jsx)(o.ModalsController,{children:({showModal:s,hideModal:a})=>(0,l.jsx)(c,{tooltip:t,icon:"share-alt",iconSize:"lg",onClick:()=>{s(m.V8,{dashboard:e,onDismiss:a})}})},"button-share"))}return this.addCustomContent(k,i),i}renderPlaylistControls(){return(0,l.jsxs)(o.ButtonGroup,{children:[(0,l.jsx)(o.ToolbarButton,{tooltip:"Go to previous dashboard",icon:"backward",onClick:this.onPlaylistPrev,narrow:!0}),(0,l.jsx)(o.ToolbarButton,{onClick:this.onPlaylistStop,children:"Stop playlist"}),(0,l.jsx)(o.ToolbarButton,{tooltip:"Go to next dashboard",icon:"forward",onClick:this.onPlaylistNext,narrow:!0})]},"playlist-buttons")}renderTimeControls(){const{dashboard:e,updateTimeZoneForSession:t,hideTimePicker:s}=this.props;return s?null:(0,l.jsx)(u.C,{dashboard:e,onChangeTimeZone:t},"time-controls")}renderRightActionsButton(){const{dashboard:e,onAddPanel:t,isFullscreen:s,kioskMode:a}=this.props,{canEdit:n,showSettings:i}=e.meta,{snapshot:r}=e,c=r&&r.originalUrl,d=[],u=(0,l.jsx)(o.ToolbarButton,{tooltip:"Cycle view mode",icon:"monitor",onClick:this.onToggleTVMode},"tv-button");return this.isPlaylistRunning()?[this.renderPlaylistControls(),this.renderTimeControls()]:a===g.UX.TV?[this.renderTimeControls(),u]:(n&&!s&&(d.push((0,l.jsx)(o.ToolbarButton,{tooltip:"Add panel",icon:"panel-add",onClick:t},"button-panel-add")),d.push((0,l.jsx)(o.ModalsController,{children:({showModal:t,hideModal:s})=>(0,l.jsx)(o.ToolbarButton,{tooltip:"Save dashboard",icon:"save",onClick:()=>{t(f.D,{dashboard:e,onDismiss:s})}})},"button-save"))),c&&d.push((0,l.jsx)(o.ToolbarButton,{tooltip:"Open original dashboard",onClick:()=>this.gotoSnapshotOrigin(c),icon:"link"},"button-snapshot")),i&&d.push((0,l.jsx)(o.ToolbarButton,{tooltip:"Dashboard settings",icon:"cog",onClick:this.onOpenSettings},"button-settings")),this.addCustomContent(S,d),d.push(this.renderTimeControls()),d.push(u),d)}gotoSnapshotOrigin(e){window.location.href=p.textUtil.sanitizeUrl(e)}render(){const{isFullscreen:e,title:t,folderTitle:s}=this.props,a=e?this.onClose:void 0,n=p.locationUtil.updateSearchParams(window.location.href,"?search=open"),i=p.locationUtil.updateSearchParams(window.location.href,"?search=open&folder=current");return(0,l.jsx)(o.PageToolbar,{pageIcon:e?void 0:"apps",title:t,parent:s,titleHref:n,parentHref:i,onGoBack:a,leftItems:this.renderLeftActionsButton(),children:this.renderRightActionsButton()})}}const T=j(C)},"./public/app/features/dashboard/components/DashboardSettings/TimePickerSettings.tsx":(e,t,s)=>{"use strict";s.d(t,{P:()=>g});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./packages/grafana-data/src/index.ts"),r=s("./node_modules/lodash/lodash.js"),o=s("./packages/grafana-e2e-selectors/src/index.ts"),l=s("./public/app/features/dashboard/services/TimeSrv.ts"),c=s("./node_modules/react/jsx-runtime.js");const d=({refreshIntervals:e,onRefreshIntervalChange:t,getIntervalsFunc:s=p,validateIntervalsFunc:i=u})=>{const[r,o]=(0,a.useState)(s(null!=e?e:n.defaultIntervals)),[l,d]=(0,a.useState)(null);(0,a.useEffect)((()=>{const t=s(null!=e?e:n.defaultIntervals);o(t)}),[s,e]);const h=(0,a.useMemo)((()=>Array.isArray(r)?r.join(","):""),[r]),g=(0,a.useCallback)((e=>{const t=e.currentTarget.value?e.currentTarget.value.split(","):[];o(t)}),[o]),m=(0,a.useCallback)((e=>{const a=i(r);null===a&&t(s(r)),d(a)}),[s,r,t,i]);return(0,c.jsx)(n.Field,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:l,invalid:!!l,children:(0,c.jsx)(n.Input,{invalid:!!l,value:h,onChange:g,onBlur:m})})},u=(e,t={getTimeSrv:l.$t})=>{try{return p(e,t),null}catch(e){return e.message}},p=(e,t={getTimeSrv:l.$t})=>{const s=e.filter((e=>""!==e.trim())).map((e=>e.replace(/\s+/g,"")));return[...new Set(t.getTimeSrv().getValidIntervals(s))]};function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class g extends a.PureComponent{constructor(...e){super(...e),h(this,"state",{isNowDelayValid:!0}),h(this,"onNowDelayChange",(e=>{const t=e.currentTarget.value;return(0,r.isEmpty)(t)||i.rangeUtil.isValidTimeSpan(t)?(this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(t)):void this.setState({isNowDelayValid:!1})})),h(this,"onHideTimePickerChange",(()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)})),h(this,"onLiveNowChange",(()=>{this.props.onLiveNowChange(!this.props.liveNow)})),h(this,"onTimeZoneChange",(e=>{"string"==typeof e&&this.props.onTimeZoneChange(e)}))}render(){return(0,c.jsxs)(n.CollapsableSection,{label:"Time options",isOpen:!0,children:[(0,c.jsx)(n.Field,{label:"Timezone","aria-label":o.wl.components.TimeZonePicker.container,children:(0,c.jsx)(n.TimeZonePicker,{includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})}),(0,c.jsx)(d,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),(0,c.jsx)(n.Field,{label:"Now delay now",description:"Enter 1m to ignore the last minute. It might contain incomplete metrics.",children:(0,c.jsx)(n.Input,{invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})}),(0,c.jsx)(n.Field,{label:"Hide time picker",children:(0,c.jsx)(n.Switch,{value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})}),(0,c.jsx)(n.Field,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'",children:(0,c.jsx)(n.Switch,{value:!!this.props.liveNow,onChange:this.onLiveNowChange})})]})}}},"./public/app/features/dashboard/components/DashboardSettings/index.ts":(e,t,s)=>{"use strict";s.d(t,{D:()=>es});var a,n=s("./node_modules/react/index.js"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./packages/grafana-e2e-selectors/src/index.ts"),o=s("./packages/grafana-ui/src/index.ts"),l=s("./public/app/core/config.ts"),c=s("./public/app/core/services/context_srv.ts"),d=s("./public/app/features/live/dashboard/dashboardWatcher.ts"),u=s("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardButton.tsx"),p=s("./public/app/features/variables/state/types.ts"),h=s("./node_modules/lodash/lodash.js"),g=s("./packages/grafana-data/src/index.ts"),m=s("./public/app/features/variables/adapters.ts"),f=s("./public/app/core/core.ts"),b=s("./node_modules/react/jsx-runtime.js");const v=({variable:{options:e}})=>{const[t,s]=(0,n.useState)(20),[i,l]=(0,n.useState)([]),c=(0,n.useCallback)((e=>{e.preventDefault(),s(t+20)}),[t,s]),d=(0,o.useStyles)(x);return(0,n.useEffect)((()=>l(e.slice(0,t))),[t,e]),i.length?(0,b.jsxs)(o.VerticalGroup,{spacing:"none",children:[a||(a=(0,b.jsx)("h5",{children:"Preview of values"})),(0,b.jsx)(o.InlineFieldRow,{children:i.map(((e,t)=>(0,b.jsx)(o.InlineFieldRow,{className:d.optionContainer,children:(0,b.jsx)(o.InlineLabel,{"aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption,children:(0,b.jsx)("div",{className:d.label,children:e.text})})},`${e.value}-${t}`)))}),e.length>t&&(0,b.jsx)(o.InlineFieldRow,{className:d.optionContainer,children:(0,b.jsx)(o.Button,{onClick:c,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link",children:"Show more"})})]}):null};function x(e){return{optionContainer:i.css`
      margin-left: ${e.spacing.xs};
      margin-bottom: ${e.spacing.xs};
    `,label:i.css`
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 50vw;
    `}}v.displayName="VariableValuesPreview";var y=s("./public/app/features/variables/state/selectors.ts"),w=s("./public/app/features/variables/editor/reducer.ts"),j=s("./public/app/features/variables/state/sharedReducer.ts"),k=s("./public/app/features/variables/state/actions.ts"),S=s("./public/app/features/variables/inspect/reducer.ts"),C=s("./public/app/features/variables/guard.ts"),T=s("./public/app/core/utils/explore.ts"),N=s("./public/app/features/variables/utils.ts");const O=(e,t)=>e.filter((e=>t.some((t=>t.from===e.id||t.to===e.id))));function I(e){const t=(0,N.a9)(e);if(!t)return null;return t.slice(1).find((e=>void 0!==e))}const P={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_\w+|\d+$/],query:[/^timeFilter$/]},M=(e,t,s)=>{const a=Object.keys(t.value).reduce(((s,a)=>{const n=t.value[a];if(!n||"string"!=typeof n)return s;const i=P[a]?P[a].find((t=>t.test(e))):void 0,r=(0,N.QI)(n,e);return!i&&r&&(s=Object.assign({},s,{[a]:n})),s}),{}),n=Object.keys(t.value).reduce(((s,a)=>{const n=t.value[a];if(n&&"object"==typeof n&&Object.keys(n).length){const t=n.title||n.name||n.id||a,i=M(e,{key:a,value:n},{});Object.keys(i).length&&(s=Object.assign({},s,{[t]:i}))}return s}),{});return(Object.keys(a).length||Object.keys(n).length)&&(s=Object.assign({},s,a,n)),s},F=(e,t)=>{if(!t)return{unUsed:[],unknown:[],usages:[]};const s=[];let a=[],n=[];const i=t.getSaveModelClone(),r=((e,t)=>{N.J7.lastIndex=0;const s=[],a=(0,T.Xh)(t,2).match(N.J7);if(!a)return s;for(const t of a){if(!t)continue;if(-1!==t.indexOf("$__"))continue;if(-1!==t.indexOf("${__"))continue;if(-1!==t.indexOf("$hashKey"))continue;const a=I(t);e.some((e=>e.id===a))||s.find((e=>e===a))||a&&s.push(a)}return s})(e,i);for(const e of r){const t=M(e,{key:"model",value:i},{});if(Object.keys(t).length){const s={id:e,name:e};n.push({variable:s,tree:t})}}for(const t of e){const e=t.id,n=M(e,{key:"model",value:i},{});Object.keys(n).length||(0,C.Kn)(t)||s.push(t),Object.keys(n).length&&a.push({variable:t,tree:n})}return{unUsed:s,unknown:n,usages:a}},A=(e,t)=>{const{id:s,value:a}=t,{nodes:n,edges:i}=e;if(a&&"string"==typeof a){const r=`${t.id}-${a}`;return n.push({id:r,label:a}),i.push({from:r,to:s}),e}if(a&&"object"==typeof a){const r=Object.keys(a);for(const o of r){const r=`${t.id}-${o}`;n.push({id:r,label:o}),i.push({from:r,to:s}),e=A(e,{id:r,value:a[o]})}return e}return e},D=e=>{const t=[];for(const s of e){const{variable:e,tree:a}=s,n={variable:e,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};t.push(A(n,{id:"dashboard",value:a}))}return t},$=e=>Object.values(e).reduce(((e,t)=>"object"==typeof t?e+$(t):e+1),0),L=(e,t)=>(s,a)=>{const n=(0,y.E0)(e.id,a());if(n.name===t)return void s((0,w.Yo)((0,p.Y6)(e,{newName:t})));const i=Object.assign({},(0,h.cloneDeep)(n),{name:t,id:t}),r=n.global,o=n.index,l=(0,p.GT)(i);s((0,j.VN)((0,p.Y6)(l,{global:r,index:o,model:i}))),s((0,w.Yo)((0,p.Y6)(l,{newName:t}))),s(E(l)),s((0,j.mZ)((0,p.Y6)(e,{reIndex:!1})))},E=e=>t=>{t((0,w.lc)({id:e.id}))},R=()=>(e,t)=>{e((0,w.Yu)());const s=t(),a=(0,y.xD)(s),n=s.dashboard.getModel(),{unknown:i,usages:r}=F(a,n),o=D(i),l=Object.keys(i).length>0,c=D(r);e((0,S.j4)({unknown:i,usages:r,usagesNetwork:c,unknownsNetwork:o,unknownExits:l}))};var _=s("./public/app/core/utils/connectWithReduxStore.tsx"),V=s("./public/app/features/variables/editor/VariableTextField.tsx"),B=s("./public/app/features/variables/editor/VariableSectionHeader.tsx"),z=s("./public/app/features/variables/editor/VariableSelectField.tsx");function U({onChange:e,type:t}){const s=(0,n.useMemo)((()=>(0,N.bi)()),[]),a=(0,n.useMemo)((()=>{var e;return null!==(e=s.find((e=>e.value===t)))&&void 0!==e?e:s[0]}),[s,t]);return(0,b.jsx)(z.u,{name:"Type",value:a,options:s,onChange:e,tooltip:m.z.get(t).description,ariaLabel:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelect})}var q=s("./public/app/features/variables/types.ts");const H=[{label:"",value:q.bU.dontHide},{label:"Label",value:q.bU.hideLabel},{label:"Variable",value:q.bU.hideVariable}];function G({onChange:e,hide:t,type:s}){const a=(0,n.useMemo)((()=>{var e;return null!==(e=H.find((e=>e.value===t)))&&void 0!==e?e:H[0]}),[t]);return"constant"===s?null:(0,b.jsx)(z.u,{name:"Hide",value:a,options:H,onChange:e,ariaLabel:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalHideSelect})}var W;function Z(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Q extends n.PureComponent{constructor(...e){super(...e),Z(this,"onNameChange",(e=>{e.preventDefault(),this.props.changeVariableName(this.props.identifier,e.currentTarget.value)})),Z(this,"onTypeChange",(e=>{e.value&&this.props.changeVariableType((0,p.Y6)(this.props.identifier,{newType:e.value}))})),Z(this,"onLabelChange",(e=>{e.preventDefault(),this.props.changeVariableProp((0,p.Y6)(this.props.identifier,{propName:"label",propValue:e.currentTarget.value}))})),Z(this,"onDescriptionChange",(e=>{this.props.changeVariableProp((0,p.Y6)(this.props.identifier,{propName:"description",propValue:e.currentTarget.value}))})),Z(this,"onHideChange",(e=>{this.props.changeVariableProp((0,p.Y6)(this.props.identifier,{propName:"hide",propValue:e.value}))})),Z(this,"onPropChanged",(async({propName:e,propValue:t,updateOptions:s=!1})=>{this.props.changeVariableProp((0,p.Y6)(this.props.identifier,{propName:e,propValue:t})),s&&await this.props.updateOptions((0,p.GT)(this.props.variable))})),Z(this,"onHandleSubmit",(async e=>{e.preventDefault(),this.props.editor.isValid&&await this.props.onEditorUpdate(this.props.identifier)}))}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentDidUpdate(e,t,s){(0,h.isEqual)(e.editor.errors,this.props.editor.errors)||Object.values(this.props.editor.errors).forEach((e=>{f.h$.emit(g.AppEvents.alertWarning,["Validation",e])}))}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){var e,t;const{variable:s}=this.props,a=m.z.get(this.props.variable.type).editor;if(!a)return null;const n=s.state===g.LoadingState.Loading;return(0,b.jsx)("div",{children:(0,b.jsx)("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit,children:(0,b.jsxs)(o.VerticalGroup,{spacing:"lg",children:[(0,b.jsxs)(o.VerticalGroup,{spacing:"none",children:[W||(W=(0,b.jsx)(B.e,{name:"General"})),(0,b.jsxs)(o.InlineFieldRow,{children:[(0,b.jsx)(V.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"name",required:!0,ariaLabel:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInput}),(0,b.jsx)(U,{onChange:this.onTypeChange,type:this.props.variable.type})]}),this.props.editor.errors.name&&(0,b.jsx)("div",{className:"gf-form",children:(0,b.jsx)("span",{className:"gf-form-label gf-form-label--error",children:this.props.editor.errors.name})}),(0,b.jsxs)(o.InlineFieldRow,{children:[(0,b.jsx)(V.V,{value:null!==(e=this.props.variable.label)&&void 0!==e?e:"",onChange:this.onLabelChange,name:"Label",placeholder:"optional display name",ariaLabel:r.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInput}),(0,b.jsx)(G,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type})]}),(0,b.jsx)(V.V,{name:"Description",value:null!==(t=s.description)&&void 0!==t?t:"",placeholder:"descriptive text",onChange:this.onDescriptionChange,grow:!0})]}),a&&(0,b.jsx)(a,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,C.eL)(this.props.variable)?(0,b.jsx)(v,{variable:this.props.variable}):null,(0,b.jsx)(o.VerticalGroup,{spacing:"none",children:(0,b.jsxs)(o.Button,{type:"submit","aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:n,children:["Update",n?(0,b.jsx)(o.Icon,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}}):null]})})]})})})}}const K={variableEditorMount:e=>async t=>{t((0,w.wJ)({name:(0,y.E0)(e.id).name}))},variableEditorUnMount:e=>async(t,s)=>{t((0,w.qe)((0,p.Y6)(e)))},changeVariableName:(e,t)=>(s,a)=>{let n=null;t.match(/^(?!__).*$/)||(n="Template names cannot begin with '__', that's reserved for Grafana's global variables"),t.match(/^\w+$/)||(n="Only word and digit characters are allowed in variable names");(0,y.ng)(a()).filter((s=>s.name===t&&s.id!==e.id)).length&&(n="Variable with the same name already exists"),s(n?(0,w.y8)({newName:t,errorText:n}):L(e,t))},changeVariableProp:j.Pl,onEditorUpdate:e=>async t=>{await t((0,k.Rk)(e)),t(R())},changeVariableType:j.Be,updateOptions:k.Rk},Y=(0,_.R)(Q,((e,t)=>({editor:e.templating.editor,variable:(0,y.E0)(t.identifier.id,e,!1)})),K);var J=s("./node_modules/react-redux/es/index.js"),X=s("./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx");const ee=({nodes:e,edges:t,direction:a,width:i,height:r,onDoubleClick:o})=>{const l=(0,n.useRef)(null),c=(0,n.useRef)(null),d=(0,n.useCallback)((e=>{o&&o(e.nodes[0])}),[o]);return(0,n.useEffect)((()=>((async()=>{var n;const i=await s.e(8271).then(s.t.bind(s,"./node_modules/visjs-network/dist/vis.js",23)),r={nodes:te(i,e),edges:se(i,t)},o={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:null!=a?a:"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};l.current=new i.Network(c.current,r,o),null===(n=l.current)||void 0===n||n.on("doubleClick",d)})(),()=>{l.current&&l.current.off("doubleClick")})),[a,t,e,d]),(0,b.jsx)("div",{children:(0,b.jsx)("div",{ref:c,style:{width:null!=i?i:"100%",height:null!=r?r:"60vh"}})})};function te(e,t){const s=t.map((e=>Object.assign({},e,{shape:"box"})));return new e.DataSet(s)}function se(e,t){const s=t.map((e=>Object.assign({},e,{arrows:"to",dashes:!0})));return new e.DataSet(s)}function ae({edges:e,nodes:t,show:s,title:a,children:i}){const[r,l]=(0,n.useState)(s),c=(0,n.useCallback)((()=>l(!0)),[l]),d=(0,n.useCallback)((()=>l(!1)),[l]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Modal,{isOpen:r,title:a,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:d,onDismiss:d,children:(0,b.jsx)(ee,{nodes:t,edges:e})}),i({showModal:c})]})}const ne=({id:e,usages:t,isAdhoc:s})=>{const a=(0,n.useMemo)((()=>t.find((t=>t.variable.id===e))),[t,e]);if(0===t.length||s||!a)return null;const i=a.nodes.map((t=>t.label.includes(`$${e}`)?Object.assign({},t,{color:"#FB7E81"}):t));return(0,b.jsx)(ae,{show:!1,title:`Showing usages for: $${e}`,nodes:i,edges:a.edges,children:({showModal:e})=>(0,b.jsx)(o.IconButton,{onClick:()=>e(),name:"code-branch",title:"Show usages"})})};var ie,re;function oe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(e){e[e.down=1]="down",e[e.up=-1]="up"}(re||(re={}));class le extends n.PureComponent{constructor(...e){super(...e),oe(this,"onEditClick",((e,t)=>{e.preventDefault(),this.props.onEditClick(t)})),oe(this,"onChangeVariableOrder",((e,t,s)=>{e.preventDefault(),this.props.onChangeVariableOrder((0,p.GT)(t),t.index,t.index+s)})),oe(this,"onDuplicateVariable",((e,t)=>{e.preventDefault(),this.props.onDuplicateVariable(t)})),oe(this,"onRemoveVariable",((e,t)=>{e.preventDefault(),this.props.onRemoveVariable(t)}))}render(){return(0,b.jsx)("div",{children:(0,b.jsxs)("div",{children:[0===this.props.variables.length&&(0,b.jsx)("div",{children:(0,b.jsx)(X.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:' <p>\n                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server\n                    or sensor names in your metric queries you can use variables in their place. Variables are shown as\n                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data\n                    being displayed in your dashboard. Check out the\n                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">\n                      Templates and variables documentation\n                    </a>\n                    for more information.\n                  </p>'},infoBoxTitle:"What do variables do?",onClick:this.props.onAddClick})}),this.props.variables.length>0&&(0,b.jsx)("div",{children:(0,b.jsxs)("table",{className:"filter-table filter-table--hover","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.table,children:[ie||(ie=(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Variable"}),(0,b.jsx)("th",{children:"Definition"}),(0,b.jsx)("th",{colSpan:6})]})})),(0,b.jsx)("tbody",{children:this.props.variables.map(((e,t)=>{const s=e,a=s.definition?s.definition:"string"==typeof s.query?s.query:"",n=((e,t)=>{const s=t.find((t=>t.variable.id===e));return s?$(s.tree):0})(s.id,this.props.usages)>0||(0,C.Kn)(s);return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{style:{width:"1%"},children:(0,b.jsx)("span",{onClick:e=>this.onEditClick(e,(0,p.GT)(s)),className:"pointer template-variable","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(s.name),children:s.name})}),(0,b.jsx)("td",{style:{maxWidth:"200px"},onClick:e=>this.onEditClick(e,(0,p.GT)(s)),className:"pointer max-width","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(s.name),children:a}),(0,b.jsx)("td",{style:{width:"1%"},children:(0,b.jsx)(ce,{passed:n})}),(0,b.jsx)("td",{style:{width:"1%"},children:(0,b.jsx)(ne,{id:s.id,isAdhoc:(0,C.Kn)(s),usages:this.props.usagesNetwork})}),(0,b.jsx)("td",{style:{width:"1%"},children:t>0&&(0,b.jsx)(o.IconButton,{onClick:e=>this.onChangeVariableOrder(e,s,re.up),name:"arrow-up",title:"Move variable up","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowArrowUpButtons(s.name)})}),(0,b.jsx)("td",{style:{width:"1%"},children:t<this.props.variables.length-1&&(0,b.jsx)(o.IconButton,{onClick:e=>this.onChangeVariableOrder(e,s,re.down),name:"arrow-down",title:"Move variable down","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowArrowDownButtons(s.name)})}),(0,b.jsx)("td",{style:{width:"1%"},children:(0,b.jsx)(o.IconButton,{onClick:e=>this.onDuplicateVariable(e,(0,p.GT)(s)),name:"copy",title:"Duplicate variable","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(s.name)})}),(0,b.jsx)("td",{style:{width:"1%"},children:(0,b.jsx)(o.IconButton,{onClick:e=>this.onRemoveVariable(e,(0,p.GT)(s)),name:"trash-alt",title:"Remove variable","aria-label":r.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(s.name)})})]},`${s.name}-${t}`)}))})]})})]})})}}const ce=({passed:e})=>{const t=(0,o.useStyles)(de);return e?(0,b.jsx)(o.Icon,{name:"check",className:t.iconPassed,title:"This variable is referenced by other variables or dashboard."}):(0,b.jsx)(o.Icon,{name:"exclamation-triangle",className:t.iconFailed,title:"This variable is not referenced by any variable or dashboard."})},de=e=>({iconPassed:i.css`
    color: ${e.palette.greenBase};
  `,iconFailed:i.css`
    color: ${e.palette.orange};
  `}),ue=({id:e,usages:t})=>{const s=(0,n.useMemo)((()=>t.find((t=>t.variable.id===e))),[e,t]);if(!s)return null;const a=s.nodes.map((t=>t.label.includes(`$${e}`)?Object.assign({},t,{color:"#FB7E81"}):t));return(0,b.jsx)(ae,{show:!1,title:`Showing usages for: $${e}`,nodes:a,edges:s.edges,children:({showModal:e})=>(0,b.jsx)(o.IconButton,{onClick:()=>e(),name:"code-branch",title:"Show usages"})})};var pe;const he=({usages:e})=>{const t=(0,o.useStyles)(ge);return(0,b.jsxs)("div",{className:t.container,children:[(0,b.jsxs)("h5",{children:["Unknown Variables",(0,b.jsx)(o.Tooltip,{content:"This table lists all variable references that no longer exist in this dashboard.",children:(0,b.jsx)(o.Icon,{name:"info-circle",className:t.infoIcon})})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("table",{className:"filter-table filter-table--hover",children:[pe||(pe=(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Variable"}),(0,b.jsx)("th",{colSpan:5})]})})),(0,b.jsx)("tbody",{children:e.map((s=>{const{variable:a}=s,{id:n,name:i}=a;return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:t.firstColumn,children:(0,b.jsx)("span",{children:i})}),(0,b.jsx)("td",{className:t.defaultColumn}),(0,b.jsx)("td",{className:t.defaultColumn}),(0,b.jsx)("td",{className:t.defaultColumn}),(0,b.jsx)("td",{className:t.lastColumn,children:(0,b.jsx)(ue,{id:a.id,usages:e})})]},n)}))})]})})]})},ge=e=>({container:i.css`
    margin-top: ${e.spacing.xl};
    padding-top: ${e.spacing.xl};
    border-top: 1px solid ${e.colors.panelBorder};
  `,infoIcon:i.css`
    margin-left: ${e.spacing.sm};
  `,defaultColumn:i.css`
    width: 1%;
  `,firstColumn:i.css`
    width: 1%;
    vertical-align: top;
    color: ${e.colors.textStrong};
  `,lastColumn:i.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var me=s("./public/app/store/store.ts");const fe=({variables:e})=>{const t=(0,n.useMemo)((()=>(e=>{const t=[];for(const s of e)t.push({id:s.id,label:`${s.id}`});return t})(e)),[e]),s=(0,n.useMemo)((()=>(e=>{const t=[];for(const s of e)for(const a of e)s!==a&&m.z.get(s.type).dependsOn(s,a)&&t.push({from:s.id,to:a.id});return t})(e)),[e]);return s.length?(0,b.jsx)(ae,{show:!1,title:"Dependencies",nodes:O(t,s),edges:s,children:({showModal:e})=>(0,b.jsx)(o.Button,{onClick:()=>e(),icon:"channel-add",variant:"secondary",children:"Show dependencies"})}):null},be=e=>(0,b.jsx)(J.Provider,{store:me.h,children:(0,b.jsx)(fe,Object.assign({},e))});var ve;function xe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ye={changeVariableOrder:j.gE,duplicateVariable:j.Y9,removeVariable:j.mZ,switchToNewMode:(e="query")=>(t,s)=>{const a=function(e,t){let s=0,a=`${e}${s}`;for(;t.find((e=>e.id===a));)a=`${e}${++s}`;return a}(e,(0,y.ng)(s())),n={type:e,id:a},i=(0,y.Km)(s()),r=(0,h.cloneDeep)(m.z.get(e).initialState);r.id=a,r.name=a,t((0,j.VN)((0,p.Y6)(n,{global:!1,model:r,index:i}))),t((0,w.lc)({id:n.id}))},switchToEditMode:E,switchToListMode:R},we=(0,J.connect)((e=>({variables:(0,y.xD)(e),idInEditor:e.templating.editor.id,dashboard:e.dashboard.getModel(),unknownsNetwork:e.templating.inspect.unknownsNetwork,unknownExists:e.templating.inspect.unknownExits,usagesNetwork:e.templating.inspect.usagesNetwork,unknown:e.templating.inspect.unknown,usages:e.templating.inspect.usages})),ye);class je extends n.PureComponent{constructor(...e){super(...e),xe(this,"onChangeToListMode",(e=>{e.preventDefault(),this.props.switchToListMode()})),xe(this,"onEditVariable",(e=>{this.props.switchToEditMode(e)})),xe(this,"onNewVariable",(e=>{e.preventDefault(),this.props.switchToNewMode()})),xe(this,"onChangeVariableOrder",((e,t,s)=>{this.props.changeVariableOrder((0,p.Y6)(e,{fromIndex:t,toIndex:s}))})),xe(this,"onDuplicateVariable",(e=>{this.props.duplicateVariable((0,p.Y6)(e,{newId:void 0}))})),xe(this,"onRemoveVariable",(e=>{this.props.removeVariable((0,p.Y6)(e,{reIndex:!0}))}))}componentDidMount(){this.props.switchToListMode()}render(){var e;const t=null!==(e=this.props.variables.find((e=>e.id===this.props.idInEditor)))&&void 0!==e?e:null;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"page-action-bar",children:[(0,b.jsxs)("h3",{className:"dashboard-settings__header",children:[(0,b.jsx)("a",{onClick:this.onChangeToListMode,"aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.headerLink,children:"Variables"}),this.props.idInEditor&&(0,b.jsxs)("span",{children:[(0,b.jsx)(o.Icon,{name:"angle-right","aria-label":r.wl.pages.Dashboard.Settings.Variables.Edit.General.modeLabelEdit}),"Edit"]})]}),ve||(ve=(0,b.jsx)("div",{className:"page-action-bar__spacer"})),this.props.variables.length>0&&null===t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(be,{variables:this.props.variables}),(0,b.jsx)(o.LinkButton,{type:"button",onClick:this.onNewVariable,"aria-label":r.wl.pages.Dashboard.Settings.Variables.List.newButton,children:"New"})]})]}),!t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(le,{dashboard:this.props.dashboard,variables:this.props.variables,onAddClick:this.onNewVariable,onEditClick:this.onEditVariable,onChangeVariableOrder:this.onChangeVariableOrder,onDuplicateVariable:this.onDuplicateVariable,onRemoveVariable:this.onRemoveVariable,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),this.props.unknownExists?(0,b.jsx)(he,{usages:this.props.unknownsNetwork}):null]}),t&&(0,b.jsx)(Y,{identifier:(0,p.GT)(t)})]})}}const ke=we(je);var Se,Ce,Te,Ne,Oe=s("./public/app/core/components/Animations/SlideDown.tsx"),Ie=s("./public/app/features/dashboard/state/actions.ts"),Pe=s("./public/app/core/components/PermissionList/PermissionList.tsx"),Me=s("./public/app/core/components/PermissionList/AddPermission.tsx"),Fe=s("./public/app/core/components/PermissionList/PermissionsInfo.tsx");function Ae(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const De={getDashboardPermissions:Ie.qm,addDashboardPermission:Ie.Yq,removeDashboardPermission:Ie.Qk,updateDashboardPermission:Ie.RF},$e=(0,J.connect)((e=>({permissions:e.dashboard.permissions})),De);class Le extends n.PureComponent{constructor(e){super(e),Ae(this,"onOpenAddPermissions",(()=>{this.setState({isAdding:!0})})),Ae(this,"onRemoveItem",(e=>{this.props.removeDashboardPermission(this.props.dashboard.id,e)})),Ae(this,"onPermissionChanged",((e,t)=>{this.props.updateDashboardPermission(this.props.dashboard.id,e,t)})),Ae(this,"onAddPermission",(e=>this.props.addDashboardPermission(this.props.dashboard.id,e))),Ae(this,"onCancelAddPermission",(()=>{this.setState({isAdding:!1})})),this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id)}getFolder(){const{dashboard:e}=this.props;return{id:e.meta.folderId,title:e.meta.folderTitle,url:e.meta.folderUrl}}render(){const{permissions:e,dashboard:{meta:{hasUnsavedFolderChange:t}}}=this.props,{isAdding:s}=this.state;return t?Se||(Se=(0,b.jsx)("h5",{children:"You have changed a folder, please save to view permissions."})):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"page-action-bar",children:[Ce||(Ce=(0,b.jsx)("h3",{className:"page-sub-heading",children:"Permissions"})),Te||(Te=(0,b.jsx)(o.Tooltip,{placement:"auto",content:(0,b.jsx)(Fe.Z,{}),children:(0,b.jsx)(o.Icon,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})})),Ne||(Ne=(0,b.jsx)("div",{className:"page-action-bar__spacer"})),(0,b.jsx)(o.Button,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:s,children:"Add permission"})]}),(0,b.jsx)(Oe.s,{in:s,children:(0,b.jsx)(Me.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})}),(0,b.jsx)(Pe.Z,{items:e,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()})]})}}const Ee=$e(Le);var Re=s("./public/app/core/components/Select/FolderPicker.tsx"),_e=s("./node_modules/react-use/esm/useAsyncFn.js"),Ve=s("./public/app/core/app_events.ts"),Be=s("./public/app/features/manage-dashboards/state/actions.ts"),ze=s("./packages/grafana-runtime/src/index.ts");var Ue,qe,He,Ge,We,Ze=s("./node_modules/react-use/lib/useAsyncFn.js");const Qe=({hideModal:e,dashboard:t})=>{const s=t.meta.provisioned,{onDeleteDashboard:a}=(e=>{const[t,s]=(0,_e.Z)((()=>(0,Be.iM)(e,!1)),[]);return(0,n.useEffect)((()=>{t.value&&(ze.locationService.replace("/"),Ve.Z.emit(g.AppEvents.alertSuccess,["Dashboard Deleted",t.value.title+" has been deleted"]))}),[t]),{state:t,onDeleteDashboard:s}})(t.uid),[,i]=(0,Ze.default)((async()=>{await a(),e()}),[e]),r=Ke(t.panels,t.title);return s?(0,b.jsx)(Ye,{hideModal:e,provisionedId:t.meta.provisionedExternalId}):(0,b.jsx)(o.ConfirmModal,{isOpen:!0,body:r,onConfirm:i,onDismiss:e,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},Ke=(e,t)=>{const s=(0,h.sumBy)(e,(e=>e.alert?1:0));return s>0&&!l.vc.featureToggles.ngalert?(0,b.jsxs)(b.Fragment,{children:[Ue||(Ue=(0,b.jsx)("p",{children:"Do you want to delete this dashboard?"})),(0,b.jsxs)("p",{children:["This dashboard contains ",s," alert",s>1?"s":"",". Deleting this dashboard also deletes those alerts."]})]}):(0,b.jsxs)(b.Fragment,{children:[qe||(qe=(0,b.jsx)("p",{children:"Do you want to delete this dashboard?"})),(0,b.jsx)("p",{children:t})]})},Ye=({hideModal:e,provisionedId:t})=>(0,b.jsxs)(o.Modal,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:e,className:i.css`
      width: 500px;
    `,children:[He||(He=(0,b.jsx)("p",{children:"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."})),(0,b.jsxs)("p",{children:[Ge||(Ge=(0,b.jsxs)("i",{children:["See"," ",(0,b.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information about provisioning."]})),We||(We=(0,b.jsx)("br",{})),"File path: ",t]}),(0,b.jsx)(o.Modal.ButtonRow,{children:(0,b.jsx)(o.Button,{variant:"primary",onClick:e,children:"OK"})})]}),Je=({dashboard:e})=>(0,b.jsx)(o.ModalsController,{children:({showModal:t,hideModal:s})=>(0,b.jsx)(o.Button,{variant:"destructive",onClick:()=>{t(Qe,{dashboard:e,hideModal:s})},"aria-label":"Dashboard settings page delete dashboard button",children:"Delete Dashboard"})});var Xe=s("./public/app/features/dashboard/components/DashboardSettings/TimePickerSettings.tsx");const et=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];const tt={updateTimeZone:Ie.tM},st=(0,J.connect)(null,tt)((function({dashboard:e,updateTimeZone:t}){const[s,a]=(0,n.useState)(0),i=t=>{e[t.currentTarget.name]=t.currentTarget.value};return(0,b.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,b.jsx)("h3",{className:"dashboard-settings__header","aria-label":r.wl.pages.Dashboard.Settings.General.title,children:"General"}),(0,b.jsxs)("div",{className:"gf-form-group",children:[(0,b.jsx)(o.Field,{label:"Name",children:(0,b.jsx)(o.Input,{name:"title",onBlur:i,defaultValue:e.title})}),(0,b.jsx)(o.Field,{label:"Description",children:(0,b.jsx)(o.Input,{name:"description",onBlur:i,defaultValue:e.description})}),(0,b.jsx)(o.Field,{label:"Tags",children:(0,b.jsx)(o.TagsInput,{tags:e.tags,onChange:t=>{e.tags=t,a(s+1)}})}),(0,b.jsx)(o.Field,{label:"Folder",children:(0,b.jsx)(Re.E,{initialTitle:e.meta.folderTitle,initialFolderId:e.meta.folderId,onChange:t=>{e.meta.folderId=t.id,e.meta.folderTitle=t.title,e.meta.hasUnsavedFolderChange=!0},enableCreateNew:!0,dashboardId:e.id,skipInitialLoad:!0})}),(0,b.jsx)(o.Field,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect",children:(0,b.jsx)(o.RadioButtonGroup,{value:e.editable,options:[{label:"Editable",value:!0},{label:"Read-only",value:!1}],onChange:t=>{e.editable=t,a(s+1)}})})]}),(0,b.jsx)(Xe.P,{onTimeZoneChange:n=>{e.timezone=n,a(s+1),t(n)},onRefreshIntervalChange:t=>{e.timepicker.refresh_intervals=t.filter((e=>""!==e.trim()))},onNowDelayChange:t=>{e.timepicker.nowDelay=t},onHideTimePickerChange:t=>{e.timepicker.hidden=t,a(s+1)},onLiveNowChange:t=>{e.liveNow=t,a(s+1)},refreshIntervals:e.timepicker.refresh_intervals,timePickerHidden:e.timepicker.hidden,nowDelay:e.timepicker.nowDelay,timezone:e.timezone,liveNow:e.liveNow}),(0,b.jsx)(o.CollapsableSection,{label:"Panel options",isOpen:!0,children:(0,b.jsx)(o.Field,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels",children:(0,b.jsx)(o.RadioButtonGroup,{onChange:t=>{e.graphTooltip=t,a(s+1)},options:et,value:e.graphTooltip})})}),(0,b.jsx)("div",{className:"gf-form-button-row",children:e.meta.canSave&&(0,b.jsx)(Je,{dashboard:e})})]})}));var at,nt,it=s("./node_modules/react-use/esm/useAsync.js"),rt=s("./node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),ot=s("./public/app/features/dashboard/services/DashboardSrv.ts"),lt=s("./public/app/features/dashboard/services/TimeSrv.ts"),ct=s("./public/app/features/annotations/standardAnnotationSupport.ts"),dt=s("./public/app/features/annotations/annotations_srv.ts");function ut(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class pt extends n.PureComponent{constructor(e){super(e),ut(this,"updateFields",(()=>{var e,t;const s=null===(e=this.props.response)||void 0===e||null===(t=e.panelData)||void 0===t?void 0:t.series[0];if(s&&s.fields){const e=s.fields.map((e=>{const t=(0,g.getFieldDisplayName)(e,s);let a="";for(let t=0;t<s.length;t++){if(t>0&&(a+=", "),t>2){a+="...";break}a+=e.values.get(t)}return a.length>50&&(a=a.substring(0,50)+"..."),{label:`${t} (${e.type})`,value:t,description:a}}));this.setState({fieldNames:e})}})),ut(this,"onFieldSourceChange",((e,t)=>{const s=this.props.mappings||{},a=s[e]||{};this.props.change(Object.assign({},s,{[e]:Object.assign({},a,{source:t.value||g.AnnotationEventFieldSource.Field})}))})),ut(this,"onFieldNameChange",((e,t)=>{const s=this.props.mappings||{},a=s[e]||{};this.props.change(Object.assign({},s,{[e]:Object.assign({},a,{value:t.value,source:g.AnnotationEventFieldSource.Field})}))})),this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(e){e.response!==this.props.response&&this.updateFields()}renderRow(e,t,s){const{fieldNames:a}=this.state;let n=a;const i=t.value;let r=a.find((e=>i===e.value));i&&(n=[...a],r||n.push({label:i,value:i}));let l=s?s[e.key]:"";if(l&&e.key.startsWith("time")){const e=(0,g.getValueFormat)("dateTimeAsIso");l=(0,g.formattedValueToString)(e(l))}return null==l&&(l=""),(0,b.jsxs)("tr",{children:[(0,b.jsxs)("td",{children:[e.key," ",e.help&&(0,b.jsx)(o.Tooltip,{content:e.help,children:at||(at=(0,b.jsx)(o.Icon,{name:"info-circle"}))})]}),(0,b.jsx)("td",{children:(0,b.jsx)(o.Select,{menuShouldPortal:!0,value:r,options:n,placeholder:e.placeholder||e.key,onChange:t=>{this.onFieldNameChange(e.key,t)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})}),(0,b.jsx)("td",{children:`${l}`})]},e.key)}render(){var e,t;const s=null===(e=this.props.response)||void 0===e||null===(t=e.events)||void 0===t?void 0:t[0],a=this.props.mappings||{};return(0,b.jsxs)("table",{className:"filter-table",children:[nt||(nt=(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Annotation"}),(0,b.jsx)("th",{children:"From"}),(0,b.jsx)("th",{children:"First Value"})]})})),(0,b.jsx)("tbody",{children:ct.r0.map((e=>this.renderRow(e,a[e.key]||{},s)))})]})}}var ht,gt,mt=s("./public/app/core/core_module.ts");function ft(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class bt extends n.PureComponent{constructor(...e){super(...e),ft(this,"state",{}),ft(this,"onRunQuery",(async()=>{const{datasource:e,annotation:t}=this.props,s=(0,ot.h4)().getCurrent();if(!s)return;this.setState({running:!0});const a=await(0,rt.n)((0,dt.r)({range:(0,lt.$t)().timeRange(),panel:{},dashboard:s},e,t));this.setState({running:!1,response:a})})),ft(this,"onQueryChange",(e=>{this.props.onChange(Object.assign({},this.props.annotation,{target:e}))})),ft(this,"onMappingChange",(e=>{this.props.onChange(Object.assign({},this.props.annotation,{mappings:e}))}))}componentDidMount(){this.verifyDataSource()}componentDidUpdate(e){this.props.annotation!==e.annotation&&this.verifyDataSource()}verifyDataSource(){const{datasource:e,annotation:t}=this.props,s=Object.assign({},ct.yA,e.annotations).prepareAnnotation(t);s!==t?this.props.onChange(s):this.onRunQuery()}renderStatus(){var e;const{response:t,running:s}=this.state;let a,n="alert-info",r="...";if(s||(null==t||null===(e=t.panelData)||void 0===e?void 0:e.state)===g.LoadingState.Loading||!t)r="loading...";else{const{events:e,panelData:s}=t;var l;if(null!=s&&s.error)n="alert-error",a="exclamation-triangle",r=null!==(l=s.error.message)&&void 0!==l?l:"error";else if(null!=e&&e.length){const t=null==s?void 0:s.series[0];r=`${e.length} events (from ${null==t?void 0:t.fields.length} fields)`}else n="alert-warning",a="exclamation-triangle",r="No events found"}return(0,b.jsxs)("div",{className:(0,i.cx)(n,i.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `),children:[(0,b.jsxs)("div",{children:[a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Icon,{name:a})," "]}),r]}),(0,b.jsx)("div",{children:s?ht||(ht=(0,b.jsx)(o.Spinner,{})):(0,b.jsx)(o.Button,{variant:"secondary",size:"xs",onClick:this.onRunQuery,children:"TEST"})})]})}render(){var e,t,s;const{datasource:a,annotation:n}=this.props,{response:i}=this.state;let r=(null===(e=a.annotations)||void 0===e?void 0:e.QueryEditor)||(null===(t=a.components)||void 0===t?void 0:t.QueryEditor);if(!r)return gt||(gt=(0,b.jsx)("div",{children:"Annotations are not supported. This datasource needs to export a QueryEditor"}));const o=null!==(s=n.target)&&void 0!==s?s:{refId:"Anno"};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{query:o,datasource:a,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:null==i?void 0:i.panelData,range:(0,lt.$t)().timeRange()},null==a?void 0:a.name),"datasource"!==a.type&&(0,b.jsxs)(b.Fragment,{children:[this.renderStatus(),(0,b.jsx)(pt,{response:i,mappings:n.mappings,change:this.onMappingChange})]})]})}}function vt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}mt.ZP.directive("standardAnnotationEditor",["reactDirective",e=>e(bt,["annotation","datasource","change"])]);class xt extends n.PureComponent{constructor(...e){super(...e),vt(this,"ref",null),vt(this,"angularComponent",void 0),vt(this,"scopeProps",void 0)}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(e){var t;(e.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation)&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,null===(t=this.angularComponent)||void 0===t||t.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const e=(0,ze.getAngularLoader)(),t={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=e.load(this.ref,t,'<plugin-component ng-if="!ctrl.currentDatasource.annotations" type="annotations-query-ctrl"> </plugin-component>'),this.angularComponent.digest(),this.angularComponent.getScope().$watch((()=>{t.ctrl.ignoreNextWatcherFiring?t.ctrl.ignoreNextWatcherFiring=!1:this.props.onChange(t.ctrl.currentAnnotation)})),this.scopeProps=t}render(){return(0,b.jsx)("div",{ref:e=>this.ref=e})}}const yt={name:"New annotation",enable:!0,datasource:null,iconColor:"red"},wt=({editIdx:e,dashboard:t})=>{const[s,a]=(0,n.useState)(null!==e?t.annotations.list[e]:yt),{value:i}=(0,it.Z)((()=>(0,ze.getDataSourceSrv)().get(s.datasource)),[s.datasource]),l=s=>{const n=[...t.annotations.list];n.splice(e,1,s),a(s),t.annotations.list=n},c=e=>{const t=e.currentTarget;l(Object.assign({},s,{[t.name]:"checkbox"===t.type?t.checked:t.value}))},d=s.name===yt.name;return(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Field,{label:"Name",children:(0,b.jsx)(o.Input,{"aria-label":r.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:d,value:s.name,onChange:e=>{l(Object.assign({},s,{name:e.currentTarget.value}))},width:50})}),(0,b.jsx)(o.Field,{label:"Data source",children:(0,b.jsx)(ze.DataSourcePicker,{width:50,annotations:!0,variables:!0,current:s.datasource,onChange:e=>{l(Object.assign({},s,{datasource:e.name}))}})}),(0,b.jsx)(o.Field,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh",children:(0,b.jsx)(o.Checkbox,{name:"enable",id:"enable",value:s.enable,onChange:c})}),(0,b.jsx)(o.Field,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden.",children:(0,b.jsx)(o.Checkbox,{name:"hide",id:"hide",value:s.hide,onChange:c})}),(0,b.jsx)(o.Field,{label:"Color",description:"Color to use for the annotation event markers",children:(0,b.jsx)(o.HorizontalGroup,{children:(0,b.jsx)(o.ColorValueEditor,{value:null==s?void 0:s.iconColor,onChange:e=>{l(Object.assign({},s,{iconColor:e}))}})})}),(0,b.jsxs)(o.CollapsableSection,{isOpen:!0,label:"Query",children:[(null==i?void 0:i.annotations)&&(0,b.jsx)(bt,{datasource:i,annotation:s,onChange:l}),i&&!i.annotations&&(0,b.jsx)(xt,{datasource:i,annotation:s,onChange:l})]})]})};wt.displayName="AnnotationSettingsEdit";const jt=["children"];const kt=e=>{let{children:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,jt);const a=(0,o.useStyles)(St);return(0,b.jsx)("div",{className:a.buttonWrapper,children:(0,b.jsx)(o.Button,Object.assign({icon:"plus",variant:"secondary"},s,{children:t}))})},St=e=>({buttonWrapper:i.css`
    padding: ${e.spacing.lg} 0;
  `});var Ct,Tt,Nt;const Ot=({dashboard:e,onNew:t,onEdit:s})=>{const[a,i]=(0,n.useState)(e.annotations.list),r=(t,s)=>{e.annotations.list=g.arrayUtils.moveItemImmutably(a,t,t+s),i(e.annotations.list)},l=0===a.length||1===a.length&&a[0].builtIn;return(0,b.jsxs)(o.VerticalGroup,{children:[a.length>0&&(0,b.jsxs)("table",{className:"filter-table filter-table--hover",children:[Ct||(Ct=(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Query name"}),(0,b.jsx)("th",{children:"Data source"}),(0,b.jsx)("th",{colSpan:3})]})})),(0,b.jsx)("tbody",{children:e.annotations.list.map(((t,n)=>(0,b.jsxs)("tr",{children:[!t.builtIn&&(0,b.jsxs)("td",{className:"pointer",onClick:()=>s(n),children:[Tt||(Tt=(0,b.jsx)(o.Icon,{name:"comment-alt"})),"   ",t.name]}),t.builtIn&&(0,b.jsxs)("td",{style:{width:"90%"},className:"pointer",onClick:()=>s(n),children:[Nt||(Nt=(0,b.jsx)(o.Icon,{name:"comment-alt"})),"   ",(0,b.jsxs)("em",{className:"muted",children:[t.name," (Built-in)"]})]}),(0,b.jsx)("td",{className:"pointer",onClick:()=>s(n),children:t.datasource||"Default"}),(0,b.jsx)("td",{style:{width:"1%"},children:0!==n&&(0,b.jsx)(o.IconButton,{surface:"header",name:"arrow-up","aria-label":"arrow-up",onClick:()=>r(n,-1)})}),(0,b.jsx)("td",{style:{width:"1%"},children:e.annotations.list.length>1&&n!==e.annotations.list.length-1?(0,b.jsx)(o.IconButton,{surface:"header",name:"arrow-down","aria-label":"arrow-down",onClick:()=>r(n,1)}):null}),(0,b.jsx)("td",{style:{width:"1%"},children:(0,b.jsx)(o.DeleteButton,{size:"sm",onConfirm:()=>(t=>{e.annotations.list=[...a.slice(0,t),...a.slice(t+1)],i(e.annotations.list)})(n)})})]},`${t.name}-${n}`)))})]}),l&&(0,b.jsx)(X.Z,{onClick:t,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:"<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines\n          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for\n          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or\n          drag region). These will be stored in Grafana's annotation database.\n        </p>\n        Checkout the\n        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'\n          >Annotations documentation</a\n        >\n        for more information."}}),!l&&(0,b.jsx)(kt,{onClick:t,children:"New query"})]})};var It;const Pt=({onGoBack:e,isEditing:t,title:s})=>(0,b.jsx)("div",{className:"dashboard-settings__header",children:(0,b.jsx)(o.HorizontalGroup,{align:"center",justify:"space-between",children:(0,b.jsxs)("h3",{children:[(0,b.jsx)("span",{onClick:e,className:t?"pointer":"",children:s}),t&&(It||(It=(0,b.jsxs)("span",{children:[(0,b.jsx)(o.Icon,{name:"angle-right"})," Edit"]})))]})})}),Mt=({dashboard:e})=>{const[t,s]=(0,n.useState)(null),a=null!==t;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Pt,{title:"Annotations",onGoBack:()=>{s(null)},isEditing:a}),!a&&(0,b.jsx)(Ot,{dashboard:e,onNew:()=>{e.annotations.list=[...e.annotations.list,Object.assign({},yt)],s(e.annotations.list.length-1)},onEdit:e=>{s(e)}}),a&&(0,b.jsx)(wt,{dashboard:e,editIdx:t})]})};var Ft,At,Dt=s("./public/app/features/dashboard/components/LinksSettings/LinkSettingsEdit.tsx");const $t=({dashboard:e,onNew:t,onEdit:s})=>{const[a,i]=(0,n.useState)(e.links),r=(t,s)=>{e.links=g.arrayUtils.moveItemImmutably(a,t,t+s),i(e.links)};return 0===e.links.length?(0,b.jsx)(X.Z,{onClick:t,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("table",{className:"filter-table filter-table--hover",children:[Ft||(Ft=(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Type"}),(0,b.jsx)("th",{children:"Info"}),(0,b.jsx)("th",{colSpan:3})]})})),(0,b.jsx)("tbody",{children:a.map(((t,n)=>{var l;return(0,b.jsxs)("tr",{children:[(0,b.jsxs)("td",{className:"pointer",onClick:()=>s(n),children:[At||(At=(0,b.jsx)(o.Icon,{name:"external-link-alt"})),"   ",t.type]}),(0,b.jsx)("td",{children:(0,b.jsxs)(o.HorizontalGroup,{children:[t.title&&(0,b.jsx)("span",{children:t.title}),"link"===t.type&&(0,b.jsx)("span",{children:t.url}),"dashboards"===t.type&&(0,b.jsx)(o.TagList,{tags:null!==(l=t.tags)&&void 0!==l?l:[]})]})}),(0,b.jsx)("td",{style:{width:"1%"},children:0!==n&&(0,b.jsx)(o.IconButton,{surface:"header",name:"arrow-up","aria-label":"arrow-up",onClick:()=>r(n,-1)})}),(0,b.jsx)("td",{style:{width:"1%"},children:a.length>1&&n!==a.length-1?(0,b.jsx)(o.IconButton,{surface:"header",name:"arrow-down","aria-label":"arrow-down",onClick:()=>r(n,1)}):null}),(0,b.jsx)("td",{style:{width:"1%"},children:(0,b.jsx)(o.IconButton,{surface:"header","aria-label":"copy",name:"copy",onClick:()=>((t,s)=>{e.links=[...a,Object.assign({},t)],i(e.links)})(t)})}),(0,b.jsx)("td",{style:{width:"1%"},children:(0,b.jsx)(o.DeleteButton,{size:"sm",onConfirm:()=>(t=>{e.links=[...a.slice(0,t),...a.slice(t+1)],i(e.links)})(n)})})]},`${t.title}-${n}`)}))})]}),(0,b.jsx)(kt,{onClick:t,children:"New link"})]})},Lt=({dashboard:e})=>{const[t,s]=(0,n.useState)(null),a=()=>{s(null)},i=null!==t;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Pt,{onGoBack:a,title:"Dashboard links",isEditing:i}),!i&&(0,b.jsx)($t,{dashboard:e,onNew:()=>{e.links=[...e.links,Object.assign({},Dt.zA)],s(e.links.length-1)},onEdit:e=>{s(e)}}),i&&(0,b.jsx)(Dt.fD,{dashboard:e,editLinkIdx:t,onGoBack:a})]})};var Et,Rt,_t,Vt,Bt,zt=s("./public/app/features/dashboard/components/VersionHistory/index.ts");function Ut(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class qt extends n.PureComponent{constructor(e){super(e),Ut(this,"limit",void 0),Ut(this,"start",void 0),Ut(this,"getVersions",((e=!1)=>{this.setState({isAppending:e}),zt.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then((e=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(e)]}),this.start+=this.limit})).catch((e=>console.log(e))).finally((()=>this.setState({isAppending:!1})))})),Ut(this,"getDiff",(async()=>{const e=this.state.versions.filter((e=>e.checked)),[t,s]=e,a=t.version===this.props.dashboard.version;this.setState({isLoading:!0});const n=await zt.K8.getDashboardVersion(this.props.dashboard.id,s.version),i=await zt.K8.getDashboardVersion(this.props.dashboard.id,t.version);this.setState({baseInfo:s,isLoading:!1,isNewLatest:a,newInfo:t,viewMode:"compare",diffData:{lhs:n.data,rhs:i.data}})})),Ut(this,"decorateVersions",(e=>e.map((e=>Object.assign({},e,{createdDateString:this.props.dashboard.formatDate(e.created),ageString:this.props.dashboard.getRelativeTime(e.created),checked:!1}))))),Ut(this,"onCheck",((e,t)=>{this.setState({versions:this.state.versions.map((s=>s.id===t?Object.assign({},s,{checked:e.currentTarget.checked}):s))})})),Ut(this,"reset",(()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map((e=>Object.assign({},e,{checked:!1}))),viewMode:"list"})})),this.limit=10,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find((e=>1===e.version))}render(){const{versions:e,viewMode:t,baseInfo:s,newInfo:a,isNewLatest:n,isLoading:i,diffData:r}=this.state,o=2!==e.filter((e=>e.checked)).length,l=e.length>1,c=e.length>=this.limit;return"compare"===t?(0,b.jsxs)("div",{children:[(0,b.jsx)(zt.Cs,{isComparing:!0,onClick:this.reset,baseVersion:null==s?void 0:s.version,newVersion:null==a?void 0:a.version,isNewLatest:n}),i?Et||(Et=(0,b.jsx)(Ht,{msg:"Fetching changes…"})):(0,b.jsx)(zt.U$,{newInfo:a,baseInfo:s,isNewLatest:n,diffData:r})]}):(0,b.jsxs)("div",{children:[Rt||(Rt=(0,b.jsx)(zt.Cs,{})),i?_t||(_t=(0,b.jsx)(Ht,{msg:"Fetching history list…"})):(0,b.jsx)(zt.Sd,{versions:e,onCheck:this.onCheck}),this.state.isAppending&&(Vt||(Vt=(0,b.jsx)(Ht,{msg:"Fetching more entries…"}))),l&&(0,b.jsx)(zt.R1,{hasMore:c,canCompare:o,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()})]})}}const Ht=({msg:e})=>(0,b.jsxs)(o.HorizontalGroup,{children:[Bt||(Bt=(0,b.jsx)(o.Spinner,{})),(0,b.jsx)("em",{children:e})]});var Gt,Wt,Zt=s("./node_modules/react-virtualized-auto-sizer/dist/index.esm.js");const Qt=({dashboard:e})=>{const[t,s]=(0,n.useState)(JSON.stringify(e.getSaveModelClone(),null,2)),a=e=>{s(e)},i=(0,o.useStyles2)(Kt);return(0,b.jsxs)("div",{children:[Gt||(Gt=(0,b.jsx)("h3",{className:"dashboard-settings__header",children:"JSON Model"})),Wt||(Wt=(0,b.jsx)("div",{className:"dashboard-settings__subheader",children:"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."})),(0,b.jsx)("div",{className:i.editWrapper,children:(0,b.jsx)(Zt.Z,{children:({width:e,height:s})=>(0,b.jsx)(o.CodeEditor,{value:t,language:"json",width:e,height:s,showMiniMap:!0,showLineNumbers:!0,onBlur:a})})}),e.meta.canSave&&(0,b.jsx)(o.HorizontalGroup,{children:(0,b.jsx)(o.Button,{onClick:()=>{(0,ot.h4)().saveJSONDashboard(t).then((()=>{d.H.reloadPage()}))},children:"Save changes"})})]})},Kt=e=>({editWrapper:i.css`
    height: calc(100vh - 250px);
    margin-bottom: 10px;
  `});var Yt,Jt;function Xt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class es extends n.PureComponent{constructor(...e){super(...e),Xt(this,"onClose",(()=>{ze.locationService.partial({editview:null})})),Xt(this,"onChangePage",(e=>{ze.locationService.partial({editview:e})})),Xt(this,"onMakeEditable",(()=>{const{dashboard:e}=this.props;e.editable=!0,e.meta.canMakeEditable=!1,e.meta.canEdit=!0,e.meta.canSave=!0,this.forceUpdate()})),Xt(this,"onPostSave",(()=>{this.props.dashboard.meta.hasUnsavedFolderChange=!1,d.H.reloadPage()}))}getPages(){var e,t,s,a,n;const{dashboard:i}=this.props,r=[];return i.meta.canEdit&&(r.push(this.getGeneralPage()),r.push({title:"Annotations",id:"annotations",icon:"comment-alt",render:()=>e||(e=(0,b.jsx)(Mt,{dashboard:i}))}),r.push({title:"Variables",id:"templating",icon:"calculator-alt",render:()=>Yt||(Yt=(0,b.jsx)(ke,{}))}),r.push({title:"Links",id:"links",icon:"link",render:()=>t||(t=(0,b.jsx)(Lt,{dashboard:i}))})),i.meta.canMakeEditable&&r.push({title:"General",icon:"sliders-v-alt",id:"settings",render:()=>this.renderMakeEditable()}),i.id&&i.meta.canSave&&r.push({title:"Versions",id:"versions",icon:"history",render:()=>s||(s=(0,b.jsx)(qt,{dashboard:i}))}),i.id&&i.meta.canAdmin&&r.push({title:"Permissions",id:"permissions",icon:"lock",render:()=>a||(a=(0,b.jsx)(Ee,{dashboard:i}))}),r.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",render:()=>n||(n=(0,b.jsx)(Qt,{dashboard:i}))}),r}renderMakeEditable(){return(0,b.jsxs)("div",{children:[Jt||(Jt=(0,b.jsx)("div",{className:"dashboard-settings__header",children:"Dashboard not editable"})),(0,b.jsx)(o.Button,{onClick:this.onMakeEditable,children:"Make editable"})]})}getGeneralPage(){return{title:"General",id:"settings",icon:"sliders-v-alt",render:()=>(0,b.jsx)(st,{dashboard:this.props.dashboard})}}render(){var e;const{dashboard:t,editview:s}=this.props,a=t.meta.folderTitle,n=this.getPages(),d=null!==(e=n.find((e=>e.id===s)))&&void 0!==e?e:n[0],p=c.Vt.hasEditPermissionInFolders,h=t.meta.canSave,g=ts(l.ZP.theme2);return(0,b.jsxs)("div",{className:"dashboard-settings",children:[(0,b.jsx)(o.PageToolbar,{title:`${t.title} / Settings`,parent:a,onGoBack:this.onClose}),(0,b.jsx)(o.CustomScrollbar,{children:(0,b.jsx)("div",{className:g.scrollInner,children:(0,b.jsxs)("div",{className:g.settingsWrapper,children:[(0,b.jsxs)("aside",{className:"dashboard-settings__aside",children:[n.map((e=>(0,b.jsxs)("a",{className:(0,i.cx)("dashboard-settings__nav-item",{active:e.id===s}),"aria-label":r.wl.pages.Dashboard.Settings.General.sectionItems(e.title),onClick:()=>this.onChangePage(e.id),children:[(0,b.jsx)(o.Icon,{name:e.icon,style:{marginRight:"4px"}}),e.title]},e.id))),(0,b.jsxs)("div",{className:"dashboard-settings__aside-actions",children:[h&&(0,b.jsx)(u.i,{dashboard:t,onSaveSuccess:this.onPostSave}),p&&(0,b.jsx)(u.t,{dashboard:t,onSaveSuccess:this.onPostSave,variant:"secondary"})]})]}),(0,b.jsx)("div",{className:g.settingsContent,children:d.render()})]})})})]})}}const ts=(0,o.stylesFactory)((e=>({scrollInner:i.css`
    min-width: 100%;
    display: flex;
  `,settingsWrapper:i.css`
    margin: ${e.spacing(0,2,2)};
    display: flex;
    flex-grow: 1;
  `,settingsContent:i.css`
    flex-grow: 1;
    height: 100%;
    padding: 32px;
    border: 1px solid ${e.colors.border.weak};
    background: ${e.colors.background.primary};
    border-radius: ${e.shape.borderRadius()};
  `})))},"./public/app/features/dashboard/components/LinksSettings/LinkSettingsEdit.tsx":(e,t,s)=>{"use strict";s.d(t,{zA:()=>r,xy:()=>l,fD:()=>d});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/react/jsx-runtime.js");const r={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},o=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],l={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},c=Object.keys(l).map((e=>({label:e,value:e}))),d=({editLinkIdx:e,dashboard:t})=>{const[s,l]=(0,a.useState)(null!==e?t.links[e]:r),d=s=>{const a=[...t.links];a.splice(e,1,s),t.links=a,l(s)},u=e=>{const t=e.currentTarget;d(Object.assign({},s,{[t.name]:"checkbox"===t.type?t.checked:t.value}))},p=s.title===r.title;return(0,i.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,i.jsx)(n.Field,{label:"Title",children:(0,i.jsx)(n.Input,{name:"title",id:"title",value:s.title,onChange:u,autoFocus:p})}),(0,i.jsx)(n.Field,{label:"Type",children:(0,i.jsx)(n.Select,{menuShouldPortal:!0,value:s.type,options:o,onChange:e=>{const t=Object.assign({},s,{type:e.value});"dashboards"===t.type?(t.url="",t.tooltip=""):t.tags=[],d(t)}})}),"dashboards"===s.type&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.Field,{label:"With tags",children:(0,i.jsx)(n.TagsInput,{tags:s.tags,placeholder:"add tags",onChange:e=>{d(Object.assign({},s,{tags:e}))}})})}),"link"===s.type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.Field,{label:"URL",children:(0,i.jsx)(n.Input,{name:"url",value:s.url,onChange:u})}),(0,i.jsx)(n.Field,{label:"Tooltip",children:(0,i.jsx)(n.Input,{name:"tooltip",value:s.tooltip,onChange:u,placeholder:"Open dashboard"})}),(0,i.jsx)(n.Field,{label:"Icon",children:(0,i.jsx)(n.Select,{menuShouldPortal:!0,value:s.icon,options:c,onChange:e=>{d(Object.assign({},s,{icon:e.value}))}})})]}),(0,i.jsxs)(n.CollapsableSection,{label:"Options",isOpen:!0,children:["dashboards"===s.type&&(0,i.jsx)(n.Field,{children:(0,i.jsx)(n.Checkbox,{label:"Show as dropdown",name:"asDropdown",value:s.asDropdown,onChange:u})}),(0,i.jsx)(n.Field,{children:(0,i.jsx)(n.Checkbox,{label:"Include current time range",name:"keepTime",value:s.keepTime,onChange:u})}),(0,i.jsx)(n.Field,{children:(0,i.jsx)(n.Checkbox,{label:"Include current template variable values",name:"includeVars",value:s.includeVars,onChange:u})}),(0,i.jsx)(n.Field,{children:(0,i.jsx)(n.Checkbox,{label:"Open link in new tab",name:"targetBlank",value:s.targetBlank,onChange:u})})]})]})}},"./public/app/features/dashboard/components/PanelEditor/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{jy:()=>l,Hl:()=>u,yi:()=>h,my:()=>g,K9:()=>m,g_:()=>f,OT:()=>b,Kd:()=>v});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./public/app/features/dashboard/state/PanelModel.ts"),i=s("./packages/grafana-data/src/index.ts"),r=s("./public/app/features/dashboard/components/PanelEditor/types.ts"),o=s("./public/app/core/store.ts");const l="grafana.dashboard.editor.ui",c={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:r.d1.Fill},d=(0,a.oM)({name:"panelEditor",initialState:(()=>{const e=o.Z.getObject(l,c);let t=Object.assign({},e);return"string"==typeof e.topPaneSize&&(t=Object.assign({},e,{topPaneSize:parseFloat(e.topPaneSize)/100})),{getPanel:()=>new n.r({}),getSourcePanel:()=>new n.r({}),getData:()=>({state:i.LoadingState.NotStarted,series:[],timeRange:(0,i.getDefaultTimeRange)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:Object.assign({},c,t)}})(),reducers:{updateEditorInitState:(e,t)=>{e.getPanel=()=>t.payload.panel,e.getSourcePanel=()=>t.payload.sourcePanel,e.initDone=!0,e.isOpen=!0,e.shouldDiscardChanges=!1},setEditorPanelData:(e,t)=>{e.getData=()=>t.payload},setDiscardChanges:(e,t)=>{e.shouldDiscardChanges=t.payload},setPanelEditorUIState:(e,t)=>{e.ui=Object.assign({},e.ui,t.payload),!e.ui.isPanelOptionsVisible&&e.isVizPickerOpen&&(e.isVizPickerOpen=!1)},toggleVizPicker:(e,t)=>{e.isVizPickerOpen=t.payload,e.isVizPickerOpen&&(e.ui.isPanelOptionsVisible=!0)},toggleTableView(e){e.tableViewEnabled=!e.tableViewEnabled},closeEditor:e=>{e.isOpen=!1,e.initDone=!1,e.isVizPickerOpen=!1,e.tableViewEnabled=!1}}}),{updateEditorInitState:u,setEditorPanelData:p,setDiscardChanges:h,closeEditor:g,setPanelEditorUIState:m,toggleVizPicker:f,toggleTableView:b}=d.actions,v=d.reducer},"./public/app/features/dashboard/components/PanelEditor/types.ts":(e,t,s)=>{"use strict";let a,n,i;s.d(t,{Ip:()=>a,d1:()=>n,d7:()=>r}),function(e){e.Query="query",e.Transform="transform",e.Visualize="visualize",e.Alert="alert"}(a||(a={})),function(e){e[e.Fill=0]="Fill",e[e.Fit=1]="Fit",e[e.Exact=2]="Exact"}(n||(n={})),function(e){e[e.Off=0]="Off",e[e.Table=1]="Table"}(i||(i={}));const r=[{value:n.Fill,label:"Fill",description:"Use all available space"},{value:n.Exact,label:"Actual",description:"Make same size as on the dashboard"}];i.Off,i.Table},"./public/app/features/dashboard/components/SaveDashboard/SaveDashboardAsModal.tsx":(e,t,s)=>{"use strict";s.d(t,{s:()=>g});var a,n=s("./node_modules/react/index.js"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./public/app/core/components/Select/FolderPicker.tsx"),l=s("./public/app/features/manage-dashboards/services/ValidationSrv.ts"),c=s("./node_modules/react/jsx-runtime.js");const d=["ref"];const u=({dashboard:e,onSubmit:t,onCancel:s,onSuccess:n})=>{var i;const u={title:`${e.title} Copy`,$folder:{id:e.meta.folderId,title:e.meta.folderTitle},copyTags:!1};return(0,c.jsx)(r.Form,{defaultValues:u,onSubmit:async s=>{if(!t)return;const a=(e=>{const t=e.getSaveModelClone();return t.id=null,t.uid="",t.title+=" Copy",t.editable=!0,t.hideControls=!1,e.id>0&&t.panels.forEach((e=>{"graph"===e.type&&e.alert&&delete e.thresholds,delete e.alert})),delete t.autoUpdate,t})(e);a.title=s.title,s.copyTags||(a.tags=[]);"success"===(await t(a,{folderId:s.$folder.id},e)).status&&n()},children:({register:t,control:n,errors:u,getValues:p})=>{var h,g;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.Field,{label:"Dashboard name",invalid:!!u.title,error:null===(h=u.title)||void 0===h?void 0:h.message,children:(0,c.jsx)(r.Input,Object.assign({},t("title",{validate:(g=p,async e=>{var t;if(e&&e===(null===(t=g().$folder.title)||void 0===t?void 0:t.trim()))return"Dashboard name cannot be the same as folder name";try{return await l.Z.validateNewDashboardName(g().$folder.id,e),!0}catch(e){return e.message}})}),{"aria-label":"Save dashboard title field",autoFocus:!0}))}),(0,c.jsx)(r.Field,{label:"Folder",children:(0,c.jsx)(r.InputControl,{render:t=>{let{}=t,s=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t.field,d);return(0,c.jsx)(o.E,Object.assign({},s,{dashboardId:e.id,initialFolderId:e.meta.folderId,initialTitle:e.meta.folderTitle,enableCreateNew:!0}))},control:n,name:"$folder"})}),(0,c.jsx)(r.Field,{label:"Copy tags",children:(0,c.jsx)(r.Switch,Object.assign({},t("copyTags")))}),i||(i=(0,c.jsxs)(r.Modal.ButtonRow,{children:[(0,c.jsx)(r.Button,{type:"button",variant:"secondary",onClick:s,fill:"outline",children:"Cancel"}),a||(a=(0,c.jsx)(r.Button,{type:"submit","aria-label":"Save dashboard button",children:"Save"}))]}))]})}})};var p=s("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardErrorProxy.tsx"),h=s("./public/app/features/dashboard/components/SaveDashboard/useDashboardSave.tsx");const g=({dashboard:e,onDismiss:t,isNew:s})=>{const{state:a,onDashboardSave:o}=(0,h.f)(e),[l,d]=(0,n.useState)();return(0,c.jsxs)(c.Fragment,{children:[a.error&&(0,c.jsx)(p.G,{error:a.error,dashboard:e,dashboardSaveModel:l,onDismiss:t}),!a.error&&(0,c.jsx)(r.Modal,{isOpen:!0,title:"Save dashboard as...",icon:"copy",onDismiss:t,className:i.css`
            width: 500px;
          `,children:(0,c.jsx)(u,{dashboard:e,onCancel:t,onSuccess:t,onSubmit:(e,t,s)=>(d(e),o(e,t,s)),isNew:s})})]})}},"./public/app/features/dashboard/components/SaveDashboard/SaveDashboardButton.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>l,t:()=>c});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/index.ts"),n=s("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardAsModal.tsx"),i=s("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardModalProxy.tsx"),r=s("./packages/grafana-e2e-selectors/src/index.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=({dashboard:e,onSaveSuccess:t})=>(0,o.jsx)(a.ModalsController,{children:({showModal:s,hideModal:n})=>(0,o.jsx)(a.Button,{onClick:()=>{s(i.D,{dashboard:e,onSaveSuccess:t,onDismiss:n})},"aria-label":r.wl.pages.Dashboard.Settings.General.saveDashBoard,children:"Save dashboard"})}),c=({dashboard:e,onSaveSuccess:t,variant:s})=>(0,o.jsx)(a.ModalsController,{children:({showModal:i,hideModal:l})=>(0,o.jsx)(a.FullWidthButtonContainer,{children:(0,o.jsx)(a.Button,{onClick:()=>{i(n.s,{dashboard:e,onSaveSuccess:t,onDismiss:l})},variant:s,"aria-label":r.wl.pages.Dashboard.Settings.General.saveAsDashBoard,children:"Save As..."})})})},"./public/app/features/dashboard/components/SaveDashboard/SaveDashboardErrorProxy.tsx":(e,t,s)=>{"use strict";s.d(t,{G:()=>h});var a,n,i,r,o=s("./node_modules/react/index.js"),l=s("./packages/grafana-ui/src/index.ts"),c=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),d=s("./public/app/features/dashboard/components/SaveDashboard/useDashboardSave.tsx"),u=s("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardButton.tsx"),p=s("./node_modules/react/jsx-runtime.js");const h=({dashboard:e,dashboardSaveModel:t,error:s,onDismiss:i})=>{const{onDashboardSave:r}=(0,d.f)(e);return(0,o.useEffect)((()=>{s.data&&m(s.data.status)&&(s.isHandled=!0)}),[s]),(0,p.jsxs)(p.Fragment,{children:[s.data&&"version-mismatch"===s.data.status&&(0,p.jsx)(l.ConfirmModal,{isOpen:!0,title:"Conflict",body:a||(a=(0,p.jsxs)("div",{children:["Someone else has updated this dashboard ",(0,p.jsx)("br",{})," ",(0,p.jsx)("small",{children:"Would you still like to save this dashboard?"})]})),confirmText:"Save and overwrite",onConfirm:async()=>{await r(t,{overwrite:!0},e),i()},onDismiss:i}),s.data&&"name-exists"===s.data.status&&(0,p.jsx)(l.ConfirmModal,{isOpen:!0,title:"Conflict",body:n||(n=(0,p.jsxs)("div",{children:["A dashboard with the same name in selected folder already exists. ",(0,p.jsx)("br",{}),(0,p.jsx)("small",{children:"Would you still like to save this dashboard?"})]})),confirmText:"Save and overwrite",onConfirm:async()=>{await r(t,{overwrite:!0},e),i()},onDismiss:i}),s.data&&"plugin-dashboard"===s.data.status&&(0,p.jsx)(g,{dashboard:e,onDismiss:i})]})},g=({onDismiss:e,dashboard:t})=>{const s=(0,l.useTheme)(),{onDashboardSave:a}=(0,d.f)(t),n=f(s);return(0,p.jsxs)(l.Modal,{className:n.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:e,children:[(0,p.jsxs)("div",{className:n.modalText,children:["Your changes will be lost when you update the plugin.",i||(i=(0,p.jsx)("br",{})),r||(r=(0,p.jsxs)("small",{children:["Use ",(0,p.jsx)("strong",{children:"Save As"})," to create custom version."]}))]}),(0,p.jsxs)(l.Modal.ButtonRow,{children:[(0,p.jsx)(l.Button,{variant:"secondary",onClick:e,fill:"outline",children:"Cancel"}),(0,p.jsx)(u.t,{dashboard:t,onSaveSuccess:e}),(0,p.jsx)(l.Button,{variant:"destructive",onClick:async()=>{await a(t.getSaveModelClone(),{overwrite:!0},t),e()},children:"Overwrite"})]})]})},m=e=>{switch(e){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},f=(0,l.stylesFactory)((e=>({modal:c.css`
    width: 500px;
  `,modalText:c.css`
    font-size: ${e.typography.heading.h4};
    color: ${e.colors.link};
    margin-bottom: calc(${e.spacing.d} * 2);
    padding-top: ${e.spacing.d};
  `,modalButtonRow:c.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${e.spacing.d};
    }
  `})))},"./public/app/features/dashboard/components/SaveDashboard/SaveDashboardModalProxy.tsx":(e,t,s)=>{"use strict";s.d(t,{D:()=>T});var a,n,i,r,o,l=s("./node_modules/react/index.js"),c=s("./packages/grafana-ui/src/index.ts"),d=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),u=s("./node_modules/file-saver/dist/FileSaver.min.js"),p=s("./public/app/core/components/CopyToClipboard/CopyToClipboard.tsx"),h=s("./packages/grafana-data/src/index.ts"),g=s("./public/app/core/app_events.ts"),m=s("./node_modules/react/jsx-runtime.js");const f=({dashboard:e,onCancel:t})=>{const s=(0,c.useTheme)(),[d,f]=(0,l.useState)((()=>{const t=e.getSaveModelClone();return delete t.id,JSON.stringify(t,null,2)})),v=(0,l.useCallback)((()=>{const t=new Blob([d],{type:"application/json;charset=utf-8"});(0,u.saveAs)(t,e.title+"-"+(new Date).getTime()+".json")}),[e.title,d]),x=(0,l.useCallback)((()=>{g.Z.emit(h.AppEvents.alertSuccess,["Dashboard JSON copied to clipboard"])}),[]),y=b(s);return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{children:["This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",a||(a=(0,m.jsx)("br",{})),n||(n=(0,m.jsxs)("i",{children:["See"," ",(0,m.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information about provisioning."]})),i||(i=(0,m.jsx)("br",{}))," ",r||(r=(0,m.jsx)("br",{})),o||(o=(0,m.jsx)("strong",{children:"File path: "}))," ",e.meta.provisionedExternalId]}),(0,m.jsx)(c.TextArea,{spellCheck:!1,value:d,onChange:e=>{f(e.currentTarget.value)},className:y.json}),(0,m.jsxs)(c.Modal.ButtonRow,{children:[(0,m.jsx)(c.Button,{variant:"secondary",onClick:t,fill:"outline",children:"Cancel"}),(0,m.jsx)(p.h,{text:()=>d,elType:c.Button,onSuccess:x,children:"Copy JSON to clipboard"}),(0,m.jsx)(c.Button,{onClick:v,children:"Save JSON to file"})]})]})})},b=(0,c.stylesFactory)((e=>({json:d.css`
      height: 400px;
      width: 100%;
      overflow: auto;
      resize: none;
      font-family: monospace;
    `}))),v=({dashboard:e,onDismiss:t})=>(0,m.jsx)(c.Modal,{isOpen:!0,title:"Cannot save provisioned dashboard",icon:"copy",onDismiss:t,children:(0,m.jsx)(f,{dashboard:e,onCancel:t,onSuccess:t})});var x,y=s("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardAsModal.tsx"),w=s("./packages/grafana-e2e-selectors/src/index.ts");const j=({dashboard:e,onCancel:t,onSuccess:s,onSubmit:a})=>{var n;const i=(0,l.useMemo)((()=>e.hasTimeChanged()),[e]),r=(0,l.useMemo)((()=>e.hasVariableValuesChanged()),[e]);return(0,m.jsx)(c.Form,{onSubmit:async t=>{if(!a)return;"success"===(await a(e.getSaveModelClone(t),t,e)).status&&(t.saveVariables&&e.resetOriginalVariables(),t.saveTimerange&&e.resetOriginalTime(),s())},children:({register:e,errors:s})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{children:[i&&(0,m.jsx)(c.Checkbox,Object.assign({},e("saveTimerange"),{label:"Save current time range as dashboard default","aria-label":w.wl.pages.SaveDashboardModal.saveTimerange})),r&&(0,m.jsx)(c.Checkbox,Object.assign({},e("saveVariables"),{label:"Save current variable values as dashboard default","aria-label":w.wl.pages.SaveDashboardModal.saveVariables})),(r||i)&&(x||(x=(0,m.jsx)("div",{className:"gf-form-group"}))),(0,m.jsx)(c.TextArea,Object.assign({},e("message"),{placeholder:"Add a note to describe your changes.",autoFocus:!0}))]}),(0,m.jsxs)(c.Modal.ButtonRow,{children:[n||(n=(0,m.jsx)(c.Button,{variant:"secondary",onClick:t,fill:"outline",children:"Cancel"})),(0,m.jsx)(c.Button,{type:"submit","aria-label":w.wl.pages.SaveDashboardModal.save,children:"Save"})]})]})})};var k=s("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardErrorProxy.tsx"),S=s("./public/app/features/dashboard/components/SaveDashboard/useDashboardSave.tsx");const C=({dashboard:e,onDismiss:t,onSaveSuccess:s})=>{const{state:a,onDashboardSave:n}=(0,S.f)(e),[i,r]=(0,l.useState)();return(0,m.jsxs)(m.Fragment,{children:[a.error&&(0,m.jsx)(k.G,{error:a.error,dashboard:e,dashboardSaveModel:i,onDismiss:t}),!a.error&&(0,m.jsx)(c.Modal,{isOpen:!0,title:"Save dashboard",icon:"copy",onDismiss:t,className:d.css`
            width: 500px;
          `,children:(0,m.jsx)(j,{dashboard:e,onCancel:t,onSuccess:()=>{t(),s&&s()},onSubmit:(e,t,s)=>(r(e),n(e,t,s))})})]})},T=({dashboard:e,onDismiss:t,onSaveSuccess:s})=>{const a=e.meta.provisioned,n=0===e.version,i=e.version>0,r={dashboard:e,onDismiss:t,onSaveSuccess:s};return(0,m.jsxs)(m.Fragment,{children:[i&&!a&&(0,m.jsx)(C,Object.assign({},r)),a&&(0,m.jsx)(v,Object.assign({},r)),n&&(0,m.jsx)(y.s,Object.assign({},r,{isNew:!0}))]})}},"./public/app/features/dashboard/components/SaveDashboard/useDashboardSave.tsx":(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-use/lib/useAsyncFn.js"),i=s("./packages/grafana-data/src/index.ts"),r=s("./public/app/core/app_events.ts"),o=s("./public/app/features/manage-dashboards/state/actions.ts"),l=s("./packages/grafana-runtime/src/index.ts"),c=s("./public/app/types/events.ts");const d=e=>{const[t,s]=(0,n.default)((async(e,t,s)=>await((e,t,s)=>{let a=t.folderId;var n;return void 0===a&&(a=null!==(n=s.meta.folderId)&&void 0!==n?n:e.folderId),(0,o.uC)(Object.assign({},t,{folderId:a,dashboard:e}))})(e,t,s)),[]);return(0,a.useEffect)((()=>{if(t.value){e.version=t.value.version,e.clearUnsavedChanges(),r.Z.publish(new c.Jd),r.Z.emit(i.AppEvents.alertSuccess,["Dashboard saved"]);const s=l.locationService.getLocation().pathname,a=i.locationUtil.stripBaseFromUrl(t.value.url);a!==s&&setTimeout((()=>l.locationService.replace(a)))}}),[e,t]),{state:t,onDashboardSave:s}}},"./public/app/features/dashboard/components/ShareModal/index.ts":(e,t,s)=>{"use strict";s.d(t,{V8:()=>se});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/features/library-panels/guard.ts"),r=s("./packages/grafana-e2e-selectors/src/index.ts"),o=s("./packages/grafana-data/src/index.ts"),l=s("./packages/grafana-runtime/src/index.ts"),c=s("./public/app/features/dashboard/services/TimeSrv.ts"),d=s("./public/app/core/utils/shortLinks.ts");function u({useCurrentTimeRange:e,selectedTheme:t,panel:s,search:a=window.location.search,range:n=(0,c.$t)().timeRange(),orgId:i=l.config.bootData.user.orgId}){const r=new URLSearchParams(a);return r.set("from",String(n.from.valueOf())),r.set("to",String(n.to.valueOf())),r.set("orgId",i),e||(r.delete("from"),r.delete("to")),"current"!==t&&r.set("theme",t),s&&!r.has("editPanel")&&r.set("viewPanel",String(s.id)),r}function p(){let e=window.location.href;const t=e.indexOf("?");return-1!==t&&(e=e.substring(0,t)),e}function h(e,t,s){var a,n;const i=p(),r=u({useCurrentTimeRange:e,selectedTheme:t,panel:s});let c=i.replace(l.config.appSubUrl+"/dashboard/",l.config.appSubUrl+"/dashboard-solo/");c=c.replace(l.config.appSubUrl+"/d/",l.config.appSubUrl+"/d-solo/");const d=null!==(a=null!==(n=r.get("editPanel"))&&void 0!==n?n:r.get("viewPanel"))&&void 0!==a?a:"";return r.set("panelId",d),r.delete("editPanel"),r.delete("viewPanel"),o.urlUtil.appendQueryToUrl(c,r.toString())}function g(e,t,s){let a=h(e,t,s).replace(l.config.appSubUrl+"/dashboard-solo/",l.config.appSubUrl+"/render/dashboard-solo/");return a=a.replace(l.config.appSubUrl+"/d-solo/",l.config.appSubUrl+"/render/d-solo/"),a+="&width=1000&height=500"+function(){const e="&tz=UTC"+encodeURIComponent((0,o.dateTime)().format("Z"));if(!window.Intl)return e;const t=window.Intl.DateTimeFormat();if(!t.resolvedOptions)return e;const s=t.resolvedOptions();if(!s.timeZone)return e;return"&tz="+encodeURIComponent(s.timeZone)}(),a}var m,f,b,v,x=s("./public/app/core/core.ts"),y=s("./public/app/core/config.ts"),w=s("./node_modules/react/jsx-runtime.js");function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const k=[{label:"Current",value:"current"},{label:"Dark",value:"dark"},{label:"Light",value:"light"}];class S extends a.PureComponent{constructor(e){super(e),j(this,"buildUrl",(async()=>{const{panel:e}=this.props,{useCurrentTimeRange:t,useShortUrl:s,selectedTheme:a}=this.state,n=await async function(e,t,s,a){const n=p(),i=u({useCurrentTimeRange:e,selectedTheme:t,panel:s}),r=o.urlUtil.appendQueryToUrl(n,i.toString());return a?await(0,d.D)(r):r}(t,a,e,s),i=g(t,a,e);this.setState({shareUrl:n,imageUrl:i})})),j(this,"onUseCurrentTimeRangeChange",(()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})})),j(this,"onUrlShorten",(()=>{this.setState({useShortUrl:!this.state.useShortUrl})})),j(this,"onThemeChange",(e=>{this.setState({selectedTheme:e})})),j(this,"onShareUrlCopy",(()=>{x.h$.emit(o.AppEvents.alertSuccess,["Content copied to clipboard"])})),j(this,"getShareUrl",(()=>this.state.shareUrl)),this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){this.buildUrl()}componentDidUpdate(e,t){const{useCurrentTimeRange:s,useShortUrl:a,selectedTheme:n}=this.state;t.useCurrentTimeRange===s&&t.selectedTheme===n&&t.useShortUrl===a||this.buildUrl()}render(){const{panel:e}=this.props,t=!!this.props.dashboard&&"now"===this.props.dashboard.time.to,{useCurrentTimeRange:s,useShortUrl:a,selectedTheme:i,shareUrl:o,imageUrl:l}=this.state,c=r.wl.pages.SharePanelModal;return(0,w.jsxs)(w.Fragment,{children:[m||(m=(0,w.jsx)("p",{className:"share-modal-info-text",children:"Create a direct link to this dashboard or panel, customized with the options below."})),(0,w.jsxs)(n.FieldSet,{children:[(0,w.jsx)(n.Field,{label:"Lock time range",description:t?"Transforms the current relative time range to an absolute time range":"",children:(0,w.jsx)(n.Switch,{id:"share-current-time-range",value:s,onChange:this.onUseCurrentTimeRangeChange})}),(0,w.jsx)(n.Field,{label:"Theme",children:(0,w.jsx)(n.RadioButtonGroup,{options:k,value:i,onChange:this.onThemeChange})}),(0,w.jsx)(n.Field,{label:"Shorten URL",children:(0,w.jsx)(n.Switch,{id:"share-shorten-url",value:a,onChange:this.onUrlShorten})}),(0,w.jsx)(n.Field,{label:"Link URL",children:(0,w.jsx)(n.Input,{value:o,readOnly:!0,addonAfter:(0,w.jsxs)(n.ClipboardButton,{variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onShareUrlCopy,children:[f||(f=(0,w.jsx)(n.Icon,{name:"copy"}))," Copy"]})})})]}),e&&y.ZP.rendererAvailable&&(0,w.jsx)("div",{className:"gf-form",children:(0,w.jsxs)("a",{href:l,target:"_blank",rel:"noreferrer","aria-label":c.linkToRenderedImage,children:[b||(b=(0,w.jsx)(n.Icon,{name:"camera"}))," Direct link rendered image"]})}),e&&!y.ZP.rendererAvailable&&(v||(v=(0,w.jsxs)(n.Alert,{severity:"info",title:"Image renderer plugin not installed",bottomSpacing:0,children:[(0,w.jsx)(w.Fragment,{children:"To render a panel image, you must install the "}),(0,w.jsx)("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link",children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})))]})}}var C,T,N,O,I,P=s("./public/app/features/variables/types.ts");function M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const F=[{label:"Never",value:0},{label:"1 Hour",value:3600},{label:"1 Day",value:86400},{label:"7 Days",value:604800}];class A extends a.PureComponent{constructor(e){super(e),M(this,"dashboard",void 0),M(this,"createSnapshot",(e=>()=>{const{timeoutSeconds:t}=this.state;this.dashboard.snapshot={timestamp:new Date},e||(this.dashboard.snapshot.originalUrl=window.location.href),this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout((()=>{this.saveSnapshot(this.dashboard,e)}),1e3*t)})),M(this,"saveSnapshot",(async(e,t)=>{const{snapshotExpires:s}=this.state,a=this.dashboard.getSaveModelClone();this.scrubDashboard(a);const n={dashboard:a,name:a.title,expires:s,external:t};try{const e=await(0,l.getBackendSrv)().post("/api/snapshots",n);this.setState({deleteUrl:e.deleteUrl,snapshotUrl:e.url,step:2})}finally{this.setState({isLoading:!1})}})),M(this,"scrubDashboard",(e=>{const{panel:t}=this.props,{snapshotName:s}=this.state;e.title=s,e.time=(0,c.$t)().timeRange(),e.links=[],e.panels.forEach((e=>{e.targets=[],e.links=[],e.datasource=null}));const a=e.annotations.list.filter((e=>e.enable));if(e.annotations.list=a.map((e=>({name:e.name,enable:e.enable,iconColor:e.iconColor,snapshotData:e.snapshotData,type:e.type,builtIn:e.builtIn,hide:e.hide}))),e.getVariables().forEach((e=>{e.query="",e.options=e.current?[e.current]:[],e.refresh=P.Bd.never})),t){const s=t.getSaveModel();s.gridPos.w=24,s.gridPos.x=0,s.gridPos.y=0,s.gridPos.h=20,e.panels=[s]}delete this.dashboard.snapshot,this.dashboard.forEachPanel((e=>{delete e.snapshotData})),this.dashboard.annotations.list.forEach((e=>{delete e.snapshotData}))})),M(this,"deleteSnapshot",(async()=>{const{deleteUrl:e}=this.state;await(0,l.getBackendSrv)().get(e),this.setState({step:3})})),M(this,"getSnapshotUrl",(()=>this.state.snapshotUrl)),M(this,"onSnapshotNameChange",(e=>{this.setState({snapshotName:e.target.value})})),M(this,"onTimeoutChange",(e=>{this.setState({timeoutSeconds:Number(e.target.value)})})),M(this,"onExpireChange",(e=>{this.setState({selectedExpireOption:e,snapshotExpires:e.value})})),M(this,"onSnapshotUrlCopy",(()=>{x.h$.emit(o.AppEvents.alertSuccess,["Content copied to clipboard"])})),this.dashboard=e.dashboard,this.state={isLoading:!1,step:1,selectedExpireOption:F[0],snapshotExpires:F[0].value,snapshotName:e.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const e=await(0,l.getBackendSrv)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:e.externalSnapshotName,externalEnabled:e.externalEnabled})}renderStep1(){const{onDismiss:e}=this.props,{snapshotName:t,selectedExpireOption:s,timeoutSeconds:a,isLoading:i,sharingButtonText:r,externalEnabled:o}=this.state;return(0,w.jsxs)(w.Fragment,{children:[C||(C=(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"share-modal-info-text",children:"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard."}),(0,w.jsxs)("p",{className:"share-modal-info-text",children:["Keep in mind, your snapshot ",(0,w.jsx)("em",{children:"can be viewed by anyone"})," that has the link and can access the URL. Share wisely."]})]})),(0,w.jsx)(n.Field,{label:"Snapshot name",children:(0,w.jsx)(n.Input,{width:30,value:t,onChange:this.onSnapshotNameChange})}),(0,w.jsx)(n.Field,{label:"Expire",children:(0,w.jsx)(n.Select,{menuShouldPortal:!0,width:30,options:F,value:s,onChange:this.onExpireChange})}),(0,w.jsx)(n.Field,{label:"Timeout (seconds)",description:"You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.",children:(0,w.jsx)(n.Input,{type:"number",width:21,value:a,onChange:this.onTimeoutChange})}),(0,w.jsxs)(n.Modal.ButtonRow,{children:[(0,w.jsx)(n.Button,{variant:"secondary",onClick:e,fill:"outline",children:"Cancel"}),o&&(0,w.jsx)(n.Button,{variant:"secondary",disabled:i,onClick:this.createSnapshot(!0),children:r}),(0,w.jsx)(n.Button,{variant:"primary",disabled:i,onClick:this.createSnapshot(),children:"Local Snapshot"})]})]})}renderStep2(){const{snapshotUrl:e}=this.state;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"gf-form",style:{marginTop:"40px"},children:(0,w.jsxs)("div",{className:"gf-form-row",children:[(0,w.jsxs)("a",{href:e,className:"large share-modal-link",target:"_blank",rel:"noreferrer",children:[T||(T=(0,w.jsx)(n.Icon,{name:"external-link-alt"}))," ",e]}),N||(N=(0,w.jsx)("br",{})),(0,w.jsx)(n.ClipboardButton,{variant:"secondary",getText:this.getSnapshotUrl,onClipboardCopy:this.onSnapshotUrlCopy,children:"Copy Link"})]})}),(0,w.jsxs)("div",{className:"pull-right",style:{padding:"5px"},children:["Did you make a mistake?"," ",(0,w.jsx)(n.LinkButton,{fill:"text",target:"_blank",onClick:this.deleteSnapshot,children:"Delete snapshot."})]})]})}renderStep3(){return O||(O=(0,w.jsx)("div",{className:"share-modal-header",children:(0,w.jsx)("p",{className:"share-modal-info-text",children:"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."})}))}render(){const{isLoading:e,step:t}=this.state;return(0,w.jsxs)(w.Fragment,{children:[1===t&&this.renderStep1(),2===t&&this.renderStep2(),3===t&&this.renderStep3(),e&&(I||(I=(0,w.jsx)(n.Spinner,{inline:!0})))]})}}var D,$,L=s("./node_modules/file-saver/dist/FileSaver.min.js"),E=s("./public/app/core/services/backend_srv.ts"),R=s("./public/app/features/dashboard/components/DashExportModal/index.ts"),_=s("./public/app/types/events.ts"),V=s("./node_modules/react-virtualized-auto-sizer/dist/index.esm.js"),B=s("./public/app/core/actions/index.ts"),z=s("./public/app/store/store.ts"),U=s("./public/app/core/copy/appNotification.ts");function q({json:e,onDismiss:t}){const s=(0,a.useCallback)((()=>e),[e]);return(0,w.jsxs)(n.Modal,{title:"JSON",onDismiss:t,onClickBackdrop:t,isOpen:!0,children:[(0,w.jsx)(V.Z,{disableHeight:!0,children:({width:t})=>(0,w.jsx)(n.CodeEditor,{value:e,language:"json",showMiniMap:!1,height:"500px",width:t})}),(0,w.jsx)(n.Modal.ButtonRow,{children:(0,w.jsx)(n.ClipboardButton,{getText:s,onClipboardCopy:()=>{(0,z.WI)((0,B.$l)((0,U.AT)("Content copied to clipboard")))},children:"Copy to Clipboard"})})]})}function H(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class G extends a.PureComponent{constructor(e){super(e),H(this,"exporter",void 0),H(this,"onShareExternallyChange",(()=>{this.setState({shareExternally:!this.state.shareExternally})})),H(this,"onTrimDefaultsChange",(()=>{this.setState({trimDefaults:!this.state.trimDefaults})})),H(this,"onSaveAsFile",(()=>{const{dashboard:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:s}=this.state;t?this.exporter.makeExportable(e).then((e=>{s?(0,E.i)().post("/api/dashboards/trim",{dashboard:e}).then((e=>{this.openSaveAsDialog(e.dashboard)})):this.openSaveAsDialog(e)})):s?(0,E.i)().post("/api/dashboards/trim",{dashboard:e.getSaveModelClone()}).then((e=>{this.openSaveAsDialog(e.dashboard)})):this.openSaveAsDialog(e.getSaveModelClone())})),H(this,"onViewJson",(()=>{const{dashboard:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:s}=this.state;t?this.exporter.makeExportable(e).then((e=>{s?(0,E.i)().post("/api/dashboards/trim",{dashboard:e}).then((e=>{this.openJsonModal(e.dashboard)})):this.openJsonModal(e)})):s?(0,E.i)().post("/api/dashboards/trim",{dashboard:e.getSaveModelClone()}).then((e=>{this.openJsonModal(e.dashboard)})):this.openJsonModal(e.getSaveModelClone())})),H(this,"openSaveAsDialog",(e=>{const t=JSON.stringify(e,null,2),s=new Blob([t],{type:"application/json;charset=utf-8"}),a=(new Date).getTime();(0,L.saveAs)(s,`${e.title}-${a}.json`)})),H(this,"openJsonModal",(e=>{x.h$.publish(new _.Dn({props:{json:JSON.stringify(e,null,2)},component:q})),this.props.onDismiss()})),this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new R.E}render(){const{onDismiss:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:s}=this.state;return(0,w.jsxs)(w.Fragment,{children:[D||(D=(0,w.jsx)("p",{className:"share-modal-info-text",children:"Export this dashboard."})),(0,w.jsx)(n.Field,{label:"Export for sharing externally",children:(0,w.jsx)(n.Switch,{value:t,onChange:this.onShareExternallyChange})}),l.config.featureToggles.trimDefaults&&(0,w.jsx)(n.Field,{label:"Export with default values removed",children:(0,w.jsx)(n.Switch,{value:s,onChange:this.onTrimDefaultsChange})}),(0,w.jsxs)(n.Modal.ButtonRow,{children:[(0,w.jsx)(n.Button,{variant:"secondary",onClick:e,fill:"outline",children:"Cancel"}),(0,w.jsx)(n.Button,{variant:"secondary",onClick:this.onViewJson,children:"View JSON"}),(0,w.jsx)(n.Button,{variant:"primary",onClick:this.onSaveAsFile,children:"Save to file"})]})]})}}function W(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Z=[{label:"Current",value:"current"},{label:"Dark",value:"dark"},{label:"Light",value:"light"}];class Q extends a.PureComponent{constructor(e){super(e),W(this,"buildIframeHtml",(()=>{const{panel:e}=this.props,{useCurrentTimeRange:t,selectedTheme:s}=this.state,a=function(e,t,s){return'<iframe src="'+h(e,t,s)+'" width="450" height="200" frameborder="0"></iframe>'}(t,s,e);this.setState({iframeHtml:a})})),W(this,"onIframeHtmlChange",(e=>{this.setState({iframeHtml:e.currentTarget.value})})),W(this,"onUseCurrentTimeRangeChange",(()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)})),W(this,"onThemeChange",(e=>{this.setState({selectedTheme:e},this.buildIframeHtml)})),W(this,"onIframeHtmlCopy",(()=>{x.h$.emit(o.AppEvents.alertSuccess,["Content copied to clipboard"])})),W(this,"getIframeHtml",(()=>this.state.iframeHtml)),this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){this.buildIframeHtml()}render(){const{useCurrentTimeRange:e,selectedTheme:t,iframeHtml:s}=this.state,a=!!this.props.dashboard&&"now"===this.props.dashboard.time.to;return(0,w.jsxs)(w.Fragment,{children:[$||($=(0,w.jsx)("p",{className:"share-modal-info-text",children:"Generate HTML for embedding an iframe with this panel."})),(0,w.jsx)(n.Field,{label:"Current time range",description:a?"Transforms the current relative time range to an absolute time range":"",children:(0,w.jsx)(n.Switch,{id:"share-current-time-range",value:e,onChange:this.onUseCurrentTimeRangeChange})}),(0,w.jsx)(n.Field,{label:"Theme",children:(0,w.jsx)(n.RadioButtonGroup,{options:Z,value:t,onChange:this.onThemeChange})}),(0,w.jsx)(n.Field,{label:"Embed HTML",description:"The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled,  the user viewing that page need to be signed into Grafana for the graph to load.",children:(0,w.jsx)(n.TextArea,{rows:5,value:s,onChange:this.onIframeHtmlChange})}),(0,w.jsx)(n.Modal.ButtonRow,{children:(0,w.jsx)(n.ClipboardButton,{variant:"primary",getText:this.getIframeHtml,onClipboardCopy:this.onIframeHtmlCopy,children:"Copy to clipboard"})})]})}}var K,Y=s("./public/app/features/library-panels/components/AddLibraryPanelModal/AddLibraryPanelModal.tsx");const J=({panel:e,initialFolderId:t,onDismiss:s})=>e?(0,w.jsxs)(w.Fragment,{children:[K||(K=(0,w.jsx)("p",{className:"share-modal-info-text",children:"Create library panel."})),(0,w.jsx)(Y.T,{panel:e,initialFolderId:t,onDismiss:s})]}):null;const X=[],ee=[];function te(e){const{panel:t}=e,s=[{label:"Link",value:"link",component:S}];return x.Vt.isSignedIn&&s.push({label:"Snapshot",value:"snapshot",component:A}),t?(s.push({label:"Embed",value:"embed",component:Q}),(0,i.V)(t)||s.push({label:"Library panel",value:"library_panel",component:J}),s.push(...ee)):(s.push({label:"Export",value:"export",component:G}),s.push(...X)),s}class se extends a.Component{constructor(e){var t,s,a;super(e),a=e=>{this.setState({activeTab:e.value})},(s="onSelectTab")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,this.state=function(e){const t=te(e);return{tabs:t,activeTab:t[0].value}}(e)}getTabs(){return te(this.props)}getActiveTab(){const{tabs:e,activeTab:t}=this.state;return e.find((e=>e.value===t))}renderTitle(){const{panel:e}=this.props,{activeTab:t}=this.state,s=e?"Share Panel":"Share",a=this.getTabs();return(0,w.jsx)(n.ModalTabsHeader,{title:s,icon:"share-alt",tabs:a,activeTab:t,onChangeTab:this.onSelectTab})}render(){const{dashboard:e,panel:t}=this.props,s=this.getActiveTab().component;return(0,w.jsx)(n.Modal,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss,children:(0,w.jsx)(n.TabContent,{children:(0,w.jsx)(s,{dashboard:e,panel:t,onDismiss:this.props.onDismiss})})})}}},"./public/app/features/dashboard/components/VersionHistory/index.ts":(e,t,s)=>{"use strict";s.d(t,{U$:()=>H,Cs:()=>S,Sd:()=>y,R1:()=>T,K8:()=>o});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/core/core_module.ts"),i=s("./packages/grafana-runtime/src/index.ts");class r{getHistoryList(e,t){const s=e&&e.id?e.id:void 0;return s?(0,i.getBackendSrv)().get(`api/dashboards/id/${s}/versions`,t):Promise.resolve([])}getDashboardVersion(e,t){return(0,i.getBackendSrv)().get(`api/dashboards/id/${e}/versions/${t}`)}restoreDashboard(e,t){const s=e&&e.id?e.id:void 0,n=`api/dashboards/id/${s}/restore`;return s&&(0,a.isNumber)(t)?(0,i.getBackendSrv)().post(n,{version:t}):Promise.resolve({})}}const o=new r;n.ZP.service("historySrv",r);var l=s("./node_modules/react/index.js"),c=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),d=s("./packages/grafana-ui/src/index.ts"),u=s("./node_modules/react-redux/es/index.js"),p=s("./node_modules/react-use/esm/useAsyncFn.js"),h=s("./packages/grafana-data/src/index.ts"),g=s("./public/app/core/app_events.ts");const m=e=>{const t=(0,u.useSelector)((e=>e.dashboard.getModel())),[s,a]=(0,p.Z)((async()=>await(async(e,t)=>await o.restoreDashboard(t,e))(e,t)),[]);return(0,l.useEffect)((()=>{if(s.value){var t;const a=i.locationService.getLocation(),n=h.locationUtil.stripBaseFromUrl(s.value.url),r=null===(t=a.state)||void 0===t?void 0:t.routeReloadCounter;i.locationService.replace(Object.assign({},a,{pathname:n,state:{routeReloadCounter:r?r+1:1}})),g.Z.emit(h.AppEvents.alertSuccess,["Dashboard restored","Restored from version "+e])}}),[s,e]),{state:s,onRestoreDashboard:a}};var f=s("./node_modules/react/jsx-runtime.js");const b=({hideModal:e,version:t})=>{const{state:s,onRestoreDashboard:a}=m(t);return(0,l.useEffect)((()=>{!1===s.loading&&s.value&&e()}),[s,e]),(0,f.jsx)(d.ConfirmModal,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:e,onConfirm:a,body:(0,f.jsxs)("p",{children:["Are you sure you want to restore the dashboard to version ",t,"? All unsaved changes will be lost."]}),confirmText:`Yes, restore to version ${t}`})};var v,x;const y=({versions:e,onCheck:t})=>(0,f.jsxs)("table",{className:"filter-table gf-form-group",children:[v||(v=(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"width-4"}),(0,f.jsx)("th",{className:"width-4",children:"Version"}),(0,f.jsx)("th",{className:"width-14",children:"Date"}),(0,f.jsx)("th",{className:"width-10",children:"Updated by"}),(0,f.jsx)("th",{children:"Notes"}),(0,f.jsx)("th",{})]})})),(0,f.jsx)("tbody",{children:e.map(((e,s)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{children:(0,f.jsx)(d.Checkbox,{className:c.css`
                display: inline;
              `,checked:e.checked,onChange:s=>t(s,e.id)})}),(0,f.jsx)("td",{children:e.version}),(0,f.jsx)("td",{children:e.createdDateString}),(0,f.jsx)("td",{children:e.createdBy}),(0,f.jsx)("td",{children:e.message}),(0,f.jsx)("td",{className:"text-right",children:0===s?x||(x=(0,f.jsx)(d.Tag,{name:"Latest",colorIndex:17})):(0,f.jsx)(d.ModalsController,{children:({showModal:t,hideModal:s})=>(0,f.jsx)(d.Button,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{t(b,{version:e.version,hideModal:s})},children:"Restore"})})})]},e.id)))})]});var w,j,k;const S=({isComparing:e=!1,onClick:t=a.noop,baseVersion:s=0,newVersion:n=0,isNewLatest:i=!1})=>{const r=(0,d.useStyles)(C);return(0,f.jsxs)("h3",{className:r.header,children:[(0,f.jsx)("span",{onClick:t,className:e?"pointer":"",children:"Versions"}),e&&(0,f.jsxs)("span",{children:[w||(w=(0,f.jsx)(d.Icon,{name:"angle-right"}))," Comparing ",s," ",j||(j=(0,f.jsx)(d.Icon,{name:"arrows-h"}))," ",n," ",i&&(k||(k=(0,f.jsx)("cite",{className:"muted",children:"(Latest)"})))]})]})},C=e=>({header:c.css`
    font-size: ${e.typography.heading.h3};
    margin-bottom: ${e.spacing.lg};
  `}),T=({hasMore:e,canCompare:t,getVersions:s,getDiff:a,isLastPage:n})=>(0,f.jsxs)(d.HorizontalGroup,{children:[e&&(0,f.jsx)(d.Button,{type:"button",onClick:()=>s(!0),variant:"secondary",disabled:n,children:"Show more versions"}),(0,f.jsx)(d.Tooltip,{content:"Select two versions to start comparing",placement:"bottom",children:(0,f.jsx)(d.Button,{type:"button",disabled:t,onClick:a,icon:"code-branch",children:"Compare versions"})})]});var N=s("./node_modules/fast-json-patch/lib/duplex.js"),O=s("./node_modules/json-source-map/index.js");const I=(e,t=!0)=>{const s=(0,a.last)(e.path),n=P(s),i="remove"===e.op?e.originalValue:e.value;let r=M(e.op);return t&&(n?r+=` item ${s}`:(0,a.isArray)(i)&&!(0,a.isEmpty)(i)?r+=` ${i.length} ${s}`:r+=` ${s}`),r},P=e=>!(0,a.isNaN)((0,a.toNumber)(e)),M=e=>"add"===e?"added":"remove"===e?"deleted":"changed";var F;const A=({diff:e})=>{const t=(0,d.useStyles2)(D),s=!(0,a.isUndefined)(e.originalValue)&&!(0,a.isArray)(e.originalValue)&&!(0,a.isObject)(e.originalValue),n=!(0,a.isUndefined)(e.value)&&!(0,a.isArray)(e.value)&&!(0,a.isObject)(e.value);return(0,f.jsxs)(f.Fragment,{children:[s&&(0,f.jsx)("span",{className:t,children:String(e.originalValue)}),s&&n?F||(F=(0,f.jsx)(d.Icon,{name:"arrow-right"})):null,n&&(0,f.jsx)("span",{className:t,children:String(e.value)})]})},D=e=>c.css`
  background-color: ${e.colors.action.hover};
  border-radius: ${e.shape.borderRadius()};
  color: ${e.colors.text.primary};
  font-size: ${e.typography.body.fontSize};
  margin: 0 ${e.spacing(.5)};
  padding: ${e.spacing(.5,1)};
`,$={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},L=({diff:e,title:t})=>{const s=(0,d.useStyles)(E);return e?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.Icon,{type:"mono",name:"circle",className:s[e.op]})," ",(0,f.jsx)("span",{className:s.embolden,children:t})," ",(0,f.jsx)("span",{children:I(e,e.path.length>1)})," ",(0,f.jsx)(A,{diff:e})]}):(0,f.jsxs)("div",{className:s.withoutDiff,children:[(0,f.jsx)(d.Icon,{type:"mono",name:"circle",className:s.replace})," ",(0,f.jsx)("span",{className:s.embolden,children:t})," ",(0,f.jsx)("span",{children:I($,!1)})]})},E=e=>({embolden:c.css`
    font-weight: ${e.typography.weight.bold};
  `,add:c.css`
    color: ${e.palette.online};
  `,replace:c.css`
    color: ${e.palette.warn};
  `,move:c.css`
    color: ${e.palette.warn};
  `,copy:c.css`
    color: ${e.palette.warn};
  `,_get:c.css`
    color: ${e.palette.warn};
  `,test:c.css`
    color: ${e.palette.warn};
  `,remove:c.css`
    color: ${e.palette.critical};
  `,withoutDiff:c.css`
    margin-bottom: ${e.spacing.md};
  `}),R=({diffs:e,title:t})=>{const s=(0,d.useStyles)(_);return 1===e.length?(0,f.jsx)("div",{className:s.container,"data-testid":"diffGroup",children:(0,f.jsx)(L,{title:t,diff:e[0]})}):(0,f.jsxs)("div",{className:s.container,"data-testid":"diffGroup",children:[(0,f.jsx)(L,{title:t}),(0,f.jsx)("ul",{className:s.list,children:e.map(((e,t)=>(0,f.jsxs)("li",{className:s.listItem,children:[(0,f.jsx)("span",{children:I(e)})," ",(0,f.jsx)(A,{diff:e})]},`${(0,a.last)(e.path)}__${t}`)))})]})},_=e=>({container:c.css`
    background-color: ${e.colors.bg2};
    font-size: ${e.typography.size.md};
    margin-bottom: ${e.spacing.md};
    padding: ${e.spacing.md};
  `,list:c.css`
    margin-left: ${e.spacing.xl};
  `,listItem:c.css`
    margin-bottom: ${e.spacing.sm};
  `});var V=s("./node_modules/react-diff-viewer/lib/index.js"),B=s.n(V),z=s("./node_modules/tinycolor2/tinycolor.js"),U=s.n(z);const q=({oldValue:e,newValue:t})=>{const s=(0,d.useTheme)(),a={variables:{dark:{diffViewerBackground:s.colors.dashboardBg,diffViewerColor:s.colors.text,addedBackground:U()(s.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:U()(s.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:U()(s.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:U()(s.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:U()(s.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:U()(s.palette.redShade).setAlpha(.2).toString(),gutterBackground:s.colors.bg1,gutterBackgroundDark:s.colors.bg1,highlightBackground:U()(s.colors.bgBlue1).setAlpha(.4).toString(),highlightGutterBackground:U()(s.colors.bgBlue2).setAlpha(.2).toString(),codeFoldGutterBackground:s.colors.bg2,codeFoldBackground:s.colors.bg2,emptyLineBackground:s.colors.bg2,gutterColor:s.colors.textFaint,addedGutterColor:s.colors.text,removedGutterColor:s.colors.text,codeFoldContentColor:s.colors.textFaint,diffViewerTitleBackground:s.colors.bg2,diffViewerTitleColor:s.colors.textFaint,diffViewerTitleBorderColor:s.colors.border3}},codeFold:{fontSize:s.typography.size.sm}};return(0,f.jsx)("div",{className:c.css`
        font-size: ${s.typography.size.sm};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `,children:(0,f.jsx)(B(),{styles:a,oldValue:e,newValue:t,splitView:!1,compareMethod:V.DiffMethod.CSS,useDarkTheme:s.isDark})})},H=({baseInfo:e,newInfo:t,diffData:s,isNewLatest:n})=>{const i=((e,t)=>{const s=(0,N.compare)(e,t),n=O.stringify(e,null,2),i=O.stringify(t,null,2);return(0,a.flow)([t=>t.map((t=>{let s,r,o=0;const l=(0,a.tail)(t.path.split("/"));return"replace"===t.op&&(s=(0,a.get)(e,l),r=t.value,o=i.pointers[t.path].value.line),"add"===t.op&&(r=t.value,o=i.pointers[t.path].value.line),"remove"===t.op&&(s=(0,a.get)(e,l),o=n.pointers[t.path].value.line),{op:t.op,value:r,path:l,originalValue:s,startLineNumber:o}})),e=>(0,a.sortBy)(e,"startLineNumber"),e=>e.reduce(((e,t)=>{const s=t.path[0];return e[s]||(e[s]=[]),e[s].push(t),e}),{})])(s)})(s.lhs,s.rhs),r=(0,d.useStyles)(G);return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:r.spacer,children:(0,f.jsxs)(d.HorizontalGroup,{justify:"space-between",align:"center",children:[(0,f.jsxs)("div",{children:[(0,f.jsxs)("p",{className:r.versionInfo,children:[(0,f.jsxs)("strong",{children:["Version ",t.version]})," updated by ",t.createdBy," ",t.ageString," -"," ",t.message]}),(0,f.jsxs)("p",{className:(0,c.cx)(r.versionInfo,r.noMarginBottom),children:[(0,f.jsxs)("strong",{children:["Version ",e.version]})," updated by ",e.createdBy," ",e.ageString," -"," ",e.message]})]}),n&&(0,f.jsx)(d.ModalsController,{children:({showModal:t,hideModal:s})=>(0,f.jsxs)(d.Button,{variant:"destructive",icon:"history",onClick:()=>{t(b,{version:e.version,hideModal:s})},children:["Restore to version ",e.version]})})]})}),(0,f.jsx)("div",{className:r.spacer,children:Object.entries(i).map((([e,t])=>(0,f.jsx)(R,{diffs:t,title:e},e)))}),(0,f.jsx)(d.CollapsableSection,{isOpen:!1,label:"View JSON Diff",children:(0,f.jsx)(q,{oldValue:JSON.stringify(s.lhs,null,2),newValue:JSON.stringify(s.rhs,null,2)})})]})},G=e=>({spacer:c.css`
    margin-bottom: ${e.spacing.xl};
  `,versionInfo:c.css`
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
  `,noMarginBottom:c.css`
    margin-bottom: 0;
  `})},"./public/app/features/dashboard/dashgrid/PanelHeader/PanelHeaderMenuItem.tsx":(e,t,s)=>{"use strict";s.d(t,{u:()=>c});var a,n=s("./node_modules/react/index.js"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./packages/grafana-e2e-selectors/src/index.ts"),l=s("./node_modules/react/jsx-runtime.js");const c=e=>{const[t,s]=(0,n.useState)(null),c="submenu"===e.type,u="divider"===e.type,p=(0,r.useTheme)(),h=i.css`
    margin-right: ${p.spacing.sm};
    a::after {
      display: none;
    }
  `,g=i.css`
    position: absolute;
    top: 7px;
    right: ${p.spacing.xs};
    color: ${p.colors.textWeak};
  `;return u?a||(a=(0,l.jsx)("li",{className:"divider"})):(0,l.jsxs)("li",{className:c?`dropdown-submenu ${d(t)}`:void 0,ref:s,children:[(0,l.jsxs)("a",{onClick:e.onClick,href:e.href,children:[e.iconClassName&&(0,l.jsx)(r.Icon,{name:e.iconClassName,className:h}),(0,l.jsxs)("span",{className:"dropdown-item-text","aria-label":o.wl.components.Panels.Panel.headerItems(e.text),children:[e.text,c&&(0,l.jsx)(r.Icon,{name:"angle-right",className:g})]}),e.shortcut&&(0,l.jsxs)("span",{className:"dropdown-menu-item-shortcut",children:[(0,l.jsx)(r.Icon,{name:"keyboard",className:h})," ",e.shortcut]})]}),e.children]})};function d(e){if(!e)return"invisible";const t=e.parentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return 0===s.width?"invisible":t.right+s.width+10>window.innerWidth?"pull-left":"pull-right"}},"./public/app/features/dashboard/dashgrid/PanelPluginError.tsx":(e,t,s)=>{"use strict";s.d(t,{F:()=>d,X:()=>u});var a,n=s("./node_modules/react/index.js"),i=s("./public/app/types/index.ts"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./packages/grafana-data/src/index.ts"),l=s("./node_modules/react/jsx-runtime.js");class c extends n.PureComponent{constructor(e){super(e)}render(){return(0,l.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,l.jsx)(r.Alert,Object.assign({severity:i.F1.Error},this.props))})}}function d(e,t){const s=class extends n.PureComponent{render(){const t=(0,l.jsxs)(l.Fragment,{children:["Check the server startup logs for more information. ",a||(a=(0,l.jsx)("br",{})),"If this plugin was loaded from Git, then make sure it was compiled."]});return(0,l.jsx)(c,{title:`Error loading: ${e.id}`,text:t})}},i=new o.PanelPlugin(s);return i.meta=e,i.loadError=!0,i}function u(e,t){const s=class extends n.PureComponent{render(){return(0,l.jsx)(c,{title:`Panel plugin not found: ${e}`})}},a=new o.PanelPlugin(t?()=>null:s);return a.meta={id:e,name:e,sort:100,type:o.PluginType.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},a}},"./public/app/features/dashboard/dashgrid/liveTimer.ts":(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s("./packages/grafana-data/src/index.ts");function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const i=3e5;function r(e,t){const s=100*Math.ceil(e/t/100);return s>i?i:s}const o=new class{constructor(){n(this,"listeners",[]),n(this,"budget",1),n(this,"threshold",1.5),n(this,"ok",!0),n(this,"lastUpdate",Date.now()),n(this,"isLive",!1),n(this,"timeRange",void 0),n(this,"liveTimeOffset",0),n(this,"measure",(()=>{const e=Date.now();if(this.budget=(e-this.lastUpdate)/100,this.ok=this.budget<=this.threshold,this.lastUpdate=e,this.ok&&this.isLive&&this.timeRange){let t;for(const s of this.listeners){if(!s.panel.props.isInView)continue;if(e-s.last>=s.intervalMs){if(!t){const{raw:s}=this.timeRange;t={raw:s,from:(0,a.dateTime)(e-this.liveTimeOffset),to:(0,a.dateTime)(e)}}s.panel.liveTimeChanged(t),s.last=e}}}}))}setLiveTimeRange(e){var t;if(this.timeRange=e,this.isLive="now"===(null==e||null===(t=e.raw)||void 0===t?void 0:t.to),this.isLive){var s,n;const t=null===(s=a.dateMath.parse(e.raw.from,!1))||void 0===s?void 0:s.valueOf(),i=null===(n=a.dateMath.parse(e.raw.to,!0))||void 0===n?void 0:n.valueOf();this.liveTimeOffset=i-t;for(const e of this.listeners)e.intervalMs=r(this.liveTimeOffset,e.panel.props.width)}}listen(e){this.listeners.push({last:this.lastUpdate,panel:e,intervalMs:r(6e4,e.props.width)})}remove(e){this.listeners=this.listeners.filter((t=>t.panel!==e))}updateInterval(e){if(this.timeRange&&this.isLive)for(const t of this.listeners)if(t.panel===e)return void(t.intervalMs=r(this.liveTimeOffset,t.panel.props.width))}};setInterval(o.measure,100)},"./public/app/features/dashboard/services/DashboardLoaderSrv.ts":(e,t,s)=>{"use strict";s.d(t,{Bg:()=>b,pD:()=>v});var a=s("./node_modules/moment/moment.js"),n=s.n(a),i=s("./node_modules/lodash/lodash.js"),r=s.n(i),o=s("./node_modules/jquery/dist/jquery-exposed.js"),l=s.n(o),c=s("./public/app/core/utils/kbn.ts"),d=s("./packages/grafana-data/src/index.ts"),u=s("./public/app/core/services/impression_srv.ts"),p=s("./public/app/core/services/backend_srv.ts"),h=s("./public/app/features/dashboard/services/DashboardSrv.ts"),g=s("./public/app/features/plugins/datasource_srv.ts"),m=s("./packages/grafana-runtime/src/index.ts"),f=s("./public/app/core/core.ts");class b{constructor(){}_dashboardLoadFailed(e,t){return{meta:{canStar:!1,isSnapshot:t=t||!1,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:e}}}loadDashboard(e,t,s){let a;return a="script"===e?this._loadScriptedDashboard(t):"snapshot"===e?p.ae.get("/api/snapshots/"+t).catch((()=>this._dashboardLoadFailed("Snapshot not found",!0))):"ds"===e?this._loadFromDatasource(t):p.ae.getDashboardByUid(s).then((e=>{if(e.meta.isFolder)throw f.h$.emit(d.AppEvents.alertError,["Dashboard not found"]),new Error("Dashboard not found");return e})).catch((()=>this._dashboardLoadFailed("Not found",!0))),a.then((e=>(!0!==e.meta.dashboardNotFound&&u.Z.addDashboardImpression(e.dashboard.id),e))),a}_loadScriptedDashboard(e){const t="public/dashboards/"+e.replace(/\.(?!js)/,"/")+"?"+(new Date).getTime();return(0,m.getBackendSrv)().get(t).then(this._executeScript.bind(this)).then((e=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:e.data})),(e=>(console.error("Script dashboard error "+e),f.h$.emit(d.AppEvents.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard"))))}async _loadFromDatasource(e){const t=await(0,g.ak)().get(e);if(!t)return Promise.reject("can not find datasource: "+e);const s=new URLSearchParams(window.location.search),a=s.get("path");if(!a)return Promise.reject("expecting path parameter");const n={};return s.forEach(((e,t)=>{n[t]=e})),(0,m.getBackendSrv)().get(`/api/datasources/${t.id}/resources/${a}`,n).then((e=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:e})))}_executeScript(e){const t={dashboardSrv:(0,h.h4)(),datasourceSrv:(0,g.ak)()},s=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",e)(m.locationService.getSearchObject(),c.Z,d.dateMath,r(),n(),window,document,l(),l(),t);return(0,i.isFunction)(s)?new Promise((e=>{s((t=>{e({data:t})}))})):{data:s}}}let v=new b},"./public/app/features/dashboard/services/DashboardSrv.ts":(e,t,s)=>{"use strict";s.d(t,{r_:()=>h,h4:()=>g});var a=s("./public/app/core/core_module.ts"),n=s("./public/app/core/app_events.ts"),i=s("./public/app/features/dashboard/state/DashboardModel.ts"),r=s("./public/app/features/dashboard/utils/panel.ts"),o=s("./public/app/core/services/backend_srv.ts"),l=s("./public/app/features/manage-dashboards/state/actions.ts"),c=s("./public/app/types/events.ts");function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class u{constructor(){d(this,"dashboard",void 0),d(this,"onRemovePanel",(e=>{const t=this.getCurrent();t&&(0,r.WJ)(t,t.getPanelById(e),!0)})),n.h.subscribe(c.Eb,(e=>this.onRemovePanel(e.payload)))}create(e,t){return new i.f(e,t)}setCurrent(e){this.dashboard=e}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(e){var t;const s=JSON.parse(e);return(0,l.uC)({dashboard:s,folderId:(null===(t=this.dashboard)||void 0===t?void 0:t.meta.folderId)||s.folderId})}starDashboard(e,t){const s=(0,o.i)();let a;return a=t?s.delete("/api/user/stars/dashboard/"+e).then((()=>!1)):s.post("/api/user/stars/dashboard/"+e).then((()=>!0)),a.then((t=>(this.dashboard&&this.dashboard.id===e&&(this.dashboard.meta.isStarred=t),t)))}}let p;function h(e){p=e}function g(){return p}u.$inject=[],a.ZP.service("dashboardSrv",u)},"./public/app/features/dashboard/services/TimeSrv.ts":(e,t,s)=>{"use strict";s.d(t,{$t:()=>m});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./public/app/core/utils/timePicker.ts"),r=s("./public/app/core/config.ts"),o=s("./packages/grafana-ui/src/index.ts");var l=s("./packages/grafana-runtime/src/index.ts"),c=s("./public/app/types/events.ts"),d=s("./public/app/core/services/context_srv.ts"),u=s("./public/app/core/app_events.ts");function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class h{constructor(e){p(this,"time",void 0),p(this,"refreshTimer",void 0),p(this,"refresh",void 0),p(this,"previousAutoRefresh",void 0),p(this,"oldRefresh",void 0),p(this,"dashboard",void 0),p(this,"timeAtLoad",void 0),p(this,"autoRefreshBlocked",void 0),p(this,"timeRangeForUrl",(()=>{const e=this.timeRange().raw;return(0,n.isDateTime)(e.from)&&(e.from=e.from.valueOf().toString()),(0,n.isDateTime)(e.to)&&(e.to=e.to.valueOf().toString()),e})),this.contextSrv=e,this.time=(0,n.getDefaultTimeRange)().raw,this.refreshDashboard=this.refreshDashboard.bind(this),u.Z.subscribe(c.p8,(e=>{this.zoomOut(e.payload)})),u.Z.subscribe(c.Qt,(e=>{this.shiftTime(e.payload)})),document.addEventListener("visibilitychange",(()=>{this.autoRefreshBlocked&&"visible"===document.visibilityState&&(this.autoRefreshBlocked=!1,this.refreshDashboard())}))}init(e){var t,s;this.dashboard=e,this.time=e.time,this.refresh=e.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,a.cloneDeep)(this.time);const i=n.rangeUtil.convertRawToRange(this.time,null===(t=this.dashboard)||void 0===t?void 0:t.getTimezone(),null===(s=this.dashboard)||void 0===s?void 0:s.fiscalYearStartMonth);i.to.isBefore(i.from)&&this.setTime({from:i.raw.to,to:i.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(e){return this.contextSrv.minRefreshInterval?e.filter((e=>""!==e)).filter(this.contextSrv.isAllowedInterval):e}parseTime(){(0,a.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.dateTime)(this.time.from).utc()),(0,a.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.dateTime)(this.time.to).utc())}parseUrlParam(e){if(-1!==e.indexOf("now"))return e;if(8===e.length){const t=(0,n.toUtc)(e,"YYYYMMDD");if(t.isValid())return t}else if(15===e.length){const t=(0,n.toUtc)(e,"YYYYMMDDTHHmmss");if(t.isValid())return t}if(!isNaN(e)){const t=parseInt(e,10);return(0,n.toUtc)(t)}return null}getTimeWindow(e,t){const s=parseInt(e,10);let a;return a=t.match(/^\d+$/)&&parseInt(t,10)?parseInt(t,10):n.rangeUtil.intervalToMs(t),{from:(0,n.toUtc)(s-a/2),to:(0,n.toUtc)(s+a/2)}}initTimeFromUrl(){var e,t,s,a;const n=l.locationService.getSearch();n.get("time")&&n.get("time.window")&&(this.time=this.getTimeWindow(n.get("time"),n.get("time.window"))),n.get("from")&&(this.time.from=this.parseUrlParam(n.get("from"))||this.time.from),n.get("to")&&(this.time.to=this.parseUrlParam(n.get("to"))||this.time.to),n.get("to")&&-1===n.get("to").indexOf("now")&&(this.refresh=!1,this.dashboard&&(this.dashboard.refresh=!1));let i={};n.forEach((function(e,t){i[t]=e})),this.refresh=function({params:e,currentRefresh:t,isAllowedIntervalFn:s,minRefreshInterval:a,refreshIntervals:n=o.defaultIntervals}){if(!e.refresh)return t;const i=s(e.refresh),r=n.find((t=>t===e.refresh));if(!i||!r){var l;const e=a?n.find((e=>e===a)):void 0,s=null!=n&&n.length?n[0]:void 0;return null!==(l=null!=e?e:s)&&void 0!==l?l:t}return e.refresh||t}({params:i,currentRefresh:this.refresh,refreshIntervals:Array.isArray(null===(e=this.dashboard)||void 0===e||null===(t=e.timepicker)||void 0===t?void 0:t.refresh_intervals)?null===(s=this.dashboard)||void 0===s||null===(a=s.timepicker)||void 0===a?void 0:a.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:r.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const e=l.locationService.getSearch();if(e.get("left"))return;const t=this.timeRangeForUrl(),s=e.get("from"),a=e.get("to");s&&a?s===t.from&&a===t.to||(this.initTimeFromUrl(),this.setTime(this.time,!0)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(e){this.dashboard&&(this.dashboard.refresh=e),this.stopAutoRefresh();const t=l.locationService.getSearchObject();if(!e)return void(t.refresh&&l.locationService.partial({refresh:null},!0));const s=this.contextSrv.getValidInterval(e),a=n.rangeUtil.intervalToMs(s);this.refreshTimer=setTimeout((()=>{this.startNextRefreshTimer(a),this.refreshDashboard()}),a);const i=this.contextSrv.getValidInterval(e);t.refresh!==i&&l.locationService.partial({refresh:i},!0)}refreshDashboard(){var e;null===(e=this.dashboard)||void 0===e||e.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(e){this.refreshTimer=setTimeout((()=>{this.startNextRefreshTimer(e),this.contextSrv.isGrafanaVisible()?this.refreshDashboard():this.autoRefreshBlocked=!0}),e)}stopAutoRefresh(){clearTimeout(this.refreshTimer)}pauseAutoRefresh(){var e;this.previousAutoRefresh=null===(e=this.dashboard)||void 0===e?void 0:e.refresh,this.setAutoRefresh("")}resumeAutoRefresh(){this.setAutoRefresh(this.previousAutoRefresh)}setTime(e,t){var s,i;((0,a.extend)(this.time,e),(0,n.isDateTime)(e.to))?(this.oldRefresh=(null===(i=this.dashboard)||void 0===i?void 0:i.refresh)||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==(null===(s=this.dashboard)||void 0===s?void 0:s.refresh)&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null);if(!0!==t){const e=this.timeRangeForUrl(),t=l.locationService.getSearch(),s=t.get("from"),a=t.get("to");if(s&&a&&s===e.from.toString()&&a===e.to.toString())return;t.set("from",e.from.toString()),t.set("to",e.to.toString()),l.locationService.push(Object.assign({},l.locationService.getLocation(),{search:t.toString()}))}this.refreshDashboard()}timeRange(){var e,t;const s={from:(0,n.isDateTime)(this.time.from)?(0,n.dateTime)(this.time.from):this.time.from,to:(0,n.isDateTime)(this.time.to)?(0,n.dateTime)(this.time.to):this.time.to},a=this.dashboard?this.dashboard.getTimezone():void 0;return{from:n.dateMath.parse(s.from,!1,a,null===(e=this.dashboard)||void 0===e?void 0:e.fiscalYearStartMonth),to:n.dateMath.parse(s.to,!0,a,null===(t=this.dashboard)||void 0===t?void 0:t.fiscalYearStartMonth),raw:s}}zoomOut(e){const t=this.timeRange(),{from:s,to:a}=(0,i.h)(t,e);this.setTime({from:(0,n.toUtc)(s),to:(0,n.toUtc)(a)})}shiftTime(e){const t=this.timeRange(),{from:s,to:a}=(0,i.e)(e,t);this.setTime({from:(0,n.toUtc)(s),to:(0,n.toUtc)(a)})}}let g;function m(){return g||(g=new h(d.Vt)),g}},"./public/app/features/dashboard/state/DashboardModel.ts":(e,t,s)=>{"use strict";s.d(t,{f:()=>Z});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/core/constants.ts"),r=s("./public/app/core/services/context_srv.ts");function o(e){if((0,a.isArray)(e))return e.map(o);if((0,a.isPlainObject)(e)){const t={};for(const s of(0,a.keys)(e).sort())t[s]=o(e[s]);return t}return e}var l=s("./public/app/features/dashboard/state/PanelModel.ts");var c=s("./public/app/core/utils/kbn.ts"),d=s("./packages/grafana-data/src/index.ts"),u=s("./public/app/features/variables/guard.ts"),p=s("./public/app/features/variables/shared/multiOptions.ts"),h=s("./public/app/features/variables/types.ts"),g=s("./public/app/core/config.ts"),m=s("./public/app/plugins/panel/stat/module.tsx"),f=s("./public/app/plugins/panel/gauge/module.tsx"),b=s("./packages/grafana-data/src/transformations/transformers/labelsToFields.ts"),v=s("./packages/grafana-data/src/transformations/transformers/merge.ts"),x=s("./public/app/core/utils/query.ts");const y=["statistics","name"];function w(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}function j(e,t){const s=[];if(null!=e&&e.statistics&&null!=e&&e.statistics.length){e.statistic=e.statistics[0];for(const t of e.statistics.splice(1))s.push(Object.assign({},e,{statistic:t}))}for(const e of s)e.refId=(0,x.Hs)(t),delete e.statistics,t.push(e);return delete e.statistics,s}function k(e){const t=[];if(null!=e&&e.statistics&&null!=e&&e.statistics.length){for(const s of e.statistics.splice(1)){const{name:a}=e,n=w(e,y);t.push(Object.assign({},n,{statistic:s,name:`${a} - ${s}`}))}e.statistic=e.statistics[0],0!==t.length&&(e.name=`${e.name} - ${e.statistic}`),delete e.statistics}return t}function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}d.standardEditorsRegistry.setInit(n.getStandardOptionEditors),d.standardFieldConfigEditorRegistry.setInit(n.getStandardFieldConfigs);class C{constructor(e){S(this,"dashboard",void 0),this.dashboard=e}updateSchema(e){let t,s,n,r;const o=this.dashboard.schemaVersion,c=[];if(this.dashboard.schemaVersion=31,o!==this.dashboard.schemaVersion){if(o<2&&(e.services&&e.services.filter&&(this.dashboard.time=e.services.filter.time,this.dashboard.templating.list=e.services.filter.list||[]),c.push((e=>("graphite"===e.type&&(e.type="graph"),"graph"!==e.type||((0,a.isBoolean)(e.legend)&&(e.legend={show:e.legend}),e.grid&&(e.grid.min&&(e.grid.leftMin=e.grid.min,delete e.grid.min),e.grid.max&&(e.grid.leftMax=e.grid.max,delete e.grid.max)),e.y_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[0]=e.y_format,delete e.y_format),e.y2_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[1]=e.y2_format,delete e.y2_format)),e)))),o<3){let e=this.dashboard.getNextPanelId();c.push((t=>(t.id||(t.id=e,e+=1),t)))}if(o<4&&c.push((e=>("graph"!==e.type||((0,a.each)(e.aliasYAxis,((t,s)=>{e.seriesOverrides=[{alias:s,yaxis:t}]})),delete e.aliasYAxis),e))),o<6){const s=(0,a.find)(e.pulldowns,{type:"annotations"});for(s&&(this.dashboard.annotations={list:s.annotations||[]}),t=0;t<this.dashboard.templating.list.length;t++){const e=this.dashboard.templating.list[t];void 0===e.datasource&&(e.datasource=null),"filter"===e.type&&(e.type="query"),void 0===e.type&&(e.type="query"),void 0===e.allFormat&&(e.allFormat="glob")}}if(o<7&&(e.nav&&e.nav.length&&(this.dashboard.timepicker=e.nav[0]),c.push((e=>((0,a.each)(e.targets,(t=>{t.refId||(t.refId=e.getNextQueryLetter&&e.getNextQueryLetter())})),e)))),o<8&&c.push((e=>((0,a.each)(e.targets,(e=>{e.fields&&e.tags&&e.groupBy&&(e.rawQuery?(delete e.fields,delete e.fill):(e.select=(0,a.map)(e.fields,(e=>{const t=[];return t.push({type:"field",params:[e.name]}),t.push({type:e.func,params:[]}),e.mathExpr&&t.push({type:"math",params:[e.mathExpr]}),e.asExpr&&t.push({type:"alias",params:[e.asExpr]}),t})),delete e.fields,(0,a.each)(e.groupBy,(e=>{"time"===e.type&&e.interval&&(e.params=[e.interval],delete e.interval),"tag"===e.type&&e.key&&(e.params=[e.key],delete e.key)})),e.fill&&(e.groupBy.push({type:"fill",params:[e.fill]}),delete e.fill)))})),e))),o<9&&c.push((e=>{if("singlestat"!==e.type&&""!==e.thresholds)return e;if(e.thresholds){const t=e.thresholds.split(",");t.length>=3&&(t.shift(),e.thresholds=t.join(","))}return e})),o<10&&c.push((e=>("table"!==e.type||(0,a.each)(e.styles,(e=>{if(e.thresholds&&e.thresholds.length>=3){const t=e.thresholds;t.shift(),e.thresholds=t}})),e))),o<12&&(0,a.each)(this.dashboard.getVariables(),(e=>{e.refresh&&(e.refresh=1),e.refresh||(e.refresh=0),e.hideVariable?e.hide=2:e.hideLabel&&(e.hide=1)})),o<12&&c.push((e=>"graph"!==e.type?e:e.grid?(e.yaxes||(e.yaxes=[{show:e["y-axis"],min:e.grid.leftMin,max:e.grid.leftMax,logBase:e.grid.leftLogBase,format:e.y_formats[0],label:e.leftYAxisLabel},{show:e["y-axis"],min:e.grid.rightMin,max:e.grid.rightMax,logBase:e.grid.rightLogBase,format:e.y_formats[1],label:e.rightYAxisLabel}],e.xaxis={show:e["x-axis"]},delete e.grid.leftMin,delete e.grid.leftMax,delete e.grid.leftLogBase,delete e.grid.rightMin,delete e.grid.rightMax,delete e.grid.rightLogBase,delete e.y_formats,delete e.leftYAxisLabel,delete e.rightYAxisLabel,delete e["y-axis"],delete e["x-axis"]),e):e)),o<13&&c.push((e=>{if("graph"!==e.type)return e;if(!e.grid)return e;e.thresholds||(e.thresholds=[]);const t={},s={};return null!==e.grid.threshold1&&(t.value=e.grid.threshold1,e.grid.thresholdLine?(t.line=!0,t.lineColor=e.grid.threshold1Color,t.colorMode="custom"):(t.fill=!0,t.fillColor=e.grid.threshold1Color,t.colorMode="custom")),null!==e.grid.threshold2&&(s.value=e.grid.threshold2,e.grid.thresholdLine?(s.line=!0,s.lineColor=e.grid.threshold2Color,s.colorMode="custom"):(s.fill=!0,s.fillColor=e.grid.threshold2Color,s.colorMode="custom")),(0,a.isNumber)(t.value)&&((0,a.isNumber)(s.value)?t.value>s.value?(t.op=s.op="lt",e.thresholds.push(t),e.thresholds.push(s)):(t.op=s.op="gt",e.thresholds.push(t),e.thresholds.push(s)):(t.op="gt",e.thresholds.push(t))),delete e.grid.threshold1,delete e.grid.threshold1Color,delete e.grid.threshold2,delete e.grid.threshold2Color,delete e.grid.thresholdLine,e})),o<14&&(this.dashboard.graphTooltip=e.sharedCrosshair?1:0),o<16&&this.upgradeToGridLayout(e),o<17&&c.push((e=>{if(e.minSpan){const s=i.cz/e.minSpan,n=(t=i.cz,Array.from(new Array(t+1),((e,t)=>t)).filter((e=>t%e==0)));e.maxPerRow=n[(0,a.findIndex)(n,(e=>e>s))-1]}var t;return delete e.minSpan,e})),o<18&&c.push((e=>(e["options-gauge"]&&(e.options=e["options-gauge"],e.options.valueOptions={unit:e.options.unit,stat:e.options.stat,decimals:e.options.decimals,prefix:e.options.prefix,suffix:e.options.suffix},e.options.thresholds&&e.options.thresholds.reverse(),delete e.options.options,delete e.options.unit,delete e.options.stat,delete e.options.decimals,delete e.options.prefix,delete e.options.suffix,delete e["options-gauge"]),e))),o<19&&c.push((e=>(e.links&&(0,a.isArray)(e.links)&&(e.links=e.links.map(O)),e))),o<20){const e=e=>Object.assign({},e,{url:I(e.url)});c.push((t=>(t.options&&t.options.dataLinks&&(0,a.isArray)(t.options.dataLinks)&&(t.options.dataLinks=t.options.dataLinks.map(e)),t.options&&t.options.fieldOptions&&t.options.fieldOptions.defaults&&(t.options.fieldOptions.defaults.links&&(0,a.isArray)(t.options.fieldOptions.defaults.links)&&(t.options.fieldOptions.defaults.links=t.options.fieldOptions.defaults.links.map(e)),t.options.fieldOptions.defaults.title&&(t.options.fieldOptions.defaults.title=I(t.options.fieldOptions.defaults.title))),t)))}if(o<21){const e=e=>Object.assign({},e,{url:e.url.replace(/__series.labels/g,"__field.labels")});c.push((t=>(t.options&&t.options.dataLinks&&(0,a.isArray)(t.options.dataLinks)&&(t.options.dataLinks=t.options.dataLinks.map(e)),t.options&&t.options.fieldOptions&&t.options.fieldOptions.defaults&&t.options.fieldOptions.defaults.links&&(0,a.isArray)(t.options.fieldOptions.defaults.links)&&(t.options.fieldOptions.defaults.links=t.options.fieldOptions.defaults.links.map(e)),t)))}if(o<22&&c.push((e=>("table"!==e.type||(0,a.each)(e.styles,(e=>{e.align="auto"})),e))),o<23)for(const e of this.dashboard.templating.list){if(!(0,u.U4)(e))continue;const{multi:t,current:s}=e;e.current=(0,p.x)(s,t)}if(o<24&&c.push((e=>{const t="table"===e.type;if(t&&!e.styles)return e;const s="table2"===e.table;return!t||s||(e.type=t?"table-old":"table"),e})),o<26&&c.push((e=>"text2"===e.type?(e.type="text",delete e.options.angular,e):e)),o<27)for(const e of this.dashboard.templating.list){var d,x;(0,u.VC)(e)&&(e.hide!==h.bU.dontHide&&e.hide!==h.bU.hideLabel||(e.type="textbox"),e.current={selected:!0,text:null!==(d=e.query)&&void 0!==d?d:"",value:null!==(x=e.query)&&void 0!==x?x:""},e.options=[e.current])}if(o<28){c.push((e=>"singlestat"===e.type?function(e){var t;if(g.vc.panels["grafana-singlestat-panel"])return e.type="grafana-singlestat-panel",e;let s=!1;e.changePlugin||(s=!0,e=new l.r(e));e.plugin={angularPanelCtrl:{}},null!==(t=e.gauge)&&void 0!==t&&t.show?(f.plugin.meta=g.vc.panels.gauge,e.changePlugin(f.plugin)):(m.plugin.meta=g.vc.panels.stat,e.changePlugin(m.plugin));if(s)return e.getSaveModel();return e}(e):e));for(const e of this.dashboard.templating.list)e.tags&&delete e.tags,e.tagsQuery&&delete e.tagsQuery,e.tagValuesQuery&&delete e.tagValuesQuery,e.useTags&&delete e.useTags}if(o<29)for(const e of this.dashboard.templating.list){var y;"query"===e.type&&(1!==e.refresh&&2!==e.refresh&&(e.refresh=1),null!==(y=e.options)&&void 0!==y&&y.length&&(e.options=[]))}if(o<30&&(c.push(M),c.push(D)),o<31&&c.push((e=>{if(e.transformations)for(const t of e.transformations)if(t.id===b.r.id)return P(e,b.r.id,{id:v.R.id,options:{}});return e})),0!==c.length)for(s=0;s<this.dashboard.panels.length;s++)for(n=0;n<c.length;n++)if(this.dashboard.panels[s]=c[n].call(this,this.dashboard.panels[s]),this.dashboard.panels[s].panels)for(r=0;r<this.dashboard.panels[s].panels.length;r++)this.dashboard.panels[s].panels[r]=c[n].call(this,this.dashboard.panels[s].panels[r])}}migrateCloudWatchQueries(){for(const e of this.dashboard.panels)for(const t of e.targets)if(F(t)){const s=j(t,[...e.targets]);for(const t of s)e.targets.push(t)}for(const t of this.dashboard.annotations.list)if((e=t).hasOwnProperty("dimensions")&&e.hasOwnProperty("namespace")&&e.hasOwnProperty("region")&&e.hasOwnProperty("prefixMatching")&&e.hasOwnProperty("statistics")){const e=k(t);for(const t of e)this.dashboard.annotations.list.push(t)}var e}upgradeToGridLayout(e){let t=0;const s=i.cz/12;let n=(0,a.max)((0,a.flattenDeep)((0,a.map)(e.rows,(e=>(0,a.map)(e.panels,"id")))))+1;if(!e.rows)return;const r=(0,a.some)(e.rows,(e=>e.collapse||e.showTitle||e.repeat));for(const a of e.rows){if(a.repeatIteration)continue;const e=T(a.height||i.b0),o={};let c;r&&(o.id=n,o.type="row",o.title=a.title,o.collapsed=a.collapse,o.repeat=a.repeat,o.panels=[],o.gridPos={x:0,y:t,w:i.cz,h:e},c=new l.r(o),n++,t++);const d=new N(e,i.cz,t);for(const n of a.panels){n.span=n.span||i.kh,n.minSpan&&(n.minSpan=Math.min(i.cz,i.cz/12*n.minSpan));const a=Math.floor(n.span)*s,r=n.height?T(n.height):e,u=d.getPanelPosition(r,a);t=d.yPos,n.gridPos={x:u.x,y:t+u.y,w:a,h:r},d.addPanel(n.gridPos),delete n.span,c&&o.collapsed?c.panels.push(n):this.dashboard.panels.push(new l.r(n))}c&&this.dashboard.panels.push(c),c&&o.collapsed||(t+=e)}}}function T(e){(0,a.isString)(e)&&(e=parseInt(e.replace("px",""),10)),e<i.AV&&(e=i.AV);return Math.ceil(e/(i.K3+i.hD))}class N{constructor(e,t=i.cz,s=0){S(this,"area",void 0),S(this,"yPos",void 0),S(this,"height",void 0),this.area=new Array(t).fill(0),this.yPos=s,this.height=e}reset(){this.area.fill(0)}addPanel(e){for(let t=e.x;t<e.x+e.w;t++)(!this.area[t]||e.y+e.h-this.yPos>this.area[t])&&(this.area[t]=e.y+e.h-this.yPos);return this.area}getPanelPosition(e,t,s=!1){let n,i,r;for(let e=this.area.length-1;e>=0&&this.height-this.area[e]>0;e--)if(void 0===i)i=e;else{if(!(e<this.area.length-1&&this.area[e]<=this.area[e+1]))break;n=e}if(!(void 0!==n&&void 0!==i&&i-n>=t-1))return s?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(e,t,!0));r={x:n,y:(0,a.max)(this.area.slice(n))};return r}}function O(e){let t=e.url;return!t&&e.dashboard&&(t=`dashboard/db/${c.Z.slugifyForUrl(e.dashboard)}`),!t&&e.dashUri&&(t=`dashboard/${e.dashUri}`),t||(t="/"),e.keepTime&&(t=d.urlUtil.appendQueryToUrl(t,`$${d.DataLinkBuiltInVars.keepTime}`)),e.includeVars&&(t=d.urlUtil.appendQueryToUrl(t,`$${d.DataLinkBuiltInVars.includeVars}`)),e.params&&(t=d.urlUtil.appendQueryToUrl(t,e.params)),{url:t,title:e.title,targetBlank:e.targetBlank}}function I(e){return e.replace(/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g,((e,t,s,a,n,i)=>t?"__series.name":s?"${__series.name}":a?"__value.time":n?"__field.name":i?"${__field.name}":e))}function P(e,t,s){if(e.transformations){const a=[];for(const n of e.transformations)a.push(n),n.id===t&&a.push(Object.assign({},s));e.transformations=a}return e}function M(e){const t=e.fieldConfig;if(!t)return e;if(t.defaults&&(t.defaults.mappings=A(t.defaults.mappings,t.defaults.thresholds)),Array.isArray(t.overrides))for(const e of t.overrides)for(const t of e.properties)"mappings"===t.id&&(t.value=A(t.value));return e}function F(e){return e.hasOwnProperty("dimensions")&&e.hasOwnProperty("namespace")&&e.hasOwnProperty("region")&&e.hasOwnProperty("statistics")}function A(e,t){if(!e)return;const s={type:d.MappingType.ValueToText,options:{}},a=[];for(const n of e){if(n.type&&n.options){n.type===d.MappingType.ValueToText?s.options=Object.assign({},s.options,n.options):a.push(n);continue}let e;const i=parseFloat(n.text);if(t&&!isNaN(i)){const s=(0,d.getActiveThreshold)(i,t.steps);s&&s.color&&(e=s.color)}switch(n.type){case 1:null!=n.value&&("null"===n.value?a.push({type:d.MappingType.SpecialValue,options:{match:d.SpecialValueMatch.Null,result:{text:n.text,color:e}}}):s.options[String(n.value)]={text:n.text,color:e});break;case 2:a.push({type:d.MappingType.RangeToText,options:{from:+n.from,to:+n.to,result:{text:n.text,color:e}}})}}return Object.keys(s.options).length>0&&a.unshift(s),a}function D(e){return"timeseries"!==e.type&&"xychart"!==e.type||e.options.tooltipOptions&&(e.options=Object.assign({},e.options,{tooltip:e.options.tooltipOptions}),delete e.options.tooltipOptions),e}var $=s("./public/app/types/index.ts"),L=s("./public/app/features/variables/state/selectors.ts"),E=s("./public/app/features/variables/adapters.ts"),R=s("./public/app/features/variables/state/actions.ts"),_=s("./public/app/store/store.ts"),V=s("./public/app/features/variables/utils.ts"),B=s("./public/app/types/events.ts"),z=s("./public/app/features/dashboard/services/TimeSrv.ts"),U=s("./public/app/features/dashboard/state/index.ts");const q=new Set(["gridPos","title","description","transparent"]);function H(e,t){return null==e&&(t===1/0||t===-1/0||null==t)||(null==t&&(e===1/0||e===-1/0||null==e)||void 0)}function G(e){let t=0;for(const s of e)for(const e of s)e.id>t&&(t=e.id);return t+1}function W(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Z{constructor(e,t,s=L.ng){var n,i,r,o,c,u,p,h,g,m,f;W(this,"id",void 0),W(this,"uid",void 0),W(this,"title",void 0),W(this,"autoUpdate",void 0),W(this,"description",void 0),W(this,"tags",void 0),W(this,"style",void 0),W(this,"timezone",void 0),W(this,"editable",void 0),W(this,"graphTooltip",void 0),W(this,"time",void 0),W(this,"liveNow",void 0),W(this,"originalTime",void 0),W(this,"timepicker",void 0),W(this,"templating",void 0),W(this,"originalTemplating",void 0),W(this,"annotations",void 0),W(this,"refresh",void 0),W(this,"snapshot",void 0),W(this,"schemaVersion",void 0),W(this,"version",void 0),W(this,"revision",void 0),W(this,"links",void 0),W(this,"gnetId",void 0),W(this,"panels",void 0),W(this,"panelInEdit",void 0),W(this,"panelInView",void 0),W(this,"fiscalYearStartMonth",void 0),W(this,"hasChangesThatAffectsAllPanels",void 0),W(this,"iteration",void 0),W(this,"events",void 0),W(this,"getVariables",(()=>this.getVariablesFromState())),this.getVariablesFromState=s,e||(e={}),this.events=new d.EventBusSrv,this.id=e.id||null,this.uid=e.uid||null,this.revision=e.revision,this.title=null!==(n=e.title)&&void 0!==n?n:"No Title",this.autoUpdate=e.autoUpdate,this.description=e.description,this.tags=null!==(i=e.tags)&&void 0!==i?i:[],this.style=null!==(r=e.style)&&void 0!==r?r:"dark",this.timezone=null!==(o=e.timezone)&&void 0!==o?o:"",this.editable=!1!==e.editable,this.graphTooltip=e.graphTooltip||0,this.time=null!==(c=e.time)&&void 0!==c?c:{from:"now-6h",to:"now"},this.timepicker=null!==(u=e.timepicker)&&void 0!==u?u:{},this.liveNow=Boolean(e.liveNow),this.templating=this.ensureListExist(e.templating),this.annotations=this.ensureListExist(e.annotations),this.refresh=e.refresh,this.snapshot=e.snapshot,this.schemaVersion=null!==(p=e.schemaVersion)&&void 0!==p?p:0,this.fiscalYearStartMonth=null!==(h=e.fiscalYearStartMonth)&&void 0!==h?h:0,this.version=null!==(g=e.version)&&void 0!==g?g:0,this.links=null!==(m=e.links)&&void 0!==m?m:[],this.gnetId=e.gnetId||null,this.panels=(0,a.map)(null!==(f=e.panels)&&void 0!==f?f:[],(e=>new l.r(e))),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(t),this.updateSchema(e),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.hasChangesThatAffectsAllPanels=!1}addBuiltInAnnotationQuery(){let e=!1;for(const t of this.annotations.list)if(1===t.builtIn){e=!0;break}e||this.annotations.list.unshift({datasource:"-- Grafana --",name:"Annotations & Alerts",type:"dashboard",iconColor:n.DEFAULT_ANNOTATION_COLOR,enable:!0,hide:!0,builtIn:1})}initMeta(e){(e=e||{}).canShare=!1!==e.canShare,e.canSave=!1!==e.canSave,e.canStar=!1!==e.canStar,e.canEdit=!1!==e.canEdit,e.showSettings=e.canEdit,e.canMakeEditable=e.canSave&&!this.editable,e.hasUnsavedFolderChange=!1,this.editable||(e.canEdit=!1,e.canDelete=!1,e.canSave=!1),this.meta=e}getSaveModelClone(e){const t=(0,a.defaults)(e||{},{saveVariables:!0,saveTimerange:!0});let s={};for(const e in this)!Z.nonPersistedProperties[e]&&this.hasOwnProperty(e)&&(s[e]=(0,a.cloneDeep)(this[e]));return this.updateTemplatingSaveModelClone(s,t),t.saveTimerange||(s.time=this.originalTime),s.panels=this.getPanelSaveModels(),s=o(s),s.getVariables=()=>s.templating.list,s}updatePanels(e){const t=function(e,t){const s=[],n={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:s};let i=0;const r=new Map;for(let s of t){let{id:a}=s;a||(i||(i=G([e,t])),a=i++,s=Object.assign({},s,{id:a})),r.set(a,s)}for(const t of e){const e=r.get(t.id);if(!e){n.changed=!0,n.actions.remove.push(t.id),t.destroy();continue}if(r.delete(t.id),e===t){s.push(t),n.actions.noop.push(t.id);continue}if(t.type===e.type){const i=t.getSaveModel();let r=!0,o=!1;for(const[s,l]of Object.entries(e))if(!(0,a.isEqualWith)(l,i[s],H)){if(n.changed=!0,r=!1,!q.has(s)){o=!1;break}t[s]=l,o=!0}if(r){s.push(t),n.actions.noop.push(t.id);continue}if(o){s.push(t),n.actions.update.push(t.id);continue}}t.destroy();const i=new U.r(e);i.key=`${i.id}-update-${Date.now()}`,s.push(i),n.changed=!0,n.actions.replace.push(t.id)}for(const e of r.values())s.push(new U.r(e)),n.changed=!0,n.actions.add.push(e.id);return n}(this.panels,null!=e?e:[]);var s;t.changed&&(this.panels=null!==(s=t.panels)&&void 0!==s?s:[],this.sortPanelsByGridPos(),this.events.publish(new B._B));return t}getPanelSaveModels(){return this.panels.filter((e=>"add-panel"!==e.type&&(!e.repeatPanelId&&!e.repeatedByRow))).map((e=>{if(this.panelInEdit&&this.panelInEdit.editSourceId===e.id){const e=this.panelInEdit.getSaveModel();return e.id=this.panelInEdit.editSourceId,e}return e.getSaveModel()})).map((e=>(delete e.scopedVars,"row"===e.type&&e.panels&&e.panels.length>0&&(e.panels=e.panels.filter((e=>!e.repeatPanelId)).map((e=>(delete e.scopedVars,e)))),e)))}updateTemplatingSaveModelClone(e,t){const s=this.originalTemplating,n=this.getVariablesFromState();if(e.templating={list:n.map((e=>E.z.get(e.type).getSaveModel(e,t.saveVariables)))},!t.saveVariables)for(let t=0;t<e.templating.list.length;t++){const n=e.templating.list[t],i=(0,a.find)(s,{name:n.name,type:n.type});i&&("adhoc"===n.type?e.templating.list[t].filters=i.filters:e.templating.list[t].current=i.current)}}timeRangeUpdated(e){this.events.publish(new B.md(e)),(0,_.WI)((0,R.DU)(e))}startRefresh(){if(this.events.publish(new B.U5),this.panelInEdit)this.panelInEdit.refresh();else for(const e of this.panels)this.otherPanelInFullscreen(e)||e.refresh()}render(){this.events.publish(new B._z);for(const e of this.panels)e.render()}panelInitialized(e){const t=e.getQueryRunner().getLastResult();this.otherPanelInFullscreen(e)||t||e.refresh()}otherPanelInFullscreen(e){return(this.panelInEdit||this.panelInView)&&!(e.isViewing||e.isEditing)}initEditPanel(e){return(0,z.$t)().pauseAutoRefresh(),this.panelInEdit=e.getEditClone(),this.panelInEdit}initViewPanel(e){this.panelInView=e,e.setIsViewing(!0)}exitViewPanel(e){this.panelInView=void 0,e.setIsViewing(!1),this.refreshIfChangeAffectsAllPanels()}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,this.refreshIfChangeAffectsAllPanels(),(0,z.$t)().resumeAutoRefresh()}setChangeAffectsAllPanels(){(this.panelInEdit||this.panelInView)&&(this.hasChangesThatAffectsAllPanels=!0)}refreshIfChangeAffectsAllPanels(){this.hasChangesThatAffectsAllPanels&&(this.hasChangesThatAffectsAllPanels=!1,this.startRefresh())}ensureListExist(e){return e||(e={}),e.list||(e.list=[]),e}getNextPanelId(){let e=0;for(const t of this.panels)if(t.id>e&&(e=t.id),t.collapsed)for(const s of t.panels)s.id>e&&(e=s.id);return e+1}forEachPanel(e){for(let t=0;t<this.panels.length;t++)e(this.panels[t],t)}getPanelById(e){if(this.panelInEdit&&this.panelInEdit.id===e)return this.panelInEdit;for(const t of this.panels)if(t.id===e)return t;return null}canEditPanel(e){return Boolean(this.meta.canEdit&&e&&!e.repeatPanelId&&"row"!==e.type)}canEditPanelById(e){return this.canEditPanel(this.getPanelById(e))}addPanel(e){e.id=this.getNextPanelId(),this.panels.unshift(new l.r(e)),this.sortPanelsByGridPos(),this.events.publish(new B._B)}sortPanelsByGridPos(){this.panels.sort(((e,t)=>e.gridPos.y===t.gridPos.y?e.gridPos.x-t.gridPos.x:e.gridPos.y-t.gridPos.y))}clearUnsavedChanges(){for(const e of this.panels)e.configRev=0}hasUnsavedChanges(){for(const e of this.panels)if(e.hasChanged)return console.log("Panel has changed",e),!0;return!1}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;this.iteration=(this.iteration||(new Date).getTime())+1;const e=[];for(const e of this.panels)delete e.scopedVars;for(let t=0;t<this.panels.length;t++){const s=this.panels[t];s.repeat&&!s.repeatedByRow||!s.repeatPanelId||s.repeatIteration===this.iteration||e.push(s)}(0,a.pull)(this.panels,...e),e.map((e=>e.destroy())),this.sortPanelsByGridPos(),this.events.publish(new B._B)}processRepeats(){if(!this.isSnapshotTruthy()&&this.hasVariables()){this.cleanUpRepeats(),this.iteration=(this.iteration||(new Date).getTime())+1;for(let e=0;e<this.panels.length;e++){const t=this.panels[e];t.repeat&&this.repeatPanel(t,e)}this.sortPanelsByGridPos(),this.events.publish(new B._B)}}cleanUpRowRepeats(e){const t=[];for(let s=0;s<e.length;s++){const a=e[s];!a.repeat&&a.repeatPanelId&&t.push(a)}(0,a.pull)(e,...t),(0,a.pull)(this.panels,...t)}processRowRepeats(e){if(this.isSnapshotTruthy()||!this.hasVariables())return;let t=e.panels;if(!e.collapsed){const s=(0,a.findIndex)(this.panels,(t=>t.id===e.id));t=this.getRowPanels(s)}this.cleanUpRowRepeats(t);for(let e=0;e<t.length;e++){const s=t[e];if(s.repeat){const e=(0,a.findIndex)(this.panels,(e=>e.id===s.id));this.repeatPanel(s,e)}}}getPanelRepeatClone(e,t,s){var a;if(0===t)return e;const n=e.getSaveModel();n.id=this.getNextPanelId();const i=new l.r(n);return this.panels.splice(s+t,0,i),i.repeatIteration=this.iteration,i.repeatPanelId=e.id,i.repeat=void 0,(null===(a=this.panelInView)||void 0===a?void 0:a.id)===i.id&&(i.setIsViewing(!0),this.panelInView=i),i}getRowRepeatClone(e,t,s){if(0===t){if(!e.collapsed){const t=this.getRowPanels(s);e.panels=t}return e}const n=new l.r(e.getSaveModel());let i,r;return e.collapsed?(i=(0,a.cloneDeep)(e.panels),n.panels=i,r=s+t):(i=this.getRowPanels(s),n.panels=(0,a.map)(i,(e=>e.getSaveModel())),r=s+(i.length+1)*t),this.panels.splice(r,0,n),this.updateRepeatedPanelIds(n),n}repeatPanel(e,t){const s=this.getPanelRepeatVariable(e);if(!s)return;if("row"===e.type)return void this.repeatRow(e,t,s);const a=this.getSelectedVariableOptions(s),n=e.maxPerRow||4;let r=0,o=e.gridPos.y;for(let l=0;l<a.length;l++){const c=a[l];let d;d=this.getPanelRepeatClone(e,l,t),d.scopedVars=d.scopedVars||{},d.scopedVars[s.name]=c,e.repeatDirection===i.OA?(l>0&&(o+=d.gridPos.h),d.gridPos.y=o):(d.gridPos.w=Math.max(i.cz/a.length,i.cz/n),d.gridPos.x=r,d.gridPos.y=o,r+=d.gridPos.w,r+d.gridPos.w>i.cz&&(r=0,o+=d.gridPos.h))}const l=o-e.gridPos.y;if(l>0){for(let e=t+a.length;e<this.panels.length;e++)this.panels[e].gridPos.y+=l}}repeatRow(e,t,s){const n=this.getSelectedVariableOptions(s);let i=e.gridPos.y;function r(e,t){e.scopedVars=e.scopedVars||{},e.scopedVars[s.name]=t}for(let s=0;s<n.length;s++){const o=n[s],c=this.getRowRepeatClone(e,s,t);r(c,o);const d=this.getRowHeight(c),u=c.panels||[];let p;if(e.collapsed)(0,a.each)(u,((e,t)=>{r(e,o),s>0&&this.updateRepeatedPanelIds(e,!0)})),c.gridPos.y+=s,i+=s,p=t+s+1;else{const e=t+(u.length+1)*s+1;(0,a.each)(u,((t,a)=>{if(r(t,o),s>0){const n=new l.r(t);this.updateRepeatedPanelIds(n,!0),n.gridPos.y+=d*s,this.panels.splice(e+a,0,n)}})),c.panels=[],c.gridPos.y+=d*s,i+=d,p=e+u.length}if(n.length>1)for(let e=p;e<this.panels.length;e++)this.panels[e].gridPos.y+=i}}updateRepeatedPanelIds(e,t){return e.repeatPanelId=e.id,e.id=this.getNextPanelId(),e.key=`${e.id}`,e.repeatIteration=this.iteration,t?e.repeatedByRow=!0:e.repeat=void 0,e}getSelectedVariableOptions(e){let t;return t=(0,V.HY)(e)?e.options.slice(1,e.options.length):(0,a.filter)(e.options,{selected:!0}),t}getRowHeight(e){if(!e.panels||0===e.panels.length)return 0;const t=e.gridPos.y,s=(0,a.map)(e.panels,"gridPos"),n=(0,a.maxBy)(s,(e=>e.y+e.h));return n.y+n.h-t}removePanel(e){this.panels=this.panels.filter((t=>t!==e)),this.events.publish(new B._B)}removeRow(e,t){(!t&&e.collapsed||t&&!e.collapsed)&&this.toggleRow(e),this.removePanel(e)}expandRows(){for(let e=0;e<this.panels.length;e++){const t=this.panels[e];"row"===t.type&&(t.collapsed&&this.toggleRow(t))}}collapseRows(){for(let e=0;e<this.panels.length;e++){const t=this.panels[e];"row"===t.type&&(t.collapsed||this.toggleRow(t))}}isSubMenuVisible(){return this.links.length>0||(!!this.getVariables().find((e=>2!==e.hide))||!!this.annotations.list.find((e=>!0!==e.hide)))}getPanelInfoById(e){for(let t=0;t<this.panels.length;t++)if(this.panels[t].id===e)return{panel:this.panels[t],index:t};return null}duplicatePanel(e){const t=e.getSaveModel();return t.id=this.getNextPanelId(),delete t.repeat,delete t.repeatIteration,delete t.repeatPanelId,delete t.scopedVars,t.alert&&delete t.thresholds,delete t.alert,e.gridPos.x+2*e.gridPos.w<=i.cz?t.gridPos.x+=e.gridPos.w:t.gridPos.y+=e.gridPos.h,this.addPanel(t),t}formatDate(e,t){return(0,d.dateTimeFormat)(e,{format:t,timeZone:this.getTimezone()})}destroy(){this.events.removeAllListeners();for(const e of this.panels)e.destroy()}toggleRow(e){const t=(0,a.indexOf)(this.panels,e);if(e.collapsed){e.collapsed=!1;const s=(0,a.some)(e.panels,(e=>e.repeat));if(e.panels.length>0){const a=e.panels[0].gridPos.y-(e.gridPos.y+e.gridPos.h);let n=t+1,i=e.gridPos.y;for(const t of e.panels)t.gridPos.y-=a,this.panels.splice(n,0,new l.r(t)),n+=1,i=Math.max(i,t.gridPos.y+t.gridPos.h);const r=i-e.gridPos.y-1;for(let e=n;e<this.panels.length;e++)this.panels[e].gridPos.y+=r;e.panels=[],s&&this.processRowRepeats(e)}return this.sortPanelsByGridPos(),void this.events.publish(new B._B)}const s=this.getRowPanels(t);(0,a.pull)(this.panels,...s),e.panels=(0,a.map)(s,(e=>e.getSaveModel())),e.collapsed=!0,this.events.publish(new B._B)}getRowPanels(e){const t=[];for(let s=e+1;s<this.panels.length;s++){const e=this.panels[s];if("row"===e.type)break;t.push(e)}return t}on(e,t){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(e,t)}off(e,t){console.log("DashboardModel.off is deprecated"),this.events.off(e,t)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return 1===this.graphTooltip}getRelativeTime(e){return(0,d.dateTimeFormatTimeAgo)(e,{timeZone:this.getTimezone()})}isSnapshot(){return void 0!==this.snapshot}getTimezone(){var e;return this.timezone?this.timezone:null===r.Vt||void 0===r.Vt||null===(e=r.Vt.user)||void 0===e?void 0:e.timezone}updateSchema(e){const t=new C(this);t.updateSchema(e),t.migrateCloudWatchQueries()}resetOriginalTime(){this.originalTime=(0,a.cloneDeep)(this.time)}hasTimeChanged(){return!(0,a.isEqual)(this.time,this.originalTime)}resetOriginalVariables(e=!1){this.originalTemplating=e?this.cloneVariablesFrom(this.templating.list):this.cloneVariablesFrom(this.getVariablesFromState())}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState())}autoFitPanels(e,t){const s=Math.max(...this.panels.map((e=>e.gridPos.h+e.gridPos.y)));let a=e-55-20;this.meta.submenuEnabled&&!t&&(a-=50),t&&t!==$.UX.TV&&(a+=55);const n=s/Math.floor(a/(i.K3+i.hD));this.panels.forEach(((e,t)=>{e.gridPos.y=Math.round(e.gridPos.y/n)||1,e.gridPos.h=Math.round(e.gridPos.h/n)||1}))}templateVariableValueUpdated(){this.processRepeats(),this.events.emit($.RW.nq)}getPanelByUrlId(e){const t=parseInt(null!=e?e:"0",10);for(const e of this.panels)if(e.collapsed)for(const s of e.panels)if(s.id===t){this.toggleRow(e);break}return this.getPanelById(t)}toggleLegendsForAll(){const e=this.panels.filter((e=>void 0!==e.legend&&null!==e.legend)),t=e.filter((e=>e.legend.show)).length,s=t>=e.length-t;for(const t of e)t.legend.show=!s,t.render()}canAddAnnotations(){return this.meta.canEdit||this.meta.canMakeEditable}shouldUpdateDashboardPanelFromJSON(e,t){!(0,a.isEqual)(null==e?void 0:e.gridPos,null==t?void 0:t.gridPos)&&this.events.publish(new B._B)}getPanelRepeatVariable(e){return this.getVariablesFromState().find((t=>t.name===e.repeat))}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState().length>0}hasVariablesChanged(e,t){if(e.length!==t.length)return!1;const s=(0,a.map)(t,(e=>({name:e.name,type:e.type,current:(0,a.cloneDeep)(e.current),filters:(0,a.cloneDeep)(e.filters)})));return!(0,a.isEqual)(s,e)}cloneVariablesFrom(e){return e.map((e=>({name:e.name,type:e.type,current:(0,a.cloneDeep)(e.current),filters:(0,a.cloneDeep)(e.filters)})))}}W(Z,"nonPersistedProperties",{events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,hasChangesThatAffectsAllPanels:!0})},"./public/app/features/dashboard/state/PanelModel.ts":(e,t,s)=>{"use strict";s.d(t,{r:()=>v});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./public/app/core/utils/query.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/core/constants.ts"),l=s("./public/app/core/config.ts"),c=s("./public/app/features/query/state/PanelQueryRunner.ts"),d=s("./public/app/types/events.ts"),u=s("./public/app/features/dashboard/services/TimeSrv.ts"),p=s("./public/app/features/variables/getAllVariableValuesForUrl.ts"),h=s("./public/app/features/dashboard/state/getPanelOptionsWithDefaults.ts");function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,editSourceId:!0,configRev:!0,getDisplayTitle:!0,dataSupport:!0,key:!0},f={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatIteration:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,editSourceId:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0},b={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},datasource:null,title:""};class v{constructor(e){g(this,"id",void 0),g(this,"editSourceId",void 0),g(this,"gridPos",void 0),g(this,"type",void 0),g(this,"title",void 0),g(this,"alert",void 0),g(this,"scopedVars",void 0),g(this,"repeat",void 0),g(this,"repeatIteration",void 0),g(this,"repeatPanelId",void 0),g(this,"repeatDirection",void 0),g(this,"repeatedByRow",void 0),g(this,"maxPerRow",void 0),g(this,"collapsed",void 0),g(this,"panels",void 0),g(this,"transformations",void 0),g(this,"datasource",null),g(this,"thresholds",void 0),g(this,"pluginVersion",void 0),g(this,"snapshotData",void 0),g(this,"timeFrom",void 0),g(this,"timeShift",void 0),g(this,"hideTimeOverride",void 0),g(this,"maxDataPoints",void 0),g(this,"interval",void 0),g(this,"description",void 0),g(this,"links",void 0),g(this,"libraryPanel",void 0),g(this,"isViewing",!1),g(this,"isEditing",!1),g(this,"isInView",!1),g(this,"configRev",0),g(this,"hasRefreshed",void 0),g(this,"cacheTimeout",void 0),g(this,"cachedPluginOptions",{}),g(this,"legend",void 0),g(this,"plugin",void 0),g(this,"key",void 0),g(this,"events",void 0),g(this,"queryRunner",void 0),this.events=new r.EventBusSrv,this.restoreModel(e),this.replaceVariables=this.replaceVariables.bind(this),this.key=this.id?`${this.id}`:`panel-${Math.floor(1e5*Math.random())}`}restoreModel(e){for(const t in this)!m[t]&&this.hasOwnProperty(t)&&(e[t]||"function"!=typeof this[t]&&"symbol"!=typeof this[t]&&delete this[t]);for(const t in e)this[t]=e[t];(0,a.defaultsDeep)(this,(0,a.cloneDeep)(b)),this.ensureQueryIds()}ensureQueryIds(){if(this.targets&&(0,a.isArray)(this.targets))for(const e of this.targets)e.refId||(e.refId=(0,i.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(e){this.options=e,this.configRev++,this.events.publish(new d.Wj),this.render()}updateFieldConfig(e){this.fieldConfig=e,this.configRev++,this.events.publish(new d.Wj),this.resendLastResult(),this.render()}getSaveModel(){const e={};for(const t in this)!m[t]&&this.hasOwnProperty(t)&&((0,a.isEqual)(this[t],b[t])||(e[t]=(0,a.cloneDeep)(this[t])));return void 0===e.datasource&&(e.datasource=null),e}setIsViewing(e){this.isViewing=e}updateGridPos(e){this.gridPos.x=e.x,this.gridPos.y=e.y,this.gridPos.w=e.w,this.gridPos.h=e.h}runAllPanelQueries(e,t,s,a){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.editSourceId||this.id,dashboardId:e,timezone:t,timeRange:s.timeRange,timeInfo:s.timeInfo,maxDataPoints:this.maxDataPoints||a,minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,transformations:this.transformations})}refresh(){this.hasRefreshed=!0,this.events.publish(new d.U5)}render(){this.hasRefreshed?this.events.publish(new d._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce(((e,t)=>m[t]||f[t]?e:Object.assign({},e,{[t]:this[t]})),{})}restorePanelOptions(e){const t=this.cachedPluginOptions[e];t&&(Object.keys(t.properties).map((e=>{this[e]=t.properties[e]})),this.fieldConfig=(0,h.__)(this.fieldConfig,t.fieldConfig))}applyPluginOptionDefaults(e,t){const s=(0,h.d4)({plugin:e,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:t});this.fieldConfig=s.fieldConfig,this.options=s.options}pluginLoaded(e){this.plugin=e;const t=x(e);e.onPanelMigration&&t!==this.pluginVersion&&(this.options=e.onPanelMigration(this),this.pluginVersion=t),this.applyPluginOptionDefaults(e,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const e of(0,a.keys)(this))f[e]||delete this[e];this.options={},this.fieldConfig={defaults:Object.assign({},this.fieldConfig.defaults,{custom:{}}),overrides:(0,h.aS)(this.fieldConfig.overrides,h._k)}}changePlugin(e){const t=e.meta.id,s=this.getOptionsToRemember(),a=this.fieldConfig,n=this.type,i=this.isAngularPlugin();if(this.cachedPluginOptions[n]={properties:s,fieldConfig:a},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(t),e.onPanelTypeChanged){const t=i?{angular:s}:s.options;Object.assign(this.options,e.onPanelTypeChanged(this,n,t,a))}this.type=t,this.plugin=e,this.configRev++,this.replaceVariables=this.replaceVariables.bind(this),this.applyPluginOptionDefaults(e,!0),e.onPanelMigration&&(this.pluginVersion=x(e))}updateQueries(e){var t,s,a;this.datasource=e.dataSource.default?null:e.dataSource.name,this.timeFrom=null===(t=e.timeRange)||void 0===t?void 0:t.from,this.timeShift=null===(s=e.timeRange)||void 0===s?void 0:s.shift,this.hideTimeOverride=null===(a=e.timeRange)||void 0===a?void 0:a.hide,this.interval=e.minInterval,this.maxDataPoints=e.maxDataPoints,this.targets=e.queries,this.configRev++,this.events.publish(new d.pO)}addQuery(e){(e=e||{refId:"A"}).refId=(0,i.Hs)(this.targets),this.targets.push(e),this.configRev++}changeQuery(e,t){e.refId=this.targets[t].refId,this.configRev++,this.targets=this.targets.map(((s,a)=>a===t?e:s))}getEditClone(){const e=this.getSaveModel();e.id=o.Ck,e.editSourceId=this.id;const t=new v(e);t.isEditing=!0;const s=this.getQueryRunner();return t.getQueryRunner().useLastResultFrom(s),t}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:l.ZP.theme2}}getDataSupport(){var e,t;return null!==(e=null===(t=this.plugin)||void 0===t?void 0:t.dataSupport)&&void 0!==e?e:{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new c.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return void 0!==(this.plugin&&this.plugin.angularPanelCtrl)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(e){this.transformations=e,this.resendLastResult(),this.configRev++,this.events.publish(new d.Xw)}setProperty(e,t){this[e]=t,this.configRev++,"repeat"===e&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(e,t,s){let a=this.scopedVars;t&&(a=a?Object.assign({},a,t):t);const i=(0,p.c)(a),o=r.urlUtil.toUrlParams(i),l=r.urlUtil.toUrlParams((0,u.$t)().timeRangeForUrl());return a=Object.assign({},a,{[r.DataLinkBuiltInVars.keepTime]:{text:l,value:l},[r.DataLinkBuiltInVars.includeVars]:{text:o,value:o}}),(0,n.getTemplateSrv)().replace(e,a,s)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getSavedId(){var e;return null!==(e=this.editSourceId)&&void 0!==e?e:this.id}getDisplayTitle(){return this.replaceVariables(this.title,{},"text")}}function x(e){return e&&e.meta.info.version?e.meta.info.version:l.ZP.buildInfo.version}},"./public/app/features/dashboard/state/actions.ts":(e,t,s)=>{"use strict";s.d(t,{qm:()=>p,RF:()=>g,Qk:()=>m,Yq:()=>f,$j:()=>b,fG:()=>v,PX:()=>x,Kc:()=>y,lw:()=>w,tM:()=>j});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./public/app/core/copy/appNotification.ts"),i=s("./public/app/features/plugins/state/actions.ts"),r=s("./public/app/features/dashboard/state/reducers.ts"),o=s("./public/app/core/actions/index.ts"),l=s("./public/app/features/profile/state/reducers.ts"),c=s("./public/app/features/variables/state/actions.ts"),d=s("./public/app/features/dashboard/dashgrid/PanelPluginError.tsx"),u=s("./public/app/features/dashboard/services/TimeSrv.ts");function p(e){return async t=>{const s=await(0,a.getBackendSrv)().get(`/api/dashboards/id/${e}/permissions`);t((0,r.O0)(s))}}function h(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function g(e,t,s){return async(n,i)=>{const{dashboard:r}=i(),o=[];for(const e of r.permissions){if(e.inherited)continue;const a=h(e);t===e&&(a.permission=s),o.push(a)}await(0,a.getBackendSrv)().post(`/api/dashboards/id/${e}/permissions`,{items:o}),await n(p(e))}}function m(e,t){return async(s,n)=>{const i=n().dashboard,r=[];for(const e of i.permissions)e.inherited||e===t||r.push(h(e));await(0,a.getBackendSrv)().post(`/api/dashboards/id/${e}/permissions`,{items:r}),await s(p(e))}}function f(e,t){return async(s,n)=>{const{dashboard:i}=n(),r=[];for(const e of i.permissions)e.inherited||r.push(h(e));r.push({userId:t.userId,teamId:t.teamId,role:t.role,permission:t.permission}),await(0,a.getBackendSrv)().post(`/api/dashboards/id/${e}/permissions`,{items:r}),await s(p(e))}}function b(e,t){return async s=>{await(0,a.getBackendSrv)().post("/api/dashboards/import",e),s((0,o.$l)((0,n.AT)("Dashboard Imported",t))),s((0,i.m3)())}}function v(e){return async t=>{await(0,a.getBackendSrv)().delete(`/api/dashboards/${e}`),t((0,i.m3)())}}function x(e){return async(t,s)=>{let a=e.type,n=s().plugins.panels[a];if(!n)try{n=await t((0,i.Ro)(a))}catch(e){n=(0,d.X)(a,"row"===a)}e.plugin||e.pluginLoaded(n),t((0,r.bc)({panelId:e.id,plugin:n}))}}function y(e,t){return async(s,a)=>{if(e.type===t)return;const n=a();let o=n.plugins.panels[t];o||(o=await s((0,i.Ro)(t)));const l=n.dashboard.panels[e.id].angularComponent;l&&(l.destroy(),s((0,r.o8)({panelId:e.id,angularComponent:null}))),e.changePlugin(o),s((0,r.bc)({panelId:e.id,plugin:o}))}}const w=()=>(e,t)=>{const s=t().dashboard.getModel();s&&s.destroy(),(0,u.$t)().stopAutoRefresh(),e((0,r.sG)()),e((0,c.wX)())},j=e=>t=>{t((0,l.YT)(e)),(0,u.$t)().refreshDashboard()}},"./public/app/features/dashboard/state/getPanelOptionsWithDefaults.ts":(e,t,s)=>{"use strict";s.d(t,{d4:()=>i,aS:()=>r,__:()=>c,_k:()=>u});var a=s("./packages/grafana-data/src/index.ts"),n=s("./node_modules/lodash/lodash.js");function i({plugin:e,currentOptions:t,currentFieldConfig:s,isAfterPluginChange:i}){const c=(0,n.mergeWith)({},e.defaults,t||{},((e,t)=>{if((0,n.isArray)(t))return t})),d=function(e,t){var s;const a=t.fieldConfigDefaults,i={defaults:(0,n.mergeWith)({},a.defaults,e?e.defaults:{},((e,t)=>{if((0,n.isArray)(t))return t})),overrides:null!==(s=null==e?void 0:e.overrides)&&void 0!==s?s:[]};o(i.defaults,"",t.fieldConfigRegistry),i.defaults.thresholds&&l(i.defaults.thresholds);i.overrides=r(i.overrides,(e=>void 0!==t.fieldConfigRegistry.getIfExists(e.id)));for(const e of i.overrides)for(const t of e.properties)"thresholds"===t.id&&l(t.value);return i}(s,e);return{options:c,fieldConfig:function(e,t,s){if(!s)return t;const n=e.fieldConfigRegistry.getIfExists(a.FieldConfigProperty.Color);if(n&&n.settings){var i;const e=n.settings,s=a.fieldColorModeRegistry.getIfExists(null===(i=t.defaults.color)||void 0===i?void 0:i.mode);if(!e.byValueSupport&&(!s||s.isByValue))return t.defaults.color={mode:a.FieldColorModeId.PaletteClassic},t;if(e.byValueSupport&&e.preferThresholdsMode&&(null==s?void 0:s.id)!==a.FieldColorModeId.Fixed&&(!s||!s.isByValue))return t.defaults.color={mode:a.FieldColorModeId.Thresholds},t;if(e.bySeriesSupport&&null!=s&&s.isByValue)return t.defaults.color={mode:a.FieldColorModeId.PaletteClassic},t}return t}(e,d,i)}}function r(e,t){return e.map((e=>{const s=e.properties.filter(t);return Object.assign({},e,{properties:s})})).filter((e=>e.properties.length>0))}function o(e,t,s){let a=!1;for(const i of Object.keys(e)){const r=e[i],l=`${t}${i}`,c=!!s.getIfExists(l);if(c)a=!0;else if((0,n.isArray)(r)||!(0,n.isObject)(r))c||(0,n.unset)(e,i);else{o(r,`${l}.`,s)||(0,n.unset)(e,i)}}return a}function l(e){e.mode||(e.mode=a.ThresholdsMode.Absolute),e.steps?e.steps.length&&(e.steps[0].value=-1/0):e.steps=[]}function c(e,t){const s={defaults:Object.assign({},e.defaults,{custom:t.defaults.custom}),overrides:[...e.overrides]};for(const e of t.overrides)for(const t of e.properties)if(d(t)){const a=s.overrides.find((t=>(0,n.isEqual)(t.matcher,e.matcher)));a?a!==e&&a.properties.push(t):s.overrides.push(e)}return s}function d(e){return e.id.startsWith("custom.")}function u(e){return!d(e)}},"./public/app/features/dashboard/state/index.ts":(e,t,s)=>{"use strict";s.d(t,{f:()=>a.f,r:()=>n.r});var a=s("./public/app/features/dashboard/state/DashboardModel.ts"),n=s("./public/app/features/dashboard/state/PanelModel.ts")},"./public/app/features/dashboard/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{O0:()=>p,sf:()=>h,jA:()=>g,rq:()=>m,dS:()=>f,Nv:()=>b,sG:()=>v,gq:()=>x,yD:()=>y,bc:()=>w,tq:()=>j,Lv:()=>k,o8:()=>S,ZP:()=>C});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./public/app/types/index.ts"),i=s("./public/app/core/constants.ts"),r=s("./public/app/core/utils/acl.ts"),o=s("./public/app/features/dashboard/components/PanelEditor/state/reducers.ts"),l=s("./public/app/features/dashboard/state/DashboardModel.ts");const c={initPhase:n.bG.NotStarted,isInitSlow:!1,getModel:()=>null,permissions:[],modifiedQueries:null,panels:{},initError:null},d=(0,a.oM)({name:"dashboard",initialState:c,reducers:{loadDashboardPermissions:(e,t)=>{e.permissions=(0,r.A)(t.payload)},dashboardInitFetching:e=>{e.initPhase=n.bG.Fetching},dashboardInitServices:e=>{e.initPhase=n.bG.Services},dashboardInitSlow:e=>{e.isInitSlow=!0},dashboardInitCompleted:(e,t)=>{e.getModel=()=>t.payload,e.initPhase=n.bG.Completed,e.isInitSlow=!1;for(const s of t.payload.panels)e.panels[s.id]={pluginId:s.type}},dashboardInitFailed:(e,t)=>{e.initPhase=n.bG.Failed,e.initError=t.payload,e.getModel=()=>new l.f({title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:e=>{e.panels={},e.initPhase=n.bG.NotStarted,e.isInitSlow=!1,e.initError=null,e.getModel=()=>null},setDashboardQueriesToUpdateOnLoad:(e,t)=>{e.modifiedQueries=t.payload},clearDashboardQueriesToUpdateOnLoad:e=>{e.modifiedQueries=null},panelModelAndPluginReady:(e,t)=>{u(e,t.payload.panelId,{plugin:t.payload.plugin})},cleanUpEditPanel:e=>{delete e.panels[i.Ck]},setPanelAngularComponent:(e,t)=>{u(e,t.payload.panelId,{angularComponent:t.payload.angularComponent})},addPanel:(e,t)=>{e.panels[t.payload.id]={pluginId:t.payload.type}}}});function u(e,t,s){e.panels[t]?Object.assign(e.panels[t],s):e.panels[t]=s}const{loadDashboardPermissions:p,dashboardInitFetching:h,dashboardInitFailed:g,dashboardInitSlow:m,dashboardInitCompleted:f,dashboardInitServices:b,cleanUpDashboard:v,setDashboardQueriesToUpdateOnLoad:x,clearDashboardQueriesToUpdateOnLoad:y,panelModelAndPluginReady:w,addPanel:j,cleanUpEditPanel:k,setPanelAngularComponent:S}=d.actions,C={dashboard:d.reducer,panelEditor:o.Kd}},"./public/app/features/dashboard/utils/loadSnapshotData.ts":(e,t,s)=>{"use strict";s.d(t,{y:()=>c});var a=s("./packages/grafana-data/src/index.ts"),n=s("./public/app/core/config.ts"),i=s("./public/app/features/query/state/runRequest.ts"),r=s("./public/app/features/query/state/DashboardQueryRunner/SnapshotWorker.ts"),o=s("./public/app/features/dashboard/utils/panel.ts"),l=s("./public/app/features/dashboard/services/TimeSrv.ts");function c(e,t){const s=(0,i.F9)(e.snapshotData),c=new r.g,d={dashboard:t,range:(0,a.getDefaultTimeRange)()},u=c.canWork(d)?c.getAnnotationsInSnapshot(t,e.id):[],p=[new a.ArrayDataFrame(u)];return{timeRange:(0,o.W1)(e,(0,l.$t)().timeRange()).timeRange,state:a.LoadingState.Done,series:(0,a.applyFieldOverrides)({data:s,fieldConfig:{defaults:{},overrides:[]},replaceVariables:e.replaceVariables,fieldConfigRegistry:e.plugin.fieldConfigRegistry,theme:n.vc.theme2,timeZone:t.getTimezone()}),annotations:p}}},"./public/app/features/dashboard/utils/panel.ts":(e,t,s)=>{"use strict";s.d(t,{WJ:()=>m,jN:()=>f,bY:()=>b,Po:()=>v,Kq:()=>x,oe:()=>y,W1:()=>w});var a=s("./public/app/core/store.ts"),n=s("./public/app/features/dashboard/state/PanelModel.ts"),i=s("./packages/grafana-data/src/index.ts"),r=s("./node_modules/lodash/lodash.js"),o=s("./public/app/core/app_events.ts"),l=s("./public/app/core/config.ts"),c=s("./packages/grafana-runtime/src/index.ts"),d=s("./public/app/core/constants.ts"),u=s("./public/app/features/dashboard/components/ShareModal/index.ts"),p=s("./public/app/types/events.ts"),h=s("./public/app/features/library-panels/components/AddLibraryPanelModal/AddLibraryPanelModal.tsx"),g=s("./public/app/features/library-panels/components/UnlinkModal/UnlinkModal.tsx");const m=(e,t,s)=>{if(!1===s)e.removePanel(t);else{const s=t.alert&&!l.ZP.featureToggles.ngalert?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,a=t.alert?"YES":void 0;o.Z.publish(new p.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:s,icon:"trash-alt",confirmText:a,yesText:"Remove",onConfirm:()=>m(e,t,!1)}))}},f=(e,t)=>{e.duplicatePanel(t)},b=e=>{let t=e;e instanceof n.r&&(t=e.getSaveModel()),a.Z.set(d.zF,JSON.stringify(t)),o.Z.emit(i.AppEvents.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},v=(e,t)=>{o.Z.publish(new p.Dn({component:u.V8,props:{dashboard:e,panel:t}}))},x=(e,t)=>{o.Z.publish(new p.Dn({component:h.c,props:{panel:t,initialFolderId:e.meta.folderId,isOpen:!0}}))},y=e=>{o.Z.publish(new p.Dn({component:g.i,props:{onConfirm:()=>{delete e.libraryPanel,e.render()},isOpen:!0}}))};function w(e,t){const s={timeInfo:"",timeRange:t};if(e.timeFrom){const a=(0,c.getTemplateSrv)().replace(e.timeFrom,e.scopedVars),n=i.rangeUtil.describeTextRange(a);if(n.invalid)return s.timeInfo="invalid time override",s;if((0,r.isString)(t.raw.from)){const e=i.dateMath.parse(n.from);s.timeInfo=n.display,s.timeRange={from:e,to:i.dateMath.parse(n.to),raw:{from:n.from,to:n.to}}}}if(e.timeShift){const t=(0,c.getTemplateSrv)().replace(e.timeShift,e.scopedVars);if(i.rangeUtil.describeTextRange(t).invalid)return s.timeInfo="invalid timeshift",s;const a="-"+t;s.timeInfo+=" timeshift "+a;const n=i.dateMath.parseDateMath(a,s.timeRange.from,!1),r=i.dateMath.parseDateMath(a,s.timeRange.to,!0);s.timeRange={from:n,to:r,raw:{from:n,to:r}}}return e.hideTimeOverride&&(s.timeInfo=""),s}},"./public/app/features/datasources/DashboardsTable.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});s("./node_modules/react/index.js");var a,n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/react/jsx-runtime.js");const r=({dashboards:e,onImport:t,onRemove:s})=>{function r(e){return e.revision!==e.importedRevision?"Update":"Re-import"}return(0,i.jsx)("table",{className:"filter-table",children:(0,i.jsx)("tbody",{children:e.map(((e,o)=>(0,i.jsxs)("tr",{children:[a||(a=(0,i.jsx)("td",{className:"width-1",children:(0,i.jsx)(n.Icon,{name:"apps"})})),(0,i.jsx)("td",{children:e.imported?(0,i.jsx)("a",{href:e.importedUrl,children:e.title}):(0,i.jsx)("span",{children:e.title})}),(0,i.jsxs)("td",{style:{textAlign:"right"},children:[e.imported?(0,i.jsx)(n.Button,{variant:"secondary",size:"sm",onClick:()=>t(e,!0),children:r(e)}):(0,i.jsx)(n.Button,{variant:"secondary",size:"sm",onClick:()=>t(e,!1),children:"Import"}),e.imported&&(0,i.jsx)(n.Button,{icon:"trash-alt",variant:"destructive",size:"sm",onClick:()=>s(e)})]})]},`${e.dashboardId}-${o}`)))})})}},"./public/app/features/datasources/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{rl:()=>i,be:()=>r,jS:()=>o,Ww:()=>l,wZ:()=>c,zT:()=>d,Dy:()=>u,Ht:()=>p,BX:()=>h,yr:()=>g,iZ:()=>f,CT:()=>b,j_:()=>v,ng:()=>x,Aq:()=>y,ZP:()=>w});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const n={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:s("./packages/grafana-data/src/index.ts").LayoutModes.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",hasFetched:!1,isLoadingDataSources:!1,dataSourceMeta:{}},i=(0,a.PH)("dataSources/dataSourceLoaded"),r=(0,a.PH)("dataSources/dataSourcesLoaded"),o=(0,a.PH)("dataSources/dataSourceMetaLoaded"),l=(0,a.PH)("dataSources/dataSourcePluginsLoad"),c=(0,a.PH)("dataSources/dataSourcePluginsLoaded"),d=(0,a.PH)("dataSources/setDataSourcesSearchQuery"),u=(0,a.PH)("dataSources/setDataSourcesLayoutMode"),p=(0,a.PH)("dataSources/setDataSourceTypeSearchQuery"),h=(0,a.PH)("dataSources/setDataSourceName"),g=(0,a.PH)("dataSources/setIsDefault"),m={testingStatus:{},loadError:null,plugin:null},f=(0,a.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),b=(0,a.PH)("dataSourceSettings/initDataSourceSettingsFailed"),v=(0,a.PH)("dataSourceSettings/testDataSourceStarting"),x=(0,a.PH)("dataSourceSettings/testDataSourceSucceeded"),y=(0,a.PH)("dataSourceSettings/testDataSourceFailed"),w={dataSources:(e=n,t)=>r.match(t)?Object.assign({},e,{hasFetched:!0,dataSources:t.payload,dataSourcesCount:t.payload.length}):i.match(t)?Object.assign({},e,{dataSource:t.payload}):d.match(t)?Object.assign({},e,{searchQuery:t.payload}):u.match(t)?Object.assign({},e,{layoutMode:t.payload}):l.match(t)?Object.assign({},e,{plugins:[],isLoadingDataSources:!0}):c.match(t)?Object.assign({},e,{plugins:t.payload.plugins,categories:t.payload.categories,isLoadingDataSources:!1}):p.match(t)?Object.assign({},e,{dataSourceTypeSearchQuery:t.payload}):o.match(t)?Object.assign({},e,{dataSourceMeta:t.payload}):h.match(t)?Object.assign({},e,{dataSource:Object.assign({},e.dataSource,{name:t.payload})}):g.match(t)?Object.assign({},e,{dataSource:Object.assign({},e.dataSource,{isDefault:t.payload})}):e,dataSourceSettings:(e=m,t)=>{return f.match(t)?Object.assign({},e,{plugin:t.payload,loadError:null}):b.match(t)?Object.assign({},e,{plugin:null,loadError:t.payload.message}):v.match(t)?Object.assign({},e,{testingStatus:{message:"Testing...",status:"info"}}):x.match(t)?Object.assign({},e,{testingStatus:{status:null===(s=t.payload)||void 0===s?void 0:s.status,message:null===(a=t.payload)||void 0===a?void 0:a.message,details:null===(n=t.payload)||void 0===n?void 0:n.details}}):y.match(t)?Object.assign({},e,{testingStatus:{status:"error",message:null===(i=t.payload)||void 0===i?void 0:i.message,details:null===(r=t.payload)||void 0===r?void 0:r.details}}):e;var s,a,n,i,r}}},"./public/app/features/dimensions/editors/ColorDimensionEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{L:()=>c});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./packages/grafana-ui/src/components/MatchersUI/utils.ts"),r=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),o=s("./node_modules/react/jsx-runtime.js");const l={label:"Fixed color",value:"_____fixed_____"},c=e=>{var t;const{value:s,context:r,onChange:c}=e,u="dark-green",p=(0,n.useStyles2)(d),h=null==s?void 0:s.field,g=Boolean(!h),m=(0,i.IX)(r.data),f=(0,i.nw)(m,h,l),b=(0,a.useCallback)((e=>{const t=e.value;if(t&&t!==l.value)c(Object.assign({},s,{field:t}));else{var a;const e=null!==(a=s.fixed)&&void 0!==a?a:u;c(Object.assign({},s,{field:void 0,fixed:e}))}}),[c,s]),v=(0,a.useCallback)((e=>{c({field:void 0,fixed:null!=e?e:u})}),[c]),x=g?l:f.find((e=>e.value===h));return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:p.container,children:[(0,o.jsx)(n.Select,{menuShouldPortal:!0,value:x,options:f,onChange:b,noOptionsMessage:"No fields found"}),g&&(0,o.jsx)("div",{className:p.picker,children:(0,o.jsx)(n.ColorPicker,{color:null!==(t=null==s?void 0:s.fixed)&&void 0!==t?t:u,onChange:v,enableNamedColors:!0})})]})})},d=e=>({container:r.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:r.css`
    padding-left: 8px;
  `})},"./public/app/features/dimensions/editors/NumberInput.tsx":(e,t,s)=>{"use strict";s.d(t,{Y:()=>o});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/react/jsx-runtime.js");function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o extends a.PureComponent{constructor(...e){super(...e),r(this,"state",{text:""}),r(this,"onBlur",(e=>{let t;e.currentTarget.value&&!isNaN(e.currentTarget.valueAsNumber)&&(t=e.currentTarget.valueAsNumber),this.props.onChange(t)})),r(this,"onChange",(e=>{this.setState({text:e.currentTarget.value})})),r(this,"onKeyPress",(e=>{"Enter"===e.key&&this.onBlur(e)}))}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(e){this.props.value!==e.value&&this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}render(){const{placeholder:e}=this.props,{text:t}=this.state;return(0,i.jsx)(n.Input,{type:"number",min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:t,onChange:this.onChange,onBlur:this.onBlur,onKeyPress:this.onKeyPress,placeholder:e})}}},"./public/app/features/dimensions/editors/TextDimensionEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{$:()=>u});var a=s("./node_modules/react/index.js"),n=s("./public/app/features/dimensions/types.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx"),o=s("./node_modules/react/jsx-runtime.js");const l=[{label:"Fixed",value:n.xy.Fixed,description:"Fixed value"},{label:"Field",value:n.xy.Field,description:"Display field value"},{label:"Template",value:n.xy.Template,description:"use template text"}],c={settings:{}},d={settings:{}},u=e=>{var t,s;const{value:u,context:p,onChange:h}=e,g=(0,a.useCallback)((e=>{h(Object.assign({},u,{mode:e}))}),[h,u]),m=(0,a.useCallback)((e=>{h(Object.assign({},u,{field:e}))}),[h,u]),f=(0,a.useCallback)((e=>{h(Object.assign({},u,{fixed:e}))}),[h,u]),b=null!==(t=null==u?void 0:u.mode)&&void 0!==t?t:n.xy.Fixed;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.InlineFieldRow,{children:(0,o.jsx)(i.InlineField,{label:"Source",labelWidth:9,grow:!0,children:(0,o.jsx)(i.RadioButtonGroup,{value:b,options:l,onChange:g,fullWidth:!0})})}),b!==n.xy.Fixed&&(0,o.jsx)(i.InlineFieldRow,{children:(0,o.jsx)(i.InlineField,{label:"Field",labelWidth:9,grow:!0,children:(0,o.jsx)(r.b,{context:p,value:null!==(s=u.field)&&void 0!==s?s:"",onChange:m,item:c})})}),b===n.xy.Fixed&&(0,o.jsx)(i.InlineFieldRow,{children:(0,o.jsx)(i.InlineField,{label:"Value",labelWidth:9,grow:!0,children:(0,o.jsx)(i.StringValueEditor,{context:p,value:null==u?void 0:u.fixed,onChange:f,item:d})})}),b===n.xy.Template&&(0,o.jsx)(i.InlineFieldRow,{children:(0,o.jsx)(i.InlineField,{label:"Template",labelWidth:9,grow:!0,children:(0,o.jsx)(i.StringValueEditor,{context:p,value:null==u?void 0:u.fixed,onChange:f,item:d})})})]})}},"./public/app/features/dimensions/editors/index.ts":(e,t,s)=>{"use strict";s.d(t,{Lm:()=>a.L,Lv:()=>S,cL:()=>I});var a=s("./public/app/features/dimensions/editors/ColorDimensionEditor.tsx"),n=s("./node_modules/react/index.js"),i=s("./packages/grafana-ui/src/index.ts"),r=(s("./packages/grafana-runtime/src/index.ts"),s("./node_modules/react/jsx-runtime.js"));var o=s("./public/app/features/dimensions/types.ts"),l=s("./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx"),c=s("./node_modules/react-window/dist/index.esm.js"),d=s("./node_modules/react-virtualized-auto-sizer/dist/index.esm.js"),u=s("./node_modules/react-inlinesvg/esm/index.js"),p=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");function h(e){const{columnIndex:t,rowIndex:s,style:a,data:n}=e,{cards:o,columnCount:l,onChange:c,folder:d}=n,p=o[t+s*l],h=(0,i.useTheme2)(),m=g(h);return(0,r.jsx)("div",{style:a,children:p&&(0,r.jsxs)("div",{className:m.card,onClick:()=>c(`${d.value}/${p.value}`),children:[d.value.includes("icons")?(0,r.jsx)(u.Z,{src:p.imgUrl,className:m.img}):(0,r.jsx)("img",{src:p.imgUrl,className:m.img}),(0,r.jsx)("h6",{className:m.text,children:p.label.substr(0,p.label.length-4)})]},p.value)})}const g=(0,i.stylesFactory)((e=>({card:p.css`
      display: inline-block;
      width: 80px;
      height: 80px;
      margin: 0.75rem;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;

      :hover {
        border-color: ${e.colors.action.hover};
        box-shadow: ${e.shadows.z2};
      }
    `,img:p.css`
      width: 50px;
      height: 50px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${e.colors.text.primary};
    `,text:p.css`
      color: ${e.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `}))),m=e=>{const{onChange:t,cards:s,currentFolder:a}=e;return(0,r.jsx)(d.Z,{defaultWidth:1920,defaultHeight:1080,children:({width:e,height:i})=>{const o=Math.floor(e/80),l=Math.ceil(s.length/o);return(0,r.jsx)(c.Ym,{width:e,height:i,columnCount:o,columnWidth:80,rowCount:l,rowHeight:80,itemData:{cards:s,columnCount:o,onChange:t,folder:a},children:(0,n.memo)(h,c.wy)})}})};var f,b=s("./public/app/features/dimensions/resource.ts"),v=s("./public/app/features/plugins/datasource_srv.ts");function x(e){const{value:t,onChange:s,mediaType:a}=e,o=("icon"===a?["img/icons/unicons","img/icons/iot"]:["img/bg"]).map((e=>({label:e,value:e}))),l=t?o.filter((e=>t.indexOf(e.value)>-1))[0]:o[0],[c,d]=(0,n.useState)(l),[p,h]=(0,n.useState)([{label:"Select",active:!0}]),[g,x]=(0,n.useState)([]),[w,j]=(0,n.useState)([]),k=(0,i.useTheme2)(),S=y(k);(0,n.useEffect)((()=>{const e=null==c?void 0:c.value;if(e){const t="icon"===a?e=>e.name.endsWith(".svg"):e=>e.name.endsWith(".png")||e.name.endsWith(".gif");(0,v.ak)().get("-- Grafana --").then((s=>{s.listFiles(e).subscribe({next:s=>{const a=[];s.forEach((s=>{if(t(s)){const t=s.name.lastIndexOf(".");a.push({value:s.name,label:s.name,search:(t?s.name.substr(0,t):s.name).toLowerCase(),imgUrl:`public/${e}/${s.name}`})}})),x(a),j(a)}})}))}}),[a,c]);const C=(0,b.t)(t);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:S.currentItem,children:[t&&(0,r.jsxs)(r.Fragment,{children:["icon"===a&&(0,r.jsx)(u.Z,{src:C,className:S.img}),"image"===a&&(0,r.jsx)("img",{src:C,className:S.img})]}),(0,r.jsx)(i.StringValueEditor,{value:null!=t?t:"",onChange:s,item:{},context:{}}),(0,r.jsx)(i.Button,{variant:"secondary",onClick:()=>s(t),children:"Apply"})]}),(0,r.jsx)(i.TabsBar,{children:p.map(((e,t)=>(0,r.jsx)(i.Tab,{label:e.label,active:e.active,onChangeTab:()=>h(p.map(((e,s)=>Object.assign({},e,{active:s===t}))))},t)))}),(0,r.jsx)(i.TabContent,{children:p[0].active&&(0,r.jsxs)("div",{className:S.tabContent,children:[(0,r.jsx)(i.Select,{options:o,onChange:d,value:c}),(0,r.jsx)(i.Input,{placeholder:"Search",onChange:e=>{let t=e.currentTarget.value;t?(t=t.toLowerCase(),j(g.filter((e=>e.search.includes(t))))):j(g)}}),w?(0,r.jsx)("div",{className:S.cardsWrapper,children:(0,r.jsx)(m,{cards:w,onChange:s,currentFolder:c})}):f||(f=(0,r.jsx)(i.Spinner,{}))]})})]})}const y=(0,i.stylesFactory)((e=>({cardsWrapper:p.css`
      height: calc(100vh - 480px);
    `,tabContent:p.css`
      margin-top: 20px;
      & > :nth-child(2) {
        margin-top: 10px;
      },
    `,currentItem:p.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      column-gap: 2px;
      margin: -18px 0px 18px 0px;
    `,img:p.css`
      width: 40px;
      height: 40px;
      fill: ${e.colors.text.primary};
    `})));var w;const j=[{label:"Fixed",value:o.Q8.Fixed,description:"Fixed value"},{label:"Field",value:o.Q8.Field,description:"Use a string field result"}],k={settings:{}},S=e=>{var t,s,a,c;const{value:d,context:u,onChange:p,item:h}=e,[g,m]=(0,n.useState)(!1),f=(0,n.useCallback)((e=>{p(Object.assign({},d,{mode:e}))}),[p,d]),b=(0,n.useCallback)((e=>{p(Object.assign({},d,{field:e}))}),[p,d]),v=(0,n.useCallback)((e=>{p(Object.assign({},d,{fixed:null!=e?e:""})),m(!1)}),[p,d]),y=(0,n.useCallback)((()=>{m(!0)}),[]),S=null!==(t=null==d?void 0:d.mode)&&void 0!==t?t:o.Q8.Fixed,C=null!==(s=null===(a=h.settings)||void 0===a?void 0:a.resourceType)&&void 0!==s?s:"icon";return(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsx)(i.Modal,{isOpen:g,title:`Select ${C}`,onDismiss:()=>m(!1),closeOnEscape:!0,children:(0,r.jsx)(x,{onChange:v,value:null==d?void 0:d.fixed,mediaType:C})}),(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Source",labelWidth:9,grow:!0,children:(0,r.jsx)(i.RadioButtonGroup,{value:S,options:j,onChange:f,fullWidth:!0})})}),S!==o.Q8.Fixed&&(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Field",labelWidth:9,grow:!0,children:(0,r.jsx)(l.b,{context:u,value:null!==(c=d.field)&&void 0!==c?c:"",onChange:b,item:k})})}),S===o.Q8.Fixed&&(0,r.jsxs)(i.InlineFieldRow,{children:[(0,r.jsx)(i.InlineField,{label:null,grow:!0,children:(0,r.jsx)(i.Input,{value:null==d?void 0:d.fixed,placeholder:"Resource URL",readOnly:!0,onClick:y})}),(0,r.jsx)(i.Button,{icon:"folder-open",variant:"secondary",onClick:y})]}),S===o.Q8.Mapping&&(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Mappings",labelWidth:9,grow:!0,children:w||(w=(0,r.jsx)("div",{children:"TODO mappings editor!"}))})})]})};var C=s("./packages/grafana-ui/src/components/MatchersUI/utils.ts"),T=s("./public/app/features/dimensions/editors/NumberInput.tsx"),N=s("./public/app/features/dimensions/scale.ts");const O={label:"Fixed value",value:"_____fixed_____"},I=e=>{const{value:t,context:s,onChange:a,item:o}=e,{settings:l}=o,c=(0,i.useStyles2)(P),d=null==t?void 0:t.field,u=Boolean(!d),p=(0,C.IX)(s.data),h=(0,C.nw)(p,d,O),g=(0,n.useMemo)((()=>(0,N.x5)(l)),[l]),m=(0,n.useCallback)((e=>{a((0,N.C)(e,g))}),[a,g]),f=(0,n.useCallback)((e=>{const s=e.value;m(s&&s!==O.value?Object.assign({},t,{field:s}):Object.assign({},t,{field:void 0}))}),[m,t]),b=(0,n.useCallback)((e=>{void 0!==e&&m(Object.assign({},t,{min:e}))}),[m,t]),v=(0,n.useCallback)((e=>{void 0!==e&&m(Object.assign({},t,{max:e}))}),[m,t]),x=(0,n.useCallback)((e=>{void 0!==e&&m(Object.assign({},t,{fixed:e}))}),[m,t]),y=null!=t?t:{},w=u?O:h.find((e=>e.value===d));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.Select,{menuShouldPortal:!0,value:w,options:h,onChange:f,noOptionsMessage:"No fields found"})}),(0,r.jsxs)("div",{className:c.range,children:[u&&(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Value",labelWidth:8,grow:!0,children:(0,r.jsx)(T.Y,Object.assign({value:y.fixed},g,{onChange:x}))})}),!u&&!g.hideRange&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Min",labelWidth:8,grow:!0,children:(0,r.jsx)(T.Y,Object.assign({value:y.min},g,{onChange:b}))})}),(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Max",labelWidth:8,grow:!0,children:(0,r.jsx)(T.Y,Object.assign({value:y.max},g,{onChange:v}))})})]})]})]})},P=e=>({range:p.css`
    padding-top: 8px;
  `});s("./public/app/features/dimensions/editors/TextDimensionEditor.tsx")},"./public/app/features/dimensions/index.ts":(e,t,s)=>{"use strict";s.d(t,{Q8:()=>a.Q8,B5:()=>a.B5,rj:()=>i.rj,PX:()=>r,t7:()=>c.t,Im:()=>c.I,W8:()=>o.W8,A:()=>o.A,Bw:()=>l});var a=s("./public/app/features/dimensions/types.ts"),n=s("./packages/grafana-data/src/index.ts"),i=s("./public/app/features/dimensions/utils.ts");function r(e,t,s){return function(e,t,s){if(!e){var a,r;const e=null!==(a=s.visualization.getColorByName(t.fixed))&&void 0!==a?a:"grey";return{isAssumed:Boolean(null===(r=t.field)||void 0===r?void 0:r.length)||!t.fixed,fixed:e,value:()=>e,get:t=>e}}const o=(0,n.getFieldColorModeForField)(e);if(!o.isByValue){const t=o.getCalculator(e,s)(0,0);return{fixed:t,value:()=>t,get:e=>t,field:e}}const l=(0,n.getScaleCalculator)(e,s);return{get:t=>{const s=e.values.get(t);return l(s).color},field:e,value:()=>l((0,i.cR)(e)).color}}((0,i.PI)(e,t.field),t,s)}var o=s("./public/app/features/dimensions/scale.ts");function l(e,t){return function(e,t){var s;let r=t.fixed;const o=null!==(s=t.mode)&&void 0!==s?s:a.xy.Fixed;if(o===a.xy.Fixed)return{isAssumed:!Boolean(r),fixed:r,value:()=>r,get:e=>r};if(o===a.xy.Template){const s=e=>`TEMPLATE[${t.fixed} // ${e}]`;return e?{field:e,get:t=>s(e.values.get(t)),value:()=>s((0,i.cR)(e))}:(r=s(""),{isAssumed:!0,fixed:r,value:()=>r,get:e=>r})}if(!e)return{isAssumed:!0,fixed:r,value:()=>r,get:e=>r};let l=t=>(0,n.formattedValueToString)(e.display(t));return{field:e,get:t=>l(e.values.get(t)),value:()=>l((0,i.cR)(e))}}((0,i.PI)(e,t.field),t)}var c=s("./public/app/features/dimensions/resource.ts")},"./public/app/features/dimensions/resource.ts":(e,t,s)=>{"use strict";s.d(t,{t:()=>i,I:()=>r});var a=s("./public/app/features/dimensions/types.ts"),n=s("./public/app/features/dimensions/utils.ts");function i(e){return e?e.indexOf(":/")>0?e:window.__grafana_public_path__+e:""}function r(e,t){var s;const r=null!==(s=t.mode)&&void 0!==s?s:a.Q8.Fixed;if(r===a.Q8.Fixed){const e=i(t.fixed);return{isAssumed:!Boolean(e),fixed:e,value:()=>e,get:t=>e}}const o=(0,n.PI)(e,t.field);if(!o){const e="";return{isAssumed:!0,fixed:e,value:()=>e,get:t=>e}}if(r===a.Q8.Mapping){const e=e=>i(`${e}`);return{field:o,get:t=>e(o.values.get(t)),value:()=>e((0,n.cR)(o))}}return{field:o,get:o.values.get,value:()=>(0,n.cR)(o)}}},"./public/app/features/dimensions/scale.ts":(e,t,s)=>{"use strict";s.d(t,{W8:()=>r,A:()=>o,x5:()=>l,C:()=>c});var a=s("./public/app/features/dimensions/index.ts"),n=s("./packages/grafana-data/src/field/scale.ts"),i=s("./public/app/features/dimensions/utils.ts");function r(e,t){return o((0,i.PI)(e,null==t?void 0:t.field),t)}function o(e,t,s){if(!e){var r,o;const e=null!==(r=t.fixed)&&void 0!==r?r:0;return{isAssumed:Boolean(null===(o=t.field)||void 0===o?void 0:o.length)||!t.fixed,fixed:e,value:()=>e,get:()=>e}}const l=(0,n.dz)(e),c=t.max-t.min;if(e.values.length<1||c<=0||l.delta<=0)return{fixed:t.min,value:()=>t.min,get:()=>t.min};let d=e=>t.min+e*c;if(s===a.B5.Quadratic){const e=Math.PI*(t.max/2)**2,s=Math.PI*(t.min/2)**2,a=e-s;d=e=>{let t=s+a*e;return 2*Math.sqrt(t/Math.PI)}}const u=t=>{const s=e.values.get(t);let a=0;return s!==-1/0&&(a=(s-l.min)/l.delta),a>1?a=1:a<0&&(a=0),d(a)};return{get:u,value:()=>u((0,i.cR)(e)),field:e}}function l(e){return e||(e={min:0,max:1}),null==e.min&&(e.min=0),null==e.max&&(e.max=1),e}function c(e,t){let{min:s,max:a}=l(t);if(e||(e={}),null==e.max&&(e.max=a),null==e.min&&(e.min=s),e.min>e.max){const t=e.max;e.max=e.min,e.min=t}return e.min<s&&(e.min=s),e.max>a&&(e.max=a),null==e.fixed&&(e.fixed=e.min+(e.max-e.min)/2),e.field||(e.fixed>a?e.fixed=a:e.fixed<s&&(e.fixed=s)),e}},"./public/app/features/dimensions/types.ts":(e,t,s)=>{"use strict";let a,n,i;s.d(t,{B5:()=>a,xy:()=>n,Q8:()=>i}),function(e){e.Linear="linear",e.Quadratic="quad"}(a||(a={})),function(e){e.Fixed="fixed",e.Field="field",e.Template="template"}(n||(n={})),function(e){e.Fixed="fixed",e.Field="field",e.Mapping="mapping"}(i||(i={}))},"./public/app/features/dimensions/utils.ts":(e,t,s)=>{"use strict";s.d(t,{FP:()=>r,pb:()=>o,Qz:()=>l,WO:()=>c,PI:()=>d,rj:()=>u,cR:()=>p});var a=s("./packages/grafana-data/src/index.ts"),n=s("./public/app/features/dimensions/index.ts"),i=s("./packages/grafana-runtime/src/index.ts");function r(e,t){if(null!=e&&e.series&&t.field)for(const s of e.series){const a=(0,n.PX)(s,t,i.config.theme2);if(!a.isAssumed||1===e.series.length)return a}return(0,n.PX)(void 0,t,i.config.theme2)}function o(e,t){if(null!=e&&e.series&&t.field)for(const s of e.series){const a=(0,n.W8)(s,t);if(!a.isAssumed||1===e.series.length)return a}return(0,n.W8)(void 0,t)}function l(e,t){if(null!=e&&e.series&&t.field)for(const s of e.series){const a=(0,n.Im)(s,t);if(!a.isAssumed||1===e.series.length)return a}return(0,n.Im)(void 0,t)}function c(e,t){if(null!=e&&e.series&&t.field)for(const s of e.series){const a=(0,n.Bw)(s,t);if(!a.isAssumed||1===e.series.length)return a}return(0,n.Bw)(void 0,t)}function d(e,t){if(e&&null!=t&&t.length)for(const s of e.fields){if(t===s.name)return s;if(t===(0,a.getFieldDisplayName)(s,e))return s}}function u(e,t){if(e&&null!=t&&t.length)for(let s=0;s<e.fields.length;s++){const n=e.fields[s];if(t===n.name)return s;if(t===(0,a.getFieldDisplayName)(n,e))return s}}function p(e){var t;const s=null===(t=e.state)||void 0===t?void 0:t.calcs;if(s){const e=s[a.ReducerID.lastNotNull];if(null!=e)return e}const n=e.values;let i=n.length-1;for(;i>=0;){const e=n.get(i--);if(null!=e)return e}}},"./public/app/features/explore/state/datasource.ts":(e,t,s)=>{"use strict";s.d(t,{zU:()=>d,eX:()=>u});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/core/utils/explore.ts"),r=s("./public/app/features/explore/state/query.ts"),o=s("./public/app/features/explore/state/time.ts"),l=s("./public/app/features/explore/state/utils.ts");const c=(0,a.PH)("explore/updateDatasourceInstance");function d(e,t,s){return async(a,i)=>{const d=i().user.orgId,{history:u,instance:p}=await(0,l.r_)(d,t),h=i().explore[e].datasourceInstance;if(a(c({exploreId:e,datasourceInstance:p,history:u})),null!=s&&s.importQueries){const t=i().explore[e].queries;await a((0,r.GJ)(e,t,h,p))}i().explore[e].isLive&&a((0,o.oz)(e,n.RefreshPicker.offOption.value)),null!=s&&s.importQueries&&a((0,r.aA)(e))}}const u=(e,t)=>{if(c.match(t)){const{datasourceInstance:s,history:a}=t.payload;return(0,i.RZ)(e.querySubscription),Object.assign({},e,{datasourceInstance:s,graphResult:null,tableResult:null,logsResult:null,queryResponse:(0,l.lp)(),loading:!1,queryKeys:[],history:a,datasourceMissing:!1})}return e}},"./public/app/features/explore/state/explorePane.ts":(e,t,s)=>{"use strict";s.d(t,{qN:()=>b,CK:()=>v,Om:()=>x,iz:()=>y});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/core/utils/explore.ts"),i=s("./public/app/features/explore/state/query.ts"),r=s("./public/app/features/explore/state/datasource.ts"),o=s("./public/app/features/explore/state/time.ts"),l=s("./public/app/features/explore/state/history.ts"),c=s("./public/app/features/explore/state/utils.ts"),d=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),u=s("./public/app/features/profile/state/selectors.ts"),p=s("./packages/grafana-runtime/src/index.ts"),h=s("./public/app/core/utils/richHistory.ts"),g=s("./public/app/features/explore/state/main.ts");const m=(0,d.PH)("explore/changeSize"),f=(0,d.PH)("explore/initializeExplore");(0,d.PH)("explore/setUrlReplaced");function b(e,{height:t,width:s}){return m({exploreId:e,height:t,width:s})}function v(e,t,s,a,n,r,l){return async(d,u)=>{let m,b=[];if((0,p.getDataSourceSrv)().getList().length>=1){const e=u().user.orgId,s=await(0,c.r_)(e,t);m=s.instance,b=s.history}d(f({exploreId:e,containerWidth:n,eventBridge:r,queries:s,range:a,originPanelId:l,datasourceInstance:m,history:b})),d((0,o.b3)({exploreId:e})),m&&d((0,i.aA)(e,{replaceUrl:!0}));const v=(0,h.ub)();d((0,g.ZU)({richHistory:v}))}}function x(e,t){return async(s,a)=>{const r=a().explore[e];if(!r.initialized)return;const l=(0,n.J5)(t),d=w(l,(0,c.D)(r)),{containerWidth:p,eventBridge:h}=r,{datasource:g,queries:m,range:f,originPanelId:b}=l,x=[];for(let e=0;e<m.length;e++){const t=m[e];x.push((0,n.fR)(t,x,e))}const y=(0,u.Z)(a().user),j=(0,u.i)(a().user),k=(0,n.vP)(f,y,j);if(d.datasource){const t=(0,n.Z8)(m);await s(v(e,g,t,k,p,h,b))}else d.range&&s((0,o.b3)({exploreId:e,rawRange:k.raw})),d.queries&&s((0,i.SE)({exploreId:e,queries:x})),(d.queries||d.range)&&s((0,i.aA)(e))}}const y=(e=(0,c.t5)(),t)=>{if(e=(0,i.Y)(e,t),e=(0,r.eX)(e,t),e=(0,o.ok)(e,t),e=(0,l.Oo)(e,t),m.match(t)){const s=t.payload.width;return Object.assign({},e,{containerWidth:s})}if(f.match(t)){const{containerWidth:s,eventBridge:a,queries:i,range:r,originPanelId:o,datasourceInstance:l,history:d}=t.payload;return Object.assign({},e,{containerWidth:s,eventBridge:a,range:r,queries:i,initialized:!0,queryKeys:(0,n.$$)(i,l),originPanelId:o,datasourceInstance:l,history:d,datasourceMissing:!l,queryResponse:(0,c.lp)(),cache:[]})}return e},w=(e,t)=>({datasource:!(0,a.isEqual)(null==t?void 0:t.datasource,null==e?void 0:e.datasource),queries:!(0,a.isEqual)(null==t?void 0:t.queries,null==e?void 0:e.queries),range:!(0,a.isEqual)((null==t?void 0:t.range)||n.UI,(null==e?void 0:e.range)||n.UI)})},"./public/app/features/explore/state/history.ts":(e,t,s)=>{"use strict";s.d(t,{fM:()=>i,u5:()=>r,ik:()=>o,Oo:()=>l});var a=s("./public/app/core/utils/richHistory.ts"),n=s("./public/app/features/explore/state/main.ts");const i=(0,s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").PH)("explore/historyUpdated"),r=(e,t,s)=>(i,r)=>{let o;"starred"===t&&(o=(0,a.VI)(r().explore.richHistory,e)),"comment"===t&&(o=(0,a.gt)(r().explore.richHistory,e,s)),"delete"===t&&(o=(0,a.y9)(r().explore.richHistory,e)),i((0,n.ZU)({richHistory:o}))},o=()=>e=>{(0,a.HK)(),e((0,n.ZU)({richHistory:[]}))},l=(e,t)=>i.match(t)?Object.assign({},e,{history:t.payload.history}):e},"./public/app/features/explore/state/main.ts":(e,t,s)=>{"use strict";s.d(t,{tl:()=>d,ZU:()=>u,WK:()=>p,Jt:()=>g,og:()=>m,IS:()=>f,bW:()=>b,YV:()=>v,m$:()=>x,ZP:()=>j});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./packages/grafana-data/src/index.ts"),i=s("./public/app/core/utils/explore.ts"),r=s("./public/app/types/explore.ts"),o=s("./public/app/features/explore/state/explorePane.ts"),l=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),c=s("./public/app/features/explore/state/utils.ts");const d=(0,l.PH)("explore/syncTimes"),u=(0,l.PH)("explore/richHistoryUpdated"),p=(0,l.PH)("explore/resetExplore"),h=(0,l.PH)("explore/splitClose"),g=(0,l.PH)("explore/cleanupPane"),m=e=>(t,s)=>{const{left:i,right:r}=s().explore,o={orgId:s().user.orgId.toString()};o.left=(0,n.serializeStateToUrlParam)((0,c.D)(i),!0),o.right=r?(0,n.serializeStateToUrlParam)((0,c.D)(r),!0):null,f.right=o.right,f.left=o.left,a.locationService.partial(Object.assign({},o),null==e?void 0:e.replace)},f={};function b(e){return async(t,s)=>{const i=s().explore[r.K.left];let o=(0,c.D)(i);if(e){var l;o={datasource:(null===(l=(0,a.getDataSourceSrv)().getInstanceSettings(e.datasourceUid))||void 0===l?void 0:l.name)||"",queries:[e.query],range:e.range||i.range}}const d=(0,n.serializeStateToUrlParam)(o,!0);a.locationService.partial({right:d},!0)}}function v(e){return(t,s)=>{t(h({itemId:e})),t(m())}}const x=(e,t)=>async s=>{const{getDataSourceSrv:n,getTimeSrv:i,getExploreUrl:r,openInNewWindow:o}=t,l=n(),c=await l.get(e.datasource),d=await r({panel:e,panelTargets:e.targets,panelDatasource:c,datasourceSrv:l,timeSrv:i()});o&&d?o(d):a.locationService.push(d)},y=(0,c.t5)(),w={syncedTimes:!1,left:y,right:void 0,richHistory:[]},j={explore:(e=w,t)=>{if(h.match(t)){const{itemId:s}=t.payload,a={left:s===r.K.left?e.right:e.left,right:void 0};return Object.assign({},e,a)}if(g.match(t)){var s;const{exploreId:a}=t.payload;return null!==(s=e[a])&&void 0!==s&&s.initialized?a===r.K.left?Object.assign({},e,{[r.K.left]:e[r.K.right],[r.K.right]:void 0}):Object.assign({},e,{[r.K.right]:void 0}):e}if(d.match(t))return Object.assign({},e,{syncedTimes:t.payload.syncedTimes});if(u.match(t))return Object.assign({},e,{richHistory:t.payload.richHistory});if(p.match(t)){const s=t.payload,a=e[r.K.left],n=e[r.K.right];return(0,i.RZ)(a.querySubscription),n&&(0,i.RZ)(n.querySubscription),s.force||!Number.isInteger(e.left.originPanelId)?w:Object.assign({},w,{left:Object.assign({},y,{queries:e.left.queries,originPanelId:e.left.originPanelId})})}if(t.payload){const{exploreId:s}=t.payload;if(void 0!==s){const a=e[s];return Object.assign({},e,{[s]:(0,o.iz)(a,t)})}}return e}}},"./public/app/features/explore/state/query.ts":(e,t,s)=>{"use strict";s.d(t,{CS:()=>H,K8:()=>X,ci:()=>W,PM:()=>M,LK:()=>ee,It:()=>G,GJ:()=>Z,sK:()=>Q,Y:()=>te,aA:()=>K,EA:()=>J,P4:()=>z,sQ:()=>V,KO:()=>Y,SE:()=>R});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),n=s("./node_modules/rxjs/dist/esm5/internal/operators/throttleTime.js"),i=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),r=s("./node_modules/rxjs/dist/esm5/internal/util/identity.js"),o=s("./packages/grafana-data/src/index.ts"),l=s("./public/app/core/utils/explore.ts"),c=s("./public/app/core/utils/richHistory.ts"),d=s("./public/app/features/profile/state/selectors.ts"),u=s("./public/app/core/utils/timePicker.ts"),p=s("./public/app/core/actions/index.ts"),h=s("./public/app/features/query/state/runRequest.ts"),g=s("./packages/grafana-runtime/src/index.ts"),m=s("./node_modules/lodash/lodash.js"),f=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),b=s("./public/app/core/logs_model.ts");const v=e=>{var t;const s=[],a=[],n=[],i=[],r=[];for(const o of e.series)switch(null===(t=o.meta)||void 0===t?void 0:t.preferredVisualisationType){case"logs":n.push(o);break;case"graph":s.push(o);break;case"trace":i.push(o);break;case"table":a.push(o);break;case"nodeGraph":r.push(o);break;default:j(o)?(s.push(o),a.push(o)):a.push(o)}return Object.assign({},e,{graphFrames:s,tableFrames:a,logsFrames:n,traceFrames:i,nodeGraphFrames:r,graphResult:null,tableResult:null,logsResult:null})},x=e=>e.graphFrames.length?Object.assign({},e,{graphResult:e.graphFrames}):Object.assign({},e,{graphResult:null}),y=e=>{if(0===e.tableFrames.length)return(0,i.of)(Object.assign({},e,{tableResult:null}));e.tableFrames.sort(((e,t)=>{const s=e.refId,a=t.refId;return s>a?1:s<a?-1:0}));return(e.tableFrames.every((e=>j(e)))?(0,i.of)(e.tableFrames).pipe(o.standardTransformers.seriesToColumnsTransformer.operator({})):(0,i.of)(e.tableFrames).pipe(o.standardTransformers.mergeTransformer.operator({}))).pipe((0,f.U)((t=>{const s=t[0];for(const t of s.fields){var a,n,i;t.display=null!==(a=t.display)&&void 0!==a?a:(0,o.getDisplayProcessor)({field:t,theme:g.config.theme2,timeZone:null!==(n=null===(i=e.request)||void 0===i?void 0:i.timezone)&&void 0!==n?n:"browser"})}return Object.assign({},e,{tableResult:s})})))};function w(e,t,s,n,r){return(0,i.of)(e).pipe((0,f.U)((e=>(0,h.zR)(e,t))),(0,f.U)(v),(0,f.U)(x),(0,f.U)(((e={})=>t=>{var s;if(0===t.logsFrames.length)return Object.assign({},t,{logsResult:null});const a=null===(s=t.request)||void 0===s?void 0:s.intervalMs,n=(0,b.aB)(t.logsFrames,a,e.absoluteRange,e.queries),i=(0,l.Oy)(e.refreshInterval),r=(0,o.sortLogsResult)(n,i),c=r.rows,d=r.series,u=Object.assign({},r,{rows:c,series:d});return Object.assign({},t,{logsResult:u})})({absoluteRange:s,refreshInterval:n,queries:r})),(0,a.z)(y))}function j(e){var t;const s=(0,m.groupBy)(e.fields,(e=>e.type));return Boolean(2===Object.keys(s).length&&1===(null===(t=s[o.FieldType.time])||void 0===t?void 0:t.length)&&s[o.FieldType.number])}var k=s("./public/app/core/copy/appNotification.ts"),S=s("./public/app/features/explore/state/main.ts"),C=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),T=s("./public/app/features/explore/state/time.ts"),N=s("./public/app/features/explore/state/history.ts"),O=s("./public/app/features/explore/state/utils.ts");const I=["datasource"];const P=(0,C.PH)("explore/addQueryRow"),M=(0,C.PH)("explore/changeQueries"),F=(0,C.PH)("explore/clearQueries"),A=(0,C.PH)("explore/cancelQueries"),D=(0,C.PH)("explore/queriesImported"),$=(0,C.PH)("explore/modifyQueries"),L=(0,C.PH)("explore/queryStoreSubscription"),E=(0,C.PH)("explore/queryStreamUpdated"),R=(0,C.PH)("explore/setQueries"),_=(0,C.PH)("changeLoadingState"),V=(0,C.PH)("explore/setPausedState"),B=(0,C.PH)("explore/scanStart"),z=(0,C.PH)("explore/scanStop"),U=(0,C.PH)("explore/addResultsToCache"),q=(0,C.PH)("explore/clearCache");function H(e,t){return(s,a)=>{const n=a().explore[e].queries,i=(0,l.Xk)(n,t);s(P({exploreId:e,index:t,query:i}))}}function G(e){return t=>{t(z({exploreId:e})),t(F({exploreId:e})),t((0,S.og)())}}function W(e){return t=>{t(z({exploreId:e})),t(A({exploreId:e})),t((0,S.og)())}}const Z=(e,t,s,a)=>async n=>{var i,r;if(!s)return void n(D({exploreId:e,queries:t}));let o=t;o=(null===(i=s.meta)||void 0===i?void 0:i.id)===(null===(r=a.meta)||void 0===r?void 0:r.id)?t.map((e=>function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,I))):a.importQueries?await a.importQueries(t,s):(0,l.Z8)();const c=(0,l.Z8)(o);n(D({exploreId:e,queries:c}))};function Q(e,t,s,a){return n=>{n($({exploreId:e,modification:t,index:a,modifier:s})),t.preventSubmit||n(K(e))}}const K=(e,t)=>(s,g)=>{s((0,T.b3)({exploreId:e}));!0===(null==t?void 0:t.preserveCache)||s(ee(e));const m=g().explore.richHistory,f=g().explore[e],{datasourceInstance:b,queries:v,containerWidth:x,isLive:y,range:j,scanning:C,queryResponse:I,querySubscription:P,history:M,refreshInterval:F,absoluteRange:A,cache:D}=f;let $;const R=(0,O.M0)(D,A);if(R)$=(0,i.of)(R).pipe((0,a.z)((e=>w(e,I,A,F,v)))).subscribe((t=>{t.error||s((0,S.og)()),s(E({exploreId:e,response:t}))}));else{if(!(0,l.z_)(v))return void s((0,S.og)({replace:null==t?void 0:t.replaceUrl}));if(!b)return;const i=null==b?void 0:b.interval;(0,l.RZ)(P);const f=null==b?void 0:b.meta.id,O={minInterval:i,maxDataPoints:x,liveStreaming:y},D=b.name,L=(0,d.Z)(g().user),R=(0,l.Zf)(e,v,O,j,C,L);let V=!0;s(_({exploreId:e,loadingState:o.LoadingState.Loading})),$=(0,h.v7)(b,R.request).pipe(y?(0,n.p)(500):r.y,(0,a.z)((e=>w(e,I,A,F,v)))).subscribe((a=>{if(!a.error&&V){const a=(0,l._Q)(M,f,v),n=(0,c.au)(m||[],f,D,v,!1,"","");s((0,N.fM)({exploreId:e,history:a})),s((0,S.ZU)({richHistory:n})),s((0,S.og)({replace:null==t?void 0:t.replaceUrl}))}if(V=!1,s(E({exploreId:e,response:a})),g().explore[e].scanning)if(a.state===o.LoadingState.Done&&0===a.series.length){const t=(0,u.e)(-1,g().explore[e].range);s((0,T.b3)({exploreId:e,absoluteRange:t})),s(K(e))}else s(z({exploreId:e}))}),(t=>{s((0,p.$l)((0,k.t_)("Query processing error",t))),s(_({exploreId:e,loadingState:o.LoadingState.Error})),console.error(t)}))}s(L({exploreId:e,querySubscription:$}))};function Y(e,t){return(s,a)=>{const n=a().explore[e].queries,i=t.map(((e,t)=>(0,l.fR)(e,n,t)));s(R({exploreId:e,queries:i})),s(K(e))}}function J(e){return(t,s)=>{t(B({exploreId:e}));const a=(0,u.e)(-1,s().explore[e].range);t((0,T.b3)({exploreId:e,absoluteRange:a})),t(K(e))}}function X(e){return(t,s)=>{const a=s().explore[e].queryResponse,n=s().explore[e].absoluteRange,i=(0,O.M7)(n);a.state===o.LoadingState.Done&&t(U({exploreId:e,cacheKey:i,queryResponse:a}))}}function ee(e){return(t,s)=>{t(q({exploreId:e}))}}const te=(e,t)=>{if(P.match(t)){const{queries:s}=e,{index:a,query:n}=t.payload,i=[...s.slice(0,a+1),Object.assign({},n),...s.slice(a+1)];return Object.assign({},e,{queries:i,queryKeys:(0,l.$$)(i,e.datasourceInstance)})}if(M.match(t)){const{queries:s}=t.payload;return Object.assign({},e,{queries:s})}if(F.match(t)){const t=(0,l.Z8)();return(0,l.RZ)(e.querySubscription),Object.assign({},e,{queries:t.slice(),graphResult:null,tableResult:null,logsResult:null,queryKeys:(0,l.$$)(t,e.datasourceInstance),queryResponse:(0,O.lp)(),loading:!1})}if(A.match(t))return(0,l.RZ)(e.querySubscription),Object.assign({},e,{loading:!1});if($.match(t)){const{queries:s}=e,{modification:a,index:n,modifier:i}=t.payload;let r;return r=void 0===n?s.map(((e,t)=>{const n=i(Object.assign({},e),a);return(0,l.fR)(n,s,t)})):s.map(((e,t)=>{if(t===n){const n=i(Object.assign({},e),a);return(0,l.fR)(n,s,t)}return e})),Object.assign({},e,{queries:r,queryKeys:(0,l.$$)(r,e.datasourceInstance)})}if(R.match(t)){const{queries:s}=t.payload;return Object.assign({},e,{queries:s.slice(),queryKeys:(0,l.$$)(s,e.datasourceInstance)})}if(D.match(t)){const{queries:s}=t.payload;return Object.assign({},e,{queries:s,queryKeys:(0,l.$$)(s,e.datasourceInstance)})}if(L.match(t)){const{querySubscription:s}=t.payload;return Object.assign({},e,{querySubscription:s})}if(E.match(t))return se(e,t);if(D.match(t)){const{queries:s}=t.payload;return Object.assign({},e,{queries:s,queryKeys:(0,l.$$)(s,e.datasourceInstance)})}if(_.match(t)){const{loadingState:s}=t.payload;return Object.assign({},e,{queryResponse:Object.assign({},e.queryResponse,{state:s}),loading:s===o.LoadingState.Loading||s===o.LoadingState.Streaming})}if(V.match(t)){const{isPaused:s}=t.payload;return Object.assign({},e,{isPaused:s})}if(B.match(t))return Object.assign({},e,{scanning:!0});if(z.match(t))return Object.assign({},e,{scanning:!1,scanRange:void 0});if(U.match(t)){const s=5,{cache:a}=e,{queryResponse:n,cacheKey:i}=t.payload;let r=[...a];if(!r.some((e=>e.key===i))){r=[{key:i,value:n},...r].slice(0,s)}return Object.assign({},e,{cache:r})}return q.match(t)?Object.assign({},e,{cache:[]}):e},se=(e,t)=>{var s,a;const{response:n}=t.payload,{request:i,state:r,series:l,error:c,graphResult:d,logsResult:u,tableResult:p,traceFrames:h,nodeGraphFrames:g}=n;if(c){var m,f;if(c.type===o.DataQueryErrorType.Timeout)return Object.assign({},e,{queryResponse:n,loading:r===o.LoadingState.Loading||r===o.LoadingState.Streaming});if(c.type===o.DataQueryErrorType.Cancelled)return e;null!==(m=e.datasourceInstance)&&void 0!==m&&null!==(f=m.components)&&void 0!==f&&f.QueryCtrl&&e.eventBridge.emit(o.PanelEvents.dataError,c)}if(!i)return Object.assign({},e);if(null!==(s=e.datasourceInstance)&&void 0!==s&&null!==(a=s.components)&&void 0!==a&&a.QueryCtrl){const t=l.map((e=>(0,o.toLegacyResponseData)(e)));e.eventBridge.emit(o.PanelEvents.dataReceived,t)}return Object.assign({},e,{queryResponse:n,graphResult:d,tableResult:p,logsResult:u,loading:r===o.LoadingState.Loading||r===o.LoadingState.Streaming,showLogs:!!u,showMetrics:!!d,showTable:!!p,showTrace:!!h.length,showNodeGraph:!!g.length})}},"./public/app/features/explore/state/time.ts":(e,t,s)=>{"use strict";s.d(t,{cD:()=>m,oz:()=>f,b3:()=>b,mG:()=>v,ok:()=>x});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./public/app/core/utils/explore.ts"),o=s("./public/app/types/explore.ts"),l=s("./public/app/features/profile/state/selectors.ts"),c=s("./public/app/features/dashboard/services/TimeSrv.ts"),d=s("./public/app/features/dashboard/state/index.ts"),u=s("./public/app/features/explore/state/query.ts"),p=s("./public/app/features/explore/state/main.ts");const h=(0,a.PH)("explore/changeRange"),g=(0,a.PH)("explore/changeRefreshInterval"),m=e=>(t,s)=>{const{syncedTimes:a}=s().explore;a?(t(b(Object.assign({},e,{exploreId:o.K.left}))),t((0,u.aA)(o.K.left,{preserveCache:!0})),t(b(Object.assign({},e,{exploreId:o.K.right}))),t((0,u.aA)(o.K.right,{preserveCache:!0}))):(t(b(Object.assign({},e))),t((0,u.aA)(e.exploreId,{preserveCache:!0})))};function f(e,t){return g({exploreId:e,refreshInterval:t})}const b=e=>(t,s)=>{const{exploreId:a,absoluteRange:i,rawRange:o}=e,u=s().explore[a],p=(0,l.Z)(s().user),g=(0,l.i)(s().user),{range:m}=u;let f=m.raw;i&&(f={from:(0,n.dateTimeForTimeZone)(p,i.from),to:(0,n.dateTimeForTimeZone)(p,i.to)}),o&&(f=o);const b=(0,r.OQ)(p,f,g),v={from:b.from.valueOf(),to:b.to.valueOf()};(0,c.$t)().init(new d.f({time:b.raw,refresh:!1,timeZone:p})),t(h({exploreId:a,range:b,absoluteRange:v}))};function v(e){return(t,s)=>{if(e===o.K.left){const e=s().explore.left;t(m({exploreId:o.K.right,rawRange:e.range.raw}))}else{const e=s().explore.right;t(m({exploreId:o.K.left,rawRange:e.range.raw}))}const a=s().explore.syncedTimes;t((0,p.tl)({syncedTimes:!a})),t((0,p.og)())}}const x=(e,t)=>{if(g.match(t)){const{refreshInterval:s}=t.payload,a=i.RefreshPicker.isLive(s),o=(0,r.Oy)(s),l=(0,n.sortLogsResult)(e.logsResult,o);return i.RefreshPicker.isLive(e.refreshInterval)&&!a&&(0,r.RZ)(e.querySubscription),Object.assign({},e,{refreshInterval:s,queryResponse:Object.assign({},e.queryResponse,{state:a?n.LoadingState.Streaming:n.LoadingState.Done}),isLive:a,isPaused:!a&&e.isPaused,loading:a,logsResult:l})}if(h.match(t)){const{range:s,absoluteRange:a}=t.payload;return Object.assign({},e,{range:s,absoluteRange:a})}return e}},"./public/app/features/explore/state/utils.ts":(e,t,s)=>{"use strict";s.d(t,{M7:()=>h,lp:()=>d,M0:()=>g,D:()=>p,r_:()=>u,t5:()=>c});var a=s("./packages/grafana-data/src/index.ts"),n=s("./public/app/features/plugins/datasource_srv.ts"),i=s("./public/app/core/store.ts"),r=s("./public/app/core/utils/explore.ts");const o=e=>{let t=e.raw.from;(0,a.isDateTime)(t)&&(t=t.valueOf().toString(10));let s=e.raw.to;return(0,a.isDateTime)(s)&&(s=s.valueOf().toString(10)),{from:t,to:s}},l={from:"now-6h",to:"now"},c=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:l},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:d(),tableResult:null,graphResult:null,logsResult:null,eventBridge:null,cache:[]}),d=()=>({state:a.LoadingState.NotStarted,series:[],timeRange:(0,a.getDefaultTimeRange)()});async function u(e,t){var s;let a;try{a=await(0,n.ak)().get(t)}catch(e){a=await(0,n.ak)().get()}if(a.init)try{a.init()}catch(e){console.error(e)}const o=`grafana.explore.history.${null===(s=a.meta)||void 0===s?void 0:s.id}`,l=i.Z.getObject(o,[]);return i.Z.set((0,r.I$)(e),a.uid),{history:l,instance:a}}function p(e){var t;return{datasource:(null===(t=e.datasourceInstance)||void 0===t?void 0:t.name)||"",queries:e.queries.map(r.uC),range:o(e.range)}}function h(e){const t={from:e.from,to:e.to};return Object.entries(t).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t.toString())}`)).join("&")}function g(e,t){const s=h(t),a=e.findIndex((e=>e.key===s));return a>=0?e[a].value:void 0}},"./public/app/features/explore/utils/links.ts":(e,t,s)=>{"use strict";s.d(t,{a:()=>l,u:()=>c});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./public/app/features/panel/panellinks/link_srv.ts"),o=s("./public/app/core/services/context_srv.ts");const l=e=>{const{field:t,vars:s,splitOpenFn:a,range:l,rowIndex:c,dataFrame:d}=e,u=Object.assign({},s||{});if(u.__value={value:{raw:t.values.get(c)},text:"Raw value"},d&&(u.__data={value:{name:d.name,refId:d.refId,fields:(0,n.getFieldDisplayValuesProxy)({frame:d,rowIndex:c})},text:"Data"}),t.config.links){const e=[];return o.Vt.hasAccessToExplore()?e.push(...t.config.links):e.push(...t.config.links.filter((e=>!e.internal))),e.map((e=>{if(e.internal)return(0,n.mapInternalLinkToExplore)({link:e,internalLink:e.internal,scopedVars:u,range:l,field:t,onClickFn:a,replaceVariables:(0,i.getTemplateSrv)().replace.bind((0,i.getTemplateSrv)())});{const s=(e,t)=>(0,i.getTemplateSrv)().replace(e,Object.assign({},t,u)),a=(0,r.Bq)().getDataLinkUIModel(e,s,t);return a.title||(a.title=function(e){e.indexOf("://")<0&&(e=`http://${e}`);let t;try{t=new URL(e).hostname}catch(s){t=e}return t}(a.href)),a}}))}return[]};function c(e,t){return(0,a.useCallback)(((s,a)=>s.fields.flatMap((n=>{var i,r;return null!==(i=n.config)&&void 0!==i&&i.links&&null!==(r=n.config)&&void 0!==r&&r.links.length?l({field:n,rowIndex:a,range:e,dataFrame:s,splitOpenFn:t}):[]}))),[e,t])}},"./public/app/features/expressions/ExpressionDatasource.ts":(e,t,s)=>{"use strict";s.d(t,{DB:()=>C,Yq:()=>T,mV:()=>O,bE:()=>N});var a=s("./packages/grafana-data/src/index.ts"),n=s("./public/app/features/expressions/types.ts"),i=s("./node_modules/react/index.js"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=({labelWidth:e,onChange:t,refIds:s,query:a})=>{const i=n.Fr.find((e=>e.value===a.downsampler)),l=n.r8.find((e=>e.value===a.upsampler));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.InlineFieldRow,{children:(0,o.jsx)(r.InlineField,{label:"Input",labelWidth:e,children:(0,o.jsx)(r.Select,{menuShouldPortal:!0,onChange:e=>{t(Object.assign({},a,{expression:e.value}))},options:s,value:a.expression,width:20})})}),(0,o.jsxs)(r.InlineFieldRow,{children:[(0,o.jsx)(r.InlineField,{label:"Resample to",labelWidth:e,tooltip:"10s, 1m, 30m, 1h",children:(0,o.jsx)(r.Input,{onChange:e=>{t(Object.assign({},a,{window:e.target.value}))},value:a.window,width:15})}),(0,o.jsx)(r.InlineField,{label:"Downsample",children:(0,o.jsx)(r.Select,{menuShouldPortal:!0,options:n.Fr,value:i,onChange:e=>{t(Object.assign({},a,{downsampler:e.value}))},width:25})}),(0,o.jsx)(r.InlineField,{label:"Upsample",children:(0,o.jsx)(r.Select,{menuShouldPortal:!0,options:n.r8,value:l,onChange:e=>{t(Object.assign({},a,{upsampler:e.value}))},width:25})})]})]})},c=({labelWidth:e,onChange:t,refIds:s,query:a})=>{const i=n.SQ.find((e=>e.value===a.reducer));return(0,o.jsxs)(r.InlineFieldRow,{children:[(0,o.jsx)(r.InlineField,{label:"Function",labelWidth:e,children:(0,o.jsx)(r.Select,{menuShouldPortal:!0,options:n.SQ,value:i,onChange:e=>{t(Object.assign({},a,{reducer:e.value}))},width:25})}),(0,o.jsx)(r.InlineField,{label:"Input",labelWidth:e,children:(0,o.jsx)(r.Select,{menuShouldPortal:!0,onChange:e=>{t(Object.assign({},a,{expression:e.value}))},options:s,value:a.expression,width:20})})]})};var d=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");const u=({labelWidth:e,onChange:t,query:s})=>(0,o.jsx)(r.InlineField,{label:"Expression",labelWidth:e,className:d.css`
        align-items: baseline;
      `,children:(0,o.jsx)(r.TextArea,{value:s.expression,onChange:e=>{t(Object.assign({},s,{expression:e.target.value}))},rows:4,placeholder:"Math operations on one more queries, you reference the query by ${refId} ie. $A, $B, $C etc\nExample: $A + $B\nAvailable functions: abs(), log(), nan(), inf(), null()"})});var p,h=s("./public/app/features/alerting/state/alertDef.ts");const g=h.Z.reducerTypes.map((e=>({label:e.text,value:e.value}))),m=h.Z.evalOperators.map((e=>({label:e.text,value:e.value}))),f=h.Z.evalFunctions.map((e=>({label:e.text,value:e.value}))),b=({condition:e,index:t,onChange:s,onRemoveCondition:a,refIds:n})=>{const i=(0,r.useStyles)(v),l=(t,a)=>{const n=parseFloat(t.currentTarget.value),i=[...e.evaluator.params];i[a]=n,s(Object.assign({},e,{evaluator:Object.assign({},e.evaluator,{params:i})}))},c=d.css`
    width: 60px;
  `,u=e.evaluator.type===h.$.IsWithinRange||e.evaluator.type===h.$.IsOutsideRange;return(0,o.jsxs)(r.InlineFieldRow,{children:[0===t?(0,o.jsx)("div",{className:(0,d.cx)(i.button,c),children:"WHEN"}):(0,o.jsx)(r.ButtonSelect,{className:(0,d.cx)(i.buttonSelectText,c),options:m,onChange:t=>{s(Object.assign({},e,{operator:{type:t.value}}))},value:m.find((t=>t.value===e.operator.type))}),(0,o.jsx)(r.Select,{menuShouldPortal:!0,options:g,onChange:t=>{s(Object.assign({},e,{reducer:{type:t.value,params:[]}}))},width:20,value:g.find((t=>t.value===e.reducer.type))}),(0,o.jsx)("div",{className:i.button,children:"OF"}),(0,o.jsx)(r.Select,{menuShouldPortal:!0,onChange:t=>{s(Object.assign({},e,{query:{params:[t.value]}}))},options:n,width:15,value:n.find((t=>t.value===e.query.params[0]))}),(0,o.jsx)(r.ButtonSelect,{className:i.buttonSelectText,options:f,onChange:t=>{s(Object.assign({},e,{evaluator:{params:e.evaluator.params,type:t.value}}))},value:f.find((t=>t.value===e.evaluator.type))}),u?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Input,{type:"number",width:10,onChange:e=>l(e,0),value:e.evaluator.params[0]}),(0,o.jsx)("div",{className:i.button,children:"TO"}),(0,o.jsx)(r.Input,{type:"number",width:10,onChange:e=>l(e,1),value:e.evaluator.params[1]})]}):e.evaluator.type!==h.$.HasNoValue?(0,o.jsx)(r.Input,{type:"number",width:10,onChange:e=>l(e,0),value:e.evaluator.params[0]}):null,(0,o.jsx)(r.Button,{variant:"secondary",type:"button",onClick:()=>a(t),children:p||(p=(0,o.jsx)(r.Icon,{name:"trash-alt"}))})]})},v=e=>{const t=d.css`
    color: ${e.colors.textBlue};
    font-size: ${e.typography.size.sm};
  `;return{buttonSelectText:t,button:(0,d.cx)(d.css`
        display: flex;
        align-items: center;
        border-radius: ${e.border.radius.sm};
        font-weight: ${e.typography.weight.semibold};
        border: 1px solid ${e.colors.border1};
        white-space: nowrap;
        padding: 0 ${e.spacing.sm};
        background-color: ${e.colors.bodyBg};
      `,t)}};var x,y=s("./public/app/features/expressions/utils/expressionTypes.ts");const w=({onChange:e,query:t,refIds:s})=>{var a;const n=s=>{if(t.conditions){const a=t.conditions[s],n=t.conditions.filter((e=>e!==a)).map(((e,t)=>0===t?Object.assign({},e,{operator:{type:"when"}}):e));e(Object.assign({},t,{conditions:n}))}};return(0,o.jsxs)("div",{children:[(0,o.jsx)(r.InlineFieldRow,{children:(0,o.jsx)(r.InlineField,{label:"Conditions",labelWidth:14,children:(0,o.jsx)("div",{children:null===(a=t.conditions)||void 0===a?void 0:a.map(((a,i)=>{if(a)return(0,o.jsx)(b,{index:i,condition:a,onChange:s=>((s,a)=>{t.conditions&&e(Object.assign({},t,{conditions:[...t.conditions.slice(0,a),s,...t.conditions.slice(a+1)]}))})(s,i),onRemoveCondition:n,refIds:s},i)}))})})}),(0,o.jsx)(r.Button,{variant:"secondary",type:"button",onClick:()=>{t.conditions&&e(Object.assign({},t,{conditions:t.conditions.length>0?[...t.conditions,y.R]:[y.R]}))},children:x||(x=(0,o.jsx)(r.Icon,{name:"plus-circle"}))})]})};class j extends i.PureComponent{constructor(...e){var t,s,a;super(...e),a=e=>{const{query:t,onChange:s}=this.props;s((0,y.J)(Object.assign({},t,{type:e.value})))},(s="onSelectExpressionType")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}renderExpressionType(){const{onChange:e,query:t,queries:s}=this.props,a=s.filter((e=>t.refId!==e.refId)).map((e=>({value:e.refId,label:e.refId})));switch(t.type){case n.Us.math:return(0,o.jsx)(u,{onChange:e,query:t,labelWidth:14});case n.Us.reduce:return(0,o.jsx)(c,{refIds:a,onChange:e,labelWidth:14,query:t});case n.Us.resample:return(0,o.jsx)(l,{query:t,labelWidth:14,onChange:e,refIds:a});case n.Us.classic:return(0,o.jsx)(w,{onChange:e,query:t,refIds:a})}}render(){const{query:e}=this.props,t=n._M.find((t=>t.value===e.type));return(0,o.jsxs)("div",{children:[(0,o.jsx)(r.InlineField,{label:"Operation",labelWidth:14,children:(0,o.jsx)(r.Select,{menuShouldPortal:!0,options:n._M,value:t,onChange:this.onSelectExpressionType,width:25})}),this.renderExpressionType()]})}}var k=s("./packages/grafana-runtime/src/index.ts");class S extends k.DataSourceWithBackend{constructor(e){super(e)}getCollapsedText(e){return`Expression: ${e.type}`}newQuery(e){var t,s;return{refId:"--",type:null!==(t=null==e?void 0:e.type)&&void 0!==t?t:n.Us.math,datasource:C,conditions:null!==(s=null==e?void 0:e.conditions)&&void 0!==s?s:void 0}}}const C="__expr__",T="-100",N={id:-100,uid:T,name:C,type:"grafana-expression",access:"proxy",meta:{baseUrl:"",module:"",type:a.PluginType.datasource,name:C,id:C,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{}},O=new S(N);O.meta={id:C,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},O.components={QueryEditor:j}},"./public/app/features/expressions/types.ts":(e,t,s)=>{"use strict";s.d(t,{Us:()=>n,_M:()=>i,SQ:()=>r,Fr:()=>o,r8:()=>l});var a=s("./packages/grafana-data/src/index.ts");let n;!function(e){e.math="math",e.reduce="reduce",e.resample="resample",e.classic="classic_conditions"}(n||(n={}));const i=[{value:n.math,label:"Math"},{value:n.reduce,label:"Reduce"},{value:n.resample,label:"Resample"},{value:n.classic,label:"Classic condition"}],r=[{value:a.ReducerID.min,label:"Min",description:"Get the minimum value"},{value:a.ReducerID.max,label:"Max",description:"Get the maximum value"},{value:a.ReducerID.mean,label:"Mean",description:"Get the average value"},{value:a.ReducerID.sum,label:"Sum",description:"Get the sum of all values"},{value:a.ReducerID.count,label:"Count",description:"Get the number of values"}],o=[{value:a.ReducerID.min,label:"Min",description:"Fill with the minimum value"},{value:a.ReducerID.max,label:"Max",description:"Fill with the maximum value"},{value:a.ReducerID.mean,label:"Mean",description:"Fill with the average value"},{value:a.ReducerID.sum,label:"Sum",description:"Fill with the sum of all values"}],l=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}]},"./public/app/features/expressions/utils/expressionTypes.ts":(e,t,s)=>{"use strict";s.d(t,{J:()=>r,R:()=>o});var a=s("./packages/grafana-data/src/index.ts"),n=s("./public/app/features/expressions/types.ts"),i=s("./public/app/features/alerting/state/alertDef.ts");const r=e=>{switch(e.type){case n.Us.reduce:e.reducer||(e.reducer=a.ReducerID.mean),e.expression=void 0;break;case n.Us.resample:e.downsampler||(e.downsampler=a.ReducerID.mean),e.upsampler||(e.upsampler="fillna"),e.reducer=void 0;break;case n.Us.classic:e.conditions||(e.conditions=[o]);break;default:e.reducer=void 0}return e},o={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:i.$.IsAbove}}},"./public/app/features/folders/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{R7:()=>r,G3:()=>o,Ss:()=>l,ZP:()=>c});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./public/app/core/utils/acl.ts");const i=(0,a.oM)({name:"folder",initialState:{id:0,uid:"loading",title:"loading",url:"",canSave:!1,hasChanged:!1,version:1,permissions:[]},reducers:{loadFolder:(e,t)=>Object.assign({},e,t.payload,{hasChanged:!1}),setFolderTitle:(e,t)=>Object.assign({},e,{title:t.payload,hasChanged:t.payload.trim().length>0}),loadFolderPermissions:(e,t)=>Object.assign({},e,{permissions:(0,n.A)(t.payload)})}}),{loadFolderPermissions:r,loadFolder:o,setFolderTitle:l}=i.actions,c={folder:i.reducer}},"./public/app/features/library-panels/components/AddLibraryPanelModal/AddLibraryPanelModal.tsx":(e,t,s)=>{"use strict";s.d(t,{T:()=>p,c:()=>h});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/core/components/Select/FolderPicker.tsx"),r=s("./public/app/features/library-panels/utils/usePanelSave.ts"),o=s("./node_modules/react-use/esm/useDebounce.js"),l=s("./node_modules/react-use/esm/useAsync.js"),c=s("./public/app/features/library-panels/state/api.ts"),d=s("./node_modules/react/jsx-runtime.js");const u=["isOpen","panel","initialFolderId"];const p=({panel:e,initialFolderId:t,onDismiss:s})=>{const[u,p]=(0,a.useState)(t),[h,g]=(0,a.useState)(e.title),[m,f]=(0,a.useState)(e.title),[b,v]=(0,a.useState)(!1);(0,a.useEffect)((()=>v(!0)),[h]),(0,o.Z)((()=>f(h)),350,[h]);const{saveLibraryPanel:x}=(0,r.E)(),y=(0,a.useCallback)((()=>{e.libraryPanel={uid:void 0,name:h},x(e,u).then((e=>{e instanceof Error||s()}))}),[e,h,u,s,x]),w=(0,l.Z)((async()=>{try{return!(await(0,c.jh)(h)).some((e=>e.folderId===u))}catch(e){return e.isHandled=!0,!0}finally{v(!1)}}),[m,u]),j=!(null!=w&&w.value||void 0===w.value||h!==m||b);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.Field,{label:"Library panel name",invalid:j,error:j?"Library panel with this name already exists":"",children:(0,d.jsx)(n.Input,{name:"name",value:h,onChange:e=>g(e.currentTarget.value)})}),(0,d.jsx)(n.Field,{label:"Save in folder",description:"Library panel permissions are derived from the folder permissions",children:(0,d.jsx)(i.E,{onChange:({id:e})=>p(e),initialFolderId:t})}),(0,d.jsxs)(n.Modal.ButtonRow,{children:[(0,d.jsx)(n.Button,{variant:"secondary",onClick:s,fill:"outline",children:"Cancel"}),(0,d.jsx)(n.Button,{onClick:y,disabled:j,children:"Create library panel"})]})]})},h=e=>{let{isOpen:t=!1,panel:s,initialFolderId:a}=e,i=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,u);return(0,d.jsx)(n.Modal,{title:"Create library panel",isOpen:t,onDismiss:i.onDismiss,children:(0,d.jsx)(p,{panel:s,initialFolderId:a,onDismiss:i.onDismiss})})}},"./public/app/features/library-panels/components/UnlinkModal/UnlinkModal.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>i});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/react/jsx-runtime.js");const i=({isOpen:e,onConfirm:t,onDismiss:s})=>(0,n.jsx)(a.ConfirmModal,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:"If you unlink this panel, you will be able to edit it without affecting any other dashboards. However, once you make a change you will not be able to revert to its original reusable panel.",confirmText:"Yes, unlink",onConfirm:()=>{t(),s()},onDismiss:s,isOpen:e})},"./public/app/features/library-panels/guard.ts":(e,t,s)=>{"use strict";function a(e){var t;return Boolean(null===(t=e.libraryPanel)||void 0===t?void 0:t.uid)}s.d(t,{V:()=>a})},"./public/app/features/library-panels/state/api.ts":(e,t,s)=>{"use strict";let a,n;s.d(t,{Kq:()=>l,UO:()=>d,E8:()=>p,jh:()=>o,Ef:()=>u,Pq:()=>r,Ob:()=>c}),function(e){e[e.Panel=1]="Panel",e[e.Variable=2]="Variable"}(a||(a={})),function(e){e[e.Dashboard=1]="Dashboard"}(n||(n={}));var i=s("./public/app/core/services/backend_srv.ts");async function r({searchString:e="",perPage:t=100,page:s=1,excludeUid:n="",sortDirection:r="",typeFilter:o=[],folderFilter:l=[]}={}){const c=new URLSearchParams;c.append("searchString",e),c.append("sortDirection",r),c.append("typeFilter",o.join(",")),c.append("folderFilter",l.join(",")),c.append("excludeUid",n),c.append("perPage",t.toString(10)),c.append("page",s.toString(10)),c.append("kind",a.Panel.toString(10));const{result:d}=await(0,i.i)().get(`/api/library-elements?${c.toString()}`);return d}async function o(e){const{result:t}=await(0,i.i)().get(`/api/library-elements/name/${e}`);return t}async function l(e,t){const{result:s}=await(0,i.i)().post("/api/library-elements",{folderId:t,name:e.libraryPanel.name,model:e,kind:a.Panel});return s}async function c(e){const{uid:t,name:s,version:n}=e.libraryPanel,r=a.Panel,o=e,{result:l}=await(0,i.i)().patch(`/api/library-elements/${t}`,{name:s,model:o,version:n,kind:r});return l}function d(e){return(0,i.i)().delete(`/api/library-elements/${e}`)}async function u(e){const{result:t}=await(0,i.i)().get(`/api/library-elements/${e}/connections`);return t}async function p(e){const t=await u(e);if(0===t.length)return[];return await(0,i.i)().search({dashboardIds:t.map((e=>e.connectionId))})}},"./public/app/features/library-panels/utils.ts":(e,t,s)=>{"use strict";s.d(t,{rm:()=>i,bF:()=>r,Pi:()=>o,i6:()=>l});var a=s("./public/app/features/library-panels/state/api.ts"),n=s("./public/app/core/copy/appNotification.ts");function i(e){return(0,n.t_)(e)}function r(e){return(0,n.AT)(e)}function o(e){const{uid:t,name:s,meta:a,version:n}=e;return{uid:t,name:s,meta:a,version:n}}async function l(e,t){const s=function(e){let t=e.getSaveModel();return t=Object.assign({libraryPanel:{name:e.title,uid:void 0}},t),t}(e),n=await function(e,t){if(!e.libraryPanel)return Promise.reject();if(e.libraryPanel&&void 0===e.libraryPanel.uid)return(0,a.Kq)(e,t);return(0,a.Ob)(e)}(s,t);return function(e,t){e.restoreModel(Object.assign({},t.model,{configRev:0,libraryPanel:o(t),title:e.title})),e.refresh()}(e,n),n}},"./public/app/features/library-panels/utils/usePanelSave.ts":(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/react-use/lib/useAsyncFn.js"),r=s("./public/app/features/library-panels/utils.ts"),o=s("./public/app/core/actions/index.ts");const l=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,i.default)((async(e,t)=>{try{return await(0,r.i6)(e,t)}catch(e){throw e.isHandled=!0,new Error(e.data.message)}}),[]);return(0,a.useEffect)((()=>{t.error&&e((0,o.$l)((0,r.rm)(`Error saving library panel: "${t.error.message}"`))),t.value&&e((0,o.$l)((0,r.bF)("Library panel saved")))}),[e,t]),{state:t,saveLibraryPanel:s}}},"./public/app/features/live/dashboard/dashboardWatcher.ts":(e,t,s)=>{"use strict";s.d(t,{H:()=>j,z:()=>k});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./public/app/features/dashboard/services/DashboardSrv.ts"),i=s("./public/app/core/core.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./node_modules/react/index.js"),l=s("./packages/grafana-ui/src/index.ts"),c=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");let d;!function(e){e.Saved="saved",e.EditingStarted="editing-started",e.EditingCanceled="editing-cancelled",e.Deleted="deleted"}(d||(d={}));var u,p,h,g,m=s("./node_modules/react/jsx-runtime.js");function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class b extends o.PureComponent{constructor(...e){super(...e),f(this,"state",{}),f(this,"discardAndReload",{label:"Discard local changes",description:"Load the latest saved version for this dashboard",action:()=>{j.reloadPage(),this.onDismiss()}}),f(this,"continueEditing",{label:"Continue editing",description:"Keep your local changes and continue editing.  Note: when you save, this will overwrite the most recent chages",action:()=>{this.onDismiss()}}),f(this,"acceptDelete",{label:"Discard Local changes",description:"view grafana homepage",action:()=>{document.location.href=a.config.appUrl}}),f(this,"onDismiss",(()=>{this.setState({dismiss:!0})}))}render(){const{event:e}=this.props,{dismiss:t}=this.state,s=v(a.config.theme),n=(null==e?void 0:e.action)===d.Deleted,i=n?[this.continueEditing,this.acceptDelete]:[this.continueEditing,this.discardAndReload];return(0,m.jsx)(l.Modal,{isOpen:!t,title:"Dashboard Changed",icon:"copy",onDismiss:this.onDismiss,onClickBackdrop:()=>{},className:s.modal,children:(0,m.jsxs)("div",{children:[n?u||(u=(0,m.jsx)("div",{children:"This dashboard has been deleted by another session"})):p||(p=(0,m.jsx)("div",{children:"This dashboard has been modifed by another session"})),h||(h=(0,m.jsx)("br",{})),i.map((e=>(0,m.jsxs)("div",{onClick:e.action,className:s.radioItem,children:[(0,m.jsx)("h3",{children:e.label}),e.description]},e.label))),g||(g=(0,m.jsx)("br",{}))]})})}}const v=(0,l.stylesFactory)((e=>({modal:c.css`
      width: 500px;
    `,radioItem:c.css`
      margin: 0;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      padding: 10px;
      cursor: pointer;
      width: 100%;

      &:hover {
        background: ${e.colors.bgBlue1};
        color: ${e.colors.text};
      }
    `})));var x=s("./public/app/features/live/live.ts"),y=s("./public/app/types/events.ts");function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=new class{constructor(){w(this,"channel",void 0),w(this,"uid",void 0),w(this,"ignoreSave",void 0),w(this,"editing",!1),w(this,"lastEditing",void 0),w(this,"subscription",void 0),w(this,"observer",{next:e=>{if((0,r.isLiveChannelStatusEvent)(e)&&this.editing&&e.state===r.LiveChannelConnectionState.Connected&&this.sendEditingState(),(0,r.isLiveChannelMessageEvent)(e)){if(e.message.sessionId===x.W4)return;const{action:t}=e.message;switch(t){case d.EditingStarted:case d.Saved:{if(this.ignoreSave)return void(this.ignoreSave=!1);const s=(0,n.h4)().getCurrent();if((null==s?void 0:s.uid)!==e.message.uid)return void console.log("dashboard event for different dashboard?",e,s);const a=this.editing||s.hasUnsavedChanges();if(t===d.Saved)a?i.h$.publish(new y.Dn({component:b,props:{event:e}})):(i.h$.emit(r.AppEvents.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(a&&t===d.EditingStarted){const t=e.message,s=this.getRecentEditingEvent();s&&s.message===t.message||i.h$.emit(r.AppEvents.alertWarning,["Another session is editing this dashboard",t.message]),this.lastEditing=t}return}}}}})}setEditingState(e){const t=this.editing=e;this.editing=e,t&&this.sendEditingState()}sendEditingState(){const{channel:e,uid:t}=this;e&&t&&(0,a.getGrafanaLiveSrv)().publish(e,{sessionId:x.W4,uid:t,action:this.editing?d.EditingStarted:d.EditingCanceled,timestamp:Date.now()})}watch(e){const t=(0,a.getGrafanaLiveSrv)();t&&e!==this.uid&&(this.channel={scope:r.LiveChannelScope.Grafana,namespace:"dashboard",path:`uid/${e}`},this.leave(),e&&(this.subscription=t.getStream(this.channel).subscribe(this.observer)),this.uid=e)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){if(this.lastEditing&&this.lastEditing.timestamp){Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0)}return this.lastEditing}reloadPage(){a.locationService.reload()}};function k(){return{name:"dashboard",support:{getChannelConfig:e=>({description:"Dashboard change events",hasPresence:!0})},description:"Dashboard listener"}}},"./public/app/features/live/live.ts":(e,t,s)=>{"use strict";s.d(t,{Tm:()=>F,Bp:()=>A,W4:()=>I});var a=s("./node_modules/centrifuge/dist/centrifuge.js"),n=s.n(a),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),o=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),l=s("./node_modules/rxjs/dist/esm5/internal/Observable.js"),c=s("./packages/grafana-data/src/index.ts"),d=s("./node_modules/rxjs/dist/esm5/internal/Subject.js");function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class p{constructor(e,t){u(this,"currentStatus",void 0),u(this,"opened",Date.now()),u(this,"id",void 0),u(this,"addr",void 0),u(this,"stream",new d.x),u(this,"lastMessageWithSchema",void 0),u(this,"config",void 0),u(this,"subscription",void 0),u(this,"shutdownCallback",void 0),u(this,"disconnectIfNoListeners",(()=>{0===this.stream.observers.length&&this.disconnect()})),this.id=e,this.addr=t,this.currentStatus={type:c.LiveChannelEventType.Status,id:e,timestamp:this.opened,state:c.LiveChannelConnectionState.Pending}}initalize(e){if(this.config)throw new Error("Channel already initalized: "+this.id);this.config=e;const t={publish:e=>{try{e.data&&(e.data.schema&&(this.lastMessageWithSchema=e.data),this.stream.next({type:c.LiveChannelEventType.Message,message:e.data})),this.currentStatus.error&&(this.currentStatus.timestamp=Date.now(),delete this.currentStatus.error,this.sendStatus())}catch(e){console.log("publish error",this.addr,e),this.currentStatus.error=e,this.currentStatus.timestamp=Date.now(),this.sendStatus()}},error:e=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.error=e.error,this.sendStatus()},subscribe:e=>{var t;this.currentStatus.timestamp=Date.now(),this.currentStatus.state=c.LiveChannelConnectionState.Connected,delete this.currentStatus.error,null!==(t=e.data)&&void 0!==t&&t.schema&&(this.lastMessageWithSchema=e.data),this.sendStatus(e.data)},unsubscribe:e=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=c.LiveChannelConnectionState.Disconnected,this.sendStatus()}};return e.hasPresence&&(t.join=e=>{this.stream.next({type:c.LiveChannelEventType.Join,user:e.info.user})},t.leave=e=>{this.stream.next({type:c.LiveChannelEventType.Leave,user:e.info.user})}),t}sendStatus(e){const t=Object.assign({},this.currentStatus);e&&(t.message=e),this.stream.next(t)}getStream(){return new l.y((e=>{e.next(Object.assign({},this.currentStatus));const t=this.stream.subscribe(e);return()=>{t.unsubscribe();0===this.stream.observers.length&&setTimeout(this.disconnectIfNoListeners,250)}}))}async getPresence(){return this.subscription?this.subscription.presence().then((e=>({users:Object.keys(e.presence)}))):Promise.reject("not subscribed")}disconnect(){this.currentStatus.state=c.LiveChannelConnectionState.Shutdown,this.currentStatus.timestamp=Date.now(),this.subscription&&(this.subscription.unsubscribe(),this.subscription.removeAllListeners(),this.subscription=void 0),this.stream.complete(),this.stream.next(Object.assign({},this.currentStatus)),this.stream.complete(),this.shutdownCallback&&this.shutdownCallback()}shutdownWithError(e){this.currentStatus.error=e,this.sendStatus(),this.disconnect()}}var h=s("./public/app/core/config.ts"),g=s("./public/app/features/plugins/PluginPage.tsx"),m=s("./public/app/features/live/measurements/measurementsSupport.ts");function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class b{constructor(e){this.scope=e}}const v=new class extends b{constructor(){super(c.LiveChannelScope.Grafana),f(this,"features",new Map),f(this,"namespaces",[])}register(e){this.features.set(e.name,e.support),this.namespaces.push({value:e.name,label:e.name,description:e.description})}async getChannelSupport(e){const t=this.features.get(e);if(t)return Promise.resolve(t);throw new Error("unknown feature: "+e)}listNamespaces(){return Promise.resolve(this.namespaces)}};class x extends b{constructor(){super(c.LiveChannelScope.DataSource),f(this,"names",void 0)}async getChannelSupport(e){const t=await(0,i.getDataSourceSrv)().get(e);return t.channelSupport?t.channelSupport:new m.Y}async listNamespaces(){if(this.names)return Promise.resolve(this.names);const e=[];for(const[t,s]of Object.entries(h.vc.datasources))if(s.meta.live)try{await this.getChannelSupport(t)&&e.push({label:s.name,value:s.type,description:s.type})}catch(e){e.isHandled=!0}return this.names=e}}class y extends b{constructor(){super(c.LiveChannelScope.Plugin),f(this,"names",void 0)}async getChannelSupport(e){const t=await(0,g.loadPlugin)(e);if(!t)throw new Error("Unknown streaming plugin: "+e);if(t.channelSupport)return t.channelSupport;throw new Error("Plugin does not support streaming: "+e)}async listNamespaces(){if(this.names)return Promise.resolve(this.names);const e=[];for(const[s,a]of Object.entries(h.vc.panels))if(a.live)try{var t;if(await this.getChannelSupport(s))e.push({label:a.name,value:s,description:null===(t=a.info)||void 0===t?void 0:t.description})}catch(e){e.isHandled=!0}return this.names=e}}class w extends b{constructor(){super(c.LiveChannelScope.Stream),f(this,"names",void 0)}async getChannelSupport(e){return new m.Y}async listNamespaces(){if(this.names)return Promise.resolve(this.names);return this.names=[]}}var j=s("./public/app/features/live/dashboard/dashboardWatcher.ts");var k,S,C,T=s("./public/app/core/services/context_srv.ts"),N=s("./public/app/features/dashboard/dashgrid/liveTimer.ts");function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const I=(null===(k=window)||void 0===k||null===(S=k.grafanaBootData)||void 0===S||null===(C=S.user)||void 0===C?void 0:C.id)+"/"+Date.now().toString(16)+"/"+Math.random().toString(36).substring(2,15);class P{constructor(){O(this,"open",new Map),O(this,"centrifuge",void 0),O(this,"connectionState",void 0),O(this,"connectionBlocker",void 0),O(this,"scopes",void 0),O(this,"orgId",void 0),O(this,"onConnect",(e=>{this.connectionState.next(!0)})),O(this,"onDisconnect",(e=>{this.connectionState.next(!1)})),O(this,"onServerSideMessage",(e=>{console.log("Publication from server-side channel",e)}));const e=`${window.location.origin.replace("http","ws")}${i.config.appSubUrl}/api/live/ws`;this.orgId=T.Vt.user.orgId,this.centrifuge=new(n())(e,{}),this.centrifuge.setConnectData({sessionId:I,orgId:this.orgId}),i.config.liveEnabled&&""!==T.Vt.user.orgRole&&this.centrifuge.connect(),this.connectionState=new r.X(this.centrifuge.isConnected()),this.connectionBlocker=new Promise((e=>{if(this.centrifuge.isConnected())return e();const t=()=>{e(),this.centrifuge.removeListener("connect",t)};this.centrifuge.addListener("connect",t)})),this.scopes={[c.LiveChannelScope.Grafana]:v,[c.LiveChannelScope.DataSource]:new x,[c.LiveChannelScope.Plugin]:new y,[c.LiveChannelScope.Stream]:new w},this.centrifuge.on("connect",this.onConnect),this.centrifuge.on("disconnect",this.onDisconnect),this.centrifuge.on("publish",this.onServerSideMessage)}getChannel(e){const t=`${this.orgId}/${e.scope}/${e.namespace}/${e.path}`;let s=this.open.get(t);if(null!=s)return s;const a=this.scopes[e.scope];return a?(s=new p(t,e),s.shutdownCallback=()=>{this.open.delete(t)},this.open.set(t,s),this.initChannel(a,s).catch((e=>{s&&(s.currentStatus.state=c.LiveChannelConnectionState.Invalid,s.shutdownWithError(e)),this.open.delete(t)})),s):function(e,t,s){return{id:t,opened:Date.now(),addr:s,getStream:()=>(0,o.of)({type:c.LiveChannelEventType.Status,id:t,timestamp:Date.now(),state:c.LiveChannelConnectionState.Invalid,error:e}),disconnect:()=>{}}}("invalid scope",t,e)}async initChannel(e,t){const{addr:s}=t,a=await e.getChannelSupport(s.namespace);if(!a)throw new Error(t.addr.namespace+" does not support streaming");const n=a.getChannelConfig(s.path);if(!n)throw new Error("unknown path: "+s.path);const i=t.initalize(n);this.centrifuge.isConnected()||await this.connectionBlocker,t.subscription=this.centrifuge.subscribe(t.id,i)}getConnectionState(){return this.connectionState.asObservable()}async getChannelInfo(e){const t=this.scopes[e.scope];if(!t)return Promise.reject("invalid scope");const s=await t.getChannelSupport(e.namespace);return s?s.getChannelConfig(e.path):Promise.reject(e.namespace+" does not support streaming")}getStream(e){return this.getChannel(e).getStream()}getDataStream(e){return(0,c.isValidLiveChannelAddress)(e.addr)?new l.y((t=>{var s;const a=this.getChannel(e.addr),n=null!==(s=e.key)&&void 0!==s?s:"xstr/"+M++;let r,o,l=c.LoadingState.Streaming,d=N.A.lastUpdate,u=-1;const p=s=>{r?r.push(s):r=new c.StreamingDataFrame(s,e.buffer),l=c.LoadingState.Streaming;const a=u===r.fields.length;if(u=r.fields.length,(!o||s.schema||!a)&&(o=r,e.filter)){const{fields:t}=e.filter;null!=t&&t.length&&(o=Object.assign({},r,{fields:r.fields.filter((e=>t.includes(e.name)))}))}(N.A.lastUpdate-d>1e3||N.A.ok)&&(o.length=r.length,t.next({state:l,data:[o],key:n}),d=N.A.lastUpdate)};e.frame?p((0,c.dataFrameToJSON)(e.frame)):a.lastMessageWithSchema&&p(a.lastMessageWithSchema);const h=a.getStream().subscribe({error:s=>{console.log("LiveQuery [error]",{err:s},e.addr),l=c.LoadingState.Error,t.next({state:l,data:[r],key:n,error:(0,i.toDataQueryError)(s)}),h.unsubscribe()},complete:()=>{console.log("LiveQuery [complete]",e.addr),l!==c.LoadingState.Error&&(l=c.LoadingState.Done),t.complete(),h.unsubscribe()},next:e=>{if((0,c.isLiveChannelMessageEvent)(e))p(e.message);else if((0,c.isLiveChannelStatusEvent)(e)){if(e.error){let s=(0,i.toDataQueryError)(e.error);return s.message=`Streaming channel error: ${s.message}`,l=c.LoadingState.Error,void t.next({state:l,data:[r],key:n,error:s})}if(e.state===c.LiveChannelConnectionState.Connected||e.state===c.LiveChannelConnectionState.Pending)return void(e.message&&p(e.message));console.log("ignore state",e)}}});return()=>{h.unsubscribe()}})):(0,o.of)({error:(0,i.toDataQueryError)(`invalid channel address: ${JSON.stringify(e.addr)}`),state:c.LoadingState.Error,data:e.frame?[e.frame]:[]})}getPresence(e){return this.getChannel(e).getPresence()}publish(e,t){return(0,i.getBackendSrv)().post("api/live/publish",{channel:(0,c.toLiveChannelId)(e),data:t})}}let M=0;function F(){return(0,i.getGrafanaLiveSrv)()}function A(){(0,i.setGrafanaLiveSrv)(new P),v.register({name:"testdata",support:{getChannelConfig:e=>({type:c.LiveChannelType.DataStream})},description:"Test data generations"}),v.register({name:"broadcast",support:{getChannelConfig:e=>({type:c.LiveChannelType.JSON,canPublish:!0,description:"Broadcast any messages to a channel"})},description:"Broadcast will send/receive any JSON object in a channel"}),v.register((0,j.z)())}},"./public/app/features/live/measurements/measurementsSupport.ts":(e,t,s)=>{"use strict";s.d(t,{Y:()=>n});var a=s("./packages/grafana-data/src/index.ts");class n{getChannelConfig(e){return{type:a.LiveChannelType.DataStream}}}},"./public/app/features/manage-dashboards/services/ValidationSrv.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s("./public/app/core/core_module.ts"),n=s("./public/app/core/services/backend_srv.ts");const i="dash-folder",r="dash-db";class o{constructor(){var e,t,s;s="general",(t="rootName")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}validateNewDashboardName(e,t){return this.validate(e,t,"A dashboard or a folder with the same name already exists")}validateNewFolderName(e){return this.validate(0,e,"A folder or dashboard in the general folder with the same name already exists")}async validate(e,t,s){const a=(t=(t||"").trim()).toLowerCase();if(0===t.length)throw{type:"REQUIRED",message:"Name is required"};if(0===e&&a===this.rootName)throw{type:"EXISTING",message:"This is a reserved name and cannot be used for a folder."};const o=[];o.push(n.ae.search({type:i,folderIds:[e],query:t})),o.push(n.ae.search({type:r,folderIds:[e],query:t}));const l=await Promise.all(o);let c=[];l.length>0&&l[0].length>0&&(c=l[0]),l.length>1&&l[1].length>0&&(c=c.concat(l[1]));for(const e of c)if(a===e.title.toLowerCase())throw{type:"EXISTING",message:s}}}o.$inject=[];const l=new o;a.ZP.service("validationSrv",o)},"./public/app/features/manage-dashboards/state/actions.ts":(e,t,s)=>{"use strict";s.d(t,{q_:()=>c,nQ:()=>d,ys:()=>p,$j:()=>h,ct:()=>m,Fd:()=>v,uC:()=>x,L6:()=>w,ZL:()=>j,EW:()=>k,iM:()=>S});var a=s("./packages/grafana-data/src/index.ts"),n=s("./public/app/core/services/backend_srv.ts"),i=s("./public/app/features/manage-dashboards/state/reducers.ts"),r=s("./public/app/core/core.ts"),o=s("./public/app/features/live/dashboard/dashboardWatcher.ts"),l=s("./packages/grafana-runtime/src/index.ts");function c(e){return async t=>{try{const s=await(0,n.i)().get(`/api/gnet/dashboards/${e}`);t((0,i.S9)(s)),t(u(s.json))}catch(e){r.h$.emit(a.AppEvents.alertError,[e.data.message||e])}}}function d(e){return async t=>{t((0,i.Nw)(e)),t(u(e))}}function u(e){return t=>{if(e&&e.__inputs){const s=[];e.__inputs.forEach((e=>{const t={name:e.name,label:e.label,info:e.description,value:e.value,type:e.type,pluginId:e.pluginId,options:[]};e.type===i.n$.DataSource?g(e,t):t.info||(t.info="Specify a string constant"),s.push(t)})),t((0,i.Zc)(s))}}}function p(){return e=>{e((0,i.MO)())}}function h(e){return async(t,s)=>{var i,r;const o=s().importDashboard.dashboard,c=s().importDashboard.inputs;let d=[];null===(i=e.dataSources)||void 0===i||i.forEach(((e,t)=>{const s=c.dataSources[t];d.push({name:s.name,type:s.type,pluginId:s.pluginId,value:e.name})})),null===(r=e.constants)||void 0===r||r.forEach(((e,t)=>{const s=c.constants[t];d.push({value:e,name:s.name,type:s.type})}));const u=await(0,n.i)().post("api/dashboards/import",{dashboard:Object.assign({},o,{title:e.title,uid:e.uid||o.uid}),overwrite:!0,inputs:d,folderId:e.folder.id}),p=a.locationUtil.stripBaseFromUrl(u.importedUrl);l.locationService.push(p)}}const g=(e,t)=>{0===(0,l.getDataSourceSrv)().getList({pluginId:e.pluginId}).length?t.info="No data sources of type "+e.pluginName+" found":t.info||(t.info="Select a "+e.pluginName+" data source")};function m(e,t){const s=[];for(const a of e)s.push(b(f,!0,a,t));return C(s).then((e=>({totalCount:e.length,successCount:e.filter((e=>e.succeeded)).length,alreadyInFolderCount:e.filter((e=>e.alreadyInFolder)).length})))}async function f(e,t){const s=await(0,n.i)().getDashboardByUid(e);if(!s.meta.folderId&&0===t.id||s.meta.folderId===t.id)return{alreadyInFolder:!0};const a={dashboard:s.dashboard,folderId:t.id,overwrite:!1};try{return await x(a),{succeeded:!0}}catch(e){var i;if("plugin-dashboard"!==(null===(i=e.data)||void 0===i?void 0:i.status))return{succeeded:!1};e.isHandled=!0,a.overwrite=!0;try{return await x(a),{succeeded:!0}}catch(e){return{succeeded:!1}}}}function b(e,t,...s){return async a=>{try{const t=await e(...s);return Array.prototype.concat(a,[t])}catch(e){if(t)return a;throw e}}}function v(e,t){const s=[];for(const t of e)s.push(b(y,!0,t,!0));for(const e of t)s.push(b(S,!0,e,!0));return C(s)}function x(e){var t,s;return o.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:e.dashboard,message:null!==(t=e.message)&&void 0!==t?t:"",overwrite:null!==(s=e.overwrite)&&void 0!==s&&s,folderId:e.folderId})}function y(e,t){return(0,n.i)().request({method:"DELETE",url:`/api/folders/${e}?forceDeleteRules=true`,showSuccessAlert:!0===t})}function w(e){return(0,n.i)().post("/api/folders",e)}function j(e,t){return(0,n.i)().search({query:e,type:"dash-folder",permission:t})}function k(e){return(0,n.i)().get(`/api/folders/id/${e}`)}function S(e,t){return(0,n.i)().request({method:"DELETE",url:`/api/dashboards/uid/${e}`,showSuccessAlert:!0===t})}function C(e){return e.reduce(((e,t)=>Promise.resolve(e).then(t)),[])}},"./public/app/features/manage-dashboards/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{G7:()=>n,n$:()=>i,MO:()=>l,Zc:()=>c,S9:()=>d,Nw:()=>u,ZP:()=>p});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");let n,i;!function(e){e[e.Gcom=0]="Gcom",e[e.Json=1]="Json"}(n||(n={})),function(e){e.DataSource="datasource",e.Constant="constant"}(i||(i={}));const r={meta:{updatedAt:"",orgName:""},dashboard:{},source:n.Json,inputs:{},isLoaded:!1},o=(0,a.oM)({name:"manageDashboards",initialState:r,reducers:{setGcomDashboard:(e,t)=>Object.assign({},e,{dashboard:Object.assign({},t.payload.json,{id:null}),meta:{updatedAt:t.payload.updatedAt,orgName:t.payload.orgName},source:n.Gcom,isLoaded:!0}),setJsonDashboard:(e,t)=>Object.assign({},e,{dashboard:Object.assign({},t.payload,{id:null}),source:n.Json,isLoaded:!0}),clearDashboard:e=>Object.assign({},e,{dashboard:{},isLoaded:!1}),setInputs:(e,t)=>Object.assign({},e,{inputs:{dataSources:t.payload.filter((e=>e.type===i.DataSource)),constants:t.payload.filter((e=>e.type===i.Constant))}})}}),{clearDashboard:l,setInputs:c,setGcomDashboard:d,setJsonDashboard:u}=o.actions,p={importDashboard:o.reducer}},"./public/app/features/org/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{xR:()=>n,jR:()=>i,ZP:()=>r});const a=(0,s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"organization",initialState:{organization:{}},reducers:{organizationLoaded:(e,t)=>Object.assign({},e,{organization:t.payload}),setOrganizationName:(e,t)=>Object.assign({},e,{organization:Object.assign({},e.organization,{name:t.payload})})}}),{setOrganizationName:n,organizationLoaded:i}=a.actions,r={organization:a.reducer}},"./public/app/features/panel/PanelRenderer.tsx":(e,t,s)=>{"use strict";s.d(t,{$:()=>m});var a,n,i,r=s("./node_modules/react/index.js"),o=s("./packages/grafana-data/src/index.ts"),l=s("./public/app/core/core.ts"),c=s("./node_modules/react-use/esm/useAsync.js"),d=s("./public/app/features/dashboard/state/getPanelOptionsWithDefaults.ts"),u=s("./public/app/features/plugins/plugin_loader.ts"),p=s("./packages/grafana-ui/src/index.ts"),h=s("./node_modules/react/jsx-runtime.js");const g={defaults:{},overrides:[]};function m(e){const{pluginId:t,data:s,timeZone:m=(0,o.getTimeZone)(),options:f={},width:b,height:v,title:x,onOptionsChange:y=(()=>{}),onChangeTimeRange:w=(()=>{}),fieldConfig:j=g}=e,[k,S]=(0,r.useState)(j),{value:C,error:T,loading:N}=(0,c.Z)((()=>(0,u.Ub)(t)),[t]),O=function(e,t,s){return(0,r.useMemo)((()=>{if(e)return(0,d.d4)({plugin:e,currentOptions:t,currentFieldConfig:s,isAfterPluginChange:!1})}),[e,s,t])}(C,f,k),I=function(e,t,s,a){const n=null==t?void 0:t.fieldConfig,i=null==s?void 0:s.series,l=null==e?void 0:e.fieldConfigRegistry,c=(0,p.useTheme2)(),d=(0,r.useRef)(0);return(0,r.useMemo)((()=>{if(l&&n&&s)return d.current=d.current+1,Object.assign({},s,{series:(0,o.applyFieldOverrides)({data:i,fieldConfig:n,fieldConfigRegistry:l,replaceVariables:e=>e,theme:c,timeZone:a}),structureRev:d.current})}),[l,n,s,i,a,c])}(C,O,s,m);if((0,r.useEffect)((()=>{S((e=>Object.assign({},e,j)))}),[j]),T)return(0,h.jsxs)("div",{children:["Failed to load plugin: ",T.message]});if(function(e,t,s){return e||(null==t?void 0:t.meta.id)!==s}(N,C,t))return a||(a=(0,h.jsx)("div",{children:"Loading plugin panel..."}));if(!C||!C.panel)return n||(n=(0,h.jsx)("div",{children:"Seems like the plugin you are trying to load does not have a panel component."}));if(!I)return i||(i=(0,h.jsx)("div",{children:"No panel data"}));const P=C.panel;return(0,h.jsx)(P,{id:1,data:I,title:x,timeRange:I.timeRange,timeZone:m,options:O.options,fieldConfig:k,transparent:!1,width:b,height:v,renderCounter:0,replaceVariables:e=>e,onOptionsChange:y,onFieldConfigChange:S,onChangeTimeRange:w,eventBus:l.h$})}},"./public/app/features/panel/metrics_panel_ctrl.ts":(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/features/panel/panel_ctrl.ts"),i=s("./public/app/features/dashboard/utils/panel.ts"),r=s("./packages/grafana-data/src/index.ts");function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l extends n.q{constructor(e,t){super(e,t),o(this,"contextSrv",void 0),o(this,"datasourceSrv",void 0),o(this,"timeSrv",void 0),o(this,"templateSrv",void 0),o(this,"interval",void 0),o(this,"intervalMs",void 0),o(this,"resolution",void 0),o(this,"timeInfo",void 0),o(this,"skipDataOnInit",!1),o(this,"dataList",[]),o(this,"querySubscription",void 0),o(this,"useDataFrames",!1),o(this,"panelData",void 0),o(this,"panelDataObserver",{next:e=>{if(this.panelData=e,e.state===r.LoadingState.Error&&(this.loading=!1,this.processDataError(e.error)),e.state===r.LoadingState.Loading)return this.loading=!0,void this.angularDirtyCheck();if(e.request){const{timeInfo:t}=e.request;t&&(this.timeInfo=t)}if(e.timeRange&&(this.range=e.timeRange),this.useDataFrames)this.handleDataFrames(e.series);else{const t=e.series.map((e=>(0,r.toLegacyResponseData)(e)));this.handleQueryResult({data:t})}this.angularDirtyCheck()}}),this.contextSrv=t.get("contextSrv"),this.datasourceSrv=t.get("datasourceSrv"),this.timeSrv=t.get("timeSrv"),this.templateSrv=t.get("templateSrv"),this.panel.datasource=this.panel.datasource||null,this.events.on(r.PanelEvents.refresh,this.onMetricsPanelRefresh.bind(this)),this.events.on(r.PanelEvents.panelTeardown,this.onPanelTearDown.bind(this)),this.events.on(r.PanelEvents.componentDidMount,this.onMetricsPanelMounted.bind(this))}onMetricsPanelMounted(){const e=this.panel.getQueryRunner();this.querySubscription=e.getData({withTransforms:!0,withFieldConfig:!0}).subscribe(this.panelDataObserver)}onPanelTearDown(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)}onMetricsPanelRefresh(){if(!this.otherPanelInFullscreenMode()){if(this.panel.snapshotData){this.updateTimeRange();let e=this.panel.snapshotData;return(0,a.isArray)(e)||(e=e.data),this.panelData={state:r.LoadingState.Done,series:e,timeRange:this.range},this.$timeout((()=>{this.events.emit(r.PanelEvents.dataSnapshotLoad,e)}))}return delete this.error,this.loading=!0,this.datasourceSrv.get(this.panel.datasource,this.panel.scopedVars).then(this.issueQueries.bind(this)).catch((e=>{this.processDataError(e)}))}}processDataError(e){e.cancelled?console.log("Panel request cancelled",e):(this.error=e.message||"Request Error",e.data&&(e.data.message?this.error=e.data.message:e.data.error&&(this.error=e.data.error)),this.angularDirtyCheck())}angularDirtyCheck(){this.$scope.$root.$$phase||this.$scope.$digest()}updateTimeRange(e){this.datasource=e||this.datasource,this.range=this.timeSrv.timeRange();const t=(0,i.W1)(this.panel,this.range);this.timeInfo=t.timeInfo,this.range=t.timeRange}issueQueries(e){this.updateTimeRange(e),this.datasource=e;const t=this.panel;return t.getQueryRunner().run({datasource:t.datasource,queries:t.targets,panelId:t.id,dashboardId:this.dashboard.id,timezone:this.dashboard.getTimezone(),timeInfo:this.timeInfo,timeRange:this.range,maxDataPoints:t.maxDataPoints||this.width,minInterval:t.interval,scopedVars:t.scopedVars,cacheTimeout:t.cacheTimeout,transformations:t.transformations})}handleDataFrames(e){this.loading=!1,this.dashboard&&this.dashboard.snapshot&&(this.panel.snapshotData=e.map((e=>(0,r.toDataFrameDTO)(e))));try{this.events.emit(r.PanelEvents.dataFramesReceived,e)}catch(e){this.processDataError(e)}}handleQueryResult(e){this.loading=!1,this.dashboard.snapshot&&(this.panel.snapshotData=e.data),e&&e.data||(console.log("Data source query result invalid, missing data field:",e),e={data:[]});try{this.events.emit(r.PanelEvents.dataReceived,e.data)}catch(e){this.processDataError(e)}}}},"./public/app/features/panel/panel_ctrl.ts":(e,t,s)=>{"use strict";s.d(t,{q:()=>c});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/core/config.ts"),i=s("./public/app/core/core.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/angular/AngularLocationWrapper.ts");function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class c{constructor(e,t){var s,a;l(this,"panel",void 0),l(this,"error",void 0),l(this,"pluginName",""),l(this,"pluginId",""),l(this,"editorTabs",void 0),l(this,"$scope",void 0),l(this,"$injector",void 0),l(this,"$timeout",void 0),l(this,"editModeInitiated",!1),l(this,"containerHeight",void 0),l(this,"events",void 0),l(this,"loading",!1),l(this,"timing",void 0),l(this,"$location",void 0),l(this,"onPluginTypeChange",(e=>{})),this.panel=null!==(s=this.panel)&&void 0!==s?s:e.$parent.panel,this.dashboard=null!==(a=this.dashboard)&&void 0!==a?a:e.$parent.dashboard,this.$injector=t,this.$scope=e,this.$timeout=t.get("$timeout"),this.editorTabs=[],this.$location=new o.O,this.events=new r.EventBusSrv,this.timing={};const i=n.ZP.panels[this.panel.type];i&&(this.pluginId=i.id,this.pluginName=i.name),e.$on(r.PanelEvents.componentDidMount.name,(()=>this.panelDidMount()))}panelDidMount(){this.events.emit(r.PanelEvents.componentDidMount),this.events.emit(r.PanelEvents.initialized),this.dashboard.panelInitialized(this.panel)}renderingCompleted(){i.rv.renderingCompleted()}refresh(){this.panel.refresh()}publishAppEvent(e,t){this.$scope.$root.appEvent(e,t)}initEditMode(){this.editModeInitiated||(this.editModeInitiated=!0,this.events.emit(r.PanelEvents.editModeInitialized))}addEditorTab(e,t,s,n){const i={title:e,directiveFn:t,icon:n};(0,a.isString)(t)&&(i.directiveFn=()=>({templateUrl:t})),s?this.editorTabs.splice(s,0,i):this.editorTabs.push(i)}getExtendedMenu(){const e=[];return this.events.emit(r.PanelEvents.initPanelActions,e),e}async getAdditionalMenuItems(){return[]}otherPanelInFullscreenMode(){return this.dashboard.otherPanelInFullscreen(this.panel)}render(e){this.events.emit(r.PanelEvents.render,e)}}},"./public/app/features/panel/panellinks/linkSuppliers.ts":(e,t,s)=>{"use strict";s.d(t,{n:()=>i,H:()=>r});var a=s("./packages/grafana-data/src/index.ts"),n=s("./public/app/features/panel/panellinks/link_srv.ts");const i=e=>{const t=e.field.links;if(t&&0!==t.length)return{getLinks:s=>{const i={};if(e.view){const{dataFrame:t}=e.view;i.__series={value:{name:t.name,refId:t.refId},text:"Series"};const s=void 0!==e.colIndex?t.fields[e.colIndex]:void 0;if(s){if(i.__field={value:{name:s.name,labels:s.labels},text:"Field"},void 0!==e.rowIndex&&e.rowIndex>=0){const{timeField:n}=(0,a.getTimeField)(t);i.__value={value:{raw:s.values.get(e.rowIndex),numeric:e.display.numeric,text:(0,a.formattedValueToString)(e.display),time:n?n.values.get(e.rowIndex):void 0},text:"Value"}}e.view&&(i.__data={value:{name:t.name,refId:t.refId,fields:(0,a.getFieldDisplayValuesProxy)({frame:t,rowIndex:e.rowIndex})},text:"Data"})}else i.__value={value:{raw:e.display.numeric,numeric:e.display.numeric,text:(0,a.formattedValueToString)(e.display),calc:e.name},text:"Value"}}else console.log("VALUE",e);const r=(e,t,a)=>{const n=Object.assign({},i,t);return s(e,n,a)};return t.map((t=>(0,n.Bq)().getDataLinkUIModel(t,r,e)))}}},r=e=>{const t=e.links;if(t&&0!==t.length)return{getLinks:()=>t.map((t=>(0,n.Bq)().getDataLinkUIModel(t,e.replaceVariables,e)))}}},"./public/app/features/panel/panellinks/link_srv.ts":(e,t,s)=>{"use strict";s.d(t,{PR:()=>g,PW:()=>b,pH:()=>y,Bq:()=>w});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/features/dashboard/services/TimeSrv.ts"),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./public/app/core/core_module.ts"),o=s("./public/app/core/config.ts"),l=s("./packages/grafana-data/src/index.ts"),c=s("./public/app/features/variables/getAllVariableValuesForUrl.ts");const d=[{value:`${l.DataLinkBuiltInVars.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:l.VariableOrigin.BuiltIn},{value:`${l.DataLinkBuiltInVars.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:l.VariableOrigin.BuiltIn},{value:`${l.DataLinkBuiltInVars.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:l.VariableOrigin.BuiltIn}],u=[{value:`${l.DataLinkBuiltInVars.seriesName}`,label:"Name",documentation:"Name of the series",origin:l.VariableOrigin.Series}],p=[{value:`${l.DataLinkBuiltInVars.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:l.VariableOrigin.Value},{value:`${l.DataLinkBuiltInVars.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:l.VariableOrigin.Value},{value:`${l.DataLinkBuiltInVars.valueRaw}`,label:"Raw",documentation:"Raw value",origin:l.VariableOrigin.Value}],h=e=>e.includes(".")||e.trim().includes(" ")?`["${e}"]`:`.${e}`,g=()=>[...(0,i.getTemplateSrv)().getVariables().map((e=>({value:e.name,label:e.name,origin:l.VariableOrigin.Template}))),{value:`${l.DataLinkBuiltInVars.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:l.VariableOrigin.Template},...d],m=e=>{const t=[];for(const s of e)for(const e of s.fields)if(e.labels)for(const s of Object.keys(e.labels))t.push(s);const s=(0,a.chain)(t).flatten().uniq().value();return[{value:`${l.DataLinkBuiltInVars.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:l.VariableOrigin.Field},...s.map((e=>({value:`__field.labels${h(e)}`,label:`labels.${e}`,documentation:`${e} label value`,origin:l.VariableOrigin.Field})))]},f=e=>{let t,s;const a=[],n={};if(1!==e.length)return[];const i=e[0];for(const r of i.fields){const o=(0,l.getFieldDisplayName)(r,i,e);n[o]||(a.push({value:`__data.fields${h(o)}`,label:`${o}`,documentation:`Formatted value for ${o} on the same row`,origin:l.VariableOrigin.Fields}),n[o]=!0,t||r.type!==l.FieldType.number||(t=Object.assign({},r,{name:o})),!s&&r.config.displayName&&r.config.displayName!==r.name&&(s=Object.assign({},r,{name:o})))}return a.length&&a.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:l.VariableOrigin.Fields}),t&&(a.push({value:`__data.fields${h(t.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:l.VariableOrigin.Fields}),a.push({value:`__data.fields${h(t.name)}.text`,label:"Show text value",documentation:"the text value",origin:l.VariableOrigin.Fields})),s&&a.push({value:`__data.fields${h(s.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:l.VariableOrigin.Fields}),a},b=(e,t)=>{const s={value:`${l.DataLinkBuiltInVars.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:l.VariableOrigin.Value};return t===l.VariableSuggestionsScope.Values?[...u,...m(e),...p,s,...f(e),...g()]:[...u,...m(e),...f(e),...g()]};class v{constructor(){var e,t,s;s=(e,t,s)=>{var a;let n=e.url;e.onBuildUrl&&(n=e.onBuildUrl({origin:s,replaceVariables:t}));const i={href:l.locationUtil.assureBaseUrl(n.replace(/\n/g,"")),title:null!==(a=e.title)&&void 0!==a?a:"",target:e.targetBlank?"_blank":void 0,origin:s};return t&&(i.href=t(i.href),i.title=t(e.title)),e.onClick&&(i.onClick=a=>{e.onClick({origin:s,replaceVariables:t,e:a})}),i.href=(0,o.iE)().disableSanitizeHtml?i.href:l.textUtil.sanitizeUrl(i.href),i},(t="getDataLinkUIModel")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}getLinkUrl(e){let t=l.locationUtil.assureBaseUrl((0,i.getTemplateSrv)().replace(e.url||"")),s={};if(e.keepTime){const e=(0,n.$t)().timeRangeForUrl();s.from=e.from,s.to=e.to}return e.includeVars&&(s=Object.assign({},s,(0,c.c)())),t=l.urlUtil.appendQueryToUrl(t,l.urlUtil.toUrlParams(s)),(0,o.iE)().disableSanitizeHtml?t:l.textUtil.sanitizeUrl(t)}getAnchorInfo(e){const t=(0,i.getTemplateSrv)(),s={};return s.href=this.getLinkUrl(e),s.title=t.replace(e.title||""),s.tooltip=t.replace(e.tooltip||""),s}getPanelLinkAnchorInfo(e,t){(0,l.deprecationWarning)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");return this.getDataLinkUIModel(e,((e,s,a)=>(0,i.getTemplateSrv)().replace(e,Object.assign({},t,s),a)),{})}}let x;function y(e){x=e}function w(){return x}v.$inject=[],r.ZP.service("linkSrv",v)},"./public/app/features/panel/query_ctrl.ts":(e,t,s)=>{"use strict";s.d(t,{G:()=>i});var a=s("./node_modules/lodash/lodash.js");function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e,t){var s,i,r,o,l;n(this,"target",void 0),n(this,"datasource",void 0),n(this,"panelCtrl",void 0),n(this,"panel",void 0),n(this,"hasRawMode",void 0),n(this,"error",void 0),n(this,"isLastQuery",void 0),this.$scope=e,this.$injector=t,this.panelCtrl=null!==(s=this.panelCtrl)&&void 0!==s?s:e.ctrl.panelCtrl,this.target=null!==(i=this.target)&&void 0!==i?i:e.ctrl.target,this.datasource=null!==(r=this.datasource)&&void 0!==r?r:e.ctrl.datasource,this.panel=null!==(o=null===(l=this.panelCtrl)||void 0===l?void 0:l.panel)&&void 0!==o?o:e.ctrl.panelCtrl.panel,this.isLastQuery=(0,a.indexOf)(this.panel.targets,this.target)===this.panel.targets.length-1}refresh(){this.panelCtrl.refresh()}}},"./public/app/features/playlist/PlaylistSrv.ts":(e,t,s)=>{"use strict";s.d(t,{r0:()=>l});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./packages/grafana-data/src/index.ts");function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o={kiosk:!0,autofitpanels:!0,orgId:!0};const l=new class{constructor(){r(this,"nextTimeoutId",void 0),r(this,"index",0),r(this,"numberOfLoops",0),r(this,"locationListenerUnsub",void 0),r(this,"isPlaying",!1),this.locationUpdated=this.locationUpdated.bind(this)}next(){clearTimeout(this.nextTimeoutId);if(this.index>this.dashboards.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3)return void(window.location.href=this.startUrl);this.index=0}const e=this.dashboards[this.index],t=n.locationService.getSearchObject(),s=(0,a.pickBy)(t,((e,t)=>o[t])),r=i.locationUtil.stripBaseFromUrl(e.url);this.index++,this.validPlaylistUrl=r,this.nextTimeoutId=setTimeout((()=>this.next()),this.interval),n.locationService.push(r+"?"+i.urlUtil.toUrlParams(s))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(e){e.pathname!==this.validPlaylistUrl&&this.stop()}start(e){return this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=n.locationService.getHistory().listen(this.locationUpdated),(0,n.getBackendSrv)().get(`/api/playlists/${e}`).then((t=>(0,n.getBackendSrv)().get(`/api/playlists/${e}/dashboards`).then((e=>{this.dashboards=e,this.interval=i.rangeUtil.intervalToMs(t.interval),this.next()}))))}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),n.locationService.getSearchObject().kiosk&&n.locationService.partial({kiosk:null}))}}},"./public/app/features/plugins/PluginDashboards.tsx":(e,t,s)=>{"use strict";s.d(t,{O:()=>h});var a,n,i=s("./node_modules/react/index.js"),r=s("./node_modules/lodash/lodash.js"),o=s("./packages/grafana-runtime/src/index.ts"),l=s("./public/app/core/core.ts"),c=s("./public/app/features/datasources/DashboardsTable.tsx"),d=s("./packages/grafana-data/src/index.ts"),u=s("./node_modules/react/jsx-runtime.js");function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class h extends i.PureComponent{constructor(e){super(e),p(this,"importAll",(()=>{this.importNext(0)})),p(this,"importNext",(e=>{const{dashboards:t}=this.state;return this.import(t[e],!0).then((()=>e+1<t.length?new Promise((t=>{setTimeout((()=>{this.importNext(e+1).then((()=>{t()}))}),500)})):Promise.resolve()))})),p(this,"import",((e,t)=>{const{plugin:s,datasource:a}=this.props,n={pluginId:s.id,path:e.path,overwrite:t,inputs:[]};return a&&n.inputs.push({name:"*",type:"datasource",pluginId:a.meta.id,value:a.name}),(0,o.getBackendSrv)().post("/api/dashboards/import",n).then((t=>{l.h$.emit(d.AppEvents.alertSuccess,["Dashboard Imported",e.title]),(0,r.extend)(e,t),this.setState({dashboards:[...this.state.dashboards]})}))})),p(this,"remove",(e=>{(0,o.getBackendSrv)().delete("/api/dashboards/"+e.importedUri).then((()=>{e.imported=!1,this.setState({dashboards:[...this.state.dashboards]})}))})),this.state={loading:!0,dashboards:[]}}async componentDidMount(){const e=this.props.plugin.id;(0,o.getBackendSrv)().get(`/api/plugins/${e}/dashboards`).then((e=>{this.setState({dashboards:e,loading:!1})}))}render(){const{loading:e,dashboards:t}=this.state;return e?a||(a=(0,u.jsx)("div",{children:"loading..."})):t&&t.length?(0,u.jsx)("div",{className:"gf-form-group",children:(0,u.jsx)(c.Z,{dashboards:t,onImport:this.import,onRemove:this.remove})}):n||(n=(0,u.jsx)("div",{children:"No dashboards are included with this plugin"}))}}},"./public/app/features/plugins/PluginPage.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U,getLoadingNav:()=>_,loadPlugin:()=>V});var a,n,i,r,o,l,c,d,u,p=s("./node_modules/react/index.js"),h=s("./node_modules/lodash/lodash.js"),g=s("./packages/grafana-data/src/index.ts"),m=s("./public/app/types/index.ts"),f=s("./packages/grafana-ui/src/index.ts"),b=s("./public/app/core/components/Page/Page.tsx"),v=s("./public/app/features/plugins/PluginSettingsCache.ts"),x=s("./public/app/features/plugins/plugin_loader.ts"),y=s("./public/app/core/nav_model_srv.ts"),w=s("./public/app/core/components/PluginHelp/PluginHelp.tsx"),j=s("./public/app/features/plugins/wrappers/AppConfigWrapper.tsx"),k=s("./public/app/features/plugins/PluginDashboards.tsx"),S=s("./public/app/core/core.ts"),C=s("./public/app/core/config.ts"),T=s("./public/app/core/services/context_srv.ts"),N=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),O=s("./packages/grafana-e2e-selectors/src/index.ts"),I=s("./public/app/types/events.ts"),P=s("./node_modules/react/jsx-runtime.js");function M({onDismiss:e,id:t,name:s}){const n=(0,f.useStyles2)(F);return(0,P.jsx)(f.Modal,{title:"Update Plugin",onDismiss:e,onClickBackdrop:e,isOpen:!0,children:(0,P.jsxs)(f.VerticalGroup,{spacing:"md",children:[(0,P.jsxs)(f.VerticalGroup,{spacing:"sm",children:[(0,P.jsxs)("p",{children:["Type the following on the command line to update ",s,"."]}),(0,P.jsx)("pre",{children:(0,P.jsxs)("code",{children:["grafana-cli plugins update ",t]})}),(0,P.jsxs)("span",{className:n.small,children:["Check out ",s," on ",(0,P.jsx)("a",{href:`https://grafana.com/plugins/${t}`,children:"Grafana.com"})," for README and changelog. If you do not have access to the command line, ask your Grafana administator."]})]}),(0,P.jsxs)("p",{className:n.weak,children:[(0,P.jsx)("img",{className:n.logo,src:"public/img/grafana_icon.svg",alt:"grafana logo"}),a||(a=(0,P.jsx)("strong",{children:"Pro tip"})),": To update all plugins at once, type"," ",(0,P.jsx)("code",{className:n.codeSmall,children:"grafana-cli plugins update-all"})," on the command line."]})]})})}function F(e){return{small:N.css`
      font-size: ${e.typography.bodySmall.fontSize};
      font-weight: ${e.typography.bodySmall.fontWeight};
    `,weak:N.css`
      color: ${e.colors.text.disabled};
      font-size: ${e.typography.bodySmall.fontSize};
    `,logo:N.css`
      vertical-align: sub;
      margin-right: ${e.spacing(.3)};
      width: ${e.spacing(2)};
    `,codeSmall:N.css`
      white-space: nowrap;
      margin: 0 ${e.spacing(.25)};
      padding: ${e.spacing(.25)};
    `}}const A="readme",D="dashboards",$="config";class L extends p.PureComponent{constructor(e){var t,s,a;super(e),a=()=>{const{id:e,name:t}=this.state.plugin.meta;S.h$.publish(new I.Dn({props:{id:e,name:t},component:M}))},(s="showUpdateInfo")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,this.state={loading:!0,nav:_(),defaultPage:A}}async componentDidMount(){const{location:e,queryParams:t}=this.props,{appSubUrl:s}=C.vc,a=await V(this.props.match.params.pluginId);if(!a)return void this.setState({loading:!1,nav:(0,y.rR)()});const{defaultPage:n,nav:i}=function(e,t,s,a,n){const{meta:i}=e;let r;const o=[];if(o.push({text:"Readme",icon:"file-alt",url:`${t}${s}?page=readme`,id:A}),n&&i.type===g.PluginType.app){if(e.angularConfigCtrl&&(o.push({text:"Config",icon:"cog",url:`${t}${s}?page=config`,id:$}),r=$),e.configPages)for(const a of e.configPages)o.push({text:a.title,icon:a.icon,url:`${t}${s}?page=${a.id}`,id:a.id}),r||(r=a.id);(0,h.find)(i.includes,{type:g.PluginIncludeType.dashboard})&&o.push({text:"Dashboards",icon:"apps",url:`${t}${s}?page=dashboards`,id:D})}r||(r=o[0].id);const l={text:i.name,img:i.info.logos.large,subTitle:i.info.author.name,breadcrumbs:[{title:"Plugins",url:"plugins"}],url:`${t}${s}`,children:E(a.page,o,r)};return{defaultPage:r,nav:{node:l,main:l}}}(a,s,e.pathname,t,T.Vt.hasRole("Admin"));this.setState({loading:!1,plugin:a,defaultPage:n,nav:i})}componentDidUpdate(e){const t=e.queryParams.page,s=this.props.queryParams.page;if(t!==s){const{nav:e,defaultPage:t}=this.state,a=Object.assign({},e.node,{children:E(s,e.node.children,t)});this.setState({nav:{node:a,main:a}})}}renderBody(){const{queryParams:e}=this.props,{plugin:t,nav:s}=this.state;if(!t)return(0,P.jsx)(f.Alert,{severity:m.F1.Error,title:"Plugin Not Found"});const a=s.main.children.find((e=>e.active));if(a){if(t.configPages)for(const s of t.configPages)if(s.id===a.id)return(0,P.jsx)(s.body,{plugin:t,query:e});if(t.meta.type===g.PluginType.app){if(a.id===D)return(0,P.jsx)(k.O,{plugin:t.meta});if(a.id===$&&t.angularConfigCtrl)return(0,P.jsx)(j.C,{app:t})}}return(0,P.jsx)(w.R,{plugin:t.meta,type:"help"})}renderVersionInfo(e){return e.info.version?(0,P.jsxs)("section",{className:"page-sidebar-section",children:[n||(n=(0,P.jsx)("h4",{children:"Version"})),(0,P.jsx)("span",{children:e.info.version}),e.hasUpdate&&(0,P.jsx)("div",{children:(0,P.jsx)(f.Tooltip,{content:e.latestVersion,theme:"info",placement:"top",children:(0,P.jsx)(f.LinkButton,{fill:"text",onClick:this.showUpdateInfo,children:"Update Available!"})})})]}):null}renderSidebarIncludeBody(e){if(e.type===g.PluginIncludeType.page){var t;const s=this.state.plugin.meta.id,a=e.name.toLowerCase().replace(" ","-"),n=null!==(t=e.path)&&void 0!==t?t:`plugins/${s}/page/${a}`;return(0,P.jsxs)("a",{href:n,children:[(0,P.jsx)("i",{className:R(e.type)}),e.name]})}return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("i",{className:R(e.type)}),e.name]})}renderSidebarIncludes(e){return e&&e.length?(0,P.jsxs)("section",{className:"page-sidebar-section",children:[i||(i=(0,P.jsx)("h4",{children:"Includes"})),(0,P.jsx)("ul",{className:"ui-list plugin-info-list",children:e.map((e=>(0,P.jsx)("li",{className:"plugin-info-list-item",children:this.renderSidebarIncludeBody(e)},e.name)))})]}):null}renderSidebarDependencies(e){return e?(0,P.jsxs)("section",{className:"page-sidebar-section",children:[r||(r=(0,P.jsx)("h4",{children:"Dependencies"})),(0,P.jsxs)("ul",{className:"ui-list plugin-info-list",children:[(0,P.jsxs)("li",{className:"plugin-info-list-item",children:[o||(o=(0,P.jsx)("img",{src:"public/img/grafana_icon.svg",alt:"Grafana logo"})),"Grafana ",e.grafanaVersion]}),e.plugins&&e.plugins.map((e=>(0,P.jsxs)("li",{className:"plugin-info-list-item",children:[(0,P.jsx)("i",{className:R(e.type)}),e.name," ",e.version]},e.name)))]})]}):null}renderSidebarLinks(e){return e.links&&e.links.length?(0,P.jsxs)("section",{className:"page-sidebar-section",children:[l||(l=(0,P.jsx)("h4",{children:"Links"})),(0,P.jsx)("ul",{className:"ui-list",children:e.links.map((e=>(0,P.jsx)("li",{children:(0,P.jsx)("a",{href:e.url,className:"external-link",target:"_blank",rel:"noreferrer noopener",children:e.name})},e.url)))})]}):null}renderPluginNotice(){const{plugin:e}=this.state;if(!e)return null;const t=e.meta.signature===g.PluginSignatureStatus.valid;return e.meta.signature===g.PluginSignatureStatus.internal?null:(0,P.jsxs)(f.Alert,{"aria-label":O.wl.pages.PluginPage.signatureInfo,severity:t?"info":"warning",title:"Plugin signature",children:[(0,P.jsxs)("div",{className:N.css`
            display: flex;
          `,children:[(0,P.jsx)(f.PluginSignatureBadge,{status:e.meta.signature,className:N.css`
              margin-top: 0;
            `}),t&&(0,P.jsx)(B,{signatureType:e.meta.signatureType,signatureOrg:e.meta.signatureOrg})]}),c||(c=(0,P.jsx)("br",{})),(0,P.jsxs)("p",{children:["Grafana Labs checks each plugin to verify that it has a valid digital signature. Plugin signature verification is part of our security measures to ensure plugins are safe and trustworthy."," ",!t&&"Grafana Labs can’t guarantee the integrity of this unsigned plugin. Ask the plugin author to request it to be signed."]}),d||(d=(0,P.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/",className:"external-link",target:"_blank",rel:"noreferrer",children:"Read more about plugins signing."}))]})}render(){const{loading:e,nav:t,plugin:s}=this.state,a=T.Vt.hasRole("Admin");return(0,P.jsx)(b.Z,{navModel:t,"aria-label":O.wl.pages.PluginPage.page,children:(0,P.jsx)(b.Z.Contents,{isLoading:e,children:s&&(0,P.jsxs)("div",{className:"sidebar-container",children:[(0,P.jsxs)("div",{className:"sidebar-content",children:[s.loadError&&(0,P.jsx)(f.Alert,{severity:m.F1.Error,title:"Error Loading Plugin",children:(0,P.jsxs)(P.Fragment,{children:["Check the server startup logs for more information. ",u||(u=(0,P.jsx)("br",{})),"If this plugin was loaded from git, make sure it was compiled."]})}),this.renderPluginNotice(),this.renderBody()]}),(0,P.jsx)("aside",{className:"page-sidebar",children:(0,P.jsxs)("section",{className:"page-sidebar-section",children:[this.renderVersionInfo(s.meta),a&&this.renderSidebarIncludes(s.meta.includes),this.renderSidebarDependencies(s.meta.dependencies),this.renderSidebarLinks(s.meta.info)]})})]})})})}}function E(e,t,s){let a=!1;const n=e||s,i=t.map((e=>{const t=!a&&n===e.id;return t&&(a=!0),Object.assign({},e,{active:t})}));return a||(i[0].active=!0),i}function R(e){switch(e){case"datasource":return"gicon gicon-datasources";case"panel":return"icon-gf icon-gf-panel";case"app":return"icon-gf icon-gf-apps";case"page":return"icon-gf icon-gf-endpoint-tiny";case"dashboard":return"gicon gicon-dashboard";default:return"icon-gf icon-gf-apps"}}function _(){const e={text:"Loading...",icon:"icon-gf icon-gf-panel"};return{node:e,main:e}}function V(e){return(0,v.a)(e).then((e=>e.type===g.PluginType.app?(0,x.Av)(e):e.type===g.PluginType.datasource?(0,x.nL)(e):e.type===g.PluginType.panel?(0,x._2)(e):e.type===g.PluginType.renderer?Promise.resolve({meta:e}):Promise.reject("Unknown Plugin type: "+e.type)))}const B=({signatureType:e,signatureOrg:t})=>{const s=(0,f.useStyles2)(z);if(!e&&!t)return null;const a=e===g.PluginSignatureType.grafana?"grafana":e===g.PluginSignatureType.commercial||e===g.PluginSignatureType.community?"shield":"shield-exclamation",n=e===g.PluginSignatureType.grafana?"Grafana Labs":(0,h.capitalize)(e);return(0,P.jsxs)(P.Fragment,{children:[e&&(0,P.jsx)(f.Badge,{color:"green",className:s.badge,text:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("strong",{className:s.strong,children:"Level: "}),(0,P.jsx)(f.Icon,{size:"xs",name:a})," ",n]})}),t&&(0,P.jsx)(f.Badge,{color:"green",className:s.badge,text:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("strong",{className:s.strong,children:"Signed by:"})," ",t]})})]})},z=e=>({badge:N.css`
    background-color: ${e.colors.background.canvas};
    border-color: ${e.colors.border.strong};
    color: ${e.colors.text.secondary};
    margin-left: ${e.spacing()};
  `,strong:N.css`
    color: ${e.colors.text.primary};
  `,icon:N.css`
    margin-right: ${e.spacing(.5)};
  `}),U=L},"./public/app/features/plugins/PluginSettingsCache.ts":(e,t,s)=>{"use strict";s.d(t,{a:()=>i});var a=s("./packages/grafana-runtime/src/index.ts");const n={};function i(e){const t=n[e];return t?Promise.resolve(t):(0,a.getBackendSrv)().get(`/api/plugins/${e}/settings`).then((t=>(n[e]=t,t))).catch((e=>Promise.reject("Unknown Plugin")))}},"./public/app/features/plugins/admin/constants.ts":(e,t,s)=>{"use strict";s.d(t,{O2:()=>a,qK:()=>n,uJ:()=>i});const a="/api/plugins",n="/api/gnet",i="plugins"},"./public/app/features/plugins/admin/helpers.ts":(e,t,s)=>{"use strict";s.d(t,{bO:()=>l,RN:()=>c,uR:()=>d,Uj:()=>p,Nh:()=>h,AA:()=>g,XB:()=>m});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./node_modules/semver/index.js"),i=s("./packages/grafana-data/src/index.ts"),r=s("./public/app/core/services/context_srv.ts"),o=s("./public/app/core/services/backend_srv.ts");function l(){return a.config.bootData.user.isGrafanaAdmin}function c(){return r.Vt.hasRole("Admin")}function d(e=[],t=[],s){const a=[],n=function(e=[]){return e.reduce(((e,t)=>(e[t.pluginId]=t,e)),{})}(s);return e.forEach((e=>{const s=t.find((t=>t.slug===e.id)),i=n[e.id];s||a.push(u(e,void 0,i))})),t.forEach((t=>{const s=e.find((e=>e.id===t.slug)),i=n[t.slug];a.push(u(s,t,i))})),a}function u(e,t,s){return!e&&t?function(e,t){const{name:s,slug:a,description:n,version:r,orgName:o,popularity:l,downloads:c,typeCode:d,updatedAt:u,createdAt:p,status:h,versionSignatureType:g,signatureType:m}=e,f=!!t;return{description:n,downloads:c,id:a,info:{logos:{small:`https://grafana.com/api/plugins/${a}/versions/${r}/logos/small`,large:`https://grafana.com/api/plugins/${a}/versions/${r}/logos/large`}},name:s,orgName:o,popularity:l,publishedAt:p,signature:""!==m||""!==g?i.PluginSignatureStatus.valid:i.PluginSignatureStatus.missing,updatedAt:u,version:r,hasUpdate:!1,isInstalled:f,isDisabled:f,isCore:e.internal,isDev:!1,isEnterprise:"enterprise"===h,type:d,error:null==t?void 0:t.errorCode}}(t,s):e&&!t?function(e,t){const{name:s,info:{description:a,version:n,logos:i,updated:r,author:o},id:l,signature:c,dev:d,type:u,signatureOrg:p,signatureType:h}=e;return{description:a,downloads:0,id:l,info:{logos:i},name:s,orgName:o.name,popularity:0,publishedAt:"",signature:c,signatureOrg:p,signatureType:h,updatedAt:r,version:n,hasUpdate:!1,isInstalled:!0,isDisabled:!!t,isCore:"internal"===c,isDev:Boolean(d),isEnterprise:!1,type:u,error:null==t?void 0:t.errorCode}}(e,s):function(e,t,s){const a=(null==t?void 0:t.version)||(null==e?void 0:e.info.version)||"",r=(null==e?void 0:e.hasUpdate)||Boolean((null==t?void 0:t.version)&&(null==e?void 0:e.info.version)&&(0,n.gt)(null==t?void 0:t.version,null==e?void 0:e.info.version)),o=(null==t?void 0:t.slug)||(null==e?void 0:e.id)||"",l=(null==t?void 0:t.signatureType)||(null==t?void 0:t.versionSignatureType),c=!!s;let d={small:"https://grafana.com/api/plugins/404notfound/versions/none/logos/small",large:"https://grafana.com/api/plugins/404notfound/versions/none/logos/large"};t?d={small:`https://grafana.com/api/plugins/${o}/versions/${a}/logos/small`,large:`https://grafana.com/api/plugins/${o}/versions/${a}/logos/large`}:e&&e.info.logos&&(d=e.info.logos);return{description:(null==t?void 0:t.description)||(null==e?void 0:e.info.description)||"",downloads:(null==t?void 0:t.downloads)||0,hasUpdate:r,id:o,info:{logos:d},isCore:Boolean((null==t?void 0:t.internal)||(null==e?void 0:e.signature)===i.PluginSignatureStatus.internal),isDev:Boolean(null==e?void 0:e.dev),isEnterprise:"enterprise"===(null==t?void 0:t.status),isInstalled:Boolean(e)||c,isDisabled:c,name:(null==t?void 0:t.name)||(null==e?void 0:e.name)||"",orgName:(null==t?void 0:t.orgName)||(null==e?void 0:e.info.author.name)||"",popularity:(null==t?void 0:t.popularity)||0,publishedAt:(null==t?void 0:t.createdAt)||"",type:(null==t?void 0:t.typeCode)||(null==e?void 0:e.type),signature:(null==e?void 0:e.signature)||(l?i.PluginSignatureStatus.valid:i.PluginSignatureStatus.missing),signatureOrg:(null==e?void 0:e.signatureOrg)||(null==t?void 0:t.versionSignedByOrgName),signatureType:(null==e?void 0:e.signatureType)||(null==t?void 0:t.versionSignatureType)||(null==t?void 0:t.signatureType)||void 0,updatedAt:(null==t?void 0:t.updatedAt)||(null==e?void 0:e.info.updated)||"",version:a,error:null==s?void 0:s.errorCode}}(e,t,s)}const p=e=>`https://grafana.com/grafana/plugins/${e}`;let h;!function(e){e.nameAsc="nameAsc",e.nameDesc="nameDesc",e.updated="updated",e.published="published",e.downloads="downloads"}(h||(h={}));const g=(e,t)=>{const s={nameAsc:(e,t)=>e.name.localeCompare(t.name),nameDesc:(e,t)=>t.name.localeCompare(e.name),updated:(e,t)=>(0,i.dateTimeParse)(t.updatedAt).valueOf()-(0,i.dateTimeParse)(e.updatedAt).valueOf(),published:(e,t)=>(0,i.dateTimeParse)(t.publishedAt).valueOf()-(0,i.dateTimeParse)(e.publishedAt).valueOf(),downloads:(e,t)=>t.downloads-e.downloads};return s[t]?e.sort(s[t]):e};const m=()=>(0,o.i)().get("/api/frontend/settings").then((e=>{a.config.panels=e.panels}))},"./public/app/features/plugins/admin/state/actions.ts":(e,t,s)=>{"use strict";s.d(t,{Qd:()=>b,DD:()=>x,tQ:()=>v,N9:()=>y,Ro:()=>k,m3:()=>j,Tz:()=>w});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./public/app/features/plugins/plugin_loader.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/features/plugins/admin/constants.ts"),l=s("./public/app/features/plugins/admin/helpers.ts");async function c(){return(await(0,n.getBackendSrv)().get(`${o.qK}/plugins`)).items}async function d(){try{return await(0,n.getBackendSrv)().get(`${o.O2}/errors`)}catch(e){return[]}}async function u(e,t){try{return await(0,n.getBackendSrv)().get(`${o.qK}/plugins/${e}`,{})}catch(e){return void(e.isHandled=!0)}}async function p(e){try{return((await(0,n.getBackendSrv)().get(`${o.qK}/plugins/${e}/versions`)).items||[]).map((({version:e,createdAt:t})=>({version:e,createdAt:t})))}catch(e){return e.isHandled=!0,[]}}async function h(e){try{const t=await(0,n.getBackendSrv)().get(`${o.O2}/${e}/markdown/help`);return t?(0,r.renderMarkdown)(t):""}catch(e){return e.isHandled=!0,""}}async function g(){return await(0,n.getBackendSrv)().get(`${o.O2}`,{embedded:0})}async function m(e,t){return await(0,n.getBackendSrv)().post(`${o.O2}/${e}/install`,{version:t})}async function f(e){return await(0,n.getBackendSrv)().post(`${o.O2}/${e}/uninstall`)}const b=(0,a.hg)(`${o.uJ}/fetchAll`,(async(e,t)=>{try{const{dispatch:e}=t,[s,a,{payload:n}]=await Promise.all([g(),d(),e(v())]);return(0,l.uR)(s,n,a)}catch(e){return t.rejectWithValue("Unknown error.")}})),v=(0,a.hg)(`${o.uJ}/fetchRemotePlugins`,(async(e,t)=>{try{return await c()}catch(e){return e.isHandled=!0,t.rejectWithValue([])}})),x=(0,a.hg)(`${o.uJ}/fetchDetails`,(async(e,t)=>{try{return{id:e,changes:{details:await async function(e){var t,s;const a=(await g()).find((t=>t.id===e)),[n,i,r]=(Boolean(a),await Promise.all([u(e),p(e),h(e)])),o=null==n||null===(t=n.json)||void 0===t?void 0:t.dependencies;return{grafanaDependency:null!=o&&o.grafanaDependency?null==o?void 0:o.grafanaDependency:null!=o&&o.grafanaVersion?`>=${null==o?void 0:o.grafanaVersion}`:"",pluginDependencies:(null==o?void 0:o.plugins)||[],links:(null==n||null===(s=n.json)||void 0===s?void 0:s.info.links)||(null==a?void 0:a.info.links)||[],readme:r||(null==n?void 0:n.readme),versions:i}}(e)}}}catch(e){return t.rejectWithValue("Unknown error.")}})),y=(0,a.hg)(`${o.uJ}/install`,(async({id:e,version:t,isUpdating:s=!1},a)=>{const n=s?{isInstalled:!0,hasUpdate:!1}:{isInstalled:!0};try{return await m(e,t),await(0,l.XB)(),{id:e,changes:n}}catch(e){return a.rejectWithValue("Unknown error.")}})),w=(0,a.hg)(`${o.uJ}/uninstall`,(async(e,t)=>{try{return await f(e),await(0,l.XB)(),{id:e,changes:{isInstalled:!1}}}catch(e){return t.rejectWithValue("Unknown error.")}})),j=(0,a.hg)(`${o.uJ}/loadPluginDashboards`,(async(e,t)=>{const s=`api/plugins/${t.getState().dataSources.dataSource.type}/dashboards`;return(0,n.getBackendSrv)().get(s)})),k=e=>async(t,s)=>{let a=s().plugins.panels[e];return a||(a=await(0,i.Ub)(e),s().plugins.panels[e]||t({type:`${o.uJ}/loadPanelPlugin/fulfilled`,payload:a})),a}},"./public/app/features/plugins/admin/state/reducer.ts":(e,t,s)=>{"use strict";s.d(t,{CD:()=>o,UC:()=>h,I6:()=>g});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./public/app/features/plugins/admin/state/actions.ts"),i=s("./public/app/features/plugins/admin/types.ts"),r=s("./public/app/features/plugins/admin/constants.ts");const o=(0,a.HF)(),l=e=>new RegExp(`${r.uJ}/(.*)/pending`).test(e.type),c=e=>new RegExp(`${r.uJ}/(.*)/fulfilled`).test(e.type),d=e=>new RegExp(`${r.uJ}/(.*)/rejected`).test(e.type),u=e=>{const t=e.lastIndexOf("/");return e.substring(0,t)},p=(0,a.oM)({name:"plugins",initialState:{items:o.getInitialState(),requests:{},settings:{displayMode:i.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},reducers:{setDisplayMode(e,t){e.settings.displayMode=t.payload}},extraReducers:e=>e.addCase(n.Qd.fulfilled,((e,t)=>{o.upsertMany(e.items,t.payload)})).addCase(n.DD.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(n.N9.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(n.Tz.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(`${r.uJ}/loadPanelPlugin/fulfilled`,((e,t)=>{e.panels[t.payload.meta.id]=t.payload})).addCase(n.m3.pending,((e,t)=>{e.isLoadingPluginDashboards=!0,e.dashboards=[]})).addCase(n.m3.fulfilled,((e,t)=>{e.isLoadingPluginDashboards=!1,e.dashboards=t.payload})).addMatcher(l,((e,t)=>{e.requests[u(t.type)]={status:i.eE.Pending}})).addMatcher(c,((e,t)=>{e.requests[u(t.type)]={status:i.eE.Fulfilled}})).addMatcher(d,((e,t)=>{e.requests[u(t.type)]={status:i.eE.Rejected,error:t.payload}}))}),{setDisplayMode:h}=p.actions,{reducer:g}=p},"./public/app/features/plugins/admin/types.ts":(e,t,s)=>{"use strict";let a,n,i,r,o,l,c;s.d(t,{lL:()=>a,cd:()=>n,Co:()=>i,vF:()=>r,xc:()=>o,tu:()=>l,eE:()=>c}),function(e){e.Grid="grid",e.List="list"}(a||(a={})),function(e){e.Home="plugins-home",e.Browse="plugins-browse",e.Details="plugins-details",e.HomeAdmin="plugins-home-admin",e.BrowseAdmin="plugins-browse-admin",e.DetailsAdmin="plugins-details-admin"}(n||(n={})),function(e){e.app="apps",e.datasource="database",e.panel="credit-card",e.renderer="pen"}(i||(i={})),function(e){e.INSTALL="INSTALL",e.UNINSTALL="UNINSTALL",e.UPDATE="UPDATE",e.REINSTALL="REINSTALL"}(r||(r={})),function(e){e.OVERVIEW="Overview",e.VERSIONS="Version history",e.CONFIG="Config",e.DASHBOARDS="Dashboards"}(o||(o={})),function(e){e.OVERVIEW="overview",e.VERSIONS="version-history",e.CONFIG="config",e.DASHBOARDS="dashboards"}(l||(l={})),function(e){e.Pending="Pending",e.Fulfilled="Fulfilled",e.Rejected="Rejected"}(c||(c={}))},"./public/app/features/plugins/datasource_srv.ts":(e,t,s)=>{"use strict";s.d(t,{ak:()=>p});var a=s("./public/app/core/core_module.ts"),n=s("./public/app/features/plugins/plugin_loader.ts"),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/features/expressions/ExpressionDatasource.ts"),l=s("./node_modules/lodash/lodash.js");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d{constructor(e,t,s){c(this,"datasources",{}),c(this,"settingsMapByName",{}),c(this,"settingsMapByUid",{}),c(this,"settingsMapById",{}),c(this,"defaultName",""),this.$injector=e,this.$rootScope=t,this.templateSrv=s}init(e,t){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=e,this.defaultName=t;for(const t of Object.values(e))this.settingsMapByUid[t.uid]=t,this.settingsMapById[t.id]=t}getDataSourceSettingsByUid(e){return this.settingsMapByUid[e]}getInstanceSettings(e){var t;if("default"===e||null==e)return this.settingsMapByName[this.defaultName];if(e===o.DB||e===o.Yq)return o.bE;if("$"===e[0]){const t=this.templateSrv.replace(e,{},u);let a;var s;if("default"===t)a=this.settingsMapByName[this.defaultName];else a=null!==(s=this.settingsMapByUid[t])&&void 0!==s?s:this.settingsMapByName[t];if(!a)return;const n=(0,l.cloneDeep)(a);return n.name=e,n.isDefault=!1,n}return null!==(t=this.settingsMapByUid[e])&&void 0!==t?t:this.settingsMapByName[e]}get(e,t){if(!e)return this.get(this.defaultName);const s=this.settingsMapByUid[e];return s&&(e=s.name),this.datasources[e]?Promise.resolve(this.datasources[e]):"default"===(e=this.templateSrv.replace(e,t,u))&&"default"!==this.defaultName?this.get(this.defaultName):this.datasources[e]?Promise.resolve(this.datasources[e]):this.loadDatasource(e)}async loadDatasource(e){if(e===o.DB||e===o.Yq)return this.datasources[e]=o.mV,Promise.resolve(o.mV);let t=this.settingsMapByName[e];if(!t&&(t=this.settingsMapById[e],!t))return Promise.reject({message:`Datasource named ${e} was not found`});try{const s=await(0,n.nL)(t.meta);if(this.datasources[e])return this.datasources[e];const a=1!==s.DataSourceClass.length?this.$injector.instantiate(s.DataSourceClass,{instanceSettings:t}):new s.DataSourceClass(t);return a.components=s.components,a.meta=t.meta,this.datasources[e]=a,a}catch(s){return this.$rootScope.appEvent(r.AppEvents.alertError,[t.name+" plugin failed",s.toString()]),Promise.reject({message:`Datasource named ${e} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(e={}){const t=Object.values(this.settingsMapByName).filter((t=>"grafana"!==t.meta.id&&"mixed"!==t.meta.id&&"dashboard"!==t.meta.id&&(!(e.metrics&&!t.meta.metrics)&&(!(e.alerting&&!t.meta.alerting)&&(!(e.tracing&&!t.meta.tracing)&&(!(e.annotations&&!t.meta.annotations)&&(!(e.alerting&&!t.meta.alerting)&&((!e.pluginId||t.meta.id===e.pluginId)&&(!(e.filter&&!e.filter(t))&&(!(e.type&&!(Array.isArray(e.type)?e.type.includes(t.type):e.type===t.type))&&!(!e.all&&!0!==t.meta.metrics&&!0!==t.meta.annotations&&!0!==t.meta.tracing&&!0!==t.meta.logs&&!0!==t.meta.alerting)))))))))));if(e.variables)for(const e of this.templateSrv.getVariables().filter((e=>"datasource"===e.type))){const s=e,a="default"===s.current.value?this.defaultName:s.current.value,n=this.settingsMapByName[a];if(n){const s=`\${${e.name}}`;t.push(Object.assign({},n,{name:s}))}}const s=t.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0));return e.pluginId||e.alerting||(e.mixed&&t.push(this.getInstanceSettings("-- Mixed --")),e.dashboard&&t.push(this.getInstanceSettings("-- Dashboard --")),e.tracing||t.push(this.getInstanceSettings("-- Grafana --"))),s}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map((e=>({name:e.name,value:e.isDefault?null:e.name,meta:e.meta})))}getMetricSources(e){return this.getList({metrics:!0,variables:!(null!=e&&e.skipVariables)}).map((e=>({name:e.name,value:e.isDefault?null:e.name,meta:e.meta})))}}function u(e){return Array.isArray(e)?e[0]:e}d.$inject=["$injector","$rootScope","templateSrv"];const p=()=>(0,i.getDataSourceSrv)();a.ZP.service("datasourceSrv",d)},"./public/app/features/plugins/plugin_loader.ts":(e,t,s)=>{"use strict";s.d(t,{Av:()=>Gl,nL:()=>Hl,Ub:()=>Zl,_2:()=>Ql,N$:()=>ql});var a={};s.r(a),s.d(a,{getFlotRange:()=>se,getFlotTickDecimals:()=>ae,getFlotTickSize:()=>te,getPrecision:()=>re,getScaledDecimals:()=>ee,getStringPrecision:()=>oe,grafanaTimeFormat:()=>ne,logp:()=>ie,tickStep:()=>X});var n={};s.r(n),s.d(n,{plugin:()=>ke});var i={};s.r(i),s.d(i,{plugin:()=>Ct});var r={};s.r(r),s.d(r,{plugin:()=>Lt});var o={};s.r(o),s.d(o,{plugin:()=>Bt});var l={};s.r(l),s.d(l,{GraphCtrl:()=>sa,plugin:()=>aa});var c={};s.r(c),s.d(c,{plugin:()=>La});var d={};s.r(d),s.d(d,{plugin:()=>Qa});var u={};s.r(u),s.d(u,{plugin:()=>sn});var p={};s.r(p),s.d(p,{plugin:()=>On});var h={};s.r(h),s.d(h,{plugin:()=>Gn});var g={};s.r(g),s.d(g,{PanelCtrl:()=>Ii});var m={};s.r(m),s.d(m,{plugin:()=>Bi});var f={};s.r(f),s.d(f,{TablePanelCtrl:()=>er,plugin:()=>tr});var b={};s.r(b),s.d(b,{plugin:()=>Tr});var v={};s.r(v),s.d(v,{plugin:()=>to});var x={};s.r(x),s.d(x,{plugin:()=>no});var y={};s.r(y),s.d(y,{plugin:()=>mo});var w={};s.r(w),s.d(w,{plugin:()=>xo});var j={};s.r(j),s.d(j,{plugin:()=>No});var k={};s.r(k),s.d(k,{plugin:()=>Wo});var S={};s.r(S),s.d(S,{plugin:()=>rl});var C={};s.r(C),s.d(C,{plugin:()=>cl});var T={};s.r(T),s.d(T,{plugin:()=>pl});var N={};s.r(N),s.d(N,{plugin:()=>jl});var O={};s.r(O),s.d(O,{plugin:()=>Dl});var I=s("./node_modules/lodash/lodash.js"),P=s.n(I),M=s("./public/app/plugins/sdk.ts"),F=s("./public/app/core/utils/kbn.ts"),A=s("./node_modules/moment/moment.js"),D=s.n(A),$=s("./node_modules/angular/index.js"),L=s.n($),E=s("./node_modules/jquery/dist/jquery-exposed.js"),R=s.n(E),_=s("./node_modules/prismjs/prism.js"),V=s.n(_),B=s("./node_modules/slate/lib/slate.es.js"),z=s("./node_modules/@grafana/slate-react/lib/slate-react.es.js"),U=s("./node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js"),q=s("./node_modules/react/index.js"),H=s("./node_modules/react-dom/index.js"),G=s("./node_modules/react-redux/es/index.js"),W=s("./node_modules/redux/es/redux.js"),Z=s("./public/app/core/config.ts"),Q=s("./public/app/core/time_series2.ts"),K=s("./public/app/core/table_model.ts"),Y=s("./public/app/core/core.ts"),J=s("./public/app/core/utils/flatten.ts");function X(e,t,s){const a=Math.sqrt(50),n=Math.sqrt(10),i=Math.sqrt(2),r=Math.abs(t-e)/Math.max(0,s);let o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10));const l=r/o;return l>=a?o*=10:l>=n?o*=5:l>=i&&(o*=2),t<e?-o:o}function ee(e,t){return e-Math.floor(Math.log(t)/Math.LN10)}function te(e,t,s,a){const n=(t-e)/s;let i=-Math.floor(Math.log(n)/Math.LN10);const r=a,o=Math.pow(10,-i),l=n/o;let c;return l<1.5?c=1:l<3?(c=2,l>2.25&&(null==r||i+1<=r)&&(c=2.5,++i)):c=l<7.5?5:10,c*=o,c}function se(e,t,s,a){let n=+(null!=e?e:s),i=+(null!=t?t:a);const r=i-n;if(0===r){const s=.25,a=Math.abs(0===i?1:i*s);null===e&&(n-=a),null!=t&&null==e||(i+=a)}else{const o=.02;null!=o&&(null==e&&(n-=r*o,n<0&&null!=s&&s>=0&&(n=0)),null==t&&(i+=r*o,i>0&&null!=a&&a<=0&&(i=0)))}return{min:n,max:i}}function ae(e,t,s,a){const{min:n,max:i}=se(s.min,s.max,e,t),r=(i-n)/(.3*Math.sqrt(a)),o=-Math.floor(Math.log(r)/Math.LN10),l=Math.pow(10,-o),c=r/l;let d;c<1.5?d=1:c<3?(d=2,c>2.25&&(d=2.5)):d=c<7.5?5:10,d*=l;const u=Math.max(0,1-Math.floor(Math.log(r)/Math.LN10));return{tickDecimals:u,scaledDecimals:u-Math.floor(Math.log(d)/Math.LN10)}}function ne(e,t,s){if(t&&s&&e){const a=s-t,n=a/e/1e3,i=864e5,r=31536e6;return n<=45?"HH:mm:ss":n<=7200||a<=i?"HH:mm":n<=8e4?"MM/DD HH:mm":n<=2419200||a<=r?"MM/DD":"YYYY-MM"}return"HH:mm"}function ie(e,t){return Math.log(e)/Math.log(t)}function re(e){return oe(e.toString())}function oe(e){if(isNaN(e))return 0;const t=e.indexOf(".");return-1===t?0:e.length-t-1}var le=s("./public/app/core/services/backend_srv.ts"),ce=s("./public/app/core/utils/promiseToDigest.ts"),de=s("./public/app/core/services/impression_srv.ts"),ue=s("./packages/grafana-data/src/index.ts");Object.freeze([1,0]);let pe;!function(e){e.HTML="html",e.Markdown="markdown"}(pe||(pe={}));const he={mode:pe.Markdown,content:"# Title\n\n  For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)\n           "};var ge=s("./packages/grafana-ui/src/index.ts"),me=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),fe=s("./node_modules/dangerously-set-html-content/dist/index.es.js"),be=s("./node_modules/react/jsx-runtime.js");class ve extends q.PureComponent{constructor(e){var t,s,a;super(e),t=this,s="updateHTML",a=(0,I.debounce)((()=>{const e=this.processContent(this.props.options);e!==this.state.html&&this.setState({html:e})}),150),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,this.state={html:this.processContent(e.options)}}componentDidUpdate(e){this.updateHTML()}prepareHTML(e){return this.interpolateAndSanitizeString(e)}prepareMarkdown(e){return(0,ue.renderMarkdown)(this.interpolateAndSanitizeString(e),{noSanitize:Z.ZP.disableSanitizeHtml})}interpolateAndSanitizeString(e){const{replaceVariables:t}=this.props;return e=t(e,{},"html"),Z.ZP.disableSanitizeHtml?e:ue.textUtil.sanitize(e)}processContent(e){const{mode:t,content:s}=e;return s?t===pe.HTML?this.prepareHTML(s):this.prepareMarkdown(s):""}render(){const{html:e}=this.state,t=xe();return(0,be.jsx)(ge.CustomScrollbar,{autoHeightMin:"100%",children:(0,be.jsx)(fe.Z,{html:e,className:(0,me.cx)("markdown-html",t.content)})})}}const xe=(0,ge.stylesFactory)((()=>({content:me.css`
      height: 100%;
    `})));var ye=s("./node_modules/react-virtualized-auto-sizer/dist/index.esm.js");const we=({value:e,onChange:t,context:s})=>{const a=(0,q.useMemo)((()=>{var e,t;return null!==(e=null===(t=s.options)||void 0===t?void 0:t.mode)&&void 0!==e?e:pe.Markdown}),[s]),n=(0,ge.useTheme)(),i=je(n),r=()=>s.getSuggestions?s.getSuggestions().map((e=>(0,ge.variableSuggestionToCodeEditorSuggestion)(e))):[];return(0,be.jsx)("div",{className:(0,me.cx)(i.editorBox),children:(0,be.jsx)(ye.Z,{disableHeight:!0,children:({width:s})=>0===s?null:(0,be.jsx)(ge.CodeEditor,{value:e,onBlur:t,onSave:t,language:a,width:s,showMiniMap:!1,showLineNumbers:!1,height:"200px",getSuggestions:r})})})},je=(0,ge.stylesFactory)((e=>({editorBox:me.css`
    label: editorBox;
    border: ${e.border.width.sm} solid ${e.colors.border2};
    border-radius: ${e.border.radius.sm};
    margin: ${e.spacing.xs} 0;
    width: 100%;
  `}))),ke=new ue.PanelPlugin(ve).setPanelOptions((e=>{e.addRadio({path:"mode",name:"Mode",description:"text mode of the panel",settings:{options:[{value:pe.Markdown,label:"Markdown"},{value:pe.HTML,label:"HTML"}]},defaultValue:he.mode}).addCustomEditor({id:"content",path:"content",name:"Content",description:"Content of the panel",editor:we,defaultValue:he.content})})).setMigrationHandler((e=>{const t=parseFloat(e.pluginVersion||"6.1");let s=e.options;if(e.hasOwnProperty("content")&&e.hasOwnProperty("mode")){const a=e,n=a.content,i=a.mode;delete a.content,delete a.mode,t<7.1&&(s={content:n,mode:i})}return"html"!==s.mode&&"markdown"!==s.mode&&(s=Object.assign({},s,{mode:pe.Markdown})),s}));var Se=s("./packages/grafana-runtime/src/index.ts"),Ce=s("./packages/grafana-schema/src/index.ts"),Te=s("./public/app/features/explore/utils/links.ts"),Ne=s("./node_modules/react-use/lib/useClickAway.js"),Oe=s("./node_modules/react-use/lib/useAsyncFn.js"),Ie=s("./public/app/core/components/TagFilter/TagFilter.tsx"),Pe=s("./public/app/features/annotations/api.ts");const Me=["annotation","onSave","onDismiss","timeFormatter","className"],Fe=["ref","onChange"];function Ae(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}const De=q.forwardRef(((e,t)=>{var s;let{annotation:a,onSave:n,onDismiss:i,timeFormatter:r,className:o}=e,l=Ae(e,Me);const c=(0,ge.useStyles2)($e),d=(0,ge.usePanelContext)(),u=(0,q.useRef)(null);(0,Ne.Z)(u,(()=>{i()}));const[p,h]=(0,Oe.default)((async e=>{const t=await d.onAnnotationCreate(e);return n&&n(),t})),[g,m]=(0,Oe.default)((async e=>{const t=await d.onAnnotationUpdate(e);return n&&n(),t})),f=void 0!==a.id,b=a.time!==a.timeEnd,v=f?m:h,x=f?g:p,y=b?`${r(a.time)} - ${r(a.timeEnd)}`:r(a.time),w=(0,be.jsxs)("div",Object.assign({ref:t,className:(0,me.cx)(c.editor,o)},l,{children:[(0,be.jsx)("div",{className:c.header,children:(0,be.jsxs)(ge.HorizontalGroup,{justify:"space-between",align:"center",children:[(0,be.jsx)("div",{className:c.title,children:"Add annotation"}),(0,be.jsx)("div",{className:c.ts,children:y})]})}),(0,be.jsx)("div",{className:c.editorForm,children:(0,be.jsx)(ge.Form,{onSubmit:({tags:e,description:t})=>{v({id:a.id,tags:e,description:t,from:Math.round(a.time),to:Math.round(a.timeEnd)})},defaultValues:{description:null==a?void 0:a.text,tags:(null==a?void 0:a.tags)||[]},children:({register:e,errors:t,control:a})=>{var n;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ge.Field,{label:"Description",invalid:!!t.description,error:null==t||null===(n=t.description)||void 0===n?void 0:n.message,children:(0,be.jsx)(ge.TextArea,Object.assign({},e("description",{required:"Annotation description is required"})))}),(0,be.jsx)(ge.Field,{label:"Tags",children:(0,be.jsx)(ge.InputControl,{control:a,name:"tags",render:e=>{let{field:{onChange:t}}=e,s=Ae(e.field,Fe);return(0,be.jsx)(Ie.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:t,tagOptions:Pe.lK,tags:s.value})}})}),(0,be.jsxs)(ge.HorizontalGroup,{justify:"flex-end",children:[s||(s=(0,be.jsx)(ge.Button,{size:"sm",variant:"secondary",onClick:i,fill:"outline",children:"Cancel"})),(0,be.jsx)(ge.Button,{size:"sm",type:"submit",disabled:null==x?void 0:x.loading,children:null!=x&&x.loading?"Saving":"Save"})]})]})}})})]}));return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:c.backdrop}),(0,be.jsx)("div",{ref:u,children:w})]})}));De.displayName="AnnotationEditorForm";const $e=e=>({backdrop:me.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${e.zIndex.navbarFixed};
    `,editorContainer:me.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:me.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      z-index: ${e.zIndex.dropdown};
      border: 1px solid ${e.colors.border.weak};
      border-radius: ${e.shape.borderRadius()};
      width: 460px;
    `,editorForm:me.css`
      padding: ${e.spacing(1)};
    `,header:me.css`
      border-bottom: 1px solid ${e.colors.border.weak};
      padding: ${e.spacing(1.5,1)};
    `,title:me.css`
      font-weight: ${e.typography.fontWeightMedium};
    `,ts:me.css`
      font-size: ${e.typography.bodySmall.fontSize};
      color: ${e.colors.text.secondary};
    `}),Le=e=>t=>{const s=e.visualization.getColorByName((null==t?void 0:t.color)||ge.DEFAULT_ANNOTATION_COLOR);return{markerTriangle:me.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${s};
      `,markerBar:me.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${s};
      `}};var Ee=s("./node_modules/react-popper/lib/esm/usePopper.js"),Re=s("./packages/grafana-ui/src/themes/mixins.ts"),_e=s("./public/app/features/alerting/state/alertDef.ts");const Ve=({annotation:e,timeFormatter:t,editable:s,onEdit:a,onDelete:n})=>{var i,r;const o=(0,ge.useStyles2)(Be),l=t(e.time),c=t(e.timeEnd);let d=e.text;const u=e.tags;let p,h,g="",m=null;const f=(0,be.jsx)("span",{className:o.time,children:Boolean(e.isRegion)?`${l} - ${c}`:l});if(e.login&&e.avatarUrl&&(p=(0,be.jsx)("img",{className:o.avatar,src:e.avatarUrl})),void 0!==e.alertId&&e.newState){const t=_e.Z.getStateDisplayModel(e.newState);m=(0,be.jsx)("div",{className:o.alertState,children:(0,be.jsx)("i",{className:t.stateClass,children:t.text})}),g=_e.Z.getAlertAnnotationInfo(e)}else e.title&&(d=e.title+"<br />"+("string"==typeof d?d:""));return s&&(h=(0,be.jsxs)("div",{className:o.editControls,children:[i||(i=(0,be.jsx)(ge.IconButton,{name:"pen",size:"sm",onClick:a})),r||(r=(0,be.jsx)(ge.IconButton,{name:"trash-alt",size:"sm",onClick:n}))]})),(0,be.jsxs)("div",{className:o.wrapper,children:[(0,be.jsx)("div",{className:o.header,children:(0,be.jsxs)(ge.HorizontalGroup,{justify:"space-between",align:"center",spacing:"md",children:[(0,be.jsxs)("div",{className:o.meta,children:[(0,be.jsxs)("span",{children:[p,m]}),f]}),h]})}),(0,be.jsxs)("div",{className:o.body,children:[d&&(0,be.jsx)("div",{dangerouslySetInnerHTML:{__html:ue.textUtil.sanitize(d)}}),g,(0,be.jsx)(be.Fragment,{children:(0,be.jsx)(ge.HorizontalGroup,{spacing:"xs",wrap:!0,children:null==u?void 0:u.map(((e,t)=>(0,be.jsx)(ge.Tag,{name:e},`${e}-${t}`)))})})]})]})};Ve.displayName="AnnotationTooltip";const Be=e=>({wrapper:me.css`
      max-width: 400px;
    `,header:me.css`
      padding: ${e.spacing(.5,1)};
      border-bottom: 1px solid ${e.colors.border.weak};
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
    `,meta:me.css`
      display: flex;
      justify-content: space-between;
    `,editControls:me.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:me.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${e.spacing(1)};
    `,alertState:me.css`
      padding-right: ${e.spacing(1)};
      font-weight: ${e.typography.fontWeightMedium};
    `,time:me.css`
      color: ${e.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:me.css`
      padding: ${e.spacing(1)};

      a {
        color: ${e.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),ze=["canAddAnnotations"];const Ue={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function qe({annotation:e,timeZone:t,style:s}){const a=(0,ge.usePanelContext)(),{canAddAnnotations:n}=a,i=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(a,ze),r=(0,ge.useStyles2)(Le),o=(0,ge.useStyles2)(He),[l,c]=(0,q.useState)(!1),[d,u]=(0,q.useState)(!1),[p,h]=(0,q.useState)(null),[g,m]=(0,q.useState)(null),[f,b]=(0,q.useState)(null),v=(0,q.useRef)(),x=(0,Ee.D)(p,g,Ue),y=(0,Ee.D)(p,f,Ue),w=(0,q.useCallback)((()=>{u(!0),c(!1)}),[u,c]),j=(0,q.useCallback)((()=>{i.onAnnotationDelete&&i.onAnnotationDelete(e.id)}),[e,i]),k=(0,q.useCallback)((()=>{v.current&&clearTimeout(v.current),c(!0)}),[c]),S=(0,q.useCallback)((()=>{v.current&&clearTimeout(v.current)}),[]),C=(0,q.useCallback)((()=>{v.current=setTimeout((()=>{c(!1)}),100)}),[c]),T=(0,q.useCallback)((e=>(0,ue.dateTimeFormat)(e,{format:ue.systemDateFormats.fullDate,timeZone:t})),[t]),N=(0,q.useCallback)((()=>(0,be.jsx)(Ve,{annotation:e,timeFormatter:T,onEdit:w,onDelete:j,editable:Boolean(n&&n())})),[n,j,w,T,e]),O=Boolean(e.isRegion);let I=(0,be.jsx)("div",{className:r(e).markerTriangle,style:{transform:"translate3d(-100%,-50%, 0)"}});return O&&(I=(0,be.jsx)("div",{className:r(e).markerBar,style:Object.assign({},s,{transform:"translate3d(0,-50%, 0)"})})),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{ref:h,onMouseEnter:k,onMouseLeave:C,className:O?void 0:o.markerWrapper,children:I}),l&&(0,be.jsx)(ge.Portal,{children:(0,be.jsx)("div",Object.assign({ref:m,style:x.styles.popper},x.attributes.popper,{className:o.tooltip,onMouseEnter:S,onMouseLeave:C,children:N()}))}),d&&(0,be.jsx)(ge.Portal,{children:(0,be.jsx)(De,Object.assign({onDismiss:()=>u(!1),onSave:()=>u(!1),timeFormatter:T,annotation:e,ref:b,style:y.styles.popper},y.attributes.popper))})]})}const He=e=>({markerWrapper:me.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:me.css`
      max-width: 400px;
    `,tooltip:me.css`
      ${(0,Re.getTooltipContainerStyles)(e)};
      padding: 0;
    `}),Ge=({annotations:e,timeZone:t,config:s})=>{const a=(0,ge.useTheme2)(),n=(0,q.useRef)(),i=(0,q.useRef)();(0,q.useEffect)((()=>{const t=[];for(const s of e)t.push(new ue.DataFrameView(s));i.current=t}),[e]),(0,q.useLayoutEffect)((()=>{s.addHook("init",(e=>{n.current=e})),s.addHook("draw",(e=>{if(!i.current)return null;const t=e.ctx;if(!t)return;t.save(),t.beginPath(),t.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),t.clip();const s=(s,a)=>{t.beginPath(),t.lineWidth=2,t.strokeStyle=a,t.setLineDash([5,5]),t.moveTo(s,e.bbox.top),t.lineTo(s,e.bbox.top+e.bbox.height),t.stroke(),t.closePath()};for(let n=0;n<i.current.length;n++){const r=i.current[n];for(let n=0;n<r.length;n++){const i=r.get(n);if(!i.time)continue;let o=e.valToPos(i.time,"x",!0);const l=a.visualization.getColorByName(i.color);if(s(o,l),i.isRegion&&i.timeEnd){let a=e.valToPos(i.timeEnd,"x",!0);s(a,l),t.fillStyle=ue.colorManipulator.alpha(l,.1),t.rect(o,e.bbox.top,a-o,e.bbox.height),t.fill()}}}t.restore()}))}),[s,a]);const r=(0,q.useCallback)(((e,t)=>{const s=new ue.DataFrameView(e).get(t.fieldIndex);if(!s.time||!n.current)return;let a=n.current.valToPos(s.time,"x");return a<0&&(a=0),{x:a,y:n.current.bbox.height/window.devicePixelRatio+4}}),[]),o=(0,q.useCallback)(((e,s)=>{let a;const i=new ue.DataFrameView(e).get(s.fieldIndex);if(Boolean(i.isRegion)&&n.current){let e=n.current.valToPos(i.time,"x"),t=n.current.valToPos(i.timeEnd,"x");e<0&&(e=0),t>n.current.bbox.width/window.devicePixelRatio&&(t=n.current.bbox.width/window.devicePixelRatio),a={width:t-e+"px"}}return(0,be.jsx)(qe,{annotation:i,timeZone:t,style:a})}),[t]);return(0,be.jsx)(ge.EventsCanvas,{id:"annotations",config:s,events:e,renderEventMarker:o,mapEventToXYCoords:r})};var We=s("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),Ze=s("./node_modules/react-use/esm/useClickAway.js"),Qe=s("./packages/grafana-ui/src/components/uPlot/utils.ts");const Ke=["data","config","onClose","timeZone","replaceVariables"],Ye=["selection","timeZone","defaultItems","replaceVariables","data"];function Je(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}const Xe=e=>{let{data:t,config:s,onClose:a,timeZone:n,replaceVariables:i}=e,r=Je(e,Ke);const o=(0,q.useRef)(),[l,c]=(0,q.useState)(null),[d,u]=(0,q.useState)(null),[p,h]=(0,q.useState)(!1),g=(0,q.useCallback)((()=>{h(!0)}),[h]),m=(0,q.useCallback)((()=>{h(!1)}),[h]),f=(0,q.useCallback)((()=>{(0,Qe.Zp)("ContextMenuPlugin",!1,"clearing click selection"),u(null)}),[u]);(0,q.useLayoutEffect)((()=>{let e;const t=t=>{let s={viewport:{x:t.clientX,y:t.clientY},plotCanvas:{x:0,y:0}};e&&(s=Object.assign({},s,{plotCanvas:{x:t.clientX-e.left,y:t.clientY-e.top}})),c(s)};s.addHook("syncRect",((t,s)=>{e=s})),s.addHook("init",(e=>{var s,a,n,i;const r=e.over;o.current=r||void 0,null===(s=o.current)||void 0===s||s.addEventListener("mousedown",t),(0,Qe.Zp)("ContextMenuPlugin",!1,"init");let l=!1,c=Array.from(e.root.querySelectorAll(".u-cursor-pt"));null===(a=o.current)||void 0===a||a.addEventListener("mousedown",(()=>{l=!0})),null===(n=o.current)||void 0===n||n.addEventListener("mousemove",(()=>{l=!1})),null===(i=o.current)||void 0===i||i.addEventListener("mouseup",(e=>{if(!l||e.metaKey||e.ctrlKey)u(null);else{if(l=!0,e.target){e.target.classList.contains("u-cursor-pt")||((0,Qe.Zp)("ContextMenuPlugin",!1,"canvas click"),u({seriesIdx:null,dataIdx:null}))}g()}})),c.length>0&&c.forEach(((t,s)=>{t.addEventListener("click",(()=>{const t=s+1,a=e.cursor.idx;(0,Qe.Zp)("ContextMenuPlugin",!1,t,a),u({seriesIdx:t,dataIdx:a||null})}))}))}))}),[s,g,c,u]);const b=(0,q.useMemo)((()=>r.defaultItems?r.defaultItems.map((e=>Object.assign({},e,{items:e.items.map((e=>Object.assign({},e,{onClick:t=>{l&&e.onClick&&e.onClick(t,{coords:l})}})))}))):[]),[l,r.defaultItems]);return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(We.xB,{styles:We.iv`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),p&&l&&(0,be.jsx)(et,{data:t,defaultItems:b,timeZone:n,selection:{point:d,coords:l},replaceVariables:i,onClose:()=>{f(),m(),a&&a()}})]})},et=e=>{let{selection:t,defaultItems:s,data:a}=e,n=Je(e,Ye);const i=(0,q.useRef)(null),r=()=>{n.onClose&&n.onClose()};(0,Ze.Z)(i,(()=>{r()}));const o=a.fields[0];if(!o)return null;const l=s?[...s]:[];let c=()=>null;if(t.point){const{seriesIdx:e,dataIdx:s}=t.point,n=o.display;if(e&&s){const t=a.fields[e],i=t.display(t.values.get(s));t.config.links&&t.config.links.length>0&&t.getLinks&&l.push({items:t.getLinks({valueRowIndex:s}).map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:""+("_self"===e.target?"link":"external-link-alt"),onClick:e.onClick})))}),c=()=>(0,be.jsx)(ge.GraphContextMenuHeader,{timestamp:n(o.values.get(s)).text,displayValue:i,seriesColor:i.color,displayName:(0,ue.getFieldDisplayName)(t,a)})}}return(0,be.jsx)(ge.ContextMenu,{renderMenuItems:()=>null==l?void 0:l.map(((e,t)=>(0,be.jsx)(ge.MenuGroup,{label:e.label,children:(e.items||[]).map((e=>(0,be.jsx)(ge.MenuItem,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},e.label)))},`${e.label}${t}`))),renderHeader:c,x:t.coords.viewport.x,y:t.coords.viewport.y,onClose:r})};var tt,st,at,nt,it,rt,ot=s("./packages/grafana-e2e-selectors/src/index.ts");const lt=({timeZone:e,dataFrame:t,dataFrameFieldIndex:s,config:a,getFieldLinks:n})=>{var i;const r=(0,ge.useStyles)(ct),[o,l]=(0,q.useState)(!1),[c,d]=q.useState(null),[u,p]=q.useState(null),{styles:h,attributes:g}=(0,Ee.D)(c,u),m=(0,q.useRef)(),f=(0,q.useCallback)((()=>{m.current&&clearTimeout(m.current),l(!0)}),[l]),b=(0,q.useCallback)((()=>{m.current=setTimeout((()=>{l(!1)}),100)}),[l]),v=(0,q.useCallback)((()=>{const a=t=>(0,ue.dateTimeFormat)(t,{format:ue.systemDateFormats.fullDate,timeZone:e});return(0,be.jsx)("div",Object.assign({onMouseEnter:f,onMouseLeave:b,className:r.tooltip,ref:p,style:h.popper},g.popper,{children:(0,be.jsxs)("div",{className:r.wrapper,children:[(0,be.jsx)("div",{className:r.header,children:(0,be.jsx)("span",{className:r.title,children:"Exemplar"})}),(0,be.jsx)("div",{className:r.body,children:(0,be.jsx)("div",{children:(0,be.jsx)("table",{className:r.exemplarsTable,children:(0,be.jsx)("tbody",{children:t.fields.map(((e,t)=>{var i;const o=e.values.get(s.fieldIndex),l=null!==(i=e.config.links)&&void 0!==i&&i.length?n(e,s.fieldIndex):void 0;return(0,be.jsxs)("tr",{children:[(0,be.jsx)("td",{valign:"top",children:e.name}),(0,be.jsx)("td",{children:(0,be.jsxs)("div",{className:r.valueWrapper,children:[(0,be.jsx)("span",{children:e.type===ue.FieldType.time?a(o):o}),l&&(0,be.jsx)(ge.FieldLinkList,{links:l})]})})]},t)}))})})})})]})}))}),[g.popper,t.fields,n,s,f,b,h.popper,r,e]),x=null===(i=a.getSeries().find((e=>{var t;return(null===(t=e.props.dataFrameFieldIndex)||void 0===t?void 0:t.frameIndex)===s.frameIndex})))||void 0===i?void 0:i.props.lineColor;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{ref:d,onMouseEnter:f,onMouseLeave:b,className:r.markerWrapper,"aria-label":ot.wl.components.DataSource.Prometheus.exemplarMarker,children:(0,be.jsx)("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:x},className:(0,me.cx)(r.marble,o&&r.activeMarble),children:(()=>{const e=[tt||(tt=(0,be.jsx)("rect",{x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"},"diamond")),st||(st=(0,be.jsx)("path",{d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"},"x")),at||(at=(0,be.jsx)("path",{d:"M4 0L7.4641 6H0.535898L4 0Z"},"triangle")),nt||(nt=(0,be.jsx)("rect",{width:"5",height:"5"},"rectangle")),it||(it=(0,be.jsx)("path",{d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"},"pentagon")),rt||(rt=(0,be.jsx)("path",{d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"},"plus"))];return e[s.frameIndex%e.length]})()})}),o&&(0,be.jsx)(ge.Portal,{children:v()})]})},ct=e=>{const t=e.isDark?e.palette.dark2:e.palette.white,s=e.isDark?e.palette.dark9:e.palette.gray5,a=e.isDark?e.palette.black:e.palette.white,n=e.isDark?e.palette.dark3:e.palette.gray6;return{markerWrapper:me.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:me.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${e.palette.red};
      pointer-events: none;
    `,wrapper:me.css`
      background: ${t};
      border: 1px solid ${s};
      border-radius: ${e.border.radius.md};
      box-shadow: 0 0 20px ${a};
    `,exemplarsTable:me.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${e.colors.panelBg};
      }

      tr {
        background-color: ${e.colors.bg1};
        &:nth-child(even) {
          background-color: ${n};
        }
      }
    `,valueWrapper:me.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${e.spacing.sm};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:me.css`
      background: none;
      padding: 0;
    `,header:me.css`
      background: ${s};
      padding: 6px 10px;
      display: flex;
    `,title:me.css`
      font-weight: ${e.typography.weight.semibold};
      padding-right: ${e.spacing.md};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:me.css`
      padding: ${e.spacing.sm};
      font-weight: ${e.typography.weight.semibold};
    `,marble:me.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:me.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},dt=({exemplars:e,timeZone:t,getFieldLinks:s,config:a})=>{const n=(0,q.useRef)();(0,q.useLayoutEffect)((()=>{a.addHook("init",(e=>{n.current=e}))}),[a]);const i=(0,q.useCallback)(((e,t)=>{var s;const a=e.fields.find((e=>e.name===ue.TIME_SERIES_TIME_FIELD_NAME)),i=e.fields.find((e=>e.name===ue.TIME_SERIES_VALUE_FIELD_NAME));if(!a||!i||!n.current)return;const r=null!==(s=Object.keys(n.current.scales).find((e=>!["x","y"].some((t=>t===e)))))&&void 0!==s?s:ge.FIXED_UNIT,o=n.current.scales[r].min,l=n.current.scales[r].max;let c=i.values.get(t.fieldIndex);return null!=o&&c<o&&(c=o),null!=l&&c>l&&(c=l),{x:n.current.valToPos(a.values.get(t.fieldIndex),"x"),y:n.current.valToPos(c,r)}}),[]),r=(0,q.useCallback)(((e,n)=>(0,be.jsx)(lt,{timeZone:t,getFieldLinks:s,dataFrame:e,dataFrameFieldIndex:n,config:a})),[a,t,s]);return(0,be.jsx)(ge.EventsCanvas,{config:a,id:"exemplars",events:e,renderEventMarker:r,mapEventToXYCoords:i})};var ut=s("./node_modules/react-use/esm/useMountedState.js");const pt=({onDismiss:e,onSave:t,timeZone:s,data:a,selection:n,annotation:i,style:r})=>{const o=(0,ge.useTheme2)(),l=(0,ge.useStyles2)(ht),c=(0,ge.useStyles2)(Le),[d,u]=(0,q.useState)(null),[p,h]=(0,q.useState)(null),g=(0,Ee.D)(d,p,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let m=a.fields[0];if(!m)return null;const f=m.display||(0,ue.getDisplayProcessor)({field:m,timeZone:s,theme:o}),b=n.min!==n.max;return(0,be.jsx)(ge.Portal,{children:(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{style:r,children:(0,be.jsx)("div",{className:(0,me.cx)(me.css`
                position: absolute;
                top: ${n.bbox.top}px;
                left: ${n.bbox.left}px;
                width: ${n.bbox.width}px;
                height: ${n.bbox.height}px;
              `,b?l.overlayRange(i):l.overlay(i)),children:(0,be.jsx)("div",{ref:u,className:b?(0,me.cx)(c(i).markerBar,l.markerBar):(0,me.cx)(c(i).markerTriangle,l.markerTriangle)})})}),(0,be.jsx)(De,Object.assign({annotation:i||{time:n.min,timeEnd:n.max},timeFormatter:e=>f(e).text,onSave:t,onDismiss:e,ref:h,style:g.styles.popper},g.attributes.popper))]})})},ht=e=>({overlay:t=>{const s=e.visualization.getColorByName((null==t?void 0:t.color)||ge.DEFAULT_ANNOTATION_COLOR);return me.css`
        border-left: 1px dashed ${s};
      `},overlayRange:t=>{const s=e.visualization.getColorByName((null==t?void 0:t.color)||ge.DEFAULT_ANNOTATION_COLOR);return me.css`
        background: ${ue.colorManipulator.alpha(s,.1)};
        border-left: 1px dashed ${s};
        border-right: 1px dashed ${s};
      `},markerTriangle:me.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:me.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),gt=({data:e,timeZone:t,config:s,children:a})=>{const n=(0,q.useRef)(),[i,r]=(0,q.useState)(),[o,l]=(0,q.useState)(!1),[c,d]=(0,q.useState)(null),u=(0,ut.Z)(),p=(0,q.useCallback)((()=>{d(null),n.current&&n.current.setSelect({top:0,left:0,width:0,height:0}),l(!1)}),[l,d]);(0,q.useLayoutEffect)((()=>{let e=!1;s.addHook("init",(s=>{n.current=s;const a=s.hooks.setSelect;if(a)for(let s=0;s<a.length;s++){const n=a[s];n!==t&&(a[s]=(...t)=>{!e&&n(...t)})}})),s.addHook("syncRect",((e,t)=>{u()&&r(t)}));const t=t=>{e&&(l(!0),d({min:t.posToVal(t.select.left,"x"),max:t.posToVal(t.select.left+t.select.width,"x"),bbox:{left:t.select.left,top:0,height:t.select.height,width:t.select.width}}),e=!1)};s.addHook("setSelect",t),s.setCursor({bind:{mousedown:(t,s,a)=>t=>(e=0===t.button&&(t.metaKey||t.ctrlKey),a(t),null),mouseup:(t,s,a)=>s=>(e&&0===t.select.width&&(t.select.left=t.cursor.left,t.select.height=t.bbox.height/window.devicePixelRatio),a(s),null)}})}),[s,r,u]);const h=(0,q.useCallback)((({coords:e})=>{if(!n.current||!i||!e)return;const t=n.current.posToVal(e.plotCanvas.x,"x");t&&(d({min:t,max:t,bbox:{left:e.plotCanvas.x,top:0,height:i.height,width:0}}),l(!0))}),[i]);return(0,be.jsxs)(be.Fragment,{children:[o&&c&&i&&(0,be.jsx)(pt,{selection:c,onDismiss:p,onSave:p,data:e,timeZone:t,style:{position:"absolute",top:`${i.top}px`,left:`${i.left}px`,width:`${i.width}px`,height:`${i.height}px`}}),a?a({startAnnotating:h}):null]})};var mt=s("./node_modules/react-draggable/build/cjs/cjs.js"),ft=s.n(mt);const bt=({step:e,y:t,dragBounds:s,mapPositionToValue:a,formatValue:n,onChange:i})=>{const r=(0,ge.useTheme2)(),o=(0,ge.useStyles2)(vt),[l,c]=(0,q.useState)(e.value),d=(0,q.useMemo)((()=>r.colors.getContrastText(r.visualization.getColorByName(e.color))),[e.color,r]);return(0,be.jsx)(ft(),{axis:"y",grid:[1,1],onStop:(e,t)=>(i(a(t.lastY)),!1),onDrag:(e,t)=>c(a(t.lastY)),position:{x:0,y:t},bounds:s,children:(0,be.jsx)("div",{className:o.handle,style:{color:d,background:e.color,borderColor:e.color,borderWidth:0},children:(0,be.jsx)("span",{className:o.handleText,children:n(l)})})})};bt.displayName="ThresholdDragHandle";const vt=e=>({handle:me.css`
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-left: 9px;
      margin-top: -9px;
      cursor: grab;
      font-size: ${e.typography.bodySmall.fontSize};
      &:before {
        content: '';
        position: absolute;
        left: -9px;
        bottom: 0;
        width: 0;
        height: 0;
        border-right-style: solid;
        border-right-width: 9px;
        border-right-color: inherit;
        border-top: 9px solid transparent;
        border-bottom: 9px solid transparent;
      }
    `,handleText:me.css`
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}),xt=({config:e,fieldConfig:t,onThresholdsChange:s})=>{const a=(0,q.useRef)(),[n,i]=(0,q.useState)(0);(0,q.useLayoutEffect)((()=>{e.setPadding([0,60,0,0]),e.addHook("init",(e=>{a.current=e})),e.addHook("draw",(()=>{i((e=>e+1))}))}),[e]);const r=(0,q.useMemo)((()=>{var e;const n=a.current;if(!n)return null;const i=t.defaults.thresholds;if(!i)return null;const r=null!==(e=t.defaults.unit)&&void 0!==e?e:ge.FIXED_UNIT,o=t.defaults.decimals,l=[];for(let e=0;e<i.steps.length;e++){const t=i.steps[e],a=n.valToPos(t.value,r);if(Number.isNaN(a)||!Number.isFinite(a))continue;if(a<0||a>n.bbox.height/window.devicePixelRatio)continue;const c=(0,be.jsx)(bt,{step:t,y:a,dragBounds:{top:0,bottom:n.bbox.height/window.devicePixelRatio},mapPositionToValue:e=>n.posToVal(e,r),formatValue:e=>(0,ue.getValueFormat)(r)(e,o).text,onChange:t=>{const a=[...i.steps.slice(0,e),...i.steps.slice(e+1),Object.assign({},i.steps[e],{value:t})].sort(((e,t)=>e.value-t.value));s(Object.assign({},i,{steps:a}))}},`${t.value}-${e}`);l.push(c)}return l}),[n,t,s]);return a.current?(0,be.jsx)("div",{style:{position:"absolute",overflow:"visible",left:(a.current.bbox.left+a.current.bbox.width)/window.devicePixelRatio+"px",top:a.current.bbox.top/window.devicePixelRatio+"px",width:"60px",height:a.current.bbox.height/window.devicePixelRatio+"px"},children:r}):null};xt.displayName="ThresholdControlsPlugin";var yt=s("./public/app/plugins/panel/timeseries/config.ts");function wt(e){return"critical"===e.colorMode?"red":"warning"===e.colorMode?"orange":"custom"===e.colorMode?e.fillColor||e.lineColor:"red"}function jt(e){if(!e)return{};const t={axisPlacement:e.show?Ce.LB.Auto:Ce.LB.Hidden};if(e.label&&(t.axisLabel=e.label),e.logBase){const s=e.logBase;2!==s&&10!==s||(t.scaleDistribution={type:Ce.wf.Log,log:s})}return(0,I.omitBy)({unit:e.format,decimals:St(e.decimals),min:St(e.min),max:St(e.max),custom:t},I.isNil)}function kt(e,t,s){var a,n;for(const a of Object.keys(t)){const n=t[a];"custom"!==a&&n!==e[a]&&s.push({id:a,value:n})}const i=null!==(a=e.custom)&&void 0!==a?a:{},r=null!==(n=t.custom)&&void 0!==n?n:{};for(const e of Object.keys(r)){const t=r[e];t!==i[e]&&s.push({id:`custom.${e}`,value:t})}}function St(e){if((0,I.isNumber)(e))return e;if((0,I.isString)(e)){const t=Number(e);if(!isNaN(t))return t}}const Ct=new ue.PanelPlugin((({data:e,timeRange:t,timeZone:s,width:a,height:n,options:i,fieldConfig:r,onChangeTimeRange:o,replaceVariables:l})=>{const{sync:c,canAddAnnotations:d,onThresholdsChange:u,canEditThresholds:p,onSplitOpen:h}=(0,ge.usePanelContext)(),g=(e,s)=>(0,Te.a)({field:e,rowIndex:s,splitOpenFn:h,range:t}),{frames:m,warn:f}=(0,q.useMemo)((()=>function(e,t){var s,a,n,i;if(null==e||!e.length)return{warn:"No data in response"};let r,o=!1;const l=[];for(let c of e){let e=!1,d=!1;const u=[];for(const l of c.fields)switch(l.type){case ue.FieldType.time:e=!0,o=!0,u.push(l);break;case ue.FieldType.number:d=!0,r=Object.assign({},l,{values:new ue.ArrayVector(l.values.toArray().map((e=>Number.isFinite(e)||null==e?e:null)))}),(null===(s=r.config.custom)||void 0===s||null===(a=s.stacking)||void 0===a?void 0:a.mode)===Ce.o0.Percent&&(r.config.unit="percentunit",r.display=(0,ue.getDisplayProcessor)({field:r,theme:t})),u.push(r);break;case ue.FieldType.boolean:d=!0;const c=null!==(n=null===(i=l.config)||void 0===i?void 0:i.custom)&&void 0!==n?n:{},p=Object.assign({},l.config,{max:1,min:0,custom:c});c.lineInterpolation!==Ce.KC.StepBefore&&(c.lineInterpolation=Ce.KC.StepAfter),r=Object.assign({},l,{config:p,type:ue.FieldType.number,values:new ue.ArrayVector(l.values.toArray().map((e=>null==e?e:Boolean(e)?1:0)))}),(0,ue.isBooleanUnit)(p.unit)||(p.unit="bool",r.display=(0,ue.getDisplayProcessor)({field:r,theme:t})),u.push(r);break;default:d=!0}e&&u.length>1&&(o=!0,d?l.push(Object.assign({},c,{fields:u})):l.push(c))}return o?l.length?{frames:l}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}(null==e?void 0:e.series,Se.config.theme2)),[e]);if(!m||f)return(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsx)("p",{children:null!=f?f:"No data found in response"})});const b=Boolean(d&&d());return(0,be.jsx)(ge.TimeSeries,{frames:m,structureRev:e.structureRev,timeRange:t,timeZone:s,width:a,height:n,legend:i.legend,children:(t,a)=>(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ge.ZoomPlugin,{config:t,onZoom:o}),i.tooltip.mode===Ce.f3.None||(0,be.jsx)(ge.TooltipPlugin,{data:a,config:t,mode:i.tooltip.mode,sync:c,timeZone:s}),e.annotations&&(0,be.jsx)(Ge,{annotations:e.annotations,config:t,timeZone:s}),(0,be.jsx)(gt,{data:a,timeZone:s,config:t,children:({startAnnotating:e})=>(0,be.jsx)(Xe,{data:a,config:t,timeZone:s,replaceVariables:l,defaultItems:b?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(t,s)=>{s&&e({coords:s.coords})}}]}]:[]})}),e.annotations&&(0,be.jsx)(dt,{config:t,exemplars:e.annotations,timeZone:s,getFieldLinks:g}),p&&u&&(0,be.jsx)(xt,{config:t,fieldConfig:r,onThresholdsChange:u})]})})})).setPanelChangeHandler(((e,t,s,a)=>{if("graph"===t&&s.angular){const{fieldConfig:t,options:n}=function(e){var t,s,a,n,i,r,o,l;const c=null!==(t=null===(s=e.fieldConfig)||void 0===s?void 0:s.overrides)&&void 0!==t?t:[],d=null!==(a=e.yaxes)&&void 0!==a?a:[];let u=jt(d[0]);var p;null!==(n=e.fieldConfig)&&void 0!==n&&n.defaults&&(u=Object.assign({},null===(p=e.fieldConfig)||void 0===p?void 0:p.defaults,u));const h={fill:e.dashes?"dash":"solid",dash:[null!==(i=e.dashLength)&&void 0!==i?i:10,null!==(r=e.spaceLength)&&void 0!==r?r:10]};if(e.aliasColors)for(const t of Object.keys(e.aliasColors)){const s=e.aliasColors[t];s&&c.push({matcher:{id:ue.FieldMatcherID.byName,options:t},properties:[{id:ue.FieldConfigProperty.Color,value:{mode:ue.FieldColorModeId.Fixed,fixedColor:s}}]})}let g=!1;if(null!==(o=e.seriesOverrides)&&void 0!==o&&o.length)for(const t of e.seriesOverrides){if(!t.alias)continue;const e={matcher:{id:t.alias.startsWith("/")&&t.alias.endsWith("/")?ue.FieldMatcherID.byRegexp:ue.FieldMatcherID.byName,options:t.alias},properties:[]};let s;for(const a of Object.keys(t)){const n=t[a];switch(a){case"alias":case"$$hashKey":break;case"yaxis":if(2===n){kt(u,jt(d[1]),e.properties)}break;case"fill":e.properties.push({id:"custom.fillOpacity",value:10*n});break;case"fillBelowTo":g=!0,e.properties.push({id:"custom.fillBelowTo",value:n});break;case"fillGradient":n&&(e.properties.push({id:"custom.fillGradient",value:"opacity"}),e.properties.push({id:"custom.fillOpacity",value:10*n}));break;case"points":e.properties.push({id:"custom.showPoints",value:n?Ce.Jp.Always:Ce.Jp.Never});break;case"bars":n?(e.properties.push({id:"custom.drawStyle",value:Ce.l8.Bars}),e.properties.push({id:"custom.fillOpacity",value:100})):e.properties.push({id:"custom.drawStyle",value:Ce.l8.Line});break;case"lines":e.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":e.properties.push({id:"custom.lineWidth",value:n});break;case"pointradius":e.properties.push({id:"custom.pointSize",value:2+2*n});break;case"dashLength":case"spaceLength":case"dashes":switch(s||(s={fill:h.fill,dash:[...h.dash]}),a){case"dashLength":s.dash[0]=n;break;case"spaceLength":s.dash[1]=n;break;case"dashes":s.fill=n?"dash":"solid"}break;case"stack":e.properties.push({id:"custom.stacking",value:{mode:Ce.o0.Normal,group:n}});break;case"color":e.properties.push({id:"color",value:{fixedColor:n,mode:ue.FieldColorModeId.Fixed}});break;default:console.log("Ignore override migration:",t.alias,a,n)}}s&&e.properties.push({id:"custom.lineStyle",value:s}),e.properties.length&&c.push(e)}const m=null!==(l=u.custom)&&void 0!==l?l:{};m.drawStyle=e.bars?Ce.l8.Bars:e.lines?Ce.l8.Line:Ce.l8.Points,e.points?(m.showPoints=Ce.Jp.Always,(0,I.isNumber)(e.pointradius)&&(m.pointSize=2+2*e.pointradius)):m.drawStyle!==Ce.l8.Points&&(m.showPoints=Ce.Jp.Never);m.lineWidth=e.linewidth,"solid"!==h.fill&&(m.lineStyle=h);g?m.fillOpacity=35:(0,I.isNumber)(e.fill)&&(m.fillOpacity=10*e.fill);(0,I.isNumber)(e.fillGradient)&&e.fillGradient>0&&(m.gradientMode=Ce.FI.Opacity,m.fillOpacity=10*e.fillGradient);m.spanNulls=e.nullPointMode===ue.NullValueMode.Null,e.steppedLine&&(m.lineInterpolation=Ce.KC.StepAfter);m.drawStyle===Ce.l8.Bars&&(m.fillOpacity=100);e.stack&&(m.stacking={mode:Ce.o0.Normal,group:yt.r.stacking.group});u.custom=(0,I.omitBy)(m,I.isNil),u.nullValueMode=e.nullPointMode;const f={legend:{displayMode:Ce.jK.List,placement:"bottom",calcs:[]},tooltip:{mode:Ce.f3.Single}},b=e.legend;if(b&&(b.show?f.legend.displayMode=b.alignAsTable?Ce.jK.Table:Ce.jK.List:f.legend.displayMode=Ce.jK.Hidden,b.rightSide&&(f.legend.placement="right"),e.legend.values)){const t=(0,I.pickBy)(e.legend);f.legend.calcs=function(e){const t=[];for(const s of Object.keys(e)){const e=ue.fieldReducers.getIfExists(s);e&&t.push(e.id)}return t}(t)}if(e.thresholds&&e.thresholds.length>0){let t=[],s=!1,a=!1;const n=e.thresholds.sort(((e,t)=>e.value>t.value?1:-1));for(let e=0;e<n.length;e++){const i=n[e],r=n.length>e+1?n[e+1]:null;i.fill&&(s=!0),i.line&&(a=!0),"gt"===i.op&&t.push({value:i.value,color:wt(i)}),"lt"===i.op&&(0===t.length&&t.push({value:-1/0,color:wt(i)}),r&&"gt"===r.op&&r.value>i.value?t.push({value:i.value,color:"transparent"}):r&&"lt"===r.op?t.push({value:i.value,color:wt(r)}):t.push({value:i.value,color:"transparent"}))}t.length>0&&t[0].value!==-1/0&&t.unshift({color:"transparent",value:-1/0});let i=s?Ce.i3.Area:Ce.i3.Line;a&&s&&(i=Ce.i3.LineAndArea),u.custom.thresholdsStyle={mode:i},u.thresholds={mode:ue.ThresholdsMode.Absolute,steps:t}}return{fieldConfig:{defaults:(0,I.omitBy)(u,I.isNil),overrides:c},options:f}}(Object.assign({},s.angular,{fieldConfig:a}));return e.fieldConfig=t,e.alert=s.angular.alert,n}return function(e){var t,s,a,n,i;void 0!==(null===(t=e.fieldConfig)||void 0===t||null===(s=t.defaults)||void 0===s||null===(a=s.custom)||void 0===a||null===(n=a.hideFrom)||void 0===n?void 0:n.graph)&&(e.fieldConfig.defaults.custom.hideFrom.viz=e.fieldConfig.defaults.custom.hideFrom.graph,delete e.fieldConfig.defaults.custom.hideFrom.graph);null!==(i=e.fieldConfig)&&void 0!==i&&i.overrides&&(e.fieldConfig.overrides=e.fieldConfig.overrides.map((e=>(e.properties=e.properties.map((e=>("custom.hideFrom"===e.id&&e.value.graph&&(e.value.viz=e.value.graph,delete e.value.graph),e))),e))))}(e),{}})).useFieldConfig((0,yt.F)(yt.r)).setPanelOptions((e=>{ge.commonOptionsBuilder.addTooltipOptions(e),ge.commonOptionsBuilder.addLegendOptions(e)})).setDataSupport({annotations:!0,alertStates:!0});var Tt=s("./public/app/plugins/panel/state-timeline/types.ts"),Nt=s("./public/app/plugins/panel/state-timeline/utils.ts");function Ot(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const It=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class Pt extends q.Component{constructor(...e){super(...e),Ot(this,"panelContext",{}),Ot(this,"prepConfig",((e,t,s)=>{this.panelContext=this.context;const{eventBus:a}=this.panelContext;return(0,Nt.Nj)(Object.assign({frame:e,getTimeRange:s,eventBus:a,allFrames:this.props.frames},this.props,{rowHeight:e.fields.length>2?this.props.rowHeight:1}))})),Ot(this,"renderLegend",(e=>{const{legend:t,legendItems:s}=this.props;return e&&s&&t&&t.displayMode!==Ce.jK.Hidden?(0,be.jsx)(ge.VizLayout.Legend,{placement:t.placement,children:(0,be.jsx)(ge.VizLegend,{placement:t.placement,items:s,displayMode:t.displayMode,readonly:!0})}):null}))}render(){return(0,be.jsx)(ge.GraphNG,Object.assign({},this.props,{fields:{x:e=>e.type===ue.FieldType.time,y:e=>e.type===ue.FieldType.number||e.type===ue.FieldType.boolean||e.type===ue.FieldType.string},prepConfig:this.prepConfig,propsToDiff:It,renderLegend:this.renderLegend}))}}var Mt,Ft,At;Ot(Pt,"contextType",ge.PanelContextRoot);const Dt=({data:e,alignedData:t,seriesIdx:s,datapointIdx:a,timeZone:n})=>{var i;const r=(0,ge.useTheme2)(),o=t.fields[0],l=o.display||(0,ue.getDisplayProcessor)({field:o,timeZone:n,theme:r}),c=t.fields[s],d=null===(i=c.state)||void 0===i?void 0:i.origin,u=(c.display||(0,ue.getDisplayProcessor)({field:c,timeZone:n,theme:r}))(c.values.get(a)),p=d?(0,ue.getFieldDisplayName)(e[d.frameIndex].fields[d.fieldIndex],e[d.frameIndex],e):null,h=(0,Nt.iK)(c,a);let g;h&&(g=o.values.get(h));const m=o.values.get(a);let f=null,b=null;if(g){const e=g&&(0,ue.formattedValueToString)((0,ue.getValueFormat)("dtdurationms")(g-m,0));b=(0,be.jsxs)(be.Fragment,{children:[Mt||(Mt=(0,be.jsx)("br",{})),Ft||(Ft=(0,be.jsx)("strong",{children:"Duration:"}))," ",e]}),f=(0,be.jsxs)(be.Fragment,{children:[" to"," ",(0,be.jsx)("strong",{children:l(o.values.get(h)).text})]})}return(0,be.jsxs)("div",{style:{fontSize:r.typography.bodySmall.fontSize},children:[p,At||(At=(0,be.jsx)("br",{})),(0,be.jsx)(ge.SeriesTableRow,{label:u.text,color:u.color||ue.FALLBACK_COLOR,isActive:!0}),"From ",(0,be.jsx)("strong",{children:l(o.values.get(a)).text}),f,b]})};Dt.displayName="StateTimelineTooltip";var $t=s("./packages/grafana-data/src/dataframe/StreamingDataFrame.ts");const Lt=new ue.PanelPlugin((({data:e,timeRange:t,timeZone:s,options:a,width:n,height:i,onChangeTimeRange:r})=>{const o=(0,ge.useTheme2)(),{frames:l,warn:c}=(0,q.useMemo)((()=>{var t;return(0,Nt.AR)(null==e?void 0:e.series,null===(t=a.mergeValues)||void 0===t||t,o)}),[e,a.mergeValues,o]),d=(0,q.useMemo)((()=>(0,Nt.SA)(l,a.legend,o)),[l,a.legend,o]),u=(0,q.useCallback)(((e,t,a)=>{const n=null!=l?l:[];return null===t||null===a?null:e.fields.length-1===n.length&&e.fields[t]?(0,be.jsx)(Dt,{data:n,alignedData:e,seriesIdx:t,datapointIdx:a,timeZone:s}):null}),[s,l]);if(!l||c)return(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsx)("p",{children:null!=c?c:"No data found in response"})});if(1===l.length){(0,$t.MB)(l[0])}return(0,be.jsx)(Pt,Object.assign({theme:o,frames:l,structureRev:e.structureRev,timeRange:t,timeZone:s,width:n,height:i,legendItems:d},a,{mode:Tt.KN.Changes,children:(e,t)=>(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ge.ZoomPlugin,{config:e,onZoom:r}),(0,be.jsx)(ge.TooltipPlugin,{data:t,config:e,mode:a.tooltip.mode,timeZone:s,renderTooltip:u})]})}))})).setPanelChangeHandler(((e,t,s)=>{var a;let n=null!==(a=e.options)&&void 0!==a?a:{};if("natel-discrete-panel"===t&&s.angular){var i;const t=s.angular,a=null!==(i=e.fieldConfig)&&void 0!==i?i:{defaults:{},overrides:[]};t.units&&(a.defaults.unit=t.units);const r={fillOpacity:100,lineWidth:0};a.defaults.custom=r,n.mergeValues=!0;const o={type:ue.MappingType.ValueToText,options:{}};if(a.defaults.mappings=[o],(0,I.isArray)(t.colorMaps))for(const e of t.colorMaps){const t=e.color;t&&(o.options[e.text]={color:t})}if((0,I.isArray)(t.valueMaps))for(const e of t.valueMaps){const t=e.text,s=e.value;if(t&&s){let e=o.options[s];e?e.text=t:o.options[s]={text:t}}}if((0,I.isArray)(t.rangeMaps))for(const e of t.rangeMaps){let t=+e.from,s=+e.to;const n=e.text;n&&a.defaults.mappings.push({type:ue.MappingType.RangeToText,options:{from:t,to:s,result:{text:n}}})}e.fieldConfig=a}return n})).useFieldConfig({standardOptions:{[ue.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:ue.FieldColorModeId.ContinuousGrYlRd}}},useCustomConfig:e=>{e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Tt.Uv.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Tt.Uv.fillOpacity,settings:{min:0,max:100,step:1}})}}).setPanelOptions((e=>{e.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:Tt.mP.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Ce.Jp.Auto,label:"Auto"},{value:Ce.Jp.Always,label:"Always"},{value:Ce.Jp.Never,label:"Never"}]},defaultValue:Tt.mP.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:Tt.mP.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:Tt.mP.rowHeight}),ge.commonOptionsBuilder.addLegendOptions(e,!1),ge.commonOptionsBuilder.addTooltipOptions(e,!0)}));var Et,Rt;const _t=1,Vt=70,Bt=new ue.PanelPlugin((({data:e,timeRange:t,timeZone:s,options:a,width:n,height:i,onChangeTimeRange:r})=>{const o=(0,ge.useTheme2)(),{frames:l,warn:c}=(0,q.useMemo)((()=>(0,Nt.AR)(null==e?void 0:e.series,!1,o)),[e,o]),d=(0,q.useMemo)((()=>(0,Nt.SA)(l,a.legend,o)),[l,a.legend,o]);return!l||c?(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsx)("p",{children:null!=c?c:"No data found in response"})}):l[0].length>n/2?(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsxs)("p",{children:["Too many points to visualize properly. ",Et||(Et=(0,be.jsx)("br",{})),"Update the query to return fewer points. ",Rt||(Rt=(0,be.jsx)("br",{})),"(",l[0].length," points recieved)"]})}):(0,be.jsx)(Pt,Object.assign({theme:o,frames:l,structureRev:e.structureRev,timeRange:t,timeZone:s,width:n,height:i,legendItems:d},a,{mode:Tt.KN.Samples,children:(e,t)=>(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ge.ZoomPlugin,{config:e,onZoom:r}),(0,be.jsx)(ge.TooltipPlugin,{data:t,config:e,mode:a.tooltip.mode,timeZone:s})]})}))})).useFieldConfig({standardOptions:{[ue.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:ue.FieldColorModeId.Thresholds}}},useCustomConfig:e=>{e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:_t,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Vt,settings:{min:0,max:100,step:1}})}}).setPanelOptions((e=>{e.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Ce.Jp.Auto,label:"Auto"},{value:Ce.Jp.Always,label:"Always"},{value:Ce.Jp.Never,label:"Never"}]},defaultValue:Ce.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),ge.commonOptionsBuilder.addLegendOptions(e,!1),ge.commonOptionsBuilder.addTooltipOptions(e,!0)}));s("./public/vendor/flot/jquery.flot.js"),s("./public/vendor/flot/jquery.flot.selection.js"),s("./public/vendor/flot/jquery.flot.time.js"),s("./public/vendor/flot/jquery.flot.stack.js"),s("./public/vendor/flot/jquery.flot.stackpercent.js"),s("./public/vendor/flot/jquery.flot.fillbelow.js"),s("./public/vendor/flot/jquery.flot.crosshair.js"),s("./public/vendor/flot/jquery.flot.dashes.js");var zt=s("./node_modules/tether-drop/dist/js/drop.js"),Ut=s.n(zt);function qt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Yt.$inject=["plot"];const Ht=(e,t,s)=>{const a=L().element(document).injector(),n=document.createElement("div");n.innerHTML='<annotation-tooltip event="event" on-edit="onEdit()"></annotation-tooltip>',a.invoke(["$compile","$rootScope",(a,i)=>{const r=s.getOptions().events.manager,o=i.$new(!0);o.event=t,o.onEdit=()=>{r.editEvent(t)},a(n)(o),o.$digest(),o.$destroy();const l=new(Ut())({target:e[0],content:n,position:"bottom center",classes:"drop-popover drop-popover--annotation",openOn:"hover",hoverCloseDelay:200,tetherOptions:{constraints:[{to:"window",pin:!0,attachment:"both"}]}});l.open(),l.on("close",(()=>{setTimeout((()=>{l.destroy()}))}))}])};Ht.$inject=["element","event","plot"];let Gt=null;const Wt=(e,t,s)=>{const a=s.getOptions().events.manager;a.editorOpen?Gt=e:(a.editorOpened(),Gt=e,setTimeout((()=>{const e=L().element(document).injector(),s=document.createElement("div");s.innerHTML='<event-editor panel-ctrl="panelCtrl" event="event" close="close()"></event-editor>',e.invoke(["$compile","$rootScope",(e,n)=>{const i=n.$new(!0);let r;i.event=t,i.panelCtrl=a.panelCtrl,i.close=()=>{r.close()},e(s)(i),i.$digest(),r=new(Ut())({target:Gt[0],content:s,position:"bottom center",classes:"drop-popover drop-popover--form",openOn:"click",tetherOptions:{constraints:[{to:"window",pin:!0,attachment:"both"}]}}),r.open(),a.editorOpened(),r.on("close",(()=>{setTimeout((()=>{a.editorClosed(),i.$destroy(),r.destroy()}))}))}])}),100))};Wt.$inject=["element","event","plot"];class Zt{constructor(e,t,s,a,n,i,r,o){qt(this,"_object",void 0),qt(this,"_drawFunc",void 0),qt(this,"_clearFunc",void 0),qt(this,"_moveFunc",void 0),qt(this,"_position",void 0),qt(this,"_width",void 0),qt(this,"_height",void 0),this._object=e,this._drawFunc=t,this._clearFunc=s,this._moveFunc=a,this._position={left:n,top:i},this._width=r,this._height=o}width(){return this._width}height(){return this._height}position(){return this._position}draw(){this._drawFunc(this._object)}clear(){this._clearFunc(this._object)}getObject(){return this._object}moveTo(e){this._position=e,this._moveFunc(this._object,this._position)}}Zt.$inject=["object","drawFunc","clearFunc","moveFunc","left","top","width","height"];class Qt{constructor(e,t){qt(this,"_parent",void 0),qt(this,"_options",void 0),qt(this,"_drawableEvent",void 0),qt(this,"_hidden",void 0),this._options=e,this._drawableEvent=t,this._hidden=!1}visual(){return this._drawableEvent}getOptions(){return this._options}getParent(){return this._parent}isHidden(){return this._hidden}hide(){this._hidden=!0}unhide(){this._hidden=!1}}Qt.$inject=["options","drawableEvent"];class Kt{constructor(e){qt(this,"_events",void 0),qt(this,"_types",void 0),qt(this,"_plot",void 0),qt(this,"eventsEnabled",void 0),this._events=[],this._types=[],this._plot=e,this.eventsEnabled=!1}getEvents(){return this._events}setTypes(e){return this._types=e}setupEvents(e){const t=(0,I.partition)(e,"isRegion"),s=t[0];e=t[1],R().each(e,((e,t)=>{const s=new Qt(t,this._buildDiv(t));this._events.push(s)})),R().each(s,((e,t)=>{const s=new Qt(t,this._buildRegDiv(t));this._events.push(s)})),this._events.sort(((e,t)=>{const s=e.getOptions(),a=t.getOptions();return s.min>a.min?1:s.min<a.min?-1:0}))}drawEvents(){R().each(this._events,((e,t)=>{const s=t.getOptions(),a=this._insidePlot(s.min)||this._insidePlot(s.timeEnd),n=this._overlapPlot(s.min,s.timeEnd);!a&&!n||t.isHidden()?t.visual().getObject().hide():t.visual().draw()}))}updateEvents(){const e=this._plot.getPlotOffset();let t,s;const a=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1];R().each(this._events,((n,i)=>{s=e.top+this._plot.height()-i.visual().height(),t=a.p2c(i.getOptions().min)+e.left-i.visual().width()/2,i.visual().moveTo({top:s,left:t})}))}_clearEvents(){R().each(this._events,((e,t)=>{t.visual().clear()})),this._events=[]}_buildDiv(e){var t,s;const a=this,n=this._plot.getPlaceholder(),i=this._plot.getPlotOffset(),r=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1];let o,l,c,d,u,p,h,g;const m=e.eventType;c=null!==this._types&&this._types[m]&&this._types[m].color?this._types[m].color:"#666",d=null!==this._types&&this._types[m]&&this._types[m].markerSize?this._types[m].markerSize:8,u=null===this._types||!this._types[m]||void 0===this._types[m].markerShow||this._types[m].markerShow,g=null===this._types||!this._types[m]||void 0===this._types[m].markerTooltip||this._types[m].markerTooltip,p=null!=this._types&&this._types[m]&&this._types[m].lineStyle?this._types[m].lineStyle.toLowerCase():"dashed",h=null!=this._types&&this._types[m]&&void 0!==this._types[m].lineWidth?this._types[m].lineWidth:1;let f=r.options.eventSectionHeight||0;f/=3,o=i.top+this._plot.height()+f,l=r.p2c(e.min)+i.left;const b=R()('<div class="events_line flot-temp-elem"></div>').css({position:"absolute",opacity:.8,left:l+"px",top:8,width:h+"px",height:this._plot.height()+.8*f,"border-left-width":h+"px","border-left-style":p,"border-left-color":c,color:c}).appendTo(n);if(u){const t=R()('<div class="events_marker"></div>').css({position:"absolute",left:-d-Math.round(h/2)+"px","font-size":0,"line-height":0,width:0,height:0,"border-left":d+"px solid transparent","border-right":d+"px solid transparent"});t.appendTo(b),this._types[m]&&this._types[m].position&&"BOTTOM"===this._types[m].position.toUpperCase()?t.css({top:o-d-8+"px","border-top":"none","border-bottom":d+"px solid "+c}):t.css({top:"0px","border-top":d+"px solid "+c,"border-bottom":"none"}),t.data({event:e});const s=function(){Ht(t,R()(this).data("event"),a._plot)};e.editModel&&Wt(t,e.editModel,a._plot);const n=()=>{a._plot.clearSelection()};g&&(t.css({cursor:"help"}),t.hover(s,n))}return new Zt(b,(function(e){e.show()}),(e=>{e.remove()}),((e,t)=>{e.css({top:t.top,left:t.left})}),l,o,null!==(t=b.width())&&void 0!==t?t:1,null!==(s=b.height())&&void 0!==s?s:1)}_buildRegDiv(e){var t,s;const a=this,n=this._plot.getPlaceholder(),i=this._plot.getPlotOffset(),r=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1];let o,l,c,d,u,p,h;const g=e.eventType;p=null!==this._types&&this._types[g]&&this._types[g].color?this._types[g].color:"#666",h=null===this._types||!this._types[g]||void 0===this._types[g].markerTooltip||this._types[g].markerTooltip,c=null!=this._types&&this._types[g]&&void 0!==this._types[g].lineWidth?this._types[g].lineWidth:1,u=null!=this._types&&this._types[g]&&this._types[g].lineStyle?this._types[g].lineStyle.toLowerCase():"dashed";o=i.top+this._plot.height()+2;const m=Math.min(e.min,e.timeEnd),f=Math.max(e.min,e.timeEnd);l=r.p2c(m)+i.left;const b=r.p2c(f)+i.left,[v,x]=[i.left,i.left+this._plot.width()],y=Math.max(l,v);d=Math.min(b,x)-y+(b>x?0:c),(0,I.each)([l,b],(e=>{if(v<=e&&e<x){R()('<div class="events_line flot-temp-elem"></div>').css({position:"absolute",opacity:.8,left:e+"px",top:8,width:c+"px",height:this._plot.height()+2,"border-left-width":c+"px","border-left-style":u,"border-left-color":p,color:p}).appendTo(n)}}));const w=R()('<div class="events_marker region_marker flot-temp-elem"></div>').css({position:"absolute",opacity:.5,left:y+"px",top:o,width:d+"px",height:"0.5rem","border-left-color":p,color:p,"background-color":p});w.appendTo(n),w.data({event:e});const j=function(){Ht(w,R()(this).data("event"),a._plot)};e.editModel&&Wt(w,e.editModel,a._plot);const k=()=>{a._plot.clearSelection()};h&&(w.css({cursor:"help"}),w.hover(j,k));return new Zt(w,(function(e){e.show()}),(e=>{e.remove()}),((e,t)=>{e.css({top:t.top,left:t.left})}),l,o,null!==(t=w.width())&&void 0!==t?t:1,null!==(s=w.height())&&void 0!==s?s:1)}_insidePlot(e){const t=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1],s=t.p2c(e);return s>0&&s<t.p2c(t.max)}_overlapPlot(e,t){const s=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1],[a,n]=[s.p2c(e),s.p2c(t)],[i,r]=[0,s.p2c(s.max)];return i<a&&n<r}}function Yt(e){const t=this,s=new Kt(e);e.getEvents=()=>s._events,e.hideEvents=()=>{R().each(s._events,((e,t)=>{t.visual().getObject().hide()}))},e.showEvents=()=>{e.hideEvents(),R().each(s._events,((e,t)=>{t.hide()})),t.eventMarkers.drawEvents()},e.setEvents=e=>{s.eventsEnabled&&s.setupEvents(e)},e.hooks.processOptions.push(((e,t)=>{null!=t.events.data&&(s.eventsEnabled=!0)})),e.hooks.draw.push((e=>{const t=e.getOptions();s.eventsEnabled&&(s.getEvents().length<1?(s.setTypes(t.events.types),s.setupEvents(t.events.data)):s.updateEvents()),s.drawEvents()}))}Kt.$inject=["plot"];R().plot.plugins.push({init:Yt,options:{events:{data:null,types:null,xaxis:1,position:"BOTTOM"}},name:"events",version:"0.2.5"});var Jt=s("./public/app/types/index.ts");function Xt(e,t,s,a){const n=this,i=s.ctrl.panel,r=new ue.LegacyGraphHoverEvent({pos:{},point:{},panel:this.panel}),o=R()('<div class="graph-tooltip">');this.destroy=()=>{o.remove()},this.findHoverIndexFromDataPoints=(e,t,s)=>{const a=t.datapoints.pointsize,n=s*a,i=t.datapoints.points.length;let r;for(r=n;r<i;r+=a)if(!t.lines.steps&&null!=t.datapoints.points[n]&&null==t.datapoints.points[r]||t.datapoints.points[r]>e)return Math.max(r-a,0)/a;return r/a-1},this.findHoverIndexFromData=(e,t)=>{let s,a=0,n=t.data.length-1;for(;;){if(a>n)return Math.max(n,0);if(s=Math.floor((a+n)/2),t.data[s][0]===e)return s;t.data[s][0]<e?a=s+1:n=s-1}},this.renderAndShow=(e,t,s,a)=>{"time"===a&&(t='<div class="graph-tooltip-time">'+e+"</div>"+t),o.html(t).place_tt(s.pageX,s.pageY,{offset:10})},this.getMultiSeriesPlotHoverInfo=function(e,t){let s,a,n,r,o,l,c,d,u,p=[[],[],[]],h=0;for(a=0;a<e.length;a++)n=e[a],!n.data.length||i.legend.hideEmpty&&n.allIsNull||!n.data.length||i.legend.hideZero&&n.allIsZero||n.hideTooltip?p[0].push({hidden:!0,value:0}):(r=this.findHoverIndexFromData(t.x,n),o=t.x-n.data[r][0],l=n.data[r][0],(!d||o>=0&&(o<d||d<0)||o<0&&o>d)&&(d=o,u=l),s=n.data[r][1],n.stack&&null!==s&&"individual"!==i.tooltip.value_type&&(h+=s,s=h),(n.lines.steps||n.stack)&&(r=this.findHoverIndexFromDataPoints(t.x,n,r)),c=0,n.yaxis&&(c=n.yaxis.n),p[c].push({value:s,hoverIndex:r,color:n.color,label:n.aliasEscaped,time:l,distance:o,index:a}));return p=p[0].concat(p[1],p[2]),p.time=u,p},e.mouseleave((()=>{var s;if(null!==(s=i.tooltip)&&void 0!==s&&s.shared){const t=e.data().plot;t&&(o.detach(),t.unhighlight())}t.events.publish(new ue.LegacyGraphHoverClearEvent)})),e.bind("plothover",((s,a,o)=>{n.show(a,o),a.panelRelY=(a.pageY-e.offset().top)/e.height(),r.payload.pos=a,r.payload.panel=i,r.payload.point.time=a.x,t.events.publish(r)})),e.bind("plotclick",((e,t,s)=>{Y.h$.emit(Jt.RW.xt,{pos:t,panel:i,item:s})})),e.bind("plotleave",(()=>{if(!i.tooltip.shared)return;const t=e.data().plot;t&&(o.detach(),t.unhighlight())})),this.clear=e=>{o.detach(),e.clearCrosshair(),e.unhighlight()},this.show=(s,r)=>{const l=e.data().plot,c=l.getData(),d=l.getXAxes()[0].options.mode,u=a();let p,h,g,m,f,b,v,x,y=i.tooltip.shared;if(s.panelRelY){var w;const a=l.pointOffset({x:s.x});if(Number.isNaN(a.left)||a.left<0||a.left>e.width())return void n.clear(l);s.pageX=e.offset().left+a.left,s.pageY=e.offset().top+e.height()*s.panelRelY;const i=null!==(w=R()(window).scrollTop())&&void 0!==w?w:0;if(!(s.pageY>=i&&s.pageY<=R()(window).innerHeight()+i))return void n.clear(l);if(l.setCrosshair(s),y=!0,t.sharedCrosshairModeOnly())return}if(0!==u.length)if(x=u[0].hasMsResolution?ue.systemDateFormats.fullDateMS:ue.systemDateFormats.fullDate,y){l.unhighlight();const e=n.getMultiSeriesPlotHoverInfo(c,s);for(v="",g=t.formatDate(e.time,x),2===i.tooltip.sort?e.sort(((e,t)=>t.value-e.value)):1===i.tooltip.sort&&e.sort(((e,t)=>e.value-t.value)),f=0;f<e.length;f++){if(m=e[f],m.hidden)continue;let t="";r&&m.index===r.seriesIndex&&(t="graph-tooltip-list-item--highlight"),b=u[m.index],h=ue.textUtil.sanitize(b.formatValue(m.value));v+='<div class="graph-tooltip-list-item '+t+'"><div class="graph-tooltip-series-name">',v+='<i class="fa fa-minus" style="color:'+ue.textUtil.sanitize(m.color)+';"></i> '+ue.textUtil.sanitize(m.label)+":</div>",v+='<div class="graph-tooltip-value">'+h+"</div></div>",l.highlight(m.index,m.hoverIndex)}n.renderAndShow(g,v,s,d)}else if(r){const e=ue.textUtil.sanitize(r.series.color);b=u[r.seriesIndex],p='<div class="graph-tooltip-list-item"><div class="graph-tooltip-series-name">',p+='<i class="fa fa-minus" style="color:'+e+';"></i> '+b.aliasEscaped+":</div>",h=i.stack&&"individual"===i.tooltip.value_type?r.datapoint[1]-r.datapoint[2]:r.datapoint[1],h=ue.textUtil.sanitize(b.formatValue(h)),g=t.formatDate(r.datapoint[0],x),p+='<div class="graph-tooltip-value">'+h+"</div>",n.renderAndShow(g,p,s,d)}else o.detach()}}function es(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ts{constructor(e){es(this,"plot",void 0),es(this,"placeholder",void 0),es(this,"height",void 0),es(this,"thresholds",void 0),es(this,"needsCleanup",!1),es(this,"hasSecondYAxis",void 0),this.panelCtrl=e}getHandleHtml(e,t,s){let a=t.colorMode;return"custom"===t.colorMode&&(a="critical"),`\n    <div class="alert-handle-wrapper alert-handle-wrapper--T${e}">\n      <div class="alert-handle-line alert-handle-line--${a}">\n      </div>\n      <div class="alert-handle" data-handle-index="${e}">\n        <i class="icon-gf icon-gf-${a} alert-state-${a}"></i>\n        <span class="alert-handle-value">${s}<i class="alert-handle-grip"></i></span>\n      </div>\n    </div>`}initDragging(e){const t=R()(e.currentTarget).parents(".alert-handle-wrapper"),s=R()(e.currentTarget).data("handleIndex");let a,n=null;const i=this.plot,r=this.panelCtrl,o=this.thresholds[s];function l(e){if(null===n)n=e.clientY;else{const s=e.clientY-n;a+=s,n=e.clientY,t.css({top:a+s})}}n=null,a=t.position().top,t.on("mousemove",l),document.addEventListener("mouseup",(function e(){let n=i.c2p({left:0,top:a}).y;n=parseInt(n.toFixed(0),10),o.value=n,t.off("mousemove",l),document.removeEventListener("mouseup",e),r.$scope.$apply((()=>{r.render(),r.events.emit(Jt.RW.GL,{threshold:o,handleIndex:s})}))}))}cleanUp(){this.placeholder.find(".alert-handle-wrapper").remove(),this.needsCleanup=!1}renderHandle(e,t){const s=this.thresholds[e];if(!s.visible&&this.panelCtrl.alert)return;const a=s.value;let n=a,i=0;if((0,I.isNumber)(a)){const e=this.plot.p2c({x:0,y:a});i=Math.round(Math.min(Math.max(e.top,0),this.height)-6)}else n="",i=t;const r=R()(this.getHandleHtml(e,s,n));this.placeholder.append(r),r.toggleClass("alert-handle-wrapper--no-value",""===n),r.css({top:i})}shouldDrawHandles(){return!this.hasSecondYAxis&&this.panelCtrl.editingThresholds&&this.panelCtrl.panel.thresholds.length>0}prepare(e,t){this.hasSecondYAxis=!1;for(let e=0;e<t.length;e++)if(t[e].yaxis>1){this.hasSecondYAxis=!0;break}if(this.shouldDrawHandles()){const t=this.panelCtrl.panel.thresholds.length>1?"220px":"110px";e.css("margin-right",t)}else this.needsCleanup&&e.css("margin-right","0")}draw(e){this.thresholds=this.panelCtrl.panel.thresholds,this.plot=e,this.placeholder=e.getPlaceholder(),this.needsCleanup&&this.cleanUp(),this.shouldDrawHandles()&&(this.height=e.height(),this.thresholds.length>0&&this.renderHandle(0,10),this.thresholds.length>1&&this.renderHandle(1,this.height-30),this.placeholder.off("mousedown",".alert-handle"),this.placeholder.on("mousedown",".alert-handle",this.initDragging.bind(this)),this.needsCleanup=!0)}addFlotOptions(e,t){if(!t.thresholds||0===t.thresholds.length)return;let s,a,n,i=1/0,r=-1/0;for(s=0;s<t.thresholds.length;s++){if(a=t.thresholds[s],!(0,I.isNumber)(a.value))continue;let o,l,c;switch(a.op){case"gt":o=i,t.thresholds.length>s+1&&(n=t.thresholds[s+1],n.value>a.value&&(o=n.value,r=o));break;case"lt":o=r,t.thresholds.length>s+1&&(n=t.thresholds[s+1],n.value<a.value&&(o=n.value,i=o))}switch(a.colorMode){case"critical":l="rgba(234, 112, 112, 0.12)",c="rgba(237, 46, 24, 0.60)";break;case"warning":l="rgba(235, 138, 14, 0.12)",c="rgba(247, 149, 32, 0.60)";break;case"ok":l="rgba(11, 237, 50, 0.090)",c="rgba(6,163,69, 0.60)";break;case"custom":l=a.fillColor,c=a.lineColor}a.fill&&("right"===a.yaxis&&this.hasSecondYAxis?e.grid.markings.push({y2axis:{from:a.value,to:o},color:(0,ue.getColorForTheme)(l,Z.vc.theme)}):e.grid.markings.push({yaxis:{from:a.value,to:o},color:(0,ue.getColorForTheme)(l,Z.vc.theme)})),a.line&&("right"===a.yaxis&&this.hasSecondYAxis?e.grid.markings.push({y2axis:{from:a.value,to:a.value},color:(0,ue.getColorForTheme)(c,Z.vc.theme)}):e.grid.markings.push({yaxis:{from:a.value,to:a.value},color:(0,ue.getColorForTheme)(c,Z.vc.theme)}))}}}function ss(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const as={gray:{themeDependent:!0,title:"Gray",darkColor:{fill:"rgba(255, 255, 255, 0.09)",line:"rgba(255, 255, 255, 0.2)"},lightColor:{fill:"rgba(0, 0, 0, 0.09)",line:"rgba(0, 0, 0, 0.2)"}},red:{title:"Red",color:{fill:"rgba(234, 112, 112, 0.12)",line:"rgba(237, 46, 24, 0.60)"}},green:{title:"Green",color:{fill:"rgba(11, 237, 50, 0.090)",line:"rgba(6,163,69, 0.60)"}},blue:{title:"Blue",color:{fill:"rgba(11, 125, 238, 0.12)",line:"rgba(11, 125, 238, 0.60)"}},yellow:{title:"Yellow",color:{fill:"rgba(235, 138, 14, 0.12)",line:"rgba(247, 149, 32, 0.60)"}},custom:{title:"Custom"}};function ns(e,t){if(-1===Object.keys(as).indexOf(e.colorMode)&&(e.colorMode="red"),"custom"===e.colorMode)return{fill:e.fill&&e.fillColor?(0,ue.getColorForTheme)(e.fillColor,t):null,line:e.line&&e.lineColor?(0,ue.getColorForTheme)(e.lineColor,t):null};const s=as[e.colorMode];return!0===s.themeDependent?t.isLight?s.lightColor:s.darkColor:{fill:e.fill?(0,ue.getColorForTheme)(s.color.fill,t):null,line:e.fill?(0,ue.getColorForTheme)(s.color.line,t):null}}class is{constructor(e){ss(this,"plot",void 0),ss(this,"timeRegions",void 0),this.panelCtrl=e}draw(e){this.timeRegions=this.panelCtrl.panel.timeRegions,this.plot=e}addFlotOptions(e,t){if(!t.timeRegions||0===t.timeRegions.length)return;const s={from:(0,ue.dateTime)(this.panelCtrl.range.from).utc(),to:(0,ue.dateTime)(this.panelCtrl.range.to).utc()};let a,n,i,r,o,l,c;const d=t.timeRegions.map((e=>Object.assign({},e)));for(a=0;a<d.length;a++)if(i=d[a],(i.fromDayOfWeek||i.from||i.toDayOfWeek||i.to)&&(i.from&&!i.to&&(i.to=i.from),!i.from&&i.to&&(i.from=i.to),n={from:this.parseTimeRange(i.from),to:this.parseTimeRange(i.to)},!i.fromDayOfWeek&&i.toDayOfWeek&&(i.fromDayOfWeek=i.toDayOfWeek),!i.toDayOfWeek&&i.fromDayOfWeek&&(i.toDayOfWeek=i.fromDayOfWeek),i.fromDayOfWeek&&(n.from.dayOfWeek=Number(i.fromDayOfWeek)),i.toDayOfWeek&&(n.to.dayOfWeek=Number(i.toDayOfWeek)),n.from.dayOfWeek&&null===n.from.h&&null===n.from.m&&(n.from.h=0,n.from.m=0,n.from.s=0),n.to.dayOfWeek&&null===n.to.h&&null===n.to.m&&(n.to.h=23,n.to.m=59,n.to.s=59),n.from&&n.to)){for(r=[],o=(0,ue.dateTime)(s.from),o.set("hour",0),o.set("minute",0),o.set("second",0),o.add(n.from.h,"hours"),o.add(n.from.m,"minutes"),o.add(n.from.s,"seconds");o.unix()<=s.to.unix();){for(;n.from.dayOfWeek&&n.from.dayOfWeek!==o.isoWeekday();)o.add(24,"hours");if(o.unix()>s.to.unix())break;if(l=(0,ue.dateTime)(o),l.hour)if(n.from.h<=n.to.h)l.add(n.to.h-n.from.h,"hours");else if(n.from.h>n.to.h)for(;l.hour()!==n.to.h;)l.add(1,"hours");else for(l.add(24-n.from.h,"hours");l.hour()!==n.to.h;)l.add(1,"hours");for(l.set("minute",n.to.m),l.set("second",n.to.s);n.to.dayOfWeek&&n.to.dayOfWeek!==l.isoWeekday();)l.add(24,"hours");o.unix()<s.from.unix()&&l.unix()<s.from.unix()||o.unix()>s.to.unix()&&l.unix()>s.to.unix()||r.push({from:o.valueOf(),to:l.valueOf()}),o.add(24,"hours")}c=ns(i,Z.vc.theme);for(let t=0;t<r.length;t++){const s=r[t];i.fill&&e.grid.markings.push({xaxis:{from:s.from,to:s.to},color:c.fill}),i.line&&(e.grid.markings.push({xaxis:{from:s.from,to:s.from},color:c.line}),e.grid.markings.push({xaxis:{from:s.to,to:s.to},color:c.line}))}}}parseTimeRange(e){const t={h:null,m:null},s=/^([\d]+):?(\d{2})?/.exec(e);return s?(s.length>1&&(t.h=Number(s[1]),t.m=0,s.length>2&&void 0!==s[2]&&(t.m=Number(s[2])),t.h>23&&(t.h=23),t.m>59&&(t.m=59)),t):t}}var rs=s("./public/app/features/annotations/all.ts"),os=s("./node_modules/d3/index.js");function ls(e,t,s,a,n){return e.map((e=>{const i=function(e){const t=[];for(let s=0;s<e.length;s++){const a=e[s].datapoints;for(let e=0;e<a.length;e++)null!==a[e][0]&&t.push(a[e][0])}return t}([e]);if(e.histogram=!0,s[e.alias])e.data=[];else{const s=function(e,t,s,a){const n=cs(s,t),i=cs(a,t);return(0,os.histogram)().domain([n,i]).thresholds(Math.round(a-s)/t)(e).map((e=>[e.x0,e.length]))}(i,t,a,n);e.data=s}return e}))}function cs(e,t){return Math.floor(e/t)*t}function ds(e,t){if(isNaN(t)||(2!==(s=e).length||!us(s[0])||!us(s[1])))return;var s;const[a,n]=e;!function(e,t,s){0!==s&&(e.min-=s,e.max-=s,t.min-=s,t.max-=s)}(a,n,t),function(e,t){const s=.25;e.max===e.min&&(e.min-=s,e.max+=s);t.max===t.min&&(t.min-=s,t.max+=s)}(a,n);const i=0===a.min||0===n.min||0===a.max||0===n.max,r=ps(a,n);if(i&&r)a.min=a.max>0?0:a.min,a.max=a.max>0?a.max:0,n.min=n.max>0?0:n.min,n.max=n.max>0?n.max:0;else if(function(e,t){return e.min>=0&&t.max<=0||e.max<=0&&t.min>=0}(a,n))a.min>=0?(a.min=-a.max,n.max=-n.min):(a.max=-a.min,n.min=-n.max);else{const e=function(e,t){if(hs(e,t)){const s=t.min?e.min/t.min:0,a=t.max?e.max/t.max:0;return s>a?s:a}if(ps(e,t)){const s=Math.abs(e.min),a=Math.abs(e.max),n=Math.abs(t.min),i=Math.abs(t.max),r=Math.max(s,a),o=Math.min(s,a),l=Math.max(n,i),c=Math.min(n,i),d=0!==o?r/o:r,u=0!==c?l/c:l;return d>u?d:u}return e.min>0||t.min>0?e.max/t.max:e.min/t.min}(a,n);r?a.min>0?(a.min=a.max/e,n.min=n.max/e):(a.max=a.min/e,n.max=n.min/e):hs(a,n)?(a.min=n.min?n.min*e:a.min,n.min=a.min?a.min/e:n.min,a.max=n.max?n.max*e:a.max,n.max=a.max?a.max/e:n.max):(a.min=a.min>0?n.min*e:a.min,n.min=n.min>0?a.min/e:n.min,a.max=a.max<0?n.max*e:a.max,n.max=n.max<0?a.max/e:n.max)}!function(e,t,s){0!==s&&(e.min+=s,e.max+=s,t.min+=s,t.max+=s)}(a,n,t)}function us(e){return"min"in e&&"max"in e}function ps(e,t){return e.min>=0&&t.min>=0||e.max<=0&&t.max<=0}function hs(e,t){return e.min<=0&&e.max>=0&&t.min<=0&&t.max>=0}var gs=s("./node_modules/classnames/index.js"),ms=s.n(gs);function fs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bs=["min","max","avg","current","total"];class vs extends q.PureComponent{constructor(e){super(e),fs(this,"onLabelClick",(e=>this.props.onLabelClick(this.props.series,e))),fs(this,"onToggleAxis",(()=>{const e=2===this.state.yaxis?1:2,t={alias:this.props.series.alias,yaxis:e};this.setState({yaxis:e}),this.props.onToggleAxis(t)})),fs(this,"onColorChange",(e=>{this.props.onColorChange(this.props.series,e),this.forceUpdate()})),this.state={yaxis:this.props.series.yaxis}}renderLegendValues(){const{series:e,asTable:t}=this.props,s=[];for(const a of bs)if(this.props[a]){const n=e.formatValue(e.stats[a]);s.push((0,be.jsx)(ws,{valueName:a,value:n,asTable:t,onValueClick:this.onLabelClick},a))}return s}render(){var e;const{series:t,values:s,asTable:a,hidden:n}=this.props,i=ms()({"graph-legend-series-hidden":n,"graph-legend-series--right-y":2===t.yaxis}),r=s?this.renderLegendValues():[],o=(0,be.jsx)(xs,{label:t.alias,color:t.color,yaxis:this.state.yaxis,onLabelClick:this.onLabelClick,onColorChange:this.onColorChange,onToggleAxis:this.onToggleAxis});return a?(0,be.jsxs)("tr",{className:`graph-legend-series ${i}`,children:[e||(e=(0,be.jsx)("td",{children:(0,be.jsx)("div",{className:"graph-legend-series__table-name",children:o})})),r]}):(0,be.jsxs)("div",{className:`graph-legend-series ${i}`,children:[o,r]})}}fs(vs,"defaultProps",{asTable:!1,hidden:!1,onLabelClick:()=>{},onColorChange:()=>{},onToggleAxis:()=>{}});class xs extends q.PureComponent{render(){const{label:e,color:t,yaxis:s}=this.props,{onColorChange:a,onToggleAxis:n}=this.props,i=this.props.onLabelClick?this.props.onLabelClick:()=>{};return[(0,be.jsx)(ys,{color:t,yaxis:s,onColorChange:a,onToggleAxis:n},"icon"),(0,be.jsx)("a",{className:"graph-legend-alias pointer",title:e,onClick:i,"aria-label":ot.wl.components.Panels.Visualization.Graph.Legend.legendItemAlias(e),children:e},"label")]}}fs(xs,"defaultProps",{yaxis:void 0,onLabelClick:()=>{}});class ys extends q.PureComponent{constructor(...e){super(...e),fs(this,"onColorChange",(e=>{const{onColorChange:t}=this.props;t&&t(e)}))}render(){return(0,be.jsx)(ge.SeriesColorPicker,{yaxis:this.props.yaxis,color:this.props.color,onChange:this.onColorChange,onToggleAxis:this.props.onToggleAxis,enableNamedColors:!0,children:({ref:e,showColorPicker:t,hideColorPicker:s})=>(0,be.jsx)(ge.SeriesIcon,{color:this.props.color,ref:e,onClick:t,onMouseLeave:s,className:"graph-legend-icon"})})}}function ws({value:e,valueName:t,asTable:s,onValueClick:a}){return s?(0,be.jsx)("td",{className:`graph-legend-value ${t}`,onClick:a,children:e}):(0,be.jsx)("div",{className:`graph-legend-value ${t}`,onClick:a,children:e})}function js(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}fs(ys,"defaultProps",{yaxis:void 0,onColorChange:()=>{},onToggleAxis:()=>{}});class ks extends q.PureComponent{constructor(e){super(e),js(this,"onToggleSeries",((e,t)=>{if(!this.props.onToggleSeries)return;let s=Object.assign({},this.state.hiddenSeries);t.ctrlKey||t.metaKey||t.shiftKey?s[e.alias]?delete s[e.alias]:s[e.alias]=!0:s=this.toggleSeriesExclusiveMode(e),this.setState({hiddenSeries:s}),this.props.onToggleSeries(s)})),this.state={hiddenSeries:this.props.hiddenSeries}}sortLegend(){let e=[...this.props.seriesList]||[];const t=this.props.sort;return t&&this.props[t]&&this.props.alignAsTable&&(e=(0,I.sortBy)(e,(e=>{let s=e.stats[t];return null===s&&(s=-1/0),s})),this.props.sortDesc&&(e=e.reverse())),e}toggleSeriesExclusiveMode(e){const t=Object.assign({},this.state.hiddenSeries);t[e.alias]&&delete t[e.alias];return this.props.seriesList.every((s=>s.alias===e.alias||t[s.alias]))?this.props.seriesList.forEach((e=>{delete t[e.alias]})):this.props.seriesList.forEach((s=>{s.alias!==e.alias&&(t[s.alias]=!0)})),t}render(){const{optionalClass:e,rightSide:t,sideWidth:s,sort:a,sortDesc:n,hideEmpty:i,hideZero:r,values:o,min:l,max:c,avg:d,current:u,total:p}=this.props,h={values:o,min:l,max:c,avg:d,current:u,total:p},g=this.state.hiddenSeries,m={hideEmpty:i,hideZero:r},f={sort:a,sortDesc:n},b=this.sortLegend().filter((e=>!e.hideFromLegend(m))),v=`${this.props.alignAsTable?"graph-legend-table":""} ${e}`,x={minWidth:t&&s?s:void 0,width:t&&s?s-1:void 0},y=Object.assign({seriesList:b,hiddenSeries:g,onToggleSeries:this.onToggleSeries,onToggleAxis:this.props.onToggleAxis,onToggleSort:this.props.onToggleSort,onColorChange:this.props.onColorChange},h,f);return(0,be.jsx)("div",{className:`graph-legend-content ${v}`,style:x,children:this.props.alignAsTable?(0,be.jsx)(Cs,Object.assign({},y)):(0,be.jsx)(Ss,Object.assign({},y))})}}js(ks,"defaultProps",{values:!1,min:!1,max:!1,avg:!1,current:!1,total:!1,alignAsTable:!1,rightSide:!1,sort:void 0,sortDesc:!1,optionalClass:"",onToggleSeries:()=>{},onToggleSort:()=>{},onToggleAxis:()=>{},onColorChange:()=>{}});class Ss extends q.PureComponent{render(){const{seriesList:e,hiddenSeries:t,values:s,min:a,max:n,avg:i,current:r,total:o}=this.props,l={values:s,min:a,max:n,avg:i,current:r,total:o};return e.map(((e,s)=>(0,be.jsx)(vs,Object.assign({series:e,hidden:t[e.alias]},l,{onLabelClick:this.props.onToggleSeries,onColorChange:this.props.onColorChange,onToggleAxis:this.props.onToggleAxis}),`${e.id}-${s}`)))}}class Cs extends q.PureComponent{constructor(...e){super(...e),js(this,"onToggleSort",(e=>{if(!this.props.onToggleSort)return;let t=this.props.sortDesc,s=this.props.sort;e!==s&&(t=void 0),!1===t?(s=void 0,t=void 0):(t=!t,s=e),this.props.onToggleSort(s,t)}))}render(){const e=this.props.seriesList,{values:t,min:s,max:a,avg:n,current:i,total:r,sort:o,sortDesc:l,hiddenSeries:c}=this.props,d={values:t,min:s,max:a,avg:n,current:i,total:r};return e?(0,be.jsxs)("table",{children:[(0,be.jsx)("colgroup",{children:(0,be.jsx)("col",{style:{width:"100%"}})}),(0,be.jsx)("thead",{children:(0,be.jsxs)("tr",{children:[(0,be.jsx)("th",{style:{textAlign:"left"}}),bs.map((e=>d[e]&&(0,be.jsx)(Ts,{statName:e,sort:o,sortDesc:l,onClick:this.onToggleSort},e)))]})}),(0,be.jsx)("tbody",{children:e&&e.map(((e,t)=>(0,be.jsx)(vs,Object.assign({asTable:!0,series:e,hidden:c[e.alias],onLabelClick:this.props.onToggleSeries,onColorChange:this.props.onColorChange,onToggleAxis:this.props.onToggleAxis},d),`${e.id}-${t}`)))})]}):null}}class Ts extends q.PureComponent{constructor(...e){super(...e),js(this,"onClick",(()=>{this.props.onClick&&this.props.onClick(this.props.statName)}))}render(){const{statName:e,sort:t,sortDesc:s}=this.props;return(0,be.jsxs)("th",{className:"pointer",onClick:this.onClick,children:[e,t===e&&(0,be.jsx)(ge.Icon,{name:s?"angle-down":"angle-up"})]})}}class Ns extends q.PureComponent{render(){return(0,be.jsx)(ge.CustomScrollbar,{hideHorizontalTrack:!0,children:(0,be.jsx)(ks,Object.assign({},this.props))})}}var Os=s("./public/app/core/utils/ConfigProvider.tsx"),Is=s("./public/app/features/panel/panellinks/linkSuppliers.ts");function Ps(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}As.$inject=["timeSrv","popoverSrv","contextSrv"];const Ms=(0,Os.ER)(Ns);class Fs{constructor(e,t,s){Ps(this,"ctrl",void 0),Ps(this,"contextMenu",void 0),Ps(this,"tooltip",void 0),Ps(this,"dashboard",void 0),Ps(this,"annotations",void 0),Ps(this,"panel",void 0),Ps(this,"plot",void 0),Ps(this,"sortedSeries",void 0),Ps(this,"data",[]),Ps(this,"panelWidth",void 0),Ps(this,"eventManager",void 0),Ps(this,"thresholdManager",void 0),Ps(this,"timeRegionManager",void 0),Ps(this,"getContextMenuItemsSupplier",((e,t)=>()=>{const s=this.dashboard.canAddAnnotations()?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:()=>this.eventManager.updateTime({from:e.x,to:null})}]}]:[];if(!t)return s;const a=[{items:t.getLinks(this.panel.replaceVariables).map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:""+("_self"===e.target?"link":"external-link-alt"),onClick:e.onClick})))}];return[...s,...a]})),this.scope=e,this.elem=t,this.timeSrv=s,this.ctrl=e.ctrl,this.contextMenu=e.ctrl.contextMenuCtrl,this.dashboard=this.ctrl.dashboard,this.panel=this.ctrl.panel,this.annotations=[],this.panelWidth=0,this.eventManager=new rs.Qz(this.ctrl),this.thresholdManager=new ts(this.ctrl),this.timeRegionManager=new is(this.ctrl),this.tooltip=new Xt(this.elem,this.ctrl.dashboard,this.scope,(()=>this.sortedSeries)),this.ctrl.events.on(ue.PanelEvents.panelTeardown,this.onPanelTeardown.bind(this)),this.ctrl.events.on(ue.PanelEvents.render,this.onRender.bind(this)),this.ctrl.dashboard.events.on(ue.LegacyGraphHoverEvent.type,this.onGraphHover.bind(this),this.scope),this.ctrl.dashboard.events.on(ue.LegacyGraphHoverClearEvent.type,this.onGraphHoverClear.bind(this),this.scope),this.elem.bind("plotselected",this.onPlotSelected.bind(this)),this.elem.bind("plotclick",this.onPlotClick.bind(this)),this.elem&&this.elem.parent&&(this.legendElem=this.elem.parent().find(".graph-legend")[0])}onRender(e){if(this.data=e||this.data,!this.data)return;this.annotations=this.ctrl.annotations||[],this.buildFlotPairs(this.data);const t=this.ctrl.height;if((0,Y.Wz)(this.data,this.panel,t),!this.panel.legend.show)return this.legendElem.hasChildNodes()&&H.unmountComponentAtNode(this.legendElem),void this.renderPanel();const{values:s,min:a,max:n,avg:i,current:r,total:o}=this.panel.legend,{alignAsTable:l,rightSide:c,sideWidth:d,sort:u,sortDesc:p,hideEmpty:h,hideZero:g}=this.panel.legend,m={alignAsTable:l,rightSide:c,sideWidth:d,sort:u,sortDesc:p,hideEmpty:h,hideZero:g},f={values:s,min:a,max:n,avg:i,current:r,total:o},b=Object.assign({seriesList:this.data,hiddenSeries:this.ctrl.hiddenSeries},m,f,{onToggleSeries:this.ctrl.onToggleSeries,onToggleSort:this.ctrl.onToggleSort,onColorChange:this.ctrl.onColorChange,onToggleAxis:this.ctrl.onToggleAxis}),v=q.createElement(Ms,b);H.render(v,this.legendElem,(()=>this.renderPanel()))}onGraphHover(e){this.dashboard.sharedTooltipModeEnabled()&&this.plot&&e.panel.id!==this.panel.id&&!this.ctrl.otherPanelInFullscreenMode()&&this.tooltip.show(e.pos)}onPanelTeardown(){this.plot&&(this.plot.destroy(),this.plot=null),this.tooltip.destroy(),this.elem.off(),this.elem.remove(),H.unmountComponentAtNode(this.legendElem)}onGraphHoverClear(e,t){this.plot&&this.tooltip.clear(this.plot)}onPlotSelected(e,t){"time"===this.panel.xaxis.mode?(t.ctrlKey||t.metaKey)&&this.dashboard.canAddAnnotations()?setTimeout((()=>{this.eventManager.updateTime(t.xaxis)}),100):this.scope.$apply((()=>{this.timeSrv.setTime({from:(0,ue.toUtc)(t.xaxis.from),to:(0,ue.toUtc)(t.xaxis.to)})})):this.plot.clearSelection()}onPlotClick(e,t,s){const a=this.elem.closest(".view")?this.elem.closest(".view").get()[0]:null,n=s;if("time"===this.panel.xaxis.mode)if(t.ctrlKey||t.metaKey){if(t.x!==t.x1)return;if(!this.dashboard.id||!this.dashboard.canAddAnnotations())return;setTimeout((()=>{this.eventManager.updateTime({from:t.x,to:null})}),100)}else{let e;if(this.tooltip.clear(this.plot),s){const t=this.panel.yaxes[2===s.series.yaxis.n?1:0],a=this.ctrl.dataList[s.series.dataFrameIndex],n=a.fields[s.series.fieldIndex],i=this.getDataIndexWithNullValuesCorrection(s,a);let r=this.panel.options.dataLinks||[];const o=(0,ue.hasLinks)(n);o&&(r=[...r,...n.config.links]);const l={decimals:t.decimals,links:r},c=(0,ue.getDisplayProcessor)({field:{config:l,type:ue.FieldType.number},theme:Z.ZP.theme2,timeZone:this.dashboard.getTimezone()})(n.values.get(i));e=r.length?(0,Is.n)({display:c,name:n.name,view:new ue.DataFrameView(a),rowIndex:i,colIndex:s.series.fieldIndex,field:l,hasLinks:o}):void 0}this.scope.$apply((()=>{this.contextMenu.setScrollContextElement(a),this.contextMenu.setSource(n),this.contextMenu.setMenuItemsSupplier(this.getContextMenuItemsSupplier(t,e)),this.contextMenu.toggleMenu(t)}))}}getDataIndexWithNullValuesCorrection(e,t){const{datapoint:s,dataIndex:a}=e;if(!Array.isArray(s)||0===s.length)return a;const n=s[0],{timeField:i}=(0,ue.getTimeField)(t);if(!i||!i.values)return a;if(i.values.get(a)===n)return a;const r=i.values.toArray().findIndex((e=>e===n));return r>-1?r:a}shouldAbortRender(){return!this.data||0===this.panelWidth}drawHook(e){this.panel.yaxes[0].label&&this.panel.yaxes[0].show&&R()("<div class='axisLabel left-yaxis-label flot-temp-elem'></div>").text(this.panel.yaxes[0].label).appendTo(this.elem),this.panel.yaxes[1].label&&this.panel.yaxes[1].show&&R()("<div class='axisLabel right-yaxis-label flot-temp-elem'></div>").text(this.panel.yaxes[1].label).appendTo(this.elem);const{dataWarning:t}=this.ctrl;if(t){const e=R()(`<div class="datapoints-warning flot-temp-elem">${t.title}</div>`);t.action&&R()(`<button class="btn btn-secondary">${t.actionText}</button>`).click(t.action).appendTo(e),e.appendTo(this.elem)}this.thresholdManager.draw(e),this.timeRegionManager.draw(e)}processOffsetHook(e,t){const s=this.panel.yaxes[0],a=this.panel.yaxes[1];s.show&&s.label&&(t.left=20),a.show&&a.label&&(t.right=20);const n=e.getYAxes();for(let e=0;e<n.length;e++){const t=n[e],s=this.panel.yaxes[e];t.options.max=null!==t.options.max?t.options.max:s.max,t.options.min=null!==t.options.min?t.options.min:s.min}}processRangeHook(e){const t=e.getYAxes(),s=this.panel.yaxis.align||!1;if(t.length>1&&!0===s){const e=this.panel.yaxis.alignLevel||0;ds(t,parseFloat(e))}}getMinTimeStepOfSeries(e){let t=Number.MAX_VALUE;for(let s=0;s<e.length;s++)if(e[s].stats.timeStep){if(this.panel.bars){if(e[s].bars&&!1===e[s].bars.show)continue}else if(void 0===e[s].bars||void 0===e[s].bars.show||!e[s].bars.show)continue;e[s].stats.timeStep<t&&(t=e[s].stats.timeStep)}return t}renderPanel(){var e;if(this.panelWidth=null!==(e=this.elem.width())&&void 0!==e?e:0,this.shouldAbortRender())return;this.thresholdManager.prepare(this.elem,this.data),this.panel.dashes=!!this.panel.lines&&this.panel.dashes;const t=this.buildFlotOptions(this.panel);this.prepareXAxis(t,this.panel),this.configureYAxisOptions(this.data,t),this.thresholdManager.addFlotOptions(t,this.panel),this.timeRegionManager.addFlotOptions(t,this.panel),this.eventManager.addFlotEvents(this.annotations,t),this.sortedSeries=this.sortSeries(this.data,this.panel),this.callPlot(t,!0)}buildFlotPairs(e){for(let t=0;t<e.length;t++){const s=e[t];s.data=s.getFlotPairs(s.nullPointMode||this.panel.nullPointMode),"constant"===s.transform&&(s.data=(0,ue.getFlotPairsConstant)(s.data,this.ctrl.range)),this.ctrl.hiddenSeries[s.alias]&&(s.data=[],s.stack=!1)}}prepareXAxis(e,t){switch(t.xaxis.mode){case"series":e.series.bars.barWidth=.7,e.series.bars.align="center";for(let e=0;e<this.data.length;e++){const s=this.data[e];s.data=[[e+1,s.stats[t.xaxis.values[0]]]]}this.addXSeriesAxis(e);break;case"histogram":{let s;if(this.data.length){let a=(0,I.min)((0,I.map)(this.data,(e=>e.stats.min))),n=(0,I.max)((0,I.map)(this.data,(e=>e.stats.max)));const i=t.xaxis.buckets||this.panelWidth/50;if(null!=t.xaxis.min){a=X(t.xaxis.min,n,i)<=0?a:t.xaxis.min}if(null!=t.xaxis.max){n=X(a,t.xaxis.max,i)<=0?n:t.xaxis.max}s=X(a,n,i),e.series.bars.barWidth=.8*s,this.data=ls(this.data,s,this.ctrl.hiddenSeries,a,n)}else s=0;this.addXHistogramAxis(e,s);break}case"table":e.series.bars.barWidth=.7,e.series.bars.align="center",this.addXTableAxis(e);break;default:e.series.bars.barWidth=this.getMinTimeStepOfSeries(this.data)/1.5,this.addTimeAxis(e)}}callPlot(e,t){try{this.plot=R().plot(this.elem,this.sortedSeries,e),this.ctrl.renderError&&delete this.ctrl.error}catch(e){console.error("flotcharts error",e),this.ctrl.error=e.message||"Render Error",this.ctrl.renderError=!0}t&&this.ctrl.renderingCompleted()}buildFlotOptions(e){let t="#c8c8c8";!0===Z.ZP.bootData.user.lightTheme&&(t="#a1a1a1");const s=!!e.stack||null;return{hooks:{draw:[this.drawHook.bind(this)],processOffset:[this.processOffsetHook.bind(this)],processRange:[this.processRangeHook.bind(this)]},legend:{show:!1},series:{stackpercent:!!e.stack&&e.percentage,stack:e.percentage?null:s,lines:{show:e.lines,zero:!1,fill:this.translateFillOption(e.fill),fillColor:this.getFillGradient(e.fillGradient),lineWidth:e.dashes?0:e.linewidth,steps:e.steppedLine},dashes:{show:e.dashes,lineWidth:e.linewidth,dashLength:[e.dashLength,e.spaceLength]},bars:{show:e.bars,fill:1,barWidth:1,zero:!1,lineWidth:0},points:{show:e.points,fill:1,fillColor:!1,radius:e.points?e.pointradius:2},shadowSize:0},yaxes:[],xaxis:{},grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:t,margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:"x",color:"#666"},crosshair:{mode:"x"}}}sortSeries(e,t){const s=t.legend.sort,a=t.legend.sortDesc,n=null!=s&&t.legend[s],i=null!=a,r=t.stack&&n&&i&&t.legend.alignAsTable,o=!0===t.legend.sortDesc?-1:1;return r?(0,I.sortBy)(e,(e=>e.stats[s]*o)):(0,I.sortBy)(e,(e=>e.zindex))}getFillGradient(e){return e?{colors:[{opacity:0},{opacity:e/10}]}:null}translateFillOption(e){return this.panel.percentage&&this.panel.stack&&0===e?.001:e/10}addTimeAxis(e){const t=this.panelWidth/100,s=(0,I.isUndefined)(this.ctrl.range.from)?null:this.ctrl.range.from.valueOf(),a=(0,I.isUndefined)(this.ctrl.range.to)?null:this.ctrl.range.to.valueOf();e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:"time",min:s,max:a,label:"Datetime",ticks:t,timeformat:(0,ge.graphTimeFormat)(t,s,a),tickFormatter:ge.graphTickFormatter}}addXSeriesAxis(e){const t=(0,I.map)(this.data,((e,t)=>[t+1,e.alias]));e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:null,min:0,max:t.length+1,label:"Datetime",ticks:t}}addXHistogramAxis(e,t){let s,a,n;const i=this.panelWidth/50;if(this.data.length&&t){const e=[];for(const t of this.data)for(const s of t.data)e[s[0]]=!0;s=Object.keys(e).map((e=>Number(e))),a=(0,I.min)(s),n=(0,I.max)(s);let r=t,o=Math.floor((n-a)/r);for(;o>i;)r*=2,o=Math.ceil((n-a)/r);a=Math.floor(a/r)*r,n=Math.ceil(1.01*n/r)*r,s=[];for(let e=a;e<=n;e+=r)s.push(e)}else s=i/2,a=0,n=1;e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:null,min:a,max:n,label:"Histogram",ticks:s},this.configureAxisMode(e.xaxis,"short",null)}addXTableAxis(e){let t=(0,I.map)(this.data,((e,t)=>(0,I.map)(e.datapoints,((s,a)=>[t*e.datapoints.length+a+1,s[1]]))));t=(0,I.flatten)(t,!0),e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:null,min:0,max:t.length+1,label:"Datetime",ticks:t}}configureYAxisOptions(e,t){const s={position:"left",show:this.panel.yaxes[0].show,index:1,logBase:this.panel.yaxes[0].logBase||1,min:this.parseNumber(this.panel.yaxes[0].min),max:this.parseNumber(this.panel.yaxes[0].max),tickDecimals:this.panel.yaxes[0].decimals};if(t.yaxes.push(s),(0,I.find)(e,{yaxis:2})){const a=(0,I.clone)(s);a.index=2,a.show=this.panel.yaxes[1].show,a.logBase=this.panel.yaxes[1].logBase||1,a.position="right",a.min=this.parseNumber(this.panel.yaxes[1].min),a.max=this.parseNumber(this.panel.yaxes[1].max),a.tickDecimals=this.panel.yaxes[1].decimals,t.yaxes.push(a),this.applyLogScale(t.yaxes[1],e),this.configureAxisMode(t.yaxes[1],this.panel.percentage&&this.panel.stack?"percent":this.panel.yaxes[1].format,this.panel.yaxes[1].decimals)}this.applyLogScale(t.yaxes[0],e),this.configureAxisMode(t.yaxes[0],this.panel.percentage&&this.panel.stack?"percent":this.panel.yaxes[0].format,this.panel.yaxes[0].decimals)}parseNumber(e){return null==e?null:(0,I.toNumber)(e)}applyLogScale(e,t){if(1===e.logBase)return;const s=0===e.min;let a,n;e.min<Number.MIN_VALUE&&(e.min=null),e.max<Number.MIN_VALUE&&(e.max=null);let i=e.max,r=e.min;for(n=0;n<t.length;n++)a=t[n],a.yaxis===e.index&&((!i||i<a.stats.max)&&(i=a.stats.max),(!r||r>a.stats.logmin)&&(r=a.stats.logmin));e.transform=t=>t<Number.MIN_VALUE?null:Math.log(t)/Math.log(e.logBase),e.inverseTransform=t=>Math.pow(e.logBase,t),i||r?i?r||(r=i*e.inverseTransform(-4)):i=r*e.inverseTransform(4):(i=e.inverseTransform(2),r=e.inverseTransform(-2)),r=e.min?e.inverseTransform(Math.ceil(e.transform(e.min))):e.min=e.inverseTransform(Math.floor(e.transform(r))),i=e.max?e.inverseTransform(Math.floor(e.transform(e.max))):e.max=e.inverseTransform(Math.ceil(e.transform(i))),!r||r<Number.MIN_VALUE||!i||i<Number.MIN_VALUE||(Number.isFinite(r)&&Number.isFinite(i)?(s&&(e.min=.1,r=1),e.ticks=this.generateTicksForLogScaleYAxis(r,i,e.logBase),s&&e.ticks.unshift(.1),e.ticks[e.ticks.length-1]>e.max&&(e.max=e.ticks[e.ticks.length-1])):(e.ticks=[1,2],delete e.min,delete e.max))}generateTicksForLogScaleYAxis(e,t,s){let a,n=[];for(a=e;a<=t;a*=s)n.push(a);const i=Math.ceil(this.ctrl.height/25),r=n.length;if(r>i){const o=Math.ceil(r/i)*s;for(n=[],a=e;a<=t*o;a*=o)n.push(a)}return n}configureAxisMode(e,t,s){e.tickFormatter=(e,a)=>{const n=(0,ue.getValueFormat)(t);if(!n)throw new Error(`Unit '${t}' is not supported`);return(0,ue.formattedValueToString)(n(e,s))}}}function As(e,t,s){return{restrict:"A",template:"",link:(t,s)=>new Fs(t,s,e)}}Y.hF.directive("grafanaGraph",As);var Ds=s("./public/app/core/core_module.ts");function $s(e,t,s){e.overrideMenu=[],e.currentOverrides=[],e.override=e.override||{},e.colorPickerModel={},e.addOverrideOption=(t,s,a)=>{const n={text:t,propertyName:s,index:e.overrideMenu.length,values:a,submenu:(0,I.map)(a,(e=>({text:String(e),value:e})))};e.overrideMenu.push(n)},e.setOverride=(t,s)=>{"color"!==t.propertyName?(e.override[t.propertyName]=s.value,"fillBelowTo"===t.propertyName&&(e.override.lines=!1,e.ctrl.addSeriesOverride({alias:s.value,lines:!1})),e.updateCurrentOverrides(),e.ctrl.render()):e.openColorSelector(e.override.color)},e.colorSelected=t=>{e.override.color=t,e.updateCurrentOverrides(),e.ctrl.render(),e.colorPickerModel.series.color=t},e.openColorSelector=a=>{e.colorPickerModel={autoClose:!0,colorSelected:e.colorSelected,series:{color:a}},s.show({element:t.find(".dropdown")[0],position:"top center",openOn:"click",template:'<series-color-picker-popover color="series.color" onColorChange="colorSelected" />',classNames:"drop-popover drop-popover--transparent",model:e.colorPickerModel,onClose:()=>{e.ctrl.render()}})},e.removeOverride=t=>{delete e.override[t.propertyName],e.updateCurrentOverrides(),e.ctrl.refresh()},e.getSeriesNames=()=>(0,I.map)(e.ctrl.seriesList,(e=>ue.textUtil.escapeHtml(e.alias))),e.updateCurrentOverrides=()=>{e.currentOverrides=[],(0,I.each)(e.overrideMenu,(t=>{const s=e.override[t.propertyName];(0,I.isUndefined)(s)||e.currentOverrides.push({name:t.text,propertyName:t.propertyName,value:String(s)})}))},e.addOverrideOption("Bars","bars",[!0,!1]),e.addOverrideOption("Lines","lines",[!0,!1]),e.addOverrideOption("Line fill","fill",[0,1,2,3,4,5,6,7,8,9,10]),e.addOverrideOption("Fill gradient","fillGradient",[0,1,2,3,4,5,6,7,8,9,10]),e.addOverrideOption("Line width","linewidth",[0,1,2,3,4,5,6,7,8,9,10]),e.addOverrideOption("Null point mode","nullPointMode",["connected","null","null as zero"]),e.addOverrideOption("Fill below to","fillBelowTo",e.getSeriesNames()),e.addOverrideOption("Staircase line","steppedLine",[!0,!1]),e.addOverrideOption("Dashes","dashes",[!0,!1]),e.addOverrideOption("Hidden Series","hiddenSeries",[!0,!1]),e.addOverrideOption("Dash Length","dashLength",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),e.addOverrideOption("Dash Space","spaceLength",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),e.addOverrideOption("Points","points",[!0,!1]),e.addOverrideOption("Points Radius","pointradius",[1,2,3,4,5]),e.addOverrideOption("Stack","stack",[!0,!1,"A","B","C","D"]),e.addOverrideOption("Color","color",["change"]),e.addOverrideOption("Y-axis","yaxis",[1,2]),e.addOverrideOption("Z-index","zindex",[-3,-2,-1,0,1,2,3]),e.addOverrideOption("Transform","transform",["constant","negative-Y"]),e.addOverrideOption("Legend","legend",[!0,!1]),e.addOverrideOption("Hide in tooltip","hideTooltip",[!0,!1]),e.updateCurrentOverrides()}$s.$inject=["$scope","$element","popoverSrv"],Ds.ZP.controller("SeriesOverridesCtrl",$s);var Ls=s("./node_modules/tinycolor2/tinycolor.js"),Es=s.n(Ls);function Rs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class _s{constructor(e){Rs(this,"panelCtrl",void 0),Rs(this,"panel",void 0),Rs(this,"disabled",!1),this.$scope=e}$onInit(){this.panel=this.panelCtrl.panel,this.panel.alert&&!Z.ZP.featureToggles.ngalert&&(this.disabled=!0);const e=this.$scope.$on("$destroy",(()=>{this.panelCtrl.editingThresholds=!1,this.panelCtrl.render(),e()}));this.panelCtrl.editingThresholds=!0}addThreshold(){this.panel.thresholds.push({value:void 0,colorMode:"critical",op:"gt",fill:!0,line:!0,yaxis:"left"}),this.panelCtrl.render()}removeThreshold(e){this.panel.thresholds.splice(e,1),this.panelCtrl.render()}render(){this.panelCtrl.render()}onFillColorChange(e){return t=>{this.panel.thresholds[e].fillColor=t,this.render()}}onLineColorChange(e){return t=>{this.panel.thresholds[e].lineColor=t,this.render()}}onThresholdTypeChange(e){"custom"===this.panel.thresholds[e].colorMode&&(this.panel.thresholds[e].fillColor=Es()(Z.ZP.theme.palette.blue85).setAlpha(.2).toRgbString(),this.panel.thresholds[e].lineColor=Es()(Z.ZP.theme.palette.blue77).setAlpha(.6).toRgbString()),this.panelCtrl.render()}}function Vs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}_s.$inject=["$scope"],Ds.ZP.directive("graphThresholdForm",(()=>({restrict:"E",templateUrl:"public/app/plugins/panel/graph/thresholds_form.html",controller:_s,bindToController:!0,controllerAs:"ctrl",scope:{panelCtrl:"="}})));class Bs{constructor(e){Vs(this,"panelCtrl",void 0),Vs(this,"panel",void 0),Vs(this,"disabled",!1),Vs(this,"colorModes",void 0),this.$scope=e}$onInit(){this.panel=this.panelCtrl.panel;const e=this.$scope.$on("$destroy",(()=>{this.panelCtrl.editingTimeRegions=!1,this.panelCtrl.render(),e()}));this.colorModes=(0,I.map)(Object.keys(as),(e=>({key:e,value:as[e].title}))),this.panelCtrl.editingTimeRegions=!0}render(){this.panelCtrl.render()}addTimeRegion(){this.panel.timeRegions.push({op:"time",fromDayOfWeek:void 0,from:void 0,toDayOfWeek:void 0,to:void 0,colorMode:"background6",fill:!0,line:!1,fillColor:"rgba(234, 112, 112, 0.12)",lineColor:"rgba(237, 46, 24, 0.60)"}),this.panelCtrl.render()}removeTimeRegion(e){this.panel.timeRegions.splice(e,1),this.panelCtrl.render()}onFillColorChange(e){return t=>{this.panel.timeRegions[e].fillColor=t,this.render()}}onLineColorChange(e){return t=>{this.panel.timeRegions[e].lineColor=t,this.render()}}}Bs.$inject=["$scope"],Ds.ZP.directive("graphTimeRegionForm",(()=>({restrict:"E",templateUrl:"public/app/plugins/panel/graph/time_regions_form.html",controller:Bs,bindToController:!0,controllerAs:"ctrl",scope:{panelCtrl:"="}})));class zs{constructor(e){this.panel=e}getSeriesList(e){const t=[],{dataList:s,range:a}=e;if(!s||!s.length)return t;for(let e=0;e<s.length;e++){const n=s[e],{timeField:i}=(0,ue.getTimeField)(n);if(i)for(let r=0;r<n.fields.length;r++){const o=n.fields[r];if(o.type!==ue.FieldType.number)continue;const l=(0,ue.getFieldDisplayName)(o,n,s),c=[];for(let e=0;e<n.length;e++)c.push([o.values.get(e),(0,ue.dateTime)(i.values.get(e)).valueOf()]);t.push(this.toTimeSeries(o,l,e,r,c,t.length,a))}}if("histogram"===this.panel.xaxis.mode&&!this.panel.stack&&t.length>1){const e=t[0];e.alias=e.aliasEscaped="Count";for(let s=1;s<t.length;s++)e.datapoints=e.datapoints.concat(t[s].datapoints);return[e]}return t}toTimeSeries(e,t,s,a,n,i,r){const o=i%ge.colors.length,l=this.panel.aliasColors[t]||ge.colors[o],c=new Q.Z({datapoints:n||[],alias:t,color:(0,ue.getColorForTheme)(l,Z.ZP.theme),unit:e.config?e.config.unit:void 0,dataFrameIndex:s,fieldIndex:a});if(n&&n.length>0&&r){const e=n[n.length-1][1],t=r.from;if(e-t.valueOf()<-1e4){n[0][1]-t.valueOf()<-1e4&&(c.isOutsideRange=!0)}}return c}setPanelDefaultsForNewXAxisMode(){switch(this.panel.xaxis.mode){case"time":this.panel.bars=!1,this.panel.lines=!0,this.panel.points=!1,this.panel.legend.show=!0,this.panel.tooltip.shared=!0,this.panel.xaxis.values=[];break;case"series":this.panel.bars=!0,this.panel.lines=!1,this.panel.points=!1,this.panel.stack=!1,this.panel.legend.show=!1,this.panel.tooltip.shared=!1,this.panel.xaxis.values=["total"];break;case"histogram":this.panel.bars=!0,this.panel.lines=!1,this.panel.points=!1,this.panel.stack=!1,this.panel.legend.show=!1,this.panel.tooltip.shared=!1}}validateXAxisSeriesValue(){switch(this.panel.xaxis.mode){case"series":{if(0===this.panel.xaxis.values.length)return void(this.panel.xaxis.values=["total"]);const e=this.getXAxisValueOptions({});return void((0,I.find)(e,{value:this.panel.xaxis.values[0]})||(this.panel.xaxis.values=["total"]))}}}getXAxisValueOptions(e){switch(this.panel.xaxis.mode){case"series":return[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Count",value:"count"}]}return[]}pluckDeep(e,t){const s=t.split(".");let a=e;for(let e=0;e<s.length;++e){if(!a[s[e]])return;a=a[s[e]]}return a}}function Us(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class qs{constructor(e){Us(this,"panel",void 0),Us(this,"panelCtrl",void 0),Us(this,"logScales",void 0),Us(this,"xAxisModes",void 0),Us(this,"xAxisStatOptions",void 0),Us(this,"xNameSegment",void 0),Us(this,"selectors",void 0),this.$scope=e,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.$scope.ctrl=this,this.logScales={linear:1,"log (base 2)":2,"log (base 10)":10,"log (base 32)":32,"log (base 1024)":1024},this.xAxisModes={Time:"time",Series:"series",Histogram:"histogram"},this.xAxisStatOptions=[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Count",value:"count"},{text:"Current",value:"current"}],"custom"===this.panel.xaxis.mode&&(this.panel.xaxis.name||(this.panel.xaxis.name="specify field")),this.selectors=ot.wl.components.Panels.Visualization.Graph.VisualizationTab}setUnitFormat(e){return t=>{e.format=t,this.panel.fieldConfig.defaults.unit?(this.panel.fieldConfig.defaults.unit=void 0,this.panelCtrl.refresh()):this.panelCtrl.render()}}render(){this.panelCtrl.render()}xAxisModeChanged(){this.panelCtrl.processor.setPanelDefaultsForNewXAxisMode(),this.panelCtrl.onDataFramesReceived(this.panelCtrl.dataList)}xAxisValueChanged(){this.panelCtrl.onDataFramesReceived(this.panelCtrl.dataList)}}function Hs(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/graph/axes_editor.html",controller:qs}}function Gs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}qs.$inject=["$scope"];class Ws{constructor(e){Gs(this,"source",void 0),Gs(this,"scope",void 0),Gs(this,"menuItemsSupplier",void 0),Gs(this,"scrollContextElement",null),Gs(this,"position",{x:0,y:0}),Gs(this,"isVisible",void 0),Gs(this,"onClose",(()=>{this.scrollContextElement&&this.scrollContextElement.removeEventListener("scroll",this.onClose),this.scope.$apply((()=>{this.isVisible=!1}))})),Gs(this,"toggleMenu",(e=>{this.isVisible=!this.isVisible,this.isVisible&&this.scrollContextElement&&this.scrollContextElement.addEventListener("scroll",this.onClose),this.source?this.position={x:this.source.pageX,y:this.source.pageY}:this.position={x:e?e.pageX:0,y:e?e.pageY:0}})),Gs(this,"setScrollContextElement",(e=>{this.scrollContextElement=e})),Gs(this,"setSource",(e=>{this.source=e})),Gs(this,"getSource",(()=>this.source)),Gs(this,"setMenuItemsSupplier",(e=>{this.menuItemsSupplier=e})),this.isVisible=!1,this.scope=e}}var Zs=s("./public/app/features/dashboard/state/actions.ts"),Qs=s("./public/app/store/store.ts"),Ks=s("./public/app/features/alerting/state/ThresholdMapper.ts"),Ys=s("./public/app/types/events.ts"),Js=s("./public/app/features/panel/metrics_panel_ctrl.ts"),Xs=s("./public/app/features/dashboard/utils/loadSnapshotData.ts"),ea=s("./public/app/features/query/state/DashboardQueryRunner/utils.ts");function ta(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class sa extends Js.k{constructor(e,t){super(e,t),ta(this,"renderError",!1),ta(this,"hiddenSeries",{}),ta(this,"hiddenSeriesTainted",!1),ta(this,"seriesList",[]),ta(this,"dataList",[]),ta(this,"annotations",[]),ta(this,"alertState",void 0),ta(this,"dataWarning",void 0),ta(this,"colors",[]),ta(this,"subTabIndex",0),ta(this,"processor",void 0),ta(this,"contextMenuCtrl",void 0),ta(this,"panelDefaults",{datasource:null,renderer:"flot",yaxes:[{label:null,show:!0,logBase:1,min:null,max:null,format:"short"},{label:null,show:!0,logBase:1,min:null,max:null,format:"short"}],xaxis:{show:!0,mode:"time",name:null,values:[],buckets:null},yaxis:{align:!1,alignLevel:null},lines:!0,fill:1,fillGradient:0,linewidth:1,dashes:!1,hiddenSeries:!1,dashLength:10,spaceLength:10,points:!1,pointradius:2,bars:!1,stack:!1,percentage:!1,legend:{show:!0,values:!1,min:!1,max:!1,current:!1,total:!1,avg:!1},nullPointMode:"null",steppedLine:!1,tooltip:{value_type:"individual",shared:!0,sort:0},timeFrom:null,timeShift:null,targets:[{}],aliasColors:{},seriesOverrides:[],thresholds:[],timeRegions:[],options:{alertThreshold:!0}}),ta(this,"onColorChange",((e,t)=>{e.setColor((0,ue.getColorForTheme)(t,Z.ZP.theme)),this.panel.aliasColors[e.alias]=t,this.render()})),ta(this,"onToggleSeries",(e=>{this.hiddenSeriesTainted=!0,this.hiddenSeries=e,this.render()})),ta(this,"onToggleSort",((e,t)=>{this.panel.legend.sort=e,this.panel.legend.sortDesc=t,this.render()})),ta(this,"onToggleAxis",(e=>{let t=(0,I.find)(this.panel.seriesOverrides,{alias:e.alias});t||(t={alias:e.alias},this.panel.seriesOverrides.push(t)),t.yaxis=e.yaxis,this.render()})),ta(this,"onContextMenuClose",(()=>{this.contextMenuCtrl.toggleMenu()})),ta(this,"getTimeZone",(()=>this.dashboard.getTimezone())),ta(this,"getDataFrameByRefId",(e=>this.dataList.filter((t=>t.refId===e))[0])),(0,I.defaults)(this.panel,this.panelDefaults),(0,I.defaults)(this.panel.tooltip,this.panelDefaults.tooltip),(0,I.defaults)(this.panel.legend,this.panelDefaults.legend),(0,I.defaults)(this.panel.xaxis,this.panelDefaults.xaxis),(0,I.defaults)(this.panel.options,this.panelDefaults.options),this.useDataFrames=!0,this.processor=new zs(this.panel),this.contextMenuCtrl=new Ws(e),this.events.on(ue.PanelEvents.render,this.onRender.bind(this)),this.events.on(ue.PanelEvents.dataFramesReceived,this.onDataFramesReceived.bind(this)),this.events.on(ue.PanelEvents.dataSnapshotLoad,this.onDataSnapshotLoad.bind(this)),this.events.on(ue.PanelEvents.editModeInitialized,this.onInitEditMode.bind(this)),this.events.on(ue.PanelEvents.initPanelActions,this.onInitPanelActions.bind(this));const s=this.panel.fieldConfig.defaults.unit;s&&(this.panel.yaxes[0].format=s)}onInitEditMode(){this.addEditorTab("Display","public/app/plugins/panel/graph/tab_display.html"),this.addEditorTab("Series overrides","public/app/plugins/panel/graph/tab_series_overrides.html"),this.addEditorTab("Axes",Hs),this.addEditorTab("Legend","public/app/plugins/panel/graph/tab_legend.html"),this.addEditorTab("Thresholds","public/app/plugins/panel/graph/tab_thresholds.html"),this.addEditorTab("Time regions","public/app/plugins/panel/graph/tab_time_regions.html"),this.subTabIndex=0,this.hiddenSeriesTainted=!1}onInitPanelActions(e){e.push({text:"Toggle legend",click:"ctrl.toggleLegend()",shortcut:"p l"})}zoomOut(e){Y.h$.publish(new Ys.p8(2))}onDataSnapshotLoad(e){const{series:t,annotations:s}=(0,Xs.y)(this.panel,this.dashboard);this.panelData.annotations=s,this.onDataFramesReceived(t)}onDataFramesReceived(e){var t;this.dataList=e,this.seriesList=this.processor.getSeriesList({dataList:this.dataList,range:this.range}),this.dataWarning=this.getDataWarning(),this.alertState=void 0,this.seriesList.alertState=void 0,this.panelData.alertState&&(this.alertState=this.panelData.alertState,this.seriesList.alertState=this.alertState.state),this.annotations=[],null!==(t=this.panelData.annotations)&&void 0!==t&&t.length&&(this.annotations=(0,ea.em)(this.panelData.annotations)),this.loading=!1,this.render(this.seriesList)}getDataWarning(){if(0===this.seriesList.reduce(((e,t)=>e+t.datapoints.length),0)){if(this.dataList)for(const t of this.dataList){var e;if(t.length&&null!==(e=t.fields)&&void 0!==e&&e.length)return{title:"Unable to graph data",tip:"Data exists, but is not timeseries",actionText:"Switch to table view",action:()=>{(0,Qs.WI)((0,Zs.Kc)(this.panel,"table"))}}}return{title:"No data",tip:"No data returned from query"}}for(const e of this.seriesList)if(!e.isOutsideRange)return;const t={title:"Data outside time range",tip:"Can be caused by timezone mismatch or missing time filter in query"},s=function(e){const t={from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER};let s=!1;const a=[ue.ReducerID.min,ue.ReducerID.max];for(const n of e)for(const e of n.fields)if(e.type===ue.FieldType.time){const n=(0,ue.reduceField)({field:e,reducers:a});t.from=Math.min(t.from,n[ue.ReducerID.min]),t.to=Math.max(t.to,n[ue.ReducerID.max]),s=!0}return s?t:void 0}(this.dataList);return s&&(t.actionText="Zoom to data",t.action=()=>{(0,Se.getLocationSrv)().update({partial:!0,query:{from:s.from,to:s.to}})}),t}onRender(){if(this.seriesList){Ks.X.alertToGraphThresholds(this.panel);for(const e of this.seriesList)e.applySeriesOverrides(this.panel.seriesOverrides),e.unit&&(this.panel.yaxes[e.yaxis-1].format=e.unit),!1===this.hiddenSeriesTainted&&!0===e.hiddenSeries&&(this.hiddenSeries[e.alias]=!0)}}addSeriesOverride(e){this.panel.seriesOverrides.push(e||{})}removeSeriesOverride(e){this.panel.seriesOverrides=(0,I.without)(this.panel.seriesOverrides,e),this.render()}toggleLegend(){this.panel.legend.show=!this.panel.legend.show,this.render()}legendValuesOptionChanged(){const e=this.panel.legend;e.values=e.min||e.max||e.avg||e.current||e.total,this.render()}}sa.$inject=["$scope","$injector"],ta(sa,"template",'\n<div class="graph-panel" ng-class="{\'graph-panel--legend-right\': ctrl.panel.legend.rightSide}">\n  <div class="graph-panel__chart" grafana-graph ng-dblclick="ctrl.zoomOut()">\n  </div>\n\n  <div class="graph-legend">\n    <div class="graph-legend-content" graph-legend></div>\n  </div>\n  <div ng-if="ctrl.contextMenuCtrl.isVisible">\n    <graph-context-menu\n      itemsGroup="ctrl.contextMenuCtrl.menuItemsSupplier()"\n      on-close="ctrl.onContextMenuClose"\n      getContextMenuSource="ctrl.contextMenuCtrl.getSource"\n      timeZone="ctrl.getTimeZone()"\n      x="ctrl.contextMenuCtrl.position.x"\n      y="ctrl.contextMenuCtrl.position.y"\n    ></graph-context-menu>\n  </div>\n</div>\n');const aa=new ue.PanelPlugin(null).useFieldConfig({disableStandardOptions:[ue.FieldConfigProperty.NoValue,ue.FieldConfigProperty.Thresholds,ue.FieldConfigProperty.Max,ue.FieldConfigProperty.Min,ue.FieldConfigProperty.Decimals,ue.FieldConfigProperty.Color,ue.FieldConfigProperty.Mappings]}).setDataSupport({annotations:!0,alertStates:!0}).setMigrationHandler((e=>{var t;const s=null!==(t=e.fieldConfig)&&void 0!==t?t:{defaults:{},overrides:[]},a=e.options||{};return a.dataLinks&&(s.defaults.links=a.dataLinks,delete a.dataLinks),e.options=a,e.fieldConfig=s,a}));let na;aa.angularPanelCtrl=sa,function(e){e.None="none",e.Linear="linear"}(na||(na={}));const ia={line:na.None,lineWidth:1,lineStyle:{fill:"solid"},point:Ce.Jp.Auto,pointSize:{fixed:5,min:1,max:20},axisPlacement:Ce.LB.Auto};var ra=s("./public/app/plugins/panel/timeseries/LineStyleEditor.tsx");const oa=void 0;let la;function ca(e){return e.type===ue.FieldType.number}function da(e){return e?t=>e===t||!(!e.state||e.state!==t.state):()=>!1}function ua(e){if(!e)return()=>!1;const t=da(e);return e=>!t(e,void 0,void 0)}var pa,ha,ga,ma,fa,ba,va;!function(e){e[e.NoData=0]="NoData",e[e.BadFrameSelection=1]="BadFrameSelection",e[e.XNotFound=2]="XNotFound"}(la||(la={}));const xa=({value:e,onChange:t,context:s})=>{var a;const n=(0,q.useMemo)((()=>{var e;return null!=s&&null!==(e=s.data)&&void 0!==e&&e.length?s.data.map(((e,t)=>({value:t,label:(0,ue.getFrameDisplayName)(e,t)}))):[{value:0,label:"First result"}]}),[s.data]),i=(0,q.useMemo)((()=>function(e,t){var s;if(!t||!t.length)return{error:la.NoData};e||(e={frame:0});let a=t[null!==(s=e.frame)&&void 0!==s?s:0];if(!a)return{error:la.BadFrameSelection};let n=-1;for(let s=0;s<a.fields.length;s++){const i=a.fields[s];if(e.x&&e.x===(0,ue.getFieldDisplayName)(i,a,t)){n=s;break}if(ca(i)&&!e.x){n=s;break}}let i=!1;const r=a.fields[n],o=[r];for(const s of a.fields)if(s.type===ue.FieldType.time&&(i=!0),s!==r&&ca(s)){if(e.exclude){const n=(0,ue.getFieldDisplayName)(s,a,t);if(e.exclude.includes(n))continue}o.push(s)}return{x:r,fields:{x:da(r),y:ua(r)},frame:Object.assign({},a,{fields:o}),hasData:a.fields.length>0,hasTime:i}}(e,s.data)),[s.data,e]),r=(0,q.useMemo)((()=>{var t;const a={label:"?",value:void 0},n={numberFields:[a],yFields:[],xAxis:null!=e&&e.x?{label:`${e.x} (Not found)`,value:e.x}:a},r=s.data?s.data[null!==(t=null==e?void 0:e.frame)&&void 0!==t?t:0]:void 0;if(r){const t=i.x?(0,ue.getFieldDisplayName)(i.x,i.frame,s.data):void 0;for(let i of r.fields)if(ca(i)){const l=(0,ue.getFieldDisplayName)(i,r,s.data),c={label:l,value:l};var o;if(n.numberFields.push(c),"?"===a.label&&(a.label=`${l} (First)`),null!=e&&e.x&&l===e.x&&(n.xAxis=c),t!==l)n.yFields.push({label:l,value:null==e||null===(o=e.exclude)||void 0===o?void 0:o.includes(l)})}}return n}),[i,s.data,e]),o=(0,ge.useTheme)(),l=ya(o);return s.data?(0,be.jsxs)("div",{children:[(0,be.jsx)(ge.Select,{menuShouldPortal:!0,options:n,value:null!==(a=n.find((t=>t.value===(null==e?void 0:e.frame))))&&void 0!==a?a:n[0],onChange:s=>{t(Object.assign({},e,{frame:s.value}))}}),ha||(ha=(0,be.jsx)("br",{})),ga||(ga=(0,be.jsx)(ge.Label,{children:"X Field"})),(0,be.jsx)(ge.Select,{menuShouldPortal:!0,options:r.numberFields,value:r.xAxis,onChange:s=>{t(Object.assign({},e,{x:s.value}))}}),ma||(ma=(0,be.jsx)("br",{})),fa||(fa=(0,be.jsx)(ge.Label,{children:"Y Fields"})),(0,be.jsx)("div",{children:r.yFields.map((s=>(0,be.jsxs)("div",{className:l.row,children:[(0,be.jsx)(ge.IconButton,{name:s.value?"eye-slash":"eye",onClick:()=>{const a=null!=e&&e.exclude?[...e.exclude]:[];let n=a.indexOf(s.label);n<0?a.push(s.label):a.splice(n,1),t(Object.assign({},e,{exclude:a}))}}),s.label]},s.label)))}),ba||(ba=(0,be.jsx)("br",{}))," ",va||(va=(0,be.jsx)("br",{}))]}):pa||(pa=(0,be.jsx)("div",{children:"No data..."}))},ya=(0,ge.stylesFactory)((e=>({sorter:me.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:me.css`
    padding: ${e.spacing.xs} ${e.spacing.sm};
    border-radius: ${e.border.radius.sm};
    background: ${e.colors.bg2};
    min-height: ${e.spacing.formInputHeight}px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${e.colors.formInputBorder};
  `})));var wa=s("./public/app/features/dimensions/index.ts"),ja=s("./public/app/plugins/panel/barchart/quadtree.ts"),ka=s("./packages/grafana-data/src/themes/colorManipulator.ts"),Sa=s("./node_modules/uplot/dist/uPlot.esm.js");function Ca(e,t,s,a){let n,i;try{n=function(e,t){var s,a;let n=0;if(!t.length)throw"missing data";var i;if("explicit"===e.mode&&null!==(i=e.series)&&void 0!==i&&i.length)for(const s of e.series){if(null==s||!s.x)throw"Select X dimension";if(null==s||!s.y)throw"Select Y dimension";for(let e=0;e<t.length;e++){const a=t[e],i=(0,wa.rj)(a,s.x);if(null!=i){var r,o,l;const c=(0,wa.rj)(a,s.y);if(null==c)throw"Y must be in the same frame as X";const d={pointColorFixed:null===(r=s.pointColor)||void 0===r?void 0:r.fixed,pointColorIndex:(0,wa.rj)(a,null===(o=s.pointColor)||void 0===o?void 0:o.field),pointSizeConfig:s.pointSize,pointSizeIndex:(0,wa.rj)(a,null===(l=s.pointSize)||void 0===l?void 0:l.field)};return[Ta(n++,t,e,i,c,d)]}}}const c=null!==(s=e.dims)&&void 0!==s?s:{},d=null!==(a=c.frame)&&void 0!==a?a:0,u=t[d],p=[];let h=(0,wa.rj)(u,c.x);for(let e=0;e<u.fields.length;e++)if(ca(u.fields[e])){if(null==h||e===h){h=e;continue}if(c.exclude&&c.exclude.includes((0,ue.getFieldDisplayName)(u.fields[e],u,t)))continue;p.push(e)}if(null==h)throw"Missing X dimension";if(!p.length)throw"No Y values";return p.map((e=>Ta(n++,t,d,h,e,{})))}(e,t()),i=Na(t,n,s,a)}catch(e){return console.log("prepScatter ERROR",e),{error:e.message,series:[]}}return{series:n,builder:i}}function Ta(e,t,s,a,n,i){var r,o,l,c,d,u,p,h;const g=t[s],m=g.fields[n];let f=null!==(r=m.state)&&void 0!==r?r:{};f.seriesIndex=e,m.state=f;let b=i.pointColorFixed?Se.config.theme2.visualization.getColorByName(i.pointColorFixed):(0,ue.getFieldSeriesColor)(m,Se.config.theme2).color,v=()=>b;const x=Object.assign({},ia,m.config.custom);let y=ue.fieldColorModeRegistry.get(ue.FieldColorModeId.PaletteClassic);if(i.pointColorIndex){const e=t[s].fields[i.pointColorIndex];if(e){var w;const t=null!==(w=e.display)&&void 0!==w?w:(0,ue.getDisplayProcessor)({field:e,theme:Se.config.theme2});if(y=(0,ue.getFieldColorModeForField)(m),y.isByValue){const e=i.pointColorIndex;v=s=>s.fields[e].values.toArray().map((e=>t(e).color))}else b=y.getCalculator(e,Se.config.theme2)(e.values.get(0),1),v=()=>b}}let j=i.pointSizeConfig,k=null!==(o=null!==(l=null===(c=i.pointSizeConfig)||void 0===c?void 0:c.fixed)&&void 0!==l?l:null===(d=m.config.custom)||void 0===d||null===(u=d.pointSizeConfig)||void 0===u?void 0:u.fixed)&&void 0!==o?o:5,S=()=>k;i.pointSizeIndex?S=e=>{const t=(0,wa.A)(e.fields[i.pointSizeIndex],i.pointSizeConfig,wa.B5.Quadratic),s=Array(e.length);for(let a=0;a<e.length;a++)s[a]=t.get(a);return s}:j={fixed:k,min:k,max:k};const C=(0,ue.getFieldDisplayName)(m,g,t);return{name:C,frame:e=>e[s],x:e=>e.fields[a],y:e=>e.fields[n],legend:e=>[{label:C,color:b,getItemKey:()=>C,yAxis:n}],line:null!==(p=x.line)&&void 0!==p?p:na.None,lineWidth:null!==(h=x.lineWidth)&&void 0!==h?h:2,lineStyle:x.lineStyle,lineColor:()=>b,point:x.point,pointSize:S,pointColor:v,pointSymbol:(e,t)=>"circle",label:Ce.Jp.Never,labelValue:()=>"",hints:{pointSize:j,pointColor:{mode:y}}}}const Na=(e,t,s,a)=>{let n,i;let r=(o={disp:{size:{values:(e,t)=>e.data[t][2]},color:{values:(e,t)=>e.data[t][3],alpha:(e,t)=>e.data[t][4]}},each:(e,t,s,a,i,r,o)=>{a-=e.bbox.left,i-=e.bbox.top,n.add({x:a,y:i,w:r,h:o,sidx:t,didx:s})}},(s,a,n,i)=>(Sa.Z.orient(s,a,((n,i,r,l,c,d,u,p,h,g,m,f,b,v,x)=>{var y;const w=t[a-1];let j=s.data[a],k=w.line!==na.None,S=w.point===Ce.Jp.Always;S||w.point!==Ce.Jp.Auto||(S=j[0].length<1e3),S||k||(k=!0),s.ctx.save(),s.ctx.rect(s.bbox.left,s.bbox.top,s.bbox.width,s.bbox.height),s.ctx.clip(),s.ctx.fillStyle=n.fill(),s.ctx.strokeStyle=n.stroke(),s.ctx.lineWidth=1;let C=2*Math.PI,T=n.facets[0].scale,N=n.facets[1].scale,O=w.hints.pointSize;const I=w.hints.pointColor.mode.isByValue;let P=(null!==(y=O.max)&&void 0!==y?y:O.fixed)*devicePixelRatio,M=s.posToVal(-P/2,T),F=s.posToVal(s.bbox.width/devicePixelRatio+P/2,T),A=s.posToVal(s.bbox.height/devicePixelRatio+P/2,N),D=s.posToVal(-P/2,N),$=o.disp.size.values(s,a),L=o.disp.color.values(s,a),E=o.disp.color.alpha(s,a),R=k?new Path2D:null;for(let e=0;e<j[0].length;e++){let t=j[0][e],n=j[1][e],i=$[e]*devicePixelRatio;if(t>=M&&t<=F&&n>=A&&n<=D){let r=d(t,l,g,p),f=u(n,c,m,h);k&&R.lineTo(r,f),S&&(s.ctx.moveTo(r+i/2,f),s.ctx.beginPath(),s.ctx.arc(r,f,i/2,0,C),I&&(s.ctx.fillStyle=E[e],s.ctx.strokeStyle=L[e]),s.ctx.fill(),s.ctx.stroke(),o.each(s,a,e,r-i/2-.5,f-i/2-.5,i+1,i+1))}}if(k){let t=w.frame(e());s.ctx.strokeStyle=w.lineColor(t),s.ctx.lineWidth=w.lineWidth*devicePixelRatio;const{lineStyle:a}=w;var _;a&&"solid"!==a.fill&&("dot"===a.fill&&(s.ctx.lineCap="round"),s.ctx.setLineDash(null!==(_=a.dash)&&void 0!==_?_:[10,10])),s.ctx.stroke(R)}s.ctx.restore()})),null));var o;const l=new ge.UPlotConfigBuilder;let c;l.setCursor({drag:{setScale:!0},dataIdx:(e,t)=>{if(1===t){i=null;let t=1/0,s=e.cursor.left*devicePixelRatio,a=e.cursor.top*devicePixelRatio;n.get(s,a,1,1,(e=>{if((0,ja.P)(s,a,e.x,e.y,e.x+e.w,e.y+e.h)){let n=e.x+e.w/2,r=e.y+e.h/2,o=n-s,l=r-a,c=Math.sqrt(o**2+l**2);c<=e.w/2&&c<=t&&(t=c,i=e)}}))}return i&&t===i.sidx?i.didx:null},points:{size:(e,t)=>i&&t===i.sidx?i.w/devicePixelRatio:0,fill:(e,t)=>"rgba(255,255,255,0.4)"}}),l.addHook("init",((e,t)=>{e.over.style.overflow="hidden"})),l.addHook("syncRect",((e,t)=>{c=t})),l.addHook("setLegend",(e=>{if(null!=e.cursor.idxs)for(let t=0;t<e.cursor.idxs.length;t++){const s=e.cursor.idxs[t];if(null!=s)return void a({scatterIndex:t-1,xIndex:s,pageX:c.left+e.cursor.left,pageY:c.top+e.cursor.top})}a(void 0)})),l.addHook("drawClear",(e=>{n=n||new ja.l(0,0,e.bbox.width,e.bbox.height),n.clear(),e.series.forEach(((e,t)=>{t>0&&(e._paths=null)}))})),l.setMode(2);const d=e();let u=t[0].x(t[0].frame(d));return l.addScale({scaleKey:"x",isTime:!1,orientation:Ce.wN.Horizontal,direction:Ce.bQ.Right,range:(e,t,s)=>[t,s]}),l.addAxis({scaleKey:"x",placement:Ce.LB.Bottom,theme:s,label:u.config.custom.axisLabel}),t.forEach((e=>{var t;let a=e.frame(d),n=e.y(a);const i=e.lineColor(a),o=function(e,t){const s=t(e);if(Array.isArray(s))return s[0];return s}(a,e.pointColor);let c=null!==(t=n.config.unit)&&void 0!==t?t:"y";l.addScale({scaleKey:c,orientation:Ce.wN.Vertical,direction:Ce.bQ.Up,range:(e,t,s)=>[t,s]}),l.addAxis({scaleKey:c,theme:s,label:n.config.custom.axisLabel,values:(e,t)=>t.map((e=>n.display(e).text))}),l.addSeries({facets:[{scale:"x",auto:!0},{scale:c,auto:!0}],pathBuilder:r,theme:s,scaleKey:"",lineColor:i,fillColor:(0,ka.alpha)(o,.5)})})),l};function Oa(e,t,s){return e.error?[null]:[null,...e.series.map(((e,s)=>{const a=e.frame(t);let n,i;const r=e.pointColor(a);return Array.isArray(r)?(n=r,i=r.map((e=>(0,ka.alpha)(e,.5)))):(n=Array(a.length).fill(r),i=Array(a.length).fill((0,ka.alpha)(r,.5))),[e.x(a).values.toArray(),e.y(a).values.toArray(),Ia(a,e.pointSize),n,i]}))]}function Ia(e,t){const s=t(e);return Array.isArray(s)?s:Array(e.length).fill(s)}class Pa extends q.PureComponent{constructor(...e){var t,s,a;super(...e),t=this,s="style",a=Fa(Z.vc.theme2),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}render(){const{series:e,data:t,rowIndex:s}=this.props;if(!e||null==s)return null;const a=e.frame(t);return(0,be.jsx)("table",{className:this.style.infoWrap,children:(0,be.jsx)("tbody",{children:a.fields.map(((e,t)=>(0,be.jsxs)("tr",{className:undefined===e?this.style.highlight:"",children:[(0,be.jsxs)("th",{children:[(0,ue.getFieldDisplayName)(e,a),":"]}),(0,be.jsx)("td",{children:Ma(e,s)})]},`${t}/${s}`)))})})}}function Ma(e,t){const s=e.values.get(t);return e.display?(0,ue.formattedValueToString)(e.display(s)):`${s}`}const Fa=(0,ge.stylesFactory)((e=>({infoWrap:me.css`
    padding: 8px;
    th {
      font-weight: ${e.typography.fontWeightMedium};
      padding: ${e.spacing(.25,2)};
    }
  `,highlight:me.css`
    background: ${e.colors.action.hover};
  `})));function Aa(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Da extends q.PureComponent{constructor(...e){super(...e),Aa(this,"state",{series:[]}),Aa(this,"scatterHoverCallback",(e=>{this.setState({hover:e})})),Aa(this,"getData",(()=>this.props.data.series)),Aa(this,"initSeries",(()=>{const{options:e,data:t}=this.props,s=Ca(e,this.getData,Se.config.theme2,this.scatterHoverCallback);s.series.length&&t.series&&(s.facets=Oa(s,t.series),s.error=void 0),this.setState(s)})),Aa(this,"initFacets",(()=>{this.setState({facets:Oa(this.state,this.props.data.series)})})),Aa(this,"renderLegend",(()=>{const{data:e}=this.props,{series:t}=this.state,s=[];for(const a of t){const t=a.frame(e.series);if(t)for(const e of a.legend(t))s.push(e)}return(0,be.jsx)(ge.VizLayout.Legend,{placement:"bottom",children:(0,be.jsx)(ge.VizLegend,{placement:"bottom",items:s,displayMode:ge.LegendDisplayMode.List})})}))}componentDidMount(){this.initSeries()}componentDidUpdate(e){const{options:t,data:s}=this.props;t!==e.options||s.structureRev!==e.data.structureRev?this.initSeries():s!==e.data&&this.initFacets()}render(){const{width:e,height:t,timeRange:s,data:a}=this.props,{error:n,facets:i,builder:r,hover:o,series:l}=this.state;return n||!r?(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsx)("p",{children:n})}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ge.VizLayout,{width:e,height:t,legend:this.renderLegend(),children:(e,t)=>(0,be.jsx)(ge.UPlotChart,{config:r,data:i,width:e,height:t,timeRange:s})}),(0,be.jsx)(ge.Portal,{children:o&&(0,be.jsx)(ge.VizTooltipContainer,{position:{x:o.pageX,y:o.pageY},offset:{x:10,y:10},children:(0,be.jsx)(Pa,{series:l[o.scatterIndex],rowIndex:o.xIndex,data:a.series})})})]})}}var $a=s("./public/app/features/dimensions/editors/index.ts");const La=new ue.PanelPlugin(Da).useFieldConfig((Ea=ia,{standardOptions:{[ue.FieldConfigProperty.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:ue.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{var t;e.addRadio({path:"point",name:"Points",category:oa,defaultValue:Ea.point,settings:{options:ge.graphFieldOptions.showPoints}}).addSliderInput({path:"pointSize.fixed",name:"Point size",category:oa,defaultValue:null===(t=Ea.pointSize)||void 0===t?void 0:t.fixed,settings:{min:1,max:100,step:1},showIf:e=>e.point!==Ce.Jp.Never}).addRadio({path:"line",name:"Lines",category:oa,defaultValue:Ea.line,settings:{options:[{label:"None",value:na.None},{label:"Linear",value:na.Linear}]}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:oa,showIf:e=>e.line!==na.None,editor:ra.j,override:ra.j,process:ue.identityOverrideProcessor,shouldApply:e=>e.type===ue.FieldType.number}).addSliderInput({path:"lineWidth",name:"Line width",category:oa,defaultValue:Ea.lineWidth,settings:{min:0,max:10,step:1},showIf:e=>e.line!==na.None}),ge.commonOptionsBuilder.addAxisConfig(e,Ea),ge.commonOptionsBuilder.addHideFrom(e)}})).setPanelOptions((e=>{e.addRadio({path:"mode",name:"Mode",defaultValue:"single",settings:{options:[{value:"xy",label:"XY",description:"No changes to saved model since 8.0"},{value:"explicit",label:"Explicit"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"Data",editor:xa,showIf:e=>"xy"===e.mode}).addFieldNamePicker({path:"series[0].x",name:"X Field",showIf:e=>"explicit"===e.mode}).addFieldNamePicker({path:"series[0].y",name:"Y Field",showIf:e=>"explicit"===e.mode}).addCustomEditor({id:"seriesZerox.pointColor",path:"series[0].pointColor",name:"Point color",editor:$a.Lm,settings:{},defaultValue:{},showIf:e=>"explicit"===e.mode}).addCustomEditor({id:"seriesZerox.pointSize",path:"series[0].pointSize",name:"Point size",editor:$a.cL,settings:{min:1,max:50},defaultValue:{fixed:5,min:1,max:50},showIf:e=>"explicit"===e.mode}),ge.commonOptionsBuilder.addTooltipOptions(e),ge.commonOptionsBuilder.addLegendOptions(e)}));var Ea,Ra=s("./public/app/features/dashboard/services/DashboardSrv.ts");const _a=e=>({dashlistSectionHeader:me.css`
    margin-bottom: ${e.spacing(2)};
    color: ${e.colors.secondary.text};
  `,dashlistSection:me.css`
    margin-bottom: ${e.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:me.css`
    ${ge.styleMixins.listItem(e)}
    display: flex;
    cursor: pointer;
    margin: 3px;
    padding: 7px;
  `,dashlistStar:me.css`
    display: flex;
    align-items: center;
    color: ${e.colors.secondary.text};
    cursor: pointer;
    z-index: 1;
  `,dashlistFolder:me.css`
    color: ${e.colors.secondary.text};
    font-size: ${e.typography.bodySmall.fontSize};
    line-height: ${e.typography.body.lineHeight};
  `,dashlistTitle:me.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:me.css`
    flex-grow: 1;
  `,dashlistItem:me.css`
    position: relative;
    list-style: none;
  `});var Va=s("./node_modules/debounce-promise/dist/index.js"),Ba=s.n(Va),za=s("./public/app/features/manage-dashboards/state/actions.ts");async function Ua({query:e,permissionLevel:t,extraFolders:s}){const a=await async function({query:e,permissionLevel:t}){return(await(0,za.ZL)(e,t)).map((e=>({id:e.id,title:e.title,url:e.url})))}({query:e,permissionLevel:t}),n=null!=s?s:[],i=e?n.filter((t=>{var s;return null===(s=t.title)||void 0===s?void 0:s.toLowerCase().includes(e.toLowerCase())})):n;return a?i.concat(a):i}function qa(e,t){return null==e?void 0:e.find((e=>{var s;return(null===(s=e.value)||void 0===s?void 0:s.id)===t}))}var Ha=s("./public/app/features/search/constants.ts");const Ga={id:void 0,title:"All"},Wa={id:Ha.pW,title:Ha.fy};function Za({onChange:e,extraFolders:t=[],initialFolderId:s,permissionLevel:a=Jt.bf.View}){const[n,i]=(0,q.useState)(!1),[r,o]=(0,q.useState)(void 0),[l,c]=(0,q.useState)(void 0),d=(0,q.useCallback)((async t=>{let a=qa(t,s);var n;a||(a=null!==(n=await async function(e){if(null!=e)try{const{id:t,title:s}=await(0,za.EW)(e);return{value:{id:t,title:s},label:s}}catch(t){console.error(`Could not find folder with id:${e}`)}}(s))&&void 0!==n?n:t[0],e(a.value));i(!0),c(t),o(a)}),[s,e]),u=(0,q.useCallback)((async e=>{const s=await async function({query:e,permissionLevel:t=Jt.bf.View,extraFolders:s=[]}){return(await Ua({query:e,permissionLevel:t,extraFolders:s})).map((e=>({value:e,label:e.title})))}({query:e,permissionLevel:a,extraFolders:t});return n||await d(s),s}),[a,t,n,d]),p=Ba()(u,300,{leading:!0}),h=(0,q.useCallback)((({value:t})=>{const s=qa(l,null==t?void 0:t.id);o(s),e(t)}),[l,e]);return(0,be.jsx)("div",{"data-testid":ot.wl.components.ReadonlyFolderPicker.container,children:(0,be.jsx)(ge.AsyncSelect,{menuShouldPortal:!0,loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:r,value:r,loadOptions:p,onChange:h})})}const Qa=new ue.PanelPlugin((function(e){const[t,s]=(0,q.useState)(new Map);(0,q.useEffect)((()=>{(async function(e,t){let s=Promise.resolve([]);if(e.showStarred){const t={limit:e.maxItems,starred:"true"};s=(0,le.i)().search(t)}let a=Promise.resolve([]),n=[];e.showRecentlyViewed&&(n=(0,I.take)(de.Z.getDashboardOpened(),e.maxItems),a=(0,le.i)().search({dashboardIds:n,limit:e.maxItems}));let i=Promise.resolve([]);if(e.showSearch){const s={limit:e.maxItems,query:t(e.query,{},"text"),folderIds:e.folderId,tag:e.tags.map((e=>t(e,{},"text"))),type:"dash-db"};i=(0,le.i)().search(s)}const[r,o,l]=await Promise.all([s,i,a]);let c=new Map;for(const e of n){const t=l.find((t=>t.id===e));t&&c.set(e,Object.assign({},t,{isRecent:!0}))}return o.forEach((e=>{c.has(e.id)?c.get(e.id).isSearchResult=!0:c.set(e.id,Object.assign({},e,{isSearchResult:!0}))})),r.forEach((e=>{c.has(e.id)?c.get(e.id).isStarred=!0:c.set(e.id,Object.assign({},e,{isStarred:!0}))})),c})(e.options,e.replaceVariables).then((e=>{s(e)}))}),[e.options,e.replaceVariables,e.renderCounter]);const a=async(e,a)=>{e.preventDefault(),e.stopPropagation();const n=await(0,Ra.h4)().starDashboard(a.id.toString(),a.isStarred),i=new Map(t);i.set(a.id,Object.assign({},a,{isStarred:n})),s(i)},[n,i,r]=(0,q.useMemo)((()=>{const e=[...t.values()];return[e.filter((e=>e.isStarred)).sort(((e,t)=>e.title.localeCompare(t.title))),e.filter((e=>e.isRecent)),e.filter((e=>e.isSearchResult)).sort(((e,t)=>e.title.localeCompare(t.title)))]}),[t]),{showStarred:o,showRecentlyViewed:l,showHeadings:c,showSearch:d}=e.options,u=[{header:"Starred dashboards",dashboards:n,show:o},{header:"Recently viewed dashboards",dashboards:i,show:l},{header:"Search",dashboards:r,show:d}],p=(0,ge.useStyles2)(_a);return(0,be.jsx)(ge.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:u.map((({show:e,header:t,dashboards:s},n)=>e&&(0,be.jsxs)("div",{className:p.dashlistSection,children:[c&&(0,be.jsx)("h6",{className:p.dashlistSectionHeader,children:t}),(0,be.jsx)("ul",{children:s.map((e=>(0,be.jsx)("li",{className:p.dashlistItem,children:(0,be.jsxs)("div",{className:p.dashlistLink,children:[(0,be.jsxs)("div",{className:p.dashlistLinkBody,children:[(0,be.jsx)("a",{className:p.dashlistTitle,href:e.url,children:e.title}),e.folderTitle&&(0,be.jsx)("div",{className:p.dashlistFolder,children:e.folderTitle})]}),(0,be.jsx)("span",{className:p.dashlistStar,onClick:t=>a(t,e),children:(0,be.jsx)(ge.Icon,{name:e.isStarred?"favorite":"star",type:e.isStarred?"mono":"default"})})]})},`dash-${e.id}`)))})]},`dash-group-${n}`)))})})).setPanelOptions((e=>{e.addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:!0}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:!1}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:!1}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:!0}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:10}).addTextInput({path:"query",name:"Query",defaultValue:""}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:e,onChange:t}){return(0,be.jsx)(Za,{initialFolderId:e,onChange:e=>t(null==e?void 0:e.id),extraFolders:[Ga,Wa]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor:e=>(0,be.jsx)(ge.TagsInput,{tags:e.value,onChange:e.onChange})})})).setMigrationHandler((e=>{var t,s,a,n,i,r,o,l;const c={showStarred:null!==(t=e.options.showStarred)&&void 0!==t?t:e.starred,showRecentlyViewed:null!==(s=e.options.showRecentlyViewed)&&void 0!==s?s:e.recent,showSearch:null!==(a=e.options.showSearch)&&void 0!==a?a:e.search,showHeadings:null!==(n=e.options.showHeadings)&&void 0!==n?n:e.headings,maxItems:null!==(i=e.options.maxItems)&&void 0!==i?i:e.limit,query:null!==(r=e.options.query)&&void 0!==r?r:e.query,folderId:null!==(o=e.options.folderId)&&void 0!==o?o:e.folderId,tags:null!==(l=e.options.tags)&&void 0!==l?l:e.tags};if(parseFloat(e.pluginVersion||"6.1")<6.3){["starred","recent","search","headings","limit","query","folderId"].forEach((t=>delete e[t]))}return c}));var Ka,Ya=s("./node_modules/react-use/esm/useAsync.js"),Ja=s("./public/app/core/services/context_srv.ts");function Xa({pluginName:e,pluginID:t,onDismiss:s}){const a=(0,ge.useStyles)(en);return(0,be.jsxs)(ge.Modal,{title:"Update Plugin",icon:"cloud-download",onDismiss:s,isOpen:!0,children:[(0,be.jsxs)("div",{className:a.container,children:[(0,be.jsxs)("p",{children:["Type the following on the command line to update ",e,"."]}),(0,be.jsx)("pre",{children:(0,be.jsxs)("code",{children:["grafana-cli plugins update ",t]})}),(0,be.jsxs)("span",{className:a.small,children:["Check out ",e," on ",(0,be.jsx)("a",{href:`https://grafana.com/plugins/${t}`,children:"Grafana.com"})," for README and changelog. If you do not have access to the command line, ask your Grafana administator."]})]}),(0,be.jsxs)("p",{className:a.updateAllTip,children:[(0,be.jsx)("img",{className:a.inlineLogo,src:"public/img/grafana_icon.svg"}),Ka||(Ka=(0,be.jsx)("strong",{children:"Pro tip"})),": To update all plugins at once, type"," ",(0,be.jsx)("code",{className:a.codeSmall,children:"grafana-cli plugins update-all"})," on the command line."]})]})}const en=(0,ge.stylesFactory)((e=>({small:me.css`
    font-size: ${e.typography.size.sm};
    font-weight: ${e.typography.weight.regular};
  `,codeSmall:me.css`
    font-size: ${e.typography.size.xs};
    padding: ${e.spacing.xxs};
    margin: 0 ${e.spacing.xxs};
  `,container:me.css`
    margin-bottom: calc(${e.spacing.d} * 2.5);
  `,updateAllTip:me.css`
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
  `,inlineLogo:me.css`
    vertical-align: sub;
    margin-right: calc(${e.spacing.d} / 3);
    width: ${e.spacing.md};
  `})));const tn=(0,ge.stylesFactory)((e=>({pluginList:me.css`
    display: flex;
    flex-direction: column;
  `,section:me.css`
    display: flex;
    flex-direction: column;
    &:not(:last-of-type) {
      margin-bottom: 16px;
    }
  `,sectionHeader:me.css`
    color: ${e.colors.textWeak};
    margin-bottom: ${e.spacing.d};
  `,image:me.css`
    width: 17px;
    margin-right: ${e.spacing.xxs};
  `,title:me.css`
    margin-right: calc(${e.spacing.d} / 3);
  `,version:me.css`
    font-size: ${e.typography.size.sm};
    color: ${e.colors.textWeak};
  `,item:me.css`
    display: flex;
    justify-content: flex-start;
    align-items: center;
    cursor: pointer;
    margin: ${e.spacing.xxs};
    padding: ${e.spacing.sm};
    background: ${e.colors.dashboardBg};
    border-radius: ${e.border.radius.md};
  `,message:me.css`
    margin-left: auto;
    font-size: ${e.typography.size.sm};
  `,messageEnable:me.css`
    color: ${e.colors.linkExternal};
    &:hover {
      border-bottom: ${e.border.width.sm} solid ${e.colors.linkExternal};
    }
  `,messageUpdate:me.css`
    &:hover {
      border-bottom: ${e.border.width.sm} solid ${e.colors.text};
    }
  `,messageNoUpdate:me.css`
    color: ${e.colors.textWeak};
  `,noneInstalled:me.css`
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
  `,emphasis:me.css`
    font-weight: ${e.typography.weight.semibold};
    font-style: normal;
    color: ${e.colors.textWeak};
  `}))),sn=new ue.PanelPlugin((function(e){const t=(0,Ya.Z)((async()=>{const e=await(0,le.i)().get("api/plugins",{embedded:0,core:0});return[{header:"Installed Apps",list:e.filter((e=>e.type===ue.PluginType.app)),type:ue.PluginType.app},{header:"Installed Panels",list:e.filter((e=>e.type===ue.PluginType.panel)),type:ue.PluginType.panel},{header:"Installed Datasources",list:e.filter((e=>e.type===ue.PluginType.datasource)),type:ue.PluginType.datasource}]}),[]),s=(0,ge.useStyles)(tn),a=Ja.Vt.user.isGrafanaAdmin;return t.loading||void 0===t.value?null:(0,be.jsx)(ge.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,be.jsx)("div",{className:s.pluginList,children:t.value.map((e=>(0,be.jsxs)("div",{className:s.section,children:[(0,be.jsx)("h6",{className:s.sectionHeader,children:e.header}),e.list.map((e=>(0,be.jsxs)("a",{className:s.item,href:e.defaultNavUrl,children:[(0,be.jsx)("img",{src:e.info.logos.small,className:s.image,width:"17",height:"17",alt:""}),(0,be.jsx)("span",{className:s.title,children:e.name}),(0,be.jsxs)("span",{className:s.version,children:["v",e.info.version]}),a&&(e.hasUpdate?(0,be.jsx)(ge.ModalsController,{children:({showModal:t,hideModal:a})=>(0,be.jsx)(ge.Tooltip,{content:`New version: ${e.latestVersion}`,placement:"top",children:(0,be.jsx)("span",{className:(0,me.cx)(s.message,s.messageUpdate),onClick:s=>{s.preventDefault(),t(Xa,{pluginID:e.id,pluginName:e.name,onDismiss:a,isOpen:!0})},children:"Update available!"})})}):e.enabled?(0,be.jsx)("span",{className:(0,me.cx)(s.message,s.messageNoUpdate),children:"Up to date"}):(0,be.jsx)("span",{className:(0,me.cx)(s.message,s.messageEnable),children:"Enable now"}))]},`plugin-${e.id}`))),0===e.list.length&&(0,be.jsx)("a",{className:s.item,href:"https://grafana.com/plugins",children:(0,be.jsxs)("span",{className:s.noneInstalled,children:["None installed. ",(0,be.jsx)("em",{className:s.emphasis,children:"Browse Grafana.com"})]})})]},`category-${e.type}`)))})})}));let an,nn;function rn(e,t){if(e===an.Importance)return(0,I.sortBy)(t,(e=>_e.Z.alertStateSortScore[e.state||e.newState]));if(e===an.TimeAsc)return(0,I.sortBy)(t,(e=>new Date(e.newStateDate||e.time)));if(e===an.TimeDesc)return(0,I.sortBy)(t,(e=>new Date(e.newStateDate||e.time))).reverse();const s=(0,I.sortBy)(t,(e=>(e.name||e.alertName).toLowerCase()));return e===an.AlphaDesc&&s.reverse(),s}function on(e){return Object.entries(e).filter((([e,t])=>t)).map((([e,t])=>e))}!function(e){e[e.AlphaAsc=1]="AlphaAsc",e[e.AlphaDesc=2]="AlphaDesc",e[e.Importance=3]="Importance",e[e.TimeAsc=4]="TimeAsc",e[e.TimeDesc=5]="TimeDesc"}(an||(an={})),function(e){e.Current="current",e.RecentChanges="changes"}(nn||(nn={}));const ln=(0,ge.stylesFactory)((e=>({cardContainer:me.css`
    padding: ${e.spacing.xs} 0 ${e.spacing.xxs} 0;
    line-height: ${e.typography.lineHeight.md};
    margin-bottom: 0px;
  `,container:me.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:me.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:me.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${e.colors.bg2};
    padding: ${e.spacing.xs} ${e.spacing.sm};
    border-radius: ${e.border.radius.md};
    margin-bottom: ${e.spacing.xs};
  `,alertRuleItemIcon:me.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${e.spacing.xl};
    padding: 0 ${e.spacing.xs} 0 ${e.spacing.xxs};
    margin-right: 0px;
  `,alertRuleItemText:me.css`
    font-weight: ${e.typography.weight.bold};
    font-size: ${e.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:me.css`
    color: ${e.colors.textWeak};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:me.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:me.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:me.css`
    margin-right: ${e.spacing.xs};
  `})));var cn=s("./node_modules/pluralize/pluralize.js"),dn=s.n(cn),un=s("./public/app/features/alerting/unified/components/AlertLabels.tsx"),pn=s("./public/app/features/alerting/unified/components/rules/AlertStateTag.tsx"),hn=s("./public/app/types/unified-alerting-dto.ts"),gn=s("./public/app/features/alerting/unified/utils/rules.ts");const mn=({ruleWithLocation:e,showInstances:t})=>{const{rule:s}=e,[a,n]=(0,q.useState)(t),i=(0,ge.useStyles2)(fn);(0,q.useEffect)((()=>{n(t)}),[t]);const r=(0,q.useMemo)((()=>a?s.alerts.slice().sort(((e,t)=>(0,gn.pB)(e).localeCompare((0,gn.pB)(t)))):[]),[s,a]);return(0,be.jsxs)("div",{children:[s.state!==hn.x_.Inactive&&(0,be.jsxs)("div",{className:i.instance,onClick:()=>n(!a),children:[(0,be.jsx)(ge.Icon,{name:a?"angle-down":"angle-right",size:"md"}),(0,be.jsx)("span",{children:`${s.alerts.length} ${dn()("instance",s.alerts.length)}`})]}),!!r.length&&(0,be.jsx)("ol",{className:i.list,children:r.map(((e,t)=>(0,be.jsxs)("li",{className:i.listItem,children:[(0,be.jsxs)("div",{children:[(0,be.jsx)(pn.l,{state:e.state}),(0,be.jsx)("span",{className:i.date,children:(0,ue.dateTime)(e.activeAt).format("YYYY-MM-DD HH:mm:ss")})]}),(0,be.jsx)(un.s,{labels:(0,I.omit)(e.labels,"alertname")})]},`${e.activeAt}-${t}`)))})]})},fn=e=>({instance:me.css`
    cursor: pointer;
  `,list:me.css`
    list-style-type: none;
  `,listItem:me.css`
    margin-top: ${e.spacing(1)};
  `,date:me.css`
    font-size: ${e.typography.bodySmall.fontSize};
    padding-left: ${e.spacing(.5)};
  `});var bn,vn=s("./public/app/features/alerting/unified/state/actions.ts"),xn=s("./public/app/features/alerting/unified/hooks/useUnifiedAlertingSelector.ts"),yn=s("./public/app/features/alerting/unified/utils/datasource.ts"),wn=s("./public/app/features/alerting/unified/utils/constants.ts");const jn=e=>({cardContainer:me.css`
    padding: ${e.spacing.xs} 0 ${e.spacing.xxs} 0;
    line-height: ${e.typography.lineHeight.md};
    margin-bottom: 0px;
  `,container:me.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:me.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:me.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${e.colors.bg2};
    padding: ${e.spacing.xs} ${e.spacing.sm};
    border-radius: ${e.border.radius.md};
    margin-bottom: ${e.spacing.xs};

    & > * {
      margin-right: ${e.spacing.sm};
    }
  `,alertName:me.css`
    font-size: ${e.typography.size.md};
    font-weight: ${e.typography.weight.bold};
  `,alertDuration:me.css`
    font-size: ${e.typography.size.sm};
  `,alertRuleItemText:me.css`
    font-weight: ${e.typography.weight.bold};
    font-size: ${e.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:me.css`
    color: ${e.colors.textWeak};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:me.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:me.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:me.css`
    margin-right: ${e.spacing.xs};
  `,instanceDetails:me.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}),kn=e=>({common:me.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${e.shape.borderRadius()};
    font-size: ${e.typography.size.sm};
    /* padding: ${e.spacing(2,0)}; */
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:me.css`
    margin-top: ${e.spacing(2.5)};
    align-self: flex-start;
  `,good:me.css`
    color: ${e.colors.success.main};
  `,bad:me.css`
    color: ${e.colors.error.main};
  `,warning:me.css`
    color: ${e.colors.warning.main};
  `,neutral:me.css`
    color: ${e.colors.secondary.main};
  `,info:me.css`
    color: ${e.colors.primary.main};
  `});var Sn=s("./public/app/features/alerting/unified/components/rule-editor/RuleFolderPicker.tsx");function Cn(e){return e.showOptions===nn.Current}const Tn=new ue.PanelPlugin((function(e){const[t,s]=(0,q.useState)(""),a=(0,Ya.Z)((async()=>{var t;if(e.options.showOptions!==nn.Current)return;const a={state:on(e.options.stateFilter)},n=null===(t=(0,Ra.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(e.id);var i;(e.options.alertName&&(a.query=(0,Se.getTemplateSrv)().replace(e.options.alertName,n.scopedVars)),e.options.folderId>=0&&(a.folderId=e.options.folderId),e.options.dashboardTitle&&(a.dashboardQuery=e.options.dashboardTitle),e.options.dashboardAlerts)&&(a.dashboardId=null===(i=(0,Ra.h4)().getCurrent())||void 0===i?void 0:i.id);e.options.tags&&(a.dashboardTag=e.options.tags);const r=await(0,Se.getBackendSrv)().get("/api/alerts",a,`alert-list-get-current-alert-state-${e.id}`);let o=rn(e.options.sortOrder,r.map((e=>Object.assign({},e,{stateModel:_e.Z.getStateDisplayModel(e.state),newStateDateAgo:(0,ue.dateTime)(e.newStateDate).locale("en").fromNow(!0)}))));return o.length>e.options.maxItems&&(o=o.slice(0,e.options.maxItems)),s(0===o.length?"No alerts":""),o}),[e.options.showOptions,e.options.stateFilter.alerting,e.options.stateFilter.execution_error,e.options.stateFilter.no_data,e.options.stateFilter.ok,e.options.stateFilter.paused,e.options.stateFilter.pending,e.options.maxItems,e.options.tags,e.options.dashboardAlerts,e.options.dashboardTitle,e.options.folderId,e.options.alertName,e.options.sortOrder]),n=(0,Ya.Z)((async()=>{if(e.options.showOptions!==nn.RecentChanges)return;const t={limit:e.options.maxItems,type:"alert",newState:on(e.options.stateFilter)},a=(0,Ra.h4)().getCurrent();e.options.dashboardAlerts&&(t.dashboardId=null==a?void 0:a.id),t.from=1e3*ue.dateMath.parse(null==a?void 0:a.time.from).unix(),t.to=1e3*ue.dateMath.parse(null==a?void 0:a.time.to).unix();const n=await(0,Se.getBackendSrv)().get("/api/annotations",t,`alert-list-get-state-changes-${e.id}`),i=rn(e.options.sortOrder,n.map((e=>Object.assign({},e,{time:null==a?void 0:a.formatDate(e.time,"MMM D, YYYY HH:mm:ss"),stateModel:_e.Z.getStateDisplayModel(e.newState),info:_e.Z.getAlertAnnotationInfo(e)}))));return s(0===i.length?"No alerts in current time range":""),i}),[e.options.showOptions,e.options.maxItems,e.options.stateFilter.alerting,e.options.stateFilter.execution_error,e.options.stateFilter.no_data,e.options.stateFilter.ok,e.options.stateFilter.paused,e.options.stateFilter.pending,e.options.dashboardAlerts,e.options.sortOrder]),i=(0,ge.useStyles)(ln);return(0,be.jsx)(ge.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,be.jsxs)("div",{className:i.container,children:[t&&(0,be.jsx)("div",{className:i.noAlertsMessage,children:t}),(0,be.jsx)("section",{children:(0,be.jsx)("ol",{className:i.alertRuleList,children:e.options.showOptions===nn.Current?!a.loading&&a.value&&a.value.map((e=>(0,be.jsx)("li",{className:i.alertRuleItem,children:(0,be.jsxs)(ge.Card,{heading:e.name,href:`${e.url}?viewPanel=${e.panelId}`,className:i.cardContainer,children:[(0,be.jsx)(ge.Card.Figure,{className:(0,me.cx)(i.alertRuleItemIcon,e.stateModel.stateClass),children:(0,be.jsx)(ge.Icon,{name:e.stateModel.iconClass,size:"xl",className:i.alertIcon})}),(0,be.jsx)(ge.Card.Meta,{children:(0,be.jsxs)("div",{className:i.alertRuleItemText,children:[(0,be.jsx)("span",{className:e.stateModel.stateClass,children:e.stateModel.text}),(0,be.jsxs)("span",{className:i.alertRuleItemTime,children:[" for ",e.newStateDateAgo]})]})})]})},`alert-${e.id}`))):!n.loading&&n.value&&n.value.map((e=>(0,be.jsx)("li",{className:i.alertRuleItem,children:(0,be.jsxs)(ge.Card,{heading:e.alertName,className:i.cardContainer,children:[(0,be.jsx)(ge.Card.Figure,{className:(0,me.cx)(i.alertRuleItemIcon,e.stateModel.stateClass),children:(0,be.jsx)(ge.Icon,{name:e.stateModel.iconClass,size:"xl"})}),(0,be.jsxs)(ge.Card.Meta,{children:[(0,be.jsx)("span",{className:(0,me.cx)(i.alertRuleItemText,e.stateModel.stateClass),children:e.stateModel.text}),(0,be.jsx)("span",{children:e.time}),e.info&&(0,be.jsx)("span",{className:i.alertRuleItemInfo,children:e.info})]})]})},`alert-${e.id}`)))})})]})})})).setPanelOptions((e=>{e.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:nn.Current},{label:"Recent state changes",value:nn.RecentChanges}]},defaultValue:nn.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:an.AlphaAsc},{label:"Alphabetical (desc)",value:an.AlphaDesc},{label:"Importance",value:an.Importance},{label:"Time (asc)",value:an.TimeAsc},{label:"Time (desc)",value:an.TimeDesc}]},defaultValue:an.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Cn}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Cn}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:e,onChange:t}){return(0,be.jsx)(Za,{initialFolderId:e,onChange:e=>t(null==e?void 0:e.id),extraFolders:[Ga,Wa]})},category:["Filter"],showIf:Cn}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor:e=>(0,be.jsx)(ge.TagsInput,{tags:e.value,onChange:e.onChange}),category:["Filter"],showIf:Cn}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Cn}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Cn}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Cn}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Cn}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Cn}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Cn})})).setMigrationHandler((e=>{var t,s,a,n,i,r,o,l,c,d,u,p,h,g,m,f,b,v;const x={showOptions:null!==(t=null!==(s=e.options.showOptions)&&void 0!==s?s:e.show)&&void 0!==t?t:nn.Current,maxItems:null!==(a=null!==(n=e.options.maxItems)&&void 0!==n?n:e.limit)&&void 0!==a?a:10,sortOrder:null!==(i=null!==(r=e.options.sortOrder)&&void 0!==r?r:e.sortOrder)&&void 0!==i?i:an.AlphaAsc,dashboardAlerts:null!==(o=null!==(l=e.options.dashboardAlerts)&&void 0!==l?l:e.onlyAlertsOnDashboard)&&void 0!==o&&o,alertName:null!==(c=null!==(d=e.options.alertName)&&void 0!==d?d:e.nameFilter)&&void 0!==c?c:"",dashboardTitle:null!==(u=null!==(p=e.options.dashboardTitle)&&void 0!==p?p:e.dashboardFilter)&&void 0!==u?u:"",folderId:null!==(h=e.options.folderId)&&void 0!==h?h:e.folderId,tags:null!==(g=null!==(m=e.options.tags)&&void 0!==m?m:e.dashboardTags)&&void 0!==g?g:[],stateFilter:null!==(f=null!==(b=e.options.stateFilter)&&void 0!==b?b:null===(v=e.stateFilter)||void 0===v?void 0:v.reduce(((e,t)=>Object.assign({},e,{[t]:!0})),{}))&&void 0!==f?f:{}};if(parseFloat(e.pluginVersion||"7.4")<7.5){["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach((t=>delete e[t]))}return x})),Nn=new ue.PanelPlugin((function(e){const t=(0,G.useDispatch)(),s=(0,q.useMemo)(yn.mA,[]);(0,q.useEffect)((()=>{t((0,vn.lB)());const e=setInterval((()=>t((0,vn.lB)())),wn.p4);return()=>{clearInterval(e)}}),[t]);const a=(0,xn._)((e=>e.promRules)),n=s.some((e=>{var t;return null===(t=a[e])||void 0===t?void 0:t.dispatched})),i=s.some((e=>{var t;return null===(t=a[e])||void 0===t?void 0:t.loading})),r=s.some((e=>{var t,s,n;return(null===(t=a[e])||void 0===t||null===(s=t.result)||void 0===s?void 0:s.length)&&!(null!==(n=a[e])&&void 0!==n&&n.error)})),o=(0,ge.useStyles)(jn),l=(0,ge.useStyles2)(kn),c=(0,q.useMemo)((()=>function(e,t){let s=[...t];if(e.dashboardAlerts){var a;const e=null===(a=(0,Ra.h4)().getCurrent())||void 0===a?void 0:a.uid;s=s.filter((({rule:{annotations:t={}}})=>Object.entries(t).some((([t,s])=>t===wn.q6.dashboardUID&&s===e))))}e.alertName&&(s=s.filter((({rule:{name:t}})=>t.toLocaleLowerCase().includes(e.alertName.toLocaleLowerCase()))));Object.values(e.stateFilter).some((e=>e))&&(s=s.filter((t=>e.stateFilter.firing&&t.rule.state===hn.x_.Firing||e.stateFilter.pending&&t.rule.state===hn.x_.Pending||e.stateFilter.inactive&&t.rule.state===hn.x_.Inactive)));e.folder&&(s=s.filter((t=>t.namespaceName===e.folder.title)));return s}(e.options,function(e,t){if(e===an.Importance)return(0,I.sortBy)(t,(e=>_e.Z.alertStateSortScore[e.state]));if(e===an.TimeAsc)return(0,I.sortBy)(t,(e=>(0,gn.ub)(e.rule)||new Date));if(e===an.TimeDesc)return(0,I.sortBy)(t,(e=>(0,gn.ub)(e.rule)||new Date)).reverse();const s=(0,I.sortBy)(t,(e=>e.rule.name.toLowerCase()));e===an.AlphaDesc&&s.reverse();return s}(e.options.sortOrder,Object.values(a).flatMap((({result:e=[]})=>(0,gn.ZL)(e)))))),[e.options,a]),d=c.length<=e.options.maxItems?c:c.slice(0,e.options.maxItems),u=c.length?"":"No alerts";return(0,be.jsx)(ge.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,be.jsxs)("div",{className:o.container,children:[n&&i&&!r&&(bn||(bn=(0,be.jsx)(ge.LoadingPlaceholder,{text:"Loading..."}))),u&&(0,be.jsx)("div",{className:o.noAlertsMessage,children:u}),(0,be.jsx)("section",{children:(0,be.jsx)("ol",{className:o.alertRuleList,children:r&&d.map(((t,s)=>{const{rule:a,namespaceName:n,groupName:i}=t,r=(0,gn.ub)(a);return(0,be.jsxs)("li",{className:o.alertRuleItem,children:[(0,be.jsx)("div",{className:l.icon,children:(0,be.jsx)(ge.Icon,{name:_e.Z.getStateDisplayModel(a.state).iconClass,className:l[gn.Aq[a.state]],size:"lg"})}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:o.instanceDetails,children:[(0,be.jsx)("div",{className:o.alertName,title:a.name,children:a.name}),(0,be.jsxs)("div",{className:o.alertDuration,children:[(0,be.jsx)("span",{className:l[gn.Aq[a.state]],children:a.state.toUpperCase()})," ",r&&a.state!==hn.x_.Inactive&&(0,be.jsxs)(be.Fragment,{children:["for"," ",(0,be.jsx)("span",{children:(0,ue.intervalToAbbreviatedDurationString)({start:r,end:Date.now()})})]})]})]}),(0,be.jsx)(mn,{ruleWithLocation:t,showInstances:e.options.showInstances})]})]},`alert-${n}-${i}-${a.name}-${s}`)}))})})]})})})).setPanelOptions((e=>{e.addNumberInput({name:"Max items",path:"maxItems",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:an.AlphaAsc},{label:"Alphabetical (desc)",value:an.AlphaDesc},{label:"Importance",value:an.Importance},{label:"Time (asc)",value:an.TimeAsc},{label:"Time (desc)",value:an.TimeDesc}]},defaultValue:an.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addBooleanSwitch({path:"showInstances",name:"Show alert instances",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",id:"folder",defaultValue:null,editor:function(e){return(0,be.jsx)(Sn.W,Object.assign({},e,{enableReset:!0,onChange:({title:t,id:s})=>e.onChange({title:t,id:s})}))},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting",defaultValue:!0,category:["State filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["State filter"]}).addBooleanSwitch({path:"stateFilter.inactive",name:"Inactive",defaultValue:!1,category:["State filter"]})})),On=Se.config.unifiedAlertingEnabled?Nn:Tn;var In=s("./packages/grafana-ui/src/components/List/AbstractList.tsx"),Pn=s("./public/app/core/app_events.ts"),Mn=s("./public/app/core/components/TagFilter/TagBadge.tsx");const Fn=({tags:e,remove:t,onClick:s})=>{const a=(0,ge.useStyles)(An),n=(0,q.useCallback)(((e,a)=>{e.stopPropagation(),s(a,t)}),[s,t]);return e&&e.length?(0,be.jsx)(be.Fragment,{children:e.map((e=>(0,be.jsx)("span",{onClick:t=>n(t,e),className:a.pointer,children:(0,be.jsx)(Mn.e,{label:e,removeIcon:Boolean(t),count:0})},e)))}):null};function An(e){return{pointer:me.css`
      cursor: pointer;
      padding: ${e.spacing.xxs};
    `}}var Dn;const $n=({options:e,annotation:t,formatDate:s,onClick:a,onAvatarClick:n,onTagClick:i})=>{const r=(0,ge.useStyles2)(Rn),{showUser:o,showTags:l,showTime:c}=e,{text:d,login:u,email:p,avatarUrl:h,tags:g,time:m,timeEnd:f}=t,b=u&&o,v=m&&c,x=f&&f!==m&&c;return(0,be.jsx)("div",{children:(0,be.jsxs)("span",{className:(0,me.cx)(r.item,r.link,r.pointer),onClick:e=>{e.stopPropagation(),a(t)},children:[(0,be.jsxs)("div",{className:r.title,children:[(0,be.jsx)("span",{children:d}),v?(0,be.jsx)(En,{formatDate:s,time:m}):null,x?(0,be.jsx)("span",{className:r.time,children:"-"}):null,x?(0,be.jsx)(En,{formatDate:s,time:f}):null]}),(0,be.jsxs)("div",{className:r.login,children:[b?(0,be.jsx)(Ln,{email:p,login:u,avatarUrl:h,onClick:()=>{n(t)}}):null,l?(0,be.jsx)(Fn,{tags:g,remove:!1,onClick:i}):null]})]})})},Ln=({onClick:e,avatarUrl:t,login:s,email:a})=>{const n=(0,ge.useStyles2)(Rn),i=(0,be.jsxs)("span",{children:["Created by:",Dn||(Dn=(0,be.jsx)("br",{}))," ",a]});return(0,be.jsx)("div",{children:(0,be.jsx)(ge.Tooltip,{content:i,theme:"info",placement:"top",children:(0,be.jsx)("span",{onClick:t=>{t.stopPropagation(),e()},className:n.avatar,children:(0,be.jsx)("img",{src:t,alt:"avatar icon"})})})})},En=({time:e,formatDate:t})=>{const s=(0,ge.useStyles2)(Rn);return(0,be.jsx)("span",{className:s.time,children:(0,be.jsx)("span",{children:t(e)})})};function Rn(e){return{pointer:me.css`
      cursor: pointer;
    `,item:me.css`
      margin: ${e.spacing(.5)};
      padding: ${e.spacing(1)};
      ${ge.styleMixins.listItem(e)}// display: flex;
    `,title:me.css`
      flex-basis: 80%;
    `,link:me.css`
      display: flex;

      .fa {
        padding-top: ${e.spacing(.5)};
      }

      .fa-star {
        color: ${e.v1.palette.orange};
      }
    `,login:me.css`
      align-self: center;
      flex: auto;
      display: flex;
      justify-content: flex-end;
      font-size: ${e.typography.bodySmall.fontSize};
    `,time:me.css`
      margin-left: ${e.spacing(1)};
      margin-right: ${e.spacing(1)}
      font-size: ${e.typography.bodySmall.fontSize};
      color: ${e.colors.text.secondary};
    `,avatar:me.css`
      padding: ${e.spacing(.5)};
      img {
        border-radius: 50%;
        width: ${e.spacing(2)};
        height: ${e.spacing(2)};
      }
    `}}var _n,Vn,Bn=s("./node_modules/rxjs/dist/esm5/internal/Subscription.js");function zn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Un extends q.PureComponent{constructor(e){super(e),zn(this,"style",qn(Se.config.theme)),zn(this,"subs",new Bn.w0),zn(this,"onAnnoClick",(e=>{var t;if(!e.time)return;const{options:s}=this.props,a=(0,Ra.h4)().getCurrent(),n={from:this._timeOffset(e.time,s.navigateBefore,!0),to:this._timeOffset(null!==(t=e.timeEnd)&&void 0!==t?t:e.time,s.navigateAfter,!1)};s.navigateToPanel&&(n.viewPanel=e.panelId),(null==a?void 0:a.id)!==e.dashboardId?(0,Se.getBackendSrv)().get("/api/search",{dashboardIds:e.dashboardId}).then((t=>{if(t&&t.length&&t[0].id===e.dashboardId){const e=t[0],s=ue.locationUtil.stripBaseFromUrl(e.url);Se.locationService.push(s)}else Pn.Z.emit(ue.AppEvents.alertWarning,["Unknown Dashboard: "+e.dashboardId])})):Se.locationService.partial(n)})),zn(this,"onTagClick",((e,t)=>{const s=t?this.state.queryTags.filter((t=>t!==e)):[...this.state.queryTags,e];this.setState({queryTags:s})})),zn(this,"onUserClick",(e=>{this.setState({queryUser:{id:e.userId,login:e.login,email:e.email}})})),zn(this,"onClearUser",(()=>{this.setState({queryUser:void 0})})),zn(this,"renderTags",((e,t)=>(0,be.jsx)(Fn,{tags:e,remove:t,onClick:this.onTagClick}))),zn(this,"renderItem",((e,t)=>{const{options:s}=this.props,a=(0,Ra.h4)().getCurrent();return a?(0,be.jsx)($n,{annotation:e,formatDate:a.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:s}):(0,be.jsx)(be.Fragment,{})})),this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(ue.AnnotationChangeEvent).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(e,t){const{options:s,timeRange:a}=this.props;(s!==e.options||this.state.queryTags!==t.queryTags||this.state.queryUser!==t.queryUser||s.onlyInTimeRange&&a!==e.timeRange)&&this.doSearch()}async doSearch(){const{options:e}=this.props,{queryUser:t,queryTags:s}=this.state,a={tags:e.tags,limit:e.limit,type:"annotation"};var n;e.onlyFromThisDashboard&&(a.dashboardId=null===(n=(0,Ra.h4)().getCurrent())||void 0===n?void 0:n.id);let i="";if(e.onlyInTimeRange){const{timeRange:e}=this.props;a.from=e.from.valueOf(),a.to=e.to.valueOf()}else i="All Time";t&&(a.userId=t.id),e.tags&&e.tags.length&&(a.tags=e.tags),s.length&&(a.tags=a.tags?[...a.tags,...s]:s);const r=await(0,Se.getBackendSrv)().get("/api/annotations",a,`anno-list-panel-${this.props.id}`);this.setState({annotations:r,timeInfo:i,loaded:!0})}_timeOffset(e,t,s=!1){let a=5,n="m";const i=/^(\d+)(\w)/.exec(t);i&&3===i.length&&(a=parseInt(i[1],10),n=i[2]);return s&&(a*=-1),(0,ue.dateTime)(e).add(a,n).valueOf()}render(){const{loaded:e,annotations:t,queryUser:s,queryTags:a}=this.state;if(!e)return _n||(_n=(0,be.jsx)("div",{children:"loading..."}));const n=s||a.length>0;return(0,be.jsxs)(ge.CustomScrollbar,{autoHeightMin:"100%",children:[n&&(0,be.jsxs)("div",{children:[Vn||(Vn=(0,be.jsx)("b",{children:"Filter:   "})),s&&(0,be.jsx)("span",{onClick:this.onClearUser,className:"pointer",children:s.email}),a.length>0&&this.renderTags(a,!0)]}),t.length<1&&(0,be.jsx)("div",{className:this.style.noneFound,children:"No Annotations Found"}),(0,be.jsx)(In.L,{items:t,renderItem:this.renderItem,getItemKey:e=>`${e.id}`})]})}}const qn=(0,ge.stylesFactory)((e=>({noneFound:me.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `})));var Hn=s("./node_modules/@sentry/utils/esm/string.js");const Gn=new ue.PanelPlugin(Un).setPanelOptions((e=>{e.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:!1,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:!1,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor:e=>(0,be.jsx)(ge.TagsInput,{tags:e.value,onChange:e.onChange})}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:10}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:!0}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:!0}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:!0}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Hn.$G,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:"10m",description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:"10m",description:""})})).setPanelChangeHandler(((e,t,s)=>"ryantxu-annolist-panel"===t?s:e.options));var Wn=s("./node_modules/d3-scale-chromatic/src/index.js");function Zn(e,t,s,a=0){const n=Wn[e.value],i="always"===e.invert||e.invert===(t?"light":"dark"),r=i?s:a,o=i?a:s;return os.scaleSequential(n).domain([r,o])}function Qn(e,t,s=0){let a;return"linear"===e.colorScale?a=os.scaleLinear().domain([s,t]).range([0,1]):"sqrt"===e.colorScale&&(a=os.scalePow().exponent(e.exponent).domain([s,t]).range([0,1])),a}function Kn(e,t,s,a,n,i,r){const o=R()(e).find("svg"),l=os.select(o.get(0));if(i<=0||0===o.get(0).childNodes.length)return;const c=os.scaleLinear().domain([t,s]).range([0,i]),d=function(e,t,s,a){const n=t-e,i=X(e,t,3),r=Math.ceil(n/i),o=function(e,t){if(e<0)return Math.floor(e/t)*t;return 0}(e,i);let l=[];for(let e=0;e<r;e++){const t=o+i*e;Jn(a,t,i)?l.push(a):(a<t&&l.push(a),Jn(s,t,i)?l.push(s):(s<t&&l.push(s),l.push(t)))}Jn(s,t,i)||l.push(s);return l.push(t),l=(0,I.sortBy)((0,I.uniq)(l)),l}(t,s,a,n),u=os.axisBottom(c).tickValues(d).tickSize(0),p=o.find(":first-child"),h=function(e){const t=e.get(0);return t&&t.height&&t.height.baseVal?t.height.baseVal.value:0}(o)+0,g=function(e){const t=e.get(0);return t&&t.x&&t.x.baseVal?t.x.baseVal.value:0}(p)+10;os.select(o.get(0)).append("g").attr("class","axis").attr("transform","translate("+g+","+h+")").call(u),l.select(".axis").select(".domain").remove()}function Yn(e){R()(e).find("svg").empty()}function Jn(e,t,s){return Math.abs(e-t)<.3*s}function Xn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Ds.ZP.directive("colorLegend",(()=>({restrict:"E",template:'<div class="heatmap-color-legend"><svg width="16.5rem" height="24px"></svg></div>',link:(e,t,s)=>{const a=e.ctrl,n=e.ctrl.panel;function i(){var e;const s=R()(t).find("svg"),i=Math.floor(null!==(e=s.outerWidth())&&void 0!==e?e:10);if("spectrum"===n.color.mode){const e=Zn((0,I.find)(a.colorSchemes,{value:n.color.colorScheme}),Y.Vt.user.lightTheme,i);!function(e,t){var s;const a=R()(e).find("svg");Yn(e);const n=Math.floor(null!==(s=a.outerWidth())&&void 0!==s?s:30),i=a.attr("height");if(n){const e=Math.floor(n/2),s=Math.floor(n/e),r=os.range(0,n,s);os.select(a.get(0)).selectAll(".heatmap-color-legend-rect").data(r).enter().append("rect").attr("x",(e=>e)).attr("y",0).attr("width",s+1).attr("height",i).attr("stroke-width",0).attr("fill",(e=>t(e)))}}(t,e)}else if("opacity"===n.color.mode){const e=n.color;!function(e,t){var s;const a=R()(e).find("svg");Yn(e);const n=os.select(a.get(0)),i=Math.floor(null!==(s=a.outerWidth())&&void 0!==s?s:30),r=a.attr("height");if(i){let e;"linear"===t.colorScale?e=os.scaleLinear().domain([0,i]).range([0,1]):"sqrt"===t.colorScale&&(e=os.scalePow().exponent(t.exponent).domain([0,i]).range([0,1]));const s=10,a=os.range(0,i,s);n.selectAll(".heatmap-opacity-legend-rect").data(a).enter().append("rect").attr("x",(e=>e)).attr("y",0).attr("width",s).attr("height",r).attr("stroke-width",0).attr("fill",(0,ue.getColorForTheme)(t.cardColor,Z.vc.theme)).style("opacity",(t=>e(t)))}}(t,e)}}i(),a.events.on(ue.PanelEvents.render,(()=>{i()}))}}))),Ds.ZP.directive("heatmapLegend",(()=>({restrict:"E",template:'<div class="heatmap-color-legend"><svg width="100px" height="6px"></svg></div>',link:(e,t,s)=>{const a=e.ctrl,n=e.ctrl.panel;function i(){if(Yn(t),!(0,I.isEmpty)(a.data)&&!(0,I.isEmpty)(a.data.cards)){const e=a.data.cardStats,s=(0,I.isNil)(n.color.min)?Math.max(e.min,0):n.color.min,i=(0,I.isNil)(n.color.max)?e.max:n.color.max,r=e.max,o=e.min;if("spectrum"===n.color.mode){const e=(0,I.find)(a.colorSchemes,{value:n.color.colorScheme});!function(e,t,s,a,n,i){var r;const o=R()(e).find("svg"),l=os.select(o.get(0));Yn(e);const c=Math.floor(null!==(r=o.outerWidth())&&void 0!==r?r:10)-30,d=o.attr("height"),u=(a-s)/c*10,p=c/(a-s),h=os.range(s,a,u),g=Zn(t,Y.Vt.user.lightTheme,a,s);l.append("g").attr("class","legend-color-bar").attr("transform","translate(10,0)").selectAll(".heatmap-color-legend-rect").data(h).enter().append("rect").attr("x",(e=>Math.round((e-s)*p))).attr("y",0).attr("width",Math.round(u*p+1)).attr("height",d).attr("stroke-width",0).attr("fill",(e=>g(e))),Kn(e,s,a,n,i,c,h)}(t,e,s,i,r,o)}else if("opacity"===n.color.mode){const e=n.color;!function(e,t,s,a,n,i){var r;const o=R()(e).find("svg"),l=os.select(o.get(0));Yn(e);const c=Math.floor(null!==(r=o.outerWidth())&&void 0!==r?r:30)-30,d=o.attr("height"),u=(a-s)/c*10,p=c/(a-s),h=os.range(s,a,u),g=Qn(t,a,s);l.append("g").attr("class","legend-color-bar").attr("transform","translate(10,0)").selectAll(".heatmap-opacity-legend-rect").data(h).enter().append("rect").attr("x",(e=>Math.round((e-s)*p))).attr("y",0).attr("width",Math.round(u*p)).attr("height",d).attr("stroke-width",0).attr("fill",t.cardColor).style("opacity",(e=>g(e))),Kn(e,s,a,n,i,c,h)}(t,e,s,i,r,o)}}}i(),a.events.on(ue.PanelEvents.render,(()=>{i()}))}})));class ei{constructor(e,t){Xn(this,"panel",void 0),Xn(this,"panelCtrl",void 0),Xn(this,"logScales",void 0),Xn(this,"dataFormats",void 0),Xn(this,"yBucketBoundModes",void 0),Xn(this,"setUnitFormat",(e=>{this.panel.yAxis.format=e,this.panelCtrl.render()})),e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.logScales={linear:1,"log (base 2)":2,"log (base 10)":10,"log (base 32)":32,"log (base 1024)":1024},this.dataFormats={"Time series":"timeseries","Time series buckets":"tsbuckets"},this.yBucketBoundModes={Auto:"auto",Upper:"upper",Lower:"lower",Middle:"middle"}}}function ti(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/heatmap/partials/axes_editor.html",controller:ei}}function si(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}ei.$inject=["$scope","uiSegmentSrv"];class ai{constructor(e){si(this,"panel",void 0),si(this,"panelCtrl",void 0),e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel}}function ni(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/heatmap/partials/display_editor.html",controller:ai}}ai.$inject=["$scope"];function ii(e,t){let s,a;try{s=ri(e.label),a=ri(t.label)}catch(e){return console.error(e.message||e),0}return s>a?1:s<a?-1:0}function ri(e){if("+Inf"===e||"inf"===e)return 1/0;const t=Number(e);if(isNaN(t))throw new Error(`Error parsing histogram label: ${e} is not a number`);return t}function oi(e,t=!1){let s=0,a=0;const n=[];(0,I.forEach)(e,(e=>{(0,I.forEach)(e.buckets,(i=>{const r={x:e.x,y:i.y,yBounds:i.bounds,values:i.values,count:i.count};t&&0===r.count||n.push(r),1===n.length&&(s=i.count,a=i.count),s=i.count<s?i.count:s,a=i.count>a?i.count:a}))}));return{cards:n,cardStats:{min:s,max:a}}}function li(e,t,s,a=1){const n={};for(const t of e){const e=t.datapoints,a=t.label;(0,I.forEach)(e,(e=>{const t=hi(e[1],s);ci(n,e,t,a)}))}return(0,I.forEach)(n,(e=>{e.buckets=1!==a?function(e,t,s){const a=e.values,n=e.points,i={};return(0,I.forEach)(a,((e,a)=>{const r=gi(e,t,s),o=r.bottom;di(i,o,e,n[a],r)})),i}(e,t,a):function(e,t){const s=e.values,a=e.points,n={};return(0,I.forEach)(s,((e,s)=>{const i=pi(e,t),r=i.bottom;di(n,r,e,a[s],i)})),n}(e,t)})),n}function ci(e,t,s,a){const n=t[0];if(null==n||isNaN(n))return;const i=(0,I.concat)(t,a);e[s]&&e[s].values?(e[s].values.push(n),e[s].points.push(i)):e[s]={x:s,values:[n],points:[i]}}function di(e,t,s,a,n){let i=1;var r;(a.length>3&&(i=parseInt(a[2],10)),e[t])?(e[t].values.push(s),null===(r=e[t].points)||void 0===r||r.push(a),e[t].count+=i):e[t]={y:t,bounds:n,values:[s],points:[a],count:i}}function ui(e,t,s){return 1===s?hi(e,t):function(e,t,s){return gi(e,t,s).bottom}(e,t,s)}function pi(e,t){let s,a;return s=Math.floor(e/t)*t,a=(Math.floor(e/t)+1)*t,{bottom:s,top:a}}function hi(e,t){return pi(e,t).bottom}function gi(e,t,s){let a,n;if(0===e)return{bottom:0,top:0};const i=mi(e,s);let r,o;if(1!==t&&t){const e=1/t;let s=i-Math.floor(i);s=Math.floor(s/e)*e,r=Math.floor(i)+s,o=r+e}else r=Math.floor(i),o=r+1;return n=Math.pow(s,r),a=Math.pow(s,o),{bottom:n,top:a}}function mi(e,t){return Math.log(e)/Math.log(t)}function fi(e,t,s=1){if(1===s)return Math.abs(t-e);return mi(Math.max(e,t)/Math.min(e,t),s)}function bi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vi=160;class xi{constructor(e,t){bi(this,"tooltip",void 0),bi(this,"scope",void 0),bi(this,"dashboard",void 0),bi(this,"panelCtrl",void 0),bi(this,"panel",void 0),bi(this,"heatmapPanel",void 0),bi(this,"mouseOverBucket",void 0),bi(this,"originalFillColor",void 0),this.scope=t,this.dashboard=t.ctrl.dashboard,this.panelCtrl=t.ctrl,this.panel=t.ctrl.panel,this.heatmapPanel=e,this.mouseOverBucket=!1,this.originalFillColor=null,e.on("mouseleave",this.onMouseLeave.bind(this))}onMouseLeave(){this.destroy()}onMouseMove(e){this.panel.tooltip.show&&this.move(e)}add(){this.tooltip=os.select("body").append("div").attr("class","heatmap-tooltip graph-tooltip grafana-tooltip")}destroy(){this.tooltip&&this.tooltip.remove(),this.tooltip=null}show(e,t){if(!this.panel.tooltip.show||!t)return;if(e.panelRelY)return;const{xBucketIndex:s,yBucketIndex:a}=this.getBucketIndexes(e,t);if(!t.buckets[s])return void this.destroy();let n,i,r;this.tooltip||this.add();const o=t.buckets[s],l=(0,I.find)(o.buckets,((e,t)=>e.bounds.bottom===a||t===a.toString())),c=this.dashboard.formatDate(o.x,"YYYY-MM-DD HH:mm:ss");let d,u;if((0,I.isNumber)(this.panel.tooltipDecimals))d=this.countValueFormatter(this.panel.tooltipDecimals,null),u=this.panelCtrl.tickValueFormatter(this.panelCtrl.decimals,null);else{const e=(this.panelCtrl.decimals||-1)+1;d=this.countValueFormatter(e,this.panelCtrl.scaledDecimals+2),u=this.panelCtrl.tickValueFormatter(e,this.panelCtrl.scaledDecimals+2)}let p=`<div class="graph-tooltip-time">${c}</div>\n      <div class="heatmap-histogram"></div>`;if(l)if(l.bounds){if(t.tsBuckets){const e=e=>t.tsBucketsFormatted?t.tsBucketsFormatted[e]:t.tsBuckets[e];n=e(a),"middle"!==this.panel.yBucketBound&&(i=a<t.tsBuckets.length-1?e(a+1):"")}else{n=u(l.y?l.bounds.bottom:0),i=u(l.bounds.top)}r=d(l.count);p+=`<div>\n          bucket: <b>${i&&n?`${n} - ${i}`:n||i}</b> <br>\n          count: <b>${r}</b> <br>\n        </div>`}else p+=`<div>count: <b>${l.count}</b><br></div>`;else{if(!this.panel.tooltip.showHistogram)return void this.destroy();n=a,i="",r=0}this.tooltip.html(p),this.panel.tooltip.showHistogram&&this.addHistogram(o),this.move(e)}getBucketIndexes(e,t){return{xBucketIndex:this.getXBucketIndex(e.x,t),yBucketIndex:this.getYBucketIndex(e.y,t)}}getXBucketIndex(e,t){const s=(0,I.find)(t.buckets,(s=>e>s.x&&e-s.x<=t.xBucketSize));return s?s.x:ui(e,t.xBucketSize,1)}getYBucketIndex(e,t){if(t.tsBuckets)return Math.floor(e);return ui(e,t.yBucketSize,this.panel.yAxis.logBase)}getSharedTooltipPos(e){return e.pageX=this.heatmapPanel.offset().left+this.scope.xScale(e.x),e.pageY=this.heatmapPanel.offset().top+this.scope.chartHeight*e.panelRelY,e}addHistogram(e){const t=this.scope.ctrl.data.buckets[e.x],s=this.scope.ctrl.data.yBucketSize;let a,n,i;this.scope.ctrl.data.tsBuckets?(a=0,n=this.scope.ctrl.data.tsBuckets.length-1,i=this.scope.ctrl.data.tsBuckets.length):(a=this.scope.ctrl.data.yAxis.min,n=this.scope.ctrl.data.yAxis.max,i=this.scope.ctrl.data.yAxis.ticks);let r=(0,I.map)(t.buckets,(e=>{const t=void 0!==e.count?e.count:e.values.length;return[e.bounds.bottom,t]}));r=(0,I.filter)(r,(e=>e[0]>=a&&e[0]<=n));const o=this.scope.yScale.copy().domain([a,n]).range([0,vi]);let l;if(1===this.panel.yAxis.logBase)l=Math.floor(vi/(n-a)*s*.9);else{const e=s||1;l=Math.floor(vi/i/e*.9)}l=Math.max(l,1);const c=(0,I.reduce)((0,I.map)(r,(e=>e[1])),((e,t)=>e+t),0),d=os.scaleLinear().domain([0,c]).range([0,40]);this.tooltip.select(".heatmap-histogram").append("svg").attr("width",vi).attr("height",40).selectAll(".bar").data(r).enter().append("rect").attr("x",(e=>o(e[0]))).attr("width",l).attr("y",(e=>40-d(e[1]))).attr("height",(e=>d(e[1])))}move(e){if(!this.tooltip)return;const t=R()(this.tooltip.node())[0],s=t.clientWidth,a=t.clientHeight;let n=e.pageX+30,i=e.pageY+5;return e.pageX+s+40>window.innerWidth&&(n=e.pageX-s-30),e.pageY-window.pageYOffset+a+20>window.innerHeight&&(i=e.pageY-a-5),this.tooltip.style("left",n+"px").style("top",i+"px")}countValueFormatter(e,t=null){const s=(0,ue.getValueFormat)("short");return a=>(0,ue.formattedValueToString)(s(a,e,t))}}function yi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class wi{constructor(e,t,s,a){yi(this,"width",200),yi(this,"height",200),yi(this,"yScale",void 0),yi(this,"xScale",void 0),yi(this,"chartWidth",0),yi(this,"chartHeight",0),yi(this,"chartTop",0),yi(this,"chartBottom",0),yi(this,"yAxisWidth",0),yi(this,"xAxisHeight",0),yi(this,"cardPadding",0),yi(this,"cardRound",0),yi(this,"cardWidth",0),yi(this,"cardHeight",0),yi(this,"colorScale",void 0),yi(this,"opacityScale",void 0),yi(this,"mouseUpHandler",void 0),yi(this,"data",void 0),yi(this,"panel",void 0),yi(this,"$heatmap",void 0),yi(this,"tooltip",void 0),yi(this,"heatmap",void 0),yi(this,"timeRange",void 0),yi(this,"selection",void 0),yi(this,"padding",void 0),yi(this,"margin",void 0),yi(this,"dataRangeWidingFactor",void 0),yi(this,"hoverEvent",void 0),this.scope=e,this.elem=t,this.ctrl=a,this.$heatmap=this.elem.find(".heatmap-panel"),this.tooltip=new xi(this.$heatmap,this.scope),this.selection={active:!1,x1:-1,x2:-1},this.padding={left:0,right:0,top:0,bottom:0},this.margin={left:25,right:15,top:10,bottom:20},this.dataRangeWidingFactor=1.2,this.ctrl.events.on(ue.PanelEvents.render,this.onRender.bind(this)),this.ctrl.tickValueFormatter=this.tickValueFormatter.bind(this),this.ctrl.dashboard.events.on(ue.LegacyGraphHoverEvent.type,this.onGraphHover.bind(this),this.scope),this.ctrl.dashboard.events.on(ue.LegacyGraphHoverClearEvent.type,this.onGraphHoverClear.bind(this),this.scope),this.$heatmap.on("mousedown",this.onMouseDown.bind(this)),this.$heatmap.on("mousemove",this.onMouseMove.bind(this)),this.$heatmap.on("mouseleave",this.onMouseLeave.bind(this)),this.hoverEvent=new ue.LegacyGraphHoverEvent({pos:{},point:{},panel:this.panel})}onGraphHoverClear(){this.clearCrosshair()}onGraphHover(e){this.drawSharedCrosshair(e.pos)}onRender(){this.render(),this.ctrl.renderingCompleted()}setElementHeight(){try{let e=this.ctrl.height||this.panel.height||this.ctrl.row.height;return(0,I.isString)(e)&&(e=parseInt(e.replace("px",""),10)),e-=this.panel.legend.show?28:11,this.$heatmap.css("height",e+"px"),!0}catch(e){return!1}}getYAxisWidth(e){const t=this.getPanelYAxisWidth();if(null!==t)return t+5;const s=e.selectAll(".axis-y text").nodes();return(0,I.max)((0,I.map)(s,(e=>e.getBBox().width)))}getXAxisHeight(e){if(e.select(".axis-x line").empty())return 30;{const t=parseFloat(e.select(".axis-x line").attr("y2"));return parseFloat(e.attr("height"))-t}}addXAxis(){this.scope.xScale=this.xScale=os.scaleTime().domain([this.timeRange.from,this.timeRange.to]).range([0,this.chartWidth]);const e=this.chartWidth/100,t=(0,ge.graphTimeFormat)(e,this.timeRange.from.valueOf(),this.timeRange.to.valueOf()),s=this.ctrl.dashboard.getTimezone(),a=os.axisBottom(this.xScale).ticks(e).tickFormat((e=>(0,ue.dateTimeFormat)(e.valueOf(),{format:t,timeZone:s}))).tickPadding(10).tickSize(this.chartHeight),n=this.margin.top,i=this.yAxisWidth;this.heatmap.append("g").attr("class","axis axis-x").attr("transform","translate("+i+","+n+")").call(a),this.heatmap.select(".axis-x").select(".domain").remove()}addYAxis(){let e=Math.ceil(this.chartHeight/22.5),t=X(this.data.heatmapStats.min,this.data.heatmapStats.max,e),{yMin:s,yMax:a}=this.wideYAxisRange(this.data.heatmapStats.min,this.data.heatmapStats.max,t);s=null!==this.panel.yAxis.min?this.panel.yAxis.min:s,a=null!==this.panel.yAxis.max?this.panel.yAxis.max:a,t=X(s,a,e),e=Math.ceil((a-s)/t);const n=re(t);let i=null===this.panel.yAxis.decimals?n:this.panel.yAxis.decimals;const r=ee(i,te(s,a,e,n));this.ctrl.decimals=i,this.ctrl.scaledDecimals=r,(0,I.isEmpty)(this.data.buckets)&&(a=1,s=-1,e=3,i=1),this.data.yAxis={min:s,max:a,ticks:e},this.scope.yScale=this.yScale=os.scaleLinear().domain([s,a]).range([this.chartHeight,0]);const o=os.axisLeft(this.yScale).ticks(e).tickFormat(this.tickValueFormatter(i,r)).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(o);const l=this.margin.top,c=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+c+","+l+")"),this.heatmap.select(".axis-y").select(".domain").remove()}wideYAxisRange(e,t,s){const a=(t*(this.dataRangeWidingFactor-1)-e*(this.dataRangeWidingFactor-1))/2;let n,i;return 0===s?(i=t*this.dataRangeWidingFactor,n=e-e*(this.dataRangeWidingFactor-1)):(i=Math.ceil((t+a)/s)*s,n=Math.floor((e-a)/s)*s),e>=0&&n<0&&(n=0),{yMin:n,yMax:i}}addLogYAxis(){const e=this.panel.yAxis.logBase;let{yMin:t,yMax:s}=this.adjustLogRange(this.data.heatmapStats.minLog,this.data.heatmapStats.max,e);t=this.panel.yAxis.min&&"0"!==this.panel.yAxis.min?this.adjustLogMin(this.panel.yAxis.min,e):t,s=null!==this.panel.yAxis.max?this.adjustLogMax(this.panel.yAxis.max,e):s,(0,I.isEmpty)(this.data.buckets)&&(s=Math.pow(e,2),t=1),this.scope.yScale=this.yScale=os.scaleLog().base(this.panel.yAxis.logBase).domain([t,s]).range([this.chartHeight,0]);const a=this.yScale.domain(),n=this.logScaleTickValues(a,e),i=re(t),r=this.panel.yAxis.decimals||i,o=ee(r,te(t,s,n.length,i));this.ctrl.decimals=r,this.ctrl.scaledDecimals=o,this.data.yAxis={min:t,max:s,ticks:n.length};const l=os.axisLeft(this.yScale).tickValues(n).tickFormat(this.tickValueFormatter(r,o)).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(l);const c=this.margin.top,d=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+d+","+c+")"),t<1&&this.heatmap.select(".axis-y").select(".tick text").text("0"),this.heatmap.select(".axis-y").select(".domain").remove()}addYAxisFromBuckets(){const e=this.data.tsBuckets;let t=Math.ceil(this.chartHeight/22.5);this.scope.yScale=this.yScale=os.scaleLinear().domain([0,e.length-1]).range([this.chartHeight,0]);const s=(0,I.map)(e,((e,t)=>t)),a=(0,I.max)((0,I.map)(e,oe)),n=null===this.panel.yAxis.decimals?a:this.panel.yAxis.decimals;this.ctrl.decimals=n;const i=this.tickValueFormatter.bind(this);function r(t){return function(s){let a=e[s.valueOf()];if((0,I.isNaN)((0,I.toNumber)(a))||""===a){if(a&&"string"==typeof a&&""!==a&&t){const e=.15,s=a.substring(0,Math.floor(t*e));a=`${s}${s.length<a.length?"...":""}`}}else a=i(n)((0,I.toNumber)(a));return a}}const o=(0,I.map)(e,((e,t)=>r(null)(t)));this.data.tsBucketsFormatted=o;const l=os.axisLeft(this.yScale).tickFormat(r(this.getPanelYAxisWidth())).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);s&&s.length<=t?l.tickValues(s):l.ticks(t),this.heatmap.append("g").attr("class","axis axis-y").call(l);const c=this.margin.top,d=this.getYAxisWidth(this.heatmap)+5;if(this.heatmap.select(".axis-y").attr("transform","translate("+d+","+c+")"),"middle"===this.panel.yBucketBound&&s&&s.length){const e=0-this.chartHeight/(s.length-1)/2;this.heatmap.selectAll(".axis-y text").attr("transform","translate(0,"+e+")")}this.heatmap.select(".axis-y").select(".domain").remove()}adjustLogRange(e,t,s){let a=this.data.heatmapStats.minLog;a=this.data.heatmapStats.minLog>1||!this.data.heatmapStats.minLog?1:this.adjustLogMin(this.data.heatmapStats.minLog,s);return{yMin:a,yMax:this.adjustLogMax(this.data.heatmapStats.max,s)}}adjustLogMax(e,t){return Math.pow(t,Math.ceil(ie(e,t)))}adjustLogMin(e,t){return Math.pow(t,Math.floor(ie(e,t)))}logScaleTickValues(e,t){const s=e[0],a=e[1],n=[];if(s<1){for(let e=Math.floor(ie(s,t));e<0;e++){const s=Math.pow(t,e);n.push(s)}}const i=Math.ceil(ie(a,t));for(let e=0;e<=i;e++){const s=Math.pow(t,e);n.push(s)}return n}tickValueFormatter(e,t=null){const s=this.panel.yAxis.format;return a=>{try{if("none"!==s){const n=(0,ue.getValueFormat)(s)(a,e,t);return(0,ue.formattedValueToString)(n)}}catch(e){console.error(e.message||e)}return a}}fixYAxisTickSize(){this.heatmap.select(".axis-y").selectAll(".tick line").attr("x2",this.chartWidth)}addAxes(){this.chartHeight=this.height-this.margin.top-this.margin.bottom,this.chartTop=this.margin.top,this.chartBottom=this.chartTop+this.chartHeight,"tsbuckets"===this.panel.dataFormat?this.addYAxisFromBuckets():1===this.panel.yAxis.logBase?this.addYAxis():this.addLogYAxis(),this.yAxisWidth=this.getYAxisWidth(this.heatmap)+5,this.chartWidth=this.width-this.yAxisWidth-this.margin.right,this.fixYAxisTickSize(),this.addXAxis(),this.xAxisHeight=this.getXAxisHeight(this.heatmap),this.panel.yAxis.show||this.heatmap.select(".axis-y").selectAll("line").style("opacity",0),this.panel.xAxis.show||this.heatmap.select(".axis-x").selectAll("line").style("opacity",0)}addHeatmapCanvas(){const e=this.$heatmap[0];this.width=Math.floor(this.$heatmap.width())-this.padding.right,this.height=Math.floor(this.$heatmap.height())-this.padding.bottom,this.cardPadding=null!==this.panel.cards.cardPadding?this.panel.cards.cardPadding:1,this.cardRound=null!==this.panel.cards.cardRound?this.panel.cards.cardRound:0,this.heatmap&&this.heatmap.remove(),this.heatmap=os.select(e).append("svg").attr("width",this.width).attr("height",this.height)}addHeatmap(){if(this.addHeatmapCanvas(),this.addAxes(),1!==this.panel.yAxis.logBase&&"tsbuckets"!==this.panel.dataFormat){const e=this.panel.yAxis.logBase,t=this.yScale.domain(),s=this.logScaleTickValues(t,e);this.data.buckets=function(e,t){return(0,I.forEach)(e,(e=>{const s=e.buckets,a={bounds:{bottom:0,top:0},values:[],points:[],count:0},n=s[0]||a,i=s[t]||a,r={y:0,bounds:{bottom:t,top:i.bounds.top||t},values:[],points:[],count:0};r.points=n.points.concat(i.points),r.values=n.values.concat(i.values),r.count=r.values.length,0!==r.count&&(delete s[t],s[0]=r)})),e}(this.data.buckets,(0,I.min)(s))}const e=this.data.cards,t=this.data.cardStats,s=t.max,a=Math.max(t.min,0),n=(0,I.isNil)(this.panel.color.max)?s:this.panel.color.max,i=(0,I.isNil)(this.panel.color.min)?a:this.panel.color.min,r=(0,I.find)(this.ctrl.colorSchemes,{value:this.panel.color.colorScheme});this.colorScale=Zn(r,Y.Vt.user.lightTheme,n,i),this.opacityScale=Qn(this.panel.color,n,i),this.setCardSize();let o=this.heatmap.selectAll(".heatmap-card").data(e);o.append("title"),o=o.enter().append("rect").attr("x",this.getCardX.bind(this)).attr("width",this.getCardWidth.bind(this)).attr("y",this.getCardY.bind(this)).attr("height",this.getCardHeight.bind(this)).attr("rx",this.cardRound).attr("ry",this.cardRound).attr("class","bordered heatmap-card").style("fill",this.getCardColor.bind(this)).style("stroke",this.getCardColor.bind(this)).style("stroke-width",0).style("opacity",this.getCardOpacity.bind(this));this.$heatmap.find(".heatmap-card").on("mouseenter",(e=>{this.tooltip.mouseOverBucket=!0,this.highlightCard(e)})).on("mouseleave",(e=>{this.tooltip.mouseOverBucket=!1,this.resetCardHighLight(e)}))}highlightCard(e){const t=os.select(e.target).style("fill"),s=os.color(t).darker(2),a=os.color(t).brighter(4),n=os.select(e.target);this.tooltip.originalFillColor=t,n.style("fill",s.toString()).style("stroke",a.toString()).style("stroke-width",1)}resetCardHighLight(e){os.select(e.target).style("fill",this.tooltip.originalFillColor).style("stroke",this.tooltip.originalFillColor).style("stroke-width",0)}setCardSize(){const e=Math.floor(this.xScale(this.data.xBucketSize)-this.xScale(0));let t=Math.floor(this.yScale(this.yScale.invert(0)-this.data.yBucketSize));if(1!==this.panel.yAxis.logBase){const e=this.panel.yAxis.logBase,s=this.data.yBucketSize||1;t=Math.floor((this.yScale(1)-this.yScale(e))/s)}const s=e-2*this.cardPadding;this.cardWidth=Math.max(s,1),this.cardHeight=t?t-2*this.cardPadding:0}getCardX(e){let t;return t=this.xScale(e.x)<0?this.yAxisWidth+this.cardPadding:this.xScale(e.x)+this.yAxisWidth+this.cardPadding,t}getCardWidth(e){let t=this.cardWidth;return this.xScale(e.x)<0?t=this.xScale(e.x)+this.cardWidth:this.xScale(e.x)+this.cardWidth>this.chartWidth&&(t=this.chartWidth-this.xScale(e.x)-this.cardPadding),t=t>0?Math.max(t,1):0,t}getCardY(e){let t=this.yScale(e.y)+this.chartTop-this.cardHeight-this.cardPadding;return 1!==this.panel.yAxis.logBase&&0===e.y?t=this.chartBottom-this.cardHeight-this.cardPadding:t<this.chartTop&&(t=this.chartTop),t}getCardHeight(e){const t=this.yScale(e.y)+this.chartTop-this.cardHeight-this.cardPadding;let s=this.cardHeight;return 1!==this.panel.yAxis.logBase&&0===e.y?this.cardHeight:(t<this.chartTop?s=this.yScale(e.y)-this.cardPadding:(this.yScale(e.y)>this.chartBottom||t+this.cardHeight>this.chartBottom)&&(s=this.chartBottom-t),s=Math.min(s,this.chartHeight),s=Math.max(s,1),s)}getCardColor(e){return"opacity"===this.panel.color.mode?(0,ue.getColorForTheme)(this.panel.color.cardColor,Z.vc.theme):this.colorScale(e.count)}getCardOpacity(e){return"opacity"===this.panel.color.mode?this.opacityScale(e.count):1}getEventOffset(e){const t=this.$heatmap.offset();return{x:Math.floor(e.clientX-t.left),y:Math.floor(e.clientY-t.top)}}onMouseDown(e){const t=this.getEventOffset(e);this.selection.active=!0,this.selection.x1=t.x,this.mouseUpHandler=()=>{this.onMouseUp()},R()(document).one("mouseup",this.mouseUpHandler.bind(this))}onMouseUp(){R()(document).unbind("mouseup",this.mouseUpHandler.bind(this)),this.mouseUpHandler=null,this.selection.active=!1;const e=Math.abs(this.selection.x2-this.selection.x1);if(this.selection.x2>=0&&e>2){const e=this.xScale.invert(Math.min(this.selection.x1,this.selection.x2)-this.yAxisWidth),t=this.xScale.invert(Math.max(this.selection.x1,this.selection.x2)-this.yAxisWidth);this.ctrl.timeSrv.setTime({from:(0,ue.toUtc)(e),to:(0,ue.toUtc)(t)})}this.clearSelection()}onMouseLeave(){this.ctrl.dashboard.events.publish(new ue.LegacyGraphHoverClearEvent),this.clearCrosshair()}onMouseMove(e){if(!this.heatmap)return;const t=this.getEventOffset(e);if(this.selection.active)this.clearCrosshair(),this.tooltip.destroy(),this.selection.x2=this.limitSelection(t.x),this.drawSelection(this.selection.x1,this.selection.x2);else{const s=this.getEventPos(e,t);this.drawCrosshair(t.x),this.tooltip.show(s,this.data),this.emitGraphHoverEvent(s)}}getEventPos(e,t){const s=this.xScale.invert(t.x-this.yAxisWidth).valueOf(),a=this.yScale.invert(t.y-this.chartTop);return{pageX:e.pageX,pageY:e.pageY,x:s,x1:s,y:a,y1:a,panelRelY:null,offset:t}}emitGraphHoverEvent(e){e.panelRelY=Math.max(e.offset.y/this.height,.001),this.hoverEvent.payload.pos=e,this.hoverEvent.payload.panel=this.panel,this.hoverEvent.payload.point.time=e.x,this.ctrl.dashboard.events.publish(this.hoverEvent)}limitSelection(e){return e=Math.max(e,this.yAxisWidth),e=Math.min(e,this.chartWidth+this.yAxisWidth)}drawSelection(e,t){if(this.heatmap){this.heatmap.selectAll(".heatmap-selection").remove();const s=Math.min(e,t),a=Math.abs(e-t);a>2&&this.heatmap.append("rect").attr("class","heatmap-selection").attr("x",s).attr("width",a).attr("y",this.chartTop).attr("height",this.chartHeight)}}clearSelection(){this.selection.x1=-1,this.selection.x2=-1,this.heatmap&&this.heatmap.selectAll(".heatmap-selection").remove()}drawCrosshair(e){if(this.heatmap){this.heatmap.selectAll(".heatmap-crosshair").remove();let t=e;t=Math.max(t,this.yAxisWidth),t=Math.min(t,this.chartWidth+this.yAxisWidth),this.heatmap.append("g").attr("class","heatmap-crosshair").attr("transform","translate("+t+",0)").append("line").attr("x1",1).attr("y1",this.chartTop).attr("x2",1).attr("y2",this.chartBottom).attr("stroke-width",1)}}drawSharedCrosshair(e){if(this.heatmap&&0!==this.ctrl.dashboard.graphTooltip){const t=this.xScale(e.x)+this.yAxisWidth;this.drawCrosshair(t)}}clearCrosshair(){this.heatmap&&this.heatmap.selectAll(".heatmap-crosshair").remove()}render(){if(this.data=this.ctrl.data,this.panel=this.ctrl.panel,this.timeRange=this.ctrl.range,this.setElementHeight()&&this.data){if((0,I.isEmpty)(this.data.buckets))return this.addHeatmapCanvas(),void this.addAxes();this.addHeatmap(),this.scope.yAxisWidth=this.yAxisWidth,this.scope.xAxisHeight=this.xAxisHeight,this.scope.chartHeight=this.chartHeight,this.scope.chartWidth=this.chartWidth,this.scope.chartTop=this.chartTop}}getPanelYAxisWidth(){return this.panel.yAxis.width?(0,I.isNaN)(this.panel.yAxis.width)?null:parseInt(this.panel.yAxis.width,10):null}}var ji=s("./public/app/features/query/state/runRequest.ts");function ki(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Si={heatmap:{},cards:{cardPadding:null,cardRound:null},color:{mode:"spectrum",cardColor:"#b4ff00",colorScale:"sqrt",exponent:.5,colorScheme:"interpolateOranges"},legend:{show:!1},dataFormat:"timeseries",yBucketBound:"auto",reverseYBuckets:!1,xAxis:{show:!0},yAxis:{show:!0,format:"short",decimals:null,logBase:1,splitFactor:null,min:null,max:null},xBucketSize:null,xBucketNumber:null,yBucketSize:null,yBucketNumber:null,tooltip:{show:!0,showHistogram:!1},highlightCards:!0,hideZeroBuckets:!1},Ci=["opacity","spectrum"],Ti=["linear","sqrt"],Ni=[{name:"Spectral",value:"interpolateSpectral",invert:"always"},{name:"RdYlGn",value:"interpolateRdYlGn",invert:"always"},{name:"Blues",value:"interpolateBlues",invert:"dark"},{name:"Greens",value:"interpolateGreens",invert:"dark"},{name:"Greys",value:"interpolateGreys",invert:"dark"},{name:"Oranges",value:"interpolateOranges",invert:"dark"},{name:"Purples",value:"interpolatePurples",invert:"dark"},{name:"Reds",value:"interpolateReds",invert:"dark"},{name:"Turbo",value:"interpolateTurbo",invert:"light"},{name:"Cividis",value:"interpolateCividis",invert:"light"},{name:"Viridis",value:"interpolateViridis",invert:"light"},{name:"Magma",value:"interpolateMagma",invert:"light"},{name:"Inferno",value:"interpolateInferno",invert:"light"},{name:"Plasma",value:"interpolatePlasma",invert:"light"},{name:"Warm",value:"interpolateWarm",invert:"light"},{name:"Cool",value:"interpolateCool",invert:"light"},{name:"Cubehelix",value:"interpolateCubehelixDefault",invert:"light"},{name:"BuGn",value:"interpolateBuGn",invert:"dark"},{name:"BuPu",value:"interpolateBuPu",invert:"dark"},{name:"GnBu",value:"interpolateGnBu",invert:"dark"},{name:"OrRd",value:"interpolateOrRd",invert:"dark"},{name:"PuBuGn",value:"interpolatePuBuGn",invert:"dark"},{name:"PuBu",value:"interpolatePuBu",invert:"dark"},{name:"PuRd",value:"interpolatePuRd",invert:"dark"},{name:"RdPu",value:"interpolateRdPu",invert:"dark"},{name:"YlGnBu",value:"interpolateYlGnBu",invert:"dark"},{name:"YlGn",value:"interpolateYlGn",invert:"dark"},{name:"YlOrBr",value:"interpolateYlOrBr",invert:"dark"},{name:"YlOrRd",value:"interpolateYlOrRd",invert:"dark"}],Oi=["elasticsearch"];class Ii extends M.MetricsPanelCtrl{constructor(e,t,s,a){super(e,t),ki(this,"opacityScales",[]),ki(this,"colorModes",[]),ki(this,"colorSchemes",[]),ki(this,"selectionActivated",void 0),ki(this,"unitFormats",void 0),ki(this,"data",void 0),ki(this,"series",[]),ki(this,"dataWarning",void 0),ki(this,"decimals",0),ki(this,"scaledDecimals",0),ki(this,"processor",void 0),this.selectionActivated=!1,(0,I.defaultsDeep)(this.panel,Si),this.opacityScales=Ti,this.colorModes=Ci,this.colorSchemes=Ni,this.useDataFrames=!0,this.processor=new zs({xaxis:{mode:"custom"},aliasColors:{}}),this.events.on(ue.PanelEvents.render,this.onRender.bind(this)),this.events.on(ue.PanelEvents.dataFramesReceived,this.onDataFramesReceived.bind(this)),this.events.on(ue.PanelEvents.dataSnapshotLoad,this.onSnapshotLoad.bind(this)),this.events.on(ue.PanelEvents.editModeInitialized,this.onInitEditMode.bind(this)),this.onCardColorChange=this.onCardColorChange.bind(this)}onInitEditMode(){this.addEditorTab("Axes",ti,2),this.addEditorTab("Display",ni,3),this.unitFormats=F.Z.getUnitFormats()}zoomOut(e){Pn.Z.publish(new Ys.p8(2))}onRender(){"tsbuckets"===this.panel.dataFormat?this.convertHistogramToHeatmapData():this.convertTimeSeriesToHeatmapData()}convertTimeSeriesToHeatmapData(){if(!this.range||!this.series)return;let e,t,s,a;const n=this.panel.yAxis.logBase,i=this.panel.xBucketNumber||30,r=Math.floor((this.range.to.valueOf()-this.range.from.valueOf())/i);e=F.Z.intervalRegex.test(this.panel.xBucketSize)?ue.rangeUtil.intervalToMs(this.panel.xBucketSize):isNaN(Number(this.panel.xBucketSize))||""===this.panel.xBucketSize||null===this.panel.xBucketSize?r:Number(this.panel.xBucketSize),a=this.parseSeries(this.series);const o=this.panel.yBucketNumber||10;1!==n?t=this.panel.yAxis.splitFactor:(t=a.max===a.min?a.max?a.max/10:1:(a.max-a.min)/o,t=this.panel.yBucketSize||t),s=li(this.series,t,e,n),a.min||a.max||(a={min:-1,max:1,minLog:1},t=1);const{cards:l,cardStats:c}=oi(s,this.panel.hideZeroBuckets);this.data={buckets:s,heatmapStats:a,xBucketSize:e,yBucketSize:t,cards:l,cardStats:c}}convertHistogramToHeatmapData(){if(!this.range||!this.series)return;const e=this.getPanelDataSourceType();let t,s,a,n;(0,I.includes)(Oi,e)||this.series.sort(ii),this.panel.reverseYBuckets&&this.series.reverse(),a=function(e){const t={};for(let s=0;s<e.length;s++){const a=e[s],n=s;if(isNaN(n))return t;for(const e of a.datapoints){const s=e[0],a=e[1];if(!(0,I.isNumber)(s))continue;let i=t[a];i||(i=t[a]={x:a,buckets:{}}),i.buckets[n]={y:n,count:s,bounds:{top:null,bottom:n},values:[],points:[]}}}return t}(this.series),n=(0,I.map)(this.series,"label");const i=this.panel.yBucketBound;"prometheus"===e&&"lower"!==i&&"middle"!==i||"upper"===i?n=[""].concat(n):n.push("");t=function(e,t=1){let s=1/0;if(0===e.length)return 0;if(1===e.length)return e[0];e=(0,I.sortBy)(e);for(let a=1;a<e.length;a++){const n=fi(e[a],e[a-1],t);s=n<s?n:s}return s}((0,I.map)((0,I.keys)(a),(e=>Number(e)))),s=1;const{cards:r,cardStats:o}=oi(a,this.panel.hideZeroBuckets);this.data={buckets:a,xBucketSize:t,yBucketSize:1,tsBuckets:n,cards:r,cardStats:o}}getPanelDataSourceType(){return this.datasource&&this.datasource.meta&&this.datasource.meta.id?this.datasource.meta.id:"unknown"}onSnapshotLoad(e){this.onDataFramesReceived((0,ji.F9)(e))}onDataFramesReceived(e){this.series=this.processor.getSeriesList({dataList:e,range:this.range}).map((e=>(e.color=void 0,e.flotpairs=e.getFlotPairs(this.panel.nullPointMode),e))),this.dataWarning=null;if(0===(0,I.reduce)(this.series,((e,t)=>e+t.datapoints.length),0))this.dataWarning={title:"No data points",tip:"No datapoints returned from data query"};else for(const e of this.series)if(e.isOutsideRange){this.dataWarning={title:"Data points outside time range",tip:"Can be caused by timezone mismatch or missing time filter in query"};break}this.render()}onDataError(){this.series=[],this.render()}onCardColorChange(e){this.panel.color.cardColor=e,this.render()}parseSeries(e){const t=(0,I.min)((0,I.map)(e,(e=>e.stats.min))),s=(0,I.min)((0,I.map)(e,(e=>e.stats.logmin)));return{max:(0,I.max)((0,I.map)(e,(e=>e.stats.max))),min:t,minLog:s}}parseHistogramSeries(e){const t=(0,I.map)(e,(e=>Number(e.alias))),s=(0,I.min)(t),a=(0,I.min)(t);return{max:(0,I.max)(t),min:s,minLog:a}}link(e,t,s,a){!function(e,t,s,a){new wi(e,t,s,a)}(e,t,s,a)}}Ii.$inject=["$scope","$injector","templateSrv","timeSrv"],ki(Ii,"templateUrl","module.html");var Pi=s("./public/app/features/variables/adhoc/actions.ts");function Mi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Fi extends q.Component{constructor(e){super(e),Mi(this,"onColumnResize",((e,t)=>{const{fieldConfig:s}=this.props,{overrides:a}=s,n=ue.FieldMatcherID.byName,i="custom.width",r=a.find((t=>t.matcher.id===n&&t.matcher.options===e));if(r){const e=r.properties.find((e=>e.id===i));e?e.value=t:r.properties.push({id:i,value:t})}else a.push({matcher:{id:n,options:e},properties:[{id:i,value:t}]});this.props.onFieldConfigChange(Object.assign({},s,{overrides:a}))})),Mi(this,"onSortByChange",(e=>{this.props.onOptionsChange(Object.assign({},this.props.options,{sortBy:e}))})),Mi(this,"onChangeTableSelection",(e=>{this.props.onOptionsChange(Object.assign({},this.props.options,{frameIndex:e.value||0})),this.forceUpdate()})),Mi(this,"onCellFilterAdded",(e=>{var t;const{key:s,value:a,operator:n}=e,i=null===(t=(0,Ra.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(this.props.id),r=null==i?void 0:i.datasource;r&&(0,Qs.WI)((0,Pi.m2)({datasource:r,key:s,operator:n,value:a}))}))}renderTable(e,t,s){const{options:a}=this.props;return(0,be.jsx)(ge.Table,{height:s,width:t,data:e,noHeader:!a.showHeader,showTypeIcons:a.showTypeIcons,resizable:!0,initialSortBy:a.sortBy,onSortByChange:this.onSortByChange,onColumnResize:this.onColumnResize,onCellFilterAdded:this.onCellFilterAdded})}getCurrentFrameIndex(){var e;const{data:t,options:s}=this.props,a=null===(e=t.series)||void 0===e?void 0:e.length;return s.frameIndex>0&&s.frameIndex<a?s.frameIndex:0}render(){var e,t;const{data:s,height:a,width:n}=this.props,i=null===(e=s.series)||void 0===e?void 0:e.length,r=null===(t=s.series[0])||void 0===t?void 0:t.fields.length;if(!i||!r)return(0,be.jsx)("div",{className:Ai.noData,children:"No data"});if(i>1){const e=Z.vc.theme.spacing.formInputHeight,t=16,i=this.getCurrentFrameIndex(),r=s.series.map(((e,t)=>({label:(0,ue.getFrameDisplayName)(e),value:t})));return(0,be.jsxs)("div",{className:Ai.wrapper,children:[this.renderTable(s.series[i],n,a-e-t),(0,be.jsx)("div",{className:Ai.selectWrapper,children:(0,be.jsx)(ge.Select,{menuShouldPortal:!0,options:r,value:r[i],onChange:this.onChangeTableSelection})})]})}return this.renderTable(s.series[0],n,a-12)}}const Ai={wrapper:me.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,noData:me.css`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  `,selectWrapper:me.css`
    padding: 8px;
  `},Di=(Object.freeze([1,0]),!0),$i={displayMode:ge.TableCellDisplayMode.Auto,align:"auto"},Li={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Ei={avg:"mean",min:"min",max:"max",total:"sum",current:"last",count:"count"},Ri={cell:"color-background",row:"color-background",value:"color-text"},_i=(e,t)=>[-1/0,...e].map(((e,s)=>({color:t[s],value:(0,I.isNumber)(e)?e:parseInt(e,10)}))),Vi=e=>{var t;const s={matcher:{id:/^\/.*\/$/.test(e.pattern)?ue.FieldMatcherID.byRegexp:ue.FieldMatcherID.byName,options:e.pattern},properties:[]};return e.alias&&s.properties.push({id:"displayName",value:e.alias}),e.unit&&s.properties.push({id:"unit",value:e.unit}),e.decimals&&s.properties.push({id:"decimals",value:e.decimals}),"date"===e.type&&s.properties.push({id:"unit",value:`time: ${e.dateFormat}`}),e.link&&s.properties.push({id:"links",value:[{title:(0,I.defaultTo)(e.linkTooltip,""),url:(0,I.defaultTo)(e.linkUrl,""),targetBlank:(0,I.defaultTo)(e.linkTargetBlank,!1)}]}),e.colorMode&&s.properties.push({id:"custom.displayMode",value:Ri[e.colorMode]}),e.align&&s.properties.push({id:"custom.align",value:"auto"===e.align?null:e.align}),null!==(t=e.thresholds)&&void 0!==t&&t.length&&s.properties.push({id:"thresholds",value:{mode:ue.ThresholdsMode.Absolute,steps:_i(e.thresholds,e.colors)}}),s},Bi=new ue.PanelPlugin(Fi).setPanelChangeHandler(((e,t,s)=>{if("table-old"===t&&s.angular){const t=s.angular,a=((e,t)=>{var s;const a=null!==(s=e.transformations)&&void 0!==s?s:[];if(Object.keys(Li).includes(t.transform)){const e={reducers:[]};"timeseries_aggregations"===t.transform&&(e.includeTimeField=!1,e.reducers=t.columns.map((e=>Ei[e.value]))),a.push({id:Li[t.transform],options:e})}return a})(e,t),n=(e=>{let t={custom:{}};if(e&&(t=(0,I.omitBy)({unit:e.unit,decimals:e.decimals,displayName:e.alias,custom:{align:"auto"===e.align?null:e.align,displayMode:Ri[e.colorMode]}},I.isNil),e.thresholds.length)){const s={mode:ue.ThresholdsMode.Absolute,steps:_i(e.thresholds,e.colors)};t.thresholds=s}return t})(t.styles.find((e=>"/.*/"===e.pattern))),i=t.styles.filter((e=>"/.*/"!==e.pattern)).map(Vi);e.transformations=a,e.fieldConfig={defaults:n,overrides:i}}return{}})).setMigrationHandler((e=>(!e.pluginVersion&&e.columns&&console.log("Was angular table",e),e.options))).setNoPadding().useFieldConfig({useCustomConfig:e=>{e.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:$i.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:$i.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:$i.align}).addSelect({path:"displayMode",name:"Cell display mode",description:"Color text, background, show as gauge, etc",settings:{options:[{value:ge.TableCellDisplayMode.Auto,label:"Auto"},{value:ge.TableCellDisplayMode.ColorText,label:"Color text"},{value:ge.TableCellDisplayMode.ColorBackground,label:"Color background (gradient)"},{value:ge.TableCellDisplayMode.ColorBackgroundSolid,label:"Color background (solid)"},{value:ge.TableCellDisplayMode.GradientGauge,label:"Gradient gauge"},{value:ge.TableCellDisplayMode.LcdGauge,label:"LCD gauge"},{value:ge.TableCellDisplayMode.BasicGauge,label:"Basic gauge"},{value:ge.TableCellDisplayMode.JSONView,label:"JSON View"},{value:ge.TableCellDisplayMode.Image,label:"Image"}]},defaultValue:$i.displayMode}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:$i.filterable})}}).setPanelOptions((e=>{e.addBooleanSwitch({path:"showHeader",name:"Show header",description:"To display table's header or not to display",defaultValue:Di})})),zi={},Ui=e=>Array.isArray(e)?e.reduce(((e,t)=>t.datapoints?e.concat(t):e),[]):e.datapoints?[e]:[],qi=e=>Array.isArray(e)?e.reduce(((e,t)=>t.columns?e.concat(t):e),[]):e.columns?[e]:[];function Hi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}zi.timeseries_to_rows={description:"Time series to rows",getColumns:()=>[],transform:(e,t,s)=>{s.columns=[{text:"Time",type:"date"},{text:"Metric"},{text:"Value"}];const a=Ui(e);for(let e=0;e<a.length;e++){const t=a[e];for(let e=0;e<t.datapoints.length;e++){const a=t.datapoints[e];s.rows.push([a[1],t.target,a[0]])}}}},zi.timeseries_to_columns={description:"Time series to columns",getColumns:()=>[],transform:(e,t,s)=>{s.columns.push({text:"Time",type:"date"});const a={},n=Ui(e);for(let e=0;e<n.length;e++){const t=n[e];s.columns.push({text:t.target});for(let s=0;s<t.datapoints.length;s++){const n=t.datapoints[s],i=n[1].toString();a[i]||(a[i]={time:n[1]}),a[i][e]=n[0]}}for(const e in a){const t=a[e],i=[t.time];for(let e=0;e<n.length;e++){const s=t[e];i.push(s)}s.rows.push(i)}}},zi.timeseries_aggregations={description:"Time series aggregations",getColumns:()=>[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Current",value:"current"},{text:"Count",value:"count"}],transform:(e,t,s)=>{let a,n;for(s.columns.push({text:"Metric"}),a=0;a<t.columns.length;a++)s.columns.push({text:t.columns[a].text});const i=Ui(e);for(a=0;a<i.length;a++){const e=new Q.Z({datapoints:i[a].datapoints,alias:i[a].target});e.getFlotPairs("connected");const r=[e.alias];for(n=0;n<t.columns.length;n++)r.push(e.stats[t.columns[n].value]);s.rows.push(r)}}},zi.annotations={description:"Annotations",getColumns:()=>[],transform:(e,t,s)=>{if(s.columns.push({text:"Time",type:"date"}),s.columns.push({text:"Title"}),s.columns.push({text:"Text"}),s.columns.push({text:"Tags"}),e&&e.annotations&&0!==e.annotations.length)for(let t=0;t<e.annotations.length;t++){const a=e.annotations[t];s.rows.push([a.time,a.title,a.text,a.tags])}}},zi.table={description:"Table",getColumns:e=>{if(!e||0===e.length)return[];if(1===e.length)return[...e[0].columns];const t=qi(e),s={};return t.reduce(((e,t)=>(t.columns.forEach((t=>{const{text:a}=t;void 0===s[a]&&(s[a]=e.length,e.push(t))})),e)),[])},transform:(e,t,s)=>{if(!e||0===e.length)return;const a=qi(e),n=(0,I.findIndex)(a,(e=>"columns"in e&&"rows"in e));if(n<0)throw{message:`Result of query #${String.fromCharCode(65+n)} is not in table format, try using another transform.`};(0,K.M)(s,...a)}},zi.json={description:"JSON Data",getColumns:e=>{if(!e||0===e.length)return[];const t={};for(let s=0;s<e.length;s++){const a=e[s];if("docs"!==a.type)continue;const n=Math.min(a.datapoints.length,100);for(let e=0;e<n;e++){const s=a.datapoints[e],n=(0,J.default)(s,{});for(const e in n)t[e]=!0}}return(0,I.map)(t,((e,t)=>({text:t,value:t})))},transform:(e,t,s)=>{let a,n,i;for(const a of t.columns){const t={text:a.text};e.length>0&&e[0].filterable&&(t.filterable=!0),s.columns.push(t)}for(0===s.columns.length&&s.columns.push({text:"JSON"}),a=0;a<e.length;a++){const r=e[a];for(n=0;n<r.datapoints.length;n++){const e=r.datapoints[n],a=[];if((0,I.isObject)(e)&&t.columns.length>0){const s=(0,J.default)(e);for(i=0;i<t.columns.length;i++)a.push(s[t.columns[i].value])}else a.push(JSON.stringify(e));s.rows.push(a)}}}};class Gi{constructor(e,t){Hi(this,"panel",void 0),Hi(this,"panelCtrl",void 0),Hi(this,"transformers",void 0),Hi(this,"fontSizes",void 0),Hi(this,"addColumnSegment",void 0),Hi(this,"getColumnNames",void 0),Hi(this,"canSetColumns",!1),Hi(this,"columnsHelpMessage",""),this.uiSegmentSrv=t,e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.transformers=zi,this.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],this.addColumnSegment=t.newPlusButton(),this.updateTransformHints()}updateTransformHints(){switch(this.canSetColumns=!1,this.columnsHelpMessage="",this.panel.transform){case"timeseries_aggregations":case"json":this.canSetColumns=!0;break;case"table":this.columnsHelpMessage="Columns and their order are determined by the data query"}}getColumnOptions(){if(!this.panelCtrl.dataRaw)return Promise.resolve([]);const e=this.transformers[this.panel.transform].getColumns(this.panelCtrl.dataRaw),t=(0,I.map)(e,(e=>this.uiSegmentSrv.newSegment({value:e.text})));return Promise.resolve(t)}addColumn(){const e=zi[this.panel.transform].getColumns(this.panelCtrl.dataRaw),t=(0,I.find)(e,{text:this.addColumnSegment.value});t&&(this.panel.columns.push(t),this.render());const s=this.uiSegmentSrv.newPlusButton();this.addColumnSegment.html=s.html,this.addColumnSegment.value=s.value}transformChanged(){this.panel.columns=[],"annotations"===this.panel.transform?this.panelCtrl.refresh():("timeseries_aggregations"===this.panel.transform&&this.panel.columns.push({text:"Avg",value:"avg"}),this.updateTransformHints(),this.render())}render(){this.panelCtrl.render()}removeColumn(e){this.panel.columns=(0,I.without)(this.panel.columns,e),this.panelCtrl.render()}}function Wi(e){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/table-old/editor.html",controller:Gi}}function Zi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Gi.$inject=["$scope","uiSegmentSrv"];class Qi{constructor(e){Zi(this,"panel",void 0),Zi(this,"panelCtrl",void 0),Zi(this,"colorModes",void 0),Zi(this,"columnStyles",void 0),Zi(this,"columnTypes",void 0),Zi(this,"fontSizes",void 0),Zi(this,"dateFormats",void 0),Zi(this,"addColumnSegment",void 0),Zi(this,"unitFormats",void 0),Zi(this,"getColumnNames",void 0),Zi(this,"activeStyleIndex",void 0),Zi(this,"mappingTypes",void 0),Zi(this,"alignTypes",void 0),e.editor=this,this.activeStyleIndex=0,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.unitFormats=(0,ue.getValueFormats)(),this.colorModes=[{text:"Disabled",value:null},{text:"Cell",value:"cell"},{text:"Value",value:"value"},{text:"Row",value:"row"}],this.columnTypes=[{text:"Number",value:"number"},{text:"String",value:"string"},{text:"Date",value:"date"},{text:"Hidden",value:"hidden"}],this.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],this.dateFormats=[{text:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{text:"YYYY-MM-DD HH:mm:ss.SSS",value:"YYYY-MM-DD HH:mm:ss.SSS"},{text:"MM/DD/YY h:mm:ss a",value:"MM/DD/YY h:mm:ss a"},{text:"MMMM D, YYYY LT",value:"MMMM D, YYYY LT"},{text:"YYYY-MM-DD",value:"YYYY-MM-DD"}],this.mappingTypes=[{text:"Value to text",value:1},{text:"Range to text",value:2}],this.alignTypes=Qi.alignTypesEnum,this.getColumnNames=()=>this.panelCtrl.table?(0,I.map)(this.panelCtrl.table.columns,(e=>e.text)):[],this.onColorChange=this.onColorChange.bind(this)}render(){this.panelCtrl.render()}setUnitFormat(e){return t=>{e.unit=t,this.panelCtrl.render()}}addColumnStyle(){const e=this.panel.styles,t=e.length;let s=t;if(t>0){"/.*/"===e[t-1].pattern&&(s=t-1)}e.splice(s,0,{unit:"short",type:"number",alias:"",decimals:2,colors:["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],colorMode:null,pattern:"",dateFormat:"YYYY-MM-DD HH:mm:ss",thresholds:[],mappingType:1,align:"auto"}),this.activeStyleIndex=s}removeColumnStyle(e){this.panel.styles=(0,I.without)(this.panel.styles,e)}invertColorOrder(e){const t=this.panel.styles[e].colors,s=t[0];t[0]=t[2],t[2]=s,this.panelCtrl.render()}onColorChange(e,t){return s=>{e.colors[t]=s,this.render()}}addValueMap(e){e.valueMaps||(e.valueMaps=[]),e.valueMaps.push({value:"",text:""}),this.panelCtrl.render()}removeValueMap(e,t){e.valueMaps.splice(t,1),this.panelCtrl.render()}addRangeMap(e){e.rangeMaps||(e.rangeMaps=[]),e.rangeMaps.push({from:"",to:"",text:""}),this.panelCtrl.render()}removeRangeMap(e,t){e.rangeMaps.splice(t,1),this.panelCtrl.render()}}function Ki(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/table-old/column_options.html",controller:Qi}}function Yi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Qi.$inject=["$scope"],Zi(Qi,"alignTypesEnum",[{text:"auto",value:""},{text:"left",value:"left"},{text:"center",value:"center"},{text:"right",value:"right"}]);class Ji{constructor(e,t,s,a,n=(0,Se.getTemplateSrv)(),i){Yi(this,"formatters",[]),Yi(this,"colorState",void 0),this.panel=e,this.table=t,this.timeZone=s,this.sanitize=a,this.templateSrv=n,this.theme=i,this.initColumns()}setTable(e){this.table=e,this.initColumns()}initColumns(){this.formatters=[],this.colorState={};for(let e=0;e<this.table.columns.length;e++){const t=this.table.columns[e];t.title=t.text;for(let e=0;e<this.panel.styles.length;e++){const s=this.panel.styles[e],a=(0,ue.stringStartsAsRegEx)(s.pattern)?s.pattern:(0,ue.escapeStringForRegex)((0,ue.unEscapeStringFromRegex)(s.pattern)),n=(0,ue.stringToJsRegex)(a);if(t.text.match(n)){t.style=s,s.alias&&(t.title=ue.textUtil.escapeHtml(t.text.replace(n,s.alias)));break}}this.formatters[e]=this.createColumnFormatter(t)}}getColorForValue(e,t){if(!t.thresholds||!t.colors)return null;for(let s=t.thresholds.length;s>0;s--)if(e>=t.thresholds[s-1])return(0,ue.getColorForTheme)(t.colors[s],this.theme);return(0,ue.getColorForTheme)((0,I.first)(t.colors),this.theme)}defaultCellFormatter(e,t){return null==e||void 0===e?"":((0,I.isArray)(e)&&(e=e.join(", ")),t&&t.sanitize?this.sanitize(e):(0,I.escape)(e))}createColumnFormatter(e){if(!e.style)return this.defaultCellFormatter;if("hidden"===e.style.type)return e=>{};if("date"===e.style.type)return t=>null==t?"-":((0,I.isArray)(t)&&(t=t[0]),(0,I.isString)(t)&&!isNaN(t)&&t.length>12&&(t=parseInt(t,10)),e.style.dateFormat?(0,ue.dateTimeFormat)(t,{format:e.style.dateFormat,timeZone:this.timeZone}):(0,ue.dateTimeFormatISO)(t,{timeZone:this.timeZone}));if("string"===e.style.type)return t=>{(0,I.isArray)(t)&&(t=t.join(", "));const s=e.style.mappingType||0;if(1===s&&e.style.valueMaps)for(let s=0;s<e.style.valueMaps.length;s++){const a=e.style.valueMaps[s];if(null!==t){if(!(0,I.isString)(t)&&Number(a.value)===Number(t)||a.value===t)return this.setColorState(t,e.style),this.defaultCellFormatter(a.text,e.style)}else if("null"===a.value)return a.text}if(2===s&&e.style.rangeMaps)for(let s=0;s<e.style.rangeMaps.length;s++){const a=e.style.rangeMaps[s];if(null!==t){if(Number(a.from)<=Number(t)&&Number(a.to)>=Number(t))return this.setColorState(t,e.style),this.defaultCellFormatter(a.text,e.style)}else if("null"===a.from&&"null"===a.to)return a.text}return null==t?"-":(this.setColorState(t,e.style),this.defaultCellFormatter(t,e.style))};if("number"===e.style.type){const t=(0,ue.getValueFormat)(e.unit||e.style.unit);return s=>null==s?"-":isNaN(s)||(0,I.isArray)(s)?this.defaultCellFormatter(s,e.style):(this.setColorState(s,e.style),(0,ue.formattedValueToString)(t(s,e.style.decimals,null)))}return t=>this.defaultCellFormatter(t,e.style)}setColorState(e,t){if(!t.colorMode)return;if(null==e||(0,I.isArray)(e))return;const s=Number(e);isNaN(s)||(this.colorState[t.colorMode]=this.getColorForValue(s,t))}renderRowVariables(e){const t={};let s;const a=this.table.rows[e];for(let e=0;e<a.length;e++)s=`__cell_${e}`,t[s]={value:a[e],text:a[e]?a[e].toString():""};return t}formatColumnValue(e,t){const s=this.formatters[e];return s?s(t):t}renderCell(e,t,s,a=!1){s=this.formatColumnValue(e,s);const n=this.table.columns[e],i=[];let r="";const o=[];let l="";this.colorState.cell?(i.push("background-color:"+this.colorState.cell),o.push("table-panel-color-cell"),this.colorState.cell=null):this.colorState.value&&(i.push("color:"+this.colorState.value),this.colorState.value=null);let c="";if(a&&(c='<div class="table-panel-width-hack">'+this.table.columns[e].title+"</div>"),void 0===s?(i.push("display:none"),n.hidden=!0):n.hidden=!1,!0===n.hidden)return"";if(n.style&&n.style.preserveFormat&&o.push("table-panel-cell-pre"),n.style&&n.style.align){const e=(0,I.find)(Qi.alignTypesEnum,["text",n.style.align]);e&&e.value&&i.push(`text-align:${e.value}`)}if(i.length&&(r=' style="'+i.join(";")+'"'),n.style&&n.style.link){const e=this.renderRowVariables(t);e.__cell={value:s,text:s?s.toString():""};const a=this.templateSrv.replace(n.style.linkUrl,e,encodeURIComponent),i=ue.textUtil.sanitizeUrl(a),l=ue.textUtil.escapeHtml(this.templateSrv.replace(n.style.linkTooltip,e)),d=n.style.linkTargetBlank?"_blank":"";o.push("table-panel-cell-link"),c+=`<a href="${i}" target="${d}" data-link-tooltip data-original-title="${l}" data-placement="right"${r}>`,c+=`${s}`,c+="</a>"}else c+=s;return n.filterable&&(o.push("table-panel-cell-filterable"),c+=`<a class="table-panel-filter-link" data-link-tooltip data-original-title="Filter out value" data-placement="bottom"\n           data-row="${t}" data-column="${e}" data-operator="!=">`,c+='<i class="fa fa-search-minus"></i>',c+="</a>",c+=`<a class="table-panel-filter-link" data-link-tooltip data-original-title="Filter for value" data-placement="bottom"\n           data-row="${t}" data-column="${e}" data-operator="=">`,c+='<i class="fa fa-search-plus"></i>',c+="</a>"),o.length&&(l=' class="'+o.join(" ")+'"'),c="<td"+l+r+">"+c+"</td>",c}render(e){const t=this.panel.pageSize||100,s=e*t,a=Math.min(s+t,this.table.rows.length);let n="";for(let e=s;e<a;e++){const t=this.table.rows[e];let a="",i="";const r=[];let o="";for(let n=0;n<this.table.columns.length;n++)a+=this.renderCell(n,e,t[n],e===s);this.colorState.row&&(i=' style="background-color:'+this.colorState.row+'"',r.push("table-panel-color-row"),this.colorState.row=null),r.length&&(o=' class="'+r.join(" ")+'"'),n+="<tr "+o+i+">"+a+"</tr>"}return n}render_values(){const e=[],t=this.table.columns.filter((e=>!e.hidden));for(let t=0;t<this.table.rows.length;t++){const s=this.table.rows[t],a=[];for(let e=0;e<this.table.columns.length;e++)this.table.columns[e].hidden||a.push(this.formatColumnValue(e,s[e]));e.push(a)}return{columns:t,rows:e}}}function Xi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class er extends M.MetricsPanelCtrl{constructor(e,t,s,a){super(e,t),Xi(this,"pageIndex",void 0),Xi(this,"dataRaw",void 0),Xi(this,"table",void 0),Xi(this,"renderer",void 0),Xi(this,"panelHasRowColorMode",void 0),Xi(this,"panelHasLinks",void 0),Xi(this,"panelDefaults",{targets:[{}],transform:"timeseries_to_columns",pageSize:null,showHeader:!0,styles:[{type:"date",pattern:"Time",alias:"Time",dateFormat:"YYYY-MM-DD HH:mm:ss",align:"auto"},{unit:"short",type:"number",alias:"",decimals:2,colors:["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],colorMode:null,pattern:"/.*/",thresholds:[],align:"right"}],columns:[],fontSize:"100%",sort:{col:0,desc:!0}}),this.annotationsSrv=s,this.$sanitize=a,this.pageIndex=0,void 0===this.panel.styles&&(this.panel.styles=this.panel.columns,this.panel.columns=this.panel.fields,delete this.panel.columns,delete this.panel.fields),(0,I.defaults)(this.panel,this.panelDefaults),this.panelHasRowColorMode=Boolean(this.panel.styles.find((e=>"row"===e.colorMode))),this.panelHasLinks=Boolean(this.panel.styles.find((e=>e.link))),this.events.on(ue.PanelEvents.dataReceived,this.onDataReceived.bind(this)),this.events.on(ue.PanelEvents.dataSnapshotLoad,this.onDataReceived.bind(this)),this.events.on(ue.PanelEvents.editModeInitialized,this.onInitEditMode.bind(this))}onInitEditMode(){this.addEditorTab("Options",Wi,2),this.addEditorTab("Column Styles",Ki,3)}migrateToPanel(e){this.onPluginTypeChange(Z.ZP.panels[e])}issueQueries(e){return this.pageIndex=0,"annotations"===this.panel.transform?this.annotationsSrv.getAnnotations({dashboard:this.dashboard,panel:this.panel,range:this.range}).then((e=>(this.loading=!1,this.dataRaw=e,this.pageIndex=0,this.render(),{data:this.dataRaw}))):super.issueQueries(e)}onDataReceived(e){this.dataRaw=e,this.pageIndex=0,this.dataRaw&&this.dataRaw.length&&((0,ue.isTableData)(this.dataRaw[0])?this.panel.transform="table":"docs"===this.dataRaw[0].type?this.panel.transform="json":"table"!==this.panel.transform&&"json"!==this.panel.transform||(this.panel.transform="timeseries_to_rows")),this.render()}render(){return this.table=function(e,t){const s=new K.Z;if(!e||0===e.length)return s;const a=zi[t.transform];if(!a)throw{message:"Transformer "+t.transform+" not found"};return a.transform(e,t,s),s}(this.dataRaw,this.panel),this.table.sort(this.panel.sort),this.renderer=new Ji(this.panel,this.table,this.dashboard.getTimezone(),this.$sanitize,this.templateSrv,Z.ZP.theme),super.render(this.table)}toggleColumnSort(e,t){this.table.columns[this.panel.sort.col]&&(this.table.columns[this.panel.sort.col].sort=!1),this.panel.sort.col===t?this.panel.sort.desc?this.panel.sort.desc=!1:this.panel.sort.col=null:(this.panel.sort.col=t,this.panel.sort.desc=!0),this.render()}link(e,t,s,a){let n;const i=a.panel;let r=0;function o(){let e=a.height;return r>1&&(e-=26),e-31+"px"}function l(){const e=t.parents(".panel-content"),s=t.find(".table-panel-scroll"),l=t.find("tbody"),c=t.find(".table-panel-footer");t.css({"font-size":i.fontSize}),e.addClass("table-panel-content"),function(e){a.renderer.setTable(n),e.empty(),e.html(a.renderer.render(a.pageIndex))}(l),function(e){e.empty();const t=i.pageSize||100;if(r=Math.ceil(n.rows.length/t),1===r)return;const s=Math.max(a.pageIndex-3,0),o=Math.min(r,s+9),l=R()("<ul></ul>");for(let e=s;e<o;e++){const t=e===a.pageIndex?"active":"",s=R()('<li><a class="table-panel-page-link pointer '+t+'">'+(e+1)+"</a></li>");l.append(s)}e.append(l)}(c),s.css({"max-height":o()})}t.tooltip({selector:"[data-link-tooltip]"}),t.on("click",".table-panel-page-link",(function(e){const t=R()(e.currentTarget);a.pageIndex=parseInt(t.text(),10)-1,l()})),t.on("click",".table-panel-filter-link",(function(e){const t=R()(e.currentTarget).data(),s={datasource:i.datasource,key:n.columns[t.column].text,value:n.rows[t.row][t.column],operator:t.operator};(0,Qs.WI)((0,Pi.m2)(s))}));const c=e.$on("$destroy",(()=>{t.off("click",".table-panel-page-link"),t.off("click",".table-panel-filter-link"),c()}));a.events.on(ue.PanelEvents.render,(e=>{n=e||n,n&&l(),a.renderingCompleted()}))}}er.$inject=["$scope","$injector","annotationsSrv","$sanitize"],Xi(er,"templateUrl","module.html");const tr=new ue.PanelPlugin(null);tr.angularPanelCtrl=er,tr.setNoPadding();var sr=s("./public/app/plugins/panel/stat/module.tsx"),ar=s("./public/app/core/store.ts");const nr=(0,ge.stylesFactory)(((e,t)=>{const s="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",a=t?s:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",n=t?s:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",i=e.isDark?a:n;return`\n      background-color: ${e.colors.bg2};\n      margin-right: ${e.spacing.xl};\n      border: 1px solid ${e.colors.border1};\n      border-bottom-left-radius: ${e.border.radius.md};\n      border-bottom-right-radius: ${e.border.radius.md};\n      position: relative;\n      max-height: 230px;\n\n      @media only screen and (max-width: ${e.breakpoints.xxl}) {\n        margin-right: ${e.spacing.md};\n      }\n      &::before {\n        display: block;\n        content: ' ';\n        position: absolute;\n        left: 0;\n        right: 0;\n        height: 2px;\n        top: 0;\n        background-image: ${i};\n      }\n`})),ir=(0,ge.stylesFactory)(((e,t)=>me.css`
    color: ${t?e.palette.blue95:e.colors.textWeak};

    @media only screen and (max-width: ${e.breakpoints.sm}) {
      display: none;
    }
  `)),rr=me.css`
  padding: 16px;
`,or=({card:e})=>{const t=(0,ge.useTheme)(),s=cr(t,e.done);return(0,be.jsx)("a",{className:s.card,onClick:t=>lr(t,e),children:(0,be.jsxs)("div",{className:rr,children:[(0,be.jsx)("div",{className:s.type,children:e.type}),(0,be.jsx)("div",{className:s.heading,children:e.done?"complete":e.heading}),(0,be.jsx)("h4",{className:s.cardTitle,children:e.title}),(0,be.jsx)("div",{className:s.info,children:e.info}),(0,be.jsx)(ge.Icon,{className:ir(t,e.done),name:e.icon,size:"xxl"})]})})},lr=(e,t)=>{e.preventDefault();ar.Z.get(t.key)||ar.Z.set(t.key,!0),window.open(`${t.href}?utm_source=grafana_gettingstarted`,"_blank")},cr=(0,ge.stylesFactory)(((e,t)=>({card:me.css`
      ${nr(e,t)}
      width: 460px;
      min-width: 460px;

      @media only screen and (max-width: ${e.breakpoints.xl}) {
        min-width: 368px;
      }

      @media only screen and (max-width: ${e.breakpoints.lg}) {
        min-width: 272px;
      }
    `,type:me.css`
      color: ${e.colors.textBlue};
      text-transform: uppercase;
    `,heading:me.css`
      text-transform: uppercase;
      color: ${e.colors.textBlue};
      margin-bottom: ${e.spacing.sm};
    `,cardTitle:me.css`
      margin-bottom: ${e.spacing.md};
    `,info:me.css`
      margin-bottom: ${e.spacing.md};
    `,status:me.css`
      display: flex;
      justify-content: flex-end;
    `})));var dr;const ur=({card:e})=>{const t=(0,ge.useTheme)(),s=pr(t,e.done);return(0,be.jsxs)("div",{className:s.card,children:[(0,be.jsx)("div",{className:rr,children:(0,be.jsxs)("a",{href:`${e.href}?utm_source=grafana_gettingstarted`,className:s.url,children:[(0,be.jsx)("div",{className:s.heading,children:e.done?"complete":e.heading}),(0,be.jsx)("h4",{className:s.title,children:e.title}),(0,be.jsx)("div",{children:(0,be.jsx)(ge.Icon,{className:ir(t,e.done),name:e.icon,size:"xxl"})})]})}),(0,be.jsxs)("a",{href:`${e.learnHref}?utm_source=grafana_gettingstarted`,className:s.learnUrl,target:"_blank",rel:"noreferrer",children:["Learn how in the docs ",dr||(dr=(0,be.jsx)(ge.Icon,{name:"external-link-alt"}))]})]})},pr=(0,ge.stylesFactory)(((e,t)=>({card:me.css`
      ${nr(e,t)}

      min-width: 230px;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        min-width: 192px;
      }
    `,heading:me.css`
      text-transform: uppercase;
      color: ${t?e.palette.blue95:"#FFB357"};
      margin-bottom: ${e.spacing.md};
    `,title:me.css`
      margin-bottom: ${e.spacing.md};
    `,url:me.css`
      display: inline-block;
    `,learnUrl:me.css`
      border-top: 1px solid ${e.colors.border1};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `}))),hr=({step:e})=>{const t=(0,ge.useTheme)(),s=gr(t);return(0,be.jsxs)("div",{className:s.setup,children:[(0,be.jsxs)("div",{className:s.info,children:[(0,be.jsx)("h2",{className:s.title,children:e.title}),(0,be.jsx)("p",{children:e.info})]}),(0,be.jsx)("div",{className:s.cards,children:e.cards.map(((e,t)=>{const s=`${e.title}-${t}`;return"tutorial"===e.type?(0,be.jsx)(or,{card:e},s):(0,be.jsx)(ur,{card:e},s)}))})]})},gr=(0,ge.stylesFactory)((e=>({setup:me.css`
      display: flex;
      width: 95%;
    `,info:me.css`
      width: 172px;
      margin-right: 5%;

      @media only screen and (max-width: ${e.breakpoints.xxl}) {
        margin-right: ${e.spacing.xl};
      }
      @media only screen and (max-width: ${e.breakpoints.sm}) {
        display: none;
      }
    `,title:me.css`
      color: ${e.palette.blue95};
    `,cards:me.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      @media only screen and (max-width: ${e.breakpoints.xxl}) {
        justify-content: flex-start;
      }
    `})));var mr=s("./public/app/features/plugins/datasource_srv.ts");const fr="Grafana fundamentals",br="getting.started.",vr=`${br}${fr.replace(" ","-").trim().toLowerCase()}`,xr=`${br}${"Create users and teams".replace(" ","-").trim().toLowerCase()}`;var yr,wr,jr;function kr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Sr extends q.PureComponent{constructor(...e){super(...e),kr(this,"state",{checksDone:!1,currentStep:0,steps:[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:fr,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the “Data source” and “Dashboards” steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(ar.Z.get(vr)),key:vr,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise((e=>{e((0,mr.ak)().getMetricSources().filter((e=>!0!==e.meta.builtIn)).length>0)})),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,le.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard – it is, after all, a fully customizable dashboard – and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:xr,check:()=>Promise.resolve(ar.Z.get(xr)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const e=await(0,le.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(e.length>0)},done:!1}]}]}),kr(this,"onForwardClick",(()=>{this.setState((e=>({currentStep:e.currentStep+1})))})),kr(this,"onPreviousClick",(()=>{this.setState((e=>({currentStep:e.currentStep-1})))})),kr(this,"dismiss",(()=>{const{id:e}=this.props,t=(0,Ra.h4)().getCurrent(),s=null==t?void 0:t.getPanelById(e);null==t||t.removePanel(s),le.ae.request({method:"PUT",url:"/api/user/helpflags/1",showSuccessAlert:!1}).then((e=>{Y.Vt.user.helpFlags1=e.helpFlags1}))}))}async componentDidMount(){const{steps:e}=this.state,t=e.map((async e=>{const t=e.cards.map((e=>e.check().then((t=>Object.assign({},e,{done:t}))))),s=await Promise.all(t);return Object.assign({},e,{done:s.every((e=>e.done)),cards:s})})),s=await Promise.all(t);this.setState({currentStep:s[0].done?1:0,steps:s,checksDone:!0})}render(){const{checksDone:e,currentStep:t,steps:s}=this.state,a=Cr(),n=s[t];return(0,be.jsx)("div",{className:a.container,children:e?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:a.dismiss,children:(0,be.jsx)("div",{onClick:this.dismiss,children:"Remove this panel"})}),t===s.length-1&&(0,be.jsx)("div",{className:(0,me.cx)(a.backForwardButtons,a.previous),onClick:this.onPreviousClick,children:wr||(wr=(0,be.jsx)(ge.Button,{"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}))}),(0,be.jsx)("div",{className:a.content,children:(0,be.jsx)(hr,{step:n})}),t<s.length-1&&(0,be.jsx)("div",{className:(0,me.cx)(a.backForwardButtons,a.forward),onClick:this.onForwardClick,children:jr||(jr=(0,be.jsx)(ge.Button,{"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"}))})]}):(0,be.jsxs)("div",{className:a.loading,children:[(0,be.jsx)("div",{className:a.loadingText,children:"Checking completed setup steps"}),yr||(yr=(0,be.jsx)(ge.Spinner,{size:24,inline:!0}))]})})}}const Cr=(0,ge.stylesFactory)((()=>{const{theme:e}=Se.config;return{container:me.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${e.type}.svg) no-repeat;
      background-size: cover;
      padding: ${e.spacing.xl} ${e.spacing.md} 0;
    `,content:me.css`
      label: content;
      display: flex;
      justify-content: center;

      @media only screen and (max-width: ${e.breakpoints.xxl}) {
        margin-left: ${e.spacing.lg};
        justify-content: flex-start;
      }
    `,header:me.css`
      label: header;
      margin-bottom: ${e.spacing.lg};
      display: flex;
      flex-direction: column;

      @media only screen and (min-width: ${e.breakpoints.lg}) {
        flex-direction: row;
      }
    `,headerLogo:me.css`
      height: 58px;
      padding-right: ${e.spacing.md};
      display: none;

      @media only screen and (min-width: ${e.breakpoints.md}) {
        display: block;
      }
    `,heading:me.css`
      label: heading;
      margin-right: ${e.spacing.lg};
      margin-bottom: ${e.spacing.lg};
      flex-grow: 1;
      display: flex;

      @media only screen and (min-width: ${e.breakpoints.md}) {
        margin-bottom: 0;
      }
    `,backForwardButtons:me.css`
      position: absolute;
      bottom: 50%;
      top: 50%;
      height: 50px;
    `,previous:me.css`
      left: 10px;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        left: 0;
      }
    `,forward:me.css`
      right: 10px;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        right: 0;
      }
    `,dismiss:me.css`
      display: flex;
      justify-content: flex-end;
      cursor: pointer;
      text-decoration: underline;
      margin-right: ${e.spacing.md};
      margin-bottom: ${e.spacing.sm};
    `,loading:me.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:me.css`
      margin-right: ${e.spacing.sm};
    `}})),Tr=new ue.PanelPlugin(Sr).setNoPadding();var Nr=s("./public/app/plugins/panel/gauge/module.tsx");let Or,Ir,Pr;!function(e){e.Pie="pie",e.Donut="donut"}(Or||(Or={})),function(e){e.Value="value",e.Percent="percent"}(Ir||(Ir={})),function(e){e.Name="name",e.Value="value",e.Percent="percent"}(Pr||(Pr={}));var Mr=s("./node_modules/@visx/tooltip/esm/hooks/useTooltip.js"),Fr=s("./node_modules/@visx/tooltip/esm/hooks/useTooltipInPortal.js"),Ar=s("./node_modules/@visx/shape/lib/shapes/Pie.js"),Dr=s("./node_modules/@visx/gradient/esm/gradients/RadialGradient.js"),$r=s("./node_modules/@visx/event/esm/localPoint.js"),Lr=s("./node_modules/@visx/group/esm/Group.js");let Er=0;function Rr(e){const t=(0,q.useRef)(null);return null===t.current&&(t.current=e+Er++),t.current.toString()}function _r(e){var t,s;return!(null!==(t=e.field.custom)&&void 0!==t&&null!==(s=t.hideFrom)&&void 0!==s&&s.viz||isNaN(e.display.numeric))}function Vr(e,t){return t.display.numeric+e}const Br=({fieldDisplayValues:e,pieType:t,width:s,height:a,highlightedTitle:n,displayLabels:i=[],tooltipOptions:r})=>{const o=(0,ge.useTheme2)(),l=Rr("PieChart"),c=(0,ge.useStyles2)(Kr),d=(0,Mr.Z)(),{containerRef:u,TooltipInPortal:p}=(0,Fr.Z)({detectBounds:!0,scroll:!0}),h=e.filter(_r),g=e=>`${l}-${Es()(e).toHex()}`,m=e=>`url(#${g(e)})`,f=i.length>0,b="none"!==r.mode&&d.tooltipOpen,v=h.reduce(Vr,0),x=function(e,t,s,a=16){const n=Math.min(t,e),i=(n-2*a)/2,r=s===Or.Pie?i:Math.max(i/3,20),o=i-r;return{position:(n-2*a)/2+a,size:n,outerRadius:i,innerRadius:o,gradientFromOffset:1-(i-o)/i}}(s,a,t),y=[...new Set(h.map((e=>{var t;return null!==(t=e.display.color)&&void 0!==t?t:ue.FALLBACK_COLOR})))];return(0,be.jsxs)("div",{className:c.container,children:[(0,be.jsx)("svg",{width:x.size,height:x.size,ref:u,children:(0,be.jsxs)(Lr.Z,{top:x.position,left:x.position,children:[y.map((e=>(0,be.jsx)(Dr.Z,{id:g(e),from:Hr(e,o),to:Gr(e,o),fromOffset:x.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:x.outerRadius},e))),(0,be.jsx)(Ar.Z,{data:h,pieValue:e=>e.display.numeric,outerRadius:x.outerRadius,innerRadius:x.innerRadius,cornerRadius:3,padAngle:.005,children:e=>(0,be.jsxs)(be.Fragment,{children:[e.arcs.map((t=>{var s;const a=null!==(s=t.data.display.color)&&void 0!==s?s:ue.FALLBACK_COLOR,i=Zr(n,t);return t.data.hasLinks&&t.data.getLinks?(0,be.jsx)(ge.DataLinksContextMenu,{config:t.data.field,links:t.data.getLinks,children:s=>(0,be.jsx)(zr,{tooltip:d,highlightState:i,arc:t,pie:e,fill:m(a),openMenu:s.openMenu,tooltipOptions:r})},t.index):(0,be.jsx)(zr,{highlightState:i,tooltip:d,arc:t,pie:e,fill:m(a),tooltipOptions:r},t.index)})),f&&e.arcs.map((e=>{const t=Zr(n,e);return(0,be.jsx)(Ur,{arc:e,highlightState:t,outerRadius:x.outerRadius,innerRadius:x.innerRadius,displayLabels:i,total:v,color:o.colors.text.primary},e.index)}))]})})]})}),b?(0,be.jsx)(p,{top:d.tooltipTop,className:c.tooltipPortal,left:d.tooltipLeft,unstyled:!0,applyPositionStyle:!0,children:(0,be.jsx)(ge.SeriesTable,{series:d.tooltipData})},Math.random()):null]})};function zr({arc:e,pie:t,highlightState:s,openMenu:a,fill:n,tooltip:i,tooltipOptions:r}){const o=(0,ge.useTheme2)(),l=(0,ge.useStyles2)(Kr),{eventBus:c}=(0,ge.usePanelContext)(),d=(0,q.useCallback)((t=>{null==c||c.publish({type:ue.DataHoverClearEvent.type,payload:{raw:t,x:0,y:0,dataId:e.data.display.title}}),i.hideTooltip()}),[c,e,i]),u=(0,q.useCallback)((s=>{null==c||c.publish({type:ue.DataHoverEvent.type,payload:{raw:s,x:0,y:0,dataId:e.data.display.title}});const a=(0,$r.Z)(s.target.ownerSVGElement,s);i.showTooltip({tooltipLeft:a.x,tooltipTop:a.y,tooltipData:qr(t,e,r)})}),[c,e,i,t,r]),p=Qr(s,l);return(0,be.jsx)("g",{className:p,onMouseMove:"none"!==r.mode?u:void 0,onMouseOut:d,onClick:a,"aria-label":ot.wl.components.Panels.Visualization.PieChart.svgSlice,children:(0,be.jsx)("path",{d:t.path(Object.assign({},e)),fill:n,stroke:o.colors.background.primary,strokeWidth:1})},e.data.display.title)}function Ur({arc:e,outerRadius:t,innerRadius:s,displayLabels:a,total:n,color:i,highlightState:r}){const o=(0,ge.useStyles2)(Kr),l=0===s?t/6:s,[c,d]=function(e,t,s){const a=(t+s)/2,n=(+e.startAngle+ +e.endAngle)/2-Math.PI/2;return[Math.cos(n)*a,Math.sin(n)*a]}(e,t,l);if(!(e.endAngle-e.startAngle>=.3))return null;let u=a.includes(Pr.Name)?Math.min(Math.max(t/150*14,12),30):Math.min(Math.max(t/100*14,12),36);return(0,be.jsx)("g",{className:Qr(r,o),children:(0,be.jsxs)("text",{fill:i,x:c,y:d,dy:".33em",fontSize:u,fontWeight:500,textAnchor:"middle",pointerEvents:"none",children:[a.includes(Pr.Name)&&(0,be.jsx)("tspan",{x:c,dy:"1.2em",children:e.data.display.title}),a.includes(Pr.Value)&&(0,be.jsx)("tspan",{x:c,dy:"1.2em",children:(0,ue.formattedValueToString)(e.data.display)}),a.includes(Pr.Percent)&&(0,be.jsx)("tspan",{x:c,dy:"1.2em",children:(e.data.display.numeric/n*100).toFixed(0)+"%"})]})})}function qr(e,t,s){var a;return"multi"===s.mode?e.arcs.map((e=>{var s;return{color:null!==(s=e.data.display.color)&&void 0!==s?s:ue.FALLBACK_COLOR,label:e.data.display.title,value:(0,ue.formattedValueToString)(e.data.display),isActive:e.index===t.index}})):[{color:null!==(a=t.data.display.color)&&void 0!==a?a:ue.FALLBACK_COLOR,label:t.data.display.title,value:(0,ue.formattedValueToString)(t.data.display)}]}function Hr(e,t){return Es()(e).darken(20*(t.isDark?1:-.7)).spin(4).toRgbString()}function Gr(e,t){return Es()(e).darken(10*(t.isDark?1:-.7)).spin(-4).toRgbString()}var Wr;function Zr(e,t){return e?e===t.data.display.title?Wr.Highlighted:Wr.Deemphasized:Wr.Normal}function Qr(e,t){switch(e){case Wr.Highlighted:return t.svgArg.highlighted;case Wr.Deemphasized:return t.svgArg.deemphasized;case Wr.Normal:default:return t.svgArg.normal}}!function(e){e[e.Highlighted=0]="Highlighted",e[e.Deemphasized=1]="Deemphasized",e[e.Normal=2]="Normal"}(Wr||(Wr={}));const Kr=e=>({container:me.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:me.css`
        transition: all 200ms ease-in-out;
      `,highlighted:me.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:me.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:me.css`
      ${(0,Re.getTooltipContainerStyles)(e)}
    `});var Yr;const Jr={displayMode:Ce.jK.List,placement:"right",calcs:[],values:[Ir.Percent]};function Xr(e,t){var s;const a=null!==(s=e.options.legend)&&void 0!==s?s:Jr;if(a.displayMode===Ce.jK.Hidden)return;const n=t.filter(_r).reduce(Vr,0),i=t.sort(((e,t)=>isNaN(e.display.numeric)?1:isNaN(t.display.numeric)?-1:t.display.numeric-e.display.numeric)).map(((t,s)=>{var i,r;const o=t.field.custom.hideFrom.viz,l=t.display;return{label:null!==(i=l.title)&&void 0!==i?i:"",color:null!==(r=l.color)&&void 0!==r?r:ue.FALLBACK_COLOR,yAxis:1,disabled:o,getItemKey:()=>{var e;return(null!==(e=l.title)&&void 0!==e?e:"")+s},getDisplayValues:()=>{var t;const s=null!==(t=a.values)&&void 0!==t?t:[];let i=[];if(s.includes(Ir.Value)&&i.push({numeric:l.numeric,text:(0,ue.formattedValueToString)(l),title:"Value"}),s.includes(Ir.Percent)){var r;const t=o?0:l.numeric/n,a=100*t;i.push({numeric:t,percent:a,text:o||isNaN(t)?null!==(r=e.fieldConfig.defaults.noValue)&&void 0!==r?r:"-":a.toFixed(0)+"%",title:s.length>1?"Percent":""})}return i}}}));return(0,be.jsx)(ge.VizLegend,{items:i,seriesVisibilityChangeBehavior:ge.SeriesVisibilityChangeBehavior.Hide,placement:a.placement,displayMode:a.displayMode})}var eo=s("./public/app/plugins/panel/stat/types.ts");const to=new ue.PanelPlugin((function(e){const{data:t,timeZone:s,fieldConfig:a,replaceVariables:n,width:i,height:r,options:o}=e,l=(0,ge.useTheme2)(),c=function(){const[e,t]=(0,q.useState)(),{eventBus:s}=(0,ge.usePanelContext)();return(0,q.useEffect)((()=>{const e=e=>{t(e.payload.dataId)},a=e=>{t(void 0)},n=new Bn.w0;return n.add(s.getStream(ue.DataHoverEvent).subscribe({next:e})),n.add(s.getStream(ue.DataHoverClearEvent).subscribe({next:a})),()=>{n.unsubscribe()}}),[t,s]),e}(),d=(0,ue.getFieldDisplayValues)({fieldConfig:a,reduceOptions:o.reduceOptions,data:t.series,theme:l,replaceVariables:n,timeZone:s});return function(e){return e.some((e=>{var t;return null===(t=e.view)||void 0===t?void 0:t.dataFrame.length}))}(d)?(0,be.jsx)(ge.VizLayout,{width:i,height:r,legend:Xr(e,d),children:(e,t)=>(0,be.jsx)(Br,{width:e,height:t,highlightedTitle:c,fieldDisplayValues:d,tooltipOptions:o.tooltip,pieType:o.pieType,displayLabels:o.displayLabels})}):Yr||(Yr=(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsx)("p",{children:"No data"})}))})).setPanelChangeHandler(((e,t,s)=>{if("grafana-piechart-panel"===t&&s.angular){const t=s.angular,a=[];let n=e.options;if(t.aliasColors)for(const e of Object.keys(t.aliasColors)){const s=t.aliasColors[e];s&&a.push({matcher:{id:ue.FieldMatcherID.byName,options:e},properties:[{id:ue.FieldConfigProperty.Color,value:{mode:ue.FieldColorModeId.Fixed,fixedColor:s}}]})}if(e.fieldConfig={overrides:a,defaults:{unit:t.format,decimals:t.decimals?t.decimals:0}},n.legend={placement:"right",values:[],displayMode:Ce.jK.Table,calcs:[]},t.valueName)switch(n.reduceOptions={calcs:[]},t.valueName){case"current":n.reduceOptions.calcs=["lastNotNull"];break;case"min":n.reduceOptions.calcs=["min"];break;case"max":n.reduceOptions.calcs=["max"];break;case"avg":n.reduceOptions.calcs=["mean"];break;case"total":n.reduceOptions.calcs=["sum"]}switch(t.legendType){case"Under graph":n.legend.placement="bottom";break;case"Right side":n.legend.placement="right"}switch(t.pieType){case"pie":n.pieType=Or.Pie;break;case"donut":n.pieType=Or.Donut}return t.legend&&(t.legend.show||(n.legend.displayMode=Ce.jK.Hidden),t.legend.values&&n.legend.values.push(Ir.Value),t.legend.percentage&&n.legend.values.push(Ir.Percent),t.legend.percentage||t.legend.values||(n.legend.displayMode=Ce.jK.Hidden)),"On graph"===t.legendType&&(n.legend.displayMode=Ce.jK.Hidden,n.displayLabels=[Pr.Name],t.legend.values&&n.displayLabels.push(Pr.Value),t.legend.percentage&&n.displayLabels.push(Pr.Percent)),n}return{}})).useFieldConfig({disableStandardOptions:[ue.FieldConfigProperty.Thresholds],standardOptions:{[ue.FieldConfigProperty.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:ue.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{ge.commonOptionsBuilder.addHideFrom(e)}}).setPanelOptions((e=>{(0,eo.j)(e),e.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Or.Pie,label:"Pie"},{value:Or.Donut,label:"Donut"}]},defaultValue:Or.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:Pr.Percent,label:"Percent"},{value:Pr.Name,label:"Name"},{value:Pr.Value,label:"Value"}]}}),ge.commonOptionsBuilder.addTooltipOptions(e),ge.commonOptionsBuilder.addLegendOptions(e,!1),e.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Ir.Percent,label:"Percent"},{value:Ir.Value,label:"Value"}]},showIf:e=>e.legend.displayMode!==Ce.jK.Hidden})}));var so=s("./public/app/plugins/panel/bargauge/BarGaugePanel.tsx");const ao=[{value:ge.BarGaugeDisplayMode.Gradient,label:"Gradient"},{value:ge.BarGaugeDisplayMode.Lcd,label:"Retro LCD"},{value:ge.BarGaugeDisplayMode.Basic,label:"Basic"}],no=new ue.PanelPlugin(so.M).useFieldConfig().setPanelOptions((e=>{(0,eo.j)(e),(0,eo.h)(e),ge.commonOptionsBuilder.addTextSizeOptions(e),e.addRadio({path:"displayMode",name:"Display mode",settings:{options:ao},defaultValue:"gradient"}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:!0,showIf:e=>"lcd"!==e.displayMode})})).setPanelChangeHandler(ge.sharedSingleStatPanelChangedHandler).setMigrationHandler((e=>(0,ge.sharedSingleStatMigrationHandler)(e))),io={lineWidth:1,fillOpacity:80,gradientMode:Ce.FI.None,axisSoftMin:0};var ro=s("./public/app/plugins/panel/barchart/distribute.ts");const oo=ro.Gj,lo=ro.Gj;function co(e,t){var s;const{xOri:a,xDir:n,rawValue:i,formatValue:r,showValue:o}=e,l=a===Ce.wN.Horizontal,c=!Boolean(null===(s=e.text)||void 0===s?void 0:s.valueSize),d=e.stacking!==Ce.o0.None,u=e.stacking===Ce.o0.Percent;let p,h,{groupWidth:g,barWidth:m}=e;d&&([g,m]=[m,g]);let f=document.createElement("div");f.classList.add("bar-mark"),f.style.position="absolute",f.style.background="rgba(255,255,255,0.4)";let b=[],v=[],x=1/0,y=1/0,w=Sa.Z.paths.bars({disp:{x0:{unit:2,values:(e,t)=>b[t].offs},size:{unit:2,values:(e,t)=>b[t].size}},each:(e,t,s,a,n,i,r)=>{a-=e.bbox.left,n-=e.bbox.top;let o=e.data[t][s];l?(x=Math.min(x,o<0?e.bbox.height-(n+r):n),y=i):(x=r,y=Math.min(y,o<0?a:e.bbox.width-(a+i)));let c={x:a,y:n,w:i,h:r,sidx:t,didx:s};p.add(c),v.push(c)}});const j=l?.1:.15,k=l?5:10;let S=null;return{cursor:{x:!1,y:!1,points:{show:!1}},xValues:e=>e.data[0].map((e=>r(0,e))),xSplits:e=>{const t=l?e.bbox.width:e.bbox.height,s=n*(l?1:-1);let a=[];return(0,ro.Qm)(e.data[0].length,g,oo,null,((s,n,i)=>{let r=t*n/devicePixelRatio+t*i/devicePixelRatio/2;a.push(e.posToVal(r,"x"))})),1===s?a:a.reverse()},barsBuilder:w,init:e=>{let t=e.over;t.style.overflow="hidden",t.appendChild(f)},drawClear:e=>{p=p||new ja.l(0,0,e.bbox.width,e.bbox.height),p.clear(),e.series.forEach((e=>{e._paths=null})),b=[null].concat(d?((e,t)=>{let s=Array.from({length:t},(()=>({offs:Array(e).fill(0),size:Array(e).fill(0)})));return(0,ro.Qm)(e,g,oo,null,((e,a,n)=>{(0,ro.Qm)(t,m,lo,null,((t,i,r)=>{s[t].offs[e]=a,s[t].size[e]=n}))})),s})(e.data[0].length,e.data.length-1):((e,t)=>{let s=Array.from({length:t},(()=>({offs:Array(e).fill(0),size:Array(e).fill(0)})));return(0,ro.Qm)(e,g,oo,null,((e,a,n)=>{(0,ro.Qm)(t,m,lo,null,((t,i,r)=>{s[t].offs[e]=a+n*i,s[t].size[e]=n*r}))})),s})(e.data[0].length,e.data.length-1)),v.length=0,x=y=1/0},draw:s=>{var a,n;if(o===Ce.Jp.Never)return;let d=Array(v.length),p=k;v.forEach(((e,t)=>{d[t]=r(e.sidx,i(e.sidx,e.didx)/(u?S[e.sidx][e.didx]:1)),p=Math.min(p,Math.round(j*(l?e.w:e.h)))}));let h=null!==(a=null===(n=e.text)||void 0===n?void 0:n.valueSize)&&void 0!==a?a:30;if(c)for(let e=0;e<v.length;e++)if(h=Math.round(Math.min(h,30,(0,ge.calculateFontSize)(d[e],y*(l?.65:1)-(l?0:p),x*(l?1:.65)-(l?p:0),1))),h<8&&o!==Ce.Jp.Always)return;s.ctx.save(),s.ctx.fillStyle=t.colors.text.primary,s.ctx.font=`${h}px ${t.typography.fontFamily}`;let g,m,f=l?0:-Math.round(.1*h);v.forEach(((e,t)=>{let a=i(e.sidx,e.didx),n=d[t];if(null!=a){let t=l?"center":a<0?"right":"left",i=l?a<0?"top":"alphabetic":"middle";t!==g&&(s.ctx.textAlign=g=t),i!==m&&(s.ctx.textBaseline=m=i),s.ctx.fillText(n,s.bbox.left+(l?e.x+e.w/2:a<0?e.x-p:e.x+e.w+p),s.bbox.top+(l?a<0?e.y+e.h+p:e.y-p:e.y+e.h/2-f))}})),s.ctx.restore()},interpolateTooltip:(e,t,s,a)=>{let n,i=a.cursor.left*devicePixelRatio,r=a.cursor.top*devicePixelRatio;p.get(i,r,1,1,(e=>{(0,ja.P)(i,r,e.x,e.y,e.x+e.w,e.y+e.h)&&(n=e)})),n?n!==h&&(f.style.display="",f.style.left=n.x/devicePixelRatio+"px",f.style.top=n.y/devicePixelRatio+"px",f.style.width=n.w/devicePixelRatio+"px",f.style.height=n.h/devicePixelRatio+"px",h=n,e(h.sidx),t(h.didx),s()):void 0!==h?(e(h.sidx),t(h.didx),s(),h=void 0,f.style.display="none"):s(!0)},prepData:function(e){return S=null,(0,Qe.k6)(e,(({totals:e})=>{S=e}))}}}const uo=({frame:e,theme:t,orientation:s,showValue:a,groupWidth:n,barWidth:i,stacking:r,text:o,rawValue:l,allFrames:c})=>{const d=new ge.UPlotConfigBuilder,u=function(e){return e===ue.VizOrientation.Vertical?{xOri:Ce.wN.Horizontal,xDir:Ce.bQ.Right,yOri:Ce.wN.Vertical,yDir:Ce.bQ.Up}:{xOri:Ce.wN.Vertical,xDir:Ce.bQ.Down,yOri:Ce.wN.Horizontal,yDir:Ce.bQ.Right}}(s),p=(t,s)=>(0,ue.formattedValueToString)(e.fields[t].display(s));2===e.fields.length&&(n=i,i=1);const h=co({xOri:u.xOri,xDir:u.xDir,groupWidth:n,barWidth:i,stacking:r,rawValue:l,formatValue:p,text:o,showValue:a},t);d.setCursor(h.cursor),d.addHook("init",h.init),d.addHook("drawClear",h.drawClear),d.addHook("draw",h.draw),d.setTooltipInterpolator(h.interpolateTooltip),d.setPrepData(h.prepData),d.addScale({scaleKey:"x",isTime:!1,distribution:Ce.wf.Ordinal,orientation:u.xOri,direction:u.xDir}),d.addAxis({scaleKey:"x",isTime:!1,placement:0===u.xOri?Ce.LB.Bottom:Ce.LB.Left,splits:h.xSplits,values:h.xValues,grid:{show:!1},ticks:!1,gap:15,theme:t});let g=0;const m=new Map;for(let s=1;s<e.fields.length;s++){var f;const a=e.fields[s];a.state.seriesIndex=g++;const n=Object.assign({},io,a.config.custom),i=a.config.unit||ge.FIXED_UNIT,r=(0,ue.getFieldColorModeForField)(a),o=(0,ue.getFieldSeriesColor)(a,t).color;if(d.addSeries({scaleKey:i,pxAlign:!0,lineWidth:n.lineWidth,lineColor:o,fillOpacity:n.fillOpacity,theme:t,colorMode:r,pathBuilder:h.barsBuilder,show:!(null!==(f=n.hideFrom)&&void 0!==f&&f.viz),gradientMode:n.gradientMode,thresholds:a.config.thresholds,hardMin:a.config.min,hardMax:a.config.max,softMin:n.axisSoftMin,softMax:n.axisSoftMax,dataFrameFieldIndex:{fieldIndex:c[0].fields.findIndex((e=>{var t;return e.type===ue.FieldType.number&&(null===(t=e.state)||void 0===t?void 0:t.seriesIndex)===g-1})),frameIndex:0}}),d.addScale({scaleKey:i,min:a.config.min,max:a.config.max,softMin:n.axisSoftMin,softMax:n.axisSoftMax,orientation:u.yOri,direction:u.yDir}),n.axisPlacement!==Ce.LB.Hidden){let e=n.axisPlacement;e&&e!==Ce.LB.Auto||(e=Ce.LB.Left),1===u.xOri&&(e===Ce.LB.Left&&(e=Ce.LB.Bottom),e===Ce.LB.Right&&(e=Ce.LB.Top)),d.addAxis({scaleKey:i,label:n.axisLabel,size:n.axisWidth,placement:e,formatValue:e=>(0,ue.formattedValueToString)(a.display(e)),theme:t,grid:{show:n.axisGridShow}})}(0,Qe.oP)(a,m,g)}if(0!==m.size){d.setStacking(!0);for(const[e,t]of m.entries())for(let e=t.length-1;e>0;e--)d.addBand({series:[t[e],t[e-1]]})}return d};function po(e){const t=e[0],s=t.fields.find((e=>e.type===ue.FieldType.string));if(!s)throw new Error("No string field in DF");const a=new ue.MutableDataFrame;a.addField(s);for(const e of t.fields)e.type===ue.FieldType.number&&a.addField(e);return a}const ho=["orientation","barWidth","groupWidth","stacking","showValue",(e,t)=>{var s,a;return(null===(s=t.text)||void 0===s?void 0:s.valueSize)===(null===(a=e.text)||void 0===a?void 0:a.valueSize)}],go=e=>{const t=(0,ge.useTheme2)(),{eventBus:s}=(0,ge.usePanelContext)(),a=(0,q.useRef)();a.current=e.frames[0];const n=(e,t)=>a.current.fields.find((t=>{var s;return t.type===ue.FieldType.number&&(null===(s=t.state)||void 0===s?void 0:s.seriesIndex)===e-1})).values.get(t);return(0,be.jsx)(ge.GraphNG,Object.assign({},(0,I.cloneDeep)(e),{theme:t,frames:e.frames,prepConfig:(a,i,r)=>{const{timeZone:o,orientation:l,barWidth:c,showValue:d,groupWidth:u,stacking:p,legend:h,tooltip:g,text:m}=e;return uo({frame:a,getTimeRange:r,theme:t,timeZone:o,eventBus:s,orientation:l,barWidth:c,showValue:d,groupWidth:u,stacking:p,legend:h,tooltip:g,text:m,rawValue:n,allFrames:e.frames})},propsToDiff:ho,preparePlotFrame:po,renderLegend:t=>t&&e.legend.displayMode!==Ce.jK.Hidden?(0,be.jsx)(ge.PlotLegend,Object.assign({data:e.frames,config:t,maxHeight:"35%",maxWidth:"60%"},e.legend)):null}))};go.displayName="BarChart";const mo=new ue.PanelPlugin((({data:e,options:t,width:s,height:a,timeZone:n})=>{const i=(0,ge.useTheme2)(),{frames:r,warn:o}=(0,q.useMemo)((()=>function(e,t,s){if(null==e||!e.length)return{warn:"No data in response"};const a=[],n=e[0];if(!n.fields.some((e=>e.type===ue.FieldType.string)))return{warn:"Bar charts requires a string field"};if(!n.fields.some((e=>e.type===ue.FieldType.number)))return{warn:"No numeric fields found"};let i=0;for(let n of e){const e=[];for(const a of n.fields)if(a.type===ue.FieldType.number){var r;a.state=null!==(r=a.state)&&void 0!==r?r:{},a.state.seriesIndex=i++;let n=Object.assign({},a,{config:Object.assign({},a.config,{custom:Object.assign({},a.config.custom,{stacking:{group:"_",mode:s}})}),values:new ue.ArrayVector(a.values.toArray().map((e=>Number.isFinite(e)||null==e?e:null)))});s===Ce.o0.Percent&&(n.config.unit="percentunit",n.display=(0,ue.getDisplayProcessor)({field:n,theme:t})),e.push(n)}else e.push(Object.assign({},a));a.push(Object.assign({},n,{fields:e}))}return{frames:a}}(null==e?void 0:e.series,i,t.stacking)),[e,i,t.stacking]),l=(0,q.useMemo)((()=>t.orientation&&t.orientation!==ue.VizOrientation.Auto?t.orientation:s<a?ue.VizOrientation.Horizontal:ue.VizOrientation.Vertical),[s,a,t.orientation]),c=(0,q.useMemo)((()=>t.stacking===Ce.o0.Normal||t.stacking===Ce.o0.Percent?Object.assign({},t.tooltip,{mode:Ce.f3.Multi}):t.tooltip),[t.tooltip,t.stacking]);return!r||o?(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsx)("p",{children:null!=o?o:"No data found in response"})}):(0,be.jsx)(go,Object.assign({frames:r,timeZone:n,timeRange:{from:1,to:1},structureRev:e.structureRev,width:s,height:a},t,{orientation:l,children:(e,t)=>(0,be.jsx)(ge.TooltipPlugin,{data:t,config:e,mode:c.mode,timeZone:n})}))})).useFieldConfig({standardOptions:{[ue.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:ue.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{const t=io;e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:t.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:t.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:ge.graphFieldOptions.fillGradient[0].value,settings:{options:ge.graphFieldOptions.fillGradient}}),ge.commonOptionsBuilder.addAxisConfig(e,t,!0),ge.commonOptionsBuilder.addHideFrom(e)}}).setPanelOptions((e=>{e.addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:ue.VizOrientation.Auto,label:"Auto"},{value:ue.VizOrientation.Horizontal,label:"Horizontal"},{value:ue.VizOrientation.Vertical,label:"Vertical"}]},defaultValue:ue.VizOrientation.Auto}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Ce.Jp.Auto,label:"Auto"},{value:Ce.Jp.Always,label:"Always"},{value:Ce.Jp.Never,label:"Never"}]},defaultValue:Ce.Jp.Auto}).addRadio({path:"stacking",name:"Stacking",settings:{options:ge.graphFieldOptions.stacking},defaultValue:Ce.o0.None}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:.7,settings:{min:0,max:1,step:.01},showIf:(e,t)=>(!e.stacking||e.stacking===Ce.o0.None)&&1!==function(e){let t=0;if(e)for(const s of e)for(const e of s.fields)e.type===ue.FieldType.number&&t++;return t}(t)}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:.97,settings:{min:0,max:1,step:.01}}),ge.commonOptionsBuilder.addTooltipOptions(e),ge.commonOptionsBuilder.addLegendOptions(e),ge.commonOptionsBuilder.addTextSizeOptions(e,!1)}));var fo,bo=s("./public/app/core/logs_model.ts");const vo=(e,t)=>s=>({container:me.css`
    margin-bottom: ${s.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${s.spacing(e?0:2.5)};
  `,labelContainer:me.css`
    margin: ${t?s.spacing(.5,0,.5,0):s.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:me.css`
    margin-right: ${s.spacing(.5)};
    font-size: ${s.typography.bodySmall.fontSize};
    font-weight: ${s.typography.fontWeightMedium};
  `}),xo=new ue.PanelPlugin((({data:e,timeZone:t,options:{showLabels:s,showTime:a,wrapLogMessage:n,showCommonLabels:i,prettifyLogMessage:r,sortOrder:o,dedupStrategy:l,enableLogDetails:c},title:d})=>{const u=o===ue.LogsSortOrder.Ascending,p=(0,ge.useStyles2)(vo(d,u)),[h,g]=(0,q.useState)(0),m=(0,q.useRef)(null),[f,b,v]=(0,q.useMemo)((()=>{var t,s;const a=e?(0,bo.aB)(e.series,null===(t=e.request)||void 0===t?void 0:t.intervalMs):null,n=(null==a?void 0:a.rows)||[],i=null==a||null===(s=a.meta)||void 0===s?void 0:s.find((e=>e.label===bo.Qp));return[n,(0,bo.UW)(n,l),i]}),[e,l]);(0,q.useLayoutEffect)((()=>{u&&m.current?g(m.current.offsetHeight):g(0)}),[u,f]);const x=(0,q.useCallback)(((t,s)=>(0,Te.a)({field:t,rowIndex:s,range:e.timeRange})),[e]);if(!e)return fo||(fo=(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsx)("p",{children:"No data found in response"})}));const y=()=>(0,be.jsxs)("div",{className:p.labelContainer,children:[(0,be.jsx)("span",{className:p.label,children:"Common labels:"}),(0,be.jsx)(ge.LogLabels,{labels:v?v.value:{labels:"(no common labels)"}})]});return(0,be.jsx)(ge.CustomScrollbar,{autoHide:!0,scrollTop:h,children:(0,be.jsxs)("div",{className:p.container,ref:m,children:[i&&!u&&y(),(0,be.jsx)(ge.LogRows,{logRows:f,deduplicatedRows:b,dedupStrategy:l,showLabels:s,showTime:a,wrapLogMessage:n,prettifyLogMessage:r,timeZone:t,getFieldLinks:x,logsSortOrder:o,enableLogDetails:c,previewLimit:u?f.length:void 0}),i&&u&&y()]})})})).setPanelOptions((e=>{e.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:ue.LogsDedupStrategy.none,label:"None",description:ue.LogsDedupDescription[ue.LogsDedupStrategy.none]},{value:ue.LogsDedupStrategy.exact,label:"Exact",description:ue.LogsDedupDescription[ue.LogsDedupStrategy.exact]},{value:ue.LogsDedupStrategy.numbers,label:"Numbers",description:ue.LogsDedupDescription[ue.LogsDedupStrategy.numbers]},{value:ue.LogsDedupStrategy.signature,label:"Signature",description:ue.LogsDedupDescription[ue.LogsDedupStrategy.signature]}]},defaultValue:ue.LogsDedupStrategy.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:ue.LogsSortOrder.Descending,label:"Descending"},{value:ue.LogsSortOrder.Ascending,label:"Ascending"}]},defaultValue:ue.LogsSortOrder.Descending})}));const yo="https://grafana.com/blog/news.xml",wo="https://cors-anywhere.herokuapp.com/";var jo,ko;class So extends q.PureComponent{constructor(e){super(e),this.state={}}componentDidMount(){this.loadChannel()}componentDidUpdate(e){this.props.options.feedUrl!==e.options.feedUrl&&this.loadChannel()}async loadChannel(){const{options:e}=this.props;try{const t=e.feedUrl?e.useProxy?`${wo}${e.feedUrl}`:e.feedUrl:yo,s=function(e){const t=new ue.ArrayVector([]),s=new ue.ArrayVector([]),a=new ue.ArrayVector([]),n=new ue.ArrayVector([]),i=new ue.ArrayVector([]);for(const r of e.items){const e=(0,ue.dateTime)(r.pubDate);try{if(t.buffer.push(e.valueOf()),s.buffer.push(r.title),a.buffer.push(r.link),i.buffer.push(r.ogImage),r.content){const e=r.content.replace(/<\/?[^>]+(>|$)/g,"");n.buffer.push(e)}}catch(e){console.warn("Error reading news item:",e,r)}}return{fields:[{name:"date",type:ue.FieldType.time,config:{displayName:"Date"},values:t},{name:"title",type:ue.FieldType.string,config:{},values:s},{name:"link",type:ue.FieldType.string,config:{},values:a},{name:"content",type:ue.FieldType.string,config:{},values:n},{name:"ogImage",type:ue.FieldType.string,config:{},values:i}],length:t.length}}(await async function(e){const t=await fetch(e),s=await t.text(),a=(new DOMParser).parseFromString(s,"text/xml"),n={items:[]},i=(e,t)=>{const s=e.querySelector(t);var a;return s&&null!==(a=s.textContent)&&void 0!==a?a:""};return a.querySelectorAll("item").forEach((e=>{const t={title:i(e,"title"),link:i(e,"link"),content:i(e,"description"),pubDate:i(e,"pubDate")},s=e.querySelector("meta[property='og:image']");s&&(t.ogImage=s.getAttribute("content")),n.items.push(t)})),n}(t));this.setState({news:new ue.DataFrameView(s),isError:!1})}catch(e){console.error("Error Loading News",e),this.setState({news:void 0,isError:!0})}}render(){const{width:e}=this.props,{showImage:t}=this.props.options,{isError:s,news:a}=this.state,n=Co(Z.ZP.theme2),i=e>600;return s?jo||(jo=(0,be.jsx)("div",{children:"Error Loading News"})):a?(0,be.jsx)(ge.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:a.map(((e,s)=>(0,be.jsxs)("article",{className:(0,me.cx)(n.item,i&&n.itemWide),children:[t&&e.ogImage&&(0,be.jsx)("a",{tabIndex:-1,href:ue.textUtil.sanitizeUrl(e.link),target:"_blank",rel:"noopener noreferrer",className:(0,me.cx)(n.socialImage,i&&n.socialImageWide),"aria-hidden":!0,children:(0,be.jsx)("img",{src:e.ogImage,alt:e.title})}),(0,be.jsxs)("div",{className:n.body,children:[(0,be.jsxs)("time",{className:n.date,dateTime:(0,ue.dateTimeFormat)(e.date,{format:"MMM DD"}),children:[(0,ue.dateTimeFormat)(e.date,{format:"MMM DD"})," "]}),(0,be.jsx)("a",{className:n.link,href:ue.textUtil.sanitizeUrl(e.link),target:"_blank",rel:"noopener noreferrer",children:(0,be.jsx)("h3",{className:n.title,children:e.title})}),(0,be.jsx)("div",{className:n.content,dangerouslySetInnerHTML:{__html:ue.textUtil.sanitize(e.content)}})]})]},s)))}):ko||(ko=(0,be.jsx)("div",{children:"loading..."}))}}const Co=(0,ge.stylesFactory)((e=>({container:me.css`
    height: 100%;
  `,item:me.css`
    display: flex;
    padding: ${e.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${e.spacing(1)};
    border-bottom: 2px solid ${e.colors.border.weak};
    background: ${e.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:me.css`
    flex-direction: row;
  `,body:me.css``,socialImage:me.css`
    display: flex;
    align-items: center;
    margin-bottom: ${e.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${e.shape.borderRadius(2)} ${e.shape.borderRadius(2)} 0 0;
    }
  `,socialImageWide:me.css`
    margin-right: ${e.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${e.shape.borderRadius()};
    }
  `,link:me.css`
    color: ${e.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${e.colors.text.link};
      text-decoration: underline;
    }
  `,title:me.css`
    max-width: calc(100% - 70px);
    font-size: 16px;
    margin-bottom: ${e.spacing(.5)};
  `,content:me.css`
    p {
      margin-bottom: 4px;
      color: ${e.colors.text};
    }
  `,date:me.css`
    margin-bottom: ${e.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 3px;
    color: ${e.colors.text.secondary};
  `}))),To=(Object.freeze([1,0]),{showImage:!0}),No=new ue.PanelPlugin(So).setPanelOptions((e=>{e.addTextInput({path:"feedUrl",name:"URL",description:"Only RSS feed formats are supported (not Atom).",settings:{placeholder:yo},defaultValue:To.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",showIf:e=>(0,I.isString)(e.feedUrl)&&!e.feedUrl.startsWith(wo),defaultValue:To.showImage}).addBooleanSwitch({path:"useProxy",name:"Use Proxy",description:"If the feed is unable to connect, consider a CORS proxy",showIf:e=>(0,I.isString)(e.feedUrl)&&!e.feedUrl.startsWith(wo),defaultValue:To.useProxy})}));var Oo,Io,Po,Mo,Fo=s("./public/app/features/live/live.ts");function Ao(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Do=[{label:"Grafana",value:ue.LiveChannelScope.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:ue.LiveChannelScope.DataSource,description:"Data sources with live support"},{label:"Plugins",value:ue.LiveChannelScope.Plugin,description:"Plugins with live support"}];class $o extends q.PureComponent{constructor(...e){super(...e),Ao(this,"state",{namespaces:[],paths:[]}),Ao(this,"onScopeChanged",(e=>{e.value&&this.props.onChange({scope:e.value,namespace:void 0,path:void 0})})),Ao(this,"onNamespaceChanged",(e=>{var t;const s={scope:null===(t=this.props.value)||void 0===t?void 0:t.scope,path:void 0};e.value&&(s.namespace=e.value),this.props.onChange(s)})),Ao(this,"onPathChanged",(e=>{const{value:t,onChange:s}=this.props,a={scope:t.scope,namespace:t.namespace};e.value&&(a.path=e.value),s(a)}))}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(e){this.props.value!==e.value&&this.updateSelectOptions()}async updateSelectOptions(){const{value:e}=this.props,{scope:t,namespace:s}=e,a=(0,Fo.Tm)(),n=await a.scopes[t].listNamespaces(),i=s?await a.scopes[t].getChannelSupport(s):void 0;this.setState({namespaces:n,support:i,paths:[]})}render(){var e;const{namespaces:t,paths:s}=this.state,{scope:a,namespace:n,path:i}=this.props.value,r=Eo(Z.vc.theme);return(0,be.jsxs)(be.Fragment,{children:[Oo||(Oo=(0,be.jsx)(ge.Alert,{title:"Grafana Live",severity:"info",children:"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."})),(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:r.dropWrap,children:[Io||(Io=(0,be.jsx)(ge.Label,{children:"Scope"})),(0,be.jsx)(ge.Select,{menuShouldPortal:!0,options:Do,value:Do.find((e=>e.value===a)),onChange:this.onScopeChanged})]}),a&&(0,be.jsxs)("div",{className:r.dropWrap,children:[Po||(Po=(0,be.jsx)(ge.Label,{children:"Namespace"})),(0,be.jsx)(ge.Select,{menuShouldPortal:!0,options:t,value:null!==(e=t.find((e=>e.value===n)))&&void 0!==e?e:n?{label:n,value:n}:void 0,onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})]}),a&&n&&(0,be.jsxs)("div",{className:r.dropWrap,children:[Mo||(Mo=(0,be.jsx)(ge.Label,{children:"Path"})),(0,be.jsx)(ge.Select,{menuShouldPortal:!0,options:s,value:Lo(s,i),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0})]})]})]})}}function Lo(e,t){const s=e.find((e=>e.value===t));return s||(t?{label:t,value:t}:void 0)}const Eo=(0,ge.stylesFactory)((e=>({dropWrap:me.css`
    margin-bottom: ${e.spacing.sm};
  `})));let Ro;var _o,Vo,Bo,zo,Uo;function qo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(e){e.Raw="raw",e.JSON="json",e.Auto="auto",e.None="none"}(Ro||(Ro={}));class Ho extends q.PureComponent{constructor(e){super(e),qo(this,"isValid",void 0),qo(this,"subscription",void 0),qo(this,"styles",Go(Se.config.theme)),qo(this,"streamObserver",{next:e=>{(0,ue.isLiveChannelStatusEvent)(e)?this.setState({status:e,changed:Date.now()}):(0,ue.isLiveChannelMessageEvent)(e)?this.setState({message:e.message,changed:Date.now()}):console.log("ignore",e)}}),qo(this,"unsubscribe",(()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)})),qo(this,"onSaveJSON",(e=>{const{options:t,onOptionsChange:s}=this.props;try{const a=JSON.parse(e);s(Object.assign({},t,{json:a}))}catch(e){console.log("Error reading JSON",e)}})),qo(this,"onPublishClicked",(async()=>{var e;const{addr:t}=this.state;if(!t)return void console.log("invalid address");const s=null===(e=this.props.options)||void 0===e?void 0:e.json;if(!s)return void console.log("nothing to publish");const a=await(0,Se.getGrafanaLiveSrv)().publish(t,s);console.log("onPublishClicked (response from publish)",a)})),this.isValid=!!(0,Se.getGrafanaLiveSrv)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(e){var t,s;(null===(t=this.props.options)||void 0===t?void 0:t.channel)!==(null===(s=e.options)||void 0===s?void 0:s.channel)&&this.loadChannel()}async loadChannel(){var e;const t=null===(e=this.props.options)||void 0===e?void 0:e.channel;if(!(0,ue.isValidLiveChannelAddress)(t))return console.log("INVALID",t),this.unsubscribe(),void this.setState({addr:void 0});if((0,I.isEqual)(t,this.state.addr))return void console.log("Same channel",this.state.addr);const s=(0,Se.getGrafanaLiveSrv)();if(!s)return console.log("INVALID",t),this.unsubscribe(),void this.setState({addr:void 0});this.unsubscribe(),console.log("LOAD",t);try{this.subscription=s.getStream(t).subscribe(this.streamObserver),this.setState({addr:t,error:void 0})}catch(e){this.setState({addr:void 0,error:e})}}renderNotEnabled(){return(0,be.jsxs)(ge.Alert,{title:"Grafana Live",severity:"info",children:[_o||(_o=(0,be.jsx)("p",{children:"Grafana live requires a feature flag to run"})),Vo||(Vo=(0,be.jsx)("b",{children:"custom.ini:"})),(0,be.jsx)("pre",{children:"[feature_toggles]\n    enable = live"})]})}renderMessage(e){const{options:t}=this.props,{message:s}=this.state;var a,n,i;if(!s)return(0,be.jsxs)("div",{children:[Bo||(Bo=(0,be.jsx)("h4",{children:"Waiting for data:"})),null===(a=t.channel)||void 0===a?void 0:a.scope,"/",null===(n=t.channel)||void 0===n?void 0:n.namespace,"/",null===(i=t.channel)||void 0===i?void 0:i.path]});if(t.message===Ro.JSON)return(0,be.jsx)(ge.JSONFormatter,{json:s,open:5});if(t.message===Ro.Auto&&s instanceof ue.StreamingDataFrame){const t={series:(0,ue.applyFieldOverrides)({data:[s],theme:Se.config.theme2,replaceVariables:e=>e,fieldConfig:{defaults:{},overrides:[]}}),state:ue.LoadingState.Streaming},a=Object.assign({},this.props,{options:{frameIndex:0,showHeader:!0}});return(0,be.jsx)(Fi,Object.assign({},a,{data:t,height:e}))}return(0,be.jsx)("pre",{children:JSON.stringify(s)})}renderPublish(e){const{options:t}=this.props;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ge.CodeEditor,{height:e-32,language:"json",value:t.json?JSON.stringify(t.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),(0,be.jsx)("div",{style:{height:32},children:(0,be.jsx)(ge.Button,{onClick:this.onPublishClicked,children:"Publish"})})]})}renderStatus(){const{status:e}=this.state;if((null==e?void 0:e.state)===ue.LiveChannelConnectionState.Connected)return;let t="";return e&&(t=this.styles.status[e.state]),(0,be.jsx)("div",{className:(0,me.cx)(t,this.styles.statusWrap),children:null==e?void 0:e.state})}renderBody(){const{status:e}=this.state,{options:t,height:s}=this.props;if(t.publish){if(t.message===Ro.None)return(0,be.jsx)("div",{children:this.renderPublish(s)});const e=s/2;return(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{style:{height:e,overflow:"hidden"},children:(0,be.jsx)(ge.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.renderMessage(e)})}),(0,be.jsx)("div",{children:this.renderPublish(e)})]})}return t.message===Ro.None?(0,be.jsx)("pre",{children:JSON.stringify(e)}):(0,be.jsx)("div",{style:{overflow:"hidden",height:s},children:(0,be.jsx)(ge.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.renderMessage(s)})})}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:e,error:t}=this.state;return e?t?(0,be.jsxs)("div",{children:[Uo||(Uo=(0,be.jsx)("h2",{children:"ERROR"})),(0,be.jsx)("div",{children:JSON.stringify(t)})]}):(0,be.jsxs)(be.Fragment,{children:[this.renderStatus(),this.renderBody()]}):zo||(zo=(0,be.jsx)(ge.Alert,{title:"Grafana Live",severity:"info",children:"Use the panel editor to pick a channel"}))}}const Go=(0,ge.stylesFactory)((e=>({statusWrap:me.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${e.colors.panelBg};
    padding: 10px;
    z-index: ${e.zIndex.modal};
  `,status:{[ue.LiveChannelConnectionState.Pending]:me.css`
      border: 1px solid ${e.palette.brandPrimary};
    `,[ue.LiveChannelConnectionState.Connected]:me.css`
      border: 1px solid ${e.palette.brandSuccess};
    `,[ue.LiveChannelConnectionState.Disconnected]:me.css`
      border: 1px solid ${e.palette.brandWarning};
    `,[ue.LiveChannelConnectionState.Shutdown]:me.css`
      border: 1px solid ${e.palette.brandDanger};
    `,[ue.LiveChannelConnectionState.Invalid]:me.css`
      border: 1px solid red;
    `}}))),Wo=new ue.PanelPlugin(Ho).setPanelOptions((e=>{e.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:$o,defaultValue:{}}),e.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Ro.Raw,label:"Raw Text"},{value:Ro.JSON,label:"JSON"},{value:Ro.Auto,label:"Auto"},{value:Ro.None,label:"None"}]},defaultValue:Ro.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})}));let Zo;function Qo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(e){e.Render="render",e.Events="events",e.Cursor="cursor"}(Zo||(Zo={}));let Ko=100;class Yo extends q.PureComponent{constructor(e){super(e),Qo(this,"history",new ue.CircularVector({capacity:40,append:"head"})),Qo(this,"subs",void 0),Qo(this,"eventObserver",{next:e=>{const t=e.origin;this.history.add({key:Ko++,type:e.type,path:null==t?void 0:t.path,payload:e.payload}),this.setState({counter:Ko})}}),this.state={counter:Ko};const t=[];t.push(e.eventBus.getStream(ue.DataHoverEvent).subscribe(this.eventObserver)),t.push(e.eventBus.getStream(ue.DataHoverClearEvent).subscribe(this.eventObserver)),t.push(e.eventBus.getStream(ue.DataSelectEvent).subscribe(this.eventObserver)),this.subs=t}componentWillUnmount(){for(const e of this.subs)e.unsubscribe()}render(){return(0,be.jsx)(ge.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.history.map(((e,t)=>(0,be.jsxs)("div",{children:[JSON.stringify(e.path)," ",e.type," / X:",JSON.stringify(e.payload.x)," / Y:",JSON.stringify(e.payload.y)]},e.key)))})}}var Jo;function Xo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class el extends q.Component{constructor(...e){super(...e),Xo(this,"lastRender",Date.now()),Xo(this,"counters",{render:0,dataChanged:0,schemaChanged:0}),Xo(this,"resetCounters",(()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}))}shouldComponentUpdate(e){const{data:t,options:s}=this.props;var a;if(e.data!==t&&(this.counters.dataChanged++,null!==(a=s.counters)&&void 0!==a&&a.schemaChanged)){var n;const s=null===(n=e.data)||void 0===n?void 0:n.series,a=t.series;if(a&&s){(0,ue.compareArrayValues)(a,s,ue.compareDataFrameStructures)||this.counters.schemaChanged++}}return!0}render(){var e;const{data:t,options:s}=this.props,a=null!==(e=s.counters)&&void 0!==e?e:{};this.counters.render++;const n=Date.now(),i=n-this.lastRender;this.lastRender=n;const r=ue.fieldReducers.get(ue.ReducerID.lastNotNull);return(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{children:[(0,be.jsx)(ge.IconButton,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),(0,be.jsxs)("span",{children:[a.render&&(0,be.jsxs)("span",{children:["Render: ",this.counters.render," "]}),a.dataChanged&&(0,be.jsxs)("span",{children:["Data: ",this.counters.dataChanged," "]}),a.schemaChanged&&(0,be.jsxs)("span",{children:["Schema: ",this.counters.schemaChanged," "]}),(0,be.jsxs)("span",{children:["TIME: ",i,"ms"]})]})]}),t.series&&t.series.map(((e,s)=>(0,be.jsxs)("div",{children:[(0,be.jsxs)("h4",{children:[(0,ue.getFrameDisplayName)(e,s)," (",e.length,")"]}),(0,be.jsxs)("table",{className:"filter-table",children:[Jo||(Jo=(0,be.jsx)("thead",{children:(0,be.jsxs)("tr",{children:[(0,be.jsx)("td",{children:"Field"}),(0,be.jsx)("td",{children:"Type"}),(0,be.jsx)("td",{children:"Last"})]})})),(0,be.jsx)("tbody",{children:e.fields.map(((s,a)=>{const n=r.reduce(s,!1,!1)[r.id];return(0,be.jsxs)("tr",{children:[(0,be.jsx)("td",{children:(0,ue.getFieldDisplayName)(s,e,t.series)}),(0,be.jsx)("td",{children:s.type}),(0,be.jsx)("td",{children:`${n}`})]},`${a}/${s.name}`)}))})]})]},`${s}/${e.refId}`)))]})}}var tl,sl=s("./public/app/plugins/panel/geomap/components/DataHoverView.tsx");function al(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class nl extends q.Component{constructor(...e){super(...e),al(this,"subscription",new Bn.w0),al(this,"state",{})}componentDidMount(){const{eventBus:e}=this.props;this.subscription.add(e.subscribe(ue.DataHoverEvent,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(ue.DataHoverClearEvent,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(ue.LegacyGraphHoverEvent,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(ue.LegacyGraphHoverClearEvent,(e=>{this.setState({event:e})})))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:e}=this.state;if(!e)return tl||(tl=(0,be.jsx)("div",{children:"no events yet"}));const{type:t,payload:s,origin:a}=e;return(0,be.jsxs)(ge.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:[(0,be.jsxs)("h3",{children:["Origin: ",null==a?void 0:a.path]}),(0,be.jsxs)("span",{children:["Type: ",t]}),(0,be.jsx)("pre",{children:JSON.stringify(s.point,null,"  ")}),s.data&&(0,be.jsx)(sl.H,{data:s.data,rowIndex:s.rowIndex,columnIndex:s.columnIndex})]})}}class il extends q.Component{render(){const{options:e}=this.props;return e.mode===Zo.Events?(0,be.jsx)(Yo,{eventBus:this.props.eventBus}):e.mode===Zo.Cursor?(0,be.jsx)(nl,{eventBus:this.props.eventBus}):(0,be.jsx)(el,Object.assign({},this.props))}}const rl=new ue.PanelPlugin(il).useFieldConfig().setPanelOptions((e=>{e.addRadio({path:"mode",name:"Mode",defaultValue:Zo.Render,settings:{options:[{label:"Render",value:Zo.Render},{label:"Events",value:Zo.Events},{label:"Cursor",value:Zo.Cursor}]}}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:e})=>e===Zo.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:e})=>e===Zo.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:e})=>e===Zo.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})})),ol=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],ll=(0,ge.stylesFactory)((e=>({container:me.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${e.spacing.lg};

      @media only screen and (max-width: ${e.breakpoints.lg}) {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      @media only screen and (max-width: ${e.breakpoints.sm}) {
        padding: 0 ${e.spacing.sm};
      }
    `,title:me.css`
      margin-bottom: 0;

      @media only screen and (max-width: ${e.breakpoints.lg}) {
        margin-bottom: ${e.spacing.sm};
      }

      @media only screen and (max-width: ${e.breakpoints.md}) {
        font-size: ${e.typography.heading.h2};
      }
      @media only screen and (max-width: ${e.breakpoints.sm}) {
        font-size: ${e.typography.heading.h3};
      }
    `,help:me.css`
      display: flex;
      align-items: baseline;
    `,helpText:me.css`
      margin-right: ${e.spacing.md};
      margin-bottom: 0;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        font-size: ${e.typography.heading.h4};
      }

      @media only screen and (max-width: ${e.breakpoints.sm}) {
        display: none;
      }
    `,helpLinks:me.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:me.css`
      margin-right: ${e.spacing.md};
      text-decoration: underline;
      text-wrap: no-wrap;

      @media only screen and (max-width: ${e.breakpoints.sm}) {
        margin-right: 8px;
      }
    `}))),cl=new ue.PanelPlugin((()=>{const e=ll((0,ge.useTheme)());return(0,be.jsxs)("div",{className:e.container,children:[(0,be.jsx)("h1",{className:e.title,children:"Welcome to Grafana"}),(0,be.jsxs)("div",{className:e.help,children:[(0,be.jsx)("h3",{className:e.helpText,children:"Need help?"}),(0,be.jsx)("div",{className:e.helpLinks,children:ol.map(((t,s)=>(0,be.jsx)("a",{className:e.helpLink,href:`${t.href}?utm_source=grafana_gettingstarted`,children:t.label},`${t.label}-${s}`)))})]})]})})).setNoPadding();var dl,ul=s("./public/app/plugins/panel/nodeGraph/NodeGraph.tsx");const pl=new ue.PanelPlugin((({width:e,height:t,data:s})=>{const a=(0,Te.u)(s.timeRange);return s&&s.series.length?(0,be.jsx)("div",{style:{width:e,height:t},children:(0,be.jsx)(ul.E,{dataFrames:s.series,getLinks:a})}):dl||(dl=(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsx)("p",{children:"No data found in response"})}))}));var hl=s("./packages/grafana-data/src/transformations/transformers/histogram.ts");function gl(e){return e.fields[1].values.get(0)-e.fields[0].values.get(0)}const ml=(e,t)=>{let s=new ge.UPlotConfigBuilder,a=gl(e);s.addScale({scaleKey:"x",isTime:!1,distribution:Ce.wf.Linear,orientation:Ce.wN.Horizontal,direction:Ce.bQ.Right,range:(e,t,s)=>{let n=e.data[0][0];var i,r;return s===e.data[0][e.data[0].length-1]?s+=a:(i=s,r=a,s=Math.ceil(i/r)*r),t>n&&(t=function(e,t){return Math.floor(e/t)*t}(t,a)),[t,s]}}),s.addScale({scaleKey:"y",isTime:!1,distribution:Ce.wf.Linear,orientation:Ce.wN.Vertical,direction:Ce.bQ.Up});const n=e.fields[0].display,i=e=>(0,ue.formattedValueToString)(n(e));s.addAxis({scaleKey:"x",isTime:!1,placement:Ce.LB.Bottom,incrs:hl.Zi,splits:(e,t,s,n,i,r)=>{let o=e.axes[t]._space,l=e.valToPos(e.data[0][0]+a,"x")-e.valToPos(e.data[0][0],"x"),c=e.data[0][0],d=e.data[0][e.data[0].length-1]+a,u=[],p=Math.ceil(o/l);for(let e=0,t=c;t<=d;e++,t+=a)!(e%p)&&u.push(t);return u},values:(e,t)=>t.map(i),theme:t}),s.addAxis({scaleKey:"y",isTime:!1,placement:Ce.LB.Left,theme:t}),s.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let r=Sa.Z.paths.bars({align:1,size:[1,1/0]}),o=0;for(let a=2;a<e.fields.length;a++){var l,c;const n=e.fields[a];n.state=null!==(l=n.state)&&void 0!==l?l:{},n.state.seriesIndex=o++;const i=Object.assign({},n.config.custom),d="y",u=(0,ue.getFieldColorModeForField)(n),p=(0,ue.getFieldSeriesColor)(n,t).color;s.addSeries({scaleKey:d,lineWidth:i.lineWidth,lineColor:p,fillOpacity:i.fillOpacity,theme:t,colorMode:u,pathBuilder:r,show:!(null!==(c=i.hideFrom)&&void 0!==c&&c.vis),gradientMode:i.gradientMode,thresholds:n.config.thresholds,hardMin:n.config.min,hardMax:n.config.max,softMin:i.axisSoftMin,softMax:i.axisSoftMax,dataFrameFieldIndex:{fieldIndex:a,frameIndex:0}})}return s},fl=e=>{let t=[];for(const s of e.fields)s.name!==hl.cO&&t.push(s.values.toArray());for(let e=1;e<t.length;e++){let s=t[e];for(let e=0;e<s.length;e++)0===s[e]&&(s[e]=null)}return t};class bl extends q.Component{constructor(e){super(e),this.state=this.prepState(e)}prepState(e,t=!0){let s=null;const{alignedFrame:a}=e;return a&&(s={alignedData:fl(a)},t&&(s.config=ml(a,this.props.theme))),s}renderLegend(e){const{legend:t}=this.props;return e&&t.displayMode!==Ce.jK.Hidden?(0,be.jsx)(ge.PlotLegend,Object.assign({data:[this.props.alignedFrame],config:e,maxHeight:"35%",maxWidth:"60%"},t)):null}componentDidUpdate(e){const{structureRev:t,alignedFrame:s,bucketSize:a}=this.props;if(s!==e.alignedFrame){let n=this.prepState(this.props,!1);if(n){(a!==e.bucketSize||this.props.options!==e.options||void 0===this.state.config||t!==e.structureRev||!t)&&(n.config=ml(s,this.props.theme))}n&&this.setState(n)}}render(){const{width:e,height:t,children:s,alignedFrame:a}=this.props,{config:n}=this.state;return n?(0,be.jsx)(ge.VizLayout,{width:e,height:t,legend:this.renderLegend(n),children:(e,t)=>(0,be.jsx)(ge.UPlotChart,{config:this.state.config,data:this.state.alignedData,width:e,height:t,timeRange:null,children:s?s(n,a):null})}):null}}var vl;Object.freeze([1,0]);const xl={bucketOffset:0,legend:{displayMode:Ce.jK.List,placement:"bottom",calcs:[]},tooltip:{mode:Ce.f3.Multi}},yl={lineWidth:1,fillOpacity:80};function wl(e){if(1!==(null==e?void 0:e.length))return!1;const t=e[0];if(t.fields.length<3)return!1;if(t.fields[0].name!==hl.wL||t.fields[1].name!==hl.cO)return!1;for(const e of t.fields)if(e.type!==ue.FieldType.number)return!1;return!0}const jl=new ue.PanelPlugin((({data:e,options:t,width:s,height:a})=>{const n=(0,ge.useTheme2)(),i=(0,q.useMemo)((()=>{var s;if(null==e||null===(s=e.series)||void 0===s||!s.length)return;if(1===e.series.length){const t=(0,ue.getHistogramFields)(e.series[0]);if(t)return(0,hl.zM)(t)}const a=(0,ue.buildHistogram)(e.series,t);return a?(0,hl.zM)(a,n):void 0}),[e.series,t,n]);if(!i||!i.fields.length)return vl||(vl=(0,be.jsx)("div",{className:"panel-empty",children:(0,be.jsx)("p",{children:"No histogram found in response"})}));const r=gl(i);return(0,be.jsx)(bl,{options:t,theme:n,legend:t.legend,structureRev:e.structureRev,width:s,height:a,alignedFrame:i,bucketSize:r,children:(e,t)=>null})})).setPanelOptions((e=>{e.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(e,t)=>wl(t)}).addNumberInput({path:"bucketSize",name:hl.py.bucketSize.name,description:hl.py.bucketSize.description,settings:{placeholder:"Auto"},defaultValue:xl.bucketSize,showIf:(e,t)=>!wl(t)}).addNumberInput({path:"bucketOffset",name:hl.py.bucketOffset.name,description:hl.py.bucketOffset.description,settings:{placeholder:"0"},defaultValue:xl.bucketOffset,showIf:(e,t)=>!wl(t)}).addBooleanSwitch({path:"combine",name:hl.py.combine.name,description:hl.py.combine.description,defaultValue:xl.combine,showIf:(e,t)=>!wl(t)}),ge.commonOptionsBuilder.addLegendOptions(e)})).useFieldConfig({standardOptions:{[ue.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:ue.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{const t=yl;e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:t.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:t.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:ge.graphFieldOptions.fillGradient[0].value,settings:{options:ge.graphFieldOptions.fillGradient}}),ge.commonOptionsBuilder.addHideFrom(e)}});var kl=s("./public/app/features/alerting/unified/utils/redux.ts"),Sl=s("./public/app/plugins/datasource/alertmanager/types.ts"),Cl=s("./public/app/features/alerting/unified/components/alert-groups/AlertGroupHeader.tsx"),Tl=s("./public/app/features/alerting/unified/components/CollapseToggle.tsx"),Nl=s("./public/app/features/alerting/unified/styles/notifications.ts"),Ol=s("./public/app/features/alerting/unified/utils/misc.ts"),Il=s("./public/app/features/alerting/unified/utils/matchers.ts");const Pl=({alertManagerSourceName:e,group:t,expandAll:s})=>{const[a,n]=(0,q.useState)(s),i=(0,ge.useStyles2)(Ml),r=(0,ge.useStyles2)(Nl.r);return(0,q.useEffect)((()=>n(s)),[s]),(0,be.jsxs)("div",{className:i.group,"data-testid":"alert-group",children:[Object.keys(t.labels).length>0?(0,be.jsx)(un.s,{labels:t.labels}):(0,be.jsx)("div",{className:i.noGroupingText,children:"No grouping"}),(0,be.jsxs)("div",{className:i.row,children:[(0,be.jsx)(Tl.U,{isCollapsed:!a,onToggle:()=>n(!a)})," ",(0,be.jsx)(Cl.Z,{group:t})]}),a&&(0,be.jsx)("div",{className:i.alerts,children:t.alerts.map(((t,s)=>{const a=t.status.state.toUpperCase(),n=(0,ue.intervalToAbbreviatedDurationString)({start:new Date(t.startsAt),end:Date.now()});return(0,be.jsxs)("div",{"data-testid":"alert-group-alert",className:i.alert,children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("span",{className:r[t.status.state],children:[a," "]}),"for ",n]}),(0,be.jsx)("div",{children:(0,be.jsx)(un.s,{labels:t.labels})}),(0,be.jsxs)("div",{className:i.actionsRow,children:[t.status.state===Sl.Z9.Suppressed&&(0,be.jsx)(ge.LinkButton,{href:`${(0,Ol.eQ)("/alerting/silences",e)}&silenceIds=${t.status.silencedBy.join(",")}`,className:i.button,icon:"bell",size:"sm",children:"Manage silences"}),t.status.state===Sl.Z9.Active&&(0,be.jsx)(ge.LinkButton,{href:`${(0,Ol.eQ)("/alerting/silence/new",e)}&${(0,Il.r)(t.labels)}`,className:i.button,icon:"bell-slash",size:"sm",children:"Silence"}),t.generatorURL&&(0,be.jsx)(ge.LinkButton,{className:i.button,href:t.generatorURL,icon:"chart-line",size:"sm",children:"See source"})]})]},`${t.fingerprint}-${s}`)}))})]})},Ml=e=>({noGroupingText:me.css`
    height: ${e.spacing(4)};
  `,group:me.css`
    background-color: ${e.colors.background.secondary};
    margin: ${e.spacing(.5,1,.5,1)};
    padding: ${e.spacing(1)};
  `,row:me.css`
    display: flex;
    flex-direction: row;
    align-items: center;
  `,alerts:me.css`
    margin: ${e.spacing(0,2,0,4)};
  `,alert:me.css`
    padding: ${e.spacing(1,0)};
    & + & {
      border-top: 1px solid ${e.colors.border.medium};
    }
  `,button:me.css`
    & + & {
      margin-left: ${e.spacing(1)};
    }
  `,actionsRow:me.css`
    padding: ${e.spacing(1,0)};
  `});var Fl=s("./public/app/features/alerting/unified/utils/alertmanager.ts");var Al=s("./public/app/features/alerting/unified/components/AlertManagerPicker.tsx");const Dl=new ue.PanelPlugin((e=>{var t;const s=(0,G.useDispatch)(),a=Se.config.unifiedAlertingEnabled,n=e.options.expandAll,i=e.options.alertmanager,r=((e,t)=>(0,q.useMemo)((()=>e.filter((e=>(0,Fl.eD)(e.labels,t)||e.alerts.some((e=>(0,Fl.eD)(e.labels,t)))))),[e,t]))((null===(t=((0,xn._)((e=>e.amAlertGroups))||kl.oq)[i||""])||void 0===t?void 0:t.result)||[],e.options.labels?(0,Fl.Zh)(e.options.labels):[]);(0,q.useEffect)((()=>{function e(){i&&s((0,vn.mS)(i))}e();const t=setInterval(e,wn.iF);return()=>{clearInterval(t)}}),[s,i]);const o=r.length>0;return(0,be.jsx)(ge.CustomScrollbar,{autoHeightMax:"100%",autoHeightMin:"100%",children:a&&(0,be.jsxs)("div",{children:[o&&r.map((e=>(0,be.jsx)(Pl,{alertManagerSourceName:i,group:e,expandAll:n},JSON.stringify(e.labels)))),!o&&"No alerts"]})})})).setPanelOptions((e=>e.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:yn.GC,category:["Options"],editor:function(e){return(0,be.jsx)(Al.P,{current:e.value,onChange:t=>e.onChange(t)})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}))),$l={"app/plugins/datasource/graphite/module":async()=>await Promise.all([s.e(5073),s.e(7494)]).then(s.bind(s,"./public/app/plugins/datasource/graphite/module.ts")),"app/plugins/datasource/cloudwatch/module":async()=>await s.e(8831).then(s.bind(s,"./public/app/plugins/datasource/cloudwatch/module.tsx")),"app/plugins/datasource/dashboard/module":async()=>await s.e(7472).then(s.bind(s,"./public/app/plugins/datasource/dashboard/module.ts")),"app/plugins/datasource/elasticsearch/module":async()=>await s.e(9897).then(s.bind(s,"./public/app/plugins/datasource/elasticsearch/module.ts")),"app/plugins/datasource/opentsdb/module":async()=>await s.e(3168).then(s.bind(s,"./public/app/plugins/datasource/opentsdb/module.ts")),"app/plugins/datasource/grafana/module":async()=>await s.e(7537).then(s.bind(s,"./public/app/plugins/datasource/grafana/module.ts")),"app/plugins/datasource/influxdb/module":async()=>await s.e(5783).then(s.bind(s,"./public/app/plugins/datasource/influxdb/module.ts")),"app/plugins/datasource/loki/module":async()=>await Promise.all([s.e(1056),s.e(159),s.e(5073),s.e(1598)]).then(s.bind(s,"./public/app/plugins/datasource/loki/module.ts")),"app/plugins/datasource/jaeger/module":async()=>await Promise.all([s.e(514),s.e(8420),s.e(890)]).then(s.bind(s,"./public/app/plugins/datasource/jaeger/module.ts")),"app/plugins/datasource/zipkin/module":async()=>await s.e(4023).then(s.bind(s,"./public/app/plugins/datasource/zipkin/module.ts")),"app/plugins/datasource/mixed/module":async()=>await s.e(2001).then(s.bind(s,"./public/app/plugins/datasource/mixed/module.ts")),"app/plugins/datasource/mysql/module":async()=>await s.e(4251).then(s.bind(s,"./public/app/plugins/datasource/mysql/module.ts")),"app/plugins/datasource/postgres/module":async()=>await s.e(534).then(s.bind(s,"./public/app/plugins/datasource/postgres/module.ts")),"app/plugins/datasource/mssql/module":async()=>await s.e(5032).then(s.bind(s,"./public/app/plugins/datasource/mssql/module.ts")),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([s.e(159),s.e(7004)]).then(s.bind(s,"./public/app/plugins/datasource/prometheus/module.ts")),"app/plugins/datasource/testdata/module":async()=>await s.e(319).then(s.bind(s,"./public/app/plugins/datasource/testdata/module.tsx")),"app/plugins/datasource/cloud-monitoring/module":async()=>await s.e(3549).then(s.bind(s,"./public/app/plugins/datasource/cloud-monitoring/module.ts")),"app/plugins/datasource/grafana-azure-monitor-datasource/module":async()=>await s.e(2364).then(s.bind(s,"./public/app/plugins/datasource/grafana-azure-monitor-datasource/module.ts")),"app/plugins/datasource/tempo/module":async()=>await Promise.all([s.e(389),s.e(4156)]).then(s.bind(s,"./public/app/plugins/datasource/tempo/module.ts")),"app/plugins/datasource/alertmanager/module":async()=>await s.e(6795).then(s.bind(s,"./public/app/plugins/datasource/alertmanager/module.ts")),"app/plugins/panel/text/module":n,"app/plugins/panel/timeseries/module":i,"app/plugins/panel/state-timeline/module":r,"app/plugins/panel/status-history/module":o,"app/plugins/panel/graph/module":l,"app/plugins/panel/xychart/module":c,"app/plugins/panel/geomap/module":async()=>await Promise.all([s.e(9646),s.e(8096)]).then(s.bind(s,"./public/app/plugins/panel/geomap/module.tsx")),"app/plugins/panel/canvas/module":async()=>await s.e(3330).then(s.bind(s,"./public/app/plugins/panel/canvas/module.tsx")),"app/plugins/panel/dashlist/module":d,"app/plugins/panel/pluginlist/module":u,"app/plugins/panel/alertlist/module":p,"app/plugins/panel/annolist/module":h,"app/plugins/panel/heatmap/module":g,"app/plugins/panel/table/module":m,"app/plugins/panel/table-old/module":f,"app/plugins/panel/news/module":j,"app/plugins/panel/live/module":k,"app/plugins/panel/stat/module":sr,"app/plugins/panel/debug/module":S,"app/plugins/panel/gettingstarted/module":b,"app/plugins/panel/gauge/module":Nr,"app/plugins/panel/piechart/module":v,"app/plugins/panel/bargauge/module":x,"app/plugins/panel/barchart/module":y,"app/plugins/panel/logs/module":w,"app/plugins/panel/welcome/module":C,"app/plugins/panel/nodeGraph/module":T,"app/plugins/panel/histogram/module":N,"app/plugins/panel/alertGroups/module":O};var Ll=s("./node_modules/rxjs/dist/esm5/index.js"),El=s("./node_modules/rxjs/dist/esm5/operators/index.js"),Rl=s("./node_modules/react-router-dom/esm/react-router-dom.js"),_l=(s("./public/vendor/flot/jquery.flot.gauge.js"),s("./public/app/features/dashboard/dashgrid/PanelPluginError.tsx"));const Vl=ge;Vl.PanelPlugin=ue.PanelPlugin,Vl.DataSourcePlugin=ue.DataSourcePlugin,Vl.AppPlugin=ue.AppPlugin,Vl.DataSourceApi=ue.DataSourceApi;const Bl=`?_cache=${Date.now()}`;function zl(e,t){Se.SystemJS.registerDynamic(e,[],!0,((e,s,a)=>{a.exports=t}))}Se.SystemJS.registry.set("plugin-loader",Se.SystemJS.newModule({locate:function(e){return e.address+Bl}})),Se.SystemJS.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js",css:"vendor/plugin-css/css.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"}}}),zl("@grafana/data",ue),zl("@grafana/ui",Vl),zl("@grafana/runtime",Se),zl("lodash",P()),zl("moment",D()),zl("jquery",R()),zl("angular",L()),zl("d3",os),zl("rxjs",Ll),zl("rxjs/operators",El),zl("react-router-dom",Rl),zl("prismjs",V()),zl("slate",B.ZP),zl("@grafana/slate-react",z.ZP),zl("slate-plain-serializer",U.Z),zl("react",q),zl("react-dom",H),zl("react-redux",G),zl("redux",W),zl("emotion",me),zl("@emotion/css",me),zl("app/features/dashboard/impression_store",{impressions:de.Z,__esModule:!0}),zl("app/core/services/backend_srv",{BackendSrv:le.y$,getBackendSrv:le.i}),zl("app/plugins/sdk",M),zl("app/core/utils/datemath",ue.dateMath),zl("app/core/utils/flatten",J),zl("app/core/utils/kbn",F.Z),zl("app/core/utils/ticks",a),zl("app/core/utils/promiseToDigest",{promiseToDigest:ce.E,__esModule:!0}),zl("app/core/config",Z.ZP),zl("app/core/time_series",Q.Z),zl("app/core/time_series2",Q.Z),zl("app/core/table_model",K.Z),zl("app/core/app_events",Y.h$),zl("app/core/core_module",Y.hF),zl("app/core/core",{coreModule:Y.hF,appEvents:Y.h$,contextSrv:Y.Vt,__esModule:!0});const Ul=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const e of Ul)zl(e,{fakeDep:1});async function ql(e){const t=$l[e];return t?"function"==typeof t?await t():Promise.resolve(t):Se.SystemJS.import(e)}function Hl(e){return ql(e.module).then((t=>{if(t.plugin){const s=t.plugin;return s.meta=e,s}if(t.Datasource){const s=new ue.DataSourcePlugin(t.Datasource);return s.setComponentsFromLegacyExports(t),s.meta=e,s}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")}))}function Gl(e){return ql(e.module).then((t=>{const s=t.plugin?t.plugin:new ue.AppPlugin;return s.init(e),s.meta=e,s.setComponentsFromLegacyExports(t),s}))}const Wl={};function Zl(e){const t=Wl[e];if(t)return t;const s=Z.ZP.panels[e];if(!s)throw new Error(`Plugin ${e} not found`);return Wl[e]=Kl(s),Wl[e]}function Ql(e){return Kl(e)}function Kl(e){return ql(e.module).then((e=>{if(e.plugin)return e.plugin;if(e.PanelCtrl){const t=new ue.PanelPlugin(null);return t.angularPanelCtrl=e.PanelCtrl,t}throw new Error("missing export: plugin or PanelCtrl")})).then((t=>(t.meta=e,t))).catch((t=>(console.warn("Error loading panel plugin: "+e.id,t),(0,_l.F)(e,t))))}},"./public/app/features/plugins/state/actions.ts":(e,t,s)=>{"use strict";s.d(t,{bl:()=>l,ne:()=>c,m3:()=>d,Ro:()=>u});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./public/app/core/config.ts"),i=s("./public/app/features/plugins/plugin_loader.ts"),r=s("./public/app/features/plugins/admin/state/actions.ts"),o=s("./public/app/features/plugins/state/reducers.ts");function l(){return async e=>{const t=await(0,a.getBackendSrv)().get("api/plugins",{embedded:0});e((0,o.Wg)(t))}}function c(){return async e=>{const t=await(0,a.getBackendSrv)().get("api/plugins/errors");e((0,o.ty)(t))}}const d=n.vc.pluginAdminEnabled?r.m3:function(){return async(e,t)=>{e((0,o.QT)());const s=t().dataSources.dataSource.type,n=await(0,a.getBackendSrv)().get(`api/plugins/${s}/dashboards`);e((0,o.Uu)(n))}},u=n.vc.pluginAdminEnabled?r.Ro:function(e){return async(t,s)=>{let a=s().plugins.panels[e];return a||(a=await(0,i.Ub)(e),s().plugins.panels[e]||t((0,o.LP)(a))),a}}},"./public/app/features/plugins/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{Wg:()=>o,ty:()=>l,QT:()=>c,Uu:()=>d,x6:()=>u,LP:()=>p,ZP:()=>h});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./public/app/core/config.ts"),i=s("./public/app/features/plugins/admin/state/reducer.ts");const r=(0,a.oM)({name:"plugins",initialState:{plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},reducers:{pluginsLoaded:(e,t)=>{e.hasFetched=!0,e.plugins=t.payload},pluginsErrorsLoaded:(e,t)=>{e.errors=t.payload},setPluginsSearchQuery:(e,t)=>{e.searchQuery=t.payload},pluginDashboardsLoad:(e,t)=>{e.isLoadingPluginDashboards=!0,e.dashboards=[]},pluginDashboardsLoaded:(e,t)=>{e.isLoadingPluginDashboards=!1,e.dashboards=t.payload},panelPluginLoaded:(e,t)=>{e.panels[t.payload.meta.id]=t.payload}}}),{pluginsLoaded:o,pluginsErrorsLoaded:l,pluginDashboardsLoad:c,pluginDashboardsLoaded:d,setPluginsSearchQuery:u,panelPluginLoaded:p}=r.actions,h={plugins:n.vc.pluginAdminEnabled?i.I6:r.reducer}},"./public/app/features/plugins/wrappers/AppConfigWrapper.tsx":(e,t,s)=>{"use strict";s.d(t,{C:()=>h});var a,n,i=s("./node_modules/react/index.js"),r=s("./node_modules/lodash/lodash.js"),o=s("./packages/grafana-ui/src/index.ts"),l=s("./packages/grafana-data/src/index.ts"),c=s("./packages/grafana-runtime/src/index.ts"),d=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),u=s("./node_modules/react/jsx-runtime.js");function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class h extends i.PureComponent{constructor(e){super(e),p(this,"element",null),p(this,"model",void 0),p(this,"preUpdateHook",(()=>Promise.resolve())),p(this,"postUpdateHook",(()=>Promise.resolve())),p(this,"update",(()=>{const e=this.model.id;this.preUpdateHook().then((()=>{const t=(0,r.extend)({enabled:this.model.enabled,pinned:this.model.pinned,jsonData:this.model.jsonData,secureJsonData:this.model.secureJsonData},{});return(0,c.getBackendSrv)().post(`/api/plugins/${e}/settings`,t)})).then(this.postUpdateHook).then((e=>{window.location.href=window.location.href}))})),p(this,"setPreUpdateHook",(e=>{this.preUpdateHook=e})),p(this,"setPostUpdateHook",(e=>{this.postUpdateHook=e})),p(this,"importDashboards",(()=>((0,l.deprecationWarning)("AppConfig","importDashboards()"),Promise.resolve()))),p(this,"enable",(()=>{this.model.enabled=!0,this.model.pinned=!0,this.update()})),p(this,"disable",(()=>{this.model.enabled=!1,this.model.pinned=!1,this.update()})),this.state={angularCtrl:null,refresh:0}}componentDidMount(){setTimeout((()=>{this.setState({refresh:this.state.refresh+1})}),5)}componentDidUpdate(e){if(!this.element||this.state.angularCtrl)return;this.model=(0,r.cloneDeep)(this.props.app.meta);const t={ctrl:this,isAppConfigCtrl:!0},s=(0,c.getAngularLoader)().load(this.element,t,'<plugin-component type="app-config-ctrl"></plugin-component>');this.setState({angularCtrl:s})}render(){const e=this.model,t=(0,d.css)({marginRight:"8px"});return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{ref:e=>this.element=e}),a||(a=(0,u.jsx)("br",{})),n||(n=(0,u.jsx)("br",{})),e&&(0,u.jsxs)("div",{className:"gf-form",children:[!e.enabled&&(0,u.jsx)(o.Button,{variant:"primary",onClick:this.enable,className:t,children:"Enable"}),e.enabled&&(0,u.jsx)(o.Button,{variant:"primary",onClick:this.update,className:t,children:"Update"}),e.enabled&&(0,u.jsx)(o.Button,{variant:"destructive",onClick:this.disable,className:t,children:"Disable"})]})]})}}},"./public/app/features/profile/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{rf:()=>d,YT:()=>u,zc:()=>p,$S:()=>h,Ns:()=>g,qD:()=>m,PL:()=>f,aw:()=>b,p$:()=>v,Uk:()=>x,z0:()=>y,ZP:()=>k});var a=s("./node_modules/lodash/lodash.js"),n=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),i=s("./packages/grafana-data/src/index.ts"),r=s("./public/app/core/config.ts"),o=s("./public/app/core/core.ts");const l={orgId:r.ZP.bootData.user.orgId,timeZone:r.ZP.bootData.user.timezone,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},c=(0,n.oM)({name:"user/profile",initialState:l,reducers:{updateTimeZone:(e,t)=>{e.timeZone=t.payload.timeZone},updateFiscalYearStartMonth:(e,t)=>{e.fiscalYearStartMonth=t.payload.fiscalYearStartMonth},setUpdating:(e,t)=>{e.isUpdating=t.payload.updating},userLoaded:(e,t)=>{e.user=t.payload.user},initLoadTeams:(e,t)=>{e.teamsAreLoading=!0},teamsLoaded:(e,t)=>{e.teams=t.payload.teams,e.teamsAreLoading=!1},initLoadOrgs:(e,t)=>{e.orgsAreLoading=!0},orgsLoaded:(e,t)=>{e.orgs=t.payload.orgs,e.orgsAreLoading=!1},initLoadSessions:(e,t)=>{e.sessionsAreLoading=!0},sessionsLoaded:(e,t)=>{const s=t.payload.sessions.sort(((e,t)=>Number(t.isActive)-Number(e.isActive)));e.sessions=s.map((e=>({id:e.id,isActive:e.isActive,seenAt:(0,i.dateTimeFormatTimeAgo)(e.seenAt),createdAt:(0,i.dateTimeFormat)(e.createdAt,{format:"MMMM DD, YYYY"}),clientIp:e.clientIp,browser:e.browser,browserVersion:e.browserVersion,os:e.os,osVersion:e.osVersion,device:e.device}))),e.sessionsAreLoading=!1},userSessionRevoked:(e,t)=>{e.sessions=e.sessions.filter((e=>e.id!==t.payload.tokenId)),e.isUpdating=!1}}}),d=e=>async t=>{(0,a.set)(o.Vt,"user.fiscalYearStartMonth",e),t(j({fiscalYearStartMonth:e}))},u=e=>async t=>{var s,n;(0,a.isString)(e)&&!(0,a.isEmpty)(e)||(e=null===r.ZP||void 0===r.ZP||null===(s=r.ZP.bootData)||void 0===s||null===(n=s.user)||void 0===n?void 0:n.timezone);(0,a.set)(o.Vt,"user.timezone",e),t(w({timeZone:e}))},{setUpdating:p,initLoadOrgs:h,orgsLoaded:g,initLoadTeams:m,teamsLoaded:f,userLoaded:b,userSessionRevoked:v,initLoadSessions:x,sessionsLoaded:y,updateTimeZone:w,updateFiscalYearStartMonth:j}=c.actions,k=(c.reducer,{user:c.reducer})},"./public/app/features/profile/state/selectors.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a,i:()=>n});const a=e=>e.timeZone,n=e=>e.fiscalYearStartMonth},"./public/app/features/query/components/QueryEditorRow.tsx":(e,t,s)=>{"use strict";s.d(t,{x:()=>S,t:()=>C});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s.n(n),r=s("./node_modules/lodash/lodash.js"),o=s("./public/app/features/plugins/datasource_srv.ts"),l=s("./packages/grafana-runtime/src/index.ts"),c=s("./public/app/features/dashboard/services/TimeSrv.ts"),d=s("./packages/grafana-ui/src/index.ts"),u=s("./packages/grafana-data/src/index.ts"),p=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),h=s("./packages/grafana-e2e-selectors/src/index.ts"),g=s("./node_modules/react/jsx-runtime.js");const m=e=>{const{query:t,queries:s,onClick:n,onChange:i,collapsedText:r,renderExtras:o,disabled:l}=e,c=(0,d.useStyles)(b),[u,p]=(0,a.useState)(!1),[m,v]=(0,a.useState)(null),x=e=>{p(!1),m?v(null):t.refId!==e&&i(Object.assign({},t,{refId:e}))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:c.wrapper,children:[!u&&(0,g.jsxs)("button",{className:c.queryNameWrapper,"aria-label":h.wl.components.QueryEditorRow.title(t.refId),title:"Edit query name",onClick:e=>{p(!0)},"data-testid":"query-name-div",children:[(0,g.jsx)("span",{className:c.queryName,children:t.refId}),(0,g.jsx)(d.Icon,{name:"pen",className:c.queryEditIcon,size:"sm"})]}),u&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Input,{type:"text",defaultValue:t.refId,onBlur:e=>{x(e.currentTarget.value.trim())},autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&x(e.target.value)},onFocus:e=>{e.target.select()},invalid:null!==m,onChange:e=>{const a=e.currentTarget.value.trim();if(0!==a.length){for(const e of s)if(e!==t&&a===e.refId)return void v("Query name already exists");m&&v(null)}else v("An empty query name is not allowed")},className:c.queryNameInput,"data-testid":"query-name-input"}),m&&(0,g.jsx)(d.FieldValidationMessage,{horizontal:!0,children:m})]}),f(e,c),o&&(0,g.jsx)("div",{className:c.itemWrapper,children:o()}),l&&(0,g.jsx)("em",{className:c.contextInfo,children:"Disabled"})]}),r&&(0,g.jsx)("div",{className:c.collapsedText,onClick:n,children:r})]})},f=(e,t)=>{const{dataSource:s,onChangeDataSource:a}=e;return a?(0,g.jsx)("div",{className:t.itemWrapper,children:(0,g.jsx)(l.DataSourcePicker,{current:s.name,onChange:a})}):(0,g.jsxs)("em",{className:t.contextInfo,children:["(",s.name,")"]})},b=e=>({wrapper:p.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${e.spacing.xs};
    `,queryNameWrapper:p.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${e.border.radius.md};
      align-items: center;
      padding: 0 0 0 ${e.spacing.xs};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${e.colors.bg3};
        border: 1px dashed ${e.colors.border3};
      }

      &:focus {
        border: 2px solid ${e.colors.formInputBorderActive};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:p.css`
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.textBlue};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${e.spacing.xs};
    `,queryEditIcon:(0,p.cx)(p.css`
        margin-left: ${e.spacing.md};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:p.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:p.css`
      font-weight: ${e.typography.weight.regular};
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      padding-left: ${e.spacing.sm};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:p.css`
      font-size: ${e.typography.size.sm};
      font-style: italic;
      color: ${e.colors.textWeak};
      padding-left: 10px;
    `,itemWrapper:p.css`
      display: flex;
      margin-left: 4px;
    `});var v,x=s("./public/app/core/components/QueryOperationRow/QueryOperationRow.tsx"),y=s("./public/app/core/components/QueryOperationRow/QueryOperationAction.tsx"),w=s("./public/app/features/dashboard/state/PanelModel.ts"),j=s("./public/app/core/components/QueryOperationRow/OperationRowHelp.tsx");function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class S extends a.PureComponent{constructor(...e){super(...e),k(this,"element",null),k(this,"angularScope",null),k(this,"angularQueryEditor",null),k(this,"state",{datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1}),k(this,"renderAngularQueryEditor",(()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const e=(0,l.getAngularLoader)(),t={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=e.load(this.element,t,'<plugin-component type="query-ctrl" />'),this.angularScope=t.ctrl})),k(this,"onOpen",(()=>{this.renderAngularQueryEditor()})),k(this,"renderPluginEditor",(()=>{var e;const{query:t,onChange:s,queries:a,onRunQuery:n,app:i=u.CoreApp.Dashboard,history:r}=this.props,{datasource:o,data:l}=this.state;if(null!=o&&null!==(e=o.components)&&void 0!==e&&e.QueryCtrl)return(0,g.jsx)("div",{ref:e=>this.element=e});if(o){let e=this.getReactQueryEditor(o);if(e)return(0,g.jsx)(e,{query:t,datasource:o,onChange:s,onRunQuery:n,data:l,range:(0,c.$t)().timeRange(),queries:a,app:i,history:r},null==o?void 0:o.name)}return v||(v=(0,g.jsx)("div",{children:"Data source plugin does not export any Query Editor component"}))})),k(this,"onToggleEditMode",((e,t)=>{var s;(e.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode)&&(this.angularScope.toggleEditorMode(),null===(s=this.angularQueryEditor)||void 0===s||s.digest(),t.isOpen||t.onOpen())})),k(this,"onRemoveQuery",(()=>{this.props.onRemoveQuery(this.props.query)})),k(this,"onCopyQuery",(()=>{const e=(0,r.cloneDeep)(this.props.query);this.props.onAddQuery(e)})),k(this,"onDisableQuery",(()=>{const{query:e}=this.props;this.props.onChange(Object.assign({},e,{hide:!e.hide})),this.props.onRunQuery()})),k(this,"onToggleHelp",(()=>{this.setState((e=>({showingHelp:!e.showingHelp})))})),k(this,"onClickExample",(e=>{this.props.onChange(Object.assign({},e,{refId:this.props.query.refId})),this.onToggleHelp()})),k(this,"renderActions",(e=>{var t;const{query:s,hideDisableQuery:a=!1}=this.props,{hasTextEditMode:n,datasource:i,showingHelp:r}=this.state,o=s.hide,l=null==i||null===(t=i.components)||void 0===t?void 0:t.QueryEditorHelp;return(0,g.jsxs)(d.HorizontalGroup,{width:"auto",children:[l&&(0,g.jsx)(y.y,{title:"Toggle data source help",icon:"question-circle",onClick:this.onToggleHelp,active:r}),n&&(0,g.jsx)(y.y,{title:"Toggle text edit mode",icon:"pen",onClick:t=>{this.onToggleEditMode(t,e)}}),(0,g.jsx)(y.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),a?null:(0,g.jsx)(y.y,{title:"Disable/enable query",icon:o?"eye-slash":"eye",active:o,onClick:this.onDisableQuery}),(0,g.jsx)(y.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery})]})})),k(this,"renderHeader",(e=>{const{query:t,dataSource:s,onChangeDataSource:a,onChange:n,queries:i,renderHeaderExtras:r}=this.props;return(0,g.jsx)(m,{query:t,queries:i,onChangeDataSource:a,dataSource:s,disabled:t.hide,onClick:t=>this.onToggleEditMode(t,e),onChange:n,collapsedText:e.isOpen?null:this.renderCollapsedText(),renderExtras:r})}))}componentDidMount(){this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:e,queries:t}=this.props,{datasource:s}=this.state,a=new w.r({targets:t}),n=this;return{datasource:s,target:e,panel:a,dashboard:{},refresh:()=>{e.hide!==n.props.query.hide&&(e.hide=n.props.query.hide),this.props.onChange(e),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new u.EventBusSrv,range:(0,c.$t)().timeRange()}}getQueryDataSourceIdentifier(){var e;const{query:t,dataSource:s}=this.props;return null!==(e=t.datasource)&&void 0!==e?e:s.name}async loadDatasource(){const e=(0,o.ak)();let t;const s=this.getQueryDataSourceIdentifier();try{t=await e.get(s)}catch(s){t=await e.get()}this.setState({datasource:t,loadedDataSourceIdentifier:s,hasTextEditMode:(0,r.has)(t,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(e){const{datasource:t,loadedDataSourceIdentifier:s}=this.state,{data:a,query:n}=this.props;if(a!==e.data){const e=C(a,n.refId);this.setState({data:e}),this.angularScope&&(this.angularScope.range=(0,c.$t)().timeRange()),this.angularQueryEditor&&e&&function(e,t,s){if(t.state===u.LoadingState.Done){const s=t.series.map((e=>(0,u.toLegacyResponseData)(e)));e.events.emit(u.PanelEvents.dataReceived,s)}else t.state===u.LoadingState.Error&&e.events.emit(u.PanelEvents.dataError,t.error);setTimeout(s.digest)}(this.angularScope,e,this.angularQueryEditor)}if(t&&s!==this.getQueryDataSourceIdentifier())return this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),void this.loadDatasource();this.element&&!this.angularQueryEditor&&this.renderAngularQueryEditor()}getReactQueryEditor(e){var t,s,a,n,i;if(e)switch(this.props.app){case u.CoreApp.Explore:return(null===(t=e.components)||void 0===t?void 0:t.ExploreMetricsQueryField)||(null===(s=e.components)||void 0===s?void 0:s.ExploreLogsQueryField)||(null===(a=e.components)||void 0===a?void 0:a.ExploreQueryField)||(null===(n=e.components)||void 0===n?void 0:n.QueryEditor);case u.CoreApp.Dashboard:default:return null===(i=e.components)||void 0===i?void 0:i.QueryEditor}}renderCollapsedText(){const{datasource:e}=this.state;return null!=e&&e.getQueryDisplayText?e.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){var e;const{query:t,id:s,index:a,visualization:n}=this.props,{datasource:r,showingHelp:o}=this.state,l=t.hide,c=i()("query-editor-row",{"query-editor-row--disabled":l,"gf-form-disabled":l});if(!r)return null;const u=this.renderPluginEditor(),p=null===(e=r.components)||void 0===e?void 0:e.QueryEditorHelp;return(0,g.jsx)("div",{"aria-label":h.wl.components.QueryEditorRows.rows,children:(0,g.jsx)(x.t,{id:s,draggable:!0,index:a,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen,children:(0,g.jsxs)("div",{className:c,children:[(0,g.jsxs)(d.ErrorBoundaryAlert,{children:[o&&p&&(0,g.jsx)(j.h,{children:(0,g.jsx)(p,{onClickExample:e=>this.onClickExample(e),datasource:r})}),u]}),n]})})})}}function C(e,t){const s=e.series.filter((e=>e.refId===t));if(!s.length)return e.error&&!e.series.length?Object.assign({},e,{state:u.LoadingState.Error}):void 0;let a=u.LoadingState.Done;const n=e.error&&e.error.refId===t?e.error:void 0;n&&(a=u.LoadingState.Error);const i=e.timeRange;return Object.assign({},e,{state:a,series:s,error:n,timeRange:i})}},"./public/app/features/query/state/DashboardQueryRunner/DashboardQueryRunner.ts":(e,t,s)=>{"use strict";s.d(t,{Tl:()=>E,kt:()=>L});var a=s("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),n=s("./node_modules/rxjs/dist/esm5/internal/Subject.js"),i=s("./node_modules/rxjs/dist/esm5/internal/Subscription.js"),r=s("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),o=s("./node_modules/rxjs/dist/esm5/internal/observable/timer.js"),l=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),c=s("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),d=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js"),u=s("./node_modules/rxjs/dist/esm5/internal/operators/reduce.js"),p=s("./node_modules/rxjs/dist/esm5/internal/operators/finalize.js"),h=s("./node_modules/rxjs/dist/esm5/internal/operators/share.js"),g=s("./node_modules/rxjs/dist/esm5/internal/operators/mapTo.js"),m=s("./public/app/features/annotations/events_processing.ts"),f=s("./node_modules/rxjs/dist/esm5/internal/observable/from.js"),b=s("./packages/grafana-runtime/src/index.ts"),v=s("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),x=s("./public/app/features/query/state/DashboardQueryRunner/utils.ts");class y{canWork({dashboard:e,range:t}){return!!e.id&&"now"===t.raw.to}work(e){if(!this.canWork(e))return(0,x.H_)();const{dashboard:t}=e;return(0,f.Dp)((0,b.getBackendSrv)().get("/api/alerts/states-for-dashboard",{dashboardId:t.id},`dashboard-query-runner-alert-states-${t.id}`)).pipe((0,l.U)((e=>({alertStates:e,annotations:[]}))),(0,v.K)(x.Rc))}}var w=s("./public/app/features/query/state/DashboardQueryRunner/SnapshotWorker.ts"),j=s("./node_modules/lodash/lodash.js"),k=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),S=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),C=s("./node_modules/rxjs/dist/esm5/internal/operators/filter.js");class T{canRun(e){return!!e&&Boolean(e.annotationQuery&&!e.annotations)}run({annotation:e,datasource:t,dashboard:s,range:a}){return this.canRun(t)?(0,f.Dp)(t.annotationQuery({range:a,rangeRaw:a.raw,annotation:e,dashboard:s})).pipe((0,v.K)(x.h1)):(0,k.of)([])}}var N=s("./public/app/features/annotations/annotations_srv.ts");class O{canRun(e){return!!e&&!Boolean(e.annotationQuery&&!e.annotations)}run({annotation:e,datasource:t,dashboard:s,range:a}){if(!this.canRun(t))return(0,k.of)([]);return(0,N.r)({dashboard:s,range:a,panel:{}},t,e).pipe((0,l.U)((e=>{var t;return null!==(t=e.events)&&void 0!==t?t:[]})),(0,v.K)(x.h1))}}var I=s("./public/app/types/events.ts");class P{constructor(e=[new T,new O]){this.runners=e}canWork({dashboard:e}){const t=e.annotations.list.find(P.getAnnotationsToProcessFilter);return Boolean(t)}work(e){if(!this.canWork(e))return(0,x.H_)();const{dashboard:t,range:s}=e,a=t.annotations.list.filter(P.getAnnotationsToProcessFilter).map((e=>(0,f.Dp)((0,b.getDataSourceSrv)().get(e.datasource)).pipe((0,v.K)(x.hs)).pipe((0,S.z)((a=>{const n=this.runners.find((e=>e.canRun(a)));return n?(t.events.publish(new I.z(e)),n.run({annotation:e,datasource:a,dashboard:t,range:s}).pipe((0,c.R)(L().cancellations().pipe((0,C.h)((t=>t===e)))),(0,l.U)((s=>(t.snapshot&&(e.snapshotData=(0,j.cloneDeep)(s)),(0,x.pG)(e,s)))),(0,p.x)((()=>{t.events.publish(new I.RB(e))})))):(0,k.of)([])})))));return(0,r.T)(a).pipe((0,d.J)(),(0,u.u)(((e,t)=>e.concat(t))),(0,l.U)((e=>({annotations:e,alertStates:[]}))))}static getAnnotationsToProcessFilter(e){return e.enable&&!Boolean(e.snapshotData)}}var M=s("./public/app/features/dashboard/services/TimeSrv.ts");function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class A{constructor(e,t=(0,M.$t)(),s=[new y,new w.g,new P]){F(this,"results",void 0),F(this,"runs",void 0),F(this,"cancellationStream",void 0),F(this,"runsSubscription",void 0),F(this,"eventsSubscription",void 0),this.dashboard=e,this.timeSrv=t,this.workers=s,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new a.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe((e=>this.executeRun(e))),this.eventsSubscription=e.events.subscribe(I.U5,(e=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})}))}run(e){this.runs.next(e)}getResult(e){return this.results.asObservable().pipe((0,l.U)((t=>{const s=(0,x.tD)(t.annotations,e),a=t.alertStates.find((t=>Boolean(e)&&t.panelId===e));return{annotations:(0,m.o)(s),alertState:a}})))}executeRun(e){const t=this.workers.filter((t=>t.canWork(e))).map((t=>t.work(e))),s=new i.w0,a=(0,r.T)(t).pipe((0,c.R)(this.runs.asObservable()),(0,d.J)(),(0,u.u)(((e,t)=>(e.annotations=e.annotations.concat(t.annotations),e.alertStates=e.alertStates.concat(t.alertStates),e))),(0,p.x)((()=>{s.unsubscribe()})),(0,h.B)()),n=new i.w0,l=(0,o.H)(200).pipe((0,g.h)({annotations:[],alertStates:[]}),(0,c.R)(a),(0,p.x)((()=>{n.unsubscribe()})));n.add(l.subscribe((e=>{this.results.next(e)}))),s.add(a.subscribe((e=>{this.results.next(e)})))}cancel(e){this.cancellationStream.next(e)}cancellations(){return this.cancellationStream.asObservable().pipe((0,h.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let D,$;function L(){if(!D)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return D}function E(e){$||($=({dashboard:e,timeSrv:t,workers:s})=>new A(e,t,s));const t=$(e);return function(e){D&&D.destroy(),D=e}(t),t}},"./public/app/features/query/state/DashboardQueryRunner/SnapshotWorker.ts":(e,t,s)=>{"use strict";s.d(t,{g:()=>i});var a=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),n=s("./public/app/features/query/state/DashboardQueryRunner/utils.ts");class i{canWork({dashboard:e}){var t,s;return null==e||null===(t=e.annotations)||void 0===t||null===(s=t.list)||void 0===s?void 0:s.some((e=>e.enable&&Boolean(e.snapshotData)))}work(e){if(!this.canWork(e))return(0,n.H_)();const t=this.getAnnotationsFromSnapshot(e.dashboard);return(0,a.of)({annotations:t,alertStates:[]})}getAnnotationsFromSnapshot(e){var t,s;return(null==e||null===(t=e.annotations)||void 0===t||null===(s=t.list)||void 0===s?void 0:s.filter((e=>e.enable))).filter((e=>Boolean(e.snapshotData))).reduce(((e,t)=>e.concat((0,n.pG)(t,t.snapshotData))),[])}getAnnotationsInSnapshot(e,t){const s=this.getAnnotationsFromSnapshot(e);return(0,n.tD)(s,t)}}},"./public/app/features/query/state/DashboardQueryRunner/utils.ts":(e,t,s)=>{"use strict";s.d(t,{h1:()=>d,hs:()=>u,H_:()=>p,Rc:()=>h,tD:()=>m,pG:()=>f,em:()=>b});var a=s("./node_modules/lodash/lodash.js"),n=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),i=s("./packages/grafana-data/src/index.ts"),r=s("./packages/grafana-runtime/src/index.ts"),o=s("./public/app/store/store.ts"),l=s("./public/app/core/copy/appNotification.ts"),c=s("./public/app/core/reducers/appNotification.ts");function d(e){return e.cancelled||g("AnnotationQueryRunner failed",e),(0,n.of)([])}function u(e){return g("Failed to retrieve datasource",e),(0,n.of)(void 0)}const p=()=>(0,n.of)({annotations:[],alertStates:[]});function h(e){return e.cancelled||g("DashboardQueryRunner failed",e),p()}function g(e,t){const s=(0,r.toDataQueryError)(t);console.error("handleAnnotationQueryRunnerError",s);const a=(0,l.t_)(e,s.message);(0,o.WI)((0,c.$l)(a))}function m(e,t){return e.filter((e=>{var s;return void 0===t||!e.panelId||"dashboard"!==(null===(s=e.source)||void 0===s?void 0:s.type)||e.panelId===t}))}function f(e,t){var s;e.snapshotData&&delete(e=(0,a.cloneDeep)(e)).snapshotData;for(const a of t)switch(a.source=e,a.color=r.config.theme2.visualization.getColorByName(e.iconColor),a.type=e.name,a.isRegion=Boolean(a.timeEnd&&a.time!==a.timeEnd),null===(s=a.newState)||void 0===s?void 0:s.toLowerCase()){case"pending":a.color="yellow";break;case"alerting":a.color="red";break;case"ok":case"normal":a.color="green";break;case"no_data":case"nodata":a.color="gray"}return t}function b(e){if(!e||!e.length)return[];const t=[];for(const s of e){const e=new i.DataFrameView(s);for(let n=0;n<s.length;n++){const s=(0,a.cloneDeep)(e.get(n));t.push(s)}}return t}},"./public/app/features/query/state/PanelQueryRunner.ts":(e,t,s)=>{"use strict";s.d(t,{o:()=>v,t:()=>b});var a=s("./node_modules/lodash/lodash.js"),n=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),i=s("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),r=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),o=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),l=s("./packages/grafana-runtime/src/index.ts"),c=s("./public/app/features/plugins/datasource_srv.ts"),d=s("./public/app/features/query/state/runRequest.ts"),u=s("./public/app/plugins/datasource/dashboard/index.ts"),p=s("./packages/grafana-data/src/index.ts"),h=s("./public/app/features/query/state/DashboardQueryRunner/DashboardQueryRunner.ts"),g=s("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let f=100;function b(){return"Q"+f++}class v{constructor(e){m(this,"subject",void 0),m(this,"subscription",void 0),m(this,"lastResult",void 0),m(this,"dataConfigSource",void 0),m(this,"getTransformationsStream",(e=>t=>t.pipe((0,r.z)((t=>{if(!e)return(0,n.of)(t);const s=this.dataConfigSource.getTransformations();return s&&0!==s.length?(0,p.transformDataFrame)(s,t.series).pipe((0,o.U)((e=>Object.assign({},t,{series:e})))):(0,n.of)(t)}))))),m(this,"resendLastResult",(()=>{this.lastResult&&this.subject.next(this.lastResult)})),this.subject=new i.t(1),this.dataConfigSource=e}getData(e){const{withFieldConfig:t,withTransforms:s}=e;let a=1,n=[],i=0,r=-1;const l=(e,t)=>(0,p.compareDataFrameStructures)(e,t,!0);return this.subject.pipe(this.getTransformationsStream(s),(0,o.U)((e=>{var s;let o=e,c=!1;if(t&&null!==(s=e.series)&&void 0!==s&&s.length){let t=this.dataConfigSource.getFieldOverrideOptions(),s=null!=t;if(e.state===p.LoadingState.Streaming&&s&&i>0&&n.length&&r===this.dataConfigSource.configRev){(0,p.compareArrayValues)(n,o.series,l)&&(o=Object.assign({},o,{series:n.map(((t,s)=>Object.assign({},t,{length:e.series[s].length,fields:t.fields.map(((t,a)=>Object.assign({},t,{values:e.series[s].fields[a].values,state:Object.assign({},t.state,{calcs:void 0,range:void 0})})))})))}),s=!1,c=!0)}var d,u;if(s)r=this.dataConfigSource.configRev,i++,o=Object.assign({},o,{series:(0,p.applyFieldOverrides)(Object.assign({timeZone:null!==(d=null===(u=e.request)||void 0===u?void 0:u.timezone)&&void 0!==d?d:"browser",data:o.series},t))})}return c||(c=(0,p.compareArrayValues)(n,o.series,p.compareDataFrameStructures)),c||a++,n=o.series,Object.assign({},o,{structureRev:a})})))}async run(e){const{queries:t,timezone:s,datasource:n,panelId:i,dashboardId:r,timeRange:o,timeInfo:h,cacheTimeout:g,maxDataPoints:m,scopedVars:f,minInterval:v}=e;if((0,u.yl)(n))return void this.pipeToSubject((0,u.AK)(e),i);const x={app:p.CoreApp.Dashboard,requestId:b(),timezone:s,panelId:i,dashboardId:r,range:o,timeInfo:h,interval:"",intervalMs:0,targets:(0,a.cloneDeep)(t),maxDataPoints:m,scopedVars:f||{},cacheTimeout:g,startTime:Date.now()};x.rangeRaw=o.raw;try{const e=await async function(e,t){if(e&&e.query)return e;return await(0,c.ak)().get(e,t)}(n,x.scopedVars);x.targets=x.targets.map((t=>(t.datasource||(t.datasource=e.name),t)));const t=v?(0,l.getTemplateSrv)().replace(v,x.scopedVars):e.interval,s=p.rangeUtil.calculateInterval(o,m,t);x.scopedVars=Object.assign({},x.scopedVars,{__interval:{text:s.interval,value:s.interval},__interval_ms:{text:s.intervalMs.toString(),value:s.intervalMs}}),x.interval=s.interval,x.intervalMs=s.intervalMs,this.pipeToSubject((0,d.v7)(e,x),i)}catch(e){console.error("PanelQueryRunner Error",e)}}pipeToSubject(e,t){this.subscription&&this.subscription.unsubscribe();let s=e;const a=this.dataConfigSource.getDataSupport();if(a.alertStates||a.annotations){var i;const t=this.dataConfigSource,a=null!==(i=t.editSourceId)&&void 0!==i?i:t.id;o=e,l=(0,h.kt)().getResult(a),s=(0,g.a)([o,l]).pipe((0,r.z)((e=>{var t;const[s,a]=e;if(Boolean(null===(t=a.annotations)||void 0===t?void 0:t.length)||Boolean(a.alertState)){s.annotations||(s.annotations=[]);const e=s.annotations.concat(new p.ArrayDataFrame(a.annotations)),t=a.alertState;return(0,n.of)(Object.assign({},s,{annotations:e,alertState:t}))}return(0,n.of)(s)})))}var o,l;this.subscription=s.subscribe({next:e=>{this.lastResult=(0,d.zR)(e,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===p.LoadingState.Loading&&this.subject.next(Object.assign({},this.lastResult,{state:p.LoadingState.Done})))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(e){this.lastResult=e.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}getLastResult(){return this.lastResult}}},"./public/app/features/query/state/processing/canceler.ts":(e,t,s)=>{"use strict";s.d(t,{V:()=>n});var a=s("./node_modules/rxjs/dist/esm5/internal/operators/finalize.js");function n(e,t){return(0,a.x)((()=>{t&&e.resolveCancelerIfExists(t)}))}},"./public/app/features/query/state/processing/revision.ts":(e,t,s)=>{"use strict";s.d(t,{C:()=>n});var a=s("./packages/grafana-data/src/index.ts");const n=(e,t)=>{let s=1;if(null!=t&&t.structureRev&&t.series){s=t.structureRev;(0,a.compareArrayValues)(e.series,t.series,a.compareDataFrameStructures)||s++}return e.structureRev=s,e}},"./public/app/features/query/state/runRequest.ts":(e,t,s)=>{"use strict";s.d(t,{F9:()=>j,zR:()=>k,v7:()=>w});var a=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),n=s("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),i=s("./node_modules/rxjs/dist/esm5/internal/observable/timer.js"),r=s("./node_modules/rxjs/dist/esm5/internal/observable/from.js"),o=s("./node_modules/lodash/lodash.js"),l=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),c=s("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),d=s("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),u=s("./node_modules/rxjs/dist/esm5/internal/operators/share.js"),p=s("./node_modules/rxjs/dist/esm5/internal/operators/mapTo.js"),h=s("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),g=s("./public/app/core/services/backend_srv.ts"),m=s("./packages/grafana-data/src/index.ts"),f=s("./packages/grafana-runtime/src/index.ts"),b=s("./public/app/features/dashboard/services/DashboardSrv.ts");var v=s("./public/app/features/expressions/ExpressionDatasource.ts"),x=s("./public/app/features/query/state/processing/canceler.ts");function y(e,t){const s=t.panelData.request,a=Object.assign({},t.packets);a[e.key||"A"]=e;let n,i=e.state||m.LoadingState.Done;const r=[],l=[];for(const e in a){const t=a[e];if(t.error&&(i=m.LoadingState.Error,n=t.error),t.data&&t.data.length)for(const e of t.data){var c;(null===(c=e.meta)||void 0===c?void 0:c.dataTopic)!==m.DataTopic.Annotations?r.push(e):l.push(e)}}return{packets:a,panelData:{state:i,series:r,annotations:l,error:n,request:s,timeRange:function(e,t){const s=e.range;if(!(0,o.isString)(s.raw.from)||t!==m.LoadingState.Streaming)return s;return Object.assign({},s,{from:m.dateMath.parse(s.raw.from,!1),to:m.dateMath.parse(s.raw.to,!0)})}(s,i)}}}function w(e,t,s){let w={panelData:{state:m.LoadingState.Loading,series:[],request:t,timeRange:t.range},packets:{}};if(!t.targets.length)return t.endTime=Date.now(),w.panelData.state=m.LoadingState.Done,(0,a.of)(w.panelData);const j=function(e,t,s){for(const e of t.targets)if(e.datasource===v.DB||e.datasource===v.Yq)return v.mV.query(t);const a=s?s(t):e.query(t);return(0,r.Dp)(a)}(e,t,s).pipe((0,l.U)((e=>{if(!(0,o.map)(e.data))throw new Error(`Expected response data to be array, got ${typeof e.data}.`);return t.endTime=Date.now(),w=y(e,w),w.panelData})),(0,c.K)((e=>(console.error("runRequest.catchError",e),(0,a.of)(Object.assign({},w.panelData,{state:m.LoadingState.Error,error:(0,f.toDataQueryError)(e)}))))),(0,d.b)(function(e){let t=!1;return s=>{if(!s.request||t||s.request.app===m.CoreApp.Explore)return;if(null!=m.urlUtil.getUrlSearchParams().editPanel)return;if(s.state!==m.LoadingState.Done&&s.state!==m.LoadingState.Error)return;const a={eventName:f.MetaAnalyticsEventName.DataRequest,datasourceName:e.name,datasourceId:e.id,datasourceType:e.type,panelId:s.request.panelId,dashboardId:s.request.dashboardId,dataSize:0,duration:s.request.endTime-s.request.startTime},n=(0,b.h4)().getCurrent();n&&(a.dashboardId=n.id,a.dashboardName=n.title,a.dashboardUid=n.uid,a.folderName=n.meta.folderTitle),s.series&&s.series.length>0&&(a.dataSize=s.series.length),s.error&&(a.error=s.error.message),(0,f.reportMetaAnalytics)(a),t=!0}}(e)),(0,x.V)(g.ae,t.requestId),(0,u.B)());return(0,n.T)((0,i.H)(200).pipe((0,p.h)(w.panelData),(0,h.R)(j)),j)}function j(e){if(!e||!(0,o.map)(e))return[];const t=[];for(const s of e){const e=(0,m.guessFieldTypes)((0,m.toDataFrame)(s));if(e.fields&&e.fields.length)for(const t of e.fields)t.state=null;t.push(e)}return t}function k(e,t){const{series:s,annotations:a}=e;if(e.state===m.LoadingState.Loading&&0===s.length)return t||(t=e),Object.assign({},t,{state:m.LoadingState.Loading,request:e.request});const n=performance.now(),i=j(s),r=j(a),o=performance.now();return Object.assign({},e,{series:i,annotations:r,timings:{dataProcessingTime:o-n}})}},"./public/app/features/search/components/ActionRow.tsx":(e,t,s)=>{"use strict";s.d(t,{B:()=>p});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/core/components/Select/SortPicker.tsx"),r=s("./public/app/core/components/TagFilter/TagFilter.tsx"),o=s("./public/app/core/services/search_srv.ts"),l=s("./public/app/features/search/types.ts"),c=s("./node_modules/react/jsx-runtime.js");const d=[{value:l.A.Folders,icon:"folder",ariaLabel:"View by folders"},{value:l.A.List,icon:"list-ul",ariaLabel:"View as list"}],u=new o.i,p=({onLayoutChange:e,onSortChange:t,onStarredFilterChange:s=(()=>{}),onTagFilterChange:a,query:o,showStarredFilter:l,hideLayout:p})=>{var g;const m=(0,n.useTheme)(),f=h(m);return(0,c.jsxs)("div",{className:f.actionRow,children:[(0,c.jsx)("div",{className:f.rowContainer,children:(0,c.jsxs)(n.HorizontalGroup,{spacing:"md",width:"auto",children:[p?null:(0,c.jsx)(n.RadioButtonGroup,{options:d,onChange:e,value:o.layout}),(0,c.jsx)(i.P,{onChange:t,value:null===(g=o.sort)||void 0===g?void 0:g.value})]})}),(0,c.jsxs)(n.HorizontalGroup,{spacing:"md",width:"auto",children:[l&&(0,c.jsx)("div",{className:f.checkboxWrapper,children:(0,c.jsx)(n.Checkbox,{label:"Filter by starred",onChange:s,value:o.starred})}),(0,c.jsx)(r.D,{isClearable:!0,tags:o.tag,tagOptions:u.getDashboardTags,onChange:a})]})]})};p.displayName="ActionRow";const h=(0,n.stylesFactory)((e=>({actionRow:a.css`
      display: none;

      @media only screen and (min-width: ${e.breakpoints.md}) {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: ${e.spacing.lg} 0;
        width: 100%;
      }
    `,rowContainer:a.css`
      margin-right: ${e.spacing.md};
    `,checkboxWrapper:a.css`
      label {
        line-height: 1.2;
      }
    `})))},"./public/app/features/search/components/ConfirmDeleteModal.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./public/app/features/search/utils.ts"),o=s("./public/app/features/manage-dashboards/state/actions.ts"),l=s("./node_modules/react/jsx-runtime.js");const c=({results:e,onDeleteItems:t,isOpen:s,onDismiss:a})=>{const c=(0,n.useTheme)(),u=d(c),p=(0,r.jw)(e),{folders:h,dashboards:g}=p,m=h.length,f=g.length;let b,v="Do you want to delete the ";const x=1===f?"":"s",y=1===m?"":"s";m>0&&f>0?(v+=`selected folder${y} and dashboard${x}?\n`,b=`All dashboards and alerts of the selected folder${y} will also be deleted`):v+=m>0?`selected folder${y} and all their dashboards and alerts?`:`selected dashboard${x}?`;return s?(0,l.jsx)(n.ConfirmModal,{isOpen:s,title:"Delete",body:(0,l.jsxs)(l.Fragment,{children:[v," ",b&&(0,l.jsx)("div",{className:u.subtitle,children:b})]}),confirmText:"Delete",onConfirm:()=>{(0,o.Fd)(h,g).then((()=>{a(),(0,i.getLocationSrv)().update({path:"/dashboards"}),t(h,g)}))},onDismiss:a}):null},d=(0,n.stylesFactory)((e=>({subtitle:a.css`
      font-size: ${e.typography.size.base};
      padding-top: ${e.spacing.md};
    `})))},"./public/app/features/search/components/ManageDashboards.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>C});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./public/app/core/services/context_srv.ts"),o=s("./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx"),l=s("./public/app/features/search/reducers/actionTypes.ts"),c=s("./public/app/features/search/reducers/dashboardSearch.ts"),d=s("./public/app/features/search/utils.ts");const u=Object.assign({},c.o,{allChecked:!1}),p=(0,d.yS)([c.f,(e,t)=>{switch(t.type){case l.u0:const s=!e.allChecked;return Object.assign({},e,{results:e.results.map((e=>Object.assign({},e,{checked:s,items:e.items.map((e=>Object.assign({},e,{checked:s})))}))),allChecked:s});case l.$L:const{id:a}=t.payload;return Object.assign({},e,{results:e.results.map((e=>e.id===a?Object.assign({},e,{checked:!e.checked,items:e.items.map((t=>Object.assign({},t,{checked:!e.checked})))}):Object.assign({},e,{items:e.items.map((e=>e.id===a?Object.assign({},e,{checked:!e.checked}):e))})))});case l.BV:{const s=t.payload.dashboards,a=t.payload.folder,n=s.map((e=>e.uid));return Object.assign({},e,{results:e.results.map((e=>a.id===e.id?e.expanded?Object.assign({},e,{items:[...e.items,...s.map((e=>Object.assign({},e,{checked:!1})))],checked:!1}):e:Object.assign({},e,{items:e.items.filter((e=>!n.includes(e.uid)))})))})}case l.PB:{const{folders:s,dashboards:a}=t.payload;return s.length||a.length?Object.assign({},e,{results:e.results.reduce(((e,t)=>s.includes(t.uid)?e:[...e,Object.assign({},t,{items:t.items.filter((e=>!a.includes(e.uid)))})]),[])}):e}default:return e}}]);var h=s("./public/app/features/search/hooks/useSearch.ts"),g=s("./public/app/features/search/constants.ts");var m,f=s("./public/app/features/search/types.ts"),b=s("./public/app/features/search/components/ConfirmDeleteModal.tsx"),v=s("./public/app/features/search/components/MoveToFolderModal.tsx"),x=s("./public/app/features/search/hooks/useSearchQuery.ts"),y=s("./public/app/features/search/components/SearchResultsFilter.tsx"),w=s("./public/app/features/search/components/SearchResults.tsx"),j=s("./node_modules/react/jsx-runtime.js");const k=({folderId:e,isEditor:t,canEdit:s})=>{const a=t=>{let s=`dashboard/${t}`;return e&&(s+=`?folderId=${e}`),s};return(0,j.jsx)("div",{children:(0,j.jsxs)(i.HorizontalGroup,{spacing:"md",align:"center",children:[s&&(0,j.jsx)(i.LinkButton,{href:a("new"),children:"New Dashboard"}),!e&&t&&(m||(m=(0,j.jsx)(i.LinkButton,{href:"dashboards/folder/new",children:"New Folder"}))),s&&(0,j.jsx)(i.LinkButton,{href:a("import"),children:"Import"})]})})},{isEditor:S}=r.Vt,C=(0,a.memo)((({folder:e})=>{const t=null==e?void 0:e.id,s=null==e?void 0:e.uid,n=(0,i.useTheme)(),c=T(n),[d,m]=(0,a.useState)(!1),[C,N]=(0,a.useState)(!1),O={skipRecent:!0,skipStarred:!0,folderIds:t?[t]:[],layout:t?f.A.List:f.A.Folders},{query:I,hasFilters:P,onQueryChange:M,onTagFilterChange:F,onStarredFilterChange:A,onTagAdd:D,onSortChange:$,onLayoutChange:L}=(0,x.A)(O),{results:E,loading:R,initialLoading:_,canSave:V,allChecked:B,hasEditPermissionInFolders:z,canMove:U,canDelete:q,onToggleSection:H,onToggleChecked:G,onToggleAllChecked:W,onDeleteItems:Z,onMoveItems:Q,noFolders:K}=((e,t={},s)=>{const n=(0,a.useReducer)(p,Object.assign({},u,t)),{state:{results:i,loading:o,initialLoading:c,allChecked:d},onToggleSection:m,dispatch:f}=(0,h.R)(e,n,{}),b=(0,a.useCallback)((e=>{f({type:l.$L,payload:e})}),[f]),v=(0,a.useMemo)((()=>i.some((e=>e.items&&e.items.some((e=>e.checked))))),[i]),x=(0,a.useMemo)((()=>v||i.some((e=>e.checked&&e.id!==g.pW))),[v,i]),y=null==s?void 0:s.canSave,w=s?y:r.Vt.hasEditPermissionInFolders,j=y&&(null==s?void 0:s.id)&&0===i.length&&!o&&!c;return{results:i,loading:o,initialLoading:c,canSave:y,allChecked:d,hasEditPermissionInFolders:w,canMove:v,canDelete:x,onToggleSection:m,onToggleChecked:b,onToggleAllChecked:()=>{f({type:l.u0})},onDeleteItems:(e,t)=>{f({type:l.PB,payload:{folders:e,dashboards:t}})},onMoveItems:(e,t)=>{f({type:l.BV,payload:{dashboards:e,folder:t}})},noFolders:j}})(I,{},e);return _?(0,j.jsx)(i.Spinner,{className:c.spinner}):K&&!P?(0,j.jsx)(o.Z,{title:"This folder doesn't have any dashboards yet",buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?folderId=${t}`,proTip:"Add/move dashboards to your folder at ->",proTipLink:"dashboards",proTipLinkTitle:"Manage dashboards",proTipTarget:""}):(0,j.jsxs)("div",{className:c.container,children:[(0,j.jsxs)("div",{className:"page-action-bar",children:[(0,j.jsx)("div",{className:"gf-form gf-form--grow m-r-2",children:(0,j.jsx)(i.FilterInput,{value:I.query,onChange:M,placeholder:"Search dashboards by name"})}),(0,j.jsx)(k,{isEditor:S,canEdit:z||V,folderId:t})]}),(0,j.jsxs)("div",{className:c.results,children:[(0,j.jsx)(y.f,{allChecked:B,canDelete:z&&q,canMove:z&&U,deleteItem:()=>{m(!0)},moveTo:()=>{N(!0)},onToggleAllChecked:W,onStarredFilterChange:A,onSortChange:$,onTagFilterChange:F,query:I,hideLayout:!!s,onLayoutChange:L,editable:z}),(0,j.jsx)(w.s,{loading:R,results:E,editable:z,onTagSelected:D,onToggleSection:H,onToggleChecked:G,layout:I.layout})]}),(0,j.jsx)(b.Z,{onDeleteItems:Z,results:E,isOpen:d,onDismiss:()=>m(!1)}),(0,j.jsx)(v.i,{onMoveItems:Q,results:E,isOpen:C,onDismiss:()=>N(!1)})]})})),T=(0,i.stylesFactory)((e=>({container:n.css`
      height: 100%;
      display: flex;
      flex-direction: column;
    `,results:n.css`
      display: flex;
      flex-direction: column;
      flex: 1 1 0;
      height: 100%;
      padding-top: ${e.spacing.lg};
    `,spinner:n.css`
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 200px;
    `})))},"./public/app/features/search/components/MoveToFolderModal.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>p});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/core/components/Select/FolderPicker.tsx"),l=s("./public/app/core/app_events.ts"),c=s("./public/app/features/search/utils.ts"),d=s("./public/app/features/manage-dashboards/state/actions.ts"),u=s("./node_modules/react/jsx-runtime.js");const p=({results:e,onMoveItems:t,isOpen:s,onDismiss:n})=>{const[p,g]=(0,a.useState)(null),m=(0,i.useTheme)(),f=h(m),b=(0,c.IO)(e);return s?(0,u.jsx)(i.Modal,{className:f.modal,title:"Choose Dashboard Folder",icon:"folder-plus",isOpen:s,onDismiss:n,children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:f.content,children:[(0,u.jsxs)("p",{children:["Move the ",b.length," selected dashboard",1===b.length?"":"s"," to the following folder:"]}),(0,u.jsx)(o.E,{onChange:e=>g(e)})]}),(0,u.jsxs)(i.HorizontalGroup,{justify:"center",children:[(0,u.jsx)(i.Button,{variant:"primary",onClick:()=>{if(p&&b.length){var e;const s=null!==(e=p.title)&&void 0!==e?e:"General";(0,d.ct)(b.map((e=>e.uid)),p).then((e=>{if(e.successCount>0){const t=1===e.successCount?"":"s",a=`Dashboard${t} Moved`,n=`${e.successCount} dashboard${t} moved to ${s}`;l.Z.emit(r.AppEvents.alertSuccess,[a,n])}e.totalCount===e.alreadyInFolderCount?l.Z.emit(r.AppEvents.alertError,["Error",`Dashboard already belongs to folder ${s}`]):t(b,p),n()}))}},children:"Move"}),(0,u.jsx)(i.Button,{variant:"secondary",onClick:n,children:"Cancel"})]})]})}):null},h=(0,i.stylesFactory)((e=>({modal:n.css`
      width: 500px;
    `,content:n.css`
      margin-bottom: ${e.spacing.lg};
    `})))},"./public/app/features/search/components/SearchCheckbox.tsx":(e,t,s)=>{"use strict";s.d(t,{R:()=>r});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/react/jsx-runtime.js");const r=(0,a.memo)((({onClick:e,className:t,checked:s=!1,editable:a=!1,"aria-label":r})=>a?(0,i.jsx)("div",{onClick:e,className:t,children:(0,i.jsx)(n.Checkbox,{value:s,"aria-label":r})}):null));r.displayName="SearchCheckbox"},"./public/app/features/search/components/SearchItem.tsx":(e,t,s)=>{"use strict";s.d(t,{T:()=>h});var a,n=s("./node_modules/react/index.js"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./packages/grafana-e2e-selectors/src/index.ts"),o=s("./packages/grafana-ui/src/index.ts"),l=s("./public/app/features/search/components/SearchCheckbox.tsx"),c=s("./public/app/features/search/constants.ts"),d=s("./node_modules/react/jsx-runtime.js");const u=r.wl.pages.Dashboards,p=(e="")=>{const t=new Map([["errors","info-circle"],["views","eye"]]);return t.has(e)?t.get(e):"sort-amount-down"},h=({item:e,editable:t,onToggleChecked:s,onTagSelected:i})=>{const r=(0,o.useStyles2)(g),h=(0,n.useCallback)(((e,t)=>{i(e)}),[i]),m=(0,n.useCallback)((t=>{t.stopPropagation(),t.preventDefault(),s&&s(e)}),[e,s]),f=e.folderTitle||"General";return(0,d.jsxs)(o.Card,{"aria-label":u.dashboards(e.title),heading:e.title,href:e.url,style:{minHeight:c.CN},className:r.container,children:[(0,d.jsx)(o.Card.Figure,{align:"center",className:r.checkbox,children:(0,d.jsx)(l.R,{"aria-label":"Select dashboard",editable:t,checked:e.checked,onClick:m})}),(0,d.jsxs)(o.Card.Meta,{separator:"",children:[(0,d.jsxs)("span",{className:r.metaContainer,children:[a||(a=(0,d.jsx)(o.Icon,{name:"folder"})),f]}),e.sortMetaName&&(0,d.jsxs)("span",{className:r.metaContainer,children:[(0,d.jsx)(o.Icon,{name:p(e.sortMetaName)}),e.sortMeta," ",e.sortMetaName]})]}),(0,d.jsx)(o.Card.Tags,{children:(0,d.jsx)(o.TagList,{tags:e.tags,onClick:h})})]})},g=e=>({container:i.css`
      margin-bottom: ${e.spacing(.75)};

      a {
        padding: ${e.spacing(1)} ${e.spacing(2)};
      }
    `,metaContainer:i.css`
      display: flex;
      align-items: center;
      margin-right: ${e.spacing(1)};

      svg {
        margin-right: ${e.spacing(.5)};
      }
    `,checkbox:i.css`
      margin-right: 0;
    `})},"./public/app/features/search/components/SearchResults.tsx":(e,t,s)=>{"use strict";s.d(t,{s:()=>j});var a,n,i=s("./node_modules/react/index.js"),r=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),o=s("./node_modules/react-window/dist/index.esm.js"),l=s("./node_modules/react-virtualized-auto-sizer/dist/index.esm.js"),c=s("./packages/grafana-ui/src/index.ts"),d=s("./packages/grafana-e2e-selectors/src/index.ts"),u=s("./public/app/features/search/types.ts"),p=s("./public/app/features/search/constants.ts"),h=s("./public/app/features/search/components/SearchItem.tsx"),g=s("./node_modules/react-use/esm/useLocalStorage.js"),m=s("./public/app/features/search/components/SearchCheckbox.tsx"),f=s("./public/app/features/search/utils.ts"),b=s("./node_modules/react/jsx-runtime.js");const v=({section:e,onSectionClick:t,onToggleChecked:s,editable:r=!1})=>{const o=(0,c.useTheme)(),l=x(o,e.selected,r),d=(0,g.Z)((0,f.tT)(e.title),!0)[1],u=(0,i.useCallback)((t=>{console.log("section header handleCheckboxClick"),t.stopPropagation(),t.preventDefault(),s&&s(e)}),[s,e]);return(0,b.jsxs)("div",{className:l.wrapper,onClick:()=>{d(!e.expanded),t(e)},"aria-label":e.expanded?`Collapse folder ${e.id}`:`Expand folder ${e.id}`,children:[(0,b.jsx)(m.R,{className:l.checkbox,editable:r,checked:e.checked,onClick:u,"aria-label":"Select folder"}),(0,b.jsx)("div",{className:l.icon,children:(0,b.jsx)(c.Icon,{name:(0,f.M$)(e)})}),(0,b.jsxs)("div",{className:l.text,children:[e.title,e.url&&(0,b.jsxs)("a",{href:e.url,className:l.link,children:[(0,b.jsx)("span",{className:l.separator,children:"|"})," ",a||(a=(0,b.jsx)(c.Icon,{name:"folder-upload"}))," Go to folder"]})]}),e.itemsFetching?n||(n=(0,b.jsx)(c.Spinner,{})):(0,b.jsx)(c.Icon,{name:e.expanded?"angle-down":"angle-right"})]})},x=(0,c.stylesFactory)(((e,t=!1,s)=>{const{sm:a}=e.spacing;return{wrapper:(0,r.cx)(r.css`
        display: flex;
        align-items: center;
        font-size: ${e.typography.size.base};
        padding: 12px;
        color: ${e.colors.textWeak};

        &:hover,
        &.selected {
          color: ${e.colors.text};
        }

        &:hover {
          a {
            opacity: 1;
          }
        }
      `,"pointer",{selected:t}),checkbox:r.css`
      padding: 0 ${a} 0 0;
    `,icon:r.css`
      padding: 0 ${a} 0 ${s?0:a};
    `,text:r.css`
      flex-grow: 1;
      line-height: 24px;
    `,link:r.css`
      padding: 2px 10px 0;
      color: ${e.colors.textWeak};
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    `,separator:r.css`
      margin-right: 6px;
    `}})),{section:y,items:w}=d.wl.components.Search,j=(0,i.memo)((({editable:e,loading:t,onTagSelected:s,onToggleChecked:a,onToggleSection:n,results:i,layout:r})=>{const d=(0,c.useTheme)(),g=k(d),m={editable:e,onToggleChecked:a,onTagSelected:s};return t?(0,b.jsx)(c.Spinner,{className:g.spinner}):i&&i.length?(0,b.jsx)("div",{className:g.resultsContainer,children:r===u.A.Folders?(0,b.jsx)("div",{className:g.wrapper,children:i.map((t=>(0,b.jsxs)("div",{"aria-label":y,className:g.section,children:[(0,b.jsx)(v,{onSectionClick:n,onToggleChecked:a,editable:e,section:t}),t.expanded&&(0,b.jsx)("div",{"aria-label":w,className:g.sectionItems,children:t.items.map((e=>(0,b.jsx)(h.T,Object.assign({},m,{item:e}),e.id)))})]},t.id||t.title)))}):(()=>{var e;const t=null===(e=i[0])||void 0===e?void 0:e.items;return(0,b.jsx)("div",{className:g.listModeWrapper,children:(0,b.jsx)(l.Z,{disableWidth:!0,children:({height:e})=>(0,b.jsx)(o.t7,{"aria-label":"Search items",className:g.wrapper,innerElementType:"ul",itemSize:p.CN+p.iC,height:e,itemCount:t.length,width:"100%",children:({index:e,style:s})=>{const a=t[e];return(0,b.jsx)("li",{style:s,children:(0,b.jsx)(h.T,Object.assign({},m,{item:a}),a.id)})}})})})})()}):(0,b.jsx)("div",{className:g.noResults,children:"No dashboards matching your query were found."})}));j.displayName="SearchResults";const k=(0,c.stylesFactory)((e=>{const{md:t}=e.spacing;return{wrapper:r.css`
      display: flex;
      flex-direction: column;
    `,section:r.css`
      display: flex;
      flex-direction: column;
      background: ${e.colors.panelBg};
      border-bottom: solid 1px ${e.colors.border2};
    `,sectionItems:r.css`
      margin: 0 24px 0 32px;
    `,spinner:r.css`
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100px;
    `,resultsContainer:r.css`
      position: relative;
      flex-grow: 10;
      margin-bottom: ${t};
      background: ${e.colors.bg1};
      border: 1px solid ${e.colors.border1};
      border-radius: 3px;
      height: 100%;
    `,noResults:r.css`
      padding: ${t};
      background: ${e.colors.bg2};
      font-style: italic;
      margin-top: ${e.spacing.md};
    `,listModeWrapper:r.css`
      position: relative;
      height: 100%;
      padding: ${t};
    `}}))},"./public/app/features/search/components/SearchResultsFilter.tsx":(e,t,s)=>{"use strict";s.d(t,{f:()=>o});s("./node_modules/react/index.js");var a=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/features/search/components/ActionRow.tsx"),r=s("./node_modules/react/jsx-runtime.js");const o=({allChecked:e,canDelete:t,canMove:s,deleteItem:a,hideLayout:o,moveTo:c,onLayoutChange:d,onSortChange:u,onStarredFilterChange:p,onTagFilterChange:h,onToggleAllChecked:g,query:m,editable:f})=>{const b=t||s,v=(0,n.useTheme)(),x=l(v);return(0,r.jsxs)("div",{className:x.wrapper,children:[f&&(0,r.jsx)("div",{className:x.checkboxWrapper,children:(0,r.jsx)(n.Checkbox,{"aria-label":"Select all",value:e,onChange:g})}),b?(0,r.jsxs)(n.HorizontalGroup,{spacing:"md",children:[(0,r.jsx)(n.Button,{disabled:!s,onClick:c,icon:"exchange-alt",variant:"secondary",children:"Move"}),(0,r.jsx)(n.Button,{disabled:!t,onClick:a,icon:"trash-alt",variant:"destructive",children:"Delete"})]}):(0,r.jsx)(i.B,{hideLayout:o,onLayoutChange:d,onSortChange:u,onStarredFilterChange:p,onTagFilterChange:h,query:m,showStarredFilter:!0})]})},l=(0,n.stylesFactory)((e=>{const{sm:t,md:s}=e.spacing;return{wrapper:a.css`
      height: ${e.height.md}px;
      display: flex;
      justify-content: flex-start;
      gap: ${e.spacing.md};
      align-items: center;
      margin-bottom: ${t};

      > label {
        height: 20px;
        margin: 0 ${s} 0 ${t};
      }
    `,checkboxWrapper:a.css`
      label {
        line-height: 1.2;
        width: max-content;
      }
    `}}))},"./public/app/features/search/constants.ts":(e,t,s)=>{"use strict";s.d(t,{Vg:()=>a,CN:()=>n,iC:()=>i,yw:()=>r,qi:()=>o,pW:()=>l,fy:()=>c});const a=["Recent","Starred"],n=58,i=8,r={label:"A–Z",value:"alpha-asc"},o="search.sections",l=0,c="General"},"./public/app/features/search/hooks/useSearch.ts":(e,t,s)=>{"use strict";s.d(t,{R:()=>d});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-use/esm/useDebounce.js"),i=s("./public/app/core/services/search_srv.ts"),r=s("./public/app/core/services/backend_srv.ts"),o=s("./public/app/features/search/reducers/actionTypes.ts"),l=s("./public/app/features/search/utils.ts");const c=new i.i,d=(e,t,s={})=>{const{queryParsing:i}=s,[d,u]=t;(0,a.useEffect)((()=>{u({type:o.F4})}),[e.tag,e.sort,e.starred,e.layout,u]),(0,n.Z)((()=>{u({type:o.F4});const t=(0,l.qD)(e,i);c.search(t).then((e=>{u({type:o.rd,payload:e})}))}),300,[e,i]);const p=(0,a.useCallback)((e=>{(0,l.rR)(e.title)&&!e.items.length?(u({type:o.ZH,payload:e.id}),r.ae.search({folderIds:[e.id]}).then((t=>{u({type:o.mK,payload:{section:e,items:t}}),u({type:o.fl,payload:e})}))):u({type:o.fl,payload:e})}),[u]);return{state:d,dispatch:u,onToggleSection:p}}},"./public/app/features/search/hooks/useSearchQuery.ts":(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s("./node_modules/react/index.js"),n=s("./node_modules/lodash/lodash.js"),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./public/app/features/search/reducers/searchQueryReducer.ts"),o=s("./public/app/features/search/reducers/actionTypes.ts"),l=s("./public/app/features/search/types.ts"),c=s("./public/app/features/search/utils.ts");const d=(0,n.debounce)((e=>i.locationService.partial(e)),300),u=e=>{const t=(0,c.vj)(i.locationService.getSearchObject()),s=Object.assign({},r.wi,e,t),[n,u]=(0,a.useReducer)(r.Y,s),p=(0,a.useCallback)((e=>{u({type:o.Iy,payload:e}),d({tag:[...n.tag,e]})}),[n.tag]);return{query:n,hasFilters:(0,c.L)(n),onQueryChange:e=>{u({type:o.MC,payload:e}),d({query:e})},onClearFilters:()=>{u({type:o.Gs}),d(r.xi)},onTagFilterChange:e=>{u({type:o.Fe,payload:e}),d({tag:e})},onStarredFilterChange:e=>{const t=e.target.checked;u({type:o.EF,payload:t}),d({starred:t||null})},onTagAdd:p,onSortChange:e=>{u({type:o.NJ,payload:e}),d({sort:null==e?void 0:e.value,layout:l.A.List})},onLayoutChange:e=>{u({type:o.Mj,payload:e}),e!==l.A.Folders?d({layout:e}):d({layout:e,sort:null})}}}},"./public/app/features/search/index.ts":(e,t,s)=>{"use strict";s.d(t,{Um:()=>d,sZ:()=>a.s,fC:()=>T.f,_8:()=>C});var a=s("./public/app/features/search/components/SearchResults.tsx"),n=s("./node_modules/react/index.js"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=["query","onChange","size","clearable","className"];const c=e=>({wrapper:i.css`
    width: 100%;
    display: flex;
    position: relative;
    align-items: center;
  `,input:i.css`
    box-sizing: border-box;
    outline: none;
    background-color: transparent;
    background: transparent;
    border-bottom: 2px solid ${e.colors.border1};
    font-size: 20px;
    line-height: 38px;
    width: 100%;

    &::placeholder {
      color: ${e.colors.textWeak};
    }
  `,spacer:i.css`
    flex-grow: 1;
  `,icon:(0,i.cx)(i.css`
      color: ${e.colors.textWeak};
      padding: 0 ${e.spacing.md};
    `),clearButton:i.css`
    font-size: ${e.typography.size.sm};
    color: ${e.colors.textWeak};
    text-decoration: underline;

    &:hover {
      cursor: pointer;
      color: ${e.colors.textStrong};
    }
  `}),d=e=>{let{query:t,onChange:s,className:a}=e,n=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,l);const d=(0,r.useStyles)(c);return(0,o.jsxs)("div",{className:(0,i.cx)(d.wrapper,a),children:[(0,o.jsx)("input",Object.assign({type:"text",placeholder:"Search dashboards by name",value:t.query,onChange:e=>{s(e.currentTarget.value)},tabIndex:1,spellCheck:!1,className:d.input},n)),(0,o.jsx)("div",{className:d.spacer})]})};s("./public/app/features/search/components/SearchItem.tsx"),s("./public/app/features/search/components/SearchCheckbox.tsx");var u=s("./public/app/features/search/hooks/useSearchQuery.ts"),p=s("./packages/grafana-runtime/src/index.ts"),h=s("./public/app/features/search/types.ts"),g=s("./public/app/features/search/reducers/actionTypes.ts"),m=s("./public/app/features/search/reducers/dashboardSearch.ts"),f=s("./public/app/features/search/utils.ts"),b=s("./public/app/features/search/hooks/useSearch.ts"),v=s("./packages/grafana-data/src/index.ts");var x=s("./public/app/features/search/components/ActionRow.tsx");const y=(0,n.memo)((({onCloseSearch:e})=>{const{query:t,onQueryChange:s,onTagFilterChange:i,onTagAdd:l,onSortChange:c,onLayoutChange:y}=(0,u.A)({}),{results:w,loading:k,onToggleSection:S,onKeyDown:C}=((e,t)=>{const s=(0,n.useReducer)(m.f,m.o),{state:{results:a,loading:i},onToggleSection:r,dispatch:o}=(0,b.R)(e,s,{queryParsing:!0});return{results:a,loading:i,onToggleSection:r,onKeyDown:e=>{switch(e.key){case"Escape":t();break;case"ArrowUp":o({type:g.Nj});break;case"ArrowDown":o({type:g.oe});break;case"Enter":const e=(0,f.xy)(a);e&&(e.type===h.o.DashFolder?r(e):((0,p.getLocationSrv)().update({path:v.locationUtil.stripBaseFromUrl(e.url)}),setTimeout(t,0)))}}}})(t,e),T=(0,r.useTheme)(),N=j(T);return(0,o.jsx)("div",{tabIndex:0,className:N.overlay,children:(0,o.jsxs)("div",{className:N.container,children:[(0,o.jsxs)("div",{className:N.searchField,children:[(0,o.jsx)(d,{query:t,onChange:s,onKeyDown:C,autoFocus:!0,clearable:!0}),(0,o.jsx)("div",{className:N.closeBtn,children:(0,o.jsx)(r.IconButton,{name:"times",surface:"panel",onClick:e,size:"xxl",tooltip:"Close search"})})]}),(0,o.jsxs)("div",{className:N.search,children:[(0,o.jsx)(x.B,{onLayoutChange:y,onSortChange:c,onTagFilterChange:i,query:t}),(0,o.jsx)(r.CustomScrollbar,{children:(0,o.jsx)(a.s,{results:w,loading:k,onTagSelected:l,editable:!1,onToggleSection:S,layout:t.layout})})]})]})})}));y.displayName="DashboardSearch";const w=y,j=(0,r.stylesFactory)((e=>({overlay:i.css`
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: ${e.zIndex.sidemenu};
      position: fixed;
      background: ${e.colors.dashboardBg};

      @media only screen and (min-width: ${e.breakpoints.md}) {
        left: 60px;
        z-index: ${e.zIndex.navbarFixed+1};
      }
    `,container:i.css`
      max-width: 1400px;
      margin: 0 auto;
      padding: ${e.spacing.md};

      height: 100%;

      @media only screen and (min-width: ${e.breakpoints.md}) {
        padding: 32px;
      }
    `,closeBtn:i.css`
      right: -5px;
      top: 2px;
      z-index: 1;
      position: absolute;
    `,searchField:i.css`
      position: relative;
    `,search:i.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      padding-bottom: 24px;
    `})));var k=s("./public/app/core/navigation/hooks.ts"),S=s("./public/app/features/search/reducers/searchQueryReducer.ts");const C=(0,n.memo)((()=>{const[e,t]=(0,k.H)(),s="open"===e.get("search");return s?(0,o.jsx)(w,{onCloseSearch:()=>{s&&t(Object.assign({search:null,folder:null},S.xi))}}):null}));C.displayName="SearchWrapper";var T=s("./public/app/features/search/components/SearchResultsFilter.tsx");s("./public/app/features/search/components/ManageDashboards.tsx"),s("./public/app/features/search/components/ConfirmDeleteModal.tsx"),s("./public/app/features/search/components/MoveToFolderModal.tsx")},"./public/app/features/search/reducers/actionTypes.ts":(e,t,s)=>{"use strict";s.d(t,{rd:()=>a,fl:()=>n,mK:()=>i,ZH:()=>r,Nj:()=>o,oe:()=>l,F4:()=>c,u0:()=>d,$L:()=>u,BV:()=>p,PB:()=>h,EF:()=>g,QT:()=>m,MC:()=>f,ji:()=>b,Gs:()=>v,Fe:()=>x,Iy:()=>y,NJ:()=>w,Mj:()=>j});const a="FETCH_RESULTS",n="TOGGLE_SECTION",i="FETCH_ITEMS",r="FETCH_ITEMS_START",o="MOVE_SELECTION_UP",l="MOVE_SELECTION_DOWN",c="SEARCH_START",d="TOGGLE_ALL_CHECKED",u="TOGGLE_SECTION_CHECKED",p="MOVE_ITEMS",h="DELETE_ITEMS",g="TOGGLE_STARRED",m="REMOVE_STARRED",f="QUERY_CHANGE",b="REMOVE_TAG",v="CLEAR_FILTERS",x="SET_TAGS",y="ADD_TAG",w="TOGGLE_SORT",j="LAYOUT_CHANGE"},"./public/app/features/search/reducers/dashboardSearch.ts":(e,t,s)=>{"use strict";s.d(t,{o:()=>i,f:()=>r});var a=s("./public/app/features/search/utils.ts"),n=s("./public/app/features/search/reducers/actionTypes.ts");const i={results:[],loading:!0,initialLoading:!0,selectedIndex:0},r=(e,t)=>{switch(t.type){case n.F4:return e.loading?e:Object.assign({},e,{loading:!0});case n.rd:{const s=t.payload;return s.length>0&&(s[0].selected=!0),Object.assign({},e,{results:s,loading:!1,initialLoading:!1})}case n.fl:{const s=t.payload,n=(0,a.os)(s.title);return Object.assign({},e,{results:e.results.map((e=>s[n]===e[n]?Object.assign({},e,{expanded:!e.expanded}):e))})}case n.mK:{const{section:s,items:a}=t.payload;return Object.assign({},e,{itemsFetching:!1,results:e.results.map((e=>s.id===e.id?Object.assign({},e,{items:a,itemsFetching:!1}):e))})}case n.ZH:{const s=t.payload;return s?Object.assign({},e,{results:e.results.map((e=>e.id===s?Object.assign({},e,{itemsFetching:!0}):e))}):e}case n.oe:{const t=(0,a.SU)(e.results);if(e.selectedIndex<t.length-1){const s=e.selectedIndex+1,n=t[s];return Object.assign({},e,{selectedIndex:s,results:(0,a.MS)(e.results,n)})}return e}case n.Nj:if(e.selectedIndex>0){const t=(0,a.SU)(e.results),s=e.selectedIndex-1,n=t[s];return Object.assign({},e,{selectedIndex:s,results:(0,a.MS)(e.results,n)})}return e;default:return e}}},"./public/app/features/search/reducers/searchQueryReducer.ts":(e,t,s)=>{"use strict";s.d(t,{wi:()=>i,xi:()=>r,Y:()=>o});var a=s("./public/app/features/search/types.ts"),n=s("./public/app/features/search/reducers/actionTypes.ts");const i={query:"",tag:[],starred:!1,skipRecent:!1,skipStarred:!1,folderIds:[],sort:null,layout:a.A.Folders,prevSort:null},r={sort:null,starred:null,query:null,tag:null,layout:null},o=(e,t)=>{switch(t.type){case n.MC:return Object.assign({},e,{query:t.payload});case n.ji:return Object.assign({},e,{tag:e.tag.filter((e=>e!==t.payload))});case n.Fe:return Object.assign({},e,{tag:t.payload});case n.Iy:{const s=t.payload;return s&&!e.tag.includes(s)?Object.assign({},e,{tag:[...e.tag,s]}):e}case n.EF:return Object.assign({},e,{starred:t.payload});case n.QT:return Object.assign({},e,{starred:!1});case n.Gs:return Object.assign({},e,{query:"",tag:[],starred:!1,sort:null});case n.NJ:{const s=t.payload;return e.layout===a.A.Folders?Object.assign({},e,{sort:s,layout:a.A.List}):Object.assign({},e,{sort:s})}case n.Mj:{const s=t.payload;return e.sort&&s===a.A.Folders?Object.assign({},e,{layout:s,sort:null,prevSort:e.sort}):Object.assign({},e,{layout:s,sort:e.prevSort})}default:return e}}},"./public/app/features/search/types.ts":(e,t,s)=>{"use strict";let a,n;s.d(t,{o:()=>a,A:()=>n}),function(e){e.DashDB="dash-db",e.DashHome="dash-home",e.DashFolder="dash-folder"}(a||(a={})),function(e){e.List="list",e.Folders="folders"}(n||(n={}))},"./public/app/features/search/utils.ts":(e,t,s)=>{"use strict";s.d(t,{rR:()=>r,SU:()=>o,os:()=>l,MS:()=>c,xy:()=>d,yS:()=>p,IO:()=>h,jw:()=>m,qD:()=>f,L:()=>b,M$:()=>v,tT:()=>x,vj:()=>y});var a=s("./node_modules/search-query-parser/index.js"),n=s("./public/app/features/search/constants.ts"),i=s("./public/app/features/dashboard/services/DashboardSrv.ts");const r=e=>!n.Vg.includes(e),o=e=>e.flatMap((e=>{const t=r(e.title)?String(e.id):e.title;return e.expanded&&e.items.length?[t,...e.items.map((e=>`${t}-${e.id}`))]:t})),l=e=>r(e)?"id":"title",c=(e,t)=>e.map((e=>{const s=l(t);return(e=Object.assign({},e,{selected:String(e[s])===t})).expanded&&e.items.length?Object.assign({},e,{items:e.items.map((s=>{const[a,n]=t.split("-"),i=l(a);return Object.assign({},s,{selected:String(s.id)===n&&String(e[i])===a})}))}):e})),d=e=>{let t=null;for(const s of e)if(s.expanded&&s.items.length&&(t=d(s.items)),s.selected&&(t=s),t)return t;return null},u=e=>{const t=(0,a.parse)(e,{keywords:["folder"]});return"string"==typeof t?{text:t}:t},p=e=>(t,s)=>e.reduce(((e,t)=>Object.assign({},e,t(e,s))),t),h=e=>e.length?e.reduce(((e,t)=>t.items?[...e,...t.items.filter((e=>e.checked))]:e),[]):[],g=e=>e.length?h(e).map((e=>e.uid)):[],m=e=>{const t={folders:[],dashboards:[]};return e.length?e.reduce(((t,s)=>0!==(null==s?void 0:s.id)&&s.checked?Object.assign({},t,{folders:[...t.folders,s.uid]}):Object.assign({},t,{dashboards:g(e)})),t):t},f=(e,t=!1)=>{var s;const a=Object.assign({},e,{sort:null===(s=e.sort)||void 0===s?void 0:s.value});if(!t)return a;let n=[];if("current"===u(e.query).folder)try{const e=(0,i.h4)().getCurrent();null!=e&&e.meta.folderId&&(n=[null==e?void 0:e.meta.folderId])}catch(e){console.error(e)}return Object.assign({},a,{query:u(e.query).text,folderIds:n})},b=e=>{var t;return!!e&&Boolean(e.query||(null===(t=e.tag)||void 0===t?void 0:t.length)>0||e.starred||e.sort)},v=e=>r(e.title)?e.expanded?"folder-open":"folder":e.icon,x=(e="General")=>`${n.qi}.${e.toLowerCase()}`,y=e=>{const t=Object.entries(e).reduce(((e,[t,s])=>s?"tag"!==t||Array.isArray(s)?"sort"===t?Object.assign({},e,{sort:{value:s}}):Object.assign({},e,{[t]:s}):Object.assign({},e,{tag:[s]}):e),{});if(e.folder){var s;const a=`folder:${e.folder}`;return Object.assign({},t,{query:`${a} ${(null!==(s=t.query)&&void 0!==s?s:"").replace(a,"")}`})}return Object.assign({},t)}},"./public/app/features/teams/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{PL:()=>i,ql:()=>r,y$:()=>c,iI:()=>d,n2:()=>u,UD:()=>p,ZP:()=>h});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const n=(0,a.oM)({name:"teams",initialState:{teams:[],searchQuery:"",hasFetched:!1},reducers:{teamsLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,teams:t.payload}),setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload})}}),{teamsLoaded:i,setSearchQuery:r}=n.actions,o=n.reducer,l=(0,a.oM)({name:"team",initialState:{team:{},members:[],groups:[],searchMemberQuery:""},reducers:{teamLoaded:(e,t)=>Object.assign({},e,{team:t.payload}),teamMembersLoaded:(e,t)=>Object.assign({},e,{members:t.payload}),setSearchMemberQuery:(e,t)=>Object.assign({},e,{searchMemberQuery:t.payload}),teamGroupsLoaded:(e,t)=>Object.assign({},e,{groups:t.payload})}}),{teamLoaded:c,teamGroupsLoaded:d,teamMembersLoaded:u,setSearchMemberQuery:p}=l.actions,h={teams:o,team:l.reducer}},"./public/app/features/templating/template_srv.ts":(e,t,s)=>{"use strict";s.d(t,{J:()=>j});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./public/app/features/variables/state/selectors.ts"),r=s("./public/app/features/variables/utils.ts"),o=s("./public/app/features/variables/guard.ts"),l=s("./packages/grafana-runtime/src/index.ts"),c=s("./public/app/core/utils/kbn.ts"),d=s("./public/app/features/variables/shared/formatVariable.ts"),u=s("./public/app/features/variables/state/types.ts"),p=s("./public/app/features/variables/adapters.ts");let h;!function(e){e.lucene="lucene",e.raw="raw",e.regex="regex",e.pipe="pipe",e.distributed="distributed",e.csv="csv",e.html="html",e.json="json",e.percentEncode="percentencode",e.singleQuote="singlequote",e.doubleQuote="doublequote",e.sqlString="sqlstring",e.date="date",e.glob="glob",e.text="text",e.queryParam="queryparam"}(h||(h={}));const g=new n.Registry((()=>[{id:h.lucene,name:"Lucene",description:"Values are lucene escaped and multi-valued variables generate an OR expression",formatter:({value:e})=>{if("string"==typeof e)return m(e);if(e instanceof Array&&0===e.length)return"__empty__";return"("+(0,a.map)(e,(e=>'"'+m(e)+'"')).join(" OR ")+")"}},{id:h.raw,name:"raw",description:"Keep value as is",formatter:({value:e})=>e},{id:h.regex,name:"Regex",description:"Values are regex escaped and multi-valued variables generate a (<value>|<value>) expression",formatter:({value:e})=>{if("string"==typeof e)return c.Z.regexEscape(e);const t=(0,a.map)(e,c.Z.regexEscape);return 1===t.length?t[0]:"("+t.join("|")+")"}},{id:h.pipe,name:"Pipe",description:"Values are separated by | character",formatter:({value:e})=>"string"==typeof e?e:e.join("|")},{id:h.distributed,name:"Distributed",description:"Multiple values are formatted like variable=value",formatter:({value:e},t)=>"string"==typeof e?e:(e=(0,a.map)(e,((e,s)=>0!==s?t.name+"="+e:e))).join(",")},{id:h.csv,name:"Csv",description:"Comma-separated values",formatter:({value:e})=>(0,a.isArray)(e)?e.join(","):e},{id:h.html,name:"HTML",description:"HTML escaping of values",formatter:({value:e})=>(0,a.isArray)(e)?n.textUtil.escapeHtml(e.join(", ")):n.textUtil.escapeHtml(e)},{id:h.json,name:"JSON",description:"JSON stringify valu",formatter:({value:e})=>JSON.stringify(e)},{id:h.percentEncode,name:"Percent encode",description:"Useful for URL escaping values",formatter:({value:e})=>(0,a.isArray)(e)?f("{"+e.join(",")+"}"):f(e)},{id:h.singleQuote,name:"Single quote",description:"Single quoted values",formatter:({value:e})=>{const t=new RegExp("'","g");return(0,a.isArray)(e)?(0,a.map)(e,(e=>`'${(0,a.replace)(e,t,"\\'")}'`)).join(","):`'${(0,a.replace)(e,t,"\\'")}'`}},{id:h.doubleQuote,name:"Double quote",description:"Double quoted values",formatter:({value:e})=>{const t=new RegExp('"',"g");return(0,a.isArray)(e)?(0,a.map)(e,(e=>`"${(0,a.replace)(e,t,'\\"')}"`)).join(","):`"${(0,a.replace)(e,t,'\\"')}"`}},{id:h.sqlString,name:"SQL string",description:"SQL string quoting and commas for use in IN statements and other scenarios",formatter:({value:e})=>{const t=new RegExp("'","g");return(0,a.isArray)(e)?(0,a.map)(e,(e=>`'${(0,a.replace)(e,t,"''")}'`)).join(","):`'${(0,a.replace)(e,t,"''")}'`}},{id:h.date,name:"Date",description:"Format date in different ways",formatter:({value:e,args:t})=>{var s;const a=null!==(s=t[0])&&void 0!==s?s:"iso";switch(a){case"ms":return e;case"seconds":return`${Math.round(parseInt(e,10)/1e3)}`;case"iso":return(0,n.dateTime)(parseInt(e,10)).toISOString();default:return(0,n.dateTime)(parseInt(e,10)).format(a)}}},{id:h.glob,name:"Glob",description:"Format multi-valued variables using glob syntax, example {value1,value2}",formatter:({value:e})=>(0,a.isArray)(e)&&e.length>1?"{"+e.join(",")+"}":e},{id:h.text,name:"Text",description:"Format variables in their text representation. Example in multi-variable scenario A + B + C.",formatter:(e,t)=>{if("string"==typeof e.text)return e.value===u.r2?u.xk:e.text;return(null==t?void 0:t.current)?(0,d.y)(t):e.value}},{id:h.queryParam,name:"Query parameter",description:"Format variables as URL parameters. Example in multi-variable scenario A + B + C => var-foo=A&var-foo=B&var-foo=C.",formatter:(e,t)=>{const{name:s,type:a}=t,n=p.z.get(a).getValueForUrl(t);return Array.isArray(n)?n.map((e=>b(s,e))).join("&"):b(s,n)}}]));function m(e){return e.replace(/([\!\*\+\-\=<>\s\&\|\(\)\[\]\{\}\^\~\?\:\\/"])/g,"\\$1")}function f(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()))}function b(e,t){return`var-${e}=${f(t)}`}var v=s("./public/app/core/utils/explore.ts");function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const y={getFilteredVariables:i.Q4,getVariables:i.ng,getVariableWithName:i._K};const w=new class{constructor(e=y){x(this,"_variables",void 0),x(this,"regex",r.J7),x(this,"index",{}),x(this,"grafanaVariables",{}),x(this,"timeRange",null),x(this,"fieldAccessorCache",{}),this.dependencies=e,this._variables=[]}init(e,t){this._variables=e,this.timeRange=t,this.updateIndex()}get variables(){return(0,n.deprecationWarning)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){if(this.index=this._variables.reduce(((e,t)=>{var s;return t.current&&(t.current.isNone||((s=t.current.value)||""===s))&&(e[t.name]=t),e}),{}),this.timeRange){const e=this.timeRange.from.valueOf().toString(),t=this.timeRange.to.valueOf().toString();this.index=Object.assign({},this.index,{__from:{current:{value:e,text:e}},__to:{current:{value:t,text:t}}})}}updateTimeRange(e){this.timeRange=e,this.updateIndex()}variableInitialized(e){this.index[e.name]=e}getAdhocFilters(e){let t=[];for(const s of this.getAdHocVariables())(null===s.datasource||s.datasource===e||0===s.datasource.indexOf("$")&&this.replace(s.datasource)===e)&&(t=t.concat(s.filters));return t}formatValue(e,t,s,a){if(s=s||{},null==e)return"";if((0,o.Kn)(s)&&t!==h.queryParam)return"";if(Array.isArray(e)||"object"!=typeof e||(e=`${e}`),"function"==typeof t)return t(e,s,this.formatValue);t||(t=h.glob);let n=t.split(":");n.length>1?(t=n[0],n=n.slice(1)):n=[];let i=g.getIfExists(t);i||(console.error(`Variable format ${t} not found. Using glob format as fallback.`),i=g.get(h.glob));const r={value:e,args:n,text:null!=a?a:e};return i.formatter(r,s)}setGrafanaVariable(e,t){this.grafanaVariables[e]=t}setGlobalVariable(e,t){(0,n.deprecationWarning)("template_srv.ts","setGlobalVariable",""),this.index=Object.assign({},this.index,{[e]:{current:t}})}getVariableName(e){this.regex.lastIndex=0;const t=this.regex.exec(e);if(!t)return null;return t.slice(1).find((e=>void 0!==e))}variableExists(e){const t=this.getVariableName(e),s=t&&this.getVariableAtIndex(t);return null!=s}highlightVariablesAsHtml(e){return e&&(0,a.isString)(e)?(e=(0,a.escape)(e),this.regex.lastIndex=0,e.replace(this.regex,((e,t,s,a,n)=>this.getVariableAtIndex(t||s||n)?'<span class="template-variable">'+e+"</span>":e))):e}getAllValue(e){if(e.allValue)return e.allValue;const t=[];for(let s=1;s<e.options.length;s++)t.push(e.options[s].value);return t}getFieldAccessor(e){const t=this.fieldAccessorCache[e];return t||(this.fieldAccessorCache[e]=(0,a.property)(e))}getVariableValue(e,t,s){const a=s[e];return a?t?this.getFieldAccessor(t)(a.value):a.value:null}getVariableText(e,t,s){const a=s[e];return a?a.value===t||"string"!=typeof t?a.text:t:null}replace(e,t,s){return e?(this.regex.lastIndex=0,e.replace(this.regex,((e,a,n,i,r,l,c)=>{const d=a||n||r,p=this.getVariableAtIndex(d),g=i||c||s;if(t){const e=this.getVariableValue(d,l,t),s=this.getVariableText(d,e,t);if(null!=e)return this.formatValue(e,g,p,s)}if(!p)return e;if((0,o.Kn)(p)){const e=(0,v.Xh)(p.filters),t=p.id;return this.formatValue(e,g,p,t)}const m=this.grafanaVariables[p.current.value];if(m)return this.formatValue(m,g,p);let f=p.current.value,b=p.current.text;if(this.isAllValue(f)&&(f=this.getAllValue(p),b=u.xk,p.allValue&&g!==h.text&&g!==h.queryParam))return this.replace(f);if(l){const e=this.getVariableValue(d,l,{[d]:{value:f,text:b}});if(null!=e)return this.formatValue(e,g,p,b)}return this.formatValue(f,g,p,b)}))):null!=e?e:""}isAllValue(e){return e===u.r2||Array.isArray(e)&&e[0]===u.r2}replaceWithText(e,t){return(0,n.deprecationWarning)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(e,t,"text")}getVariableAtIndex(e){if(e)return this.index[e]?this.index[e]:this.dependencies.getVariableWithName(e)}getAdHocVariables(){return this.dependencies.getFilteredVariables(o.Kn)}};(0,l.setTemplateSrv)(w);const j=()=>w},"./public/app/features/users/state/reducers.ts":(e,t,s)=>{"use strict";s.d(t,{Ol:()=>o,oX:()=>l,TQ:()=>c,eT:()=>d,ZP:()=>u});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./public/app/core/config.ts");const i={invitees:[],users:[],searchQuery:"",searchPage:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,hasFetched:!1},r=(0,a.oM)({name:"users",initialState:i,reducers:{usersLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,users:t.payload}),inviteesLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,invitees:t.payload}),setUsersSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload,searchPage:i.searchPage}),setUsersSearchPage:(e,t)=>Object.assign({},e,{searchPage:t.payload})}}),{inviteesLoaded:o,setUsersSearchQuery:l,setUsersSearchPage:c,usersLoaded:d}=r.actions,u={users:r.reducer}},"./public/app/features/variables/adapters.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>os,z:()=>ls});var a=s("./packages/grafana-data/src/index.ts"),n=s("./node_modules/lodash/lodash.js"),i=s("./public/app/features/variables/types.ts"),r=s("./public/app/features/variables/query/reducer.ts"),o=s("./public/app/store/store.ts"),l=s("./public/app/features/variables/state/actions.ts"),c=s("./node_modules/react/index.js"),d=s("./node_modules/react-redux/es/index.js"),u=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),p=s("./packages/grafana-ui/src/index.ts"),h=s("./packages/grafana-e2e-selectors/src/index.ts"),g=s("./packages/grafana-runtime/src/index.ts"),m=s("./public/app/features/variables/state/types.ts"),f=s("./public/app/features/variables/editor/VariableSectionHeader.tsx"),b=s("./node_modules/react/jsx-runtime.js");function v({value:e,name:t,tooltip:s,onChange:a,ariaLabel:n}){return(0,b.jsx)(p.InlineField,{label:t,labelWidth:20,tooltip:s,children:(0,b.jsx)(p.InlineSwitch,{label:t,value:e,onChange:a,"aria-label":n})})}var x,y=s("./public/app/features/variables/editor/VariableTextField.tsx");const w=({onMultiChanged:e,onPropChange:t,variable:s})=>{var a;const n=(0,c.useCallback)((t=>{e((0,m.GT)(s),t.target.checked)}),[e,s]),i=(0,c.useCallback)((e=>{t({propName:"includeAll",propValue:e.target.checked})}),[t]),r=(0,c.useCallback)((e=>{t({propName:"allValue",propValue:e.currentTarget.value})}),[t]);return(0,b.jsxs)(p.VerticalGroup,{spacing:"none",children:[x||(x=(0,b.jsx)(f.e,{name:"Selection options"})),(0,b.jsx)(p.InlineFieldRow,{children:(0,b.jsx)(v,{value:s.multi,name:"Multi-value",tooltip:"Enables multiple values to be selected at the same time",onChange:n,ariaLabel:h.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsMultiSwitch})}),(0,b.jsx)(p.InlineFieldRow,{children:(0,b.jsx)(v,{value:s.includeAll,name:"Include All option",tooltip:"Enables an option to include all variables",onChange:i,ariaLabel:h.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsIncludeAllSwitch})}),s.includeAll&&(0,b.jsx)(p.InlineFieldRow,{children:(0,b.jsx)(y.V,{value:null!==(a=s.allValue)&&void 0!==a?a:"",onChange:r,name:"Custom all value",placeholder:"blank = auto",ariaLabel:h.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInput,labelWidth:20})})]})};w.displayName="SelectionOptionsEditor";var j=s("./public/app/features/variables/state/selectors.ts"),k=s("./public/app/features/variables/editor/reducer.ts"),S=s("./public/app/features/variables/state/sharedReducer.ts"),C=s("./public/app/features/variables/editor/LegacyVariableQueryEditor.tsx"),T=s("./public/app/features/variables/guard.ts"),N=s("./public/app/features/plugins/plugin_loader.ts");function O({datasource:e,query:t,onChange:s}){const a=(0,c.useCallback)((e=>{s({refId:"StandardVariableQuery",query:e})}),[s]);return(0,b.jsx)(C.R,{query:t.query,onChange:a,datasource:e,templateSrv:(0,g.getTemplateSrv)()})}var I=s("./node_modules/rxjs/dist/esm5/internal/Subscription.js"),P=s("./public/app/features/variables/query/VariableQueryRunner.ts");const M=(e,t)=>async(s,n)=>{const i=(0,j.E0)(e.id,n());try{var r;n().templating.editor.id===i.id&&s((0,k.PV)({errorProp:"update"}));const o=await(0,g.getDataSourceSrv)().get(null!==(r=i.datasource)&&void 0!==r?r:"");await new Promise(((s,n)=>{const i=new I.w0,r=function(e,t,s){return{next:n=>n.state===a.LoadingState.Error?(s.unsubscribe(),void t(n.error)):n.state===a.LoadingState.Done?(s.unsubscribe(),void e()):void 0,error:e=>{s.unsubscribe(),t(e)},complete:()=>{s.unsubscribe(),e()}}}(s,n,i),l=(0,P.eg)().getResponse(e).subscribe(r);i.add(l),(0,P.eg)().queueRequest({identifier:e,datasource:o,searchFilter:t})}))}catch(e){const t=(0,g.toDataQueryError)(e);throw n().templating.editor.id===i.id&&s((0,k.Sg)({errorProp:"update",errorText:t.message})),t}},F=(e,t)=>async(s,a)=>{try{var n;const i=null===(n=a().templating.editor.extended)||void 0===n?void 0:n.dataSource,r=await(0,g.getDataSourceSrv)().get(null!=t?t:"");i&&i.type!==(null==r?void 0:r.type)&&s((0,S.Pl)((0,m.Y6)(e,{propName:"query",propValue:""}))),s((0,k.z7)({propName:"dataSource",propValue:r}));const o=await async function(e,t=N.nL){if((0,T.d7)(e))return e.variables.editor;if((0,T.X7)(e)){var s;const a=await t(e.meta);if(!a.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return null!==(s=a.components.QueryEditor)&&void 0!==s?s:null}return(0,T.Ju)(e)?O:(0,T.R)(e)?null!==(a=(await t(e.meta)).components.VariableQueryEditor)&&void 0!==a?a:C.R:null;var a}(r);s((0,k.z7)({propName:"VariableQueryEditor",propValue:o}))}catch(e){console.error(e)}};function A(e){if("object"!=typeof e)return{query:e};return Object.keys(e).reduce(((t,s)=>{const a=e[s];if("object"!=typeof a)return t[s]=a,t;const n=A(a);for(let e in n)n.hasOwnProperty(e)&&(t[`${s}_${e}`]=n[e]);return t}),{})}var D=s("./public/app/features/dashboard/services/TimeSrv.ts"),$=s("./public/app/features/variables/editor/VariableSelectField.tsx");const L=[{label:"On dashboard load",value:i.Bd.onDashboardLoad},{label:"On time range change",value:i.Bd.onTimeRangeChanged}];function E({onChange:e,refresh:t}){const s=(0,c.useMemo)((()=>{var e;return null!==(e=L.find((e=>e.value===t)))&&void 0!==e?e:L[0]}),[t]);return(0,b.jsx)($.u,{name:"Refresh",value:s,options:L,onChange:e,labelWidth:10,ariaLabel:h.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelect,tooltip:"When to update the values of this variable."})}const R=[{label:"Disabled",value:i.$U.disabled},{label:"Alphabetical (asc)",value:i.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:i.$U.alphabeticalDesc},{label:"Numerical (asc)",value:i.$U.numericalAsc},{label:"Numerical (desc)",value:i.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:i.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:i.$U.alphabeticalCaseInsensitiveDesc}];function _({onChange:e,sort:t}){const s=(0,c.useMemo)((()=>{var e;return null!==(e=R.find((e=>e.value===t)))&&void 0!==e?e:R[0]}),[t]);return(0,b.jsx)($.u,{name:"Sort",value:s,options:R,onChange:e,labelWidth:10,ariaLabel:h.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelect,tooltip:"How to sort the values of this variable."})}var V,B;function z(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const U={initQueryVariableEditor:e=>async(t,s)=>{const a=(0,j.E0)(e.id,s());await t(F((0,m.GT)(a),a.datasource))},changeQueryVariableDataSource:F,changeQueryVariableQuery:(e,t,s)=>async(a,n)=>{const i=(0,j.E0)(e.id,n());if(function(e,t){if("string"==typeof t&&t.match(new RegExp("\\$"+e+"(/| |$)")))return!0;const s=A(t);for(let t in s)if(s.hasOwnProperty(t)){const a=s[t];if("string"==typeof a&&a.match(new RegExp("\\$"+e+"(/| |$)")))return!0}return!1}(i.name,t)){const e="Query cannot contain a reference to itself. Variable: $"+i.name;a((0,k.Sg)({errorProp:"query",errorText:e}))}else a((0,k.PV)({errorProp:"query"})),a((0,S.Pl)((0,m.Y6)(e,{propName:"query",propValue:t}))),s?a((0,S.Pl)((0,m.Y6)(e,{propName:"definition",propValue:s}))):"string"==typeof t&&a((0,S.Pl)((0,m.Y6)(e,{propName:"definition",propValue:t}))),await a((0,l.Rk)(e))},changeVariableMultiValue:l.Z7},q=(0,d.connect)((e=>({editor:e.templating.editor})),U);class H extends c.PureComponent{constructor(...e){super(...e),z(this,"state",{regex:null,tagsQuery:null,tagValuesQuery:null}),z(this,"onDataSourceChange",(e=>{this.props.onPropChange({propName:"datasource",propValue:e.isDefault?null:e.name})})),z(this,"onLegacyQueryChange",(async(e,t)=>{this.props.variable.query!==e&&this.props.changeQueryVariableQuery((0,m.GT)(this.props.variable),e,t)})),z(this,"onQueryChange",(async e=>{if(this.props.variable.query!==e){let t="";e&&e.hasOwnProperty("query")&&"string"==typeof e.query&&(t=e.query),this.props.changeQueryVariableQuery((0,m.GT)(this.props.variable),e,t)}})),z(this,"onRegExChange",(e=>{this.setState({regex:e.currentTarget.value})})),z(this,"onRegExBlur",(async e=>{const t=e.currentTarget.value;this.props.variable.regex!==t&&this.props.onPropChange({propName:"regex",propValue:t,updateOptions:!0})})),z(this,"onRefreshChange",(e=>{this.props.onPropChange({propName:"refresh",propValue:e.value})})),z(this,"onSortChange",(async e=>{this.props.onPropChange({propName:"sort",propValue:e.value,updateOptions:!0})})),z(this,"onSelectionOptionsChange",(async({propValue:e,propName:t})=>{this.props.onPropChange({propName:t,propValue:e,updateOptions:!0})})),z(this,"renderQueryEditor",(()=>{const{editor:e,variable:t}=this.props;if(!e.extended||!e.extended.dataSource||!e.extended.VariableQueryEditor)return null;const s=t.query,n=e.extended.dataSource,i=e.extended.VariableQueryEditor;if((0,T.NX)(i,n))return(0,b.jsx)(i,{datasource:n,query:s,templateSrv:(0,g.getTemplateSrv)(),onChange:this.onLegacyQueryChange});const r=(0,D.$t)().timeRange();return(0,T.$7)(i,n)?(0,b.jsx)(i,{datasource:n,query:s,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:a.LoadingState.Done,timeRange:r},range:r,onBlur:()=>{},history:[]}):null}))}async componentDidMount(){await this.props.initQueryVariableEditor((0,m.GT)(this.props.variable))}componentDidUpdate(e){e.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,m.GT)(this.props.variable),this.props.variable.datasource)}render(){var e;return(0,b.jsxs)(p.VerticalGroup,{spacing:"xs",children:[V||(V=(0,b.jsx)(f.e,{name:"Query Options"})),(0,b.jsxs)(p.VerticalGroup,{spacing:"lg",children:[(0,b.jsxs)(p.VerticalGroup,{spacing:"none",children:[(0,b.jsxs)(p.InlineFieldRow,{children:[(0,b.jsx)(p.InlineField,{label:"Data source",labelWidth:20,children:(0,b.jsx)(g.DataSourcePicker,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0})}),(0,b.jsx)(E,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh})]}),(0,b.jsx)("div",{className:u.css`
                flex-direction: column;
                width: 100%;
              `,children:this.renderQueryEditor()}),(0,b.jsx)(y.V,{value:null!==(e=this.state.regex)&&void 0!==e?e:this.props.variable.regex,name:"Regex",placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,labelWidth:20,tooltip:B||(B=(0,b.jsxs)("div",{children:["Optional, if you want to extract part of a series name or metric node segment. Named capture groups can be used to separate the display text and value (",(0,b.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank",children:"see examples"}),")."]})),ariaLabel:h.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInput,grow:!0}),(0,b.jsx)(_,{onChange:this.onSortChange,sort:this.props.variable.sort})]}),(0,b.jsx)(w,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})]})]})}}const G=q(H);var W=s("./public/app/features/variables/utils.ts");let Z;!function(e){e[e.moveUp=38]="moveUp",e[e.moveDown=40]="moveDown",e[e.select=32]="select",e[e.cancel=27]="cancel",e[e.selectAndClose=13]="selectAndClose"}(Z||(Z={}));const Q=["value","id","onNavigate"];function K(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Y extends c.PureComponent{constructor(...e){super(...e),K(this,"onKeyDown",(e=>{if(Z[e.keyCode]){const t=e.ctrlKey||e.metaKey||e.shiftKey;this.props.onNavigate(e.keyCode,t),e.preventDefault()}})),K(this,"onChange",(e=>{this.props.onChange(e.target.value)}))}render(){const e=this.props,{value:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,Q);return(0,b.jsx)("input",Object.assign({},s,{ref:e=>{e&&(e.focus(),e.setAttribute("style",`width:${Math.max(e.width,80)}px`))},type:"text",className:"gf-form-input",value:null!=t?t:"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:"Enter variable value"}))}}var J=s("./public/app/features/variables/pickers/OptionsPicker/reducer.ts");const X=(e,t)=>async(s,a)=>e===Z.cancel?await s(te()):e===Z.select?s(ae(t)):e===Z.selectAndClose?(s(ae(t,!0)),await s(te())):e===Z.moveDown?s((0,J.Ew)(1)):e===Z.moveUp?s((0,J.Ew)(-1)):void 0,ee=(e="")=>async(t,s)=>{const{id:a,queryValue:i}=s().templating.optionsPicker,{query:r,options:o}=(0,j.E0)(a,s());if(t((0,J.Ug)(e)),(0,n.trim)(i)!==(0,n.trim)(e))return(0,W.bf)(r)?ne(t,s,e):t((0,J.ss)(o))},te=e=>async(t,s)=>{const a=s().templating.optionsPicker,n=(0,j.E0)(a.id,s()),i={option:ie(a)},r={propName:"queryValue",propValue:a.queryValue};t((0,S.Q8)((0,m.Y6)(n,i))),t((0,S.Pl)((0,m.Y6)(n,r)));const o=(0,j.E0)(a.id,s());if(t((0,J.nn)()),(0,W.Tt)(n)!==(0,W.Tt)(o))return e?e(o):await(async e=>{const t=ls.get(e.type);await t.setValue(e,e.current,!0)})(o)},se=({id:e},t)=>async(s,a)=>{const n=a().templating.optionsPicker;n.id&&n.id!==e&&await s(te(t));const i=(0,j.E0)(e,a());s((0,J.aN)(i))},ae=(e,t=!1)=>(s,a)=>{const{highlightIndex:n,options:i}=a().templating.optionsPicker,r=i[n];s((0,J._M)({option:r,forceSelect:t,clearOthers:e}))},ne=(0,n.debounce)((async(e,t,s)=>{try{const{id:a}=t().templating.optionsPicker,n=(0,j.E0)(a,t()),i=ls.get(n.type);await i.updateOptions(n,s);const r=(0,j.E0)(a,t());e((0,J.wF)(r.options))}catch(e){console.error(e)}}),500);function ie(e){const{options:t,selectedValues:s,queryValue:a,multi:n}=e;if(0===t.length&&a&&a.length>0)return{text:a,value:a,selected:!1};if(!n)return s.find((e=>e.selected));const i=[],r=[];for(const e of s)e.selected&&(i.push(e.text.toString()),r.push(e.value.toString()));return{value:r,text:i,selected:!0}}var re,oe;const le=["multi","values","highlightIndex","selectedValues","onToggle","onToggleAll"];function ce(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class de extends c.PureComponent{constructor(...e){super(...e),ce(this,"onToggle",(e=>t=>{const s=t.shiftKey||t.ctrlKey||t.metaKey;this.handleEvent(t),this.props.onToggle(e,s)})),ce(this,"onToggleAll",(e=>{this.handleEvent(e),this.props.onToggleAll()}))}handleEvent(e){e.preventDefault(),e.stopPropagation()}render(){const e=this.props,{multi:t,values:s}=e,a=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,le);return(0,b.jsx)("div",{className:""+(t?"variable-value-dropdown multi":"variable-value-dropdown single"),children:(0,b.jsx)("div",{className:"variable-options-wrapper",children:(0,b.jsxs)("ul",Object.assign({className:ue,"aria-label":h.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown},a,{children:[this.renderMultiToggle(),s.map(((e,t)=>this.renderOption(e,t)))]}))})})}renderOption(e,t){const{highlightIndex:s}=this.props,a=e.selected?"variable-option pointer selected":"variable-option pointer",n=t===s?`${a} highlighted`:a;return(0,b.jsx)("li",{children:(0,b.jsxs)("a",{role:"checkbox","aria-checked":e.selected,className:n,onClick:this.onToggle(e),children:[re||(re=(0,b.jsx)("span",{className:"variable-option-icon"})),(0,b.jsx)("span",{"data-testid":h.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${e.text}`),children:e.text})]})},`${e.value}`)}renderMultiToggle(){const{multi:e,selectedValues:t}=this.props;return e?(0,b.jsx)(p.Tooltip,{content:"Clear selections",placement:"top",children:(0,b.jsxs)("a",{className:""+(t.length>1?"variable-options-column-header many-selected":"variable-options-column-header"),role:"checkbox","aria-checked":t.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top",children:[oe||(oe=(0,b.jsx)("span",{className:"variable-option-icon"})),"Selected (",t.length,")"]})}):null}}const ue=(0,u.cx)("variable-options-column",u.css`
    list-style-type: none;
  `);var pe,he=s("./public/app/features/variables/shared/formatVariable.ts");const ge=({loading:e,onClick:t,text:s,onCancel:a,id:n})=>{var i,r;const o=(0,p.useStyles)(be),l=(0,c.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),t()}),[t]);return e?(0,b.jsxs)("div",{className:o.container,"data-testid":h.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${s}`),title:s,id:n,children:[i||(i=(0,b.jsx)(me,{text:s})),r||(r=(0,b.jsx)(fe,{onCancel:a}))]}):(0,b.jsxs)("button",{onClick:l,className:o.container,"data-testid":h.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${s}`),"aria-expanded":!1,"aria-controls":`options-${n}`,id:n,title:s,children:[(0,b.jsx)(me,{text:s}),pe||(pe=(0,b.jsx)(p.Icon,{"aria-hidden":!0,name:"angle-down",size:"sm"}))]})},me=({text:e})=>{const t=(0,p.useStyles)(be);return(0,b.jsx)("span",{className:t.textAndTags,children:e})},fe=({onCancel:e})=>{const t=(0,c.useCallback)((t=>{t.preventDefault(),e()}),[e]);return(0,b.jsx)(p.Tooltip,{content:"Cancel query",children:(0,b.jsx)(p.Icon,{className:"spin-clockwise",name:"sync",size:"xs",onClick:t,"aria-label":h.wl.components.LoadingIndicator.icon})})},be=e=>({container:u.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${e.spacing.sm};
    background-color: ${e.colors.formInputBg};
    border: 1px solid ${e.colors.formInputBorder};
    border-radius: ${e.border.radius.sm};
    display: flex;
    align-items: center;
    color: ${e.colors.text};
    height: ${e.height.md}px;

    .label-tag {
      margin: 0 5px;
    }
  `,textAndTags:u.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${e.spacing.xxs};
    user-select: none;
  `});function ve(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const xe=()=>{const e={openOptions:se,commitChangesToVariable:te,filterOrSearchOptions:ee,toggleAllOptions:J.iQ,toggleOption:J._M,navigateOptions:X},t=(0,d.connect)((e=>({picker:e.templating.optionsPicker})),e);class s extends c.PureComponent{constructor(...e){super(...e),ve(this,"onShowOptions",(()=>this.props.openOptions((0,m.GT)(this.props.variable),this.props.onVariableChange))),ve(this,"onHideOptions",(()=>this.props.commitChangesToVariable(this.props.onVariableChange))),ve(this,"onToggleOption",((e,t)=>{((0,T.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(e,t)})),ve(this,"onToggleSingleValueVariable",((e,t)=>{this.props.toggleOption({option:e,clearOthers:t,forceSelect:!1}),this.onHideOptions()})),ve(this,"onToggleMultiValueVariable",((e,t)=>{this.props.toggleOption({option:e,clearOthers:t,forceSelect:!1})})),ve(this,"onCancel",(()=>{(0,P.eg)().cancelRequest((0,m.GT)(this.props.variable))}))}render(){const{variable:e,picker:t}=this.props,s=t.id===e.id;return(0,b.jsx)("div",{className:"variable-link-wrapper",children:s?this.renderOptions(t):this.renderLink(e)})}renderLink(e){const t=(0,he.y)(e),s=e.state===a.LoadingState.Loading;return(0,b.jsx)(ge,{id:e.id,text:t,onClick:this.onShowOptions,loading:s,onCancel:this.onCancel})}renderOptions(e){const{id:t}=this.props.variable;return(0,b.jsxs)(p.ClickOutsideWrapper,{onClick:this.onHideOptions,children:[(0,b.jsx)(Y,{id:t,value:e.queryValue,onChange:this.props.filterOrSearchOptions,onNavigate:this.props.navigateOptions,"aria-expanded":!0,"aria-controls":`options-${t}`}),(0,b.jsx)(de,{values:e.options,onToggle:this.onToggleOption,onToggleAll:this.props.toggleAllOptions,highlightIndex:e.highlightIndex,multi:e.multi,selectedValues:e.selectedValues,id:`options-${t}`})]})}}const n=t(s);return n.displayName="OptionsPicker",n},ye=["index","id","state","global","queryValue"];const we=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:r.rT,reducer:r.mT,picker:xe(),editor:G,dependsOn:(e,t)=>(0,W.QI)(e.query,e.datasource,e.regex,t.name),setValue:async(e,t,s=!1)=>{await(0,o.WI)((0,l.Fz)((0,m.GT)(e),t,s))},setValueFromUrl:async(e,t)=>{await(0,o.WI)((0,l.Ci)((0,m.GT)(e),t))},updateOptions:async(e,t)=>{await(0,o.WI)(M((0,m.GT)(e),t))},getSaveModel:e=>{const t=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}((0,n.cloneDeep)(e),ye);return e.refresh!==i.Bd.never?Object.assign({},t,{options:[]}):t},getValueForUrl:e=>(0,W.HY)(e)?m.xk:e.current.value});var je=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const ke=Object.assign({},i.Eg,{type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}}),Se=(0,je.oM)({name:"templating/custom",initialState:m.sX,reducers:{createCustomOptionsFromQuery:(e,t)=>{var s;const a=(0,m.ir)(e,t.payload.id),{includeAll:n,query:i}=a,r=(null!==(s=i.match(/(?:\\,|[^,])+/g))&&void 0!==s?s:[]).map((e=>{var t;e=e.replace(/\\,/g,",");const s=null!==(t=/^(.+)\s:\s(.+)$/g.exec(e))&&void 0!==t?t:[];if(3===s.length){const[,e,t]=s;return{text:e.trim(),value:t.trim(),selected:!1}}return{text:e.trim(),value:e.trim(),selected:!1}}));n&&r.unshift({text:m.xk,value:m.r2,selected:!1}),a.options=r}}}),Ce=Se.reducer,{createCustomOptionsFromQuery:Te}=Se.actions;var Ne,Oe=s("./public/app/core/utils/connectWithReduxStore.tsx"),Ie=s("./public/app/features/variables/editor/VariableTextAreaField.tsx");function Pe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Me extends c.PureComponent{constructor(...e){super(...e),Pe(this,"onChange",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),Pe(this,"onSelectionOptionsChange",(async({propName:e,propValue:t})=>{this.props.onPropChange({propName:e,propValue:t,updateOptions:!0})})),Pe(this,"onBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){return(0,b.jsxs)(p.VerticalGroup,{spacing:"xs",children:[Ne||(Ne=(0,b.jsx)(f.e,{name:"Custom options"})),(0,b.jsxs)(p.VerticalGroup,{spacing:"md",children:[(0,b.jsx)(p.VerticalGroup,{spacing:"none",children:(0,b.jsx)(Ie.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:50,labelWidth:27})}),(0,b.jsx)(w,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})," "]})]})}}const Fe={changeVariableMultiValue:l.Z7},Ae=(0,Oe.R)(Me,((e,t)=>({})),Fe),De=["index","id","state","global"];const $e=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:ke,reducer:Ce,picker:xe(),editor:Ae,dependsOn:()=>!1,setValue:async(e,t,s=!1)=>{await(0,o.WI)((0,l.Fz)((0,m.GT)(e),t,s))},setValueFromUrl:async(e,t)=>{await(0,o.WI)((0,l.Ci)((0,m.GT)(e),t))},updateOptions:async e=>{var t;await(0,o.WI)((t=(0,m.GT)(e),async e=>{await e(Te((0,m.Y6)(t))),await e((0,l.xQ)(t))}))},getSaveModel:e=>function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}((0,n.cloneDeep)(e),De),getValueForUrl:e=>(0,W.HY)(e)?m.xk:e.current.value}),Le=Object.assign({},i.Eg,{type:"textbox",query:"",current:{},options:[],originalQuery:null}),Ee=(0,je.oM)({name:"templating/textbox",initialState:m.sX,reducers:{createTextBoxOptions:(e,t)=>{const s=(0,m.ir)(e,t.payload.id),a={text:s.query.trim(),value:s.query.trim(),selected:!1};s.options=[a],s.current=a}}}),Re=Ee.reducer,{createTextBoxOptions:_e}=Ee.actions;function Ve({variable:e,onVariableChange:t}){const s=(0,d.useDispatch)(),[a,n]=(0,c.useState)(e.current.value);(0,c.useEffect)((()=>{n(e.current.value)}),[e]);const i=(0,c.useCallback)((()=>{e.current.value!==a&&(s((0,S.Pl)((0,m.Y6)({id:e.id,type:e.type},{propName:"query",propValue:a}))),t?t(Object.assign({},e,{current:Object.assign({},e.current,{value:a})})):ls.get(e.type).updateOptions(e))}),[e,a,s,t]),r=(0,c.useCallback)((e=>n(e.target.value)),[n]);return(0,b.jsx)(p.Input,{type:"text",value:a,onChange:r,onBlur:e=>i(),onKeyDown:e=>{13===e.keyCode&&(e.preventDefault(),i())},placeholder:"Enter variable value",id:e.id})}var Be;function ze({onPropChange:e,variable:{query:t}}){const s=(0,c.useCallback)(((t,s)=>{t.preventDefault(),e({propName:"originalQuery",propValue:t.currentTarget.value,updateOptions:!1}),e({propName:"query",propValue:t.currentTarget.value,updateOptions:s})}),[e]),a=(0,c.useCallback)((e=>s(e,!1)),[s]),n=(0,c.useCallback)((e=>s(e,!0)),[s]);return(0,b.jsxs)(p.VerticalGroup,{spacing:"xs",children:[Be||(Be=(0,b.jsx)(f.e,{name:"Text options"})),(0,b.jsx)(y.V,{value:t,name:"Default value",placeholder:"default value, if any",onChange:a,onBlur:n,labelWidth:20,grow:!0,ariaLabel:h.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInput})]})}const Ue=["index","id","state","global","originalQuery"];const qe=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Le,reducer:Re,picker:Ve,editor:ze,dependsOn:(e,t)=>!1,setValue:async(e,t,s=!1)=>{await(0,o.WI)((0,l.Fz)((0,m.GT)(e),t,s))},setValueFromUrl:async(e,t)=>{await(0,o.WI)(((e,t)=>async(s,a)=>{const n=(0,j.E0)(e.id,a()),i=(0,W.Hi)(t);s((0,S.Pl)((0,m.Y6)(n,{propName:"query",propValue:i}))),await s((0,l.Ci)((0,m.GT)(n),i))})((0,m.GT)(e),t))},updateOptions:async e=>{var t;await(0,o.WI)((t=(0,m.GT)(e),async(e,s)=>{await e(_e((0,m.Y6)(t)));const a=(0,j.E0)(t.id,s());await ls.get(t.type).setValue(a,a.options[0],!0)}))},getSaveModel:(e,t)=>{const s=(0,n.cloneDeep)(e),{originalQuery:a}=s,i=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(s,Ue);if(e.query!==a&&!t){const e=null!=a?a:"",t={selected:!1,text:e,value:e};return Object.assign({},i,{query:e,current:t,options:[t]})}return i},getValueForUrl:e=>e.current.value,beforeAdding:e=>Object.assign({},(0,n.cloneDeep)(e),{originalQuery:e.query})}),He=Object.assign({},i.Eg,{type:"constant",hide:i.bU.hideVariable,query:"",current:{},options:[]}),Ge=(0,je.oM)({name:"templating/constant",initialState:m.sX,reducers:{createConstantOptionsFromQuery:(e,t)=>{const s=(0,m.ir)(e,t.payload.id);s.options=[{text:s.query.trim(),value:s.query.trim(),selected:!1}]}}}),We=Ge.reducer,{createConstantOptionsFromQuery:Ze}=Ge.actions;var Qe;function Ke(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Ye extends c.PureComponent{constructor(...e){super(...e),Ke(this,"onChange",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),Ke(this,"onBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){return(0,b.jsxs)(p.VerticalGroup,{spacing:"xs",children:[Qe||(Qe=(0,b.jsx)(f.e,{name:"Constant options"})),(0,b.jsx)(y.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,labelWidth:20,ariaLabel:h.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInput,grow:!0})]})}}const Je=["index","id","state","global","current","options"],Xe=["current","options","query"];function et(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}const tt=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:He,reducer:We,picker:xe(),editor:Ye,dependsOn:()=>!1,setValue:async(e,t,s=!1)=>{await(0,o.WI)((0,l.Fz)((0,m.GT)(e),t,s))},setValueFromUrl:async(e,t)=>{await(0,o.WI)((0,l.Ci)((0,m.GT)(e),t))},updateOptions:async e=>{var t;await(0,o.WI)((t=(0,m.GT)(e),async e=>{await e(Ze((0,m.Y6)(t))),await e((0,l.xQ)(t))}))},getSaveModel:e=>et((0,n.cloneDeep)(e),Je),getValueForUrl:e=>e.current.value,beforeAdding:e=>{const t=(0,n.cloneDeep)(e),{query:s}=t,a=et(t,Xe),i={selected:!0,text:s,value:s};return Object.assign({},a,{current:i,options:[i],query:s})}}),st=Object.assign({},i.Eg,{type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:i.Bd.onDashboardLoad}),at=(0,je.oM)({name:"templating/datasource",initialState:m.sX,reducers:{createDataSourceOptions:(e,t)=>{const{sources:s,regex:a}=t.payload.data,n=[],i=(0,m.ir)(e,t.payload.id);for(let e=0;e<s.length;e++){const t=s[e];t.meta.id===i.query&&(nt(t,a)&&n.push({text:t.name,value:t.name,selected:!1}),it(t,a)&&n.push({text:"default",value:"default",selected:!1}))}0===n.length&&n.push({text:"No data sources found",value:"",selected:!1}),i.includeAll&&n.unshift({text:m.xk,value:m.r2,selected:!1}),i.options=n}}});function nt(e,t){return!t||t.exec(e.name)}function it(e,t){return!!e.isDefault&&(!t||t.exec("default"))}const rt=at.reducer,{createDataSourceOptions:ot}=at.actions;var lt=s("./public/app/features/plugins/datasource_srv.ts");var ct,dt;function ut(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class pt extends c.PureComponent{constructor(...e){super(...e),ut(this,"onRegExChange",(e=>{this.props.onPropChange({propName:"regex",propValue:e.currentTarget.value})})),ut(this,"onRegExBlur",(e=>{this.props.onPropChange({propName:"regex",propValue:e.currentTarget.value,updateOptions:!0})})),ut(this,"onSelectionOptionsChange",(async({propValue:e,propName:t})=>{this.props.onPropChange({propName:t,propValue:e,updateOptions:!0})})),ut(this,"getSelectedDataSourceTypeValue",(()=>{var e,t,s,a;if(null===(e=this.props.editor.extended)||void 0===e||null===(t=e.dataSourceTypes)||void 0===t||!t.length)return"";const n=null===(s=this.props.editor.extended)||void 0===s?void 0:s.dataSourceTypes.find((e=>e.value===this.props.variable.query)),i=n?n.value:null===(a=this.props.editor.extended)||void 0===a?void 0:a.dataSourceTypes[0].value;return null!=i?i:""})),ut(this,"onDataSourceTypeChanged",(e=>{this.props.onPropChange({propName:"query",propValue:e.value,updateOptions:!0})}))}componentDidMount(){this.props.initDataSourceVariableEditor()}render(){var e,t,s,a,n;const i=null!==(e=this.props.editor.extended)&&void 0!==e&&null!==(t=e.dataSourceTypes)&&void 0!==t&&t.length?null===(s=this.props.editor.extended)||void 0===s||null===(a=s.dataSourceTypes)||void 0===a?void 0:a.map((e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:"",label:e.text}})):[],r=null!==(n=i.find((e=>e.value===this.props.variable.query)))&&void 0!==n?n:i[0];return(0,b.jsxs)(p.VerticalGroup,{spacing:"xs",children:[ct||(ct=(0,b.jsx)(f.e,{name:"Data source options"})),(0,b.jsxs)(p.VerticalGroup,{spacing:"md",children:[(0,b.jsxs)(p.VerticalGroup,{spacing:"xs",children:[(0,b.jsx)(p.InlineFieldRow,{children:(0,b.jsx)($.u,{name:"Type",value:r,options:i,onChange:this.onDataSourceTypeChanged,labelWidth:10})}),(0,b.jsx)(p.InlineFieldRow,{children:(0,b.jsx)(y.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,labelWidth:20,tooltip:dt||(dt=(0,b.jsxs)("div",{children:["Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),"Example: ",(0,b.jsx)("code",{children:"/^prod/"})]}))})})]}),(0,b.jsx)(w,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})]})]})}}const ht={initDataSourceVariableEditor:(e={getDatasourceSrv:lt.ak})=>t=>{const s=e.getDatasourceSrv().getList({metrics:!0,variables:!0}),a=(0,n.chain)(s).uniqBy("meta.id").map((e=>({text:e.meta.name,value:e.meta.id}))).value();a.unshift({text:"",value:""}),t((0,k.z7)({propName:"dataSourceTypes",propValue:a}))},changeVariableMultiValue:l.Z7},gt=(0,Oe.R)(pt,((e,t)=>({editor:e.templating.editor})),ht),mt=["index","id","state","global"];const ft=()=>({id:"datasource",description:"Enabled you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:st,reducer:rt,picker:xe(),editor:gt,dependsOn:(e,t)=>!!e.regex&&(0,W.QI)(e.regex,t.name),setValue:async(e,t,s=!1)=>{await(0,o.WI)((0,l.Fz)((0,m.GT)(e),t,s))},setValueFromUrl:async(e,t)=>{await(0,o.WI)((0,l.Ci)((0,m.GT)(e),t))},updateOptions:async e=>{await(0,o.WI)(((e,t={getDatasourceSrv:lt.ak})=>async(s,n)=>{const i=t.getDatasourceSrv().getList({metrics:!0,variables:!1}),r=(0,j.E0)(e.id,n());let o;r.regex&&(o=(0,g.getTemplateSrv)().replace(r.regex,void 0,"regex"),o=(0,a.stringToJsRegex)(o)),s(ot((0,m.Y6)(e,{sources:i,regex:o}))),await s((0,l.xQ)(e))})((0,m.GT)(e)))},getSaveModel:e=>{const t=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}((0,n.cloneDeep)(e),mt);return Object.assign({},t,{options:[]})},getValueForUrl:e=>(0,W.HY)(e)?m.xk:e.current.value}),bt=Object.assign({},i.Eg,{type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:i.Bd.onTimeRangeChanged,current:{}}),vt=(0,je.oM)({name:"templating/interval",initialState:m.sX,reducers:{createIntervalOptions:(e,t)=>{const s=(0,m.ir)(e,t.payload.id),a=(0,n.map)(s.query.match(/(["'])(.*?)\1|\w+/g),(e=>({text:(e=e.replace(/["']+/g,"")).trim(),value:e.trim(),selected:!1})));s.auto&&a.length&&"auto"!==a[0].text&&a.unshift({text:"auto",value:"$__auto_interval_"+s.name,selected:!1}),s.options=a}}}),xt=vt.reducer,{createIntervalOptions:yt}=vt.actions;var wt;function jt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class kt extends c.PureComponent{constructor(...e){super(...e),jt(this,"onAutoChange",(e=>{this.props.onPropChange({propName:"auto",propValue:e.target.checked,updateOptions:!0})})),jt(this,"onQueryChanged",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),jt(this,"onQueryBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})})),jt(this,"onAutoCountChanged",(e=>{this.props.onPropChange({propName:"auto_count",propValue:e.value,updateOptions:!0})})),jt(this,"onAutoMinChanged",(e=>{this.props.onPropChange({propName:"auto_min",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){var e;const{variable:t}=this.props,s=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map((e=>({label:`${e}`,value:e}))),a=null!==(e=s.find((e=>e.value===t.auto_count)))&&void 0!==e?e:s[0];return(0,b.jsxs)(p.VerticalGroup,{spacing:"xs",children:[wt||(wt=(0,b.jsx)(f.e,{name:"Interval options"})),(0,b.jsxs)(p.VerticalGroup,{spacing:"none",children:[(0,b.jsx)(y.V,{value:this.props.variable.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:this.onQueryChanged,onBlur:this.onQueryBlur,labelWidth:20,grow:!0,required:!0}),(0,b.jsxs)(p.InlineFieldRow,{children:[(0,b.jsx)(v,{value:this.props.variable.auto,name:"Auto option",tooltip:"Dynamically calculates interval by dividing time range by the count specified.",onChange:this.onAutoChange}),this.props.variable.auto?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)($.u,{name:"Step count",value:a,options:s,onChange:this.onAutoCountChanged,tooltip:"How many times the current time range should be divided to calculate the value.",labelWidth:7,width:9}),(0,b.jsx)(y.V,{value:this.props.variable.auto_min,name:"Min interval",placeholder:"10s",onChange:this.onAutoMinChanged,tooltip:"The calculated value will not go below this threshold.",labelWidth:13,width:11})]}):null]})]})]})}}var St=s("./public/app/features/templating/template_srv.ts");const Ct=(e,t={calculateInterval:a.rangeUtil.calculateInterval,getTimeSrv:D.$t,templateSrv:(0,St.J)()})=>(s,a)=>{const n=(0,j.E0)(e.id,a());if(n.auto){const e=t.calculateInterval(t.getTimeSrv().timeRange(),n.auto_count,n.auto_min);t.templateSrv.setGrafanaVariable("$__auto_interval_"+n.name,e.interval),t.templateSrv.setGrafanaVariable("$__auto_interval",e.interval)}},Tt=["index","id","state","global"];const Nt=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:bt,reducer:xt,picker:xe(),editor:kt,dependsOn:()=>!1,setValue:async(e,t,s=!1)=>{await(0,o.WI)(Ct((0,m.GT)(e))),await(0,o.WI)((0,l.Fz)((0,m.GT)(e),t,s))},setValueFromUrl:async(e,t)=>{await(0,o.WI)(Ct((0,m.GT)(e))),await(0,o.WI)((0,l.Ci)((0,m.GT)(e),t))},updateOptions:async e=>{var t;await(0,o.WI)((t=(0,m.GT)(e),async e=>{await e(yt((0,m.Y6)(t))),await e(Ct(t)),await e((0,l.xQ)(t))}))},getSaveModel:e=>function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}((0,n.cloneDeep)(e),Tt),getValueForUrl:e=>e.current.value}),Ot=({datasource:e,onChange:t,filterKey:s})=>{const a=()=>Ft(e);return null===s?(0,b.jsx)("div",{className:"gf-form",children:(0,b.jsx)(p.SegmentAsync,{className:"query-segment-key",Component:Mt,value:s,onChange:t,loadOptions:a})}):(0,b.jsx)("div",{className:"gf-form",children:(0,b.jsx)(p.SegmentAsync,{className:"query-segment-key",value:s,onChange:t,loadOptions:()=>At(e)})})},It="-- remove filter --",Pt={label:It,value:It},Mt=(0,b.jsx)("a",{className:"gf-form-label query-part",children:(0,b.jsx)(p.Icon,{name:"plus"})}),Ft=async e=>{const t=await(0,lt.ak)().get(e);if(!t||!t.getTagKeys)return[];return(await t.getTagKeys()).map((e=>({label:e.text,value:e.text})))},At=async e=>{const t=await Ft(e);return[Pt,...t]},Dt=["=","!=","<",">","=~","!~"].map((e=>({label:e,value:e}))),$t=({value:e,onChange:t})=>(0,b.jsx)(p.Segment,{className:"query-segment-operator",value:e,options:Dt,onChange:t}),Lt=({datasource:e,onChange:t,filterKey:s,filterValue:a,placeHolder:n})=>(0,b.jsx)("div",{className:"gf-form",children:(0,b.jsx)(p.SegmentAsync,{className:"query-segment-value",placeholder:n,value:a,onChange:t,loadOptions:()=>Et(e,s)})}),Et=async(e,t)=>{const s=await(0,lt.ak)().get(e);if(!s||!s.getTagValues)return[];return(await s.getTagValues({key:t})).map((e=>({label:e.text,value:e.text})))},Rt=({datasource:e,filter:{key:t,operator:s,value:a},onKeyChange:n,onOperatorChange:i,onValueChange:r,placeHolder:o})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ot,{datasource:e,filterKey:t,onChange:n}),(0,b.jsx)("div",{className:"gf-form",children:(0,b.jsx)($t,{value:s,onChange:i})}),(0,b.jsx)(Lt,{datasource:e,filterKey:t,filterValue:a,onChange:r,placeHolder:o})]}),_t=({datasource:e,appendBefore:t,onCompleted:s})=>{const[a,n]=(0,c.useState)(null),[i,r]=(0,c.useState)("="),o=(0,c.useCallback)((e=>{var t;e.value===It?n(null):n(null!==(t=e.value)&&void 0!==t?t:"")}),[n]),l=(0,c.useCallback)((e=>{var t;return r(null!==(t=e.value)&&void 0!==t?t:"")}),[r]),d=(0,c.useCallback)((e=>{var t;s({value:null!==(t=e.value)&&void 0!==t?t:"",operator:i,condition:"",key:a}),n(null),r("=")}),[s,i,a]);return null===a?(0,b.jsx)(Ot,{datasource:e,filterKey:a,onChange:o}):(0,b.jsxs)(c.Fragment,{children:[t,(0,b.jsx)(Rt,{datasource:e,filter:{key:a,value:"",operator:i,condition:""},placeHolder:"select value",onKeyChange:o,onOperatorChange:l,onValueChange:d})]},"filter-builder")},Vt=({label:e})=>(0,b.jsx)("div",{className:"gf-form",children:(0,b.jsx)("span",{className:"gf-form-label query-keyword",children:e})});var Bt,zt=s("./public/app/features/variables/adhoc/actions.ts");function Ut(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const qt={addFilter:zt.KJ,removeFilter:zt.ku,changeFilter:zt.M6},Ht=(0,d.connect)(null,qt);class Gt extends c.PureComponent{constructor(...e){super(...e),Ut(this,"onChange",((e,t)=>s=>{const{id:a,filters:n}=this.props.variable,{value:i}=s;return s.value===It?this.props.removeFilter(a,e):this.props.changeFilter(a,{index:e,filter:Object.assign({},n[e],{[t]:i})})})),Ut(this,"appendFilterToVariable",(e=>{const{id:t}=this.props.variable;this.props.addFilter(t,e)}))}render(){const{filters:e}=this.props.variable;return(0,b.jsxs)("div",{className:"gf-form-inline",children:[this.renderFilters(e),(0,b.jsx)(_t,{datasource:this.props.variable.datasource,appendBefore:e.length>0?Bt||(Bt=(0,b.jsx)(Vt,{label:"AND"})):null,onCompleted:this.appendFilterToVariable})]})}renderFilters(e){return e.reduce(((e,t,s)=>(e.length>0&&e.push((0,b.jsx)(Vt,{label:"AND"},`condition-${s}`)),e.push(this.renderFilterSegments(t,s)),e)),[])}renderFilterSegments(e,t){return(0,b.jsx)(c.Fragment,{children:(0,b.jsx)(Rt,{datasource:this.props.variable.datasource,filter:e,onKeyChange:this.onChange(t,"key"),onOperatorChange:this.onChange(t,"operator"),onValueChange:this.onChange(t,"value")})},`filter-${t}`)}}const Wt=Ht(Gt);Wt.displayName="AdHocPicker";var Zt,Qt=s("./public/app/features/variables/adhoc/reducer.ts");const Kt={initAdHocVariableEditor:zt.Ah,changeVariableDatasource:zt.Z$},Yt=(0,d.connect)((e=>({editor:e.templating.editor})),Kt);class Jt extends c.PureComponent{constructor(...e){var t,s,a;super(...e),a=e=>{this.props.changeVariableDatasource(e.value)},(s="onDatasourceChanged")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}componentDidMount(){this.props.initAdHocVariableEditor()}render(){var e,t,s,a,n;const{variable:i,editor:r}=this.props,o=null!==(e=null===(t=r.extended)||void 0===t?void 0:t.dataSources)&&void 0!==e?e:[],l=null!==(s=null===(a=r.extended)||void 0===a?void 0:a.infoText)&&void 0!==s?s:null,c=o.map((e=>({label:e.text,value:e.value}))),d=null!==(n=c.find((e=>e.value===i.datasource)))&&void 0!==n?n:c[0];return(0,b.jsxs)(p.VerticalGroup,{spacing:"xs",children:[Zt||(Zt=(0,b.jsx)(f.e,{name:"Options"})),(0,b.jsxs)(p.VerticalGroup,{spacing:"sm",children:[(0,b.jsx)(p.InlineFieldRow,{children:(0,b.jsx)($.u,{name:"Data source",value:d,options:c,onChange:this.onDatasourceChanged,labelWidth:10})}),l?(0,b.jsx)(p.Alert,{title:l,severity:"info"}):null]})]})}}const Xt=Yt(Jt);function es(e){return null==e?"":/\|/g[Symbol.replace](e,"__gfp__")}function ts(e){return null==e?"":/__gfp__/g[Symbol.replace](e,"|")}function ss(e){if(!(0,n.isString)(e)||0===e.length)return null;const t=e.split("|").map(ts);return{key:t[0],operator:t[1],value:t[2],condition:""}}function as(e){return null!==e&&(0,n.isString)(e.value)}const ns=["index","id","state","global"];const is=async()=>{},rs=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Qt.Js,reducer:Qt.jo,picker:Wt,editor:Xt,dependsOn:()=>!1,setValue:is,setValueFromUrl:async(e,t)=>{const s=(e=>{if((0,n.isArray)(e))return e.map(ss).filter(as);const t=ss(e);return null===t?[]:[t]})(t);await(0,o.WI)((0,zt.Ue)(e.id,s))},updateOptions:is,getSaveModel:e=>function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}((0,n.cloneDeep)(e),ns),getValueForUrl:e=>{var t;return(e=>e.map((e=>function(e){return[e.key,e.operator,e.value]}(e).map(es).join("|"))))(null!==(t=null==e?void 0:e.filters)&&void 0!==t?t:[])}}),os=()=>[we(),$e(),qe(),tt(),ft(),Nt(),rs(),{id:"system",description:"",name:"system",initialState:Object.assign({},i.Eg,{type:"system",hide:i.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:a.LoadingState.Done}),reducer:(e,t)=>e,picker:null,editor:null,dependsOn:()=>!1,setValue:async(e,t,s=!1)=>{},setValueFromUrl:async(e,t)=>{},updateOptions:async e=>{},getSaveModel:e=>({}),getValueForUrl:e=>""}],ls=new a.Registry},"./public/app/features/variables/adhoc/actions.ts":(e,t,s)=>{"use strict";s.d(t,{m2:()=>h,M6:()=>g,ku:()=>m,KJ:()=>f,Ue:()=>b,Z$:()=>v,Ah:()=>x});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/features/plugins/datasource_srv.ts"),i=s("./public/app/features/variables/editor/reducer.ts"),r=s("./public/app/features/variables/state/sharedReducer.ts"),o=s("./public/app/features/variables/state/selectors.ts"),l=s("./public/app/features/variables/state/types.ts"),c=s("./public/app/features/variables/adhoc/reducer.ts"),d=s("./public/app/features/variables/state/actions.ts"),u=s("./public/app/features/variables/guard.ts");const p="Filters",h=e=>async(t,s)=>{let a=w(e,s());a||(t(y(e)),a=w(e,s()));const n=a.filters.findIndex((t=>t.key===e.key&&t.value===e.value));if(-1===n){const{value:s,key:n,operator:i}=e,r={value:s,key:n,operator:i,condition:""};return await t(f(a.id,r))}const i=Object.assign({},a.filters[n],{operator:e.operator});return await t(g(a.id,{index:n,filter:i}))},g=(e,t)=>async(s,a)=>{const n=(0,o.E0)(e,a());s((0,c.e_)((0,l.Y6)(n,t))),await s((0,d.MB)((0,l.GT)(n),!0))},m=(e,t)=>async(s,a)=>{const n=(0,o.E0)(e,a());s((0,c.DO)((0,l.Y6)(n,t))),await s((0,d.MB)((0,l.GT)(n),!0))},f=(e,t)=>async(s,a)=>{const n=(0,o.E0)(e,a());s((0,c.QL)((0,l.Y6)(n,t))),await s((0,d.MB)((0,l.GT)(n),!0))},b=(e,t)=>async(s,a)=>{const n=(0,o.E0)(e,a());s((0,c.aM)((0,l.Y6)(n,t))),await s((0,d.MB)((0,l.GT)(n),!0))},v=e=>async(t,s)=>{const{editor:a}=s().templating,c=(0,o.E0)(a.id,s());t((0,i.z7)({propName:"infoText",propValue:"Ad hoc filters are applied automatically to all queries that target this data source"})),t((0,r.Pl)((0,l.Y6)(c,{propName:"datasource",propValue:e})));const d=await(0,n.ak)().get(e);d&&d.getTagKeys||t((0,i.z7)({propName:"infoText",propValue:"This data source does not support ad hoc filters yet."}))},x=()=>e=>{const t=(0,n.ak)().getMetricSources().reduce(((e,t)=>{if(t.meta.mixed)return e;const s=null===t.value?`${t.name} (default)`:t.name;return e.push({text:s,value:t.value}),e}),[{text:"",value:""}]);e((0,i.z7)({propName:"dataSources",propValue:t}))},y=e=>(t,s)=>{const n=Object.assign({},(0,a.cloneDeep)(c.Js),{datasource:e.datasource,name:p,id:p}),i=(0,o.Km)(s()),d={type:"adhoc",id:n.id};t((0,r.VN)((0,l.Y6)(d,{global:!1,model:n,index:i})))},w=(e,t)=>Object.values(t.templating.variables).find((t=>(0,u.Kn)(t)&&t.datasource===e.datasource))},"./public/app/features/variables/adhoc/reducer.ts":(e,t,s)=>{"use strict";s.d(t,{Js:()=>r,QL:()=>l,DO:()=>c,e_:()=>d,aM:()=>u,jo:()=>p});var a=s("./public/app/features/variables/types.ts"),n=s("./public/app/features/variables/state/types.ts"),i=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const r=Object.assign({},a.Eg,{type:"adhoc",datasource:null,filters:[]}),o=(0,i.oM)({name:"templating/adhoc",initialState:n.sX,reducers:{filterAdded:(e,t)=>{(0,n.ir)(e,t.payload.id).filters.push(t.payload.data)},filterRemoved:(e,t)=>{const s=(0,n.ir)(e,t.payload.id),a=t.payload.data;s.filters.splice(a,1)},filterUpdated:(e,t)=>{const s=(0,n.ir)(e,t.payload.id),{filter:a,index:i}=t.payload.data;s.filters[i]=a},filtersRestored:(e,t)=>{(0,n.ir)(e,t.payload.id).filters=t.payload.data}}}),{filterAdded:l,filterRemoved:c,filterUpdated:d,filtersRestored:u}=o.actions,p=o.reducer},"./public/app/features/variables/editor/LegacyVariableQueryEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{z:()=>c,R:()=>d});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-e2e-selectors/src/index.ts"),i=s("./public/app/features/variables/editor/VariableTextAreaField.tsx"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),l=s("./node_modules/react/jsx-runtime.js");const c="Grafana-LegacyVariableQueryEditor",d=({onChange:e,query:t})=>{const s=(0,r.useStyles)(u),[o,c]=(0,a.useState)(t),d=(0,a.useCallback)((t=>{e(t.currentTarget.value,t.currentTarget.value)}),[e]);return(0,l.jsx)("div",{className:s.container,children:(0,l.jsx)(i.W,{name:"Query",value:o,placeholder:"metric name or tags query",width:100,onChange:e=>{c(e.currentTarget.value)},onBlur:d,required:!0,labelWidth:20,ariaLabel:n.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput})})};function u(e){return{container:o.css`
      margin-bottom: ${e.spacing.xs};
    `}}d.displayName=c},"./public/app/features/variables/editor/VariableSectionHeader.tsx":(e,t,s)=>{"use strict";s.d(t,{e:()=>r});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./node_modules/react/jsx-runtime.js");function r({name:e}){const t=(0,a.useStyles)(o);return(0,i.jsx)("h5",{className:t.sectionHeading,children:e})}function o(e){return{sectionHeading:n.css`
      label: sectionHeading;
      font-size: ${e.typography.size.md};
      margin-bottom: ${e.spacing.sm};
    `}}},"./public/app/features/variables/editor/VariableSelectField.tsx":(e,t,s)=>{"use strict";s.d(t,{u:()=>r});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./node_modules/react/jsx-runtime.js");function r({name:e,value:t,options:s,tooltip:n,onChange:r,ariaLabel:l,width:c,labelWidth:d}){const u=(0,a.useStyles)(o);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.InlineFormLabel,{width:null!=d?d:6,tooltip:n,children:e}),(0,i.jsx)("div",{"aria-label":l,children:(0,i.jsx)(a.Select,{menuShouldPortal:!0,onChange:r,value:t,width:null!=c?c:25,options:s,className:u.selectContainer})})]})}function o(e){return{selectContainer:n.css`
      margin-right: ${e.spacing.xs};
    `}}},"./public/app/features/variables/editor/VariableTextAreaField.tsx":(e,t,s)=>{"use strict";s.d(t,{W:()=>o});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),r=s("./node_modules/react/jsx-runtime.js");function o({name:e,value:t,placeholder:s,tooltip:i,onChange:o,onBlur:c,ariaLabel:d,required:u,width:p,labelWidth:h}){const g=(0,n.useStyles)(l),m=(0,a.useCallback)((e=>e&&"string"==typeof e?e.split("\n").length:1),[]);return(0,r.jsx)(n.InlineField,{label:e,labelWidth:null!=h?h:12,tooltip:i,children:(0,r.jsx)(n.TextArea,{rows:m(t),value:t,onChange:o,onBlur:c,placeholder:s,required:u,"aria-label":d,cols:p,className:g.textarea})})}function l(e){return{textarea:i.css`
      white-space: pre-wrap;
      min-height: 32px;
      height: auto;
      overflow: auto;
      padding: 6px 8px;
    `}}},"./public/app/features/variables/editor/VariableTextField.tsx":(e,t,s)=>{"use strict";s.d(t,{V:()=>i});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/react/jsx-runtime.js");function i({value:e,name:t,placeholder:s,onChange:i,ariaLabel:r,width:o,labelWidth:l,required:c,onBlur:d,tooltip:u,grow:p}){return(0,n.jsx)(a.InlineField,{label:t,labelWidth:null!=l?l:12,tooltip:u,grow:p,children:(0,n.jsx)(a.Input,{type:"text",id:t,name:t,placeholder:s,value:e,onChange:i,onBlur:d,width:p?void 0:null!=o?o:25,"aria-label":r,required:c})})}},"./public/app/features/variables/editor/reducer.ts":(e,t,s)=>{"use strict";s.d(t,{gl:()=>r,lc:()=>o,Yu:()=>l,Yo:()=>c,y8:()=>d,wJ:()=>u,qe:()=>p,z7:()=>h,Sg:()=>g,PV:()=>m,QR:()=>f});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const n={id:"",isValid:!0,errors:{},name:"",extended:null},i=(0,a.oM)({name:"templating/editor",initialState:n,reducers:{setIdInEditor:(e,t)=>{e.id=t.payload.id},clearIdInEditor:(e,t)=>{e.id=""},variableEditorMounted:(e,t)=>{e.name=t.payload.name},variableEditorUnMounted:(e,t)=>n,changeVariableNameSucceeded:(e,t)=>{e.name=t.payload.data.newName,delete e.errors.name,e.isValid=0===Object.keys(e.errors).length},changeVariableNameFailed:(e,t)=>{e.name=t.payload.newName,e.errors.name=t.payload.errorText,e.isValid=0===Object.keys(e.errors).length},addVariableEditorError:(e,t)=>{e.errors[t.payload.errorProp]=t.payload.errorText,e.isValid=0===Object.keys(e.errors).length},removeVariableEditorError:(e,t)=>{delete e.errors[t.payload.errorProp],e.isValid=0===Object.keys(e.errors).length},changeVariableEditorExtended:(e,t)=>{e.extended=Object.assign({},e.extended,{[t.payload.propName]:t.payload.propValue})},cleanEditorState:()=>n}}),r=i.reducer,{setIdInEditor:o,clearIdInEditor:l,changeVariableNameSucceeded:c,changeVariableNameFailed:d,variableEditorMounted:u,variableEditorUnMounted:p,changeVariableEditorExtended:h,addVariableEditorError:g,removeVariableEditorError:m,cleanEditorState:f}=i.actions},"./public/app/features/variables/getAllVariableValuesForUrl.ts":(e,t,s)=>{"use strict";s.d(t,{c:()=>i});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./public/app/features/variables/adapters.ts");function i(e){const t={},s=(0,a.getTemplateSrv)().getVariables();for(let a=0;a<s.length;a++){const i=s[a];if(e&&void 0!==e[i.name]){if(e[i.name].skipUrlSync)continue;t["var-"+i.name]=e[i.name].value}else{if(i.skipUrlSync)continue;t["var-"+i.name]=n.z.get(i.type).getValueForUrl(i)}}return t}},"./public/app/features/variables/guard.ts":(e,t,s)=>{"use strict";s.d(t,{Xh:()=>i,Kn:()=>r,VC:()=>o,U4:()=>l,eL:()=>c,Kr:()=>d,R:()=>p,Ju:()=>h,d7:()=>g,X7:()=>m,NX:()=>f,$7:()=>b});var a=s("./packages/grafana-data/src/index.ts"),n=s("./public/app/features/variables/editor/LegacyVariableQueryEditor.tsx");const i=e=>"query"===e.type,r=e=>"adhoc"===e.type,o=e=>"constant"===e.type,l=e=>{const t=e;return t.hasOwnProperty("multi")&&"boolean"==typeof t.multi},c=e=>u(e,"options"),d=e=>u(e,"current");function u(e,t){if(!e)return!1;const s=e;return s.hasOwnProperty(t)&&"object"==typeof s[t]}const p=e=>Boolean(e.metricFindQuery)&&!Boolean(e.variables),h=e=>{if(!e.variables)return!1;if(e.variables.getType()!==a.VariableSupportType.Standard)return!1;const t=e.variables;return Boolean(t.toDataQuery)},g=e=>{if(!e.variables)return!1;if(e.variables.getType()!==a.VariableSupportType.Custom)return!1;const t=e.variables;return Boolean(t.query)&&Boolean(t.editor)},m=e=>!!e.variables&&e.variables.getType()===a.VariableSupportType.Datasource;function f(e,t){return!!e&&(e.displayName===n.z||p(t))}function b(e,t){return!!e&&(e.displayName!==n.z&&(m(t)||h(t)||g(t)))}},"./public/app/features/variables/inspect/reducer.ts":(e,t,s)=>{"use strict";s.d(t,{iV:()=>n,j4:()=>i});const a=(0,s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"templating/inspect",initialState:{unknown:[],usages:[],unknownsNetwork:[],usagesNetwork:[],unknownExits:!1},reducers:{initInspect:(e,t)=>{const{unknown:s,usages:a,unknownExits:n,unknownsNetwork:i,usagesNetwork:r}=t.payload;e.usages=a,e.unknown=s,e.unknownsNetwork=i,e.unknownExits=n,e.usagesNetwork=r}}}),n=a.reducer,{initInspect:i}=a.actions},"./public/app/features/variables/pickers/OptionsPicker/reducer.ts":(e,t,s)=>{"use strict";s.d(t,{XJ:()=>k,nn:()=>b,Ew:()=>v,cv:()=>S,aN:()=>f,iQ:()=>x,_M:()=>m,ss:()=>w,wF:()=>j,Ug:()=>y});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./node_modules/lodash/lodash.js"),i=s("./public/app/features/variables/state/types.ts"),r=s("./public/app/features/variables/guard.ts");const o=(e,...t)=>t.reduce(((e,t)=>t(e)),e);var l=s("./public/app/features/variables/utils.ts");const c={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},d=e=>{if(!Array.isArray(e.options))return e.options=[],e;const t=(s=e.selectedValues,Array.isArray(s)?s.reduce(((e,t)=>((0,n.isString)(t.value)&&(e[t.value]=t),e)),{}):{});var s;return e.selectedValues=Object.values(t),e.options=e.options.map((e=>{if(!(0,n.isString)(e.value))return e;const s=!!t[e.value];return e.selected===s?e:Object.assign({},e,{selected:s})})),e.options=u(e.options),e},u=e=>Array.isArray(e)?e.length<=1e3?e:e.slice(0,1e3):[],p=e=>{const{options:t,selectedValues:s}=e;return 0===t.length||s.length>0?e:t[0]&&t[0].value===i.r2?(e.selectedValues=[Object.assign({},t[0],{selected:!0})],e):e},h=e=>{const{selectedValues:t}=e;return t.length>1&&(e.selectedValues=t.filter((e=>e.value!==i.r2))),e},g=(0,a.oM)({name:"templating/optionsPicker",initialState:c,reducers:{showOptions:(e,t)=>{const{query:s,options:a}=t.payload;var i;(e.highlightIndex=-1,e.options=(0,n.cloneDeep)(a),e.id=t.payload.id,e.queryValue="",e.multi=!1,(0,r.U4)(t.payload))&&(e.multi=null!==(i=t.payload.multi)&&void 0!==i&&i);if((0,r.Xh)(t.payload)){const{queryValue:a}=t.payload,n=(0,l.bf)(s);e.queryValue=n&&a?a:""}return e.selectedValues=e.options.filter((e=>e.selected)),o(e,p,d)},hideOptions:(e,t)=>Object.assign({},c),toggleOption:(e,t)=>{const{option:s,clearOthers:a,forceSelect:n}=t.payload,{multi:r,selectedValues:l}=e;if(s){const t=!l.find((e=>e.value===s.value));if(s.value===i.r2||!r||a)return e.selectedValues=t||n?[Object.assign({},s,{selected:!0})]:[],o(e,p,h,d);if(n||t)return e.selectedValues.push(Object.assign({},s,{selected:!0})),o(e,p,h,d);e.selectedValues=l.filter((e=>e.value!==s.value))}else e.selectedValues=[];return o(e,p,h,d)},moveOptionsHighlight:(e,t)=>{let s=e.highlightIndex+t.payload;return s<0?s=0:s>=e.options.length&&(s=e.options.length-1),Object.assign({},e,{highlightIndex:s})},toggleAllOptions:(e,t)=>e.selectedValues.length>0?(e.selectedValues=[],o(e,d)):(e.selectedValues=e.options.filter((e=>e.value!==i.r2)).map((e=>Object.assign({},e,{selected:!0}))),o(e,d)),updateSearchQuery:(e,t)=>(e.queryValue=t.payload,e),updateOptionsAndFilter:(e,t)=>{var s;const a=(0,n.trim)((null!==(s=e.queryValue)&&void 0!==s?s:"").toLowerCase());return e.options=t.payload.filter((e=>{var t;const s=null!==(t=e.text)&&void 0!==t?t:"";return-1!==(Array.isArray(s)?s.toString():s).toLowerCase().indexOf(a)})),e.highlightIndex=0,o(e,p,d)},updateOptionsFromSearch:(e,t)=>(e.options=t.payload,e.highlightIndex=0,o(e,p,d)),cleanPickerState:()=>c}}),{toggleOption:m,showOptions:f,hideOptions:b,moveOptionsHighlight:v,toggleAllOptions:x,updateSearchQuery:y,updateOptionsAndFilter:w,updateOptionsFromSearch:j,cleanPickerState:k}=g.actions,S=g.reducer},"./public/app/features/variables/query/VariableQueryRunner.ts":(e,t,s)=>{"use strict";s.d(t,{LS:()=>L,eg:()=>_,Np:()=>R});var a=s("./node_modules/rxjs/dist/esm5/internal/Subject.js"),n=s("./node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),i=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),r=s("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),o=s("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),l=s("./node_modules/rxjs/dist/esm5/internal/operators/first.js"),c=s("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),d=s("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),u=s("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),p=s("./node_modules/rxjs/dist/esm5/internal/operators/finalize.js"),h=s("./packages/grafana-data/src/index.ts"),g=s("./public/app/features/variables/state/selectors.ts"),m=s("./public/app/features/variables/types.ts"),f=s("./public/app/store/store.ts"),b=s("./public/app/features/variables/utils.ts"),v=s("./node_modules/uuid/dist/esm-browser/v4.js"),x=s("./public/app/features/dashboard/services/TimeSrv.ts"),y=s("./node_modules/rxjs/dist/esm5/internal/observable/from.js"),w=s("./public/app/features/variables/guard.ts");function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class k{constructor(){j(this,"runners",void 0),this.runners=[new S,new C,new T,new N]}getRunnerForDatasource(e){const t=this.runners.find((t=>t.canRun(e)));if(t)return t;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class S{constructor(){j(this,"type",h.VariableSupportType.Legacy)}canRun(e){return(0,w.R)(e)}getTarget({datasource:e,variable:t}){if((0,w.R)(e))return t.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:e,variable:t,searchFilter:s,timeSrv:a},n){if(!(0,w.R)(e))return O();const r=(0,b.AQ)(t,s,a);return(0,y.Dp)(e.metricFindQuery(t.query,r)).pipe((0,c.z)((e=>{if(!e||!e.length)return O();const t=e;return(0,i.of)({series:t,state:h.LoadingState.Done,timeRange:r.range})})))}}class C{constructor(){j(this,"type",h.VariableSupportType.Standard)}canRun(e){return(0,w.Ju)(e)}getTarget({datasource:e,variable:t}){if((0,w.Ju)(e))return e.variables.toDataQuery(t.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:e,runRequest:t},s){return(0,w.Ju)(e)?e.variables.query?t(e,s,e.variables.query):t(e,s):O()}}class T{constructor(){j(this,"type",h.VariableSupportType.Custom)}canRun(e){return(0,w.d7)(e)}getTarget({datasource:e,variable:t}){if((0,w.d7)(e))return t.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:e,runRequest:t},s){return(0,w.d7)(e)?t(e,s,e.variables.query):O()}}class N{constructor(){j(this,"type",h.VariableSupportType.Datasource)}canRun(e){return(0,w.X7)(e)}getTarget({datasource:e,variable:t}){var s;if((0,w.X7)(e))return Object.assign({},t.query,{refId:null!==(s=t.query.refId)&&void 0!==s?s:"variable-query"});throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:e,runRequest:t},s){return(0,w.X7)(e)?t(e,s):O()}}function O(){return(0,i.of)({state:h.LoadingState.Done,series:[],timeRange:(0,h.getDefaultTimeRange)()})}var I=s("./public/app/features/query/state/runRequest.ts"),P=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),M=s("./public/app/features/variables/state/types.ts"),F=s("./public/app/features/variables/state/actions.ts"),A=s("./public/app/features/variables/query/reducer.ts");function D(){return e=>e.pipe((0,P.U)((e=>{const t=e.series;if(!t||!t.length)return[];if(function(e){if(!e)return!1;if(!e.length)return!0;const t=e[0];if((0,h.isDataFrame)(t))return!1;for(const e in t){if(!t.hasOwnProperty(e))continue;if(null!==t[e]&&"string"!=typeof t[e]&&"number"!=typeof t[e])continue;const s=e.toLowerCase();if("text"===s||"value"===s)return!0}return!1}(t))return t;const s=(0,I.F9)(t),a=[];let n=-1,i=-1,r=-1,o=-1;for(const e of s)for(let s=0;s<e.fields.length;s++){const a=e.fields[s],l=(0,h.getFieldDisplayName)(a,e,t).toLowerCase();a.type===h.FieldType.string&&-1===r&&(r=s),"text"===l&&a.type===h.FieldType.string&&-1===i&&(i=s),"value"===l&&a.type===h.FieldType.string&&-1===n&&(n=s),"expandable"!==l||a.type!==h.FieldType.boolean&&a.type!==h.FieldType.number||-1!==o||(o=s)}if(-1===r)throw new Error("Couldn't find any field of type string in the results.");for(const e of t)for(let t=0;t<e.length;t++){const s=-1!==o?e.fields[o].values.get(t):void 0,l=e.fields[r].values.get(t),c=-1!==i?e.fields[i].values.get(t):null,d=-1!==n?e.fields[n].values.get(t):null;-1!==n||-1!==i?-1!==n||-1===i?-1===n||-1!==i?a.push({text:c,value:d,expandable:s}):a.push({text:d,value:d,expandable:s}):a.push({text:c,value:c,expandable:s}):a.push({text:l,value:l,expandable:s})}return a})))}function $(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class L{constructor(e={dispatch:f.WI,getState:f.y0,getVariable:g.E0,getTemplatedRegex:b.gR,getTimeSrv:x.$t,queryRunners:new k,runRequest:I.v7}){$(this,"updateOptionsRequests",void 0),$(this,"updateOptionsResults",void 0),$(this,"cancelRequests",void 0),$(this,"subscription",void 0),this.dependencies=e,this.updateOptionsRequests=new a.x,this.updateOptionsResults=new a.x,this.cancelRequests=new a.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(e){this.updateOptionsRequests.next(e)}getResponse(e){return this.updateOptionsResults.asObservable().pipe((0,o.h)((t=>t.identifier===e)))}cancelRequest(e){this.cancelRequests.next({identifier:e})}destroy(){this.subscription.unsubscribe()}onNewRequest(e){const{datasource:t,identifier:s,searchFilter:a}=e;try{const{dispatch:g,runRequest:m,getTemplatedRegex:f,getVariable:b,queryRunners:v,getTimeSrv:x,getState:w}=this.dependencies,j=w().templating.transaction.uid;this.updateOptionsResults.next({identifier:s,state:h.LoadingState.Loading});const k=b(s.id,w()),S={variable:k,datasource:t,searchFilter:a,timeSrv:x(),runRequest:m},C=v.getRunnerForDatasource(t),T=C.getTarget({datasource:t,variable:k}),N=this.getRequest(k,e,T);C.runRequest(S,N).pipe((0,o.h)((()=>{const e=w().templating.transaction.uid;return j===e})),(0,l.P)((e=>e.state===h.LoadingState.Done||e.state===h.LoadingState.Error)),(0,c.z)((e=>e.state===h.LoadingState.Error?(0,n._)(e.error):(0,i.of)(e))),D(),function(e){return t=>t.pipe((0,P.U)((t=>{const{variable:s,dispatch:a,getTemplatedRegexFunc:n}=e,i=n(s),r=(0,M.Y6)(s,{results:t,templatedRegex:i});a((0,A.Fv)(r))})))}({variable:k,dispatch:g,getTemplatedRegexFunc:f}),function(e){return t=>t.pipe((0,c.z)((()=>{const{dispatch:t,variable:s,searchFilter:a}=e;return a?(0,i.of)():(0,y.Dp)(t((0,F.xQ)((0,M.GT)(s))))})))}({variable:k,dispatch:g,searchFilter:a}),(0,d.R)((0,r.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,o.h)((e=>{let t=!1;return e.identifier.id===s.id&&(t=!0,this.updateOptionsResults.next({identifier:s,state:h.LoadingState.Loading,cancelled:t})),t})))),(0,u.K)((e=>e.cancelled?(0,i.of)({}):(this.updateOptionsResults.next({identifier:s,state:h.LoadingState.Error,error:e}),(0,n._)(e)))),(0,p.x)((()=>{this.updateOptionsResults.next({identifier:s,state:h.LoadingState.Done})}))).subscribe()}catch(e){this.updateOptionsResults.next({identifier:s,state:h.LoadingState.Error,error:e})}}getRequest(e,t,s){const{searchFilter:a}=t,n={variable:{text:e.current.text,value:e.current.value}},i=a?{searchFilter:{text:a,value:a}}:{},r=Object.assign({},i,n),o=e.refresh===m.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,h.getDefaultTimeRange)();return{app:h.CoreApp.Dashboard,requestId:(0,v.Z)(),timezone:"",range:o,interval:"",intervalMs:0,targets:[s],scopedVars:r,startTime:Date.now()}}}let E;function R(e){E=e}function _(){return E}},"./public/app/features/variables/query/reducer.ts":(e,t,s)=>{"use strict";s.d(t,{rT:()=>l,mT:()=>p,Fv:()=>h});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./node_modules/lodash/lodash.js"),i=s("./packages/grafana-data/src/index.ts"),r=s("./public/app/features/variables/types.ts"),o=s("./public/app/features/variables/state/types.ts");const l=Object.assign({},r.Eg,{type:"query",datasource:null,query:"",regex:"",sort:r.$U.disabled,refresh:r.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""}),c=(e,t)=>{const s=[];let a=null;t.lastIndex=0;do{a=t.exec(e),a&&s.push(a)}while(t.global&&a&&""!==a[0]&&void 0!==a[0]);return s},d=(e,t,s)=>{let a,o=[];e&&(a=(0,i.stringToJsRegex)(e));for(let e=0;e<s.length;e++){const t=s[e];let i=void 0===t.text||null===t.text?t.value:t.text,r=void 0===t.value||null===t.value?t.text:t.value;if((0,n.isNumber)(r)&&(r=r.toString()),(0,n.isNumber)(i)&&(i=i.toString()),a){const e=c(r,a);if(!e.length)continue;const t=e.find((e=>e.groups&&e.groups.value)),s=e.find((e=>e.groups&&e.groups.text)),n=e.find((e=>e.length>1)),m=e.length>1&&n;if(t||s){var l,d,u,p,h,g;r=null!==(l=null==t||null===(d=t.groups)||void 0===d?void 0:d.value)&&void 0!==l?l:null==s||null===(u=s.groups)||void 0===u?void 0:u.text,i=null!==(p=null==s||null===(h=s.groups)||void 0===h?void 0:h.text)&&void 0!==p?p:null==t||null===(g=t.groups)||void 0===g?void 0:g.value}else{if(m){for(let t=0;t<e.length;t++){const s=e[t];o.push({text:s[1],value:s[1],selected:!1})}continue}n&&(i=n[1],r=n[1])}}o.push({text:i,value:r,selected:!1})}return o=(0,n.uniqBy)(o,"value"),((e,t)=>{if(t===r.$U.disabled)return e;const s=Math.ceil(t/2),a=t%2==0;return 1===s?e=(0,n.sortBy)(e,"text"):2===s?e=(0,n.sortBy)(e,(e=>{if(!e.text)return-1;const t=e.text.match(/.*?(\d+).*/);return!t||t.length<2?-1:parseInt(t[1],10)})):3===s&&(e=(0,n.sortBy)(e,(e=>(0,n.toLower)(e.text)))),a&&(e=e.reverse()),e})(o,t)},u=(0,a.oM)({name:"templating/query",initialState:o.sX,reducers:{updateVariableOptions:(e,t)=>{const{results:s,templatedRegex:a}=t.payload.data,n=(0,o.ir)(e,t.payload.id),{includeAll:i,sort:r}=n,l=d(a,r,s);i&&l.unshift({text:o.xk,value:o.r2,selected:!1}),l.length||l.push({text:o.BH,value:o.QX,isNone:!0,selected:!1}),n.options=l}}}),p=u.reducer,{updateVariableOptions:h}=u.actions},"./public/app/features/variables/shared/formatVariable.ts":(e,t,s)=>{"use strict";s.d(t,{y:()=>a});const a=e=>{if(!n(e))return e.name;const{current:t}=e;return Array.isArray(t.text)?t.text.join(" + "):t.text},n=e=>Array.isArray(null==e?void 0:e.options)||"object"==typeof(null==e?void 0:e.current)},"./public/app/features/variables/shared/multiOptions.ts":(e,t,s)=>{"use strict";s.d(t,{x:()=>a});const a=(e,t)=>e?t&&!Array.isArray(e.value)?Object.assign({},e,{value:i(e.value),text:i(e.text)}):!t&&Array.isArray(e.value)?Object.assign({},e,{value:n(e.value),text:n(e.text)}):e:e,n=e=>Array.isArray(e)?e.length>0?e[0]:"":e,i=e=>Array.isArray(e)?e:[e]},"./public/app/features/variables/state/actions.ts":(e,t,s)=>{"use strict";s.d(t,{wX:()=>G,Z7:()=>A,LX:()=>H,DU:()=>V,Fz:()=>R,Ci:()=>L,xs:()=>z,Rk:()=>W,xQ:()=>E,MB:()=>_});var a=s("./node_modules/angular/index.js"),n=s.n(a),i=s("./node_modules/lodash/lodash.js"),r=s("./packages/grafana-data/src/index.ts"),o=s("./public/app/features/variables/types.ts"),l=s("./public/app/features/variables/state/selectors.ts"),c=s("./public/app/features/variables/adapters.ts");function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class u{constructor(){d(this,"inputNode",void 0),d(this,"outputNode",void 0)}_linkTo(e,t){t<=0&&e.inputEdges.push(this),t>=0&&e.outputEdges.push(this),e.edges.push(this)}link(e,t){if(!e)throw Error("inputNode is required");if(!t)throw Error("outputNode is required");return this.unlink(),this.inputNode=e,this.outputNode=t,this._linkTo(e,1),this._linkTo(t,-1),this}unlink(){let e;const t=this.inputNode,s=this.outputNode;t&&s&&(e=t.edges.indexOf(this),e>-1&&t.edges.splice(e,1),e=s.edges.indexOf(this),e>-1&&s.edges.splice(e,1),e=t.outputEdges.indexOf(this),e>-1&&t.outputEdges.splice(e,1),e=s.inputEdges.indexOf(this),e>-1&&s.inputEdges.splice(e,1))}}class p{constructor(e){d(this,"name",void 0),d(this,"edges",void 0),d(this,"inputEdges",void 0),d(this,"outputEdges",void 0),this.name=e,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(e){return e?"object"==typeof e?this.inputEdges.find((t=>{var s;return(null===(s=t.inputNode)||void 0===s?void 0:s.name)===e.name})):this.inputEdges.find((t=>{var s;return(null===(s=t.inputNode)||void 0===s?void 0:s.name)===e})):null}getEdgeTo(e){return e?"object"==typeof e?this.outputEdges.find((t=>{var s;return(null===(s=t.outputNode)||void 0===s?void 0:s.name)===e.name})):this.outputEdges.find((t=>{var s;return(null===(s=t.outputNode)||void 0===s?void 0:s.name)===e})):null}getOptimizedInputEdges(){const e=[];return this.inputEdges.forEach((t=>{var s;const a=null===(s=t.inputNode)||void 0===s?void 0:s.inputEdges.map((e=>e.inputNode));null==a||a.forEach((t=>{const s=null==t?void 0:t.getEdgeTo(this.name);s&&e.push(s)}))})),this.inputEdges.filter((t=>-1===e.indexOf(t)))}}class h{constructor(){d(this,"nodes",{})}createNode(e){const t=new p(e);return this.nodes[e]=t,t}createNodes(e){const t=[];return e.forEach((e=>{t.push(this.createNode(e))})),t}link(e,t){let s=[],a=[];const n=[],i=[];s=e instanceof Array?e:[e],a=t instanceof Array?t:[t];for(let e=0;e<s.length;e++){const t=s[e];if("string"==typeof t){const e=this.getNode(t);if(!e)throw Error(`cannot link input node named ${t} since it doesn't exist in graph`);n.push(e)}else n.push(t)}for(let e=0;e<a.length;e++){const t=a[e];if("string"==typeof t){const e=this.getNode(t);if(!e)throw Error(`cannot link output node named ${t} since it doesn't exist in graph`);i.push(e)}else i.push(t)}const r=[];return n.forEach((e=>{i.forEach((t=>{r.push(this.createEdge().link(e,t))}))})),r}createEdge(){return new u}getNode(e){return this.nodes[e]}}var g=s("./public/app/core/actions/index.ts"),m=s("./public/app/features/variables/state/sharedReducer.ts"),f=s("./public/app/features/variables/state/types.ts"),b=s("./public/app/core/services/context_srv.ts"),v=s("./public/app/features/templating/template_srv.ts"),x=s("./public/app/features/variables/shared/multiOptions.ts"),y=s("./public/app/features/variables/guard.ts"),w=s("./public/app/features/dashboard/services/TimeSrv.ts"),j=s("./public/app/core/copy/appNotification.ts"),k=s("./public/app/features/variables/state/transactionReducer.ts"),S=s("./public/app/core/services/backend_srv.ts"),C=s("./public/app/features/variables/state/variablesReducer.ts"),T=s("./public/app/features/variables/utils.ts"),N=s("./public/app/store/store.ts"),O=s("./public/app/features/plugins/datasource_srv.ts"),I=s("./public/app/features/variables/editor/reducer.ts"),P=s("./public/app/features/variables/pickers/OptionsPicker/reducer.ts"),M=s("./packages/grafana-runtime/src/index.ts");function F(e){if(!(0,y.eL)(e))return e;let t=!1;for(const s of e.options)if(s.selected=!1,Array.isArray(e.current.value))for(const a of e.current.value)s.value===a&&(s.selected=t=!0);else s.value===e.current.value&&(s.selected=t=!0);return!t&&e.options.length&&(e.options[0].selected=!0),e}const A=(e,t)=>(s,a)=>{const n=(0,l.E0)(e.id,a()),i=(0,x.x)(n.current,t);s((0,m.Pl)((0,f.Y6)(e,{propName:"multi",propValue:t}))),s((0,m.Pl)((0,f.Y6)(e,{propName:"current",propValue:i})))},D=(e,t)=>{if(0===e.length)return!1;const s=(0,l.ng)(t);return e.filter((e=>s.some((t=>t.id===e.id&&(t.state===r.LoadingState.NotStarted||t.state===r.LoadingState.Loading))))).length>0},$=(e,t)=>async(s,a)=>{const n=(0,l.E0)(e.id,a());await(async(e,t)=>{const s=[];for(const a of(0,l.ng)(t))e!==a&&c.z.getIfExists(e.type)&&c.z.get(e.type).dependsOn(e,a)&&s.push(a);D(s,t)&&await new Promise((e=>{const t=N.h.subscribe((()=>{D(s,N.h.getState())||(t(),e())}))}))})(n,a());const i=t["var-"+n.name];if(void 0===i){if(n.hasOwnProperty("refresh")){const e=n;if(e.refresh===o.Bd.onDashboardLoad||e.refresh===o.Bd.onTimeRangeChanged)return void await s(W((0,f.GT)(e)))}s(Q(e))}else{const e=(0,T.Hi)(i);await c.z.get(n.type).setValueFromUrl(n,e)}},L=(e,t)=>async(s,a)=>{const n=(0,T.Hi)(t),r=(0,l.E0)(e.id,a());(0,T.iD)(r)!==o.Bd.never&&await s(W((0,f.GT)(r)));const d=(0,l.E0)(r.id,a());if(!d)throw new Error(`Couldn't find variable with name: ${r.name}`);let u=d.options.find((e=>e.text===n||e.value===n));if(!u&&(0,y.U4)(d)&&d.allValue&&n===d.allValue&&(u={text:f.xk,value:f.r2,selected:!1}),!u){let e=n;const t=n;Array.isArray(n)&&(e=n.reduce(((e,t)=>{const s=d.options.find((e=>e.value===t));return[].concat(e,s?[s.text]:[t])}),[])),u={text:e,value:t,selected:!1}}(0,y.U4)(d)&&(u=(0,x.x)({text:(0,i.castArray)(u.text),value:(0,i.castArray)(u.value),selected:!1},d.multi)),await c.z.get(r.type).setValue(d,u)},E=(e,t)=>(s,a)=>{var n;const i=(0,l.E0)(e.id,a()),r=i.current||{},o=c.z.get(i.type).setValue;if(Array.isArray(r.value)){const e=(e=>{let t,s,a,n;const i=[];for(t=0;t<e.options.length;t++)if(n=Object.assign({},e.options[t]),n.selected=!1,Array.isArray(e.current.value))for(s=0;s<e.current.value.length;s++)a=e.current.value[s],n.value===a&&(n.selected=!0,i.push(n));else n.value===e.current.value&&(n.selected=!0,i.push(n));return i})(i);if(0===e.length){return o(i,i.options[0])}return o(i,{value:e.map((e=>e.value)),text:e.map((e=>e.text)),selected:!0})}let d=null;const u=(0,T.Tt)(i);if(d=null===(n=i.options)||void 0===n?void 0:n.find((e=>e.text===u)),d)return o(i,d);var p;if(t&&(d=null===(p=i.options)||void 0===p?void 0:p.find((e=>e.text===t)),d))return o(i,d);if(i.options){const e=i.options[0];if(e)return o(i,e)}return Promise.resolve()},R=(e,t,s)=>async a=>(a((0,m.Q8)((0,f.Y6)(e,{option:t}))),await a(_(e,s))),_=(e,t)=>async(s,a)=>{const n=(0,l.E0)(e.id,a());if(a().templating.transaction.status===k.LN.Fetching)return(0,T.iD)(n)===o.Bd.never&&(await s(K((0,f.GT)(n))),s(Q(e))),Promise.resolve();const i=(0,l.ng)(a()),r=(e=>{const t=new h;return e.forEach((e=>{t.createNode(e.name)})),e.forEach((s=>{e.forEach((e=>{s!==e&&c.z.get(s.type).dependsOn(s,e)&&t.link(s.name,e.name)}))})),t})(i).getNode(n.name);let d=[];return r&&(d=r.getOptimizedInputEdges().map((e=>{const t=i.find((t=>{var s;return t.name===(null===(s=e.inputNode)||void 0===s?void 0:s.name)}));return t?s(W((0,f.GT)(t))):Promise.resolve()}))),Promise.all(d).then((()=>{if(t){const e=a().dashboard.getModel();null==e||e.setChangeAffectsAllPanels(),null==e||e.processRepeats(),M.locationService.partial(q(a)),null==e||e.startRefresh()}}))},V=(e,t={templateSrv:(0,v.J)()})=>async(s,a)=>{t.templateSrv.updateTimeRange(e);const n=(0,l.ng)(a()).filter((e=>{if(e.hasOwnProperty("refresh")&&e.hasOwnProperty("options")){return e.refresh===o.Bd.onTimeRangeChanged}return!1})).map((e=>s(B((0,f.GT)(e)))));try{await Promise.all(n);const e=a().dashboard.getModel();null==e||e.setChangeAffectsAllPanels(),null==e||e.startRefresh()}catch(e){console.error(e),s((0,g.$l)(Z("Template variable service failed",e)))}},B=e=>async(t,s)=>{const a=(0,l.E0)(e.id),i=a.options.slice();await t(W((0,f.GT)(a),!0));const r=(0,l.E0)(e.id,s()).options;if(n().toJson(i)!==n().toJson(r)){const e=s().dashboard.getModel();null==e||e.templateVariableValueUpdated()}},z=e=>async(t,s)=>{const a=[],n=s().dashboard.getModel();for(const t of(0,l.ng)(s())){const s=`var-${t.name}`;if(!e.hasOwnProperty(s))continue;if(!U(t,e[s].value))continue;let i=e[s].value;if(e[s].removed){const e=null==n?void 0:n.templating.list.find((e=>e.name===t.name));e&&(0,y.Kr)(e)&&(i=e.current.value)}const r=c.z.get(t.type).setValueFromUrl(t,i);a.push(r)}a.length&&(await Promise.all(a),null==n||n.templateVariableValueUpdated(),null==n||n.startRefresh())};function U(e,t){const s=c.z.get(e.type).getValueForUrl(e);let a=(0,T.Hi)(t);return Array.isArray(s)&&!Array.isArray(a)&&(a=[a]),!(0,i.isEqual)(s,a)}const q=e=>{const t=M.locationService.getSearchObject(),s=Object.keys(t).filter((e=>-1===e.indexOf("var-"))).reduce(((e,s)=>(e[s]=t[s],e)),{});for(const t of(0,l.ng)(e())){if(t.skipUrlSync)continue;const e=c.z.get(t.type);s["var-"+t.name]=e.getValueForUrl(t)}return s},H=(e,t)=>async(s,a)=>{try{a().templating.transaction.status===k.LN.Fetching&&s(G()),s((0,k.Z9)({uid:e})),s((e=>t=>{const s=Object.assign({},o.Eg,{id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:o.bU.hideVariable,current:{value:{name:e.title,uid:e.uid,toString:()=>e.title}}});t((0,m.VN)((0,f.Y6)(s,{global:s.global,index:s.index,model:s})));const a=Object.assign({},o.Eg,{id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:o.bU.hideVariable,current:{value:{name:b.Vt.user.orgName,id:b.Vt.user.orgId,toString:()=>b.Vt.user.orgId.toString()}}});t((0,m.VN)((0,f.Y6)(a,{global:a.global,index:a.index,model:a})));const n=Object.assign({},o.Eg,{id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:o.bU.hideVariable,current:{value:{login:b.Vt.user.login,id:b.Vt.user.id,email:b.Vt.user.email,toString:()=>b.Vt.user.id.toString()}}});t((0,m.VN)((0,f.Y6)(n,{global:n.global,index:n.index,model:n})))})(t)),s((n=t.templating.list,(e,t)=>{let s=0;for(let t=0;t<n.length;t++){const a=F(n[t]);c.z.getIfExists(a.type)&&e((0,m.VN)((0,f.Y6)(a,{global:!1,index:s++,model:a})))}(0,v.J)().updateTimeRange((0,w.$t)().timeRange());const a=(0,l.ng)(t());for(let t=0;t<a.length;t++){const s=a[t];e((0,m.Mn)((0,f.Y6)(s)))}})),await s((async(e,t)=>{const s=M.locationService.getSearchObject(),a=(0,l.ng)(t()).map((async t=>await e($((0,f.GT)(t),s))));await Promise.all(a)})),s((0,k.iv)({uid:e}))}catch(e){s((0,g.$l)(Z("Templating init failed",e))),console.error(e)}var n},G=(e={getBackendSrv:S.i})=>t=>{e.getBackendSrv().cancelAllInFlightRequests(),t((e=>{e((0,C.S)()),e((0,I.QR)()),e((0,P.XJ)()),e((0,k.p3)())}))},W=(e,t=!1)=>async(s,a)=>{const n=(0,l.E0)(e.id,a());try{s((0,m.$M)((0,f.Y6)(n))),await s(K((0,f.GT)(n))),await c.z.get(n.type).updateOptions(n),s(Q(e))}catch(a){if(s((0,m.Le)((0,f.Y6)(n,{error:a}))),t||(console.error(a),s((0,g.$l)(Z("Error updating options:",a,e)))),t)throw a}},Z=(e,t,s)=>(0,j.t_)(""+(s?`Templating [${s.id}]`:"Templating"),`${e} ${t.message}`),Q=e=>(t,s)=>{const a=(0,l.E0)(e.id,s());a.state!==r.LoadingState.Done&&t((0,m.qQ)((0,f.Y6)(a)))};function K(e,t=O.ak){return async function(s,a){const n=(0,l.E0)(e.id,a());if((0,y.Xh)(n))try{var i;const a=await t().get(null!==(i=n.datasource)&&void 0!==i?i:"");if((0,y.R)(a))return;if(!(0,y.Ju)(a))return;if(function(e){if(!e)return!1;return e.hasOwnProperty("refId")&&"string"==typeof e.refId}(n.query))return;const r={refId:`${a.name}-${e.id}-Variable-Query`,query:n.query};s((0,m.Pl)((0,f.Y6)(e,{propName:"query",propValue:r})))}catch(e){s((0,g.$l)(Z("Failed to upgrade legacy queries",e))),console.error(e)}}}},"./public/app/features/variables/state/selectors.ts":(e,t,s)=>{"use strict";s.d(t,{E0:()=>i,Q4:()=>r,_K:()=>o,ng:()=>l,IV:()=>c,xD:()=>d,Km:()=>u});var a=s("./public/app/store/store.ts"),n=s("./node_modules/memoize-one/dist/memoize-one.esm.js");const i=(e,t=(0,a.y0)(),s=!0)=>{if(t.templating.variables[e])return t.templating.variables[e];if(s)throw new Error(`Couldn't find variable with id:${e}`)},r=(e,t=(0,a.y0)())=>Object.values(t.templating.variables).filter(e).sort(((e,t)=>e.index-t.index)),o=(e,t=(0,a.y0)())=>i(e,t,!1),l=(e=(0,a.y0)())=>r((e=>"system"!==e.type),e),c=(0,n.default)((e=>l((0,a.y0)()))),d=e=>l(e),u=(e=(0,a.y0)())=>Object.values(e.templating.variables).length},"./public/app/features/variables/state/sharedReducer.ts":(e,t,s)=>{"use strict";s.d(t,{b5:()=>u,mZ:()=>p,VN:()=>h,Pl:()=>g,gE:()=>m,Y9:()=>f,Q8:()=>b,Be:()=>v,Mn:()=>x,$M:()=>y,qQ:()=>w,Le:()=>j});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./node_modules/lodash/lodash.js"),i=s("./packages/grafana-data/src/index.ts"),r=s("./public/app/features/variables/state/types.ts"),o=s("./public/app/features/variables/adapters.ts"),l=s("./public/app/features/variables/editor/reducer.ts"),c=s("./public/app/features/variables/utils.ts");const d=(0,a.oM)({name:"templating/shared",initialState:r.sX,reducers:{addVariable:(e,t)=>{var s;const a=null!==(s=t.payload.id)&&void 0!==s?s:t.payload.data.model.name,i=o.z.get(t.payload.type),r=(0,n.cloneDeep)(i.initialState),l=i.beforeAdding?i.beforeAdding(t.payload.data.model):(0,n.cloneDeep)(t.payload.data.model),c=Object.assign({},(0,n.defaults)({},l,r),{id:a,index:t.payload.data.index,global:t.payload.data.global});e[a]=c},variableStateNotStarted:(e,t)=>{const s=(0,r.ir)(e,t.payload.id);s.state=i.LoadingState.NotStarted,s.error=null},variableStateFetching:(e,t)=>{const s=(0,r.ir)(e,t.payload.id);s.state=i.LoadingState.Loading,s.error=null},variableStateCompleted:(e,t)=>{const s=(0,r.ir)(e,t.payload.id);s&&(s.state=i.LoadingState.Done,s.error=null)},variableStateFailed:(e,t)=>{const s=(0,r.ir)(e,t.payload.id);s&&(s.state=i.LoadingState.Error,s.error=t.payload.data.error)},removeVariable:(e,t)=>{if(delete e[t.payload.id],!t.payload.data.reIndex)return;const s=Object.values(e);for(let e=0;e<s.length;e++)s[e].index=e},duplicateVariable:(e,t)=>{var s,a;const i=(0,n.cloneDeep)(e[t.payload.id]),r=`copy_of_${i.name}`,l=null!==(s=null===(a=t.payload.data)||void 0===a?void 0:a.newId)&&void 0!==s?s:r,c=Object.keys(e).length;e[l]=Object.assign({},(0,n.cloneDeep)(o.z.get(t.payload.type).initialState),i,{id:l,name:r,index:c})},changeVariableOrder:(e,t)=>{const s=Object.values(e).map((e=>e)),a=s.find((e=>e.index===t.payload.data.fromIndex)),n=s.find((e=>e.index===t.payload.data.toIndex));a&&(e[a.id].index=t.payload.data.toIndex),n&&(e[n.id].index=t.payload.data.fromIndex)},changeVariableType:(e,t)=>{const{id:s}=t.payload,{label:a,name:i,index:r,description:l}=e[s];e[s]=Object.assign({},(0,n.cloneDeep)(o.z.get(t.payload.data.newType).initialState),{id:s,label:a,name:i,index:r,description:l})},setCurrentVariableValue:(e,t)=>{if(!t.payload.data.option)return;const s=(0,r.ir)(e,t.payload.id),{option:a}=t.payload.data,n=Object.assign({},a,{text:(0,c.Hi)(null==a?void 0:a.text),value:(0,c.Hi)(null==a?void 0:a.value)});s.current=n,s.options=s.options.map((e=>{e.value=(0,c.Hi)(e.value);let t=!1;if(Array.isArray(n.value))for(let s=0;s<n.value.length;s++){const a=n.value[s];if(e.value===a){t=!0;break}}else e.value===n.value&&(t=!0);return e.selected=t,e}))},changeVariableProp:(e,t)=>{(0,r.ir)(e,t.payload.id)[t.payload.data.propName]=t.payload.data.propValue}},extraReducers:e=>e.addCase(l.Yo,((e,t)=>{(0,r.ir)(e,t.payload.id).name=t.payload.data.newName}))}),u=d.reducer,{removeVariable:p,addVariable:h,changeVariableProp:g,changeVariableOrder:m,duplicateVariable:f,setCurrentVariableValue:b,changeVariableType:v,variableStateNotStarted:x,variableStateFetching:y,variableStateCompleted:w,variableStateFailed:j}=d.actions},"./public/app/features/variables/state/transactionReducer.ts":(e,t,s)=>{"use strict";s.d(t,{LN:()=>n,Z9:()=>o,p3:()=>l,iv:()=>c,vw:()=>d});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");let n;!function(e){e.NotStarted="Not started",e.Fetching="Fetching",e.Completed="Completed"}(n||(n={}));const i={uid:null,status:n.NotStarted},r=(0,a.oM)({name:"templating/transaction",initialState:i,reducers:{variablesInitTransaction:(e,t)=>{e.uid=t.payload.uid,e.status=n.Fetching},variablesCompleteTransaction:(e,t)=>{e.uid===t.payload.uid&&(e.status=n.Completed)},variablesClearTransaction:(e,t)=>{e.uid=null,e.status=n.NotStarted}}}),{variablesInitTransaction:o,variablesClearTransaction:l,variablesCompleteTransaction:c}=r.actions,d=r.reducer},"./public/app/features/variables/state/types.ts":(e,t,s)=>{"use strict";s.d(t,{UY:()=>a,xk:()=>n,r2:()=>i,BH:()=>r,QX:()=>o,sX:()=>l,ir:()=>c,GT:()=>d,Y6:()=>u});const a="00000000-0000-0000-0000-000000000000",n="All",i="$__all",r="None",o="",l={},c=(e,t)=>e[t],d=e=>({type:e.type,id:e.id});function u(e,t){return{type:e.type,id:e.id,data:t}}},"./public/app/features/variables/state/variablesReducer.ts":(e,t,s)=>{"use strict";s.d(t,{S:()=>o,L:()=>l});var a=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=s("./public/app/features/variables/adapters.ts"),i=s("./public/app/features/variables/state/sharedReducer.ts"),r=s("./public/app/features/variables/state/types.ts");const o=(0,a.PH)("templating/cleanVariables"),l=(e=r.sX,t)=>{var s,a;if(o.match(t)){const t=Object.values(e).filter((e=>e.global));if(!t)return r.sX;return t.reduce(((e,t)=>(e[t.id]=t,e)),{})}return null!=t&&null!==(s=t.payload)&&void 0!==s&&s.type&&n.z.getIfExists(null==t||null===(a=t.payload)||void 0===a?void 0:a.type)?n.z.get(t.payload.type).reducer((0,i.b5)(e,t),t):e}},"./public/app/features/variables/types.ts":(e,t,s)=>{"use strict";s.d(t,{Bd:()=>i,bU:()=>r,$U:()=>o,Eg:()=>l});var a=s("./packages/grafana-data/src/index.ts"),n=s("./public/app/features/variables/state/types.ts");let i,r,o;!function(e){e[e.never=0]="never",e[e.onDashboardLoad=1]="onDashboardLoad",e[e.onTimeRangeChanged=2]="onTimeRangeChanged"}(i||(i={})),function(e){e[e.dontHide=0]="dontHide",e[e.hideLabel=1]="hideLabel",e[e.hideVariable=2]="hideVariable"}(r||(r={})),function(e){e[e.disabled=0]="disabled",e[e.alphabeticalAsc=1]="alphabeticalAsc",e[e.alphabeticalDesc=2]="alphabeticalDesc",e[e.numericalAsc=3]="numericalAsc",e[e.numericalDesc=4]="numericalDesc",e[e.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",e[e.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc"}(o||(o={}));const l={id:n.UY,name:"",label:null,type:"",global:!1,index:-1,hide:r.dontHide,skipUrlSync:!1,state:a.LoadingState.NotStarted,error:null,description:null}},"./public/app/features/variables/utils.ts":(e,t,s)=>{"use strict";s.d(t,{J7:()=>d,a9:()=>u,bf:()=>p,_6:()=>h,QI:()=>g,HY:()=>m,Tt:()=>f,gR:()=>b,AQ:()=>v,iD:()=>x,bi:()=>y,xT:()=>j,Hi:()=>k});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./public/app/features/variables/state/types.ts"),r=s("./public/app/features/variables/types.ts"),o=s("./public/app/features/dashboard/services/TimeSrv.ts"),l=s("./public/app/features/variables/adapters.ts"),c=s("./public/app/core/utils/explore.ts");const d=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,u=e=>(d.lastIndex=0,d.exec(e)),p=e=>!(!e||"string"!=typeof e)&&-1!==e.indexOf("__searchFilter"),h=e=>{const{query:t,wildcardChar:s}=e;if(!p(t))return{};let{options:a}=e;a=a||{searchFilter:""};return{__searchFilter:{value:a.searchFilter?`${a.searchFilter}${s}`:`${s}`,text:""}}};function g(...e){const t=e[e.length-1];e[0]="string"==typeof e[0]?e[0]:(0,c.Xh)(e[0]);const s=e.slice(0,-1).join(" ").match(d);return!!(null!==s&&s.find((e=>{const s=u(e);return null!==s&&s.indexOf(t)>-1})))}const m=e=>{if(!e)return!1;if(!e.current)return!1;if(e.current.value){const t=Array.isArray(e.current.value);if(t&&e.current.value.length&&e.current.value[0]===i.r2)return!0;if(!t&&e.current.value===i.r2)return!0}if(e.current.text){const t=Array.isArray(e.current.text);if(t&&e.current.text.length&&e.current.text[0]===i.xk)return!0;if(!t&&e.current.text===i.xk)return!0}return!1},f=e=>e&&e.current&&e.current.text?Array.isArray(e.current.text)?e.current.text.toString():"string"!=typeof e.current.text?"":e.current.text:"";function b(e,t=(0,n.getTemplateSrv)()){return e&&e.regex?t.replace(e.regex,{},"regex"):""}function v(e,t,s=(0,o.$t)()){const a={range:void 0,variable:e,searchFilter:t};return e.refresh!==r.Bd.onTimeRangeChanged&&e.refresh!==r.Bd.onDashboardLoad||(a.range=s.timeRange()),a}function x(e){if(!e||!e.hasOwnProperty("refresh"))return r.Bd.never;const t=e;return t.refresh!==r.Bd.onTimeRangeChanged&&t.refresh!==r.Bd.onDashboardLoad&&t.refresh!==r.Bd.never?r.Bd.never:t.refresh}function y(){return l.z.list().filter((e=>"system"!==e.id)).map((({id:e,name:t})=>({label:t,value:e})))}function w(e){return(0,a.isArray)(e)&&(0===e.length?e=void 0:1===e.length&&(e=e[0])),e}function j(e,t){let s=0;const n={};for(const i in e){if(!i.startsWith("var-"))continue;let r=w(t[i]),o=w(e[i]);(0,a.isEqual)(o,r)||(n[i]={value:e[i]},s++)}for(const i in t){if(!i.startsWith("var-"))continue;const r=t[i];(0,a.isArray)(r)&&0===r.length||(e.hasOwnProperty(i)||(n[i]={value:"",removed:!0},s++))}return s?n:void 0}function k(e){return Array.isArray(e)?e.map(String):null==e?"":"number"==typeof e?e.toString(10):"string"==typeof e?e:"boolean"==typeof e?e.toString():""}},"./public/app/index.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.typed-array.sort.js"),s("./node_modules/core-js/modules/esnext.array.at.js"),s("./node_modules/core-js/modules/esnext.array.filter-out.js"),s("./node_modules/core-js/modules/esnext.array.find-last.js"),s("./node_modules/core-js/modules/esnext.array.find-last-index.js"),s("./node_modules/core-js/modules/esnext.array.is-template-object.js"),s("./node_modules/core-js/modules/esnext.array.last-index.js"),s("./node_modules/core-js/modules/esnext.array.last-item.js"),s("./node_modules/core-js/modules/esnext.array.unique-by.js"),s("./node_modules/core-js/modules/esnext.async-iterator.constructor.js"),s("./node_modules/core-js/modules/esnext.async-iterator.as-indexed-pairs.js"),s("./node_modules/core-js/modules/esnext.async-iterator.drop.js"),s("./node_modules/core-js/modules/esnext.async-iterator.every.js"),s("./node_modules/core-js/modules/esnext.async-iterator.filter.js"),s("./node_modules/core-js/modules/esnext.async-iterator.find.js"),s("./node_modules/core-js/modules/esnext.async-iterator.flat-map.js"),s("./node_modules/core-js/modules/esnext.async-iterator.for-each.js"),s("./node_modules/core-js/modules/esnext.async-iterator.from.js"),s("./node_modules/core-js/modules/esnext.async-iterator.map.js"),s("./node_modules/core-js/modules/esnext.async-iterator.reduce.js"),s("./node_modules/core-js/modules/esnext.async-iterator.some.js"),s("./node_modules/core-js/modules/esnext.async-iterator.take.js"),s("./node_modules/core-js/modules/esnext.async-iterator.to-array.js"),s("./node_modules/core-js/modules/esnext.bigint.range.js"),s("./node_modules/core-js/modules/esnext.composite-key.js"),s("./node_modules/core-js/modules/esnext.composite-symbol.js"),s("./node_modules/core-js/modules/esnext.iterator.constructor.js"),s("./node_modules/core-js/modules/esnext.iterator.as-indexed-pairs.js"),s("./node_modules/core-js/modules/esnext.iterator.drop.js"),s("./node_modules/core-js/modules/esnext.iterator.every.js"),s("./node_modules/core-js/modules/esnext.iterator.filter.js"),s("./node_modules/core-js/modules/esnext.iterator.find.js"),s("./node_modules/core-js/modules/esnext.iterator.flat-map.js"),s("./node_modules/core-js/modules/esnext.iterator.for-each.js"),s("./node_modules/core-js/modules/esnext.iterator.from.js"),s("./node_modules/core-js/modules/esnext.iterator.map.js"),s("./node_modules/core-js/modules/esnext.iterator.reduce.js"),s("./node_modules/core-js/modules/esnext.iterator.some.js"),s("./node_modules/core-js/modules/esnext.iterator.take.js"),s("./node_modules/core-js/modules/esnext.iterator.to-array.js"),s("./node_modules/core-js/modules/esnext.map.delete-all.js"),s("./node_modules/core-js/modules/esnext.map.emplace.js"),s("./node_modules/core-js/modules/esnext.map.every.js"),s("./node_modules/core-js/modules/esnext.map.filter.js"),s("./node_modules/core-js/modules/esnext.map.find.js"),s("./node_modules/core-js/modules/esnext.map.find-key.js"),s("./node_modules/core-js/modules/esnext.map.from.js"),s("./node_modules/core-js/modules/esnext.map.group-by.js"),s("./node_modules/core-js/modules/esnext.map.includes.js"),s("./node_modules/core-js/modules/esnext.map.key-by.js"),s("./node_modules/core-js/modules/esnext.map.key-of.js"),s("./node_modules/core-js/modules/esnext.map.map-keys.js"),s("./node_modules/core-js/modules/esnext.map.map-values.js"),s("./node_modules/core-js/modules/esnext.map.merge.js"),s("./node_modules/core-js/modules/esnext.map.of.js"),s("./node_modules/core-js/modules/esnext.map.reduce.js"),s("./node_modules/core-js/modules/esnext.map.some.js"),s("./node_modules/core-js/modules/esnext.map.update.js"),s("./node_modules/core-js/modules/esnext.map.update-or-insert.js"),s("./node_modules/core-js/modules/esnext.map.upsert.js"),s("./node_modules/core-js/modules/esnext.math.clamp.js"),s("./node_modules/core-js/modules/esnext.math.deg-per-rad.js"),s("./node_modules/core-js/modules/esnext.math.degrees.js"),s("./node_modules/core-js/modules/esnext.math.fscale.js"),s("./node_modules/core-js/modules/esnext.math.iaddh.js"),s("./node_modules/core-js/modules/esnext.math.imulh.js"),s("./node_modules/core-js/modules/esnext.math.isubh.js"),s("./node_modules/core-js/modules/esnext.math.rad-per-deg.js"),s("./node_modules/core-js/modules/esnext.math.radians.js"),s("./node_modules/core-js/modules/esnext.math.scale.js"),s("./node_modules/core-js/modules/esnext.math.seeded-prng.js"),s("./node_modules/core-js/modules/esnext.math.signbit.js"),s("./node_modules/core-js/modules/esnext.math.umulh.js"),s("./node_modules/core-js/modules/esnext.number.from-string.js"),s("./node_modules/core-js/modules/esnext.number.range.js"),s("./node_modules/core-js/modules/esnext.object.iterate-entries.js"),s("./node_modules/core-js/modules/esnext.object.iterate-keys.js"),s("./node_modules/core-js/modules/esnext.object.iterate-values.js"),s("./node_modules/core-js/modules/esnext.observable.js"),s("./node_modules/core-js/modules/esnext.promise.try.js"),s("./node_modules/core-js/modules/esnext.reflect.define-metadata.js"),s("./node_modules/core-js/modules/esnext.reflect.delete-metadata.js"),s("./node_modules/core-js/modules/esnext.reflect.get-metadata.js"),s("./node_modules/core-js/modules/esnext.reflect.get-metadata-keys.js"),s("./node_modules/core-js/modules/esnext.reflect.get-own-metadata.js"),s("./node_modules/core-js/modules/esnext.reflect.get-own-metadata-keys.js"),s("./node_modules/core-js/modules/esnext.reflect.has-metadata.js"),s("./node_modules/core-js/modules/esnext.reflect.has-own-metadata.js"),s("./node_modules/core-js/modules/esnext.reflect.metadata.js"),s("./node_modules/core-js/modules/esnext.set.add-all.js"),s("./node_modules/core-js/modules/esnext.set.delete-all.js"),s("./node_modules/core-js/modules/esnext.set.difference.js"),s("./node_modules/core-js/modules/esnext.set.every.js"),s("./node_modules/core-js/modules/esnext.set.filter.js"),s("./node_modules/core-js/modules/esnext.set.find.js"),s("./node_modules/core-js/modules/esnext.set.from.js"),s("./node_modules/core-js/modules/esnext.set.intersection.js"),s("./node_modules/core-js/modules/esnext.set.is-disjoint-from.js"),s("./node_modules/core-js/modules/esnext.set.is-subset-of.js"),s("./node_modules/core-js/modules/esnext.set.is-superset-of.js"),s("./node_modules/core-js/modules/esnext.set.join.js"),s("./node_modules/core-js/modules/esnext.set.map.js"),s("./node_modules/core-js/modules/esnext.set.of.js"),s("./node_modules/core-js/modules/esnext.set.reduce.js"),s("./node_modules/core-js/modules/esnext.set.some.js"),s("./node_modules/core-js/modules/esnext.set.symmetric-difference.js"),s("./node_modules/core-js/modules/esnext.set.union.js"),s("./node_modules/core-js/modules/esnext.string.at.js"),s("./node_modules/core-js/modules/esnext.string.code-points.js"),s("./node_modules/core-js/modules/esnext.symbol.async-dispose.js"),s("./node_modules/core-js/modules/esnext.symbol.dispose.js"),s("./node_modules/core-js/modules/esnext.symbol.observable.js"),s("./node_modules/core-js/modules/esnext.symbol.pattern-match.js"),s("./node_modules/core-js/modules/esnext.symbol.replace-all.js"),s("./node_modules/core-js/modules/esnext.typed-array.at.js"),s("./node_modules/core-js/modules/esnext.typed-array.filter-out.js"),s("./node_modules/core-js/modules/esnext.typed-array.find-last.js"),s("./node_modules/core-js/modules/esnext.typed-array.find-last-index.js"),s("./node_modules/core-js/modules/esnext.typed-array.unique-by.js"),s("./node_modules/core-js/modules/esnext.weak-map.delete-all.js"),s("./node_modules/core-js/modules/esnext.weak-map.from.js"),s("./node_modules/core-js/modules/esnext.weak-map.of.js"),s("./node_modules/core-js/modules/esnext.weak-map.emplace.js"),s("./node_modules/core-js/modules/esnext.weak-map.upsert.js"),s("./node_modules/core-js/modules/esnext.weak-set.add-all.js"),s("./node_modules/core-js/modules/esnext.weak-set.delete-all.js"),s("./node_modules/core-js/modules/esnext.weak-set.from.js"),s("./node_modules/core-js/modules/esnext.weak-set.of.js"),s("./node_modules/core-js/modules/web.immediate.js"),s("./node_modules/symbol-observable/es/index.js"),s("./node_modules/whatwg-fetch/fetch.js"),s("./node_modules/abortcontroller-polyfill/dist/polyfill-patch-fetch.js"),s("./public/app/polyfills/old-mediaquerylist.ts"),s("./node_modules/file-saver/dist/FileSaver.min.js");var a=s("./node_modules/jquery/dist/jquery-exposed.js"),n=s.n(a),i=s("./node_modules/lodash/lodash.js"),r=s.n(i),o=s("./node_modules/react-dom/index.js"),l=s("./node_modules/react/index.js"),c=s("./public/app/core/config.ts"),d=s("./packages/grafana-data/src/index.ts"),u=s("./public/app/core/utils/arrayMove.ts"),p=s("./public/app/features/plugins/plugin_loader.ts"),h=s("./packages/grafana-runtime/src/index.ts"),g=s("./public/app/core/services/context_srv.ts"),m=s("./packages/grafana-ui/src/index.ts");const f=(0,m.createLogger)("EchoSrv"),b=f.logger;function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}(0,m.attachDebugger)("echo",void 0,f);class x{constructor(e){v(this,"config",{flushInterval:1e4,debug:!1}),v(this,"backends",[]),v(this,"flush",(()=>{for(const e of this.backends)e.flush()})),v(this,"addBackend",(e=>{b("Adding backend",!1,e),this.backends.push(e)})),v(this,"addEvent",((e,t)=>{const s=this.getMeta(),a=Object.assign({},e,{meta:Object.assign({},s,t)});for(const e of this.backends)(0===e.supportedEvents.length||e.supportedEvents.indexOf(a.type)>-1)&&e.addEvent(a);b("Reporting event",!1,a)})),v(this,"getMeta",(()=>({sessionId:"",userId:g.Vt.user.id,userLogin:g.Vt.user.login,userSignedIn:g.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:(new Date).getTime(),timeSinceNavigationStart:performance.now(),url:window.location.href}))),this.config=Object.assign({},this.config,e),setInterval(this.flush,this.config.flushInterval)}}const y=(e,t)=>{(0,h.getEchoSrv)().addEvent({type:h.EchoEventType.Performance,payload:{name:e,value:t}})};var w=s("./public/app/core/services/backend_srv.ts");function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class k{constructor(e){j(this,"buffer",[]),j(this,"supportedEvents",[h.EchoEventType.Performance]),j(this,"addEvent",(e=>{this.buffer.push(e.payload)})),j(this,"flush",(()=>{0!==this.buffer.length&&(w.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])})),this.options=e}}var S=s("./public/app/core/core_module.ts"),C=s("./public/app/core/profiler.ts"),T=s("./public/app/core/app_events.ts"),N=s("./node_modules/angular/index.js"),O=s.n(N);class I{constructor(e,t){this.$compile=e,this.$rootScope=t}load(e,t,s){const a=this.$rootScope.$new();(0,i.assign)(a,t);const n=this.$compile(s)(a);return O().element(e).append(n),{destroy:()=>{a.$destroy(),n.remove()},digest:()=>{a.$$phase||a.$digest()},getScope:()=>a}}}I.$inject=["$compile","$rootScope"],S.ZP.service("angularLoader",I);var P=s("./public/app/types/index.ts"),M=s("./public/app/features/panel/panellinks/link_srv.ts"),F=s("./public/app/features/dashboard/services/DashboardSrv.ts"),A=s("./public/app/features/live/live.ts");class D{constructor(e,t,s,a,n,i,o,l,d){var u;u=l,(0,h.setAngularLoader)(u),(0,h.setBackendSrv)(w.ae),(0,h.setDataSourceSrv)(i),(0,M.pH)(n),(0,F.r_)(o),(0,h.setLegacyAngularInjector)(d),i.init(c.ZP.datasources,c.ZP.defaultDatasource),(0,h.setLocationSrv)(h.locationService),(0,A.Bp)(),e.init=()=>{e.contextSrv=a,e.appSubUrl=c.ZP.appSubUrl,e._=r(),C.r.init(c.ZP,s),t.init()},s.colors=m.colors,s.onAppEvent=function(e,t,a){let n;n="string"==typeof e?s.$on(e,t):s.$on(e.name,t);let i=this;1!==i.$id||a||console.warn("warning rootScope onAppEvent called without localscope"),a&&(i=a),i.$on("$destroy",n)},s.appEvent=(e,t)=>{"string"==typeof e?(s.$emit(e,t),T.Z.emit(e,t)):(s.$emit(e.name,t),T.Z.emit(e,t))},e.init()}}D.$inject=["$scope","utilSrv","$rootScope","contextSrv","linkSrv","datasourceSrv","dashboardSrv","angularLoader","$injector"],S.ZP.directive("grafanaApp",(function(){return{restrict:"E",controller:D,link:(e,t)=>{const s=n()("body");n().fn.modal.Constructor.prototype.enforceFocus=()=>{},n()(".preloader").remove(),T.Z.on(P.RW.a_,(()=>{s.toggleClass("sidemenu-open--xs")})),T.Z.on(P.RW.Ai,(()=>{s.toggleClass("sidemenu-hidden")}));let a=(new Date).getTime(),i=!0;function r(){a=(new Date).getTime(),i||(i=!0,s.removeClass("view-mode--inactive"))}s.mousemove(r),s.keydown(r),document.addEventListener("wheel",r,{capture:!0,passive:!0}),document.addEventListener("visibilitychange",r),setInterval((function(){i&&s.hasClass("page-dashboard")&&(new Date).getTime()-a>3e5&&(i=!1,s.addClass("view-mode--inactive"))}),2e3),s.click((e=>{const a=n()(e.target);if(0===a.parents().length)return;s.find(".dropdown-menu-open").removeClass("dropdown-menu-open");const i=a.closest("[data-click-hide]");if(i.length){const e=i.parent();i.detach(),setTimeout((()=>{e.append(i)}),100)}const r=t.find(".popover");r.length>0&&0===a.parents(".graph-legend").length&&r.hide()}))}}}));s("./public/app/features/annotations/all.ts");var L=s("./public/app/features/plugins/PluginSettingsCache.ts"),E=s("./public/app/core/utils/promiseToDigest.ts");function R(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class _{constructor(e,t,s){R(this,"page",void 0),R(this,"pluginId",void 0),R(this,"appModel",void 0),R(this,"navModel",void 0),this.$routeParams=e,this.$rootScope=t,this.navModelSrv=s,this.pluginId=e.pluginId,(0,E.E)(t)(Promise.resolve((0,L.a)(this.pluginId)).then((e=>{this.initPage(e)})).catch((e=>{this.$rootScope.appEvent(d.AppEvents.alertError,["Unknown Plugin"]),this.navModel=this.navModelSrv.getNotFoundNav()})))}initPage(e){if(this.appModel=e,this.page=(0,i.find)(e.includes,{slug:this.$routeParams.slug}),!this.page)return this.$rootScope.appEvent(d.AppEvents.alertError,["App Page Not Found"]),void(this.navModel=this.navModelSrv.getNotFoundNav());if("app"!==e.type||!e.enabled)return this.$rootScope.appEvent(d.AppEvents.alertError,["Application Not Enabled"]),void(this.navModel=this.navModelSrv.getNotFoundNav());const t=this.navModelSrv.getNav("plugin-page-"+e.id);this.navModel={main:{img:e.info.logos.large,subTitle:e.name,url:"",text:this.page.name,breadcrumbs:[{title:e.name,url:t.main.url}]}}}}_.$inject=["$routeParams","$rootScope","navModelSrv"],O().module("grafana.controllers").controller("AppPageCtrl",_);var V=s("./public/app/features/plugins/datasource_srv.ts");function B(e,t,s,a,n,r,o){function l(e,t){if(e)return 0===e.indexOf("public")?e:t+"/"+e}function u(e,t){const s={name:"panel-plugin-"+e.panel.type,bindings:{dashboard:"=",panel:"=",row:"="},attrs:{dashboard:"dashboard",panel:"panel",class:"panel-height-helper"}},i=c.ZP.panels[e.panel.type];return(0,p.Ub)(i.id).then((e=>{const t=e.angularPanelCtrl;return s.Component=t,!t||t.registered?s:t.templatePromise?t.templatePromise.then((e=>s)):(i&&(t.templateUrl=l(t.templateUrl,i.baseUrl)),t.templatePromise=function(e){if(e.template)return Promise.resolve(e.template);const t=n.get(e.templateUrl);return t?Promise.resolve(t):a.get(e.templateUrl).then((e=>e.data))}(t).then((e=>(t.templateUrl=null,t.template=`<grafana-panel ctrl="ctrl" class="panel-height-helper">${e}</grafana-panel>`,s))),t.templatePromise)}))}function h(t,s,a,n){if(n.notFound)s.empty();else{if(!n.Component)throw{message:"Failed to find exported plugin component for "+n.name};if(!n.Component.registered){const e=a.$normalize(n.name),t=function(e){return e.Component.templateUrl=l(e.Component.templateUrl,e.baseUrl),()=>({templateUrl:e.Component.templateUrl,template:e.Component.template,restrict:"E",controller:e.Component,controllerAs:"ctrl",bindToController:!0,scope:e.bindings,link:(e,t,s,a)=>{a.link&&a.link(e,t,s,a),a.init&&a.init()}})}(n);S.ZP.directive(e,t),n.Component.registered=!0}!function(t,s,a){const n=O().element(document.createElement(a.name));(0,i.each)(a.attrs,((e,t)=>{n.attr(t,e)})),e(n)(t),s.empty(),setTimeout((()=>{t.$applyAsync((()=>{s.append(n),setTimeout((()=>{t.$applyAsync((()=>{t.$broadcast(d.PanelEvents.componentDidMount.name)}))}))}))}))}(t,s,n)}}return{restrict:"E",link:(e,t,s)=>{(function(e,t){switch(t.type){case"query-ctrl":{const t=e.ctrl.datasource;return Promise.resolve({baseUrl:t.meta.baseUrl,name:"query-ctrl-"+t.meta.id,bindings:{target:"=",panelCtrl:"=",datasource:"="},attrs:{target:"ctrl.target","panel-ctrl":"ctrl",datasource:"ctrl.datasource"},Component:t.components.QueryCtrl})}case"annotations-query-ctrl":{const t=e.ctrl.currentDatasource.meta.baseUrl,s=e.ctrl.currentDatasource.meta.id;return(0,p.nL)(e.ctrl.currentDatasource.meta).then((e=>({baseUrl:t,name:"annotations-query-ctrl-"+s,bindings:{annotation:"=",datasource:"="},attrs:{annotation:"ctrl.currentAnnotation",datasource:"ctrl.currentDatasource"},Component:e.components.AnnotationsQueryCtrl})))}case"datasource-config-ctrl":{const t=e.ctrl.datasourceMeta,s=o.url();return(0,p.nL)(t).then((a=>(e.$watch("ctrl.current",(()=>{s===o.url()&&e.onModelChanged(e.ctrl.current)}),!0),{baseUrl:t.baseUrl,name:"ds-config-"+t.id,bindings:{meta:"=",current:"="},attrs:{meta:"ctrl.datasourceMeta",current:"ctrl.current"},Component:a.angularConfigCtrl})))}case"app-config-ctrl":{const t=e.ctrl.model;return(0,p.Av)(t).then((e=>({baseUrl:t.baseUrl,name:"app-config-"+t.id,bindings:{appModel:"=",appEditCtrl:"="},attrs:{"app-model":"ctrl.model","app-edit-ctrl":"ctrl"},Component:e.angularConfigCtrl})))}case"app-page":{const t=e.ctrl.appModel;return(0,p.Av)(t).then((s=>{if(!s.angularPages)throw new Error("Plugin has no page components");return{baseUrl:t.baseUrl,name:"app-page-"+t.id+"-"+e.ctrl.page.slug,bindings:{appModel:"="},attrs:{"app-model":"ctrl.appModel"},Component:s.angularPages[e.ctrl.page.component]}}))}case"panel":return u(e);default:return Promise.reject({message:"Could not find component type: "+t.type})}})(e,s).then((a=>{h(e,t,s,a)})).catch((e=>{console.error("Plugin component error",e)}))}}}B.$inject=["$compile","datasourceSrv","$rootScope","$http","$templateCache","$timeout","$location"],S.ZP.directive("pluginComponent",B);var z=s("./public/app/features/variables/editor/LegacyVariableQueryEditor.tsx"),U=s("./node_modules/react/jsx-runtime.js");function q(e){return{restrict:"E",link:async(t,s)=>{const a=await async function(e){const t=await(0,p.nL)(e);return t.components.VariableQueryEditor?t.components.VariableQueryEditor:z.R}(t.currentDatasource.meta),n={datasource:t.currentDatasource,query:t.current.query,onChange:t.onQueryChange,templateSrv:e};o.render((0,U.jsx)(a,Object.assign({},n)),s[0]),t.$on("$destroy",(()=>{o.unmountComponentAtNode(s[0])}))}}}q.$inject=["templateSrv"],S.ZP.directive("variableQueryEditorLoader",q);var H=s("./public/app/features/dashboard/services/DashboardLoaderSrv.ts"),G=(s("./public/app/features/dashboard/components/DashExportModal/index.ts"),s("./public/app/features/dashboard/components/DashNav/index.ts"),s("./public/app/features/dashboard/components/VersionHistory/index.ts"),s("./public/app/features/dashboard/components/DashboardSettings/index.ts"),s("./node_modules/baron/src/core.js")),W=s.n(G),Z=s("./node_modules/rxjs/dist/esm5/internal/Subscription.js"),Q=s("./public/app/types/events.ts");S.hF.directive("grafanaPanel",["$rootScope","$document","$timeout",(e,t,s)=>({restrict:"E",template:'\n  <ng-transclude class="panel-height-helper"></ng-transclude>\n',transclude:!0,scope:{ctrl:"="},link:(e,t)=>{const a=e.ctrl,n=e.ctrl.panel,i=new Z.w0;let r;function o(){a.height=e.$parent.$parent.size.height,a.width=e.$parent.$parent.size.width}a.events.on(d.PanelEvents.componentDidMount,(()=>{if(a.__proto__.constructor.scrollable){const e="baron baron__root baron__clipper panel-content--scrollable",s="baron__scroller",a='\n            <div class="baron__track">\n              <div class="baron__bar"></div>\n            </div>\n          ',n=t,i=t.find(":first").find(":first");n.addClass(e),$(a).appendTo(n),i.addClass(s),r=W()({root:n[0],scroller:i[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling"}),r.scroll()}})),o(),i.add(n.events.subscribe(Q.U5,(()=>{o(),a.events.emit("refresh")}))),i.add(n.events.subscribe(Q._z,(e=>{var t;null!==(t=e.payload)&&void 0!==t&&t.fromAngular||(o(),s((()=>{r&&r.update(),a.events.emit("render")})))}))),i.add(a.events.subscribe(Q._z,(e=>{e.payload&&(e.payload.fromAngular=!0,n.events.publish(e))}))),e.$on("$destroy",(()=>{t.off(),i.unsubscribe(),a.events.emit(d.PanelEvents.panelTeardown),a.events.removeAllListeners(),r&&r.dispose()})),n.events.publish(Q.GT)}})]);s("./public/app/features/panel/query_ctrl.ts");J.$inject=["dynamicDirectiveSrv"];const K=O().module("grafana.directives"),Y={};function J(e){return e.create({scope:{ctrl:"=",editorTab:"="},directive:e=>{const t=e.ctrl.pluginId,s=e.editorTab.title.toLowerCase().replace(" ","-").replace("&","").replace(" ","").replace(" ","-");if(Y[t]){if(Y[t][s])return Y[t][s]}else Y[t]=[];const a={fn:()=>e.editorTab.directiveFn(),name:`panel-editor-tab-${t}${s}`};return Y[t][s]=a,a}})}function X(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}K.directive("panelEditorTab",J);class ee{constructor(){X(this,"target",void 0),X(this,"queryCtrl",void 0),X(this,"panelCtrl",void 0),X(this,"panel",void 0),X(this,"hasTextEditMode",!1)}$onInit(){this.panelCtrl=this.queryCtrl.panelCtrl,this.target=this.queryCtrl.target,this.panel=this.panelCtrl.panel,this.hasTextEditMode&&this.queryCtrl.toggleEditorMode&&(this.panelCtrl.toggleEditorMode=this.queryCtrl.toggleEditorMode.bind(this.queryCtrl)),this.queryCtrl.getCollapsedText&&(this.panelCtrl.getCollapsedText=this.queryCtrl.getCollapsedText.bind(this.queryCtrl))}}ee.$inject=[],S.hF.directive("queryEditorRow",(function(){return{restrict:"E",controller:ee,bindToController:!0,controllerAs:"ctrl",templateUrl:"public/app/features/panel/partials/query_editor_row.html",transclude:!0,scope:{queryCtrl:"=",canCollapse:"=",hasTextEditMode:"="}}}));s("./public/app/features/manage-dashboards/services/ValidationSrv.ts");S.ZP.directive("dashUpload",(function(){return{restrict:"E",template:'\n<input type="file" id="dashupload" name="dashupload" class="hide" onchange="angular.element(this).scope().file_selected"/>\n<label class="btn btn-primary" for="dashupload">\n  {{btnText}}\n</label>\n',scope:{onUpload:"&",btnText:"@?"},link:(e,t)=>{e.btnText=O().isDefined(e.btnText)?e.btnText:"Upload .json file";const s=window;s.File&&s.FileReader&&s.FileList&&s.Blob?t[0].addEventListener("change",(function(t){const s=t.target.files;let a=0,n=s[a];for(;n;){const t=new FileReader;t.onload=t=>{let s;try{s=JSON.parse(t.target.result)}catch(e){return console.error(e),void T.Z.emit(d.AppEvents.alertError,["Import failed","JSON -> JS serialization failed: "+e.message])}e.$apply((()=>{e.onUpload({dash:s})}))},t.readAsText(n),a+=1,n=s[a]}}),!1):T.Z.emit(d.AppEvents.alertError,["Oops","The HTML5 file APIs are not fully supported in this browser"])}}}));var te=s("./public/app/core/core.ts");te.hF.directive("datasourceHttpSettings",(()=>({scope:{current:"=",suggestUrl:"@",noDirectAccess:"@",showForwardOAuthIdentityOption:"@"},templateUrl:"public/app/features/datasources/partials/http_settings_next.html",link:{pre:e=>{e.showAccessOption="true"!==e.noDirectAccess,e.onChange=t=>{e.current=t}}}}))),te.hF.directive("datasourceTlsAuthSettings",(()=>({scope:{current:"="},templateUrl:"public/app/features/datasources/partials/tls_auth_settings.html"})));var se=s("./public/app/features/variables/adapters.ts");var ae=s("./packages/grafana-data/src/transformations/transformers/reduce.ts"),ne=s("./packages/grafana-e2e-selectors/src/index.ts");const ie={id:d.DataTransformerID.reduce,editor:({options:e,onChange:t})=>{const s=[{label:"Series to rows",value:ae.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:ae.AL.ReduceFields,description:"Collapse each field into a single value"}],a=(0,l.useCallback)((s=>{const a=s.value;t(Object.assign({},e,{mode:a,includeTimeField:a===ae.AL.ReduceFields&&!!e.includeTimeField}))}),[t,e]),n=(0,l.useCallback)((()=>{t(Object.assign({},e,{includeTimeField:!e.includeTimeField}))}),[t,e]),i=(0,l.useCallback)((()=>{t(Object.assign({},e,{labelsToFields:!e.labelsToFields}))}),[t,e]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{children:(0,U.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,U.jsx)("div",{className:"gf-form-label width-8","aria-label":ne.wl.components.Transforms.Reduce.modeLabel,children:"Mode"}),(0,U.jsx)(m.Select,{menuShouldPortal:!0,options:s,value:s.find((t=>t.value===e.mode))||s[0],onChange:a,className:"flex-grow-1"})]})}),(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,U.jsx)("div",{className:"gf-form-label width-8","aria-label":ne.wl.components.Transforms.Reduce.calculationsLabel,children:"Calculations"}),(0,U.jsx)(m.StatsPicker,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:e.reducers||[],onChange:s=>{t(Object.assign({},e,{reducers:s}))}})]})}),e.mode===ae.AL.ReduceFields&&(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)(m.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!e.includeTimeField,onChange:n})})}),e.mode!==ae.AL.ReduceFields&&(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)(m.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!e.labelsToFields,onChange:i})})})]})},transformation:d.standardTransformers.reduceTransformer,name:d.standardTransformers.reduceTransformer.name,description:d.standardTransformers.reduceTransformer.description};var re,oe=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");function le(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ce extends l.PureComponent{constructor(e){var t,s;super(e),le(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),le(this,"onChange",(e=>{const{regex:t,isRegexValid:s}=this.state,a=Object.assign({},this.props.options,{include:{names:e}});var n;t&&s&&(a.include=null!==(n=a.include)&&void 0!==n?n:{},a.include.pattern=t);this.setState({selected:e},(()=>{this.props.onChange(a)}))})),le(this,"onInputBlur",(e=>{const{selected:t,regex:s}=this.state;let a=!0;try{s&&(0,d.stringToJsRegex)(s)}catch(e){a=!1}a?this.props.onChange(Object.assign({},this.props.options,{include:{pattern:s}})):this.props.onChange(Object.assign({},this.props.options,{include:{names:t}})),this.setState({isRegexValid:a})})),this.state={include:(null===(t=e.options.include)||void 0===t?void 0:t.names)||[],regex:null===(s=e.options.include)||void 0===s?void 0:s.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){var e,t,s;const{input:a,options:n}=this.props,i=Array.from(null!==(e=null===(t=n.include)||void 0===t?void 0:t.names)&&void 0!==e?e:[]),r=[],o={};for(const e of a)for(const t of e.fields){const s=(0,d.getFieldDisplayName)(t,e,a);let n=o[s];n||(n=o[s]={name:s,count:0},r.push(n)),n.count++}if(null!==(s=n.include)&&void 0!==s&&s.pattern)try{const e=(0,d.stringToJsRegex)(n.include.pattern);for(const t of r)e.test(t.name)&&i.push(t.name)}catch(e){console.error(e)}if(i.length){var l;const e=r.filter((e=>i.includes(e.name)));this.setState({options:r,selected:e.map((e=>e.name)),regex:null===(l=n.include)||void 0===l?void 0:l.pattern})}else{var c;this.setState({options:r,selected:r.map((e=>e.name)),regex:null===(c=n.include)||void 0===c?void 0:c.pattern})}}render(){const{options:e,selected:t,isRegexValid:s}=this.state;return(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form gf-form--grow",children:[re||(re=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Identifier"})),(0,U.jsxs)(m.HorizontalGroup,{spacing:"xs",align:"flex-start",wrap:!0,children:[(0,U.jsx)(m.Field,{invalid:!s,error:s?void 0:"Invalid pattern",className:oe.css`
                margin-bottom: 0;
              `,children:(0,U.jsx)(m.Input,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:e=>this.setState({regex:e.currentTarget.value}),onBlur:this.onInputBlur,width:25})}),e.map(((e,s)=>{const a=`${e.name}${e.count>1?" ("+e.count+")":""}`,n=t.indexOf(e.name)>-1;return(0,U.jsx)(m.FilterPill,{onClick:()=>{this.onFieldToggle(e.name)},label:a,selected:n},`${e.name}/${s}`)}))]})]})})}}const de={id:d.DataTransformerID.filterFieldsByName,editor:ce,transformation:d.standardTransformers.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var ue;function pe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class he extends l.PureComponent{constructor(e){super(e),pe(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),pe(this,"onChange",(e=>{this.setState({selected:e}),this.props.onChange(Object.assign({},this.props.options,{include:e.join("|")}))})),this.state={include:e.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){const{input:e,options:t}=this.props,s=t.include?t.include.split("|"):[],a=[],n={};for(const t of e)if(t.refId){let e=n[t.refId];e||(e=n[t.refId]={refId:t.refId,count:0},a.push(e)),e.count++}if(s.length){const e=[],t=[];for(const n of a)s.includes(n.refId)&&t.push(n),e.push(n);this.setState({options:e,selected:t.map((e=>e.refId))})}else this.setState({options:a,selected:[]})}render(){const{options:e,selected:t}=this.state;return(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form gf-form--grow",children:[ue||(ue=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Series refId"})),(0,U.jsx)(m.HorizontalGroup,{spacing:"xs",align:"flex-start",wrap:!0,children:e.map(((e,s)=>{const a=`${e.refId}${e.count>1?" ("+e.count+")":""}`,n=t.indexOf(e.refId)>-1;return(0,U.jsx)(m.FilterPill,{onClick:()=>{this.onFieldToggle(e.refId)},label:a,selected:n},`${e.refId}/${s}`)}))})]})})}}const ge={id:d.DataTransformerID.filterByRefId,editor:he,transformation:d.standardTransformers.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var me=s("./packages/grafana-data/src/transformations/transformers/filterByValue.ts");function fe(e,t){switch(t.type){case d.FieldType.boolean:return!(0,i.isUndefined)(e)&&be(e);case d.FieldType.number:return isNaN(e)?0:parseFloat(e);case d.FieldType.string:return e?String(e):"";default:return e}}const be=e=>(0,i.isString)(e)?!("F"===e[0]||"f"===e[0]||"0"===e[0]):!!e;function ve(e){return function({options:t,onChange:s,field:a}){const{validator:n,converter:i=fe}=e,{value:r}=t,[o,c]=(0,l.useState)(!n(r)),d=(0,l.useCallback)((e=>{c(!n(e.currentTarget.value))}),[c,n]),u=(0,l.useCallback)((e=>{if(o)return;const{value:n}=e.currentTarget;s(Object.assign({},t,{value:i(n,a)}))}),[t,s,o,a,i]);return(0,U.jsx)(m.Input,{className:"flex-grow-1",invalid:o,defaultValue:String(t.value),placeholder:"Value",onChange:d,onBlur:u})}}const xe=()=>null;var ye;function we(e){return({options:t,onChange:s,field:a})=>{const{validator:n}=e,[i,r]=(0,l.useState)({from:!n(t.from),to:!n(t.to)}),o=(0,l.useCallback)(((e,t)=>{r(Object.assign({},i,{[t]:!n(e.currentTarget.value)}))}),[r,n,i]),c=(0,l.useCallback)(((e,n)=>{if(i[n])return;const{value:r}=e.currentTarget;s(Object.assign({},t,{[n]:fe(r,a)}))}),[t,s,i,a]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(m.Input,{className:"flex-grow-1 gf-form-spacing",invalid:i.from,defaultValue:String(t.from),placeholder:"From",onChange:e=>o(e,"from"),onBlur:e=>c(e,"from")}),ye||(ye=(0,U.jsx)("div",{className:"gf-form-label",children:"and"})),(0,U.jsx)(m.Input,{className:"flex-grow-1",invalid:i.to,defaultValue:String(t.to),placeholder:"To",onChange:e=>o(e,"to"),onBlur:e=>c(e,"to")})]})}}const je=new d.Registry((()=>[{name:"Is greater",id:d.ValueMatcherID.greater,component:ve({validator:e=>!isNaN(e)})},{name:"Is greater or equal",id:d.ValueMatcherID.greaterOrEqual,component:ve({validator:e=>!isNaN(e)})},{name:"Is lower",id:d.ValueMatcherID.lower,component:ve({validator:e=>!isNaN(e)})},{name:"Is lower or equal",id:d.ValueMatcherID.lowerOrEqual,component:ve({validator:e=>!isNaN(e)})},{name:"Is equal",id:d.ValueMatcherID.equal,component:ve({validator:()=>!0})},{name:"Is not equal",id:d.ValueMatcherID.notEqual,component:ve({validator:()=>!0})},{name:"Regex",id:d.ValueMatcherID.regex,component:ve({validator:()=>!0,converter:e=>String(e)})},{name:"Is null",id:d.ValueMatcherID.isNull,component:xe},{name:"Is not null",id:d.ValueMatcherID.isNotNull,component:xe},{name:"Is between",id:d.ValueMatcherID.between,component:we({validator:e=>!isNaN(e)})}]));var ke,Se,Ce;const Te=e=>{var t,s;const{onDelete:a,onChange:n,filter:i,fieldsInfo:r}=e,{fieldsAsOptions:o,fieldByDisplayName:c}=r,u=c[null!==(t=Ie(i,o))&&void 0!==t?t:""],p=u?Ne(u):[],h=Oe(i,p),g=je.getIfExists(h),f=(0,l.useCallback)((e=>{null!=e&&e.value&&n(Object.assign({},i,{fieldName:e.value}))}),[n,i]),b=(0,l.useCallback)((e=>{if(null==e||!e.value)return;const t=e.value,s=d.valueMatchers.get(t).getDefaultOptions(u);n(Object.assign({},i,{config:{id:t,options:s}}))}),[n,i,u]),v=(0,l.useCallback)((e=>{n(Object.assign({},i,{config:Object.assign({},i.config,{options:e})}))}),[n,i]);return u&&g&&g.component?(0,U.jsxs)("div",{className:"gf-form-inline",children:[(0,U.jsxs)("div",{className:"gf-form gf-form-spacing",children:[ke||(ke=(0,U.jsx)("div",{className:"gf-form-label width-7",children:"Field"})),(0,U.jsx)(m.Select,{menuShouldPortal:!0,className:"min-width-15 max-width-24",placeholder:"Field Name",options:o,value:i.fieldName,onChange:f})]}),(0,U.jsxs)("div",{className:"gf-form gf-form-spacing",children:[Se||(Se=(0,U.jsx)("div",{className:"gf-form-label",children:"Match"})),(0,U.jsx)(m.Select,{menuShouldPortal:!0,className:"width-12",placeholder:"Select test",options:p,value:h,onChange:b})]}),(0,U.jsxs)("div",{className:"gf-form gf-form--grow gf-form-spacing",children:[Ce||(Ce=(0,U.jsx)("div",{className:"gf-form-label",children:"Value"})),(0,U.jsx)(g.component,{field:u,options:null!==(s=i.config.options)&&void 0!==s?s:{},onChange:v})]}),(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)(m.Button,{icon:"times",onClick:a,variant:"secondary"})})]}):null},Ne=e=>{const t=[];for(const s of d.valueMatchers.list()){if(!s.isApplicable(e))continue;je.getIfExists(s.id)&&t.push({value:s.id,label:s.name,description:s.description})}return t},Oe=(e,t)=>{var s;const a=t.find((t=>t.value===e.config.id));return a&&a.value?a.value:null!==(s=t[0])&&void 0!==s&&s.value?null===(n=t[0])||void 0===n?void 0:n.value:void 0;var n},Ie=(e,t)=>{var s;const a=t.find((t=>t.value===e.fieldName));return a&&a.value?a.value:null!==(s=t[0])&&void 0!==s&&s.value?null===(n=t[0])||void 0===n?void 0:n.value:void 0;var n};var Pe,Me;const Fe=[{label:"Include",value:me.PQ.include},{label:"Exclude",value:me.PQ.exclude}],Ae=[{label:"Match all",value:me.ER.all},{label:"Match any",value:me.ER.any}],De={id:d.DataTransformerID.filterByValue,editor:e=>{const{input:t,options:s,onChange:a}=e,n=$e(),r=Le(t),o=(0,l.useCallback)((()=>{const e=t[0],n=e.fields.find((e=>e.type!==d.FieldType.time));if(!n)return;const r=(0,i.cloneDeep)(s.filters),o=d.valueMatchers.get(d.ValueMatcherID.greater);r.push({fieldName:(0,d.getFieldDisplayName)(n,e,t),config:{id:o.id,options:o.getDefaultOptions(n)}}),a(Object.assign({},s,{filters:r}))}),[a,s,t]),c=(0,l.useCallback)((e=>{let t=(0,i.cloneDeep)(s.filters);t.splice(e,1),a(Object.assign({},s,{filters:t}))}),[s,a]),u=(0,l.useCallback)(((e,t)=>{let n=(0,i.cloneDeep)(s.filters);n[t]=e,a(Object.assign({},s,{filters:n}))}),[s,a]),p=(0,l.useCallback)((e=>{a(Object.assign({},s,{type:null!=e?e:me.PQ.include}))}),[s,a]),h=(0,l.useCallback)((e=>{a(Object.assign({},s,{match:null!=e?e:me.ER.all}))}),[s,a]);return(0,U.jsxs)("div",{children:[(0,U.jsxs)("div",{className:"gf-form gf-form-inline",children:[Pe||(Pe=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Filter type"})),(0,U.jsx)("div",{className:"width-15",children:(0,U.jsx)(m.RadioButtonGroup,{options:Fe,value:s.type,onChange:p,fullWidth:!0})})]}),(0,U.jsxs)("div",{className:"gf-form gf-form-inline",children:[Me||(Me=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Conditions"})),(0,U.jsx)("div",{className:"width-15",children:(0,U.jsx)(m.RadioButtonGroup,{options:Ae,value:s.match,onChange:h,fullWidth:!0})})]}),(0,U.jsxs)("div",{className:n.conditions,children:[s.filters.map(((e,t)=>(0,U.jsx)(Te,{filter:e,fieldsInfo:r,onChange:e=>u(e,t),onDelete:()=>c(t)},t))),(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)(m.Button,{icon:"plus",size:"sm",onClick:o,variant:"secondary",children:"Add condition"})})]})]})},transformation:d.standardTransformers.filterByValueTransformer,name:d.standardTransformers.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},$e=(0,m.stylesFactory)((()=>({conditions:oe.css`
    padding-left: 16px;
  `}))),Le=e=>(0,l.useMemo)((()=>{const t={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(e)?e.reduce(((t,s)=>s.fields.reduce(((t,a)=>{const n=(0,d.getFieldDisplayName)(a,s,e);return t.fieldByDisplayName[n]||(t.fieldsAsOptions.push({label:n,value:n,type:a.type}),t.fieldByDisplayName[n]=a),t}),t)),t):t}),[e]);var Ee,Re=s("./node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),_e=s("./packages/grafana-data/src/transformations/transformers/order.ts");function Ve(e){return(0,l.useMemo)((()=>Array.isArray(e)?Object.keys(e.reduce(((t,s)=>s&&Array.isArray(s.fields)?s.fields.reduce(((t,a)=>(t[(0,d.getFieldDisplayName)(a,s,e)]=!0,t)),t):t),{})):[]),[e])}const Be=e=>{const{options:t,input:s,onChange:a}=e,{indexByName:n,excludeByName:i,renameByName:r}=t,o=Ve(s),c=(0,l.useMemo)((()=>He(o,n)),[o,n]),d=(0,l.useCallback)(((e,s)=>{a(Object.assign({},t,{excludeByName:Object.assign({},i,{[e]:s})}))}),[a,t,i]),u=(0,l.useCallback)((e=>{if(!e||!e.destination)return;const s=e.source.index,n=e.destination.index;s!==n&&a(Object.assign({},t,{indexByName:qe(o,s,n)}))}),[a,t,o]),p=(0,l.useCallback)(((e,s)=>{a(Object.assign({},t,{renameByName:Object.assign({},t.renameByName,{[e]:s})}))}),[a,t]);return s.length>1?Ee||(Ee=(0,U.jsx)(m.FieldValidationMessage,{children:"Organize fields only works with a single frame. Consider applying a join transformation first."})):(0,U.jsx)(Re.Z5,{onDragEnd:u,children:(0,U.jsx)(Re.bK,{droppableId:"sortable-fields-transformer",direction:"vertical",children:e=>(0,U.jsxs)("div",Object.assign({ref:e.innerRef},e.droppableProps,{children:[c.map(((e,t)=>(0,U.jsx)(ze,{fieldName:e,renamedFieldName:r[e],index:t,onToggleVisibility:d,onRenameField:p,visible:!i[e]},e))),e.placeholder]}))})})};Be.displayName="OrganizeFieldsTransformerEditor";const ze=({fieldName:e,renamedFieldName:t,index:s,visible:a,onToggleVisibility:n,onRenameField:i})=>{const r=(0,m.useTheme)(),o=Ue(r);return(0,U.jsx)(Re._l,{draggableId:e,index:s,children:s=>(0,U.jsx)("div",Object.assign({className:"gf-form-inline",ref:s.innerRef},s.draggableProps,s.dragHandleProps,{children:(0,U.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,U.jsxs)("div",{className:"gf-form-label gf-form-label--justify-left width-30",children:[(0,U.jsx)(m.Icon,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:o.draggable}),(0,U.jsx)(m.IconButton,{className:o.toggle,size:"md",name:a?"eye":"eye-slash",surface:"header",onClick:()=>n(e,a)}),(0,U.jsx)("span",{className:o.name,title:e,children:e})]}),(0,U.jsx)(m.Input,{className:"flex-grow-1",defaultValue:t||"",placeholder:`Rename ${e}`,onBlur:t=>i(e,t.currentTarget.value)})]})}))})};ze.displayName="DraggableFieldName";const Ue=(0,m.stylesFactory)((e=>({toggle:oe.css`
    margin: 0 8px;
    color: ${e.colors.textWeak};
  `,draggable:oe.css`
    opacity: 0.4;
    &:hover {
      color: ${e.colors.textStrong};
    }
  `,name:oe.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${e.typography.size.sm};
    font-weight: ${e.typography.weight.semibold};
  `}))),qe=(e,t,s)=>{const a=Array.from(e),[n]=a.splice(t,1);return a.splice(s,0,n),a.reduce(((e,t,s)=>(e[t]=s,e)),{})},He=(e,t={})=>{if(!t||0===Object.keys(t).length)return e;const s=(0,_e.$)(t);return e.sort(s)},Ge={id:d.DataTransformerID.organize,editor:Be,transformation:d.standardTransformers.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var We;const Ze={id:d.DataTransformerID.seriesToColumns,editor:({input:e,options:t,onChange:s})=>{const a=Ve(e).map((e=>({label:e,value:e}))),n=(0,l.useCallback)((e=>{s(Object.assign({},t,{byField:e.value}))}),[s,t]);return(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form gf-form--grow",children:[We||(We=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Field name"})),(0,U.jsx)(m.Select,{menuShouldPortal:!0,options:a,value:t.byField,onChange:n,isClearable:!0})]})})},transformation:d.standardTransformers.seriesToColumnsTransformer,name:"Outer join",description:"Joins many time series/tables by a field. This can be used to outer join multiple time series on the _time_ field to show many time series in one table."};var Qe,Ke,Ye,Je,Xe,et=s("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),tt=s("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),st=s("./packages/grafana-data/src/transformations/transformers/calculateField.ts");function at(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const nt=[{value:st.ie.BinaryOperation,label:"Binary operation"},{value:st.ie.ReduceRow,label:"Reduce row"}],it=new Set([d.FieldType.time,d.FieldType.number,d.FieldType.string]);class rt extends l.PureComponent{constructor(e){var t,s;super(e),at(this,"onToggleReplaceFields",(()=>{const{options:e}=this.props;this.props.onChange(Object.assign({},e,{replaceFields:!e.replaceFields}))})),at(this,"onModeChanged",(e=>{var t;const{options:s,onChange:a}=this.props,n=null!==(t=e.value)&&void 0!==t?t:st.ie.BinaryOperation;a(Object.assign({},s,{mode:n}))})),at(this,"onAliasChanged",(e=>{const{options:t}=this.props;this.props.onChange(Object.assign({},t,{alias:e.target.value}))})),at(this,"updateReduceOptions",(e=>{const{options:t,onChange:s}=this.props;s(Object.assign({},t,{mode:st.ie.ReduceRow,reduce:e}))})),at(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),at(this,"onChange",(e=>{this.setState({selected:e});const{reduce:t}=this.props.options;this.updateReduceOptions(Object.assign({},t,{include:e}))})),at(this,"onStatsChange",(e=>{const t=e.length?e[0]:d.ReducerID.sum,{reduce:s}=this.props.options;this.updateReduceOptions(Object.assign({},s,{reducer:t}))})),at(this,"updateBinaryOptions",(e=>{const{options:t,onChange:s}=this.props;s(Object.assign({},t,{mode:st.ie.BinaryOperation,binary:e}))})),at(this,"onBinaryLeftChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{left:e.value}))})),at(this,"onBinaryRightChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{right:e.value}))})),at(this,"onBinaryOperationChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{operator:e.value}))})),this.state={include:(null===(t=e.options)||void 0===t||null===(s=t.reduce)||void 0===s?void 0:s.include)||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){var e;const{options:t}=this.props,s=(null==t||null===(e=t.reduce)||void 0===e?void 0:e.include)||[],a=(0,et.of)(this.props.input).pipe(d.standardTransformers.ensureColumnsTransformer.operator(null),this.extractAllNames(),this.extractNamesAndSelected(s)).subscribe((({selected:e,names:t})=>{this.setState({names:t,selected:e},(()=>a.unsubscribe()))}))}extractAllNames(){return e=>e.pipe((0,tt.U)((e=>{const t=[],s={};for(const a of e)for(const n of a.fields){if(!it.has(n.type))continue;const i=(0,d.getFieldDisplayName)(n,a,e);s[i]||(s[i]=!0,t.push(i))}return t})))}extractNamesAndSelected(e){return t=>t.pipe((0,tt.U)((t=>{if(!e.length)return{names:t,selected:[]};const s=[],a=[];for(const n of t)e.includes(n)&&a.push(n),s.push(n);return{names:s,selected:a}})))}renderReduceRow(e){const{names:t,selected:s}=this.state;return e=(0,i.defaults)(e,{reducer:d.ReducerID.sum}),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form gf-form--grow",children:[Qe||(Qe=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Field name"})),(0,U.jsx)(m.HorizontalGroup,{spacing:"xs",align:"flex-start",wrap:!0,children:t.map(((e,t)=>(0,U.jsx)(m.FilterPill,{onClick:()=>{this.onFieldToggle(e)},label:e,selected:s.indexOf(e)>-1},`${e}/${t}`)))})]})}),(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form",children:[Ke||(Ke=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Calculation"})),(0,U.jsx)(m.StatsPicker,{allowMultiple:!1,className:"width-18",stats:[e.reducer],onChange:this.onStatsChange,defaultStat:d.ReducerID.sum})]})})]})}renderBinaryOperation(e){var t,s,a,n,r,o,l,c,u;let p=!(null!==(t=e=(0,i.defaults)(e,{reducer:d.ReducerID.sum}))&&void 0!==t&&t.left),h=!(null!==(s=e)&&void 0!==s&&s.right);const g=this.state.names.map((t=>{var s,a;return t===(null===(s=e)||void 0===s?void 0:s.left)&&(p=!0),t===(null===(a=e)||void 0===a?void 0:a.right)&&(h=!0),{label:t,value:t}})),f=p?g:[...g,{label:null===(a=e)||void 0===a?void 0:a.left,value:null===(n=e)||void 0===n?void 0:n.left}],b=h?g:[...g,{label:null===(r=e)||void 0===r?void 0:r.right,value:null===(o=e)||void 0===o?void 0:o.right}],v=d.binaryOperators.list().map((e=>({label:e.id,value:e.id})));return(0,U.jsxs)("div",{className:"gf-form-inline",children:[Ye||(Ye=(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Operation"})})),(0,U.jsxs)("div",{className:"gf-form",children:[(0,U.jsx)(m.Select,{menuShouldPortal:!0,allowCustomValue:!0,placeholder:"Field or number",options:f,className:"min-width-18 gf-form-spacing",value:null===(l=e)||void 0===l?void 0:l.left,onChange:this.onBinaryLeftChanged}),(0,U.jsx)(m.Select,{menuShouldPortal:!0,className:"width-8 gf-form-spacing",options:v,value:null!==(c=e.operator)&&void 0!==c?c:v[0].value,onChange:this.onBinaryOperationChanged}),(0,U.jsx)(m.Select,{menuShouldPortal:!0,allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:b,value:null===(u=e)||void 0===u?void 0:u.right,onChange:this.onBinaryRightChanged})]})]})}render(){var e,t;const{options:s}=this.props,a=null!==(e=s.mode)&&void 0!==e?e:st.ie.BinaryOperation;return(0,U.jsxs)("div",{children:[(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form",children:[Je||(Je=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Mode"})),(0,U.jsx)(m.Select,{menuShouldPortal:!0,className:"width-18",options:nt,value:nt.find((e=>e.value===a)),onChange:this.onModeChanged})]})}),a===st.ie.BinaryOperation&&this.renderBinaryOperation(s.binary),a===st.ie.ReduceRow&&this.renderReduceRow(s.reduce),(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form",children:[Xe||(Xe=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Alias"})),(0,U.jsx)(m.Input,{className:"width-18",value:null!==(t=s.alias)&&void 0!==t?t:"",placeholder:(0,st.h)(s),onChange:this.onAliasChanged})]})}),(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)(m.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!s.replaceFields,onChange:this.onToggleReplaceFields})})})]})}}const ot={id:d.DataTransformerID.calculateField,editor:rt,transformation:d.standardTransformers.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var lt;const ct={id:d.DataTransformerID.labelsToFields,editor:({input:e,options:t,onChange:s})=>{let a=[],n={};for(const t of e)for(const e of t.fields)if(e.labels)for(const t of Object.keys(e.labels))n[t]||(a.push({value:t,label:t}),n[t]=!0);return(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form",children:[lt||(lt=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Value field name"})),(0,U.jsx)(m.Select,{menuShouldPortal:!0,isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:a,className:"min-width-18 gf-form-spacing",value:null==t?void 0:t.valueLabel,onChange:e=>{s({valueLabel:null==e?void 0:e.value})}})]})})},transformation:d.standardTransformers.labelsToFieldsTransformer,name:"Labels to fields",description:"Groups series by time and return labels or tags as fields.\n                Useful for showing time series with labels in a table where each label key becomes a separate column"};var dt=s("./packages/grafana-data/src/transformations/transformers/groupBy.ts");const ut=[{label:"Group by",value:dt.x.groupBy},{label:"Calculate",value:dt.x.aggregate}],pt=({fieldName:e,config:t,onConfigChange:s})=>{const a=ht(),n=(0,l.useCallback)((e=>{var a,n;s({aggregations:null!==(a=null==t?void 0:t.aggregations)&&void 0!==a?a:[],operation:null!==(n=null==e?void 0:e.value)&&void 0!==n?n:null})}),[t,s]);return(0,U.jsxs)("div",{className:(0,oe.cx)("gf-form-inline",a.row),children:[(0,U.jsx)("div",{className:(0,oe.cx)("gf-form",a.fieldName),children:(0,U.jsx)("div",{className:(0,oe.cx)("gf-form-label",a.rowSpacing),children:e})}),(0,U.jsx)("div",{className:(0,oe.cx)("gf-form",a.cell),children:(0,U.jsx)("div",{className:(0,oe.cx)("gf-form-spacing",a.rowSpacing),children:(0,U.jsx)(m.Select,{menuShouldPortal:!0,className:"width-12",options:ut,value:null==t?void 0:t.operation,placeholder:"Ignored",onChange:n,isClearable:!0})})}),(null==t?void 0:t.operation)===dt.x.aggregate&&(0,U.jsx)("div",{className:(0,oe.cx)("gf-form","gf-form--grow",a.calculations),children:(0,U.jsx)(m.StatsPicker,{className:(0,oe.cx)("flex-grow-1",a.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:t.aggregations,onChange:e=>{s(Object.assign({},t,{aggregations:e}))}})})]})},ht=(0,m.stylesFactory)((()=>{const e=oe.css`
    display: table-cell;
  `;return{row:oe.css`
      display: table-row;
    `,cell:e,rowSpacing:oe.css`
      margin-bottom: 4px;
    `,fieldName:oe.css`
      ${e}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:oe.css`
      ${e}
      width: 99%;
    `}})),gt={id:d.DataTransformerID.groupBy,editor:({input:e,options:t,onChange:s})=>{const a=Ve(e),n=(0,l.useCallback)((e=>a=>{s(Object.assign({},t,{fields:Object.assign({},t.fields,{[e]:a})}))}),[s]);return(0,U.jsx)("div",{children:a.map((e=>(0,U.jsx)(pt,{onConfigChange:n(e),fieldName:e,config:t.fields[e]},e)))})},transformation:d.standardTransformers.groupByTransformer,name:d.standardTransformers.groupByTransformer.name,description:d.standardTransformers.groupByTransformer.description},mt={id:d.DataTransformerID.sortBy,editor:({input:e,options:t,onChange:s})=>{var a;const n=Ve(e).map((e=>({label:e,value:e}))),i=(0,l.useCallback)(((e,a)=>{s(Object.assign({},t,{sort:[a]}))}),[s,t]),r=null!==(a=t.sort)&&void 0!==a&&a.length?t.sort:[{}];return(0,U.jsx)("div",{children:r.map(((e,t)=>(0,U.jsxs)(m.InlineFieldRow,{children:[(0,U.jsx)(m.InlineField,{label:"Field",labelWidth:10,grow:!0,children:(0,U.jsx)(m.Select,{menuShouldPortal:!0,options:n,value:e.field,placeholder:"Select field",onChange:s=>{i(t,Object.assign({},e,{field:s.value}))}})}),(0,U.jsx)(m.InlineField,{label:"Reverse",children:(0,U.jsx)(m.InlineSwitch,{value:!!e.desc,onChange:()=>{i(t,Object.assign({},e,{desc:!e.desc}))}})})]},`${e.field}/${t}`)))})},transformation:d.standardTransformers.sortByTransformer,name:d.standardTransformers.sortByTransformer.name,description:d.standardTransformers.sortByTransformer.description};var ft;const bt={id:d.DataTransformerID.merge,editor:({input:e,options:t,onChange:s})=>e.length<=1?ft||(ft=(0,U.jsx)(m.FieldValidationMessage,{children:"Merge has no effect when applied on a single frame."})):null,transformation:d.standardTransformers.mergeTransformer,name:"Merge",description:"Merge many series/tables and return a single table where mergeable values will be combined into the same row.\n                Useful for showing multiple series, tables or a combination of both visualized in a table."},vt={id:d.DataTransformerID.seriesToRows,editor:({input:e,options:t,onChange:s})=>null,transformation:d.standardTransformers.seriesToRowsTransformer,name:"Series to rows",description:"Merge many series and return a single series with time, metric and value as columns.\n                Useful for showing multiple time series visualized in a table."};var xt,yt,wt=s("./packages/grafana-data/src/transformations/transformers/concat.ts");function jt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const kt=[{value:wt.HO.FieldName,label:"Copy frame name to field name"},{value:wt.HO.Label,label:"Add a label with the frame name"},{value:wt.HO.Drop,label:"Ignore the frame name"}];class St extends l.PureComponent{constructor(e){super(e),jt(this,"onModeChanged",(e=>{var t;const{options:s,onChange:a}=this.props,n=null!==(t=e.value)&&void 0!==t?t:wt.HO.FieldName;a(Object.assign({},s,{frameNameMode:n}))})),jt(this,"onLabelChanged",(e=>{const{options:t}=this.props;this.props.onChange(Object.assign({},t,{frameNameLabel:e.target.value}))}))}render(){var e,t;const{options:s}=this.props,a=null!==(e=s.frameNameMode)&&void 0!==e?e:wt.HO.FieldName;return(0,U.jsxs)("div",{children:[(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form",children:[xt||(xt=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Name"})),(0,U.jsx)(m.Select,{menuShouldPortal:!0,className:"width-18",options:kt,value:kt.find((e=>e.value===a)),onChange:this.onModeChanged})]})}),a===wt.HO.Label&&(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form",children:[yt||(yt=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Label"})),(0,U.jsx)(m.Input,{className:"width-18",value:null!==(t=s.frameNameLabel)&&void 0!==t?t:"",placeholder:"frame",onChange:this.onLabelChanged})]})})]})}}const Ct={id:d.DataTransformerID.concatenate,editor:St,transformation:d.standardTransformers.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var Tt,Nt;function Ot(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class It extends l.PureComponent{constructor(e){super(e),Ot(this,"handleRegexChange",(e=>{const t=e.currentTarget.value;let s=!0;if(t)try{t&&(0,d.stringToJsRegex)(t)}catch(e){s=!1}this.setState((e=>Object.assign({},e,{regex:t,isRegexValid:s})))})),Ot(this,"handleRenameChange",(e=>{const t=e.currentTarget.value;this.setState((e=>Object.assign({},e,{renamePattern:t})))})),Ot(this,"handleRegexBlur",(e=>{const t=e.currentTarget.value;let s=!0;try{t&&(0,d.stringToJsRegex)(t)}catch(e){s=!1}this.setState({isRegexValid:s},(()=>{s&&this.props.onChange(Object.assign({},this.props.options,{regex:t}))}))})),Ot(this,"handleRenameBlur",(e=>{const t=e.currentTarget.value;this.setState({renamePattern:t},(()=>this.props.onChange(Object.assign({},this.props.options,{renamePattern:t}))))})),this.state={regex:e.options.regex,renamePattern:e.options.renamePattern,isRegexValid:!0}}render(){const{regex:e,renamePattern:t,isRegexValid:s}=this.state;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form gf-form--grow",children:[Tt||(Tt=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Match"})),(0,U.jsx)(m.Field,{invalid:!s,error:s?void 0:"Invalid pattern",className:oe.css`
                margin-bottom: 0;
              `,children:(0,U.jsx)(m.Input,{placeholder:"Regular expression pattern",value:e||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})})]})}),(0,U.jsx)("div",{className:"gf-form-inline",children:(0,U.jsxs)("div",{className:"gf-form gf-form--grow",children:[Nt||(Nt=(0,U.jsx)("div",{className:"gf-form-label width-8",children:"Replace"})),(0,U.jsx)(m.Field,{className:oe.css`
                margin-bottom: 0;
              `,children:(0,U.jsx)(m.Input,{placeholder:"Replacement pattern",value:t||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})})]})})]})}}const Pt={id:d.DataTransformerID.renameByRegex,editor:It,transformation:d.standardTransformers.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."};var Mt=s("./packages/grafana-data/src/transformations/transformers/histogram.ts");const Ft={id:d.DataTransformerID.histogram,editor:({input:e,options:t,onChange:s})=>{var a;const n=(0,l.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;s(Object.assign({},t,{bucketSize:isNaN(a)?void 0:a}))}),[s,t]),i=(0,l.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;s(Object.assign({},t,{bucketOffset:isNaN(a)?void 0:a}))}),[s,t]),r=(0,l.useCallback)((()=>{s(Object.assign({},t,{combine:!t.combine}))}),[s,t]);return(0,U.jsxs)("div",{children:[(0,U.jsx)(m.InlineFieldRow,{children:(0,U.jsx)(m.InlineField,{labelWidth:18,label:Mt.py.bucketSize.name,tooltip:Mt.py.bucketSize.description,children:(0,U.jsx)(m.Input,{type:"number",value:t.bucketSize,placeholder:"auto",onChange:n,min:0})})}),(0,U.jsx)(m.InlineFieldRow,{children:(0,U.jsx)(m.InlineField,{labelWidth:18,label:Mt.py.bucketOffset.name,tooltip:Mt.py.bucketOffset.description,children:(0,U.jsx)(m.Input,{type:"number",value:t.bucketOffset,placeholder:"none",onChange:i,min:0})})}),(0,U.jsx)(m.InlineFieldRow,{children:(0,U.jsx)(m.InlineField,{labelWidth:18,label:Mt.py.combine.name,tooltip:Mt.py.combine.description,children:(0,U.jsx)(m.InlineSwitch,{value:null!==(a=t.combine)&&void 0!==a&&a,onChange:r})})})]})},transformation:d.standardTransformers.histogramTransformer,name:d.standardTransformers.histogramTransformer.name,description:d.standardTransformers.histogramTransformer.description};function At(e,t,s){const a={},n={};for(const r of e.fields){const o=(0,d.getFieldDisplayName)(r,e),l=s.index[o].handler;if(!l)continue;const c=r.values.get(t);if(null==c)continue;const u=l.processor(c,a,n);var i;if(null!=u)a[null!==(i=l.targetProperty)&&void 0!==i?i:l.key]=u}return n.mappingValues&&(a.mappings=function(e){const t={type:d.MappingType.ValueToText,options:{}};if(!e.mappingValues)return[];for(let s=0;s<e.mappingValues.length;s++){const a=e.mappingValues[s];null!=a&&(t.options[a.toString()]={color:e.mappingColors&&e.mappingColors[s],text:e.mappingTexts&&e.mappingTexts[s],index:s})}return[t]}(n)),a}let Dt;!function(e){e.Name="field.name",e.Value="field.value",e.Label="field.label",e.Ignore="__ignore"}(Dt||(Dt={}));const $t=[{key:Dt.Name,name:"Field name",processor:()=>{}},{key:Dt.Value,name:"Field value",processor:()=>{}},{key:Dt.Label,name:"Field label",processor:()=>{}},{key:Dt.Ignore,name:"Ignore",processor:()=>{}},{key:"max",processor:Et},{key:"min",processor:Et},{key:"unit",processor:e=>e.toString()},{key:"decimals",processor:Et},{key:"displayName",name:"Display name",processor:e=>e.toString()},{key:"color",processor:e=>({fixedColor:e,mode:d.FieldColorModeId.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(e,t)=>{const s=(0,d.anyToNumber)(e);if(!isNaN(s))return t.thresholds||(t.thresholds={mode:d.ThresholdsMode.Absolute,steps:[{value:-1/0,color:"green"}]}),t.thresholds.steps.push({value:s,color:"red"}),t.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:d.ReducerID.allValues,processor:(e,t,s)=>{if((0,i.isArray)(e))return s.mappingValues=e,t.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:d.ReducerID.allValues,processor:(e,t,s)=>{if((0,i.isArray)(e))return s.mappingColors=e,t.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:d.ReducerID.allValues,processor:(e,t,s)=>{if((0,i.isArray)(e))return s.mappingTexts=e,t.mappings}}];let Lt=null;function Et(e){const t=(0,d.anyToNumber)(e);if(!isNaN(t))return t}function Rt(e){return e?function(){if(null===Lt){Lt={};for(const e of $t)Lt[e.key]=e}return Lt}()[e]:null}function _t(e,t,s){const a={index:{}};let n=t.find((e=>e.handlerKey===Dt.Name)),i=t.find((e=>e.handlerKey===Dt.Value));for(const c of e.fields){var r,o,l;const u=(0,d.getFieldDisplayName)(c,e),p=t.find((e=>e.fieldName===u));let h=Rt(p?p.handlerKey:u.toLowerCase());s&&(h?(h.key===Dt.Name&&(a.nameField=c),h.key===Dt.Value&&(a.valueField=c)):p||(a.nameField||n||c.type!==d.FieldType.string||(a.nameField=c,h=Rt(Dt.Name)),a.valueField||i||c.type!==d.FieldType.number||(a.valueField=c,h=Rt(Dt.Value)))),!h&&s&&(h=Rt(Dt.Label)),a.index[u]={automatic:!p,handler:h,reducerId:null!==(r=null!==(o=null==p?void 0:p.reducerId)&&void 0!==o?o:null===(l=h)||void 0===l?void 0:l.defaultReducer)&&void 0!==r?r:d.ReducerID.lastNotNull}}return a}const Vt={id:d.DataTransformerID.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:e=>t=>t.pipe((0,tt.U)((t=>t.map((t=>function(e,t){var s;const a=_t(t,null!==(s=e.mappings)&&void 0!==s?s:[],!0),{nameField:n,valueField:i}=a;if(!n||!i)return t;const r=[];for(let e=0;e<n.values.length;e++){const s=n.values.get(e),o=i.values.get(e),l=At(t,e,a),c=Bt(t,e,a),u={name:s,type:i.type,values:new d.ArrayVector([o]),config:l,labels:c};r.push(u)}return{fields:r,length:1}}(e,t))))))};function Bt(e,t,s){const a=Object.assign({},s.nameField.labels);for(let n=0;n<e.fields.length;n++){const i=e.fields[n],r=(0,d.getFieldDisplayName)(i,e),o=s.index[r];if(o.handler&&o.handler.key!==Dt.Label)continue;const l=i.values.get(t);null!=l&&(a[r]=l)}return a}var zt,Ut,qt;function Ht({frame:e,mappings:t,onChange:s,withReducers:a,withNameAndValue:n}){const i=(0,m.useStyles2)(Wt),r=function(e,t,s){const a=[],n=_t(e,null!=t?t:[],s);for(const t of e.fields){var i,r;const s=(0,d.getFieldDisplayName)(t,e),o=n.index[s],l=Gt(o.handler,o.automatic);a.push({fieldName:s,configOption:o.automatic?null:l,placeholder:o.automatic?null==l?void 0:l.label:"Choose",handlerKey:null!==(i=null===(r=o.handler)||void 0===r?void 0:r.key)&&void 0!==i?i:null,reducerId:o.reducerId})}for(const e of t)if(!a.find((t=>t.fieldName===e.fieldName))){var o;const t=Rt(e.handlerKey);a.push({fieldName:e.fieldName,handlerKey:e.handlerKey,configOption:Gt(t,!1),missingInFrame:!0,reducerId:null!==(o=e.reducerId)&&void 0!==o?o:d.ReducerID.lastNotNull})}return Object.values(a)}(e,t,n),o=$t.map((e=>Gt(e,!1)));return(0,U.jsxs)("table",{className:i.table,children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[zt||(zt=(0,U.jsx)("th",{children:"Field"})),Ut||(Ut=(0,U.jsx)("th",{children:"Use as"})),a&&(qt||(qt=(0,U.jsx)("th",{children:"Select"})))]})}),(0,U.jsx)("tbody",{children:r.map((e=>(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:i.labelCell,children:e.fieldName}),(0,U.jsx)("td",{className:i.selectCell,"data-testid":`${e.fieldName}-config-key`,children:(0,U.jsx)(m.Select,{menuShouldPortal:!0,options:o,value:e.configOption,placeholder:e.placeholder,isClearable:!0,onChange:a=>((e,a)=>{const n=t.findIndex((t=>t.fieldName===e.fieldName));if(a)if(-1!==n){const e=[...t];e.splice(n,1,Object.assign({},t[n],{handlerKey:a.value})),s(e)}else s([...t,{fieldName:e.fieldName,handlerKey:a.value}]);else s(-1!==n?t.filter(((e,t)=>t!==n)):[...t,{fieldName:e.fieldName,handlerKey:"__ignore"}])})(e,a)})}),a&&(0,U.jsx)("td",{"data-testid":`${e.fieldName}-reducer`,className:i.selectCell,children:(0,U.jsx)(m.StatsPicker,{stats:[e.reducerId],defaultStat:e.reducerId,onChange:a=>((e,a)=>{const n=t.findIndex((t=>t.fieldName===e.fieldName));if(-1!==n){const e=[...t];e.splice(n,1,Object.assign({},t[n],{reducerId:a})),s(e)}else s([...t,{fieldName:e.fieldName,handlerKey:e.handlerKey,reducerId:a}])})(e,a[0])})})]},e.fieldName)))})]})}function Gt(e,t){var s;if(!e)return null;let a=null!==(s=e.name)&&void 0!==s?s:(0,i.capitalize)(e.key);return t&&(a=`${a} (auto)`),{label:a,value:e.key}}const Wt=e=>({table:oe.css`
    margin-top: ${e.spacing(1)};

    td,
    th {
      border-right: 4px solid ${e.colors.background.primary};
      border-bottom: 4px solid ${e.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${e.typography.bodySmall.fontSize};
      line-height: ${e.spacing(4)};
      padding: ${e.spacing(0,1)};
    }
  `,labelCell:oe.css`
    font-size: ${e.typography.bodySmall.fontSize};
    background: ${e.colors.background.secondary};
    padding: ${e.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:oe.css`
    padding: 0;
    min-width: 161px;
  `});const Zt={id:Vt.id,editor:function({input:e,options:t,onChange:s}){var a;return 0===e.length?null:(0,U.jsx)("div",{children:(0,U.jsx)(Ht,{frame:e[0],mappings:null!==(a=t.mappings)&&void 0!==a?a:[],onChange:e=>s(Object.assign({},t,{mappings:e})),withNameAndValue:!0})})},transformation:Vt,name:Vt.name,description:Vt.description,state:d.PluginState.beta,help:"\n### Use cases \n\nThis transforms rows into separate fields. This can be useful as fields can be styled and configured \nindividually, something rows cannot. It can also use additional fields as sources for dynamic field \nconfiguration or map them to field labels. The additional labels can then be used to define better \ndisplay names for the resulting fields.\n\nUseful when visualization data in:\n- Gauge\n- Stat\n- Pie chart\n\n## Example\n\nInput:\n\n| Name    | Value | Max |\n| ------- | ----- | --- |\n| ServerA | 10    | 100 |\n| ServerB | 20    | 200 |\n| ServerC | 30    | 300 |\n\nOutput:\n\n| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |\n| ------------------------- | ------------------------- | ------------------------- |\n| 10                        | 20                        | 30                        |\n\nAs you can see each row in the source data becomes a separate field. Each field now also has a max \nconfig option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field \nconfiguration and if set like this will be used by the visualization instead of any options manually \nconfigured in the panel editor options pane.\n\n"};const Qt={id:d.DataTransformerID.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:e=>t=>t.pipe((0,tt.U)((t=>function(e,t){var s;let a=null;for(const s of t)if(s.refId===e.configRefId){a=s;break}if(!a)return t;const n={fields:[],length:1},i=_t(a,null!==(s=e.mappings)&&void 0!==s?s:[],!1);for(const e of a.fields){const t=Object.assign({},e),s=(0,d.getFieldDisplayName)(e,a),r=i.index[s],o=(0,d.reduceField)({field:e,reducers:[r.reducerId]});t.values=new d.ArrayVector([o[r.reducerId]]),n.fields.push(t)}const r=[],o=(0,d.getFieldMatcher)(e.applyTo||{id:d.FieldMatcherID.numeric});for(const e of t){if(e===a&&t.length>1)continue;const s={fields:[],length:e.length};for(const a of e.fields)if(o(a,e,t)){const e=At(n,0,i);s.fields.push(Object.assign({},a,{config:Object.assign({},a.config,e)}))}else s.fields.push(a);r.push(s)}return r}(e,t))))};const Kt={id:Qt.id,editor:function({input:e,onChange:t,options:s}){var a;const n=(0,m.useStyles2)(Yt),i=e.map((e=>e.refId)).filter((e=>null!=e)).map((e=>({label:e,value:e}))),r=s.configRefId||"config",o=null!==(a=s.applyTo)&&void 0!==a?a:{id:d.FieldMatcherID.byType,options:"number"},l=m.fieldMatchersUI.get(o.id),c=e.find((e=>e.refId===r)),u=m.fieldMatchersUI.list().filter((e=>!e.excludeFromPicker)).map((e=>({label:e.name,value:e.id,description:e.description})));return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(m.InlineFieldRow,{children:(0,U.jsx)(m.InlineField,{label:"Config query",labelWidth:20,children:(0,U.jsx)(m.Select,{menuShouldPortal:!0,onChange:e=>{t(Object.assign({},s,{configRefId:e.value||"config"}))},options:i,value:r,width:30})})}),(0,U.jsx)(m.InlineFieldRow,{children:(0,U.jsx)(m.InlineField,{label:"Apply to",labelWidth:20,children:(0,U.jsx)(m.Select,{menuShouldPortal:!0,onChange:e=>{t(Object.assign({},s,{applyTo:{id:e.value}}))},options:u,value:o.id,width:30})})}),(0,U.jsx)(m.InlineFieldRow,{children:(0,U.jsx)(m.InlineField,{label:"Apply to options",labelWidth:20,className:n.matcherOptions,children:(0,U.jsx)(l.component,{matcher:l.matcher,data:e,options:o.options,onChange:e=>{t(Object.assign({},s,{applyTo:{id:o.id,options:e}}))}})})}),(0,U.jsx)(m.InlineFieldRow,{children:c&&(0,U.jsx)(Ht,{frame:c,mappings:s.mappings,onChange:e=>t(Object.assign({},s,{mappings:e})),withReducers:!0})})]})},transformation:Qt,name:Qt.name,description:Qt.description,state:d.PluginState.beta,help:"\n### Use cases\n\nThis transformation allows you select one query and from it extract standard options such as \n**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.\nThis enables dynamic query driven visualization configuration.\n\n### Options\n\n- **Config query**: Selet the query that returns the data you want to use as configuration.\n- **Apply to**: Select what fields or series to apply the configuration to.\n- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.\n\n### Field mapping table\n\nBelow the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.\n\n## Example\n\nInput[0] (From query: A, name: ServerA)\n\n| Time          | Value |\n| ------------- | ----- |\n| 1626178119127 | 10    |\n| 1626178119129 | 30    |\n\nInput[1] (From query: B)\n\n| Time          | Value |\n| ------------- | ----- |\n| 1626178119127 | 100   |\n| 1626178119129 | 100   |\n\nOutput (Same as Input[0] but now with config on the Value field)\n\n| Time          | Value (config: Max=100) |\n| ------------- | ----------------------- |\n| 1626178119127 | 10                      |\n| 1626178119129 | 30                      |\n\nEach row in the source data becomes a separate field. Each field now also has a maximum\nconfiguration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.\nin the panel editor options pane.\n\n## Value mappings\n\nYou can also transform a query result into value mappings. This is is a bit different because every\nrow in the configuration query result is used to define a single value mapping row. See the following example.\n\nConfig query result:\n\n| Value | Text   | Color |\n| ----- | ------ | ----- |\n| L     | Low    | blue  |\n| M     | Medium | green |\n| H     | High   | red   |\n\nIn the field mapping specify:\n\n| Field | Use as                  | Select     |\n| ----- | ----------------------- | ---------- |\n| Value | Value mappings / Value  | All values |\n| Text  | Value mappings / Text   | All values |\n| Color | Value mappings / Ciolor | All values |\n\nGrafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.\n"},Yt=e=>({matcherOptions:oe.css`
    min-width: 404px;
  `});let Jt;function Xt(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(const s of es(e)){const e=s.fields[0];if(!e||e.type!==d.FieldType.time)continue;const a=[],n=[];for(const e of s.fields)switch(e.type){case d.FieldType.number:case d.FieldType.boolean:a.push(e);break;case d.FieldType.string:n.push(e)}for(const i of a)if(n.length){const a=new Map;for(let t=0;t<s.length;t++){const s=e.values.get(t),r=i.values.get(t);if(void 0===r||null==s)continue;const o=n.map((e=>e.values.get(t))).join("/");let l=a.get(o);if(!l){l={key:o,time:[],value:[],labels:{}};for(const e of n)l.labels[e.name]=e.values.get(t);a.set(o,l)}l.time.push(s),l.value.push(r)}for(const n of a.values())t.push({name:s.name,refId:s.refId,meta:Object.assign({},s.meta,{type:d.DataFrameType.TimeSeriesMany}),fields:[Object.assign({},e,{values:new d.ArrayVector(n.time)}),Object.assign({},i,{values:new d.ArrayVector(n.value),labels:n.labels})],length:n.time.length})}else t.push({name:s.name,refId:s.refId,meta:Object.assign({},s.meta,{type:d.DataFrameType.TimeSeriesMany}),fields:[e,i],length:s.length})}return t}function es(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(const s of e){let e;const a=[],n={},i={},r={},o={};for(let t=0;t<s.fields.length;t++){const l=s.fields[t];switch(l.type){case d.FieldType.string:case d.FieldType.boolean:l.name in o||(o[l.name]=t,i[l.name]=!0);break;case d.FieldType.time:if(!e){e=l;break}default:if(l.name in n){const e=n[l.name];if(l.type!==e)continue}else n[l.name]=l.type,a.push(l.name);const s=JSON.stringify(l.labels),c=r[s];if(void 0!==c?c.push(t):r[s]=[t],null!=l.labels)for(const e in l.labels)i[e]=!0}}if(!e)continue;const l=[],c=[],u=[],p=[];for(let t=0;t<s.length;t++)l.push({time:e.values.get(t),wideRowIndex:t});for(const e in r)c.push(e);for(const e in i)u.push(e);for(const e in o)p.push(e);l.sort(((e,t)=>e.time-t.time)),c.sort(),u.sort(),a.sort();const h=new d.MutableDataFrame(Object.assign({},s,{meta:Object.assign({},s.meta,{type:d.DataFrameType.TimeSeriesLong}),fields:[{name:e.name,type:e.type}]}));for(const e of a)h.addField({name:e,type:n[e]});for(const e of u)h.addField({name:e,type:d.FieldType.string});for(const t of l){const{time:a,wideRowIndex:n}=t;for(const t of c){const i={};for(const e of p)i[e]=s.fields[o[e]].values.get(n);let l=0;for(const e of r[t]){const t=s.fields[e];if(0==l++&&null!=t.labels)for(const e in t.labels)i[e]=t.labels[e];i[t.name]=t.values.get(n)}i[e.name]=a,h.add(i)}}t.push(h)}return t}!function(e){e.TimeSeriesWide="wide",e.TimeSeriesMany="many",e.TimeSeriesLong="long"}(Jt||(Jt={}));const ts={id:d.DataTransformerID.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:e=>t=>t.pipe((0,tt.U)((t=>ts.transformer(e)(t)))),transformer:e=>{var t;const s=null!==(t=null==e?void 0:e.format)&&void 0!==t?t:Jt.TimeSeriesWide;return s===Jt.TimeSeriesMany?Xt:s===Jt.TimeSeriesLong?es:e=>{const t=(0,d.outerJoinDataFrames)({frames:e,joinBy:d.fieldMatchers.get(d.FieldMatcherID.firstTimeField).get({}),enforceSort:!0,keepOriginIndices:!0});return t?[t]:[]}}},ss=[{label:"Wide time series",value:Jt.TimeSeriesWide,description:"Creates a single frame joined by time",info:(0,U.jsxs)("ul",{children:[(0,U.jsx)("li",{children:"Single frame"}),(0,U.jsx)("li",{children:"1st field is shared time field"}),(0,U.jsx)("li",{children:"Time in ascending order"}),(0,U.jsx)("li",{children:"Multiple value fields of any type"})]})},{label:"Multi-frame time series",value:Jt.TimeSeriesMany,description:"Creates a new frame for each time/number pair",info:(0,U.jsxs)("ul",{children:[(0,U.jsx)("li",{children:"Multiple frames"}),(0,U.jsx)("li",{children:"Each frame has two fields: time, value"}),(0,U.jsx)("li",{children:"Time in ascending order"}),(0,U.jsx)("li",{children:"String values are represented as labels"}),(0,U.jsx)("li",{children:"All values are numeric"})]})},{label:"Long time series",value:Jt.TimeSeriesLong,description:"Convert each frame to long format",info:(0,U.jsxs)("ul",{children:[(0,U.jsx)("li",{children:"Single frame"}),(0,U.jsx)("li",{children:"1st field is time field"}),(0,U.jsx)("li",{children:"Time in ascending order, but may have duplictes"}),(0,U.jsx)("li",{children:"String values are represented as separate fields rather than as labels"}),(0,U.jsx)("li",{children:"Multiple value fields may exist"})]})}];const as=e=>({info:oe.css`
    margin-left: 20px;
  `}),ns={id:ts.id,editor:function(e){const{options:t,onChange:s}=e,a=(0,m.useStyles2)(as),n=(0,l.useCallback)((e=>{s(Object.assign({},t,{format:e.value}))}),[s,t]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(m.InlineFieldRow,{children:(0,U.jsx)(m.InlineField,{label:"Format",labelWidth:12,children:(0,U.jsx)(m.Select,{menuShouldPortal:!0,width:35,options:ss,value:ss.find((e=>e.value===t.format))||ss[0],onChange:n,className:"flex-grow-1"})})}),(0,U.jsx)(m.InlineFieldRow,{children:(0,U.jsx)(m.InlineField,{label:"Info",labelWidth:12,children:(0,U.jsx)("div",{className:a.info,children:(ss.find((e=>e.value===t.format))||ss[0]).info})})})]})},transformation:ts,name:ts.name,description:ts.description,help:"\n  ### Use cases\n\n  This takes query results and transforms them into a predictable timeseries format.\n  This transformer may be especially useful when using old panels that only expect the\n  many-frame timeseries format.\n  "};var is=s("./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx");const rs={settings:{width:24}},os={id:d.DataTransformerID.convertFieldType,editor:({input:e,options:t,onChange:s})=>{const a=[{value:d.FieldType.number,label:"Numeric"},{value:d.FieldType.string,label:"String"},{value:d.FieldType.time,label:"Time"},{value:d.FieldType.boolean,label:"Boolean"}],n=(0,l.useCallback)((e=>a=>{const n=t.conversions;n[e]=Object.assign({},n[e],{targetField:null!=a?a:""}),s(Object.assign({},t,{conversions:n}))}),[s,t]),i=(0,l.useCallback)((e=>a=>{const n=t.conversions;n[e]=Object.assign({},n[e],{destinationType:a.value}),s(Object.assign({},t,{conversions:n}))}),[s,t]),r=(0,l.useCallback)((e=>a=>{const n=t.conversions;n[e]=Object.assign({},n[e],{dateFormat:a.currentTarget.value}),s(Object.assign({},t,{conversions:n}))}),[s,t]),o=(0,l.useCallback)((()=>{s(Object.assign({},t,{conversions:[...t.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]}))}),[s,t]),c=(0,l.useCallback)((e=>{const a=t.conversions;a.splice(e,1),s(Object.assign({},t,{conversions:a}))}),[s,t]);return(0,U.jsxs)(U.Fragment,{children:[t.conversions.map(((t,s)=>{var o;return(0,U.jsxs)(m.InlineFieldRow,{children:[(0,U.jsx)(m.InlineField,{label:"Field",children:(0,U.jsx)(is.b,{context:{data:e},value:null!==(o=t.targetField)&&void 0!==o?o:"",onChange:n(s),item:rs})}),(0,U.jsx)(m.InlineField,{label:"as",children:(0,U.jsx)(m.Select,{menuShouldPortal:!0,options:a,value:t.destinationType,placeholder:"Type",onChange:i(s),width:18})}),t.destinationType===d.FieldType.time&&(0,U.jsx)(m.InlineField,{label:"Date Format",children:(0,U.jsx)(m.Input,{value:t.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:r(s),width:24})}),(0,U.jsx)(m.Button,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>c(s),"aria-label":"Remove convert field type transformer"})]},`${t.targetField}-${s}`)})),(0,U.jsx)(m.Button,{size:"sm",icon:"plus",onClick:o,variant:"secondary","aria-label":"Add a convert field type transformer",children:"Convert field type"})]})},transformation:d.standardTransformers.convertFieldTypeTransformer,name:d.standardTransformers.convertFieldTypeTransformer.name,description:d.standardTransformers.convertFieldTypeTransformer.description},ls=()=>[ie,de,Pt,ge,De,Ge,Ze,vt,Ct,ot,ct,gt,mt,bt,Ft,Zt,Kt,ns,os];var cs=s("./node_modules/@sentry/minimal/esm/index.js"),ds=s("./node_modules/@sentry/browser/esm/sdk.js"),us=s("./node_modules/@sentry/browser/dist/transports/index.js"),ps=s("./node_modules/@sentry/browser/node_modules/@sentry/types/esm/severity.js"),hs=s("./node_modules/@sentry/utils/esm/promisebuffer.js"),gs=s("./node_modules/@sentry/utils/esm/supports.js"),ms=s("./node_modules/@sentry/utils/esm/syncpromise.js"),fs=s("./node_modules/@sentry/utils/esm/misc.js"),bs=s("./node_modules/@sentry/utils/esm/logger.js"),vs=s("./node_modules/@sentry/types/esm/status.js");function xs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ys{constructor(e){xs(this,"_disabledUntil",new Date(Date.now())),xs(this,"_buffer",new hs.D(30)),this.options=e}sendEvent(e){var t,s,a;if(new Date(Date.now())<this._disabledUntil)return Promise.reject({event:e,reason:`Transport locked till ${this._disabledUntil} due to too many requests.`,status:429});const n={body:JSON.stringify(Object.assign({},e,{level:null!==(t=e.level)&&void 0!==t?t:e.exception?ps.z.Error:ps.z.Info,exception:e.exception?{values:null===(s=e.exception.values)||void 0===s?void 0:s.map((e=>Object.assign({},e,{value:js(e.value)})))}:e.exception,breadcrumbs:null===(a=e.breadcrumbs)||void 0===a?void 0:a.map((e=>Object.assign({},e,{timestamp:ws(e.timestamp)}))),timestamp:ws(e.timestamp)})),url:this.options.endpoint},i={body:n.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,gs.hv)()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(i,this.options.fetchParameters),this._buffer.add(new ms.c(((e,t)=>{window.fetch(n.url,i).then((s=>{const a=vs.q.fromHttpCode(s.status);if(a!==vs.q.Success){if(a===vs.q.RateLimit){const e=Date.now(),t=s.headers.get("Retry-After");this._disabledUntil=new Date(e+(0,fs.JY)(e,t)),bs.k.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}t(s)}else e({status:a})})).catch(t)})))}}function ws(e){return e?new Date(1e3*e).toISOString():(new Date).toISOString()}function js(e){return"string"==typeof e||void 0===e?e:e&&"object"==typeof e&&0===Object.keys(e).length?"":String(e)}class ks extends us.d8{sendEvent(e){return(0,h.getEchoSrv)().addEvent({type:h.EchoEventType.Sentry,payload:e}),Promise.resolve({status:vs.q.Success,event:e})}}function Ss(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Cs{constructor(e){Ss(this,"supportedEvents",[h.EchoEventType.Sentry]),Ss(this,"transports",void 0),Ss(this,"addEvent",(e=>{this.transports.forEach((t=>t.sendEvent(e.payload)))})),Ss(this,"flush",(()=>{})),this.options=e,this.transports=[],e.dsn&&this.transports.push(new us.Vh({dsn:e.dsn})),e.customEndpoint&&this.transports.push(new ys({endpoint:e.customEndpoint}));const t={release:e.buildInfo.version,environment:e.buildInfo.env,dsn:e.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:e.sampleRate,transport:ks};e.user&&(0,cs.av)({email:e.user.email,id:String(e.user.id)}),(0,ds.S1)(t)}}var Ts=s("./public/app/features/variables/query/VariableQueryRunner.ts"),Ns=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),Os=s("./public/app/store/store.ts"),Is=s("./node_modules/redux/es/redux.js"),Ps=s("./public/app/core/actions/cleanUp.ts"),Ms=s("./public/app/core/reducers/navModel.ts"),Fs=s("./public/app/core/reducers/appNotification.ts");const As={navIndex:Ms.G4,appNotifications:Fs.VW};var Ds=s("./public/app/features/alerting/state/reducers.ts"),$s=s("./public/app/features/teams/state/reducers.ts"),Ls=s("./public/app/features/api-keys/state/reducers.ts"),Es=s("./public/app/features/folders/state/reducers.ts"),Rs=s("./public/app/features/dashboard/state/reducers.ts"),_s=s("./public/app/features/explore/state/main.ts"),Vs=s("./public/app/features/plugins/state/reducers.ts"),Bs=s("./public/app/features/datasources/state/reducers.ts"),zs=s("./public/app/features/users/state/reducers.ts"),Us=s("./public/app/features/profile/state/reducers.ts"),qs=s("./public/app/features/org/state/reducers.ts"),Hs=s("./public/app/features/admin/state/reducers.ts"),Gs=s("./public/app/features/variables/pickers/OptionsPicker/reducer.ts"),Ws=s("./public/app/features/variables/editor/reducer.ts"),Zs=s("./public/app/features/variables/state/variablesReducer.ts"),Qs=s("./public/app/features/variables/state/transactionReducer.ts"),Ks=s("./public/app/features/variables/inspect/reducer.ts");const Ys={templating:(0,Is.combineReducers)({editor:Ws.gl,variables:Zs.L,optionsPicker:Gs.cv,transaction:Qs.vw,inspect:Ks.iV})};var Js=s("./public/app/features/manage-dashboards/state/reducers.ts");const Xs=Object.assign({},As,Ds.ZP,$s.ZP,Ls.ZP,Es.ZP,Rs.ZP,_s.ZP,Vs.ZP,Bs.ZP,zs.ZP,Us.ZP,qs.ZP,Hs.ZP,Ys,Js.ZP),ea={},ta=()=>{const e=(0,Is.combineReducers)(Object.assign({},Xs,ea));return(t,s)=>{if(s.type!==Ps.e.type)return e(t,s);const{stateSelector:a}=s.payload,n=a(t);return sa(t,n),e(t,s)}},sa=(e,t)=>{for(const s in e){if(!e.hasOwnProperty(s))continue;const a=e[s];if(a===t)return e[s]=void 0,!0;if("object"==typeof a){if(sa(a,t))return!0}}return!1};var aa,na,ia,ra,oa,la,ca,da=s("./node_modules/react-router/esm/react-router.js"),ua=s("./node_modules/react-redux/es/index.js"),pa=s("./public/app/core/selectors/navModel.ts"),ha=s("./public/app/core/components/Page/Page.tsx");const ga=({ldapConnectionInfo:e})=>(0,U.jsxs)(U.Fragment,{children:[aa||(aa=(0,U.jsx)("h3",{className:"page-heading",children:"LDAP Connection"})),(0,U.jsxs)("div",{className:"gf-form-group",children:[(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsxs)("table",{className:"filter-table form-inline",children:[na||(na=(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{children:"Host"}),(0,U.jsx)("th",{colSpan:2,children:"Port"})]})})),(0,U.jsx)("tbody",{children:e&&e.map(((e,t)=>(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:e.host}),(0,U.jsx)("td",{children:e.port}),(0,U.jsx)("td",{children:e.available?ia||(ia=(0,U.jsx)(m.Icon,{name:"check",className:"pull-right"})):ra||(ra=(0,U.jsx)(m.Icon,{name:"exclamation-triangle",className:"pull-right"}))})]},t)))})]})}),(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)(ma,{ldapConnectionInfo:e})})]})]}),ma=({ldapConnectionInfo:e})=>{if(!e.some((e=>e.error)))return null;const t=[];e.forEach((e=>{e.error&&t.push(e)}));const s=t.map(((e,s)=>(0,U.jsxs)("div",{children:[(0,U.jsxs)("span",{style:{fontWeight:500},children:[e.host,":",e.port,oa||(oa=(0,U.jsx)("br",{}))]}),(0,U.jsx)("span",{children:e.error}),s!==t.length-1&&(0,U.jsxs)(U.Fragment,{children:[la||(la=(0,U.jsx)("br",{})),ca||(ca=(0,U.jsx)("br",{}))]})]},s)));return(0,U.jsx)(m.Alert,{title:"Connection error",severity:P.F1.Error,children:s})};var fa,ba,va,xa,ya;function wa(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ja extends l.PureComponent{constructor(...e){super(...e),wa(this,"state",{isSyncing:!1}),wa(this,"handleSyncClick",(()=>{this.setState({isSyncing:!this.state.isSyncing})}))}render(){const{ldapSyncInfo:e}=this.props,{isSyncing:t}=this.state,s=(0,d.dateTimeFormat)(e.nextSync,{format:"dddd YYYY-MM-DD HH:mm zz"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("h3",{className:"page-heading",children:["LDAP Synchronisation",(0,U.jsxs)(m.Button,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0,children:[fa||(fa=(0,U.jsx)("span",{className:"btn-title",children:"Bulk-sync now"})),t&&(ba||(ba=(0,U.jsx)(m.Spinner,{inline:!0})))]})]}),(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)("table",{className:"filter-table form-inline",children:(0,U.jsxs)("tbody",{children:[(0,U.jsxs)("tr",{children:[va||(va=(0,U.jsx)("td",{children:"Active synchronisation"})),(0,U.jsx)("td",{colSpan:2,children:e.enabled?"Enabled":"Disabled"})]}),(0,U.jsxs)("tr",{children:[xa||(xa=(0,U.jsx)("td",{children:"Scheduled"})),(0,U.jsx)("td",{children:e.schedule})]}),(0,U.jsxs)("tr",{children:[ya||(ya=(0,U.jsx)("td",{children:"Next scheduled synchronisation"})),(0,U.jsx)("td",{children:s})]})]})})})})]})}}var ka,Sa,Ca,Ta,Na,Oa;const Ia=({info:e,showAttributeMapping:t})=>(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsxs)("table",{className:"filter-table form-inline",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[ka||(ka=(0,U.jsx)("th",{colSpan:2,children:"User information"})),t&&(Sa||(Sa=(0,U.jsx)("th",{children:"LDAP attribute"})))]})}),(0,U.jsxs)("tbody",{children:[(0,U.jsxs)("tr",{children:[Ca||(Ca=(0,U.jsx)("td",{className:"width-16",children:"First name"})),(0,U.jsx)("td",{children:e.name.ldapValue}),t&&(0,U.jsx)("td",{children:e.name.cfgAttrValue})]}),(0,U.jsxs)("tr",{children:[Ta||(Ta=(0,U.jsx)("td",{className:"width-16",children:"Surname"})),(0,U.jsx)("td",{children:e.surname.ldapValue}),t&&(0,U.jsx)("td",{children:e.surname.cfgAttrValue})]}),(0,U.jsxs)("tr",{children:[Na||(Na=(0,U.jsx)("td",{className:"width-16",children:"Username"})),(0,U.jsx)("td",{children:e.login.ldapValue}),t&&(0,U.jsx)("td",{children:e.login.cfgAttrValue})]}),(0,U.jsxs)("tr",{children:[Oa||(Oa=(0,U.jsx)("td",{className:"width-16",children:"Email"})),(0,U.jsx)("td",{children:e.email.ldapValue}),t&&(0,U.jsx)("td",{children:e.email.cfgAttrValue})]})]})]})})});var Pa,Ma,Fa,Aa,Da,$a;const La=({permissions:e})=>(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsxs)("table",{className:"filter-table form-inline",children:[Pa||(Pa=(0,U.jsx)("thead",{children:(0,U.jsx)("tr",{children:(0,U.jsx)("th",{colSpan:1,children:"Permissions"})})})),(0,U.jsxs)("tbody",{children:[(0,U.jsxs)("tr",{children:[Ma||(Ma=(0,U.jsx)("td",{className:"width-16",children:" Grafana admin"})),(0,U.jsx)("td",{children:e.isGrafanaAdmin?(0,U.jsxs)(U.Fragment,{children:[Fa||(Fa=(0,U.jsx)(m.Icon,{name:"shield"}))," Yes"]}):"No"})]}),(0,U.jsxs)("tr",{children:[Aa||(Aa=(0,U.jsx)("td",{className:"width-16",children:"Status"})),(0,U.jsx)("td",{children:e.isDisabled?(0,U.jsxs)(U.Fragment,{children:[Da||(Da=(0,U.jsx)(m.Icon,{name:"times"}))," Inactive"]}):(0,U.jsxs)(U.Fragment,{children:[$a||($a=(0,U.jsx)(m.Icon,{name:"check"}))," Active"]})})]})]})]})})});var Ea,Ra,_a,Va,Ba;const za=({groups:e,showAttributeMapping:t})=>{const s=t?e:e.filter((e=>e.orgRole));return(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsxs)("table",{className:"filter-table form-inline",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[t&&(Ea||(Ea=(0,U.jsx)("th",{children:"LDAP Group"}))),Ra||(Ra=(0,U.jsxs)("th",{children:["Organization",(0,U.jsx)(m.Tooltip,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info",children:(0,U.jsx)("span",{className:"gf-form-help-icon",children:(0,U.jsx)(m.Icon,{name:"info-circle"})})})]})),_a||(_a=(0,U.jsx)("th",{children:"Role"}))]})}),(0,U.jsx)("tbody",{children:s.map(((e,s)=>(0,U.jsxs)("tr",{children:[t&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("td",{children:e.groupDN}),!e.orgRole&&(0,U.jsxs)(U.Fragment,{children:[Va||(Va=(0,U.jsx)("td",{})),Ba||(Ba=(0,U.jsx)("td",{children:(0,U.jsxs)("span",{className:"text-warning",children:["No match",(0,U.jsx)(m.Tooltip,{placement:"top",content:"No matching groups found",theme:"info",children:(0,U.jsx)("span",{className:"gf-form-help-icon",children:(0,U.jsx)(m.Icon,{name:"info-circle"})})})]})}))]})]}),e.orgName&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("td",{children:e.orgName}),(0,U.jsx)("td",{children:e.orgRole})]})]},`${e.orgId}-${s}`)))})]})})})};var Ua,qa,Ha,Ga,Wa;const Za=({teams:e,showAttributeMapping:t})=>{const s=t?e:e.filter((e=>e.teamName));return(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsxs)("table",{className:"filter-table form-inline",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[t&&(Ua||(Ua=(0,U.jsx)("th",{children:"LDAP Group"}))),qa||(qa=(0,U.jsx)("th",{children:"Organisation"})),Ha||(Ha=(0,U.jsx)("th",{children:"Team"}))]})}),(0,U.jsx)("tbody",{children:s.map(((e,s)=>(0,U.jsxs)("tr",{children:[t&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("td",{children:e.groupDN}),!e.orgName&&(0,U.jsxs)(U.Fragment,{children:[Ga||(Ga=(0,U.jsx)("td",{})),Wa||(Wa=(0,U.jsx)("td",{children:(0,U.jsxs)("div",{className:"text-warning",children:["No match",(0,U.jsx)(m.Tooltip,{placement:"top",content:"No matching teams found",theme:"info",children:(0,U.jsx)("span",{className:"gf-form-help-icon",children:(0,U.jsx)(m.Icon,{name:"info-circle"})})})]})}))]})]}),e.orgName&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("td",{children:e.orgName}),(0,U.jsx)("td",{children:e.teamName})]})]},`${e.teamName}-${s}`)))})]})})})};var Qa;const Ka=({ldapUser:e,showAttributeMapping:t})=>(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ia,{info:e.info,showAttributeMapping:t}),(0,U.jsx)(La,{permissions:e.permissions}),e.roles&&e.roles.length>0&&(0,U.jsx)(za,{groups:e.roles,showAttributeMapping:t}),e.teams&&e.teams.length>0?(0,U.jsx)(Za,{teams:e.teams,showAttributeMapping:t}):Qa||(Qa=(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)("table",{className:"filter-table form-inline",children:(0,U.jsx)("tbody",{children:(0,U.jsx)("tr",{children:(0,U.jsx)("td",{children:"No teams found via LDAP"})})})})})}))]});var Ya,Ja,Xa=s("./public/app/features/admin/state/actions.ts");function en(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{FormField:tn}=m.LegacyForms;class sn extends l.PureComponent{constructor(...e){super(...e),en(this,"state",{isLoading:!0}),en(this,"search",(e=>{e.preventDefault();const t=e.target.elements.username.value;t&&this.fetchUserMapping(t)})),en(this,"onClearUserError",(()=>{this.props.clearUserError()}))}async componentDidMount(){const{clearUserMappingInfo:e,queryParams:t}=this.props;await e(),await this.fetchLDAPStatus(),t.username&&await this.fetchUserMapping(t.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:e,loadLdapSyncStatus:t}=this.props;return Promise.all([e(),t()])}async fetchUserMapping(e){const{loadUserMapping:t}=this.props;return await t(e)}render(){const{ldapUser:e,userError:t,ldapError:s,ldapSyncInfo:a,ldapConnectionInfo:n,navModel:i,queryParams:r}=this.props,{isLoading:o}=this.state,l=te.Vt.hasPermission(P.bW.LDAPUsersRead);return(0,U.jsx)(ha.Z,{navModel:i,children:(0,U.jsx)(ha.Z.Contents,{isLoading:o,children:(0,U.jsxs)(U.Fragment,{children:[s&&s.title&&(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)(m.Alert,{title:s.title,severity:P.F1.Error,children:s.body})}),(0,U.jsx)(ga,{ldapConnectionInfo:n}),c.ZP.licenseInfo.hasLicense&&a&&(0,U.jsx)(ja,{ldapSyncInfo:a}),l&&(0,U.jsxs)(U.Fragment,{children:[Ya||(Ya=(0,U.jsx)("h3",{className:"page-heading",children:"Test user mapping"})),(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsxs)("form",{onSubmit:this.search,className:"gf-form-inline",children:[(0,U.jsx)(tn,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:r.username}),Ja||(Ja=(0,U.jsx)(m.Button,{type:"submit",children:"Run"}))]})}),t&&t.title&&(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)(m.Alert,{title:t.title,severity:P.F1.Error,onRemove:this.onClearUserError,children:t.body})}),e&&(0,U.jsx)(Ka,{ldapUser:e,showAttributeMapping:!0})]})]})})})}}const an={loadLdapState:Xa.Y3,loadLdapSyncStatus:Xa.j4,loadUserMapping:Xa.b_,clearUserError:Xa.V0,clearUserMappingInfo:Xa.IS},nn=(0,ua.connect)((e=>({navModel:(0,pa.h)(e.navIndex,"ldap"),ldapConnectionInfo:e.ldap.connectionInfo,ldapUser:e.ldap.user,ldapSyncInfo:e.ldap.syncInfo,userError:e.ldap.userError,ldapError:e.ldap.ldapError})),an)(sn);var rn;function on(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ln extends l.PureComponent{constructor(...e){super(...e),on(this,"state",{isLoading:!1,showDeleteModal:!1,showDisableModal:!1}),on(this,"showDeleteUserModal",(e=>()=>{this.setState({showDeleteModal:e})})),on(this,"showDisableUserModal",(e=>()=>{this.setState({showDisableModal:e})})),on(this,"onUserDelete",(()=>{const{user:e,onUserDelete:t}=this.props;t(e.id)})),on(this,"onUserDisable",(()=>{const{user:e,onUserDisable:t}=this.props;t(e.id)})),on(this,"onUserEnable",(()=>{const{user:e,onUserEnable:t}=this.props;t(e.id)})),on(this,"onUserNameChange",(e=>{const{user:t,onUserUpdate:s}=this.props;s(Object.assign({},t,{name:e}))})),on(this,"onUserEmailChange",(e=>{const{user:t,onUserUpdate:s}=this.props;s(Object.assign({},t,{email:e}))})),on(this,"onUserLoginChange",(e=>{const{user:t,onUserUpdate:s}=this.props;s(Object.assign({},t,{login:e}))})),on(this,"onPasswordChange",(e=>{this.props.onPasswordChange(e)}))}render(){var e;const{user:t}=this.props,{showDeleteModal:s,showDisableModal:a}=this.state,n=(null===(e=t.authLabels)||void 0===e?void 0:e.length)&&t.authLabels[0],i=n?`Synced via ${n}`:"",r=cn(c.vc.theme),o=t.isExternal||!te.Vt.hasPermission(P.bW.UsersWrite),l=t.isExternal||!te.Vt.hasPermission(P.bW.UsersPasswordUpdate),d=te.Vt.hasPermission(P.bW.UsersDelete),u=te.Vt.hasPermission(P.bW.UsersDisable),p=te.Vt.hasPermission(P.bW.UsersEnable);return(0,U.jsxs)(U.Fragment,{children:[rn||(rn=(0,U.jsx)("h3",{className:"page-heading",children:"User information"})),(0,U.jsxs)("div",{className:"gf-form-group",children:[(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)("table",{className:"filter-table form-inline",children:(0,U.jsxs)("tbody",{children:[(0,U.jsx)(dn,{label:"Name",value:t.name,locked:o,lockMessage:i,onChange:this.onUserNameChange}),(0,U.jsx)(dn,{label:"Email",value:t.email,locked:o,lockMessage:i,onChange:this.onUserEmailChange}),(0,U.jsx)(dn,{label:"Username",value:t.login,locked:o,lockMessage:i,onChange:this.onUserLoginChange}),(0,U.jsx)(dn,{label:"Password",value:"********",inputType:"password",locked:l,lockMessage:i,onChange:this.onPasswordChange})]})})}),(0,U.jsxs)("div",{className:r.buttonRow,children:[d&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(m.Button,{variant:"destructive",onClick:this.showDeleteUserModal(!0),children:"Delete user"}),(0,U.jsx)(m.ConfirmModal,{isOpen:s,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:this.onUserDelete,onDismiss:this.showDeleteUserModal(!1)})]}),t.isDisabled&&p&&(0,U.jsx)(m.Button,{variant:"secondary",onClick:this.onUserEnable,children:"Enable user"}),!t.isDisabled&&u&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(m.Button,{variant:"secondary",onClick:this.showDisableUserModal(!0),children:"Disable user"}),(0,U.jsx)(m.ConfirmModal,{isOpen:a,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:this.onUserDisable,onDismiss:this.showDisableUserModal(!1)})]})]})]})]})}}const cn=(0,m.stylesFactory)((e=>({buttonRow:oe.css`
      margin-top: 0.8rem;
      > * {
        margin-right: 16px;
      }
    `})));class dn extends l.PureComponent{constructor(...e){super(...e),on(this,"inputElem",void 0),on(this,"state",{editing:!1,value:this.props.value||""}),on(this,"setInputElem",(e=>{this.inputElem=e})),on(this,"onEditClick",(()=>{"password"===this.props.inputType?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)})),on(this,"onCancelClick",(()=>{this.setState({editing:!1,value:this.props.value||""})})),on(this,"onInputChange",((e,t)=>{t!==m.LegacyInputStatus.Invalid&&this.setState({value:e.target.value})})),on(this,"onInputBlur",((e,t)=>{t!==m.LegacyInputStatus.Invalid&&this.setState({value:e.target.value})})),on(this,"focusInput",(()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()})),on(this,"onSave",(()=>{this.props.onChange&&this.props.onChange(this.state.value)}))}render(){const{label:e,locked:t,lockMessage:s,inputType:a}=this.props,{value:n}=this.state,i=(0,oe.cx)("width-16",oe.css`
        font-weight: 500;
      `),r=(0,oe.cx)("pull-right");return t?(0,U.jsx)(un,{label:e,value:n,lockMessage:s}):(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:i,children:e}),(0,U.jsx)("td",{className:"width-25",colSpan:2,children:this.state.editing?(0,U.jsx)(m.Input,{type:a,defaultValue:n,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):(0,U.jsx)("span",{children:this.props.value})}),(0,U.jsx)("td",{children:(0,U.jsx)("div",{className:r,children:(0,U.jsx)(m.ConfirmButton,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick,children:"Edit"})})})]})}}on(dn,"defaultProps",{value:"",locked:!1,lockMessage:"",inputType:"text"});const un=({label:e,value:t,lockMessage:s})=>{const a=(0,oe.cx)("pull-right",oe.css`
      font-style: italic;
      margin-right: 0.6rem;
    `),n=(0,oe.cx)("width-16",oe.css`
      font-weight: 500;
    `);return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:n,children:e}),(0,U.jsx)("td",{className:"width-25",colSpan:2,children:t}),(0,U.jsx)("td",{children:(0,U.jsx)("span",{className:a,children:s})})]})};var pn,hn,gn;function mn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const fn=[{label:"Yes",value:"YES"},{label:"No",value:"NO"}];class bn extends l.PureComponent{constructor(...e){super(...e),mn(this,"state",{isEditing:!1,currentAdminOption:this.props.isGrafanaAdmin?"YES":"NO"}),mn(this,"onChangeClick",(()=>{this.setState({isEditing:!0})})),mn(this,"onCancelClick",(()=>{this.setState({isEditing:!1,currentAdminOption:this.props.isGrafanaAdmin?"YES":"NO"})})),mn(this,"onGrafanaAdminChange",(()=>{const{currentAdminOption:e}=this.state,t="YES"===e;this.props.onGrafanaAdminChange(t)})),mn(this,"onAdminOptionSelect",(e=>{this.setState({currentAdminOption:e})}))}render(){const{isGrafanaAdmin:e}=this.props,{isEditing:t,currentAdminOption:s}=this.state,a=(0,oe.cx)("pull-right"),n=te.Vt.hasPermission(P.bW.UsersPermissionsUpdate);return(0,U.jsxs)(U.Fragment,{children:[pn||(pn=(0,U.jsx)("h3",{className:"page-heading",children:"Permissions"})),(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)("table",{className:"filter-table form-inline",children:(0,U.jsx)("tbody",{children:(0,U.jsxs)("tr",{children:[hn||(hn=(0,U.jsx)("td",{className:"width-16",children:"Grafana Admin"})),t?(0,U.jsx)("td",{colSpan:2,children:(0,U.jsx)(m.RadioButtonGroup,{options:fn,value:s,onChange:this.onAdminOptionSelect})}):(0,U.jsx)("td",{colSpan:2,children:e?(0,U.jsxs)(U.Fragment,{children:[gn||(gn=(0,U.jsx)(m.Icon,{name:"shield"}))," Yes"]}):(0,U.jsx)(U.Fragment,{children:"No"})}),(0,U.jsx)("td",{children:(0,U.jsx)("div",{className:a,children:n&&(0,U.jsx)(m.ConfirmButton,{className:"pull-right",onClick:this.onChangeClick,onConfirm:this.onGrafanaAdminChange,onCancel:this.onCancelClick,confirmText:"Change",children:"Change"})})})]})})})})})]})}}var vn,xn,yn,wn,jn,kn,Sn;function Cn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Tn extends l.PureComponent{constructor(...e){super(...e),Cn(this,"state",{showLogoutModal:!1}),Cn(this,"showLogoutConfirmationModal",(e=>()=>{this.setState({showLogoutModal:e})})),Cn(this,"onSessionRevoke",(e=>()=>{this.props.onSessionRevoke(e)})),Cn(this,"onAllSessionsRevoke",(()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}))}render(){const{sessions:e}=this.props,{showLogoutModal:t}=this.state,s=oe.css`
      margin-top: 0.8rem;
    `,a=te.Vt.hasPermission(P.bW.UsersLogout);return(0,U.jsxs)(U.Fragment,{children:[vn||(vn=(0,U.jsx)("h3",{className:"page-heading",children:"Sessions"})),(0,U.jsxs)("div",{className:"gf-form-group",children:[(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsxs)("table",{className:"filter-table form-inline",children:[xn||(xn=(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{children:"Last seen"}),(0,U.jsx)("th",{children:"Logged on"}),(0,U.jsx)("th",{children:"IP address"}),(0,U.jsx)("th",{colSpan:2,children:"Browser and OS"})]})})),(0,U.jsx)("tbody",{children:e&&e.map(((e,t)=>(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:e.isActive?"Now":e.seenAt}),(0,U.jsx)("td",{children:e.createdAt}),(0,U.jsx)("td",{children:e.clientIp}),(0,U.jsx)("td",{children:`${e.browser} on ${e.os} ${e.osVersion}`}),(0,U.jsx)("td",{children:(0,U.jsx)("div",{className:"pull-right",children:a&&(0,U.jsx)(m.ConfirmButton,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(e.id),children:"Force logout"})})})]},`${e.id}-${t}`)))})]})}),(0,U.jsxs)("div",{className:s,children:[a&&e.length>0&&(0,U.jsx)(m.Button,{variant:"secondary",onClick:this.showLogoutConfirmationModal(!0),children:"Force logout from all devices"}),(0,U.jsx)(m.ConfirmModal,{isOpen:t,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.showLogoutConfirmationModal(!1)})]})]})]})}}class Nn extends l.PureComponent{constructor(...e){var t,s,a;super(...e),a=()=>{this.props.onUserSync()},(s="onUserSync")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}render(){const{ldapSyncInfo:e,user:t}=this.props,s=e&&e.nextSync?(0,d.dateTimeFormat)(e.nextSync,{format:"dddd YYYY-MM-DD HH:mm zz"}):"",a=`/admin/ldap?user=${t&&t.login}`,n=te.Vt.hasPermission(P.bW.LDAPUsersRead),i=te.Vt.hasPermission(P.bW.LDAPUsersSync);return(0,U.jsxs)(U.Fragment,{children:[yn||(yn=(0,U.jsx)("h3",{className:"page-heading",children:"LDAP Synchronisation"})),(0,U.jsxs)("div",{className:"gf-form-group",children:[(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)("table",{className:"filter-table form-inline",children:(0,U.jsxs)("tbody",{children:[wn||(wn=(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:"External sync"}),(0,U.jsx)("td",{children:"User synced via LDAP. Some changes must be done in LDAP or mappings."}),(0,U.jsx)("td",{children:(0,U.jsx)("span",{className:"label label-tag",children:"LDAP"})})]})),(0,U.jsx)("tr",{children:e.enabled?(0,U.jsxs)(U.Fragment,{children:[jn||(jn=(0,U.jsx)("td",{children:"Next scheduled synchronization"})),(0,U.jsx)("td",{colSpan:2,children:s})]}):(0,U.jsxs)(U.Fragment,{children:[kn||(kn=(0,U.jsx)("td",{children:"Next scheduled synchronization"})),Sn||(Sn=(0,U.jsx)("td",{colSpan:2,children:"Not enabled"}))]})})]})})}),(0,U.jsxs)("div",{className:"gf-form-button-row",children:[i&&(0,U.jsx)(m.Button,{variant:"secondary",onClick:this.onUserSync,children:"Sync user"}),n&&(0,U.jsx)(m.LinkButton,{variant:"secondary",href:a,children:"Debug LDAP Mapping"})]})]})]})}}function On(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class In extends l.PureComponent{constructor(...e){super(...e),On(this,"orgs",[]),On(this,"state",{isLoading:!1}),On(this,"getOrgOptions",(async e=>{var t;return null!==(t=this.orgs)&&void 0!==t&&t.length||await this.loadOrgs(),this.orgs.map((e=>({value:{id:e.id,name:e.name},label:e.name})))}))}async loadOrgs(){this.setState({isLoading:!0});const e=await(0,w.i)().get("/api/orgs");return this.orgs=e,this.setState({isLoading:!1}),e}render(){const{className:e,onSelected:t}=this.props,{isLoading:s}=this.state;return(0,U.jsx)(m.AsyncSelect,{menuShouldPortal:!0,className:e,isLoading:s,defaultOptions:!0,isSearchable:!1,loadOptions:this.getOrgOptions,onChange:t,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}}var Pn,Mn=s("./public/app/features/admin/OrgRolePicker.tsx");function Fn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class An extends l.PureComponent{constructor(...e){super(...e),Fn(this,"state",{showAddOrgModal:!1}),Fn(this,"showOrgAddModal",(e=>()=>{this.setState({showAddOrgModal:e})}))}render(){const{orgs:e,onOrgRoleChange:t,onOrgRemove:s,onOrgAdd:a}=this.props,{showAddOrgModal:n}=this.state,i=oe.css`
      margin-top: 0.8rem;
    `,r=te.Vt.hasPermission(P.bW.OrgUsersAdd);return(0,U.jsxs)(U.Fragment,{children:[Pn||(Pn=(0,U.jsx)("h3",{className:"page-heading",children:"Organizations"})),(0,U.jsxs)("div",{className:"gf-form-group",children:[(0,U.jsx)("div",{className:"gf-form",children:(0,U.jsx)("table",{className:"filter-table form-inline",children:(0,U.jsx)("tbody",{children:e.map(((e,a)=>(0,U.jsx)(Ln,{org:e,onOrgRoleChange:t,onOrgRemove:s},`${e.orgId}-${a}`)))})})}),(0,U.jsx)("div",{className:i,children:r&&(0,U.jsx)(m.Button,{variant:"secondary",onClick:this.showOrgAddModal(!0),children:"Add user to organization"})}),(0,U.jsx)(Rn,{isOpen:n,onOrgAdd:a,onDismiss:this.showOrgAddModal(!1)})]})]})}}const Dn=(0,m.stylesFactory)((e=>({removeButton:oe.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${e.palette.blue95};
    `,label:oe.css`
      font-weight: 500;
    `})));class $n extends l.PureComponent{constructor(...e){super(...e),Fn(this,"state",{currentRole:this.props.org.role,isChangingRole:!1}),Fn(this,"onOrgRemove",(()=>{const{org:e}=this.props;this.props.onOrgRemove(e.orgId)})),Fn(this,"onChangeRoleClick",(()=>{const{org:e}=this.props;this.setState({isChangingRole:!0,currentRole:e.role})})),Fn(this,"onOrgRoleChange",(e=>{this.setState({currentRole:e})})),Fn(this,"onOrgRoleSave",(()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)})),Fn(this,"onCancelClick",(()=>{this.setState({isChangingRole:!1})}))}render(){const{org:e,theme:t}=this.props,{currentRole:s,isChangingRole:a}=this.state,n=Dn(t),i=(0,oe.cx)("width-16",n.label),r=te.Vt.hasPermission(P.bW.OrgUsersRoleUpdate),o=te.Vt.hasPermission(P.bW.OrgUsersRemove);return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:i,children:e.name}),a?(0,U.jsx)("td",{children:(0,U.jsx)(Mn.A,{value:s,onChange:this.onOrgRoleChange})}):(0,U.jsx)("td",{className:"width-25",children:e.role}),(0,U.jsx)("td",{colSpan:1,children:(0,U.jsx)("div",{className:"pull-right",children:r&&(0,U.jsx)(m.ConfirmButton,{confirmText:"Save",onClick:this.onChangeRoleClick,onCancel:this.onCancelClick,onConfirm:this.onOrgRoleSave,children:"Change role"})})}),(0,U.jsx)("td",{colSpan:1,children:(0,U.jsx)("div",{className:"pull-right",children:o&&(0,U.jsx)(m.ConfirmButton,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,children:"Remove from organization"})})})]})}}const Ln=(0,m.withTheme)($n),En=(0,m.stylesFactory)((()=>({modal:oe.css`
    width: 500px;
  `,buttonRow:oe.css`
    text-align: center;
  `,modalContent:oe.css`
    overflow: visible;
  `})));class Rn extends l.PureComponent{constructor(...e){super(...e),Fn(this,"state",{selectedOrg:null,role:P.B5.Admin}),Fn(this,"onOrgSelect",(e=>{this.setState({selectedOrg:e.value})})),Fn(this,"onOrgRoleChange",(e=>{this.setState({role:e})})),Fn(this,"onAddUserToOrg",(()=>{const{selectedOrg:e,role:t}=this.state;this.props.onOrgAdd(e.id,t)})),Fn(this,"onCancel",(()=>{this.props.onDismiss&&this.props.onDismiss()}))}render(){const{isOpen:e}=this.props,{role:t}=this.state,s=En();return(0,U.jsxs)(m.Modal,{className:s.modal,contentClassName:s.modalContent,title:"Add to an organization",isOpen:e,onDismiss:this.onCancel,children:[(0,U.jsx)(m.Field,{label:"Organization",children:(0,U.jsx)(In,{onSelected:this.onOrgSelect})}),(0,U.jsx)(m.Field,{label:"Role",children:(0,U.jsx)(Mn.A,{value:t,onChange:this.onOrgRoleChange})}),(0,U.jsx)(m.Modal.ButtonRow,{children:(0,U.jsxs)(m.HorizontalGroup,{spacing:"md",justify:"center",children:[(0,U.jsx)(m.Button,{variant:"secondary",fill:"outline",onClick:this.onCancel,children:"Cancel"}),(0,U.jsx)(m.Button,{variant:"primary",onClick:this.onAddUserToOrg,children:"Add to organization"})]})})]})}}function _n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Vn extends l.PureComponent{constructor(...e){super(...e),_n(this,"onUserUpdate",(e=>{this.props.updateUser(e)})),_n(this,"onPasswordChange",(e=>{const{user:t,setUserPassword:s}=this.props;t&&s(t.id,e)})),_n(this,"onUserDelete",(e=>{this.props.deleteUser(e)})),_n(this,"onUserDisable",(e=>{this.props.disableUser(e)})),_n(this,"onUserEnable",(e=>{this.props.enableUser(e)})),_n(this,"onGrafanaAdminChange",(e=>{const{user:t,updateUserPermissions:s}=this.props;t&&s(t.id,e)})),_n(this,"onOrgRemove",(e=>{const{user:t,deleteOrgUser:s}=this.props;t&&s(t.id,e)})),_n(this,"onOrgRoleChange",((e,t)=>{const{user:s,updateOrgUserRole:a}=this.props;s&&a(s.id,e,t)})),_n(this,"onOrgAdd",((e,t)=>{const{user:s,addOrgUser:a}=this.props;s&&a(s,e,t)})),_n(this,"onSessionRevoke",(e=>{const{user:t,revokeSession:s}=this.props;t&&s(e,t.id)})),_n(this,"onAllSessionsRevoke",(()=>{const{user:e,revokeAllSessions:t}=this.props;e&&t(e.id)})),_n(this,"onUserSync",(()=>{const{user:e,syncLdapUser:t}=this.props;e&&t(e.id)}))}async componentDidMount(){const{match:e,loadAdminUserPage:t}=this.props;t(parseInt(e.params.id,10))}render(){const{navModel:e,user:t,orgs:s,sessions:a,ldapSyncInfo:n,isLoading:i}=this.props,r=t&&t.isExternal&&t.authLabels&&t.authLabels.includes("LDAP"),o=te.Vt.hasPermission(P.bW.UsersAuthTokenList),l=te.Vt.hasPermission(P.bW.LDAPStatusRead);return(0,U.jsx)(ha.Z,{navModel:e,children:(0,U.jsxs)(ha.Z.Contents,{isLoading:i,children:[t&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(ln,{user:t,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),r&&c.ZP.licenseInfo.hasLicense&&n&&l&&(0,U.jsx)(Nn,{ldapSyncInfo:n,user:t,onUserSync:this.onUserSync}),(0,U.jsx)(bn,{isGrafanaAdmin:t.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})]}),s&&(0,U.jsx)(An,{orgs:s,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),a&&o&&(0,U.jsx)(Tn,{sessions:a,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})]})})}}const Bn={loadAdminUserPage:Xa.PK,updateUser:Xa.Nq,setUserPassword:Xa.tQ,disableUser:Xa.B9,enableUser:Xa.Dx,deleteUser:Xa.h8,updateUserPermissions:Xa.Xx,addOrgUser:Xa.bN,updateOrgUserRole:Xa.Jk,deleteOrgUser:Xa.uV,revokeSession:Xa._1,revokeAllSessions:Xa.Fm,syncLdapUser:Xa.CP},zn=(0,ua.connect)((e=>({navModel:(0,pa.h)(e.navIndex,"global-users"),user:e.userAdmin.user,sessions:e.userAdmin.sessions,orgs:e.userAdmin.orgs,ldapSyncInfo:e.ldap.syncInfo,isLoading:e.userAdmin.isLoading,error:e.userAdmin.error})),Bn)(Vn),Un=()=>{const e=(0,c.iE)().verifyEmailEnabled?`${(0,c.iE)().appSubUrl}/verify`:`${(0,c.iE)().appSubUrl}/signup`,t=(0,oe.css)({paddingTop:"16px"});return(0,U.jsxs)(m.VerticalGroup,{children:[(0,U.jsx)("div",{className:t,children:"New to Grafana?"}),(0,U.jsx)(m.LinkButton,{className:oe.css`
          width: 100%;
          justify-content: center;
        `,href:e,variant:"secondary",fill:"outline",children:"Sign up"})]})};var qn,Hn,Gn;const Wn=e=>({button:oe.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:oe.css`
      position: absolute;
      left: ${e.spacing.sm};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:oe.css`
        color: ${e.colors.text};
        display: flex;
        margin-bottom: ${e.spacing.sm};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:oe.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${e.colors.text};
      `}}),Zn=()=>{const e=(0,m.useStyles)(Wn);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("div",{className:e.divider.base,children:[(0,U.jsx)("div",{children:(0,U.jsx)("div",{className:e.divider.line})}),(0,U.jsx)("div",{children:(0,U.jsx)("span",{children:!c.ZP.disableLoginForm&&(qn||(qn=(0,U.jsx)("span",{children:"or"})))})}),(0,U.jsx)("div",{children:(0,U.jsx)("div",{className:e.divider.line})})]}),Hn||(Hn=(0,U.jsx)("div",{className:"clearfix"}))]})};function Qn(e,t,s){return(0,oe.cx)(t.button,oe.css`
      background-color: ${e.bgColor};
      color: ${s.colors.getContrastText(e.bgColor)};

      &:hover {
        background-color: ${s.colors.emphasize(e.bgColor,.15)};
        box-shadow: ${s.shadows.z1};
      }
    `)}const Kn=()=>{const e=(0,i.pickBy)((()=>{const e=!!c.ZP.oauth;return{saml:{bgColor:"#464646",enabled:c.ZP.samlEnabled,name:"SAML",icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:e&&c.ZP.oauth.google,name:"Google",icon:"google"},azuread:{bgColor:"#2f2f2f",enabled:e&&c.ZP.oauth.azuread,name:"Microsoft",icon:"microsoft"},github:{bgColor:"#464646",enabled:e&&c.ZP.oauth.github,name:"GitHub",icon:"github"},gitlab:{bgColor:"#fc6d26",enabled:e&&c.ZP.oauth.gitlab,name:"GitLab",icon:"gitlab"},grafanacom:{bgColor:"#262628",enabled:e&&c.ZP.oauth.grafana_com,name:"Grafana.com",hrefName:"grafana_com",icon:"grafana"},okta:{bgColor:"#2f2f2f",enabled:e&&c.ZP.oauth.okta,name:"Okta",icon:"okta"},oauth:{bgColor:"#262628",enabled:e&&c.ZP.oauth.generic_oauth,name:e&&c.ZP.oauth.generic_oauth?c.ZP.oauth.generic_oauth.name:"OAuth",icon:"signin",hrefName:"generic_oauth"}}})(),(e=>e.enabled)),t=Object.keys(e).length>0,s=(0,m.useTheme2)(),a=(0,m.useStyles)(Wn);return t?(0,U.jsxs)(m.VerticalGroup,{children:[Gn||(Gn=(0,U.jsx)(Zn,{})),Object.entries(e).map((([e,t])=>(0,U.jsxs)(m.LinkButton,{className:Qn(t,a,s),href:`login/${t.hrefName?t.hrefName:e}`,target:"_self",fullWidth:!0,children:[(0,U.jsx)(m.Icon,{className:a.buttonIcon,name:t.icon}),"Sign in with ",t.name]},e)))]}):null};var Yn,Jn,Xn=s("./public/app/core/components/Login/LoginCtrl.tsx"),ei=s("./public/app/core/components/Login/LoginForm.tsx"),ti=s("./public/app/core/components/ForgottenPassword/ChangePassword.tsx"),si=s("./public/app/core/components/Branding/Branding.tsx"),ai=s("./public/app/core/components/Login/LoginLayout.tsx");const ni=oe.css`
  padding: 0;
  margin-top: 4px;
`,ii=()=>(document.title=si.c.AppTitle,(0,U.jsx)(ai.dd,{children:(0,U.jsx)(Xn.Z,{children:({loginHint:e,passwordHint:t,ldapEnabled:s,authProxyEnabled:a,disableLoginForm:n,disableUserSignUp:i,login:r,isLoggingIn:o,changePassword:l,skipPasswordChange:d,isChangingPassword:u})=>(0,U.jsxs)(U.Fragment,{children:[!u&&(0,U.jsxs)(ai.$s,{children:[!n&&(0,U.jsx)(ei.U,{onSubmit:r,loginHint:e,passwordHint:t,isLoggingIn:o,children:s||a?(0,U.jsx)(U.Fragment,{}):(0,U.jsx)(m.HorizontalGroup,{justify:"flex-end",children:(0,U.jsx)(m.LinkButton,{className:ni,fill:"text",href:`${c.ZP.appSubUrl}/user/password/send-reset-email`,children:"Forgot your password?"})})}),Yn||(Yn=(0,U.jsx)(Kn,{})),!i&&(Jn||(Jn=(0,U.jsx)(Un,{})))]}),u&&(0,U.jsx)(ai.$s,{children:(0,U.jsx)(ti.G,{onSubmit:l,onSkip:()=>d()})})]})})}));var ri,oi=s("./node_modules/react-loadable/lib/index.js"),li=s.n(oi);const ci=l.memo((()=>ri||(ri=(0,U.jsx)("div",{className:"preloader",children:(0,U.jsx)(m.LoadingPlaceholder,{text:"Loading..."})}))));ci.displayName="LoadingChunkPlaceHolder";var di,ui,pi,hi,gi,mi=s("./public/app/core/navigation/hooks.ts");const fi=(0,m.stylesFactory)((()=>oe.css`
    width: 508px;
    margin: 128px auto;
  `)),bi=({error:e})=>{const[t,s]=(0,mi.H)();return t.get("chunkNotFound")||(s({chunkNotFound:!0},!0),window.location.reload()),(0,U.jsxs)("div",{className:fi(),children:[di||(di=(0,U.jsx)("h2",{children:"Unable to find application file"})),ui||(ui=(0,U.jsx)("br",{})),pi||(pi=(0,U.jsx)("h2",{className:"page-heading",children:"Grafana has likely been updated. Please try reloading the page."})),hi||(hi=(0,U.jsx)("br",{})),(0,U.jsx)("div",{className:"gf-form-group",children:(0,U.jsx)(m.Button,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload(),children:"Reload"})}),(0,U.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[e&&e.message?e.message:"Unexpected error occurred",gi||(gi=(0,U.jsx)("br",{})),e&&e.stack?e.stack:null]})]})};var vi;bi.displayName="ErrorLoadingChunk";const xi=e=>{const{error:t,pastDelay:s}=e;return t?(0,U.jsx)(bi,{error:t}):s?vi||(vi=(0,U.jsx)(ci,{})):null},yi=e=>li()({loader:e,loading:xi});var wi,ji,ki,Si,Ci,Ti;class Ni extends l.PureComponent{render(){const{navModel:e}=this.props;return(0,U.jsx)(ha.Z,{navModel:e,children:(0,U.jsx)(ha.Z.Contents,{children:(0,U.jsx)("div",{className:"page-container page-body",children:(0,U.jsxs)("div",{className:"panel-container error-container",children:[wi||(wi=(0,U.jsx)("div",{className:"error-column graph-box",children:(0,U.jsxs)("div",{className:"error-row",children:[(0,U.jsxs)("div",{className:"error-column error-space-between graph-percentage",children:[(0,U.jsx)("p",{children:"100%"}),(0,U.jsx)("p",{children:"80%"}),(0,U.jsx)("p",{children:"60%"}),(0,U.jsx)("p",{children:"40%"}),(0,U.jsx)("p",{children:"20%"}),(0,U.jsx)("p",{children:"0%"})]}),(0,U.jsxs)("div",{className:"error-column image-box",children:[(0,U.jsx)("img",{src:"public/img/graph404.svg",width:"100%",alt:"graph"}),(0,U.jsxs)("div",{className:"error-row error-space-between",children:[(0,U.jsx)("p",{className:"graph-text",children:"Then"}),(0,U.jsx)("p",{className:"graph-text",children:"Now"})]})]})]})})),(0,U.jsxs)("div",{className:"error-column info-box",children:[ji||(ji=(0,U.jsx)("div",{className:"error-row current-box",children:(0,U.jsx)("p",{className:"current-text",children:"current"})})),(0,U.jsxs)("div",{className:"error-row",style:{flex:1},children:[ki||(ki=(0,U.jsx)(m.Icon,{name:"minus-circle",className:"error-minus"})),(0,U.jsxs)("div",{className:"error-column error-space-between error-full-width",children:[Si||(Si=(0,U.jsxs)("div",{className:"error-row error-space-between",children:[(0,U.jsx)("p",{children:"Chances you are on the page you are looking for."}),(0,U.jsx)("p",{className:"left-margin",children:"0%"})]})),(0,U.jsxs)("div",{children:[Ci||(Ci=(0,U.jsx)("h3",{children:"Sorry for the inconvenience"})),(0,U.jsxs)("p",{children:["Please go back to your"," ",(0,U.jsx)("a",{href:h.config.appSubUrl,className:"error-link",children:"home dashboard"})," ","and try again."]}),Ti||(Ti=(0,U.jsxs)("p",{children:["If the error persists, seek help on the"," ",(0,U.jsx)("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"error-link",children:"community site"}),"."]}))]})]})]})]})]})})})})}}const Oi=(0,ua.connect)((e=>({navModel:(0,pa.h)(e.navIndex,"not-found")})))(Ni);var Ii=s("./public/app/features/plugins/admin/helpers.ts"),Pi=s("./public/app/features/plugins/admin/types.ts");const Mi=[{path:"/plugins",routeName:Pi.cd.Home,component:yi((()=>s.e(94).then(s.bind(s,"./public/app/features/plugins/admin/pages/Browse.tsx"))))},{path:"/plugins/browse",routeName:Pi.cd.Browse,component:yi((()=>s.e(94).then(s.bind(s,"./public/app/features/plugins/admin/pages/Browse.tsx"))))},{path:"/plugins/:pluginId/",routeName:Pi.cd.Details,component:yi((()=>s.e(2417).then(s.bind(s,"./public/app/features/plugins/admin/pages/PluginDetails.tsx"))))}];function Fi(e=c.vc){return e.pluginAdminEnabled?(0,Ii.bO)()?[...Mi,{path:"/admin/plugins",routeName:Pi.cd.HomeAdmin,component:yi((()=>s.e(94).then(s.bind(s,"./public/app/features/plugins/admin/pages/Browse.tsx"))))},{path:"/admin/plugins/browse",routeName:Pi.cd.BrowseAdmin,component:yi((()=>s.e(94).then(s.bind(s,"./public/app/features/plugins/admin/pages/Browse.tsx"))))},{path:"/admin/plugins/:pluginId/",routeName:Pi.cd.DetailsAdmin,component:yi((()=>s.e(2417).then(s.bind(s,"./public/app/features/plugins/admin/pages/PluginDetails.tsx"))))}]:Mi:[{path:"/plugins",component:yi((()=>s.e(94).then(s.bind(s,"./public/app/features/plugins/PluginListPage.tsx"))))},{path:"/plugins/browse",component:yi((()=>s.e(7516).then(s.bind(s,"./public/app/features/plugins/admin/pages/NotEnabed.tsx"))))},{path:"/plugins/:pluginId/",component:yi((()=>s.e(2417).then(s.bind(s,"./public/app/features/plugins/PluginPage.tsx"))))}]}const Ai=[{path:"/live",component:yi((()=>s.e(2120).then(s.bind(s,"./public/app/features/live/pages/LiveStatusPage.tsx"))))},{path:"/live/pipeline",component:yi((()=>s.e(2651).then(s.bind(s,"./public/app/features/live/pages/PipelineAdminPage.tsx"))))},{path:"/live/cloud",component:yi((()=>s.e(5310).then(s.bind(s,"./public/app/features/live/pages/CloudAdminPage.tsx"))))}];function Di(e=c.vc){return(0,Ii.bO)()?e.featureToggles["live-pipeline"]?Ai:Ai.map((e=>Object.assign({},e,{component:yi((()=>s.e(7586).then(s.bind(s,"./public/app/features/live/pages/FeatureTogglePage.tsx"))))}))):[]}var $i,Li,Ei,Ri;const _i=[];const Vi=(e,t)=>c.ZP.featureToggles.accesscontrol?g.Vt.hasPermission(t)?[]:["Reject"]:e();var Bi=s("./public/app/core/utils/ConfigProvider.tsx");const zi=(e,t)=>{var s,a;const n=null===(s=t.url)||void 0===s?void 0:s.split("?")[0];if(n){if(n===e)return!0;if("/"!==n&&e.startsWith(n))return!0;if("/alerting/list"===n&&e.startsWith("/alerting/notification/"))return!0;if("/"===n&&e.startsWith("/d/"))return!0}return!(null===(a=t.children)||void 0===a||!a.some((t=>zi(e,t))))},Ui=e=>"open"===new URLSearchParams(e.search).get("search");var qi;const Hi=({isDivider:e=!1,icon:t,onClick:s,target:a,text:n,url:i})=>{const r=(0,m.useTheme2)(),o=Gi(r),l=(0,U.jsxs)(U.Fragment,{children:[t&&(0,U.jsx)(m.Icon,{"data-testid":"dropdown-child-icon",name:t,className:o.icon}),n]});let c=(0,U.jsx)("button",{className:o.element,onClick:s,children:l});return i&&(c=!a&&i.startsWith("/")?(0,U.jsx)(m.Link,{className:o.element,onClick:s,href:i,children:l}):(0,U.jsx)("a",{className:o.element,href:i,target:a,rel:"noopener",onClick:s,children:l})),e?qi||(qi=(0,U.jsx)("li",{"data-testid":"dropdown-child-divider",className:"divider"})):(0,U.jsx)("li",{children:c})},Gi=e=>({element:oe.css`
    background-color: transparent;
    border: none;
    display: flex;
    width: 100%;
  `,icon:oe.css`
    margin-right: ${e.spacing(1)};
  `}),Wi=({headerTarget:e,headerText:t,headerUrl:s,items:a=[],onHeaderClick:n,reverseDirection:i=!1,subtitleText:r})=>{const o=(0,m.useTheme2)(),l=Zi(o,i);let c=(0,U.jsx)("button",{onClick:n,className:l.header,children:t});return s&&(c=!e&&s.startsWith("/")?(0,U.jsx)(m.Link,{href:s,onClick:n,className:l.header,children:t}):(0,U.jsx)("a",{href:s,target:e,onClick:n,className:l.header,children:t})),(0,U.jsxs)("ul",{className:`${l.menu} dropdown-menu dropdown-menu--sidemenu`,role:"menu",children:[(0,U.jsx)("li",{children:c}),a.filter((e=>!e.hideFromMenu)).map(((e,t)=>(0,U.jsx)(Hi,{isDivider:e.divider,icon:e.icon,onClick:e.onClick,target:e.target,text:e.text,url:e.url},`${e.url}-${t}`))),r&&(0,U.jsx)("li",{className:l.subtitle,children:r})]})},Zi=(e,t)=>({header:oe.css`
    background-color: ${e.colors.background.secondary};
    border: none;
    color: ${e.colors.text.primary};
    font-size: ${e.typography.h4.fontSize};
    font-weight: ${e.typography.h4.fontWeight};
    padding: ${e.spacing(1)} ${e.spacing(1)} ${e.spacing(1)} ${e.spacing(2)} !important;
    white-space: nowrap;
    width: 100%;

    &:hover {
      background-color: ${e.colors.action.hover};
    }

    .sidemenu-open--xs & {
      display: flex;
      font-size: ${e.typography.body.fontSize};
      font-weight: ${e.typography.body.fontWeight};
      padding-left: ${e.spacing(1)} !important;
    }
  `,menu:oe.css`
    flex-direction: ${t?"column-reverse":"column"};

    .sidemenu-open--xs & {
      display: flex;
      flex-direction: column;
      float: none;
      margin-bottom: ${e.spacing(1)};
      position: unset;
      width: 100%;
    }
  `,subtitle:oe.css`
    border-bottom: 1px solid ${e.colors.border.weak};
    color: ${e.colors.text.secondary};
    font-size: ${e.typography.bodySmall.fontSize};
    font-weight: ${e.typography.bodySmall.fontWeight};
    margin-bottom: ${e.spacing(1)};
    padding: ${e.spacing(1)} ${e.spacing(2)} ${e.spacing(1)};
    white-space: nowrap;

    .sidemenu-open--xs & {
      border-bottom: none;
      margin-bottom: 0;
    }
  `}),Qi=({isActive:e=!1,children:t,label:s,menuItems:a=[],menuSubTitle:n,onClick:i,reverseMenuDirection:r=!1,target:o,url:l})=>{const c=(0,m.useTheme2)(),d=Ki(c,e);let u=(0,U.jsx)("button",{className:d.element,onClick:i,"aria-label":s,children:(0,U.jsx)("span",{className:d.icon,children:t})});return l&&(u=!o&&l.startsWith("/")?(0,U.jsx)(m.Link,{className:d.element,href:l,target:o,"aria-label":s,onClick:i,"aria-haspopup":"true",children:(0,U.jsx)("span",{className:d.icon,children:t})}):(0,U.jsx)("a",{href:l,target:o,className:d.element,onClick:i,"aria-label":s,children:(0,U.jsx)("span",{className:d.icon,children:t})})),(0,U.jsxs)("div",{className:(0,oe.cx)(d.container,"dropdown",{dropup:r}),children:[u,(0,U.jsx)(Wi,{headerTarget:o,headerText:s,headerUrl:l,items:a,onHeaderClick:i,reverseDirection:r,subtitleText:n})]})},Ki=(e,t)=>({container:oe.css`
    position: relative;

    @keyframes dropdown-anim {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }

    ${e.breakpoints.up("md")} {
      color: ${t?e.colors.text.primary:e.colors.text.secondary};

      &:hover {
        background-color: ${e.colors.action.hover};
        color: ${e.colors.text.primary};

        .dropdown-menu {
          animation: dropdown-anim 150ms ease-in-out 100ms forwards;
          border: none;
          display: flex;
          // important to overlap it otherwise it can be hidden
          // again by the mouse getting outside the hover space
          left: ${e.components.sidemenu.width-1}px;
          margin: 0;
          opacity: 0;
          top: 0;
          z-index: ${e.zIndex.sidemenu};
        }

        &.dropup .dropdown-menu {
          top: auto;
        }
      }
    }
  `,element:oe.css`
    background-color: transparent;
    border: none;
    color: inherit;
    display: block;
    line-height: 42px;
    text-align: center;
    width: ${e.components.sidemenu.width-1}px;

    &::before {
      display: ${t?"block":"none"};
      content: ' ';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      border-radius: 2px;
      background-image: ${e.colors.gradients.brandVertical};
    }

    &:focus-visible {
      background-color: ${e.colors.action.hover};
      box-shadow: none;
      color: ${e.colors.text.primary};
      outline: 2px solid ${e.colors.primary.main};
      outline-offset: -2px;
      transition: none;
    }

    .sidemenu-open--xs & {
      display: none;
    }
  `,icon:oe.css`
    height: 100%;
    width: 100%;

    img {
      border-radius: 50%;
      height: 28px;
      width: 28px;
    }
  `});var Yi;const Ji=()=>{var e;const t=(0,da.TH)(),s=(0,m.useTheme2)(),a=Xi(s),n=(0,i.cloneDeep)(c.ZP.bootData.navTree).filter((e=>!e.hideFromMenu)),r=null===(e=n.find((e=>zi(t.pathname,e))))||void 0===e?void 0:e.id;return(0,U.jsxs)("div",{"data-testid":"top-section-items",className:a.container,children:[(0,U.jsx)(Qi,{isActive:Ui(t),label:"Search dashboards",onClick:()=>{h.locationService.partial({search:"open"})},children:Yi||(Yi=(0,U.jsx)(m.Icon,{name:"search",size:"xl"}))}),n.map(((e,s)=>(0,U.jsxs)(Qi,{isActive:!Ui(t)&&r===e.id,label:e.text,menuItems:e.children,target:e.target,url:e.url,children:[e.icon&&(0,U.jsx)(m.Icon,{name:e.icon,size:"xl"}),e.img&&(0,U.jsx)("img",{src:e.img,alt:`${e.text} logo`})]},`${e.id}-${s}`)))]})},Xi=e=>({container:oe.css`
    display: none;
    flex-grow: 1;

    ${e.breakpoints.up("md")} {
      display: block;
      margin-top: ${e.spacing(5)};
    }

    .sidemenu-open--xs & {
      display: block;
    }
  `});var er,tr;function sr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ar extends l.PureComponent{constructor(...e){super(...e),sr(this,"state",{orgs:[]}),sr(this,"getUserOrgs",(async()=>{const e=await(0,h.getBackendSrv)().get("/api/user/orgs");this.setState({orgs:e})})),sr(this,"setCurrentOrg",(async e=>{await(0,h.getBackendSrv)().post(`/api/user/using/${e.orgId}`),this.setWindowLocation(`${c.ZP.appSubUrl}${c.ZP.appSubUrl.endsWith("/")?"":"/"}?orgId=${e.orgId}`)}))}componentDidMount(){this.getUserOrgs()}setWindowLocation(e){window.location.href=e}render(){const{onDismiss:e}=this.props,{orgs:t}=this.state,s=g.Vt.user.orgId,a=(0,oe.css)({display:"flex",maxHeight:"calc(85vh - 42px)"});return(0,U.jsx)(m.Modal,{title:"Switch Organization",icon:"arrow-random",onDismiss:e,isOpen:!0,contentClassName:a,children:(0,U.jsx)(m.CustomScrollbar,{autoHeightMin:"100%",children:(0,U.jsxs)("table",{className:"filter-table form-inline",children:[er||(er=(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{children:"Name"}),(0,U.jsx)("th",{children:"Role"}),(0,U.jsx)("th",{})]})})),(0,U.jsx)("tbody",{children:t.map((e=>(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:e.name}),(0,U.jsx)("td",{children:e.role}),(0,U.jsx)("td",{className:"text-right",children:e.orgId===s?tr||(tr=(0,U.jsx)(m.Button,{size:"sm",children:"Current"})):(0,U.jsx)(m.Button,{variant:"secondary",size:"sm",onClick:()=>this.setCurrentOrg(e),children:"Switch to"})})]},e.orgId)))})]})})})}}var nr,ir=s("./public/app/core/components/Footer/Footer.tsx"),rr=s("./public/app/core/components/help/HelpModal.tsx");function or(){var e;const t=(0,m.useTheme2)(),s=lr(t),a=(0,i.cloneDeep)(c.ZP.bootData.navTree).filter((e=>e.hideFromMenu)),n=g.Vt.isSignedIn,r=(0,da.TH)(),o=null===(e=a.find((e=>zi(r.pathname,e))))||void 0===e?void 0:e.id,d=(e=>{const t=new URLSearchParams(e.split("?")[1]);return t.append("forceLogin","true"),`${(0,c.iE)().appSubUrl}${e.split("?")[0]}?${t.toString()}`})(r.pathname+r.search),u=g.Vt.user,[p,h]=(0,l.useState)(!1),f=()=>{h(!p)},b=()=>{T.Z.publish(new Q.Dn({component:rr.B}))};if(u&&u.orgCount>1){const e=a.find((e=>"profile"===e.id));e&&(e.showOrgSwitcher=!0,e.subTitle=`Current Org.: ${null==u?void 0:u.orgName}`)}return(0,U.jsxs)("div",{"data-testid":"bottom-section-items",className:s.container,children:[!n&&(0,U.jsx)(Qi,{label:"Sign In",target:"_self",url:d,children:nr||(nr=(0,U.jsx)(m.Icon,{name:"signout",size:"xl"}))}),a.map(((e,t)=>{let s=e.children||[];return"help"===e.id&&(s=[...(0,ir.dP)(),{text:"Keyboard shortcuts",icon:"keyboard",onClick:b}]),e.showOrgSwitcher&&(s=[...s,{text:"Switch organization",icon:"arrow-random",onClick:f}]),(0,U.jsxs)(Qi,{isActive:!Ui(r)&&o===e.id,label:e.text,menuItems:s,menuSubTitle:e.subTitle,onClick:e.onClick,reverseMenuDirection:!0,target:e.target,url:e.url,children:[e.icon&&(0,U.jsx)(m.Icon,{name:e.icon,size:"xl"}),e.img&&(0,U.jsx)("img",{src:e.img,alt:`${e.text} logo`})]},`${e.url}-${t}`)})),p&&(0,U.jsx)(ar,{onDismiss:f})]})}const lr=e=>({container:oe.css`
    display: none;

    ${e.breakpoints.up("md")} {
      display: block;
      margin-bottom: ${e.spacing(2)};
    }

    .sidemenu-open--xs & {
      display: block;
    }
  `});var cr,dr,ur,pr,hr;const gr=c.ZP.appSubUrl||"/",mr=l.memo((()=>{const e=(0,m.useTheme2)(),t=fr(e),s=(0,da.TH)(),a=new URLSearchParams(s.search).get("kiosk"),n=(0,l.useCallback)((()=>{T.Z.emit(P.RW.a_)}),[]);return null!==a?null:(0,U.jsxs)("nav",{className:(0,oe.cx)(t.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu",children:[(0,U.jsx)("a",{href:gr,className:t.homeLogo,children:cr||(cr=(0,U.jsx)(si.c.MenuLogo,{}))}),(0,U.jsxs)("div",{className:t.mobileSidemenuLogo,onClick:n,children:[dr||(dr=(0,U.jsx)(m.Icon,{name:"bars",size:"xl"})),(0,U.jsxs)("span",{className:t.closeButton,children:[ur||(ur=(0,U.jsx)(m.Icon,{name:"times"})),"Close"]})]},"hamburger"),pr||(pr=(0,U.jsx)(Ji,{})),hr||(hr=(0,U.jsx)(or,{}))]})}));mr.displayName="NavBar";const fr=e=>({sidemenu:oe.css`
    border-right: 1px solid ${e.components.panel.borderColor};
    display: flex;
    flex-direction: column;
    position: fixed;
    width: ${e.components.sidemenu.width}px;
    z-index: ${e.zIndex.sidemenu};

    ${e.breakpoints.up("md")} {
      background-color: ${e.colors.background.primary};
      position: relative;
    }

    .sidemenu-hidden & {
      display: none;
    }

    .sidemenu-open--xs & {
      background-color: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z1};
      height: auto;
      position: absolute;
      width: 100%;
    }
  `,homeLogo:oe.css`
    display: none;
    min-height: ${e.components.sidemenu.width}px;

    &:focus-visible,
    &:hover {
      background-color: ${e.colors.action.hover};
    }

    &:focus-visible {
      box-shadow: none;
      color: ${e.colors.text.primary};
      outline: 2px solid ${e.colors.primary.main};
      outline-offset: -2px;
      transition: none;
    }

    img {
      width: ${e.spacing(3.5)};
    }

    ${e.breakpoints.up("md")} {
      align-items: center;
      display: flex;
      justify-content: center;
    }
  `,closeButton:oe.css`
    display: none;

    .sidemenu-open--xs & {
      display: block;
      font-size: ${e.typography.fontSize}px;
    }
  `,mobileSidemenuLogo:oe.css`
    align-items: center;
    cursor: pointer;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    padding: ${e.spacing(2)};

    ${e.breakpoints.up("md")} {
      display: none;
    }
  `});var br=s("./node_modules/tether-drop/dist/js/drop.js"),vr=s.n(br),xr=s("./public/app/core/services/keybindingSrv.ts");class yr extends l.Component{componentDidMount(){this.updateBodyClassNames(),this.cleanupDOM(),xr.K.reset(),xr.K.initGlobals(),(0,h.reportPageview)(),(0,h.navigationLogger)("GrafanaRoute",!1,"Mounted",this.props.match)}componentDidUpdate(e){this.cleanupDOM(),(0,h.reportPageview)(),(0,h.navigationLogger)("GrafanaRoute",!1,"Updated",this.props,e)}componentWillUnmount(){this.updateBodyClassNames(!0),(0,h.navigationLogger)("GrafanaRoute",!1,"Unmounted",this.props.route)}getPageClasses(){return this.props.route.pageClass?this.props.route.pageClass.split(" "):[]}updateBodyClassNames(e=!1){for(const t of this.getPageClasses())e?document.body.classList.remove(t):document.body.classList.add(t)}cleanupDOM(){var e;document.body.classList.remove("sidemenu-open--xs");const t=document.getElementById("tooltip");null==t||null===(e=t.parentElement)||void 0===e||e.removeChild(t);const s=document.querySelectorAll(".tooltip");for(let e=0;e<s.length;e++){var a;const t=s[e];null===(a=t.parentElement)||void 0===a||a.removeChild(t)}for(const e of vr().drops)e.destroy()}render(){const{props:e}=this;(0,h.navigationLogger)("GrafanaRoute",!1,"Rendered",e.route);const t=e.route.component;return(0,U.jsx)(t,Object.assign({},e,{queryParams:(0,h.locationSearchToObject)(e.location.search)}))}}class wr extends l.Component{shouldComponentUpdate(e){return this.props.appNotification.id!==e.appNotification.id}componentDidMount(){const{appNotification:e,onClearNotification:t}=this.props;setTimeout((()=>{t(e.id)}),e.timeout)}render(){const{appNotification:e,onClearNotification:t}=this.props;return(0,U.jsx)(m.Alert,{severity:e.severity,title:e.title,onRemove:()=>t(e.id),elevated:!0,children:e.component||e.text})}}var jr=s("./public/app/core/actions/index.ts"),kr=s("./public/app/core/copy/appNotification.ts");const Sr={notifyApp:jr.$l,clearAppNotification:jr.uY},Cr=(0,ua.connect)(((e,t)=>({appNotifications:e.appNotifications.appNotifications})),Sr);class Tr extends l.PureComponent{constructor(...e){var t,s,a;super(...e),a=e=>{this.props.clearAppNotification(e)},(s="onClearAppNotification")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}componentDidMount(){const{notifyApp:e}=this.props;T.Z.on(d.AppEvents.alertWarning,(t=>e((0,kr.ZR)(...t)))),T.Z.on(d.AppEvents.alertSuccess,(t=>e((0,kr.AT)(...t)))),T.Z.on(d.AppEvents.alertError,(t=>e((0,kr.t_)(...t))))}render(){const{appNotifications:e}=this.props;return(0,U.jsx)("div",{className:"page-alert-list",children:(0,U.jsx)(m.VerticalGroup,{children:e.map(((e,t)=>(0,U.jsx)(wr,{appNotification:e,onClearNotification:e=>this.onClearAppNotification(e)},`${e.id}-${t}`)))})})}}const Nr=Cr(Tr);var Or=s("./public/app/features/search/index.ts");function Ir(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Pr extends l.PureComponent{constructor(...e){super(...e),Ir(this,"subscription",void 0),Ir(this,"styles",Mr(h.config.theme2)),Ir(this,"state",{}),Ir(this,"initListener",(()=>{const e=(0,h.getGrafanaLiveSrv)();e&&(this.subscription=e.getConnectionState().subscribe({next:e=>{this.setState({show:!e})}}))}))}componentDidMount(){0}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:e}=this.state;return e&&g.Vt.isSignedIn&&h.config.liveEnabled&&""!==g.Vt.user.orgRole?(0,U.jsx)("div",{className:this.styles.foot,children:(0,U.jsx)(m.Alert,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})}):null}}const Mr=(0,m.stylesFactory)((e=>({foot:oe.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:oe.css`
      border: 2px solid ${e.colors.warning.main};
      max-width: 400px;
      margin: auto;
      height: 3em;
    `})));var Fr,Ar,Dr,$r,Lr,Er,Rr;function _r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let Vr=[],Br=[];class zr extends l.Component{constructor(e){super(e),_r(this,"container",l.createRef()),_r(this,"renderRoute",(e=>{const t=e.roles?e.roles():[];return(0,U.jsx)(da.AW,{exact:void 0===e.exact||e.exact,path:e.path,render:s=>((0,h.navigationLogger)("AppWrapper",!1,"Rendering route",e,"with match",s.location),null!=t&&t.length&&!t.some((e=>g.Vt.hasRole(e)))?Fr||(Fr=(0,U.jsx)(da.l_,{to:"/"})):(0,U.jsx)(yr,Object.assign({},s,{route:e})))},e.path)})),this.state={ngInjector:null}}componentDidMount(){if(!this.container)throw new Error("Failed to boot angular app, no container to attach to");this.bootstrapNgApp()}bootstrapNgApp(){const e=this.props.app.angularApp.bootstrap();this.setState({ngInjector:e})}renderRoutes(){return(0,U.jsx)(da.rs,{children:[{path:"/",pageClass:"page-dashboard",routeName:P.vq.Home,component:yi((()=>Promise.all([s.e(1056),s.e(389),s.e(514),s.e(5657),s.e(4460),s.e(5042),s.e(542),s.e(5296)]).then(s.bind(s,"./public/app/features/dashboard/containers/DashboardPage.tsx"))))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:P.vq.Normal,component:yi((()=>Promise.all([s.e(1056),s.e(389),s.e(514),s.e(5657),s.e(4460),s.e(5042),s.e(542),s.e(5296)]).then(s.bind(s,"./public/app/features/dashboard/containers/DashboardPage.tsx"))))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:P.vq.Normal,component:yi((()=>Promise.all([s.e(1056),s.e(389),s.e(514),s.e(5657),s.e(4460),s.e(5042),s.e(542),s.e(5296)]).then(s.bind(s,"./public/app/features/dashboard/containers/DashboardPage.tsx"))))},{path:"/dashboard/new",pageClass:"page-dashboard",routeName:P.vq.New,component:yi((()=>Promise.all([s.e(1056),s.e(389),s.e(514),s.e(5657),s.e(4460),s.e(5042),s.e(542),s.e(5296)]).then(s.bind(s,"./public/app/features/dashboard/containers/DashboardPage.tsx"))))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:P.vq.Normal,component:yi((()=>Promise.all([s.e(5042),s.e(1034)]).then(s.bind(s,"./public/app/features/dashboard/containers/SoloPanelPage.tsx"))))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:P.vq.Normal,component:yi((()=>Promise.all([s.e(5042),s.e(1034)]).then(s.bind(s,"./public/app/features/dashboard/containers/SoloPanelPage.tsx"))))},{path:"/dashboard/import",component:yi((()=>s.e(8808).then(s.bind(s,"./public/app/features/manage-dashboards/DashboardImportPage.tsx"))))},{path:"/datasources",component:yi((()=>Promise.all([s.e(3370),s.e(4620)]).then(s.bind(s,"./public/app/features/datasources/DataSourcesListPage.tsx"))))},{path:"/datasources/edit/:uid/",component:yi((()=>Promise.all([s.e(3370),s.e(3959)]).then(s.bind(s,"./public/app/features/datasources/settings/DataSourceSettingsPage.tsx"))))},{path:"/datasources/edit/:uid/dashboards",component:yi((()=>Promise.all([s.e(3370),s.e(2929)]).then(s.bind(s,"./public/app/features/datasources/DataSourceDashboards.tsx"))))},{path:"/datasources/new",component:yi((()=>Promise.all([s.e(3370),s.e(4253)]).then(s.bind(s,"./public/app/features/datasources/NewDataSourcePage.tsx"))))},{path:"/dashboards",component:yi((()=>s.e(4074).then(s.bind(s,"./public/app/features/search/components/DashboardListPage.tsx"))))},{path:"/dashboards/folder/new",component:yi((()=>s.e(8932).then(s.bind(s,"./public/app/features/folders/components/NewDashboardsFolder.tsx"))))},{path:"/dashboards/f/:uid/:slug/permissions",component:yi((()=>s.e(8431).then(s.bind(s,"./public/app/features/folders/FolderPermissions.tsx"))))},{path:"/dashboards/f/:uid/:slug/settings",component:yi((()=>s.e(4827).then(s.bind(s,"./public/app/features/folders/FolderSettingsPage.tsx"))))},{path:"/dashboards/f/:uid/:slug",component:yi((()=>s.e(4074).then(s.bind(s,"./public/app/features/search/components/DashboardListPage.tsx"))))},{path:"/dashboards/f/:uid",component:yi((()=>s.e(4074).then(s.bind(s,"./public/app/features/search/components/DashboardListPage.tsx"))))},{path:"/explore",pageClass:"page-explore",roles:()=>Vi((()=>c.ZP.viewersCanEdit?[]:["Editor","Admin"]),P.bW.DataSourcesExplore),component:yi((()=>Promise.all([s.e(389),s.e(514),s.e(542),s.e(9782)]).then(s.bind(s,"./public/app/features/explore/Wrapper.tsx"))))},{path:"/a/:pluginId/",exact:!1,component:yi((()=>s.e(295).then(s.bind(s,"./public/app/features/plugins/AppRootPage.tsx"))))},{path:"/org",component:yi((()=>s.e(529).then(s.bind(s,"./public/app/features/org/OrgDetailsPage.tsx"))))},{path:"/org/new",component:yi((()=>s.e(950).then(s.bind(s,"./public/app/features/org/NewOrgPage.tsx"))))},{path:"/org/users",component:yi((()=>s.e(8039).then(s.bind(s,"./public/app/features/users/UsersListPage.tsx"))))},{path:"/org/users/invite",component:yi((()=>s.e(7707).then(s.bind(s,"./public/app/features/org/UserInvitePage.tsx"))))},{path:"/org/apikeys",roles:()=>["Editor","Admin"],component:yi((()=>s.e(3082).then(s.bind(s,"./public/app/features/api-keys/ApiKeysPage.tsx"))))},{path:"/org/teams",roles:()=>c.ZP.editorsCanAdmin?[]:["Editor","Admin"],component:yi((()=>s.e(9671).then(s.bind(s,"./public/app/features/teams/TeamList.tsx"))))},{path:"/org/teams/new",roles:()=>c.ZP.editorsCanAdmin?[]:["Admin"],component:yi((()=>s.e(8715).then(s.bind(s,"./public/app/features/teams/CreateTeam.tsx"))))},{path:"/org/teams/edit/:id/:page?",roles:()=>c.ZP.editorsCanAdmin?[]:["Admin"],component:yi((()=>s.e(8612).then(s.bind(s,"./public/app/features/teams/TeamPages.tsx"))))},{path:"/profile",component:yi((()=>s.e(7323).then(s.bind(s,"./public/app/features/profile/UserProfileEditPage.tsx"))))},{path:"/profile/password",component:yi((()=>s.e(4550).then(s.bind(s,"./public/app/features/profile/ChangePasswordPage.tsx"))))},{path:"/profile/select-org",component:yi((()=>s.e(1456).then(s.bind(s,"./public/app/features/org/SelectOrgPage.tsx"))))},{path:"/admin",component:()=>$i||($i=(0,U.jsx)(da.l_,{to:"/admin/users"}))},{path:"/admin/settings",component:yi((()=>s.e(9603).then(s.bind(s,"./public/app/features/admin/AdminSettings.tsx"))))},{path:"/admin/upgrading",component:yi((()=>s.e(1684).then(s.bind(s,"./public/app/features/admin/UpgradePage.tsx"))))},{path:"/admin/users",component:yi((()=>s.e(8580).then(s.bind(s,"./public/app/features/admin/UserListAdminPage.tsx"))))},{path:"/admin/users/create",component:yi((()=>s.e(2508).then(s.bind(s,"./public/app/features/admin/UserCreatePage.tsx"))))},{path:"/admin/users/edit/:id",component:zn},{path:"/admin/orgs",component:yi((()=>s.e(3798).then(s.bind(s,"./public/app/features/admin/AdminListOrgsPage.tsx"))))},{path:"/admin/orgs/edit/:id",component:yi((()=>s.e(2721).then(s.bind(s,"./public/app/features/admin/AdminEditOrgPage.tsx"))))},{path:"/admin/stats",component:yi((()=>s.e(7641).then(s.bind(s,"./public/app/features/admin/ServerStats.tsx"))))},{path:"/admin/ldap",component:nn},{path:"/login",component:ii,pageClass:"login-page sidemenu-hidden"},{path:"/invite/:code",component:yi((()=>s.e(7429).then(s.bind(s,"./public/app/features/users/SignupInvited.tsx")))),pageClass:"sidemenu-hidden"},{path:"/verify",component:c.ZP.verifyEmailEnabled?yi((()=>s.e(903).then(s.bind(s,"./public/app/core/components/Signup/VerifyEmailPage.tsx")))):()=>Li||(Li=(0,U.jsx)(da.l_,{to:"/signup"})),pageClass:"login-page sidemenu-hidden"},{path:"/signup",component:c.ZP.disableUserSignUp?()=>Ei||(Ei=(0,U.jsx)(da.l_,{to:"/login"})):yi((()=>s.e(7665).then(s.bind(s,"./public/app/core/components/Signup/SignupPage.tsx")))),pageClass:"sidemenu-hidden login-page"},{path:"/user/password/send-reset-email",pageClass:"sidemenu-hidden",component:yi((()=>s.e(133).then(s.bind(s,"./public/app/core/components/ForgottenPassword/SendResetMailPage.tsx"))))},{path:"/user/password/reset",component:yi((()=>s.e(6848).then(s.bind(s,"./public/app/core/components/ForgottenPassword/ChangePasswordPage.tsx")))),pageClass:"sidemenu-hidden login-page"},{path:"/dashboard/snapshots",component:yi((()=>s.e(5295).then(s.bind(s,"./public/app/features/manage-dashboards/SnapshotListPage.tsx"))))},{path:"/alerting",component:()=>Ri||(Ri=(0,U.jsx)(da.l_,{to:"/alerting/list"}))},{path:"/alerting/list",component:yi((()=>Promise.all([s.e(1056),s.e(5657),s.e(2461)]).then(s.bind(s,"./public/app/features/alerting/AlertRuleListIndex.tsx"))))},{path:"/alerting/ng/list",component:yi((()=>s.e(4286).then(s.bind(s,"./public/app/features/alerting/AlertRuleList.tsx"))))},{path:"/alerting/routes",roles:()=>["Admin","Editor"],component:yi((()=>s.e(8648).then(s.bind(s,"./public/app/features/alerting/unified/AmRoutes.tsx"))))},{path:"/alerting/silences",component:yi((()=>s.e(1783).then(s.bind(s,"./public/app/features/alerting/unified/Silences.tsx"))))},{path:"/alerting/silence/new",roles:()=>["Editor","Admin"],component:yi((()=>s.e(1783).then(s.bind(s,"./public/app/features/alerting/unified/Silences.tsx"))))},{path:"/alerting/silence/:id/edit",roles:()=>["Editor","Admin"],component:yi((()=>s.e(1783).then(s.bind(s,"./public/app/features/alerting/unified/Silences.tsx"))))},{path:"/alerting/notifications",roles:c.ZP.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:yi((()=>s.e(6618).then(s.bind(s,"./public/app/features/alerting/NotificationsIndex.tsx"))))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:yi((()=>s.e(6618).then(s.bind(s,"./public/app/features/alerting/NotificationsIndex.tsx"))))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:yi((()=>s.e(6618).then(s.bind(s,"./public/app/features/alerting/NotificationsIndex.tsx"))))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:yi((()=>s.e(6618).then(s.bind(s,"./public/app/features/alerting/NotificationsIndex.tsx"))))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:yi((()=>s.e(6618).then(s.bind(s,"./public/app/features/alerting/NotificationsIndex.tsx"))))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:yi((()=>s.e(6618).then(s.bind(s,"./public/app/features/alerting/NotificationsIndex.tsx"))))},{path:"/alerting/notification/new",component:yi((()=>s.e(476).then(s.bind(s,"./public/app/features/alerting/NewNotificationChannelPage.tsx"))))},{path:"/alerting/notification/:id/edit",component:yi((()=>s.e(7384).then(s.bind(s,"./public/app/features/alerting/EditNotificationChannelPage.tsx"))))},{path:"/alerting/groups/",component:yi((()=>s.e(2415).then(s.bind(s,"./public/app/features/alerting/unified/AlertGroups.tsx"))))},{path:"/alerting/new",pageClass:"page-alerting",component:yi((()=>s.e(5372).then(s.bind(s,"./public/app/features/alerting/unified/RuleEditor.tsx"))))},{path:"/alerting/:id/edit",pageClass:"page-alerting",component:yi((()=>s.e(5372).then(s.bind(s,"./public/app/features/alerting/unified/RuleEditor.tsx"))))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",component:yi((()=>Promise.all([s.e(1056),s.e(5657),s.e(4679)]).then(s.bind(s,"./public/app/features/alerting/unified/RuleViewer.tsx"))))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",component:yi((()=>s.e(7918).then(s.bind(s,"./public/app/features/alerting/unified/RedirectToRuleViewer.tsx"))))},{path:"/alerting/admin",roles:()=>["Admin"],component:yi((()=>s.e(7680).then(s.bind(s,"./public/app/features/alerting/unified/Admin.tsx"))))},{path:"/playlists",component:yi((()=>s.e(9218).then(s.bind(s,"./public/app/features/playlist/PlaylistPage.tsx"))))},{path:"/playlists/play/:id",component:yi((()=>s.e(3090).then(s.bind(s,"./public/app/features/playlist/PlaylistStartPage.tsx"))))},{path:"/playlists/new",component:yi((()=>s.e(9975).then(s.bind(s,"./public/app/features/playlist/PlaylistNewPage.tsx"))))},{path:"/playlists/edit/:id",component:yi((()=>s.e(2341).then(s.bind(s,"./public/app/features/playlist/PlaylistEditPage.tsx"))))},{path:"/sandbox/benchmarks",component:yi((()=>s.e(4908).then(s.bind(s,"./public/app/features/sandbox/BenchmarksPage.tsx"))))},{path:"/dashboards/f/:uid/:slug/library-panels",component:yi((()=>Promise.all([s.e(4460),s.e(3778)]).then(s.bind(s,"./public/app/features/folders/FolderLibraryPanelsPage.tsx"))))},{path:"/library-panels",component:yi((()=>Promise.all([s.e(4460),s.e(7878)]).then(s.bind(s,"./public/app/features/library-panels/LibraryPanelsPage.tsx"))))},...Fi(),...Di(),..._i,{path:"/*",component:Oi}].map((e=>this.renderRoute(e)))})}render(){(0,h.navigationLogger)("AppWrapper",!1,"rendering");return(0,U.jsx)(ua.Provider,{store:Os.h,children:(0,U.jsx)(m.ErrorBoundaryAlert,{style:"page",children:(0,U.jsx)(Bi.E_.Provider,{value:h.config,children:(0,U.jsx)(Bi.f6,{children:(0,U.jsxs)(m.ModalsProvider,{children:[Ar||(Ar=(0,U.jsx)(m.GlobalStyles,{})),(0,U.jsx)("div",{className:"grafana-app",children:(0,U.jsxs)(da.F0,{history:h.locationService.getHistory(),children:[Dr||(Dr=(0,U.jsx)(mr,{})),(0,U.jsxs)("main",{className:"main-view",children:[Br.map(((e,t)=>(0,U.jsx)(e,{},t.toString()))),(0,U.jsx)("div",{ref:this.container,dangerouslySetInnerHTML:{__html:'<grafana-app ng-cloak></app-notifications-list><div id="ngRoot"></div></grafana-app>'}}),$r||($r=(0,U.jsx)(Nr,{})),Lr||(Lr=(0,U.jsx)(Or._8,{})),this.state.ngInjector&&this.container&&this.renderRoutes(),Vr.map(((e,t)=>(0,U.jsx)(e,{},t.toString())))]})]})}),Er||(Er=(0,U.jsx)(Pr,{})),Rr||(Rr=(0,U.jsx)(m.ModalRoot,{}))]})})})})})}}function Ur(e){const t=function(e){for(;null!==e&&e.tagName;){if("A"===e.tagName.toUpperCase())return e;e=e.parentNode}return null}(e.target);if(!(e.ctrlKey||e.metaKey||e.defaultPrevented)&&t){let s=t.getAttribute("href");const a=t.getAttribute("target");if(s&&!a){if((0,h.navigationLogger)("utils",!1,"intercepting link click",e),e.preventDefault(),s=d.locationUtil.stripBaseFromUrl(s),"/"!==s[0]){if(s.indexOf("://")>0)return void(window.location.href=s);s=`/${s}`}h.locationService.push(s)}}}s("./node_modules/angular-route/index.js"),s("./node_modules/angular-sanitize/index.js"),s("./node_modules/angular-bindonce/bindonce.js"),s("./public/vendor/bootstrap/bootstrap.js"),s("./public/vendor/angular-other/angular-strap.js");class qr{constructor(){(0,h.navigationLogger)("Patch angular",!1,"RouteProvider")}$get(){return this}}class Hr{constructor(){var e,t,s;s=()=>{},(t="$get")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,(0,h.navigationLogger)("Patch angular",!1,"RouteParamsProvider")}}var Gr=s("./public/app/angular/AngularLocationWrapper.ts");function Wr(){S.hF.config(["$provide",e=>{e.decorator("$browser",["$delegate",e=>(e.onUrlChange=()=>{},e.url=()=>"",e)])}]),S.hF.config(["$provide",e=>{e.decorator("$location",["$delegate",e=>new Gr.O])}]),S.hF.provider("$route",qr),S.hF.provider("$routeParams",Hr)}var Zr=s("./public/app/features/dashboard/services/TimeSrv.ts");function Qr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Kr{constructor(){Qr(this,"ngModuleDependencies",void 0),Qr(this,"preBootModules",void 0),Qr(this,"registerFunctions",void 0),this.preBootModules=[],this.ngModuleDependencies=[],this.registerFunctions={}}init(){O().module("grafana",[]).config(["$controllerProvider","$compileProvider","$filterProvider","$httpProvider","$provide",(e,t,s,a,n)=>{"development"!==c.vc.buildInfo.env&&t.debugInfoEnabled(!1),a.useApplyAsync(!0),this.registerFunctions.controller=e.register,this.registerFunctions.directive=t.directive,this.registerFunctions.factory=n.factory,this.registerFunctions.service=n.service,this.registerFunctions.filter=s.register,n.decorator("$http",["$delegate","$templateCache",(e,t)=>{const s=e.get;return e.get=(e,a)=>(e.match(/\.html$/)&&(t.get(e)||(e+="?v="+(new Date).getTime())),s(e,a)),e}])}]),this.ngModuleDependencies=["grafana.core","ngSanitize","$strap.directives","grafana","pasvaz.bindonce","react"],S.rb.forEach((e=>{this.useModule(e)})),O().module("grafana.services").service("dashboardLoaderSrv",H.Bg),S.ZP.factory("timeSrv",(()=>(0,Zr.$t)())),S.ZP.factory("templateSrv",(()=>(0,h.getTemplateSrv)())),(0,te.Yd)(),Wr()}useModule(e){return this.preBootModules?this.preBootModules.push(e):(0,i.extend)(e,this.registerFunctions),this.ngModuleDependencies.push(e.name),e}bootstrap(){const e=O().bootstrap(document,this.ngModuleDependencies);return function(e){e.oldInvoke=e.invoke,e.invoke=(t,s,a,n)=>{var i;const r=null==a||null===(i=a.$scope)||void 0===i?void 0:i.$parent;var o,l,c,d,u,p,h,g,m;return r&&(r.panel&&(s.panel=r.panel),r.dashboard&&(s.dashboard=r.dashboard),null!==(o=r.ctrl)&&void 0!==o&&o.target&&(s.panelCtrl=r.ctrl,s.datasource=r.ctrl.datasource,s.target=r.ctrl.target),null!==(l=r.ctrl)&&void 0!==l&&l.datasourceMeta&&(s.meta=r.ctrl.datasourceMeta,s.current=r.ctrl.current),null!==(c=r.ctrl)&&void 0!==c&&c.currentAnnotation&&(s.annotation=r.ctrl.currentAnnotation,s.datasource=r.ctrl.currentDatasource),r.isAppConfigCtrl&&(s.appEditCtrl=r.ctrl,s.appModel=r.ctrl.model),null!==(d=r.$parent)&&void 0!==d&&null!==(u=d.$parent)&&void 0!==u&&null!==(p=u.ctrl)&&void 0!==p&&p.appModel&&(s.appModel=null===(h=r.$parent)||void 0===h||null===(g=h.$parent)||void 0===g||null===(m=g.ctrl)||void 0===m?void 0:m.appModel)),e.oldInvoke(t,s,a,n)}}(e),e.invoke((()=>(this.preBootModules.forEach((e=>{(0,i.extend)(e,this.registerFunctions)})),()=>{}))),e}}var Yr=s("./public/app/features/panel/PanelRenderer.tsx"),Jr=s("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),Xr=s("./node_modules/rxjs/dist/esm5/internal/observable/from.js"),eo=s("./node_modules/rxjs/dist/esm5/internal/operators/first.js"),to=s("./public/app/features/query/state/PanelQueryRunner.ts"),so=s("./public/app/features/query/state/processing/revision.ts"),ao=s("./public/app/features/query/state/runRequest.ts");function no(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class io{constructor(){no(this,"subject",void 0),no(this,"subscription",void 0),no(this,"lastResult",void 0),this.subject=new Jr.t(1)}get(){return this.subject.asObservable()}run(e){const{queries:t,timezone:s,datasource:a,panelId:n,app:r,dashboardId:o,timeRange:l,timeInfo:c,cacheTimeout:u,maxDataPoints:p,scopedVars:g,minInterval:m}=e;this.subscription&&this.subscription.unsubscribe();const f={app:null!=r?r:d.CoreApp.Unknown,requestId:(0,to.t)(),timezone:s,panelId:n,dashboardId:o,range:l,timeInfo:c,interval:"",intervalMs:0,targets:(0,i.cloneDeep)(t),maxDataPoints:p,scopedVars:g||{},cacheTimeout:u,startTime:Date.now()};f.rangeRaw=l.raw,(0,Xr.Dp)(async function(e,t){if(e&&e.query)return e;return await(0,V.ak)().get(e,t)}(a,f.scopedVars)).pipe((0,eo.P)()).subscribe({next:e=>{f.targets=f.targets.map((t=>(t.datasource||(t.datasource=e.name),t)));const t=m?(0,h.getTemplateSrv)().replace(m,f.scopedVars):e.interval,s=d.rangeUtil.calculateInterval(l,p,t);f.scopedVars=Object.assign({},f.scopedVars,{__interval:{text:s.interval,value:s.interval},__interval_ms:{text:s.intervalMs.toString(),value:s.intervalMs}}),f.interval=s.interval,f.intervalMs=s.intervalMs,this.subscription=(0,ao.v7)(e,f).subscribe({next:e=>{const t=(0,ao.zR)(e,this.lastResult);this.lastResult=(0,so.C)(t,this.lastResult),this.subject.next(this.lastResult)}})},error:e=>console.error("PanelQueryRunner Error",e)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===d.LoadingState.Loading&&this.subject.next(Object.assign({},this.lastResult,{state:d.LoadingState.Done})))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}var ro,oo=s("./public/app/features/variables/getAllVariableValuesForUrl.ts");const lo=(null!==(ro=window.__grafana_public_path__)&&void 0!==ro?ro:"public/")+"lib/monaco/min/vs",co=[[`${lo}/language/kusto/bridge.min.js`],[`${lo}/language/kusto/kusto.javascript.client.min.js`,`${lo}/language/kusto/newtonsoft.json.min.js`,`${lo}/language/kusto/Kusto.Language.Bridge.min.js`]];async function uo(){let e=Promise.resolve();for(const t of co){await e;const s=t.filter((e=>!document.querySelector(`script[src="${e}"]`))).map((e=>{return t=e,new Promise(((e,s)=>{let a;"string"==typeof t?(a=document.createElement("script"),a.src=t):a=t,a.onload=()=>e(),a.onerror=e=>s(e),document.body.appendChild(a)}));var t}));await Promise.all(s)}await new Promise((e=>{window.__monacoKustoResolvePromise=e;const t=document.createElement("script");return t.innerHTML="require(['vs/language/kusto/monaco.contribution'], function() {\n      window.__monacoKustoResolvePromise();\n    });",document.body.appendChild(t)}))}function po(){return[{id:"kusto",name:"kusto",init:uo}]}function ho(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class go{constructor(e){ho(this,"supportedEvents",[h.EchoEventType.Pageview]),ho(this,"addEvent",(e=>{window.ga&&(window.ga("set",{page:e.payload.page}),window.ga("send","pageview"))})),ho(this,"flush",(()=>{})),this.options=e;const t=`https://www.google-analytics.com/analytics${e.debug?"_debug":""}.js`;n().ajax({url:t,dataType:"script",cache:!0});const s=window.ga=window.ga||function(){(s.q=s.q||[]).push(arguments)};s.l=+new Date,s("create",e.googleAnalyticsId,"auto"),s("set","anonymizeIp",!0)}}function mo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class fo{constructor(e){mo(this,"supportedEvents",[h.EchoEventType.Pageview,h.EchoEventType.Interaction]),mo(this,"addEvent",(e=>{window.applicationInsights&&((0,h.isPageviewEvent)(e)&&window.applicationInsights.trackPageView(),(0,h.isInteractionEvent)(e)&&window.applicationInsights.trackEvent({name:e.payload.interactionName,properties:e.payload.properties}))})),mo(this,"flush",(()=>{})),this.options=e,n().ajax({url:"https://js.monitor.azure.com/scripts/b/ai.2.min.js",dataType:"script",cache:!0}).done((function(){var t={config:{connectionString:e.connectionString,endpointUrl:e.endpointUrl}},s=new window.Microsoft.ApplicationInsights.ApplicationInsights(t);window.applicationInsights=s.loadAppInsights()}))}}function bo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class vo{constructor(e){bo(this,"supportedEvents",[h.EchoEventType.Pageview,h.EchoEventType.Interaction]),bo(this,"addEvent",(e=>{window.rudderanalytics&&((0,h.isPageviewEvent)(e)&&window.rudderanalytics.page(),(0,h.isInteractionEvent)(e)&&window.rudderanalytics.track(e.payload.interactionName,e.payload.properties))})),bo(this,"flush",(()=>{})),this.options=e;n().ajax({url:"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js",dataType:"script",cache:!0});const t=window.rudderanalytics=[];var s=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let e=0;e<s.length;e++){const a=s[e];t[a]=function(e){return function(){t.push([e].concat(Array.prototype.slice.call(arguments)))}}(a)}t.load(e.writeKey,e.dataPlaneUrl),e.user&&t.identify(e.user.email,{email:e.user.email,orgId:e.user.orgId})}}var xo=s("./node_modules/debounce-promise/dist/index.js"),yo=s.n(xo),wo=s("./node_modules/react-use/esm/useAsync.js");const jo=(e="")=>w.ae.search({type:"dash-db",query:e,limit:100}).then((e=>e.map((e=>{var t;return{value:e.uid,label:`${null!==(t=null==e?void 0:e.folderTitle)&&void 0!==t?t:"General"}/${e.title}`}})))),ko=({value:e,onChange:t,item:s})=>{var a;const[n,i]=(0,l.useState)();(0,wo.Z)((async()=>{var t,s;if(!e)return void i(void 0);const a=await w.ae.getDashboardByUid(e);i({value:a.dashboard.uid,label:`${null!==(t=null===(s=a.meta)||void 0===s?void 0:s.folderTitle)&&void 0!==t?t:"General"}/${a.dashboard.title}`})}),[e]);const r=(0,l.useCallback)((e=>{t(null==e?void 0:e.value)}),[t]),o=yo()(jo,300),{placeholder:c,isClearable:d}=null!==(a=null==s?void 0:s.settings)&&void 0!==a?a:{};return(0,U.jsx)(m.AsyncSelect,{menuShouldPortal:!0,isClearable:d,defaultOptions:!0,loadOptions:o,onChange:r,placeholder:null!=c?c:"Select dashboard",noOptionsMessage:"No dashboards found",value:n})},So=()=>{const e={id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ko};return[...(0,m.getStandardOptionEditors)(),e]};r().move=u.R;const Co=s("./public/app sync recursive extensions\\/index.ts"),To=Co.keys().map((e=>Co(e)));const No=new class{constructor(){var e,t,s;s=void 0,(t="angularApp")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,this.angularApp=new Kr}init(){!function(){(0,h.setEchoSrv)(new x({debug:!1})),window.addEventListener("load",(e=>{const t="frontend_boot_load_time_seconds";if(performance&&performance.getEntriesByType){performance.mark(t);const e=performance.getEntriesByType("paint");for(const t of e)y(`frontend_boot_${t.name}_time_seconds`,Math.round(t.startTime+t.duration)/1e3);const s=performance.getEntriesByName(t)[0];y(s.name,Math.round(s.startTime+s.duration)/1e3)}})),""!==g.Vt.user.orgRole&&(0,h.registerEchoBackend)(new k({}));c.ZP.sentry.enabled&&(0,h.registerEchoBackend)(new Cs(Object.assign({},c.ZP.sentry,{user:c.ZP.bootData.user,buildInfo:c.ZP.buildInfo})));c.ZP.googleAnalyticsId&&(0,h.registerEchoBackend)(new go({googleAnalyticsId:c.ZP.googleAnalyticsId}));c.ZP.rudderstackWriteKey&&c.ZP.rudderstackDataPlaneUrl&&(0,h.registerEchoBackend)(new vo({writeKey:c.ZP.rudderstackWriteKey,dataPlaneUrl:c.ZP.rudderstackDataPlaneUrl,user:c.ZP.bootData.user}));c.ZP.applicationInsightsConnectionString&&(0,h.registerEchoBackend)(new fo({connectionString:c.ZP.applicationInsightsConnectionString,endpointUrl:c.ZP.applicationInsightsEndpointUrl}))}(),(0,m.getScrollbarWidth)()>0&&document.body.classList.add("no-overlay-scrollbar"),(0,d.setLocale)(c.ZP.bootData.user.locale),(0,h.setPanelRenderer)(Yr.$),(0,d.setTimeZoneResolver)((()=>c.ZP.bootData.user.timezone)),To.length>0&&To[0].init(),function(e){const t=(0,Ns.xC)({reducer:ta(),middleware:e=>e({thunk:!0,serializableCheck:!1,immutableCheck:!1}),devTools:!1,preloadedState:Object.assign({navIndex:(0,Ms.Cu)()},e)});(0,Os.PQ)(t)}(),d.standardEditorsRegistry.setInit(So),d.standardFieldConfigEditorRegistry.setInit(m.getStandardFieldConfigs),d.standardTransformersRegistry.setInit(ls),se.z.setInit(se.Z),d.monacoLanguageRegistry.setInit(po),(0,h.setQueryRunnerFactory)((()=>new io)),(0,Ts.Np)(new Ts.LS),d.locationUtil.initialize({config:c.ZP,getTimeRangeForUrl:(0,Zr.$t)().timeRangeForUrl,getVariablesUrlParams:oo.c}),document.addEventListener("click",Ur),$.fn.tooltip.defaults.animation=!1,this.angularApp.init();const e=[];for(const t of c.ZP.pluginsToPreload)e.push((0,p.N$)(t));Promise.all(e).then((()=>{o.render(l.createElement(zr,{app:this}),document.getElementById("reactRoot"))}))}};window.public_cdn_path&&(s.p=window.public_cdn_path),window.__grafana_public_path__=s.p.substring(0,s.p.lastIndexOf("build/"))||s.p,window.nonce&&(s.nc=window.nonce),No.init()},"./public/app/plugins/datasource/alertmanager/types.ts":(e,t,s)=>{"use strict";let a,n,i,r;s.d(t,{As:()=>a,Z9:()=>n,_M:()=>i,sK:()=>r}),function(e){e.Active="active",e.Expired="expired",e.Pending="pending"}(a||(a={})),function(e){e.Unprocessed="unprocessed",e.Active="active",e.Suppressed="suppressed"}(n||(n={})),function(e){e.equal="=",e.notEqual="!=",e.regex="=~",e.notRegex="!~"}(i||(i={})),function(e){e.cortex="cortex",e.prometheus="prometheus"}(r||(r={}))},"./public/app/plugins/datasource/cloud-monitoring/components/MQLQueryEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{a:()=>i});s("./node_modules/react/index.js");var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/react/jsx-runtime.js");function i({query:e,onChange:t,onRunQuery:s}){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.TextArea,{name:"Query",className:"slate-query-field",value:e,rows:10,placeholder:"Enter a Cloud Monitoring MQL query (Run with Shift+Enter)",onBlur:s,onChange:e=>t(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&(e.shiftKey||e.ctrlKey)&&(e.preventDefault(),s())}})})}},"./public/app/plugins/datasource/cloud-monitoring/components/MetricQueryEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{wi:()=>d,a1:()=>p});var a=s("./node_modules/react/index.js"),n=s("./public/app/plugins/datasource/cloud-monitoring/components/index.ts"),i=s("./public/app/plugins/datasource/cloud-monitoring/types.ts"),r=s("./public/app/plugins/datasource/cloud-monitoring/functions.ts"),o=s("./public/app/plugins/datasource/cloud-monitoring/components/MQLQueryEditor.tsx"),l=s("./node_modules/react/jsx-runtime.js");const c={labels:{}},d=e=>({editorMode:i.je.Visual,projectName:e.getDefaultProject(),metricType:"",metricKind:i.lH.GAUGE,valueType:"",crossSeriesReducer:"REDUCE_MEAN",alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:i.CS.ALIGN_MEAN,groupBys:[],filters:[],aliasBy:"",query:"",preprocessor:i.mG.None});function u({refId:e,query:t,datasource:s,onChange:d,onRunQuery:u,customMetaData:p,variableOptionGroup:h}){const[g,m]=(0,a.useState)(c),{projectName:f,metricType:b,groupBys:v,editorMode:x}=t;(0,a.useEffect)((()=>{f&&b&&s.getLabels(b,e,f,v).then((e=>m((t=>Object.assign({},t,{labels:e})))))}),[s,v,b,f,e]);const y=(0,a.useCallback)((e=>{d(Object.assign({},t,e)),u()}),[d,u,t]),w=(0,a.useCallback)((({valueType:e,metricKind:s,type:a})=>{const n=s===i.lH.GAUGE||e===i.$h.DISTRIBUTION?i.mG.None:i.mG.Rate,{perSeriesAligner:o}=(0,r.ID)(e,s,g.perSeriesAligner,n);y(Object.assign({},t,{perSeriesAligner:o,metricType:a,valueType:e,metricKind:s,preprocessor:n}))}),[y,t,g]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.IK,{templateVariableOptions:h.options,projectName:f,datasource:s,onChange:e=>{y(Object.assign({},t,{projectName:e}))}}),x===i.je.Visual&&(0,l.jsx)(n.sL,{labels:g.labels,variableOptionGroup:h,customMetaData:p,onMetricTypeChange:w,onChange:y,datasource:s,query:t}),x===i.je.MQL&&(0,l.jsx)(o.a,{onChange:e=>d(Object.assign({},t,{query:e})),onRunQuery:u,query:t.query}),(0,l.jsx)(n.BQ,{value:t.aliasBy,onChange:e=>{y(Object.assign({},t,{aliasBy:e}))}})]})}const p=a.memo(u)},"./public/app/plugins/datasource/cloud-monitoring/components/QueryEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{W:()=>g});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./public/app/plugins/datasource/cloud-monitoring/components/index.ts"),o=s("./public/app/plugins/datasource/cloud-monitoring/types.ts"),l=s("./public/app/plugins/datasource/cloud-monitoring/constants.ts"),c=s("./public/app/plugins/datasource/cloud-monitoring/components/MetricQueryEditor.tsx"),d=s("./public/app/plugins/datasource/cloud-monitoring/components/SLO/SLOQueryEditor.tsx"),u=s("./public/app/plugins/datasource/cloud-monitoring/functions.ts"),p=s("./node_modules/react/jsx-runtime.js");const h=["hide","refId","datasource","key","queryType","maxLines","metric"];class g extends a.PureComponent{async UNSAFE_componentWillMount(){const{datasource:e,query:t}=this.props;if(!this.props.query.hasOwnProperty("metricQuery")){const e=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(this.props.query,h);this.props.query.metricQuery=e}this.props.query.hasOwnProperty("queryType")||(this.props.query.queryType=o.xL.METRICS),await e.ensureGCEDefaultProject(),t.metricQuery.projectName||(this.props.query.metricQuery.projectName=e.getDefaultProject())}onQueryChange(e,t){this.props.onChange(Object.assign({},this.props.query,{[e]:t})),this.props.onRunQuery()}render(){var e,t,s;const{datasource:a,query:h,onRunQuery:g,onChange:m}=this.props,f=Object.assign({},(0,c.wi)(a),h.metricQuery),b=Object.assign({},(0,d.w)(a),h.sloQuery),v=h.queryType||o.xL.METRICS,x=null!==(e=this.props.data)&&void 0!==e&&e.series.length?null===(t=this.props.data)||void 0===t?void 0:t.series[0].meta:{},y=null!==(s=null==x?void 0:x.custom)&&void 0!==s?s:{},w={label:"Template Variables",expanded:!1,options:a.getVariables().map(u.Er)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.x5,{label:"Query type",fillComponent:h.queryType!==o.xL.SLO&&(0,p.jsx)(i.Button,{variant:"secondary",className:n.css`
                  margin-left: auto;
                `,icon:"edit",onClick:()=>this.onQueryChange("metricQuery",Object.assign({},f,{editorMode:f.editorMode===o.je.MQL?o.je.Visual:o.je.MQL})),children:f.editorMode===o.je.MQL?"Switch to builder":"Edit MQL"}),children:(0,p.jsx)(i.Select,{menuShouldPortal:!0,width:l.Lh,value:v,options:l.XI,onChange:({value:e})=>{m(Object.assign({},h,{sloQuery:b,queryType:e})),g()}})}),v===o.xL.METRICS&&(0,p.jsx)(r.a1,{refId:h.refId,variableOptionGroup:w,customMetaData:y,onChange:e=>{this.props.onChange(Object.assign({},this.props.query,{metricQuery:e}))},onRunQuery:g,datasource:a,query:f}),v===o.xL.SLO&&(0,p.jsx)(r.D6,{variableOptionGroup:w,customMetaData:y,onChange:e=>this.onQueryChange("sloQuery",e),onRunQuery:g,datasource:a,query:b})]})}}},"./public/app/plugins/datasource/cloud-monitoring/components/SLO/SLOQueryEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{D:()=>h,w:()=>p});var a=s("./node_modules/react/index.js"),n=s("./public/app/plugins/datasource/cloud-monitoring/components/index.ts"),i=s("./public/app/plugins/datasource/cloud-monitoring/types.ts"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./public/app/plugins/datasource/cloud-monitoring/constants.ts"),l=s("./node_modules/react/jsx-runtime.js");const c=({query:e,templateVariableOptions:t,onChange:s,datasource:i})=>{const[c,d]=(0,a.useState)([]),{projectName:u}=e;return(0,a.useEffect)((()=>{u&&i.getSLOServices(u).then((e=>{d([{label:"Template Variables",options:t},...e])}))}),[i,u,t]),(0,l.jsx)(n.x5,{label:"Service",children:(0,l.jsx)(r.Select,{menuShouldPortal:!0,width:o.Lh,allowCustomValue:!0,value:(null==e?void 0:e.serviceId)&&{value:null==e?void 0:e.serviceId,label:(null==e?void 0:e.serviceName)||(null==e?void 0:e.serviceId)},placeholder:"Select service",options:c,onChange:({value:t="",label:a=""})=>s(Object.assign({},e,{serviceId:t,serviceName:a,sloId:""}))})})},d=({query:e,templateVariableOptions:t,onChange:s,datasource:i})=>{const[c,d]=(0,a.useState)([]),{projectName:u,serviceId:p}=e;return(0,a.useEffect)((()=>{u&&p&&i.getServiceLevelObjectives(u,p).then((e=>{d([{label:"Template Variables",options:t},...e])}))}),[i,u,p,t]),(0,l.jsx)(n.x5,{label:"SLO",children:(0,l.jsx)(r.Select,{menuShouldPortal:!0,width:o.Lh,allowCustomValue:!0,value:(null==e?void 0:e.sloId)&&{value:null==e?void 0:e.sloId,label:(null==e?void 0:e.sloName)||(null==e?void 0:e.sloId)},placeholder:"Select SLO",options:c,onChange:async({value:t="",label:a=""})=>{const n=(await i.getServiceLevelObjectives(u,p)).find((({value:e})=>e===i.templateSrv.replace(t)));s(Object.assign({},e,{sloId:t,sloName:a,goal:null==n?void 0:n.goal}))}})})},u=({query:e,templateVariableOptions:t,onChange:s,datasource:a})=>(0,l.jsx)(n.x5,{label:"Selector",children:(0,l.jsx)(r.Select,{menuShouldPortal:!0,width:o.Lh,allowCustomValue:!0,value:[...o.IR,...t].find((t=>{var s;return null!==(s=t.value===(null==e?void 0:e.selectorName))&&void 0!==s?s:""})),options:[{label:"Template Variables",options:t},...o.IR],onChange:({value:t})=>s(Object.assign({},e,{selectorName:null!=t?t:""}))})}),p=e=>({projectName:e.getDefaultProject(),alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:i.CS.ALIGN_MEAN,aliasBy:"",selectorName:"select_slo_health",serviceId:"",serviceName:"",sloId:"",sloName:""});function h({query:e,datasource:t,onChange:s,variableOptionGroup:a,customMetaData:i}){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.IK,{templateVariableOptions:a.options,projectName:e.projectName,datasource:t,onChange:t=>s(Object.assign({},e,{projectName:t}))}),(0,l.jsx)(c,{datasource:t,templateVariableOptions:a.options,query:e,onChange:s}),(0,l.jsx)(d,{datasource:t,templateVariableOptions:a.options,query:e,onChange:s}),(0,l.jsx)(u,{datasource:t,templateVariableOptions:a.options,query:e,onChange:s}),(0,l.jsxs)(n.x5,{label:"Alignment period",children:[(0,l.jsx)(n.y3,{templateVariableOptions:a.options,query:Object.assign({},e,{perSeriesAligner:"select_slo_health"===e.selectorName?"ALIGN_MEAN":"ALIGN_NEXT_OLDER"}),onChange:s,selectWidth:o.Lh}),(0,l.jsx)(n.nS,{datasource:t,customMetaData:i})]}),(0,l.jsx)(n.BQ,{value:e.aliasBy,onChange:t=>s(Object.assign({},e,{aliasBy:t}))})]})}},"./public/app/plugins/datasource/cloud-monitoring/components/index.ts":(e,t,s)=>{"use strict";s.d(t,{Pe:()=>N,BQ:()=>T,v2:()=>p,XY:()=>j,y3:()=>k,nS:()=>C,zI:()=>w,X9:()=>u,pj:()=>x,a1:()=>P.a1,C3:()=>c,Av:()=>U,IK:()=>o,EC:()=>R,x5:()=>E,D6:()=>M.D,Th:()=>L,sL:()=>V});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/plugins/datasource/cloud-monitoring/constants.ts"),r=s("./node_modules/react/jsx-runtime.js");function o({projectName:e,datasource:t,onChange:s,templateVariableOptions:o}){const[l,c]=(0,a.useState)([]);return(0,a.useEffect)((()=>{t.getProjects().then((e=>c([{label:"Template Variables",options:o},...e])))}),[t,o]),(0,r.jsx)(E,{label:"Project",children:(0,r.jsx)(n.Select,{menuShouldPortal:!0,width:i.Lh,allowCustomValue:!0,formatCreateLabel:e=>`Use project: ${e}`,onChange:({value:e})=>s(e),options:l,value:{value:e,label:e},placeholder:"Select Project"})})}var l=s("./node_modules/lodash/lodash.js");function c(e){const[t,s]=(0,a.useState)({metricDescriptors:[],metrics:[],services:[],service:"",metric:"",projectName:null}),{services:o,service:c,metrics:d,metricDescriptors:u}=t,{metricType:p,templateVariableOptions:h,projectName:g,templateSrv:m,datasource:f,onChange:b,children:v}=e,x=(0,a.useCallback)(((e,t)=>e.find((e=>e.type===m.replace(t)))),[m]);(0,a.useEffect)((()=>{(async()=>{if(g){const e=await f.getMetricTypes(g),t=w(e),a=(e=>{const t=x(e,p);return t?e.filter((e=>e.service===t.service)).map((e=>({service:e.service,value:e.type,label:e.displayName,description:e.description}))):[]})(e),n=a.length>0?a[0].service:"",i=x(e,p);s((s=>Object.assign({},s,{metricDescriptors:e,services:t,metrics:a,service:n,metricDescriptor:i})))}})()}),[f,x,p,g]);const y=({value:e},a={})=>{const n=x(t.metricDescriptors,e);s(Object.assign({},t,{metricDescriptor:n},a)),b(Object.assign({},n,{type:e}))},w=e=>{const t=e.map((e=>({value:e.service,label:(0,l.startCase)(e.serviceShortName)})));return t.length>0?(0,l.uniqBy)(t,(e=>e.value)):[]};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(E,{children:[(0,r.jsx)(R,{labelWidth:i.XC,label:"Service",children:(0,r.jsx)(n.Select,{menuShouldPortal:!0,width:i.Lh,onChange:({value:e})=>{const a=u.filter((t=>t.service===m.replace(e))).map((e=>({service:e.service,value:e.type,label:e.displayName,description:e.description})));a.length>0&&!a.some((e=>e.value===m.replace(p)))?y(a[0],{service:e,metrics:a}):s(Object.assign({},t,{service:e,metrics:a}))},value:[...o,...h].find((e=>e.value===c)),options:[{label:"Template Variables",options:h},...o],placeholder:"Select Services"})}),(0,r.jsx)(R,{label:"Metric name",labelWidth:i.qN,children:(0,r.jsx)(n.Select,{menuShouldPortal:!0,width:i.Lh,onChange:y,value:[...d,...h].find((e=>e.value===p)),options:[{label:"Template Variables",options:h},...d],placeholder:"Select Metric"})})]}),v(t.metricDescriptor)]})}var d=s("./public/app/plugins/datasource/cloud-monitoring/functions.ts");const u=({labels:e=[],query:t,onChange:s,variableOptionGroup:o,metricDescriptor:l})=>{var c,u;const p=(0,a.useMemo)((()=>[o,...(0,d.gY)([...e,...i.$e])]),[e,o]);return(0,r.jsxs)(E,{label:"Group by",tooltip:"You can reduce the amount of data returned for a metric by combining different time series. To combine multiple time series, you can specify a grouping and a function. Grouping is done on the basis of labels. The grouping function is used to combine the time series in the group into a single time series.",children:[(0,r.jsx)(n.MultiSelect,{menuShouldPortal:!0,width:i.d7,placeholder:"Choose label",options:p,value:null!==(c=t.groupBys)&&void 0!==c?c:[],onChange:e=>{s(Object.assign({},t,{groupBys:e.map((e=>e.value))}))}}),(0,r.jsx)(N,{metricDescriptor:l,templateVariableOptions:o.options,crossSeriesReducer:t.crossSeriesReducer,groupBys:null!==(u=t.groupBys)&&void 0!==u?u:[],onChange:e=>s(Object.assign({},t,{crossSeriesReducer:e}))})]})},p=({templateVariableOptions:e,onChange:t,query:s,customMetaData:a,datasource:n})=>(0,r.jsxs)(E,{label:"Alignment function",tooltip:"The process of alignment consists of collecting all data points received in a fixed length of time, applying a function to combine those data points, and assigning a timestamp to the result.",fillComponent:(0,r.jsx)(C,{datasource:n,customMetaData:a}),children:[(0,r.jsx)(j,{templateVariableOptions:e,query:s,onChange:t}),(0,r.jsx)(R,{label:"Alignment period",children:(0,r.jsx)(k,{selectWidth:i.Lh,templateVariableOptions:e,query:s,onChange:t})})]}),h=["value","isOpen","invalid"],g=["value"];function m(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}const f=["=","!=","=~","!=~"],b=a.forwardRef(((e,t)=>{let s=m(e,h);return(0,r.jsx)(n.Button,Object.assign({ref:t},s,{variant:"secondary",icon:"plus"}))}));b.displayName="FilterButton";const v=a.forwardRef(((e,t)=>{let{value:s}=e,a=m(e,g);return(0,r.jsx)(n.Button,Object.assign({ref:t},a,{variant:"secondary",children:(0,r.jsx)("span",{className:"query-segment-operator",children:null==s?void 0:s.label})}))}));v.displayName="OperatorButton";const x=({labels:e={},filters:t,onChange:s,variableOptionGroup:o})=>{var c;const u=(0,a.useMemo)((()=>(0,d.mi)(t)),[t]),p=(0,a.useMemo)((()=>[o,...(0,d.gY)(Object.keys(e))]),[e,o]),h=(0,a.useCallback)((e=>{const t=(0,l.flatten)(e.map((({key:e,operator:t,value:s,condition:a})=>[e,t,s,a])));return t.slice(0,t.length-1)}),[]),g=()=>(0,r.jsx)(n.Select,{menuShouldPortal:!0,allowCustomValue:!0,options:[o,...(0,d.gY)(Object.keys(e))],onChange:({value:e=""})=>s(h([...u,{key:e,operator:"=",condition:"AND",value:""}])),menuPlacement:"bottom",renderControl:b});return(0,r.jsx)(E,{label:"Filter",tooltip:"To reduce the amount of data charted, apply a filter. A filter has three components: a label, a comparison, and a value. The comparison can be an equality, inequality, or regular expression.",noFillEnd:u.length>1,children:(0,r.jsxs)(n.VerticalGroup,{spacing:"xs",width:"auto",children:[u.map((({key:t,operator:a,value:l,condition:m},b)=>(0,r.jsxs)(n.HorizontalGroup,{spacing:"xs",width:"auto",children:[(0,r.jsx)(n.Select,{menuShouldPortal:!0,width:i.Lh,allowCustomValue:!0,formatCreateLabel:e=>`Use label key: ${e}`,value:t,options:p,onChange:({value:e=""})=>{s(h(u.map(((t,s)=>s===b?{key:e,operator:a,condition:m,value:""}:t))))}}),(0,r.jsx)(n.Select,{menuShouldPortal:!0,value:a,options:f.map(d.Er),onChange:({value:e="="})=>s(h(u.map(((t,s)=>s===b?Object.assign({},t,{operator:e}):t)))),menuPlacement:"bottom",renderControl:v}),(0,r.jsx)(n.Select,{menuShouldPortal:!0,width:i.Lh,formatCreateLabel:e=>`Use label value: ${e}`,allowCustomValue:!0,value:l,placeholder:"add filter value",options:e.hasOwnProperty(t)?[o,...e[t].map(d.Er)]:[o],onChange:({value:e=""})=>s(h(u.map(((t,s)=>s===b?Object.assign({},t,{value:e}):t))))}),(0,r.jsx)(n.Button,{variant:"secondary",size:"md",icon:"trash-alt","aria-label":"Remove",onClick:()=>s(h(u.filter(((e,t)=>t!==b))))}),b+1===u.length&&Object.values(u).every((({value:e})=>e))&&(c||(c=(0,r.jsx)(g,{})))]},b))),!u.length&&(0,r.jsx)(g,{})]})})};var y;const w=()=>y||(y=(0,r.jsx)("div",{className:"gf-form grafana-info-box alert-info",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{children:"Annotation Query Format"}),(0,r.jsxs)("p",{children:["An annotation is an event that is overlaid on top of graphs. Annotation rendering is expensive so it is important to limit the number of rows returned."," "]}),(0,r.jsx)("p",{children:"The Title and Text fields support templating and can use data returned from the query. For example, the Title field could have the following text:"}),(0,r.jsxs)("code",{children:["{{metric.type}}"," has value: ","{{metric.value}}"]}),(0,r.jsxs)("p",{children:["Example Result: ",(0,r.jsx)("code",{children:"monitoring.googleapis.com/uptime_check/http_status has this value: 502"})]}),(0,r.jsx)("label",{children:"Patterns:"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("code",{children:"{{metric.value}}"})," = value of the metric/point"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("code",{children:"{{metric.type}}"})," = metric type e.g. compute.googleapis.com/instance/cpu/usage_time"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("code",{children:"{{metric.name}}"})," = name part of metric e.g. instance/cpu/usage_time"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("code",{children:"{{metric.service}}"})," = service part of metric e.g. compute"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("code",{children:"{{metric.label.label_name}}"})," = Metric label metadata e.g. metric.label.instance_name"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("code",{children:"{{resource.label.label_name}}"})," = Resource label metadata e.g. resource.label.zone"]})]})})),j=({query:e,templateVariableOptions:t,onChange:s})=>{const{valueType:o,metricKind:l,perSeriesAligner:c,preprocessor:u}=e,{perSeriesAligner:p,alignOptions:h}=(0,a.useMemo)((()=>(0,d.ID)(o,l,c,u)),[o,l,c,u]);return(0,r.jsx)(n.Select,{menuShouldPortal:!0,width:i.Lh,onChange:({value:t})=>s(Object.assign({},e,{perSeriesAligner:t})),value:[...h,...t].find((e=>e.value===p)),options:[{label:"Template Variables",options:t},{label:"Alignment options",expanded:!0,options:h}],placeholder:"Select Alignment"})},k=({templateVariableOptions:e,onChange:t,query:s,selectWidth:o})=>{const l=(0,a.useMemo)((()=>i.dD.map((e=>Object.assign({},e,{label:e.text})))),[]),c=(0,a.useMemo)((()=>l.filter((e=>!e.hidden))),[l]);return(0,r.jsx)(n.Select,{menuShouldPortal:!0,width:o,onChange:({value:e})=>t(Object.assign({},s,{alignmentPeriod:e})),value:[...l,...e].find((e=>e.value===s.alignmentPeriod)),options:[{label:"Template Variables",options:e},{label:"Aggregations",expanded:!0,options:c}],placeholder:"Select Alignment"})};var S=s("./packages/grafana-data/src/index.ts");const C=({customMetaData:e,datasource:t})=>{const{perSeriesAligner:s,alignmentPeriod:n}=e,o=(0,a.useMemo)((()=>{var e;if(!n||!s)return"";const a=i.Eu.find((e=>e.value===t.templateSrv.replace(s))),r=parseInt(null!=n?n:"".replace(/[^0-9]/g,""),10);return`${S.rangeUtil.secondsToHms(r)} interval (${null!==(e=null==a?void 0:a.text)&&void 0!==e?e:""})`}),[t,s,n]);return(0,r.jsx)("label",{children:o})},T=({value:e="",onChange:t})=>{const[s,o]=(0,a.useState)(null!=e?e:""),c=(0,l.debounce)(t,1e3);return t=e=>{o(e.target.value),c(e.target.value)},(0,r.jsx)(E,{label:"Alias by",children:(0,r.jsx)(n.Input,{width:i.d7,value:s,onChange:t})})},N=e=>{const t=O(e),s=I(t,e);return(0,r.jsx)(R,{labelWidth:18,label:"Group by function","data-testid":"cloud-monitoring-aggregation",children:(0,r.jsx)(n.Select,{menuShouldPortal:!0,width:16,onChange:({value:t})=>e.onChange(t),value:s,options:[{label:"Template Variables",options:e.templateVariableOptions},{label:"Aggregations",expanded:!0,options:t}],placeholder:"Select Reducer"})})},O=({metricDescriptor:e})=>{const t=null==e?void 0:e.valueType,s=null==e?void 0:e.metricKind;return(0,a.useMemo)((()=>t&&s?(0,d.A_)(t,s).map((e=>Object.assign({},e,{label:e.text}))):[]),[t,s])},I=(e,t)=>(0,a.useMemo)((()=>[...e,...t.templateVariableOptions].find((e=>e.value===t.crossSeriesReducer))),[e,t.crossSeriesReducer,t.templateVariableOptions]);var P=s("./public/app/plugins/datasource/cloud-monitoring/components/MetricQueryEditor.tsx"),M=s("./public/app/plugins/datasource/cloud-monitoring/components/SLO/SLOQueryEditor.tsx");s("./public/app/plugins/datasource/cloud-monitoring/components/MQLQueryEditor.tsx");var F=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");const A=["children","label","tooltip","fillComponent","noFillEnd","labelWidth"],D=["children","label","tooltip","labelWidth"];function $(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}const L=({label:e,onChange:t,value:s,options:a,allowCustomValue:i=!1})=>(0,r.jsx)(n.InlineField,{label:e,labelWidth:20,children:(0,r.jsx)(n.Select,{menuShouldPortal:!0,width:25,allowCustomValue:i,value:s,onChange:({value:e})=>t(e),options:a})}),E=e=>{let{children:t,label:s,tooltip:a,fillComponent:o,noFillEnd:l=!1,labelWidth:c=i.XC}=e,d=$(e,A);return(0,r.jsxs)("div",Object.assign({className:"gf-form"},d,{children:[s&&(0,r.jsx)(n.InlineLabel,{width:c,tooltip:a,children:s}),(0,r.jsx)("div",{className:F.css`
          margin-right: 4px;
        `,children:(0,r.jsx)(n.HorizontalGroup,{spacing:"xs",width:"auto",children:t})}),(0,r.jsx)("div",{className:"gf-form--grow",children:l||(0,r.jsx)("div",{className:"gf-form-label gf-form-label--grow",children:o})})]}))},R=e=>{let{children:t,label:s,tooltip:a,labelWidth:o=i.qN}=e,l=$(e,D);return(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)(n.InlineLabel,Object.assign({width:o,tooltip:a},l,{children:s})),t]})};function _({query:e,labels:t,datasource:s,onChange:a,onMetricTypeChange:n,customMetaData:i,variableOptionGroup:o}){return(0,r.jsx)(c,{templateSrv:s.templateSrv,projectName:e.projectName,metricType:e.metricType,templateVariableOptions:o.options,datasource:s,onChange:n,children:n=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{labels:t,filters:e.filters,onChange:t=>a(Object.assign({},e,{filters:t})),variableOptionGroup:o}),(0,r.jsx)(U,{metricDescriptor:n,query:e,onChange:a}),(0,r.jsx)(u,{labels:Object.keys(t),query:e,onChange:a,variableOptionGroup:o,metricDescriptor:n}),(0,r.jsx)(p,{datasource:s,templateVariableOptions:o.options,query:e,customMetaData:i,onChange:a})]})})}const V=a.memo(_);var B=s("./public/app/plugins/datasource/cloud-monitoring/types.ts");const z={label:"None",value:B.mG.None},U=({query:e,metricDescriptor:t,onChange:s})=>{var a;const i=q(t);return(0,r.jsx)(E,{label:"Pre-processing",tooltip:"Preprocessing options are displayed when the selected metric has a metric kind of delta or cumulative. The specific options available are determined by the metic's value type. If you select 'Rate', data points are aligned and converted to a rate per time series. If you select 'Delta', data points are aligned by their delta (difference) per time series",children:(0,r.jsx)(n.RadioButtonGroup,{onChange:t=>{const{valueType:a,metricKind:n,perSeriesAligner:i}=e,{perSeriesAligner:r}=(0,d.ID)(a,n,i,t);s(Object.assign({},e,{preprocessor:t,perSeriesAligner:r}))},value:null!==(a=e.preprocessor)&&void 0!==a?a:B.mG.None,options:i})})},q=e=>{const t=null==e?void 0:e.metricKind,s=null==e?void 0:e.valueType;return(0,a.useMemo)((()=>{if(!t||t===B.lH.GAUGE||s===B.$h.DISTRIBUTION)return[z];const e=[z,{label:"Rate",value:B.mG.Rate,description:"Data points are aligned and converted to a rate per time series"}];return t===B.lH.CUMULATIVE?[...e,{label:"Delta",value:B.mG.Delta,description:"Data points are aligned by their delta (difference) per time series"}]:e}),[t,s])}},"./public/app/plugins/datasource/cloud-monitoring/constants.ts":(e,t,s)=>{"use strict";s.d(t,{d7:()=>n,XC:()=>i,qN:()=>r,Lh:()=>o,Eu:()=>l,lx:()=>c,dD:()=>d,$e:()=>u,IR:()=>p,XI:()=>h});var a=s("./public/app/plugins/datasource/cloud-monitoring/types.ts");const n=71,i=19,r=14,o=28,l=(a.Gr.JWT,a.Gr.GCE,[{text:"delta",value:"ALIGN_DELTA",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION],metricKinds:[a.lH.CUMULATIVE,a.lH.DELTA]},{text:"rate",value:"ALIGN_RATE",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY],metricKinds:[a.lH.CUMULATIVE,a.lH.DELTA]},{text:"interpolate",value:"ALIGN_INTERPOLATE",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY],metricKinds:[a.lH.GAUGE]},{text:"next older",value:"ALIGN_NEXT_OLDER",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION,a.$h.STRING,a.$h.VALUE_TYPE_UNSPECIFIED,a.$h.BOOL],metricKinds:[a.lH.GAUGE]},{text:"min",value:"ALIGN_MIN",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"max",value:"ALIGN_MAX",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"mean",value:"ALIGN_MEAN",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"count",value:"ALIGN_COUNT",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.BOOL],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"sum",value:"ALIGN_SUM",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"stddev",value:"ALIGN_STDDEV",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"count true",value:"ALIGN_COUNT_TRUE",valueTypes:[a.$h.BOOL],metricKinds:[a.lH.GAUGE]},{text:"count false",value:"ALIGN_COUNT_FALSE",valueTypes:[a.$h.BOOL],metricKinds:[a.lH.GAUGE]},{text:"fraction true",value:"ALIGN_FRACTION_TRUE",valueTypes:[a.$h.BOOL],metricKinds:[a.lH.GAUGE]},{text:"percentile 99",value:"ALIGN_PERCENTILE_99",valueTypes:[a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"percentile 95",value:"ALIGN_PERCENTILE_95",valueTypes:[a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"percentile 50",value:"ALIGN_PERCENTILE_50",valueTypes:[a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"percentile 05",value:"ALIGN_PERCENTILE_05",valueTypes:[a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"percent change",value:"ALIGN_PERCENT_CHANGE",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY],metricKinds:[a.lH.GAUGE,a.lH.DELTA]}]),c=[{text:"none",value:"REDUCE_NONE",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION,a.$h.BOOL,a.$h.STRING],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE,a.lH.METRIC_KIND_UNSPECIFIED]},{text:"mean",value:"REDUCE_MEAN",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE]},{text:"min",value:"REDUCE_MIN",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE,a.lH.METRIC_KIND_UNSPECIFIED]},{text:"max",value:"REDUCE_MAX",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE,a.lH.METRIC_KIND_UNSPECIFIED]},{text:"sum",value:"REDUCE_SUM",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE,a.lH.METRIC_KIND_UNSPECIFIED]},{text:"std. dev.",value:"REDUCE_STDDEV",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE,a.lH.METRIC_KIND_UNSPECIFIED]},{text:"count",value:"REDUCE_COUNT",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION,a.$h.BOOL,a.$h.STRING],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE]},{text:"count true",value:"REDUCE_COUNT_TRUE",valueTypes:[a.$h.BOOL],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"count false",value:"REDUCE_COUNT_FALSE",valueTypes:[a.$h.BOOL],metricKinds:[a.lH.GAUGE,a.lH.DELTA]},{text:"99th percentile",value:"REDUCE_PERCENTILE_99",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE]},{text:"95th percentile",value:"REDUCE_PERCENTILE_95",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE]},{text:"50th percentile",value:"REDUCE_PERCENTILE_50",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE]},{text:"5th percentile",value:"REDUCE_PERCENTILE_05",valueTypes:[a.$h.INT64,a.$h.DOUBLE,a.$h.MONEY,a.$h.DISTRIBUTION],metricKinds:[a.lH.GAUGE,a.lH.DELTA,a.lH.CUMULATIVE]}],d=[{text:"grafana auto",value:"grafana-auto"},{text:"stackdriver auto",value:"stackdriver-auto",hidden:!0},{text:"cloud monitoring auto",value:"cloud-monitoring-auto"},{text:"1m",value:"+60s"},{text:"2m",value:"+120s"},{text:"5m",value:"+300s"},{text:"10m",value:"+600s"},{text:"30m",value:"+1800s"},{text:"1h",value:"+3600s"},{text:"3h",value:"+7200s"},{text:"6h",value:"+21600s"},{text:"1d",value:"+86400s"},{text:"3d",value:"+259200s"},{text:"1w",value:"+604800s"}],u=["metadata.system_labels.cloud_account","metadata.system_labels.name","metadata.system_labels.region","metadata.system_labels.state","metadata.system_labels.instance_group","metadata.system_labels.node_name","metadata.system_labels.service_name","metadata.system_labels.top_level_controller_type","metadata.system_labels.top_level_controller_name","metadata.system_labels.container_image"],p=[{label:"SLI Value",value:"select_slo_health"},{label:"SLO Compliance",value:"select_slo_compliance"},{label:"SLO Error Budget Remaining",value:"select_slo_budget_fraction"}],h=[{label:"Metrics",value:a.xL.METRICS},{label:"Service Level Objectives (SLO)",value:a.xL.SLO}]},"./public/app/plugins/datasource/cloud-monitoring/functions.ts":(e,t,s)=>{"use strict";s.d(t,{qA:()=>l,Qf:()=>c,FL:()=>d,oU:()=>u,A_:()=>p,Qd:()=>h,ID:()=>g,gY:()=>m,mi:()=>f,Er:()=>b,Rn:()=>v});var a=s("./node_modules/lodash/lodash.js"),n=s("./public/app/plugins/datasource/cloud-monitoring/constants.ts"),i=s("./packages/grafana-runtime/src/index.ts"),r=s("./public/app/plugins/datasource/cloud-monitoring/types.ts");const o=(0,i.getTemplateSrv)(),l=e=>(0,a.uniqBy)(e,"service"),c=(e,t)=>e.filter((e=>e.service===t)),d=(e,t,s,a)=>{const n=c(e,a).map((e=>({value:e.type,name:e.displayName}))),i=n.some((e=>e.value===s)),r=n.length?n[0].value:"";return{metricTypes:n,selectedMetricType:i?t:r}},u=(e,t,s)=>(s&&s===r.mG.Rate&&(t=r.lH.GAUGE),e?n.Eu.filter((s=>-1!==s.valueTypes.indexOf(e)&&-1!==s.metricKinds.indexOf(t))):[]),p=(e,t)=>t?n.lx.filter((s=>-1!==s.valueTypes.indexOf(e)&&-1!==s.metricKinds.indexOf(t))):[],h=async(e,t,s)=>{const a=await e.getLabels(t,"handleLabelKeysQuery",s);return[...Object.keys(a),...n.$e]},g=(e=r.$h.DOUBLE,t=r.lH.GAUGE,s=r.CS.ALIGN_MEAN,a)=>{const n=u(e,t,a).map((e=>Object.assign({},e,{label:e.text})));return n.some((e=>e.value===o.replace(s)))||(s=n.length>0?n[0].value:r.CS.ALIGN_MEAN),{alignOptions:n,perSeriesAligner:s}},m=e=>{const t=e.reduce(((e,t)=>{const s=t.split(".").map(a.startCase),n=(2===s.length?s:(0,a.initial)(s)).join(" "),i={value:t,label:t};return e[n]?e[n]=[...e[n],i]:e[n]=[i],e}),{});return Object.entries(t).map((([e,t])=>({label:e,options:t,expanded:!0})),[])},f=e=>(0,a.chunk)(e,4).map((([e,t,s,a="AND"])=>({key:e,operator:t,value:s,condition:a}))),b=e=>({label:e,value:e}),v=e=>{var t;let s=null!==(t=e.statusText)&&void 0!==t?t:"";if(e.data&&e.data.error)try{const t=JSON.parse(e.data.error);s+=t.error.code+". "+t.error.message}catch(t){s+=e.data.error}else if(e.data&&e.data.message)try{s=JSON.parse(e.data.message).error.message}catch(t){e.error=t}return s}},"./public/app/plugins/datasource/cloud-monitoring/types.ts":(e,t,s)=>{"use strict";let a;s.d(t,{Gr:()=>a,CK:()=>n,Bp:()=>i,xL:()=>r,je:()=>o,mG:()=>l,lH:()=>c,$h:()=>d,CS:()=>u}),function(e){e.JWT="jwt",e.GCE="gce"}(a||(a={}));const n=[{label:"Google JWT File",value:a.JWT},{label:"GCE Default Service Account",value:a.GCE}];let i,r,o,l,c,d,u;!function(e){e.Projects="projects",e.Services="services",e.DefaultProject="defaultProject",e.MetricTypes="metricTypes",e.LabelKeys="labelKeys",e.LabelValues="labelValues",e.ResourceTypes="resourceTypes",e.Aggregations="aggregations",e.Aligners="aligners",e.AlignmentPeriods="alignmentPeriods",e.Selectors="selectors",e.SLOServices="sloServices",e.SLO="slo"}(i||(i={})),function(e){e.METRICS="metrics",e.SLO="slo"}(r||(r={})),function(e){e.Visual="visual",e.MQL="mql"}(o||(o={})),function(e){e.None="none",e.Rate="rate",e.Delta="delta"}(l||(l={})),function(e){e.METRIC_KIND_UNSPECIFIED="METRIC_KIND_UNSPECIFIED",e.GAUGE="GAUGE",e.DELTA="DELTA",e.CUMULATIVE="CUMULATIVE"}(c||(c={})),function(e){e.VALUE_TYPE_UNSPECIFIED="VALUE_TYPE_UNSPECIFIED",e.BOOL="BOOL",e.INT64="INT64",e.DOUBLE="DOUBLE",e.STRING="STRING",e.DISTRIBUTION="DISTRIBUTION",e.MONEY="MONEY"}(d||(d={})),function(e){e.ALIGN_DELTA="ALIGN_DELTA",e.ALIGN_RATE="ALIGN_RATE",e.ALIGN_INTERPOLATE="ALIGN_INTERPOLATE",e.ALIGN_NEXT_OLDER="ALIGN_NEXT_OLDER",e.ALIGN_MIN="ALIGN_MIN",e.ALIGN_MAX="ALIGN_MAX",e.ALIGN_MEAN="ALIGN_MEAN",e.ALIGN_COUNT="ALIGN_COUNT",e.ALIGN_SUM="ALIGN_SUM",e.ALIGN_STDDEV="ALIGN_STDDEV",e.ALIGN_COUNT_TRUE="ALIGN_COUNT_TRUE",e.ALIGN_COUNT_FALSE="ALIGN_COUNT_FALSE",e.ALIGN_FRACTION_TRUE="ALIGN_FRACTION_TRUE",e.ALIGN_PERCENTILE_99="ALIGN_PERCENTILE_99",e.ALIGN_PERCENTILE_95="ALIGN_PERCENTILE_95",e.ALIGN_PERCENTILE_50="ALIGN_PERCENTILE_50",e.ALIGN_PERCENTILE_05="ALIGN_PERCENTILE_05",e.ALIGN_PERCENT_CHANGE="ALIGN_PERCENT_CHANGE"}(u||(u={}))},"./public/app/plugins/datasource/cloudwatch/aws_url.ts":(e,t,s)=>{"use strict";s.d(t,{M:()=>n});const a=s("./node_modules/jsurl/index.js");function n(e,t){return`https://${t}.console.aws.amazon.com/cloudwatch/home?region=${t}#logs-insights:queryDetail=${a.stringify(e)}`}},"./public/app/plugins/datasource/cloudwatch/components/LogsQueryEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{b:()=>S,Z:()=>C});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/lodash/lodash.js"),r=s("./public/app/plugins/datasource/cloudwatch/syntax.ts"),o=s("./node_modules/prismjs/prism.js"),l=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),c=s("./public/app/store/store.ts"),d=s("./public/app/core/actions/index.ts"),u=s("./public/app/core/copy/appNotification.ts");const p=/\s+by\s+/im,h=/([\w$@().]+)(?:(\s+as\s+)([\w$]+))?\s*,?\s*/iy;function g(e){let t,s=[];if(t=e.match(p)){let a;for(h.lastIndex=t.index+t[0].length;a=h.exec(e);)s.push(a[2]?a[3]:a[1]),h.lastIndex=a.index+a[0].length}return s}var m=s("./node_modules/react/jsx-runtime.js");function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=l.css`
  flex-grow: 1;
  min-height: 35px;
`,v=l.css`
  gap: 3px;
`;class x extends a.PureComponent{constructor(e,t){var s,a;super(e,t),f(this,"state",{selectedLogGroups:null!==(s=null===(a=this.props.query.logGroupNames)||void 0===a?void 0:a.map((e=>({value:e,label:e}))))&&void 0!==s?s:[],availableLogGroups:[],regions:[],invalidLogGroups:!1,selectedRegion:this.props.query.region?{label:this.props.query.region,value:this.props.query.region,text:this.props.query.region}:{label:"default",value:"default",text:"default"},loadingLogGroups:!1,hint:void 0}),f(this,"plugins",void 0),f(this,"fetchLogGroupOptions",(async(e,t)=>{try{return(await this.props.datasource.describeLogGroups({refId:this.props.query.refId,region:e,logGroupNamePrefix:t})).map((e=>({value:e,label:e})))}catch(e){let t="unknown error";if("string"!=typeof e)try{t=JSON.stringify(e)}catch(e){}else t=e;return(0,c.WI)((0,d.$l)((0,u.t_)(t))),[]}})),f(this,"onLogGroupSearch",((e,t,s)=>{if("input-change"!==s.action)return Promise.resolve();return/^[\.\-_/#A-Za-z0-9]+$/.test(e)?(this.setState({loadingLogGroups:!0}),this.fetchLogGroupOptions(t,e).then((e=>{this.setState((t=>({availableLogGroups:(0,i.unionBy)(t.availableLogGroups,e,"value")})))})).finally((()=>{this.setState({loadingLogGroups:!1})}))):Promise.resolve()})),f(this,"onLogGroupSearchDebounced",(0,i.debounce)(this.onLogGroupSearch,300)),f(this,"componentDidMount",(()=>{const{datasource:e,query:t,onChange:s}=this.props;this.setState({loadingLogGroups:!0}),this.fetchLogGroupOptions(t.region).then((e=>{this.setState((a=>{const n=a.selectedLogGroups;if(s){const e=Object.assign({},t,{logGroupNames:n.map((e=>e.value))});s(e)}return{loadingLogGroups:!1,availableLogGroups:e,selectedLogGroups:n}}))})),e.getRegions().then((e=>{this.setState({regions:e})}))})),f(this,"onChangeQuery",(e=>{const{query:t,onChange:s}=this.props,{selectedLogGroups:a,selectedRegion:n}=this.state;if(s){var i,r;s(Object.assign({},t,{expression:e,logGroupNames:null!==(i=null==a?void 0:a.map((e=>e.value)))&&void 0!==i?i:[],region:null!==(r=n.value)&&void 0!==r?r:"default",statsGroups:g(e)}))}})),f(this,"setSelectedLogGroups",(e=>{var t;this.setState({selectedLogGroups:e});const{onChange:s,query:a}=this.props;null==s||s(Object.assign({},a,{logGroupNames:null!==(t=e.map((e=>e.value)))&&void 0!==t?t:[]}))})),f(this,"setCustomLogGroups",(e=>{const t={value:e,label:e},s=[...this.state.selectedLogGroups,t];this.setSelectedLogGroups(s)})),f(this,"setSelectedRegion",(async e=>{this.setState({selectedRegion:e,loadingLogGroups:!0});const t=await this.fetchLogGroupOptions(e.value);this.setState((s=>{const a=(0,i.intersectionBy)(s.selectedLogGroups,t,"value"),{onChange:n,query:r}=this.props;if(n){var o;n(Object.assign({},r,{region:null!==(o=e.value)&&void 0!==o?o:"default",logGroupNames:a.map((e=>e.value))}))}return{availableLogGroups:t,selectedLogGroups:a,loadingLogGroups:!1}}))})),f(this,"onTypeahead",(async e=>{const{datasource:t}=this.props,{selectedLogGroups:s}=this.state;if(!t.languageProvider)return{suggestions:[]};const a=t.languageProvider,{history:n,absoluteRange:i}=this.props,{prefix:r,text:o,value:l,wrapperClasses:c,labelKey:d,editor:u}=e;return await a.provideCompletionItems({text:o,value:l,prefix:r,wrapperClasses:c,labelKey:d,editor:u},{history:n,absoluteRange:i,logGroupNames:s.map((e=>e.value))})})),f(this,"onQueryFieldClick",((e,t,s)=>{const{selectedLogGroups:a,loadingLogGroups:n}=this.state;(n||0===a.length)&&this.setState({invalidLogGroups:!0}),s()})),f(this,"onOpenLogGroupMenu",(()=>{this.setState({invalidLogGroups:!1})})),this.plugins=[(0,n.BracesPlugin)(),(0,n.SlatePrism)({onlyIn:e=>"block"===e.object&&"code_block"===e.type,getSyntax:e=>"cloudwatch"},Object.assign({},o.languages,{cloudwatch:r.ZP}))]}render(){var e,t;const{ExtraFieldElement:s,data:a,query:r,datasource:o,allowCustomValue:l}=this.props,{selectedLogGroups:c,availableLogGroups:d,regions:u,selectedRegion:p,loadingLogGroups:h,hint:g,invalidLogGroups:f}=this.state,x=a&&a.error&&a.error.refId===r.refId,y=o.languageProvider?o.languageProvider.cleanText:void 0;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:`gf-form gf-form--grow flex-grow-1 ${v}`,children:[(0,m.jsx)(n.LegacyForms.FormField,{label:"Region",labelWidth:4,inputEl:(0,m.jsx)(n.Select,{menuShouldPortal:!0,options:u,value:p,onChange:e=>this.setSelectedRegion(e),width:18,placeholder:"Choose Region",maxMenuHeight:500})}),(0,m.jsx)(n.LegacyForms.FormField,{label:"Log Groups",labelWidth:6,className:"flex-grow-1",inputEl:(0,m.jsx)(n.MultiSelect,{menuShouldPortal:!0,allowCustomValue:l,options:(0,i.unionBy)(d,c,"value"),value:c,onChange:e=>{this.setSelectedLogGroups(e)},onCreateOption:e=>{this.setCustomLogGroups(e)},className:b,closeMenuOnSelect:!1,isClearable:!0,invalid:f,isOptionDisabled:()=>c.length>=20,placeholder:"Choose Log Groups",maxVisibleValues:4,noOptionsMessage:"No log groups available",isLoading:h,onOpenMenu:this.onOpenLogGroupMenu,onInputChange:(e,t)=>{var s;this.onLogGroupSearchDebounced(e,null!==(s=p.value)&&void 0!==s?s:"default",t)}})})]}),(0,m.jsxs)("div",{className:"gf-form-inline gf-form-inline--nowrap flex-grow-1",children:[(0,m.jsx)("div",{className:"gf-form gf-form--grow flex-shrink-1",children:(0,m.jsx)(n.QueryField,{additionalPlugins:this.plugins,query:null!==(e=r.expression)&&void 0!==e?e:"",onChange:this.onChangeQuery,onBlur:this.props.onBlur,onClick:this.onQueryFieldClick,onRunQuery:this.props.onRunQuery,onTypeahead:this.onTypeahead,cleanText:y,placeholder:"Enter a CloudWatch Logs Insights query (run with Shift+Enter)",portalOrigin:"cloudwatch",disabled:h||0===c.length})}),s]}),g&&(0,m.jsx)("div",{className:"query-row-break",children:(0,m.jsxs)("div",{className:"text-warning",children:[g.message,(0,m.jsx)("a",{className:"text-link muted",onClick:g.fix.action,children:g.fix.label})]})}),x?(0,m.jsx)("div",{className:"query-row-break",children:(0,m.jsx)("div",{className:"prom-query-field-info text-error",children:null==a||null===(t=a.error)||void 0===t?void 0:t.message})}):null]})}}var y,w=s("./public/app/plugins/datasource/cloudwatch/aws_url.ts");class j extends a.Component{constructor(...e){var t,s,a;super(...e),a={href:""},(s="state")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}async componentDidUpdate(e){const{panelData:t}=this.props,{panelData:s}=e;if(s!==t&&null!=t&&t.request){const e=this.getExternalLink();this.setState({href:e})}}getExternalLink(){var e,t,s;const{query:a,panelData:n,datasource:i}=this.props,r=null==n||null===(e=n.request)||void 0===e?void 0:e.range;if(!r)return"";const o=r.from.toISOString(),l={end:r.to.toISOString(),start:o,timeType:"ABSOLUTE",tz:"UTC",editorString:null!==(t=a.expression)&&void 0!==t?t:"",isLiveTail:!1,source:null!==(s=a.logGroupNames)&&void 0!==s?s:[]};return(0,w.M)(l,i.getActualRegion(a.region))}render(){const{href:e}=this.state;return(0,m.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:[y||(y=(0,m.jsx)(n.Icon,{name:"share-alt"}))," CloudWatch Logs Insights"]})}}const k=l.css`
  margin-left: 3px;
  flex-grow: 0;
`,S=(0,a.memo)((function(e){var t,s;const{query:a,data:i,datasource:r,onRunQuery:o,onChange:l,exploreId:c,allowCustomValue:d=!1}=e;let u;if(null!=i&&null!==(t=i.request)&&void 0!==t&&null!==(s=t.range)&&void 0!==s&&s.from){const{range:e}=i.request;u={from:e.from.valueOf(),to:e.to.valueOf()}}else u={from:Date.now()-1e4,to:Date.now()};return(0,m.jsx)(x,{exploreId:c,datasource:r,query:a,onBlur:()=>{},onChange:e=>l(Object.assign({},e,{queryMode:"Logs"})),onRunQuery:o,history:[],data:i,absoluteRange:u,allowCustomValue:d,ExtraFieldElement:(0,m.jsx)(n.InlineFormLabel,{className:`gf-form-label--btn ${k}`,width:"auto",tooltip:"Link to Graph in AWS",children:(0,m.jsx)(j,{query:a,panelData:i,datasource:r})})})})),C=S},"./public/app/plugins/datasource/cloudwatch/components/PanelQueryEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{S:()=>x});var a,n,i=s("./node_modules/react/index.js"),r=s("./node_modules/lodash/lodash.js"),o=s("./packages/grafana-data/src/index.ts"),l=s("./packages/grafana-ui/src/index.ts"),c=s("./public/app/plugins/datasource/cloudwatch/components/index.ts"),d=s("./node_modules/react/jsx-runtime.js");const u=["namespace","metricName","expression","dimensions","region","id","alias","statistic","period"];const{Input:p,Switch:h}=l.LegacyForms,g={[l.EventsWithValidation.onBlur]:[{rule:e=>new RegExp(/^$|^[a-z][a-zA-Z0-9_]*$/).test(e),errorMessage:"Invalid format. Only alphanumeric characters and underscores are allowed"}]},m=e=>{let{namespace:t,metricName:s,expression:a,dimensions:n,region:i,id:r,alias:o,statistic:l,period:c}=e,d=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,u);const p=Object.assign({namespace:t||"",metricName:s||"",expression:a||"",dimensions:n||{},region:i||"default",id:r||"",alias:o||"",statistic:null!=l?l:"Average",period:c||""},d);return d.hasOwnProperty("matchExact")?p:Object.assign({},p,{matchExact:!0})};class f extends i.PureComponent{constructor(...e){var t,s,a;super(...e),a={showMeta:!1},(s="state")in(t=this)?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}componentDidMount(){const e=this.props.query,t=m(e);this.props.onChange(t)}onChange(e){const{onChange:t,onRunQuery:s}=this.props;t(e),s()}getExecutedQueryPreview(e){var t,s;return null!=e&&e.series.length&&null!=e&&null!==(t=e.series[0].meta)&&void 0!==t&&t.custom?{executedQuery:null!==(s=null==e?void 0:e.series[0].meta.executedQueryString)&&void 0!==s?s:"",period:e.series[0].meta.custom.period,id:e.series[0].meta.custom.id}:{executedQuery:"",period:"",id:""}}render(){const{data:e,onRunQuery:t}=this.props,s=this.props.query,{showMeta:i}=this.state,r=m(s),o=this.getExecutedQueryPreview(e);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.RC,Object.assign({},Object.assign({},this.props,{query:r}))),(0,d.jsxs)("div",{className:"gf-form-inline",children:[(0,d.jsx)("div",{className:"gf-form",children:(0,d.jsx)(c.qj,{label:"Id",tooltip:"Id can include numbers, letters, and underscore, and must start with a lowercase letter.",children:(0,d.jsx)(p,{className:"gf-form-input width-8",onBlur:t,onChange:e=>this.onChange(Object.assign({},s,{id:e.target.value})),validationEvents:g,value:r.id})})}),(0,d.jsx)("div",{className:"gf-form gf-form--grow",children:(0,d.jsx)(c.qj,{className:"gf-form--grow",label:"Expression",tooltip:"Optionally you can add an expression here. Please note that if a math expression that is referencing other queries is being used, it will not be possible to create an alert rule based on this query",children:(0,d.jsx)(p,{className:"gf-form-input",onBlur:t,value:r.expression||"",onChange:e=>this.onChange(Object.assign({},s,{expression:e.target.value}))})})})]}),(0,d.jsxs)("div",{className:"gf-form-inline",children:[(0,d.jsx)("div",{className:"gf-form",children:(0,d.jsx)(c.qj,{label:"Period",tooltip:"Minimum interval between points in seconds",children:(0,d.jsx)(p,{className:"gf-form-input width-8",value:r.period||"",placeholder:"auto",onBlur:t,onChange:e=>this.onChange(Object.assign({},s,{period:e.target.value}))})})}),(0,d.jsxs)("div",{className:"gf-form",children:[(0,d.jsx)(c.qj,{label:"Alias",tooltip:"Alias replacement variables: {{metric}}, {{stat}}, {{namespace}}, {{region}}, {{period}}, {{label}}, {{YOUR_DIMENSION_NAME}}",children:(0,d.jsx)(c.V8,{value:s.alias,onChange:e=>this.onChange(Object.assign({},s,{alias:e}))})}),(0,d.jsx)(h,{label:"Match Exact",labelClass:"query-keyword",tooltip:"Only show metrics that exactly match all defined dimension names.",checked:s.matchExact,onChange:()=>this.onChange(Object.assign({},s,{matchExact:!s.matchExact}))}),(0,d.jsx)("label",{className:"gf-form-label",children:(0,d.jsxs)("a",{onClick:()=>o&&this.setState({showMeta:!i}),children:[(0,d.jsx)(l.Icon,{name:i?"angle-down":"angle-right"})," ",i?"Hide":"Show"," Query Preview"]})})]}),a||(a=(0,d.jsx)("div",{className:"gf-form gf-form--grow",children:(0,d.jsx)("div",{className:"gf-form-label gf-form-label--grow"})})),i&&(0,d.jsxs)("table",{className:"filter-table form-inline",children:[n||(n=(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Metric Data Query ID"}),(0,d.jsx)("th",{children:"Metric Data Query Expression"}),(0,d.jsx)("th",{children:"Period"}),(0,d.jsx)("th",{})]})})),(0,d.jsx)("tbody",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:o.id}),(0,d.jsx)("td",{children:o.executedQuery}),(0,d.jsx)("td",{children:o.period})]})})]})]})]})}}var b=s("./public/app/plugins/datasource/cloudwatch/components/LogsQueryEditor.tsx");const v={Metrics:{label:"CloudWatch Metrics",value:"Metrics"},Logs:{label:"CloudWatch Logs",value:"Logs"}};class x extends i.PureComponent{render(){var e;const{query:t}=this.props,s=null!==(e=t.queryMode)&&void 0!==e?e:"Metrics";return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.F4,{label:"Query Mode",children:(0,d.jsx)(l.Segment,{value:v[s],options:Object.values(v),onChange:({value:e})=>{var a;const n=null!==(a=e)&&void 0!==a?a:"Metrics";if(n!==v[s].value){const e=(0,r.pick)(t,"id","region","namespace","refId","hide","key","queryType","datasource");this.props.onChange(Object.assign({},e,{queryMode:n}))}}})}),s===o.ExploreMode.Logs?(0,d.jsx)(b.Z,Object.assign({},this.props,{allowCustomValue:!0})):(0,d.jsx)(f,Object.assign({},this.props))]})}}},"./public/app/plugins/datasource/cloudwatch/components/index.ts":(e,t,s)=>{"use strict";s.d(t,{V8:()=>v,Db:()=>h,RC:()=>y,SA:()=>w.S,qj:()=>m,F4:()=>f});var a,n,i,r=s("./node_modules/react/index.js"),o=s("./node_modules/lodash/lodash.js"),l=s("./packages/grafana-ui/src/index.ts"),c=s("./node_modules/react/jsx-runtime.js");function d(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const u="-- remove dimension --",p={label:u,value:u},h=({dimensions:e,loadValues:t,loadKeys:s,onChange:h})=>{const[g,m]=(0,r.useState)(e);(0,r.useEffect)((()=>{const t=Object.entries(g).reduce(((e,[t,s])=>s?Object.assign({},e,{[t]:s}):e),{});(0,o.isEqual)(t,e)||h(t)}),[g,e,h]);const f=e=>e.filter((({value:e})=>!Object.keys(g).includes(e)));return(0,c.jsxs)(c.Fragment,{children:[Object.entries(g).map((([e,i],o)=>(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(l.SegmentAsync,{allowCustomValue:!0,value:e,loadOptions:()=>s().then((e=>[p,...f(e)])),onChange:({value:t})=>{const s=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(g,[e].map(d));m(t===u?Object.assign({},s):Object.assign({},s,{[t]:""}))}}),a||(a=(0,c.jsx)("label",{className:"gf-form-label query-segment-operator",children:"="})),(0,c.jsx)(l.SegmentAsync,{allowCustomValue:!0,value:i,placeholder:"select dimension value",loadOptions:()=>t(e),onChange:({value:t})=>m(Object.assign({},g,{[e]:t}))}),Object.values(g).length>1&&o+1!==Object.values(g).length&&(n||(n=(0,c.jsx)("label",{className:"gf-form-label query-keyword",children:"AND"})))]},o))),Object.values(g).every((e=>e))&&(0,c.jsx)(l.SegmentAsync,{allowCustomValue:!0,Component:i||(i=(0,c.jsx)("a",{className:"gf-form-label query-part",children:(0,c.jsx)(l.Icon,{name:"plus"})})),loadOptions:()=>s().then(f),onChange:({value:e})=>m(Object.assign({},g,{[e]:""}))})]})};var g;const m=({label:e,tooltip:t,children:s})=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.InlineFormLabel,{width:8,className:"query-keyword",tooltip:t,children:e}),s]}),f=e=>{let t=Object.assign({},e);return(0,c.jsxs)("div",{className:"gf-form-inline",children:[(0,c.jsx)(m,Object.assign({},t)),g||(g=(0,c.jsx)("div",{className:"gf-form gf-form--grow",children:(0,c.jsx)("div",{className:"gf-form-label gf-form-label--grow"})}))]})},{Input:b}=l.LegacyForms,v=({value:e="",onChange:t})=>{const[s,a]=(0,r.useState)(e),n=(0,o.debounce)(t,1500);return t=e=>{a(e.target.value),n(e.target.value)},(0,c.jsx)(b,{type:"text",className:"gf-form-input width-16",value:s,onChange:t})};function x(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function y({query:e,datasource:t,onChange:s,onRunQuery:a=(()=>{})}){var n;const i=e,[o,d]=(0,r.useState)({regions:[],namespaces:[],metricNames:[],variableOptionGroup:{},showMeta:!1});(0,r.useEffect)((()=>{const e={label:"Template Variables",options:t.getVariables().map(p)};Promise.all([t.metricFindQuery("regions()"),t.metricFindQuery("namespaces()")]).then((([t,s])=>{d((a=>Object.assign({},a,{regions:[...t,e],namespaces:[...s,e],variableOptionGroup:e})))}))}),[t]);const u=e=>[...e,{label:"Template Variables",options:t.getVariables().map(p)}],p=e=>({label:e,value:e}),g=e=>{s(e),a()},{regions:m,namespaces:b,variableOptionGroup:v}=o;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(f,{label:"Region",children:(0,c.jsx)(l.Segment,{value:e.region,placeholder:"Select region",options:m,allowCustomValue:!0,onChange:({value:t})=>g(Object.assign({},e,{region:t}))})}),0===(null===(n=e.expression)||void 0===n?void 0:n.length)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(f,{label:"Namespace",children:(0,c.jsx)(l.Segment,{value:e.namespace,placeholder:"Select namespace",allowCustomValue:!0,options:b,onChange:({value:t})=>g(Object.assign({},e,{namespace:t}))})}),(0,c.jsx)(f,{label:"Metric Name",children:(0,c.jsx)(l.SegmentAsync,{value:i.metricName,placeholder:"Select metric name",allowCustomValue:!0,loadOptions:async()=>{const{namespace:s,region:a}=e;return t.metricFindQuery(`metrics(${s},${a})`).then(u)},onChange:({value:e})=>g(Object.assign({},i,{metricName:e}))})}),(0,c.jsx)(f,{label:"Statistic",children:(0,c.jsx)(l.Segment,{allowCustomValue:!0,value:e.statistic,options:[...t.standardStatistics.filter((t=>t!==e.statistic)).map(p),v],onChange:({value:e})=>{(t.standardStatistics.includes(e)||/^p\d{2}(?:\.\d{1,2})?$/.test(e)||e.startsWith("$"))&&g(Object.assign({},i,{statistic:e}))}})}),(0,c.jsx)(f,{label:"Dimensions",children:(0,c.jsx)(h,{dimensions:i.dimensions,onChange:e=>g(Object.assign({},i,{dimensions:e})),loadKeys:()=>t.getDimensionKeys(e.namespace,e.region).then(u),loadValues:s=>{const a=function(e,t){if(null==e)return{};var s,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(i.dimensions,[s].map(x)),n=Object.entries(a).reduce(((e,[t,s])=>"*"===s?e:Object.assign({},e,{[t]:s})),{});return t.getDimensionValues(e.region,e.namespace,i.metricName,s,n).then((e=>e.length?[{value:"*",text:"*",label:"*"},...e]:e)).then(u)}})})]})]})}var w=s("./public/app/plugins/datasource/cloudwatch/components/PanelQueryEditor.tsx");s("./public/app/plugins/datasource/cloudwatch/components/LogsQueryEditor.tsx")},"./public/app/plugins/datasource/cloudwatch/syntax.ts":(e,t,s)=>{"use strict";s.d(t,{lD:()=>a,OV:()=>n,Bn:()=>i,ae:()=>r,Ie:()=>o,aH:()=>l,QZ:()=>c,Ak:()=>u,ZP:()=>h});const a=[{label:"fields",documentation:"Retrieves the specified fields from log events"},{label:"display",documentation:"Specifies which fields to display in the query results"},{label:"filter",documentation:"Filters the results of a query based on one or more conditions"},{label:"stats",documentation:"Calculates aggregate statistics based on the values of log fields"},{label:"sort",documentation:"Sorts the retrieved log events"},{label:"limit",documentation:"Specifies the number of log events returned by the query"},{label:"parse",documentation:"Extracts data from a log field, creating one or more ephemeral fields that you can process further in the query"}],n=[{label:"abs",detail:"abs(a)",documentation:"Absolute value."},{label:"ceil",detail:"ceil(a)",documentation:"Round to ceiling (the smallest integer that is greater than the value of a)."},{label:"floor",detail:"floor(a)",documentation:"Round to floor (the largest integer that is smaller than the value of a)."},{label:"greatest",detail:"greatest(a,b, ... z)",documentation:"Returns the largest value."},{label:"least",detail:"least(a, b, ... z)",documentation:"Returns the smallest value."},{label:"log",detail:"log(a)",documentation:"Natural logarithm."},{label:"sqrt",detail:"sqrt(a)",documentation:"Square root."}],i=[{label:"isempty",detail:"isempty(fieldname)",documentation:"Returns true if the field is missing or is an empty string."},{label:"isblank",detail:"isblank(fieldname)",documentation:"Returns true if the field is missing, an empty string, or contains only white space."},{label:"concat",detail:"concat(string1, string2, ... stringz)",documentation:"Concatenates the strings."},{label:"ltrim",detail:"ltrim(string) or ltrim(string1, string2)",documentation:"Remove white space from the left of the string. If the function has a second string argument, it removes the characters of string2 from the left of string1."},{label:"rtrim",detail:"rtrim(string) or rtrim(string1, string2)",documentation:"Remove white space from the right of the string. If the function has a second string argument, it removes the characters of string2 from the right of string1."},{label:"trim",detail:"trim(string) or trim(string1, string2)",documentation:"Remove white space from both ends of the string. If the function has a second string argument, it removes the characters of string2 from both sides of string1."},{label:"strlen",detail:"strlen(string)",documentation:"Returns the length of the string in Unicode code points."},{label:"toupper",detail:"toupper(string)",documentation:"Converts the string to uppercase."},{label:"tolower",detail:"tolower(string)",documentation:"Converts the string to lowercase."},{label:"substr",detail:"substr(string1, x), or substr(string1, x, y)",documentation:"Returns a substring from the index specified by the number argument to the end of the string. If the function has a second number argument, it contains the length of the substring to be retrieved."},{label:"replace",detail:"replace(string1, string2, string3)",documentation:"Replaces all instances of string2 in string1 with string3."},{label:"strcontains",detail:"strcontains(string1, string2)",documentation:"Returns 1 if string1 contains string2 and 0 otherwise."}],r=[{label:"bin",detail:"bin(period)",documentation:"Rounds the value of @timestamp to the given period and then truncates."},{label:"datefloor",detail:"datefloor(a, period)",documentation:"Truncates the timestamp to the given period."},{label:"dateceil",detail:"dateceil(a, period)",documentation:"Rounds up the timestamp to the given period and then truncates."},{label:"fromMillis",detail:"fromMillis(fieldname)",documentation:"Interprets the input field as the number of milliseconds since the Unix epoch and converts it to a timestamp."},{label:"toMillis",detail:"toMillis(fieldname)",documentation:"Converts the timestamp found in the named field into a number representing the milliseconds since the Unix epoch."}],o=[{label:"isValidIp",detail:"isValidIp(fieldname)",documentation:"Returns true if the field is a valid v4 or v6 IP address."},{label:"isValidIpV4",detail:"isValidIpV4(fieldname)",documentation:"Returns true if the field is a valid v4 IP address."},{label:"isValidIpV6",detail:"isValidIpV6(fieldname)",documentation:"Returns true if the field is a valid v6 IP address."},{label:"isIpInSubnet",detail:"isIpInSubnet(fieldname, string)",documentation:"Returns true if the field is a valid v4 or v6 IP address within the specified v4 or v6 subnet."},{label:"isIpv4InSubnet",detail:"isIpv4InSubnet(fieldname, string)",documentation:"Returns true if the field is a valid v4 IP address within the specified v4 subnet."},{label:"isIpv6InSubnet",detail:"isIpv6InSubnet(fieldname, string)",documentation:"Returns true if the field is a valid v6 IP address within the specified v6 subnet."}],l=[{label:"ispresent",detail:"ispresent(fieldname)",documentation:"Returns true if the field exists."},{label:"isempty",detail:"isempty(fieldname)",documentation:"Returns true if the field is missing or is an empty string."},{label:"isblank",detail:"isblank(fieldname)",documentation:"Returns true if the field is missing, an empty string, or contains only white space."},{label:"strcontains",detail:"strcontains(string1, string2)",documentation:"Returns 1 if string1 contains string2 and 0 otherwise."},...o],c=[{label:"avg",detail:"avg(NumericFieldname)",documentation:"The average of the values in the specified field."},{label:"count",detail:"count(fieldname) or count(*)",documentation:"Counts the log records."},{label:"count_distinct",detail:"count_distinct(fieldname)",documentation:"Returns the number of unique values for the field."},{label:"max",detail:"max(fieldname)",documentation:"The maximum of the values for this log field in the queried logs."},{label:"min",detail:"min(fieldname)",documentation:"The minimum of the values for this log field in the queried logs."},{label:"pct",detail:"pct(fieldname, value)",documentation:"A percentile indicates the relative standing of a value in a datas."},{label:"stddev",detail:"stddev(NumericFieldname)",documentation:"The standard deviation of the values in the specified field."},{label:"sum",detail:"sum(NumericFieldname)",documentation:"The sum of the values in the specified field."}],d=[...c,{label:"earliest",detail:"earliest(fieldname)",documentation:"Returns the value of fieldName from the log event that has the earliest time stamp in the queried logs."},{label:"latest",detail:"latest(fieldname)",documentation:"Returns the value of fieldName from the log event that has the latest time stamp in the queried logs."},{label:"sortsFirst",detail:"sortsFirst(fieldname)",documentation:"Returns the value of fieldName that sorts first in the queried logs."},{label:"sortsLast",detail:"sortsLast(fieldname)",documentation:"Returns the value of fieldName that sorts last in the queried logs."}],u=[...n,{label:"ispresent",detail:"ispresent(fieldname)",documentation:"Returns true if the field exists."},{label:"coalesce",detail:"coalesce(fieldname1, fieldname2, ... fieldnamex)",documentation:"Returns the first non-null value from the list."},...i,...r,...o],p=[...u,...d],h={comment:{pattern:/^#.*/,greedy:!0},backticks:{pattern:/`.*?`/,alias:"string",greedy:!0},quote:{pattern:/".*?"/,alias:"string",greedy:!0},regex:{pattern:/\/.*?\/(?=\||\s*$|,)/,greedy:!0},"query-command":{pattern:new RegExp(`\\b(?:${a.map((e=>e.label)).join("|")})\\b`,"i"),alias:"function"},function:{pattern:new RegExp(`\\b(?:${p.map((e=>e.label)).join("|")})\\b`,"i")},keyword:{pattern:new RegExp(`(\\s+)(${["as","like","by","in","desc","asc"].join("|")})(?=\\s+)`,"i"),lookbehind:!0},"field-name":{pattern:/(@?[_a-zA-Z]+[_.0-9a-zA-Z]*)|(`((\\`)|([^`]))*?`)/,greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,"command-separator":{pattern:/\|/,alias:"punctuation"},"comparison-operator":{pattern:/([<>]=?)|(!?=)/},punctuation:/[{}()`,.]/,whitespace:/\s+/}},"./public/app/plugins/datasource/dashboard/index.ts":(e,t,s)=>{"use strict";s.d(t,{hD:()=>S,yl:()=>o,AK:()=>l});var a=s("./node_modules/rxjs/dist/esm5/internal/Observable.js");const n="-- Dashboard --";var i=s("./public/app/features/dashboard/services/DashboardSrv.ts"),r=s("./packages/grafana-data/src/index.ts");function o(e){if(!e)return!1;if(e===n)return!0;const t=e;return t.meta&&t.meta.name===n}function l(e){return new a.y((t=>{const s=(0,i.h4)().getCurrent(),a=function(e){if(!e||!e.length)return;return e[0].panelId}(e.queries);if(!a)return void t.next(c("Missing panel reference ID"));const n=null==s?void 0:s.getPanelById(a);if(!n)return void t.next(c("Unknown Panel: "+a));const r=n.getQueryRunner(),o=r.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:e=>{t.next(e)}});if(!n.isInView){const{datasource:t,targets:s}=n,i=Object.assign({},e,{datasource:t,panelId:a,queries:s});r.run(i)}return()=>{o.unsubscribe()}}))}function c(e){return{state:r.LoadingState.Error,series:[],request:{},error:{message:e},timeRange:(0,r.getDefaultTimeRange)()}}var d,u,p=s("./node_modules/react/index.js"),h=s("./packages/grafana-ui/src/index.ts"),g=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),m=s("./public/app/core/config.ts"),f=s("./public/app/features/plugins/datasource_srv.ts"),b=s("./public/app/features/query/components/QueryEditorRow.tsx"),v=s("./node_modules/react/jsx-runtime.js");function x({editURL:e,target:t}){const s=(0,h.useStyles)(y);return(0,v.jsxs)("div",{className:s.queryEditorRowHeader,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("img",{src:t.img,width:16,className:s.logo}),(0,v.jsx)("span",{children:`${t.refId}:`})]}),(0,v.jsx)("div",{children:(0,v.jsxs)("a",{href:e,children:[t.query," ",d||(d=(0,v.jsx)(h.Icon,{name:"external-link-alt"}))]})})]})}function y(e){return{logo:g.css`
      label: logo;
      margin-right: ${e.spacing.sm};
    `,queryEditorRowHeader:g.css`
      label: queryEditorRowHeader;
      display: flex;
      padding: 4px 8px;
      flex-flow: row wrap;
      background: ${e.colors.bg2};
      align-items: center;
    `}}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Select:j}=h.LegacyForms;function k(e){return JSON.stringify(e)}class S extends p.PureComponent{constructor(e){super(e),w(this,"onPanelChanged",(e=>{const t=this.getQuery();this.props.onChange([Object.assign({},t,{panelId:e})]),this.props.onRunQueries()})),w(this,"getPanelDescription",(e=>{const{defaultDatasource:t}=this.state,s=e.datasource?e.datasource:t;return 1===e.targets.length?"1 query to "+s:e.targets.length+" queries to "+s})),this.state={defaultDatasource:"",results:[]}}getQuery(){return this.props.queries[0]}async componentDidMount(){await this.updateState()}async componentDidUpdate(e){const{panelData:t,queries:s}=this.props;e.panelData===t&&e.queries===s||await this.updateState()}async updateState(){var e;const{panelData:t,queries:s}=this.props,a=s[0],n=await(0,f.ak)().get(),r=(0,i.h4)().getCurrent(),o=null==r?void 0:r.getPanelById(null!==(e=a.panelId)&&void 0!==e?e:-124134);if(!o)return void this.setState({defaultDatasource:n.name});const l=await(0,f.ak)().get(o.datasource),c=[];for(const e of o.targets){const s=e.datasource?await(0,f.ak)().get(e.datasource):l,a=s.getQueryDisplayText?s.getQueryDisplayText:k,n=(0,b.t)(t,e.refId),i=n||t;c.push({refId:e.refId,query:a(e),img:s.meta.info.logos.small,data:i.series,error:i.error})}this.setState({defaultDatasource:n.name,results:c})}renderQueryData(e){const{results:t}=this.state;return(0,v.jsx)(h.VerticalGroup,{spacing:"sm",children:t.map(((t,s)=>(0,v.jsx)(x,{editURL:e,target:t},`DashboardQueryRow-${s}`)))})}render(){const e=(0,i.h4)().getCurrent();if(!e)return null;const t=this.getQuery();let s;const a=[];for(const i of e.panels){const e=m.ZP.panels[i.type];if(e&&(i.targets&&i.datasource!==n)){const n={value:i.id,label:i.title?i.title:"Panel "+i.id,description:this.getPanelDescription(i),imgUrl:e.info.logos.small};a.push(n),t.panelId===i.id&&(s=n)}}if(a.length<1)return(0,v.jsx)("div",{className:(0,g.css)({padding:"10px"}),children:"This dashboard does not have other panels. Add queries to other panels and try again"});const r=`d/${e.uid}/${e.title}?&editPanel=${t.panelId}`;return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"gf-form",children:[u||(u=(0,v.jsx)("div",{className:"gf-form-label",children:"Use results from panel"})),(0,v.jsx)(j,{menuShouldPortal:!0,placeholder:"Choose Panel",isSearchable:!0,options:a,value:s,onChange:e=>this.onPanelChanged(e.value)})]}),(0,v.jsx)("div",{className:(0,g.css)({padding:"16px"}),children:t.panelId&&this.renderQueryData(r)})]})}}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/azureMetadata/index.ts":(e,t,s)=>{"use strict";s.d(t,{B$:()=>i,ur:()=>n,QK:()=>o,D8:()=>l});const a=[{location:"eastus",displayName:"East US",supportsLogs:!0},{location:"eastus2",displayName:"East US 2",supportsLogs:!0},{location:"southcentralus",displayName:"South Central US",supportsLogs:!0},{location:"westus2",displayName:"West US 2",supportsLogs:!0},{location:"westus3",displayName:"West US 3",supportsLogs:!0},{location:"australiaeast",displayName:"Australia East",supportsLogs:!0},{location:"southeastasia",displayName:"Southeast Asia",supportsLogs:!0},{location:"northeurope",displayName:"North Europe",supportsLogs:!0},{location:"uksouth",displayName:"UK South",supportsLogs:!0},{location:"westeurope",displayName:"West Europe",supportsLogs:!0},{location:"centralus",displayName:"Central US",supportsLogs:!0},{location:"northcentralus",displayName:"North Central US",supportsLogs:!0},{location:"westus",displayName:"West US",supportsLogs:!0},{location:"southafricanorth",displayName:"South Africa North",supportsLogs:!0},{location:"centralindia",displayName:"Central India",supportsLogs:!0},{location:"eastasia",displayName:"East Asia",supportsLogs:!0},{location:"japaneast",displayName:"Japan East",supportsLogs:!0},{location:"jioindiawest",displayName:"Jio India West",supportsLogs:!0},{location:"koreacentral",displayName:"Korea Central",supportsLogs:!0},{location:"canadacentral",displayName:"Canada Central",supportsLogs:!0},{location:"francecentral",displayName:"France Central",supportsLogs:!0},{location:"germanywestcentral",displayName:"Germany West Central",supportsLogs:!0},{location:"norwayeast",displayName:"Norway East",supportsLogs:!0},{location:"switzerlandnorth",displayName:"Switzerland North",supportsLogs:!0},{location:"uaenorth",displayName:"UAE North",supportsLogs:!0},{location:"brazilsouth",displayName:"Brazil South",supportsLogs:!0},{location:"centralusstage",displayName:"Central US (Stage)",supportsLogs:!0},{location:"eastusstage",displayName:"East US (Stage)",supportsLogs:!0},{location:"eastus2stage",displayName:"East US 2 (Stage)",supportsLogs:!0},{location:"northcentralusstage",displayName:"North Central US (Stage)",supportsLogs:!0},{location:"southcentralusstage",displayName:"South Central US (Stage)",supportsLogs:!0},{location:"westusstage",displayName:"West US (Stage)",supportsLogs:!0},{location:"westus2stage",displayName:"West US 2 (Stage)",supportsLogs:!0},{location:"asia",displayName:"Asia",supportsLogs:!0},{location:"asiapacific",displayName:"Asia Pacific",supportsLogs:!0},{location:"australia",displayName:"Australia",supportsLogs:!0},{location:"brazil",displayName:"Brazil",supportsLogs:!0},{location:"canada",displayName:"Canada",supportsLogs:!0},{location:"europe",displayName:"Europe",supportsLogs:!0},{location:"global",displayName:"Global",supportsLogs:!0},{location:"india",displayName:"India",supportsLogs:!0},{location:"japan",displayName:"Japan",supportsLogs:!0},{location:"uk",displayName:"United Kingdom",supportsLogs:!0},{location:"unitedstates",displayName:"United States",supportsLogs:!0},{location:"eastasiastage",displayName:"East Asia (Stage)",supportsLogs:!0},{location:"southeastasiastage",displayName:"Southeast Asia (Stage)",supportsLogs:!0},{location:"westcentralus",displayName:"West Central US",supportsLogs:!0},{location:"southafricawest",displayName:"South Africa West",supportsLogs:!0},{location:"australiacentral",displayName:"Australia Central",supportsLogs:!0},{location:"australiacentral2",displayName:"Australia Central 2",supportsLogs:!0},{location:"australiasoutheast",displayName:"Australia Southeast",supportsLogs:!0},{location:"japanwest",displayName:"Japan West",supportsLogs:!0},{location:"koreasouth",displayName:"Korea South",supportsLogs:!0},{location:"southindia",displayName:"South India",supportsLogs:!0},{location:"westindia",displayName:"West India",supportsLogs:!0},{location:"canadaeast",displayName:"Canada East",supportsLogs:!0},{location:"francesouth",displayName:"France South",supportsLogs:!0},{location:"germanynorth",displayName:"Germany North",supportsLogs:!0},{location:"norwaywest",displayName:"Norway West",supportsLogs:!0},{location:"switzerlandwest",displayName:"Switzerland West",supportsLogs:!0},{location:"ukwest",displayName:"UK West",supportsLogs:!0},{location:"uaecentral",displayName:"UAE Central",supportsLogs:!0},{location:"brazilsoutheast",displayName:"Brazil Southeast",supportsLogs:!0}],n=a.filter((e=>e.supportsLogs)).map((e=>`"${e.location}"`)).join(","),i=a.reduce(((e,t)=>Object.assign({},e,{[t.location]:t.displayName})),{}),r=[{resourceType:"microsoft.analysisservices/servers",displayName:"Analysis Services",supportsLogs:!0},{resourceType:"microsoft.synapse/workspaces/bigdatapools",displayName:"Apache Spark pool",supportsLogs:!0},{resourceType:"microsoft.apimanagement/service",displayName:"API Management service",supportsLogs:!0},{resourceType:"microsoft.appconfiguration/configurationstores",displayName:"App Configuration",supportsLogs:!0},{resourceType:"microsoft.web/sites/slots",displayName:"App Service (Slot)",supportsLogs:!0},{resourceType:"microsoft.web/hostingenvironments",displayName:"App Service Environment",supportsLogs:!0},{resourceType:"microsoft.web/serverfarms",displayName:"App Service plan",supportsLogs:!0},{resourceType:"microsoft.web/sites",displayName:"App Service",supportsLogs:!0},{resourceType:"microsoft.network/applicationgateways",displayName:"Application gateway",supportsLogs:!0},{resourceType:"microsoft.insights/components",displayName:"Application Insights",supportsLogs:!0},{resourceType:"microsoft.automation/automationaccounts",displayName:"Automation Account",supportsLogs:!0},{resourceType:"microsoft.insights/autoscalesettings",displayName:"Autoscale Settings",supportsLogs:!0},{resourceType:"microsoft.aadiam/azureadmetrics",displayName:"Azure AD Metrics",supportsLogs:!0},{resourceType:"microsoft.cache/redis",displayName:"Azure Cache for Redis",supportsLogs:!0},{resourceType:"microsoft.documentdb/databaseaccounts",displayName:"Azure Cosmos DB account",supportsLogs:!0},{resourceType:"microsoft.kusto/clusters",displayName:"Azure Data Explorer Cluster",supportsLogs:!0},{resourceType:"microsoft.dbformariadb/servers",displayName:"Azure Database for MariaDB server",supportsLogs:!0},{resourceType:"microsoft.dbformysql/servers",displayName:"Azure Database for MySQL server",supportsLogs:!0},{resourceType:"microsoft.dbforpostgresql/flexibleservers",displayName:"Azure Database for PostgreSQL flexible server",supportsLogs:!0},{resourceType:"microsoft.dbforpostgresql/servergroupsv2",displayName:"Azure Database for PostgreSQL server group",supportsLogs:!0},{resourceType:"microsoft.dbforpostgresql/servers",displayName:"Azure Database for PostgreSQL server",supportsLogs:!0},{resourceType:"microsoft.dbforpostgresql/serversv2",displayName:"Azure Database for PostgreSQL server v2",supportsLogs:!0},{resourceType:"microsoft.resources/subscriptions",displayName:"Subscription",supportsLogs:!0},{resourceType:"microsoft.appplatform/spring",displayName:"Azure Spring Cloud",supportsLogs:!0},{resourceType:"microsoft.databoxedge/databoxedgedevices",displayName:"Azure Stack Edge / Data Box Gateway",supportsLogs:!0},{resourceType:"microsoft.azurestackresourcemonitor/storageaccountmonitor",displayName:"Azure Stack Resource Monitor",supportsLogs:!0},{resourceType:"microsoft.synapse/workspaces",displayName:"Synapse workspace",supportsLogs:!0},{resourceType:"microsoft.network/bastionhosts",displayName:"Bastion",supportsLogs:!0},{resourceType:"microsoft.batch/batchaccounts",displayName:"Batch account",supportsLogs:!0},{resourceType:"microsoft.botservice/botservices",displayName:"Bot Service",supportsLogs:!0},{resourceType:"microsoft.netapp/netappaccounts/capacitypools",displayName:"Capacity pool",supportsLogs:!0},{resourceType:"microsoft.classiccompute/domainnames",displayName:"Cloud service (classic)",supportsLogs:!0},{resourceType:"microsoft.vmwarecloudsimple/virtualmachines",displayName:"CloudSimple Virtual Machine",supportsLogs:!0},{resourceType:"microsoft.cognitiveservices/accounts",displayName:"Cognitive Services",supportsLogs:!0},{resourceType:"microsoft.network/networkwatchers/connectionmonitors",displayName:"Connection Monitors",supportsLogs:!0},{resourceType:"microsoft.network/connections",displayName:"Connection",supportsLogs:!0},{resourceType:"microsoft.containerinstance/containergroups",displayName:"Container instances",supportsLogs:!0},{resourceType:"microsoft.containerregistry/registries",displayName:"Container registry",supportsLogs:!0},{resourceType:"microsoft.insights/qos",displayName:"Custom Metric Usage",supportsLogs:!0},{resourceType:"microsoft.customerinsights/hubs",displayName:"CustomerInsights",supportsLogs:!0},{resourceType:"microsoft.datafactory/datafactories",displayName:"Data factory",supportsLogs:!0},{resourceType:"microsoft.datafactory/factories",displayName:"Data factory (V2)",supportsLogs:!0},{resourceType:"microsoft.datalakeanalytics/accounts",displayName:"Data Lake Analytics",supportsLogs:!0},{resourceType:"microsoft.datalakestore/accounts",displayName:"Data Lake Storage Gen1",supportsLogs:!0},{resourceType:"microsoft.datashare/accounts",displayName:"Data Share",supportsLogs:!0},{resourceType:"microsoft.synapse/workspaces/sqlpools",displayName:"Dedicated SQL pool",supportsLogs:!0},{resourceType:"microsoft.devices/provisioningservices",displayName:"Device Provisioning Service",supportsLogs:!0},{resourceType:"microsoft.compute/disks",displayName:"Disk",supportsLogs:!0},{resourceType:"microsoft.network/dnszones",displayName:"DNS zone",supportsLogs:!0},{resourceType:"microsoft.eventgrid/domains",displayName:"Event Grid Domain",supportsLogs:!0},{resourceType:"microsoft.eventgrid/systemtopics",displayName:"Event Grid System Topic",supportsLogs:!0},{resourceType:"microsoft.eventgrid/topics",displayName:"Event Grid Topic",supportsLogs:!0},{resourceType:"microsoft.eventhub/clusters",displayName:"Event Hubs Cluster",supportsLogs:!0},{resourceType:"microsoft.eventhub/namespaces",displayName:"Event Hubs Namespace",supportsLogs:!0},{resourceType:"microsoft.network/expressroutecircuits",displayName:"ExpressRoute circuit",supportsLogs:!0},{resourceType:"microsoft.network/expressrouteports",displayName:"ExpressRoute Direct",supportsLogs:!0},{resourceType:"microsoft.network/expressroutegateways",displayName:"ExpressRoute Gateways",supportsLogs:!0},{resourceType:"microsoft.fabric.admin/fabriclocations",displayName:"Fabric Locations",supportsLogs:!0},{resourceType:"microsoft.network/azurefirewalls",displayName:"Firewall",supportsLogs:!0},{resourceType:"microsoft.network/frontdoors",displayName:"Front Door",supportsLogs:!0},{resourceType:"microsoft.hdinsight/clusters",displayName:"HDInsight cluster",supportsLogs:!0},{resourceType:"microsoft.storagecache/caches",displayName:"HPC cache",supportsLogs:!0},{resourceType:"microsoft.logic/integrationserviceenvironments",displayName:"Integration Service Environment",supportsLogs:!0},{resourceType:"microsoft.iotcentral/iotapps",displayName:"IoT Central Application",supportsLogs:!0},{resourceType:"microsoft.devices/iothubs",displayName:"IoT Hub",supportsLogs:!0},{resourceType:"microsoft.keyvault/vaults",displayName:"Key vault",supportsLogs:!0},{resourceType:"microsoft.kubernetes/connectedclusters",displayName:"Kubernetes - Azure Arc",supportsLogs:!0},{resourceType:"microsoft.containerservice/managedclusters",displayName:"Kubernetes service",supportsLogs:!0},{resourceType:"microsoft.media/mediaservices/liveevents",displayName:"Live event",supportsLogs:!0},{resourceType:"microsoft.network/loadbalancers",displayName:"Load balancer",supportsLogs:!0},{resourceType:"microsoft.operationalinsights/workspaces",displayName:"Log Analytics workspace",supportsLogs:!0},{resourceType:"microsoft.logic/workflows",displayName:"Logic app",supportsLogs:!0},{resourceType:"microsoft.machinelearningservices/workspaces",displayName:"Machine learning",supportsLogs:!0},{resourceType:"microsoft.media/mediaservices",displayName:"Media service",supportsLogs:!0},{resourceType:"microsoft.network/natgateways",displayName:"NAT gateway",supportsLogs:!0},{resourceType:"microsoft.network/networkinterfaces",displayName:"Network interface",supportsLogs:!0},{resourceType:"microsoft.network/networkvirtualappliances",displayName:"Network Virtual Appliances",supportsLogs:!0},{resourceType:"microsoft.network/networkwatchers",displayName:"Network Watcher",supportsLogs:!0},{resourceType:"microsoft.notificationhubs/namespaces/notificationhubs",displayName:"Notification Hub",supportsLogs:!0},{resourceType:"microsoft.network/p2svpngateways",displayName:"P2S VPN Gateways",supportsLogs:!0},{resourceType:"microsoft.peering/peeringservices",displayName:"Peering Service",supportsLogs:!0},{resourceType:"microsoft.powerbidedicated/capacities",displayName:"Power BI Embedded",supportsLogs:!0},{resourceType:"microsoft.network/privateendpoints",displayName:"Private endpoint",supportsLogs:!0},{resourceType:"microsoft.network/privatelinkservices",displayName:"Private link service",supportsLogs:!0},{resourceType:"microsoft.network/publicipaddresses",displayName:"Public IP address",supportsLogs:!0},{resourceType:"microsoft.cache/redisenterprise",displayName:"Redis Enterprise",supportsLogs:!0},{resourceType:"microsoft.relay/namespaces",displayName:"Relay",supportsLogs:!0},{resourceType:"microsoft.synapse/workspaces/scopepools",displayName:"Scope pool",supportsLogs:!0},{resourceType:"microsoft.search/searchservices",displayName:"Search service",supportsLogs:!0},{resourceType:"microsoft.servicebus/namespaces",displayName:"Service Bus Namespace",supportsLogs:!0},{resourceType:"microsoft.signalrservice/signalr",displayName:"SignalR",supportsLogs:!0},{resourceType:"microsoft.operationsmanagement/solutions",displayName:"Solution",supportsLogs:!0},{resourceType:"microsoft.sql/servers/databases",displayName:"SQL database",supportsLogs:!0},{resourceType:"microsoft.sql/servers/elasticpools",displayName:"SQL elastic pool",supportsLogs:!0},{resourceType:"microsoft.sql/managedinstances",displayName:"SQL managed instance",supportsLogs:!0},{resourceType:"microsoft.storage/storageaccounts",displayName:"Storage account",supportsLogs:!0},{resourceType:"microsoft.classicstorage/storageaccounts",displayName:"Storage account (classic)",supportsLogs:!0},{resourceType:"microsoft.storagesync/storagesyncservices",displayName:"Storage Sync Service",supportsLogs:!0},{resourceType:"microsoft.streamanalytics/streamingjobs",displayName:"Stream Analytics job",supportsLogs:!0},{resourceType:"microsoft.media/mediaservices/streamingendpoints",displayName:"Streaming Endpoint",supportsLogs:!0},{resourceType:"microsoft.timeseriesinsights/environments",displayName:"Time Series Insights environment",supportsLogs:!0},{resourceType:"microsoft.network/trafficmanagerprofiles",displayName:"Traffic Manager profile",supportsLogs:!0},{resourceType:"microsoft.compute/virtualmachinescalesets",displayName:"Virtual machine scale set",supportsLogs:!0},{resourceType:"microsoft.compute/virtualmachines",displayName:"Virtual machine",supportsLogs:!0},{resourceType:"microsoft.classiccompute/virtualmachines",displayName:"Virtual machine (classic)",supportsLogs:!0},{resourceType:"microsoft.network/virtualnetworkgateways",displayName:"Virtual network gateway",supportsLogs:!0},{resourceType:"microsoft.netapp/netappaccounts/capacitypools/volumes",displayName:"Volume",supportsLogs:!0},{resourceType:"microsoft.network/vpngateways",displayName:"VPN Gateways",supportsLogs:!0},{resourceType:"microsoft.cdn/cdnwebapplicationfirewallpolicies",displayName:"Content Delivery Network WAF policy",supportsLogs:!0},{resourceType:"microsoft.web/hostingenvironments/workerpools",displayName:"WorkerPools",supportsLogs:!0}],o=r.filter((e=>e.supportsLogs)).map((e=>`"${e.resourceType}"`)).join(","),l=r.reduce(((e,t)=>Object.assign({},e,{[t.resourceType]:t.displayName})),{})},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/LogsQueryEditor/setQueryValue.ts":(e,t,s)=>{"use strict";function a(e,t){return Object.assign({},e,{azureLogAnalytics:Object.assign({},e.azureLogAnalytics,{query:t})})}function n(e,t){return Object.assign({},e,{azureLogAnalytics:Object.assign({},e.azureLogAnalytics,{resultFormat:t})})}function i(e,t){return Object.assign({},e,{azureLogAnalytics:Object.assign({},e.azureLogAnalytics,{resource:t})})}s.d(t,{J3:()=>a,d5:()=>n,DF:()=>i})},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/MetricsQueryEditor/setQueryValue.ts":(e,t,s)=>{"use strict";function a(e,t){return e.subscription===t?e:Object.assign({},e,{subscription:t,azureMonitor:Object.assign({},e.azureMonitor,{resourceGroup:void 0})})}function n(e,t){var s;return(null===(s=e.azureMonitor)||void 0===s?void 0:s.resourceGroup)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{resourceGroup:t,resourceName:void 0})})}function i(e,t){var s;if((null===(s=e.azureMonitor)||void 0===s?void 0:s.metricDefinition)===t)return e;return Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{metricDefinition:t,resourceName:void 0,metricNamespace:void 0,metricName:void 0})})}function r(e,t){var s;return(null===(s=e.azureMonitor)||void 0===s?void 0:s.resourceName)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{resourceName:t})})}function o(e,t){var s;return(null===(s=e.azureMonitor)||void 0===s?void 0:s.metricNamespace)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{metricNamespace:t,metricName:void 0})})}function l(e,t){var s;return(null===(s=e.azureMonitor)||void 0===s?void 0:s.metricName)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{metricName:t})})}function c(e,t){var s;return(null===(s=e.azureMonitor)||void 0===s?void 0:s.aggregation)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{aggregation:t})})}function d(e,t){var s;return(null===(s=e.azureMonitor)||void 0===s?void 0:s.timeGrain)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{timeGrain:t})})}function u(e,t){var s;return(null===(s=e.azureMonitor)||void 0===s?void 0:s.dimensionFilters)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{dimensionFilters:t})})}function p(e,t="",s="eq",a=""){var n,i;return u(e,[...null!==(n=null===(i=e.azureMonitor)||void 0===i?void 0:i.dimensionFilters)&&void 0!==n?n:[],{dimension:t,operator:s,filter:a}])}function h(e,t){var s,a;const n=[...null!==(s=null===(a=e.azureMonitor)||void 0===a?void 0:a.dimensionFilters)&&void 0!==s?s:[]];return n.splice(t,1),u(e,n)}function g(e,t,s,a){var n,i;const r=[...null!==(n=null===(i=e.azureMonitor)||void 0===i?void 0:i.dimensionFilters)&&void 0!==n?n:[]];return r[t][s]=a,u(e,r)}function m(e,t){var s;return(null===(s=e.azureMonitor)||void 0===s?void 0:s.top)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{top:t})})}function f(e,t){var s;return(null===(s=e.azureMonitor)||void 0===s?void 0:s.alias)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{alias:t})})}s.d(t,{Ad:()=>a,b2:()=>n,b3:()=>i,R3:()=>r,In:()=>o,Wp:()=>l,pt:()=>c,zB:()=>d,d2:()=>p,do:()=>h,QC:()=>g,y1:()=>m,hd:()=>f})},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/QueryEditor/QueryEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>Ue});var a=s("./packages/grafana-ui/src/index.ts"),n=s("./node_modules/react/index.js"),i=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/types/index.ts"),r=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/common.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=e=>(0,o.jsx)(a.InlineField,Object.assign({labelWidth:18},e)),c=({query:e,subscriptions:t,variableOptionGroup:s,onQueryChange:c,multiSelect:d=!1})=>{const u=(0,n.useCallback)((t=>{if(!t.value)return;let s=Object.assign({},e,{subscription:t.value});e.queryType===i.B.AzureMonitor&&(s.azureMonitor=Object.assign({},s.azureMonitor,{resourceGroup:void 0,metricDefinition:void 0,metricNamespace:void 0,resourceName:void 0,metricName:void 0,aggregation:void 0,timeGrain:"",dimensionFilters:[]})),c(s)}),[e,c]),p=(0,n.useCallback)((t=>{t&&(e.subscriptions=t.map((e=>{var t;return null!==(t=e.value)&&void 0!==t?t:""})),c(e))}),[e,c]),h=(0,n.useMemo)((()=>[...t,s]),[t,s]);return d?(0,o.jsx)(l,{label:"Subscriptions",children:(0,o.jsx)(a.MultiSelect,{menuShouldPortal:!0,isClearable:!0,value:(0,r.b9)([...t,...s.options],e.subscriptions),inputId:"azure-monitor-subscriptions-field",onChange:p,options:h,width:38})}):(0,o.jsx)(l,{label:"Subscription",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,value:e.subscription,inputId:"azure-monitor-subscriptions-field",onChange:u,options:h,width:38})})};var d=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/MetricsQueryEditor/setQueryValue.ts");const u=({metricNamespaces:e,query:t,variableOptionGroup:s,onQueryChange:i})=>{var r;const c=(0,n.useCallback)((e=>{if(!e.value)return;const s=(0,d.In)(t,e.value);i(s)}),[i,t]),u=(0,n.useMemo)((()=>[...e,s]),[e,s]);return(0,o.jsx)(l,{label:"Metric namespace",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-metric-namespace-field",value:null===(r=t.azureMonitor)||void 0===r?void 0:r.metricNamespace,onChange:c,options:u,width:38})})},p=({resourceTypes:e,query:t,variableOptionGroup:s,onQueryChange:i})=>{var r;const c=(0,n.useCallback)((e=>{if(!e.value)return;const s=(0,d.b3)(t,e.value);i(s)}),[i,t]),u=(0,n.useMemo)((()=>[...e,s]),[e,s]);return(0,o.jsx)(l,{label:"Resource type",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-resource-type-field",value:null===(r=t.azureMonitor)||void 0===r?void 0:r.metricDefinition,onChange:c,options:u,width:38})})},h=({query:e,resourceGroups:t,variableOptionGroup:s,onQueryChange:i,setError:r})=>{var c;const u=(0,n.useCallback)((t=>{const s=(0,d.b2)(e,t.value);i(s)}),[i,e]),p=(0,n.useMemo)((()=>[...t,s]),[t,s]);return(0,o.jsx)(l,{label:"Resource group",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-resource-group-field",value:null===(c=e.azureMonitor)||void 0===c?void 0:c.resourceGroup,onChange:u,options:p,width:38})})},g=({resourceNames:e,query:t,variableOptionGroup:s,onQueryChange:i})=>{var r,c;const u=(0,n.useCallback)((e=>{const s=(0,d.R3)(t,e.value);i(s)}),[i,t]),p=(0,n.useMemo)((()=>[...e,s]),[e,s]),h=null!==(r=null===(c=t.azureMonitor)||void 0===c?void 0:c.resourceName)&&void 0!==r?r:null;return(0,o.jsx)(l,{label:"Resource name",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-resource-name-field",value:h,onChange:u,options:p,width:38})})},m=({metricNames:e,query:t,variableOptionGroup:s,onQueryChange:i})=>{var r,c;const u=(0,n.useCallback)((e=>{if(!e.value)return;const s=(0,d.Wp)(t,e.value);i(s)}),[i,t]),p=(0,n.useMemo)((()=>[...e,s]),[e,s]);return(0,o.jsx)(l,{label:"Metric",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-metric-field",value:null!==(r=null===(c=t.azureMonitor)||void 0===c?void 0:c.metricName)&&void 0!==r?r:null,onChange:u,options:p,width:38})})},f=({query:e,variableOptionGroup:t,onQueryChange:s,aggregationOptions:i,isLoading:r})=>{var c;const u=(0,n.useCallback)((t=>{if(!t.value)return;const a=(0,d.pt)(e,t.value);s(a)}),[s,e]),p=(0,n.useMemo)((()=>[...i,t]),[i,t]);return(0,o.jsx)(l,{label:"Aggregation",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-aggregation-field",value:null===(c=e.azureMonitor)||void 0===c?void 0:c.aggregation,onChange:u,options:p,width:38,isLoading:r})})};var b=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/time_grain_converter.ts");const v=({query:e,timeGrainOptions:t,variableOptionGroup:s,onQueryChange:i})=>{var r;const c=(0,n.useCallback)((t=>{if(!t.value)return;const s=(0,d.zB)(e,t.value);i(s)}),[i,e]),u=(0,n.useMemo)((()=>{const e=b.Z.findClosestTimeGrain("1m",t.map((e=>b.Z.createKbnUnitFromISO8601Duration(e.value)))||["1m","5m","15m","30m","1h","6h","12h","1d"]);return[...t.map((t=>"auto"===t.value?Object.assign({},t,{description:e}):t)),s]}),[t,s]);return(0,o.jsx)(l,{label:"Time grain",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-time-grain-field",value:null===(r=e.azureMonitor)||void 0===r?void 0:r.timeGrain,onChange:c,options:u,width:38})})};var x;const y=({query:e,dimensionOptions:t,onQueryChange:s})=>{var i;const r=(0,n.useMemo)((()=>{var t,s;return null!==(t=null===(s=e.azureMonitor)||void 0===s?void 0:s.dimensionFilters)&&void 0!==t?t:[]}),[null===(i=e.azureMonitor)||void 0===i?void 0:i.dimensionFilters]),c=(t,a,n)=>{s((0,d.QC)(e,t,a,n))};return(0,o.jsx)(l,{label:"Dimension",children:(0,o.jsxs)(a.VerticalGroup,{spacing:"xs",children:[r.map(((n,i)=>(0,o.jsxs)(a.HorizontalGroup,{spacing:"xs",children:[(0,o.jsx)(a.Select,{menuShouldPortal:!0,placeholder:"Field",value:n.dimension,options:t,onChange:e=>{var t;return c(i,"dimension",null!==(t=e.value)&&void 0!==t?t:"")},width:38}),x||(x=(0,o.jsx)(a.InlineLabel,{"aria-label":"equals",children:"=="})),(0,o.jsx)(a.Input,{placeholder:"",value:n.filter,onChange:e=>((e,t)=>{t.target instanceof HTMLInputElement&&c(e,"filter",t.target.value)})(i,e)}),(0,o.jsx)(a.Button,{variant:"secondary",size:"md",icon:"trash-alt","aria-label":"Remove",onClick:()=>(t=>{s((0,d.do)(e,t))})(i)})]},i))),(0,o.jsx)(a.Button,{variant:"secondary",size:"md",onClick:()=>{s((0,d.d2)(e))},children:"Add new dimension"})]})})},w=({onQueryChange:e,query:t})=>{var s,i;const[r,c]=(0,n.useState)(null!==(s=null===(i=t.azureMonitor)||void 0===i?void 0:i.top)&&void 0!==s?s:""),u=(0,n.useCallback)((e=>{e.target instanceof HTMLInputElement&&c(e.target.value)}),[]),p=(0,n.useCallback)((()=>{const s=(0,d.y1)(t,r);e(s)}),[e,t,r]);return(0,o.jsx)(l,{label:"Top",children:(0,o.jsx)(a.Input,{id:"azure-monitor-metrics-top-field",value:r,onChange:u,onBlur:p,width:16})})},j=({onQueryChange:e,query:t})=>{var s,i;const[r,c]=(0,n.useState)(null!==(s=null===(i=t.azureMonitor)||void 0===i?void 0:i.alias)&&void 0!==s?s:""),u=(0,n.useCallback)((e=>{e.target instanceof HTMLInputElement&&c(e.target.value)}),[]),p=(0,n.useCallback)((()=>{const s=(0,d.hd)(t,r);e(s)}),[e,t,r]);return(0,o.jsx)(l,{label:"Legend format",children:(0,o.jsx)(a.Input,{id:"azure-monitor-metrics-legend-field",placeholder:"Alias patterns",value:r,onChange:u,onBlur:p,width:38})})};function k(e,t,s){const[a]=(0,n.useState)((()=>Math.random())),[i,r]=(0,n.useState)(),o=(0,n.useMemo)((()=>null!=i?i:[]),[i]);return(0,n.useEffect)((()=>{e().then((e=>{r(e),t(a,void 0)})).catch((e=>{t(a,e)}))}),s),o}function S(e,t,s){return e&&!s.includes(e)&&!(0,r.Gq)(t,e)}const C=({query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onChange:l,setError:b})=>{var x,C,T;const N=((e,t,s)=>{var a;const[i,r]=(0,n.useState)({aggOptions:[],timeGrains:[],dimensions:[],isLoading:!1,supportedAggTypes:[],primaryAggType:void 0}),{subscription:o}=e,{resourceGroup:l,metricDefinition:c,resourceName:d,metricNamespace:u,metricName:p,aggregation:h,timeGrain:g}=null!==(a=e.azureMonitor)&&void 0!==a?a:{};return(0,n.useEffect)((()=>{o&&l&&c&&d&&u&&p&&t.getMetricMetadata(o,l,c,d,u,p).then((e=>{var t;const s=(e.supportedAggTypes||[e.primaryAggType]).map((e=>({label:e,value:e})));r({aggOptions:s,timeGrains:e.supportedTimeGrains,dimensions:e.dimensions,isLoading:!1,supportedAggTypes:null!==(t=e.supportedAggTypes)&&void 0!==t?t:[],primaryAggType:e.primaryAggType})}))}),[t,o,l,c,d,u,p]),(0,n.useEffect)((()=>{const t=h&&i.supportedAggTypes.includes(h)?h:i.primaryAggType,a=g||"auto";t===h&&a===g||s(Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{aggregation:t,timeGrain:a})}))}),[s,i,h,g,e]),i})(e,t,l),O=((e,t,s,a)=>{const{subscription:i}=e,o=t.azureMonitorDatasource.defaultSubscriptionId,l=k((async()=>(await t.azureMonitorDatasource.getSubscriptions()).map((e=>({label:e.text,value:e.value,description:e.value})))),a,[]);return(0,n.useEffect)((()=>{if(!l.length||i&&(0,r.Gq)(l,i))return;const t=o||l[0].value;!i&&t&&(0,r.Gq)(l,t)&&s((0,d.Ad)(e,t))}),[l,e,i,o,s]),l})(e,t,l,b),I=((e,t,s,a)=>{var n;const{subscription:i}=e,{resourceGroup:o}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return k((async()=>{if(!i)return;const a=(await t.getResourceGroups(i)).map(r.Er);return S(o,a,t.getVariables())&&s((0,d.b2)(e,void 0)),a}),a,[i])})(e,t,l,b),P=((e,t,s,a)=>{var n;const{subscription:i}=e,{resourceGroup:o,metricDefinition:l}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return k((async()=>{if(!i||!o)return;const a=(await t.getMetricDefinitions(i,o)).map(r.Er);return S(l,a,t.getVariables())&&s((0,d.b3)(e,void 0)),a}),a,[i,o])})(e,t,l,b),M=((e,t,s,a)=>{var n;const{subscription:i}=e,{resourceGroup:o,metricDefinition:l,resourceName:c}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return k((async()=>{if(!(i&&o&&l))return;const a=(await t.getResourceNames(i,o,l)).map(r.Er);return S(c,a,t.getVariables())&&s((0,d.R3)(e,void 0)),a}),a,[i,o,l])})(e,t,l,b),F=((e,t,s,a)=>{var n;const{subscription:i}=e,{resourceGroup:o,metricDefinition:l,resourceName:c,metricNamespace:u,metricName:p}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return k((async()=>{if(!(i&&o&&l&&c&&u))return;const a=(await t.getMetricNames(i,o,l,c,u)).map(r.Er);return S(p,a,t.getVariables())&&s((0,d.Wp)(e,void 0)),a}),a,[i,o,l,c,u])})(e,t,l,b),A=((e,t,s,a)=>{var n;const{subscription:i}=e,{resourceGroup:o,metricDefinition:l,resourceName:c,metricNamespace:u}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return k((async()=>{if(!(i&&o&&l&&c))return;const a=(await t.getMetricNamespaces(i,o,l,c)).map(r.Er);return(!u&&a.length||a[0]&&S(u,a,t.getVariables()))&&s((0,d.In)(e,a[0].value)),a}),a,[i,o,l,c])})(e,t,l,b);return(0,o.jsxs)("div",{"data-testid":"azure-monitor-metrics-query-editor",children:[(0,o.jsxs)(a.InlineFieldRow,{children:[(0,o.jsx)(c,{subscriptions:O,query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b}),(0,o.jsx)(h,{resourceGroups:I,query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b})]}),(0,o.jsxs)(a.InlineFieldRow,{children:[(0,o.jsx)(p,{resourceTypes:P,query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b}),(0,o.jsx)(g,{resourceNames:M,query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b})]}),(0,o.jsxs)(a.InlineFieldRow,{children:[(0,o.jsx)(u,{metricNamespaces:A,query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b}),(0,o.jsx)(m,{metricNames:F,query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b})]}),(0,o.jsxs)(a.InlineFieldRow,{children:[(0,o.jsx)(f,{query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b,aggregationOptions:null!==(x=null==N?void 0:N.aggOptions)&&void 0!==x?x:[],isLoading:N.isLoading}),(0,o.jsx)(v,{query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b,timeGrainOptions:null!==(C=null==N?void 0:N.timeGrains)&&void 0!==C?C:[]})]}),(0,o.jsx)(y,{query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b,dimensionOptions:null!==(T=null==N?void 0:N.dimensions)&&void 0!==T?T:[]}),(0,o.jsx)(w,{query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b}),(0,o.jsx)(j,{query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:l,setError:b})]})},T=({query:e,onQueryChange:t})=>{const[s]=(0,n.useState)(e.queryType),r=s===i.B.ApplicationInsights||s===i.B.InsightsAnalytics,c=[{value:i.B.AzureMonitor,label:"Metrics"},{value:i.B.LogAnalytics,label:"Logs"},{value:i.B.AzureResourceGraph,label:"Azure Resource Graph"}];r&&c.push({value:i.B.ApplicationInsights,label:"Application Insights"},{value:i.B.InsightsAnalytics,label:"Insights Analytics"});const d=(0,n.useCallback)((s=>{s.value&&t(Object.assign({},e,{queryType:s.value}))}),[t,e]);return(0,o.jsx)(l,{label:"Service",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-query-type-field",value:e.queryType,options:c,onChange:d,width:38})})};var N=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/messageFromError.ts");function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class I{constructor(){O(this,"resolve",void 0),O(this,"reject",void 0),O(this,"promise",void 0),this.resolve=void 0,this.reject=void 0,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),Object.freeze(this)}}var P=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/LogsQueryEditor/setQueryValue.ts");const M=({query:e,datasource:t,onQueryChange:s})=>{var i,r,l;const c=(0,n.useRef)();(0,n.useEffect)((()=>{var s;if(null===(s=e.azureLogAnalytics)||void 0===s||!s.resource)return;const a=[t.azureLogAnalyticsDatasource.getKustoSchema(e.azureLogAnalytics.resource),(c.current||(c.current=new I),c.current.promise)];Promise.all(a).then((([e,{monaco:t,editor:s}])=>{t.languages.kusto.getKustoWorker().then((e=>{const t=s.getModel();return t&&e(t.uri)})).then((t=>{null==t||t.setSchema(e,"https://help.kusto.windows.net","Samples")}))}))}),[t.azureLogAnalyticsDatasource,null===(i=e.azureLogAnalytics)||void 0===i?void 0:i.resource]);const d=(0,n.useCallback)(((e,t)=>{var s,a;null===(s=c.current)||void 0===s||null===(a=s.resolve)||void 0===a||a.call(s,{editor:e,monaco:t})}),[]),u=(0,n.useCallback)((t=>{s((0,P.J3)(e,t))}),[s,e]);return(0,o.jsx)(a.CodeEditor,{value:null!==(r=null===(l=e.azureLogAnalytics)||void 0===l?void 0:l.query)&&void 0!==r?r:"",language:"kusto",height:200,width:"100%",showMiniMap:!1,onBlur:u,onSave:u,onEditorDidMount:d})},F=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],A=({query:e,variableOptionGroup:t,onQueryChange:s})=>{var i;const r=(0,n.useMemo)((()=>[...F,t]),[t]),c=(0,n.useCallback)((t=>{const{value:a}=t;if(!a)return;const n=(0,P.d5)(e,a);s(n)}),[s,e]);return(0,o.jsx)(l,{label:"Format as",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-logs-workspaces-field",value:null===(i=e.azureLogAnalytics)||void 0===i?void 0:i.resultFormat,onChange:c,options:r,width:38})})};var D=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");const $=e=>{const t=(0,a.useTheme2)(),s=L(t,e);return(0,o.jsx)("span",{className:(0,D.cx)(s.wrapper)})};$.defaultProps={v:0,h:0,layout:"block"};const L=(0,a.stylesFactory)(((e,t)=>{var s,a;return{wrapper:(0,D.css)([{paddingRight:e.spacing(null!==(s=t.h)&&void 0!==s?s:0),paddingBottom:e.spacing(null!==(a=t.v)&&void 0!==a?a:0)},"inline"===t.layout&&{display:"inline-block"},"block"===t.layout&&{display:"block"}])}})),E=e=>({table:(0,D.css)({width:"100%",tableLayout:"fixed"}),tableScroller:(0,D.css)({maxHeight:"50vh",overflow:"auto"}),header:(0,D.css)({background:e.colors.background.secondary}),row:(0,D.css)({borderBottom:`1px solid ${e.colors.border.weak}`,"&:last-of-type":{borderBottomColor:e.colors.border.medium}}),disabledRow:(0,D.css)({opacity:.5}),cell:(0,D.css)({padding:e.spacing(1,1,1,0),width:"25%",overflow:"hidden",textOverflow:"ellipsis","&:first-of-type":{width:"50%",padding:e.spacing(1,1,1,2)}}),collapseButton:(0,D.css)({margin:0}),loadingCell:(0,D.css)({textAlign:"center"}),spinner:(0,D.css)({marginBottom:0}),nestedEntry:(0,D.css)({display:"flex",alignItems:"center"}),entryContentItem:(0,D.css)({margin:e.spacing(0,1,0,0)}),truncated:(0,D.css)({minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var R,_,V,B,z,U,q,H,G=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/types.ts"),W=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/utils.ts");const Z=({rows:e,selectedRows:t,level:s,requestNestedRows:a,onRowSelectedChange:n})=>(0,o.jsx)(o.Fragment,{children:e.map((e=>(0,o.jsx)(Q,{row:e,selectedRows:t,level:s,requestNestedRows:a,onRowSelectedChange:n},e.id)))}),Q=({row:e,selectedRows:t,level:s,requestNestedRows:i,onRowSelectedChange:r})=>{var l;const c=(0,a.useStyles2)(E),d=e.type===G.J.Subscription?"open":"closed",[u,p]=(0,n.useState)(d),h=!!t.find((t=>t.id===e.id)),g=t.length>0&&!h,m="open"===u;return(0,n.useEffect)((()=>{var s;const a=t[0];a&&!!(0,W.K5)(null!==(s=e.children)&&void 0!==s?s:[],a.id)&&p("open")}),[t,e]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("tr",{className:(0,D.cx)(c.row,g&&c.disabledRow),children:[(0,o.jsx)("td",{className:c.cell,children:(0,o.jsx)(Y,{level:s,isSelected:h,isDisabled:g,isOpen:m,entry:e,onToggleCollapse:async()=>{"open"!==u?(p("loading"),await i(e),p("open")):p("closed")},onSelectedChange:r})}),(0,o.jsx)("td",{className:c.cell,children:e.typeLabel}),(0,o.jsx)("td",{className:c.cell,children:null!==(l=e.location)&&void 0!==l?l:"-"})]},e.id),m&&e.children&&Object.keys(e.children).length>0&&(0,o.jsx)(Z,{rows:e.children,selectedRows:t,level:s+1,requestNestedRows:i,onRowSelectedChange:r}),(0,o.jsx)(a.FadeTransition,{visible:"loading"===u,children:(0,o.jsx)("tr",{children:(0,o.jsx)("td",{className:(0,D.cx)(c.cell,c.loadingCell),colSpan:3,children:(0,o.jsx)(a.LoadingPlaceholder,{text:"Loading...",className:c.spinner})})})})]})},K=({isOpen:e,entry:{type:t}})=>{switch(t){case G.J.Subscription:return R||(R=(0,o.jsx)(a.Icon,{name:"layer-group"}));case G.J.ResourceGroup:return(0,o.jsx)(a.Icon,{name:e?"folder-open":"folder"});case G.J.Resource:return _||(_=(0,o.jsx)(a.Icon,{name:"cube"}));case G.J.VariableGroup:return V||(V=(0,o.jsx)(a.Icon,{name:"x"}));case G.J.Variable:return B||(B=(0,o.jsx)(a.Icon,{name:"x"}));default:return null}},Y=({entry:e,isSelected:t,isDisabled:s,isOpen:i,level:r,onToggleCollapse:l,onSelectedChange:c})=>{const d=(0,a.useTheme2)(),u=(0,a.useStyles2)(E),p=!!e.children,h=e.type!==G.J.VariableGroup,g=(0,n.useCallback)((()=>{l(e)}),[l,e]),m=(0,n.useCallback)((t=>{const s=t.target.checked;c(e,s)}),[e,c]),f=`checkbox_${e.id}`;return(0,o.jsxs)("div",{className:u.nestedEntry,style:{marginLeft:r*(3*d.spacing.gridSize)},children:[p?(0,o.jsx)(a.IconButton,{className:u.collapseButton,name:i?"angle-down":"angle-right","aria-label":i?"Collapse":"Expand",onClick:g,id:e.id}):z||(z=(0,o.jsx)($,{layout:"inline",h:2})),U||(U=(0,o.jsx)($,{layout:"inline",h:2})),h&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Checkbox,{id:f,onChange:m,disabled:s,value:t}),q||(q=(0,o.jsx)($,{layout:"inline",h:2}))]}),(0,o.jsx)(K,{entry:e,isOpen:i}),H||(H=(0,o.jsx)($,{layout:"inline",h:1})),(0,o.jsx)("label",{htmlFor:f,className:(0,D.cx)(u.entryContentItem,u.truncated),children:e.name})]})},J=Z,X=({rows:e,selectedRows:t,noHeader:s,requestNestedRows:n,onRowSelectedChange:i})=>{const r=(0,a.useStyles2)(E);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("table",{className:r.table,children:!s&&(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{className:(0,D.cx)(r.row,r.header),children:[(0,o.jsx)("td",{className:r.cell,children:"Scope"}),(0,o.jsx)("td",{className:r.cell,children:"Type"}),(0,o.jsx)("td",{className:r.cell,children:"Location"})]})})}),(0,o.jsx)("div",{className:r.tableScroller,children:(0,o.jsx)("table",{className:r.table,children:(0,o.jsx)("tbody",{children:(0,o.jsx)(J,{rows:e,selectedRows:t,level:0,requestNestedRows:n,onRowSelectedChange:i})})})})]})};var ee,te,se,ae,ne,ie=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/resourcePicker/resourcePickerData.ts");const re=({resourcePickerData:e,resourceURI:t,templateVariables:s,onApply:i,onCancel:r})=>{const l=(0,a.useStyles2)(oe),[c,d]=(0,n.useState)([]),[u,p]=(0,n.useState)(t),[h,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>{p(t)}),[t]);const m=(0,n.useMemo)((()=>{const t=e.transformVariablesToRow(s);return s.length?[...c,t]:c}),[e,c,s]),f=(0,n.useMemo)((()=>{const e=u&&(0,W.K5)(m,u);return e?[Object.assign({},e,{children:void 0})]:[]}),[u,m]),b=(0,n.useCallback)((async t=>{var s;if(null!==(s=t.children)&&void 0!==s&&s.length||t.id===ie.Z.templateVariableGroupID)return;const a=await e.getResourcesForResourceGroup(t),n=(0,W.E4)(c,t.id,a);d(n)}),[e,c]),v=(0,n.useCallback)(((e,t)=>{p(t?e.id:void 0)}),[]);(0,n.useEffect)((()=>{g(!0),e.getResourcePickerData().then((e=>{g(!1),d(e)}))}),[e]),(0,n.useEffect)((()=>{if(!u||!m.length)return;if((0,W.K5)(m,u))return;const e=(0,W._E)(u),t=`/subscriptions/${null==e?void 0:e.subscriptionID}/resourceGroups/${null==e?void 0:e.resourceGroup}`,s=(0,W.K5)(m,t);s&&b(s)}),[b,u,m]);const x=(0,n.useCallback)((()=>{i(u)}),[u,i]);return(0,o.jsx)("div",{children:h?(0,o.jsx)("div",{className:l.loadingWrapper,children:ee||(ee=(0,o.jsx)(a.LoadingPlaceholder,{text:"Loading resources..."}))}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(X,{rows:m,requestNestedRows:b,onRowSelectedChange:v,selectedRows:f}),(0,o.jsxs)("div",{className:l.selectionFooter,children:[f.length>0&&(0,o.jsxs)(o.Fragment,{children:[te||(te=(0,o.jsx)($,{v:2})),se||(se=(0,o.jsx)("h5",{children:"Selection"})),(0,o.jsx)(X,{rows:f,requestNestedRows:b,onRowSelectedChange:v,selectedRows:f,noHeader:!0})]}),ae||(ae=(0,o.jsx)($,{v:2})),(0,o.jsx)(a.Button,{onClick:x,children:"Apply"}),ne||(ne=(0,o.jsx)($,{layout:"inline",h:1})),(0,o.jsx)(a.Button,{onClick:r,variant:"secondary",children:"Cancel"})]})]})})},oe=e=>({selectionFooter:(0,D.css)({position:"sticky",bottom:0,background:e.colors.background.primary,paddingTop:e.spacing(2)}),loadingWrapper:(0,D.css)({textAlign:"center",paddingTop:e.spacing(2),paddingBottom:e.spacing(2),color:e.colors.text.secondary})});var le,ce,de,ue,pe,he,ge,me;function fe(e){const t=(0,W._E)(e);if(t)return{subscriptionName:t.subscriptionID,resourceGroupName:t.resourceGroup,resourceName:t.resource}}const be=({resource:e,datasource:t})=>{const[s,i]=(0,n.useState)(fe(null!=e?e:""));return(0,n.useEffect)((()=>{e&&fe(e)?t.resourcePickerData.getResourceURIDisplayProperties(e).then(i):i(void 0)}),[t.resourcePickerData,e]),e?s?(0,o.jsx)(ve,{resource:s}):e.startsWith("$")?(0,o.jsxs)("span",{children:[le||(le=(0,o.jsx)(a.Icon,{name:"x"}))," ",e]}):(0,o.jsx)(o.Fragment,{children:e}):(0,o.jsx)(o.Fragment,{children:"Select a resource"})},ve=({resource:e})=>(0,o.jsxs)("span",{children:[ce||(ce=(0,o.jsx)(a.Icon,{name:"layer-group"}))," ",e.subscriptionName,e.resourceGroupName&&(0,o.jsxs)(o.Fragment,{children:[de||(de=(0,o.jsx)(xe,{})),ue||(ue=(0,o.jsx)(a.Icon,{name:"folder"}))," ",e.resourceGroupName]}),e.resourceName&&(0,o.jsxs)(o.Fragment,{children:[pe||(pe=(0,o.jsx)(xe,{})),he||(he=(0,o.jsx)(a.Icon,{name:"cube"}))," ",e.resourceName]})]}),xe=()=>(0,o.jsxs)(o.Fragment,{children:[ge||(ge=(0,o.jsx)($,{layout:"inline",h:2})),"/",me||(me=(0,o.jsx)($,{layout:"inline",h:2}))]}),ye=({query:e,datasource:t,onQueryChange:s})=>{var i;const r=(0,a.useStyles2)(we),{resource:c}=null!==(i=e.azureLogAnalytics)&&void 0!==i?i:{},[d,u]=(0,n.useState)(!1),p=(0,n.useCallback)((()=>{u(!0)}),[]),h=(0,n.useCallback)((()=>{u(!1)}),[]),g=(0,n.useCallback)((t=>{s((0,P.DF)(e,t)),h()}),[h,s,e]),m=t.getVariables();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Modal,{className:r.modal,title:"Select a resource",isOpen:d,onDismiss:h,children:(0,o.jsx)(re,{resourcePickerData:t.resourcePickerData,resourceURI:c,templateVariables:m,onApply:g,onCancel:h})}),(0,o.jsx)(l,{label:"Resource",children:(0,o.jsx)(a.Button,{variant:"secondary",onClick:p,children:(0,o.jsx)(be,{resource:c,datasource:t})})})]})},we=e=>({modal:(0,D.css)({width:e.breakpoints.values.lg})});function je(e,t,s){const[a,i]=(0,n.useState)();return(0,n.useEffect)((()=>{(async function(e,t,s){var a;if(void 0!==(null===(a=t.azureLogAnalytics)||void 0===a?void 0:a.workspace)&&!t.azureLogAnalytics.resource){let a;a=(0,W.uD)(t.azureLogAnalytics.workspace)?await e.resourcePickerData.getResourceURIFromWorkspace(t.azureLogAnalytics.workspace):t.azureLogAnalytics.workspace;const n=Object.assign({},t,{azureLogAnalytics:Object.assign({},t.azureLogAnalytics,{resource:a,workspace:void 0})});delete n.azureLogAnalytics.workspace,s(n)}})(e,t,s).catch((e=>i({title:"Unable to migrate workspace as a resource",message:e.message})))}),[e,t,s]),a}const ke=({query:e,datasource:t,subscriptionId:s,variableOptionGroup:n,onChange:i,setError:r})=>{const l=je(t,e,i);return(0,o.jsxs)("div",{"data-testid":"azure-monitor-logs-query-editor",children:[(0,o.jsx)(a.InlineFieldRow,{children:(0,o.jsx)(ye,{query:e,datasource:t,subscriptionId:s,variableOptionGroup:n,onQueryChange:i,setError:r})}),(0,o.jsx)(M,{query:e,datasource:t,subscriptionId:s,variableOptionGroup:n,onQueryChange:i,setError:r}),(0,o.jsx)(A,{query:e,datasource:t,subscriptionId:s,variableOptionGroup:n,onQueryChange:i,setError:r}),l&&(0,o.jsx)(a.Alert,{title:l.title,children:l.message})]})},Se=({query:e,onQueryChange:t})=>{var s,i;const r=(0,n.useCallback)((s=>{t(Object.assign({},e,{azureResourceGraph:Object.assign({},e.azureResourceGraph,{query:s})}))}),[t,e]);return(0,o.jsx)(a.CodeEditor,{value:null!==(s=null===(i=e.azureResourceGraph)||void 0===i?void 0:i.query)&&void 0!==s?s:"",language:"kusto",height:200,width:1e3,showMiniMap:!1,onBlur:r,onSave:r})},Ce="arg-subscriptions",Te=({query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onChange:r,setError:l})=>{const d=(0,n.useRef)(!1),[u,p]=(0,n.useState)([]);return(0,n.useEffect)((()=>{d.current||(d.current=!0,t.azureMonitorDatasource.getSubscriptions().then((t=>{var s;const a=t.map((e=>({label:e.text,value:e.value,description:e.value})));var n;(p(a),l(Ce,void 0),null!==(s=e.subscriptions)&&void 0!==s&&s.length||null==a||!a.length)||r(Object.assign({},e,{subscriptions:[null!==(n=e.subscription)&&void 0!==n?n:a[0].value]}))})).catch((e=>l(Ce,e))))}),[t,r,e,l]),(0,o.jsxs)("div",{"data-testid":"azure-monitor-logs-query-editor",children:[(0,o.jsx)(a.InlineFieldRow,{children:(0,o.jsx)(c,{multiSelect:!0,subscriptions:u,query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:r,setError:l})}),(0,o.jsx)(Se,{query:e,datasource:t,subscriptionId:s,variableOptionGroup:i,onQueryChange:r,setError:l})]})};var Ne;const Oe=({timeGrainCount:e,timeGrainType:t,timeGrainUnit:s})=>{const n="specific"===t?["specific",e,s]:[t];return(0,o.jsx)(l,{label:"Timegrain",children:(0,o.jsx)(o.Fragment,{children:n.map((e=>(0,o.jsx)(a.Input,{value:e,disabled:!0,onChange:()=>{},width:10},e)))})})},Ie=({query:e})=>{var t,s,n,i,r,c,d,u;const p=(null===(t=e.appInsights)||void 0===t?void 0:t.dimension)||[];return(0,o.jsxs)("div",{"data-testid":"azure-monitor-application-insights-query-editor",children:[(0,o.jsx)(l,{label:"Metric",disabled:!0,children:(0,o.jsx)(a.Input,{value:null===(s=e.appInsights)||void 0===s?void 0:s.metricName,disabled:!0,onChange:()=>{},id:"azure-monitor-application-insights-metric"})}),(0,o.jsx)(l,{label:"Aggregation",disabled:!0,children:(0,o.jsx)(a.Input,{value:null===(n=e.appInsights)||void 0===n?void 0:n.aggregation,disabled:!0,onChange:()=>{}})}),p.length>0&&(0,o.jsx)(l,{label:"Group by",children:(0,o.jsx)(o.Fragment,{children:p.map((e=>(0,o.jsx)(a.Input,{value:e,disabled:!0,onChange:()=>{}},e)))})}),(0,o.jsx)(l,{label:"Filter",disabled:!0,children:(0,o.jsx)(a.Input,{value:null===(i=e.appInsights)||void 0===i?void 0:i.dimensionFilter,disabled:!0,onChange:()=>{}})}),(0,o.jsx)(Oe,{timeGrainCount:(null===(r=e.appInsights)||void 0===r?void 0:r.timeGrainCount)||"",timeGrainType:(null===(c=e.appInsights)||void 0===c?void 0:c.timeGrainType)||"auto",timeGrainUnit:(null===(d=e.appInsights)||void 0===d?void 0:d.timeGrainUnit)||"minute"}),(0,o.jsx)(l,{label:"Legend format",disabled:!0,children:(0,o.jsx)(a.Input,{placeholder:"Alias patterns",value:null===(u=e.appInsights)||void 0===u?void 0:u.alias,onChange:()=>{},disabled:!0})}),Ne||(Ne=(0,o.jsx)(a.Alert,{severity:"info",title:"Deprecated",children:"Application Insights is deprecated and is now read only. Migrate your queries to Metrics to make changes."}))]})};var Pe,Me;const Fe=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],Ae=({query:e})=>{var t,s,n;return(0,o.jsxs)("div",{"data-testid":"azure-monitor-insights-analytics-query-editor",children:[(0,o.jsx)(a.CodeEditor,{language:"kusto",value:null!==(t=null===(s=e.insightsAnalytics)||void 0===s?void 0:s.query)&&void 0!==t?t:"",height:200,width:"100%",readOnly:!0,showMiniMap:!1}),(0,o.jsx)(l,{label:"Format as",children:(0,o.jsx)(a.Select,{menuShouldPortal:!0,inputId:"azure-monitor-logs-workspaces-field",value:null===(n=e.insightsAnalytics)||void 0===n?void 0:n.resultFormat,disabled:!0,options:Fe,onChange:()=>{},width:38})}),Pe||(Pe=(0,o.jsx)($,{v:2})),Me||(Me=(0,o.jsx)(a.Alert,{severity:"info",title:"Deprecated",children:"Insights Analytics is deprecated and is now read only. Migrate your queries to Logs to make changes."}))]})};var De=s("./node_modules/lodash/lodash.js"),$e=s("./node_modules/fast-deep-equal/index.js"),Le=s.n($e),Ee=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/migrateQuery.ts");const Re={queryType:i.B.AzureMonitor},_e=(e,t)=>{const s=(0,n.useMemo)((()=>(e=>{const t=(0,De.defaults)({},e,Re),s=(0,Ee.Z)(t);return Le()(s,e)?e:s})(e)),[e]);return(0,n.useEffect)((()=>{s!==e&&t(s)}),[s,e,t]),s};var Ve,Be;const ze=({subscriptionId:e,query:t,datasource:s,variableOptionGroup:n,onChange:r,setError:l})=>{switch(t.queryType){case i.B.AzureMonitor:return(0,o.jsx)(C,{subscriptionId:e,query:t,datasource:s,onChange:r,variableOptionGroup:n,setError:l});case i.B.LogAnalytics:return(0,o.jsx)(ke,{subscriptionId:e,query:t,datasource:s,onChange:r,variableOptionGroup:n,setError:l});case i.B.ApplicationInsights:return(0,o.jsx)(Ie,{query:t});case i.B.InsightsAnalytics:return(0,o.jsx)(Ae,{query:t});case i.B.AzureResourceGraph:return(0,o.jsx)(Te,{subscriptionId:e,query:t,datasource:s,onChange:r,variableOptionGroup:n,setError:l});default:return Be||(Be=(0,o.jsx)(a.Alert,{title:"Unknown query type"}))}return null},Ue=({query:e,datasource:t,onChange:s,onRunQuery:i})=>{const[r,l]=function(){const[e,t]=(0,n.useState)([]),s=(0,n.useCallback)(((e,s)=>{t((t=>{const a=[...t],n=t.findIndex((([t])=>t===e));return n>-1&&a.splice(n,1),s&&a.unshift([e,s]),a}))}),[]);return[(0,n.useMemo)((()=>{const t=e[0];return t&&(0,N.Z)(t[1])}),[e]),s]}(),c=(0,n.useMemo)((()=>(0,De.debounce)(i,500)),[i]),d=(0,n.useCallback)((e=>{s(e),c()}),[s,c]),u=_e(e,d),p=u.subscription||t.azureMonitorDatasource.defaultSubscriptionId,h={label:"Template Variables",options:t.getVariables().map((e=>({label:e,value:e})))};return(0,o.jsxs)("div",{"data-testid":"azure-monitor-query-editor",children:[(0,o.jsx)(T,{query:u,onQueryChange:d}),(0,o.jsx)(ze,{subscriptionId:p,query:u,datasource:t,onChange:d,variableOptionGroup:h,setError:l}),r&&(0,o.jsxs)(o.Fragment,{children:[Ve||(Ve=(0,o.jsx)($,{v:2})),(0,o.jsx)(a.Alert,{severity:"error",title:"An error occurred while requesting metadata from Azure Monitor",children:r})]})]})}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/types.ts":(e,t,s)=>{"use strict";let a;s.d(t,{J:()=>a}),function(e){e.Subscription="Subscription",e.ResourceGroup="ResourceGroup",e.Resource="Resource",e.VariableGroup="TemplateVariableGroup",e.Variable="TemplateVariable"}(a||(a={}))},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/utils.ts":(e,t,s)=>{"use strict";s.d(t,{_E:()=>i,uD:()=>r,K5:()=>o,E4:()=>l});var a=s("./node_modules/immer/dist/immer.esm.js");const n=/\/subscriptions\/(?<subscriptionID>[^/]+)(?:\/resourceGroups\/(?<resourceGroup>[^/]+)(?:\/providers.+\/(?<resource>[^/]+))?)?/;function i(e){var t;const s=n.exec(e),a=null!==(t=null==s?void 0:s.groups)&&void 0!==t?t:{},{subscriptionID:i,resourceGroup:r,resource:o}=a;if(i)return{subscriptionID:i,resourceGroup:r,resource:o}}function r(e){return!!e.match(/^[A-Z0-9]+/i)}function o(e,t){for(const s of e){if(s.id.toLowerCase()===t.toLowerCase())return s;if(s.children){const e=o(s.children,t);if(e)return e}}}function l(e,t,s){return(0,a.ZP)(e,(e=>{const a=o(e,t);if(!a)throw new Error("Unable to find resource");a.children=s}))}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/resourcePicker/resourcePickerData.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var a=s("./packages/grafana-runtime/src/index.ts"),n=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/azureMetadata/index.ts"),i=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/types.ts"),r=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/utils.ts"),o=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/common.ts");function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class c extends a.DataSourceWithBackend{constructor(e){super(e),l(this,"resourcePath",void 0),this.resourcePath=`${o.kr.resourceGraph}`}async getResourcePickerData(){const e=`\n      resources\n        // Put subscription details on each row\n        | join kind=leftouter (\n          ResourceContainers\n            | where type == 'microsoft.resources/subscriptions'\n            | project subscriptionName=name, subscriptionURI=id, subscriptionId\n          ) on subscriptionId\n\n        // Put resource group details on each row\n        | join kind=leftouter (\n          ResourceContainers\n            | where type == 'microsoft.resources/subscriptions/resourcegroups'\n            | project resourceGroupURI=id, resourceGroupName=name, resourceGroup\n          ) on resourceGroup\n\n        | where type in (${n.QK})\n\n        // Get only unique resource groups and subscriptions. Also acts like a project\n        | summarize count() by resourceGroupName, resourceGroupURI, subscriptionName, subscriptionURI\n        | order by subscriptionURI asc\n    `;let t,s=[],a=!1;for(;!a;){let n={};t&&(n={$skipToken:t});const i=await this.makeResourceGraphRequest(e,1,n);if(!i.data.length)throw new Error("unable to fetch resource details");s=s.concat(i.data),t=i.$skipToken,a=!t}return function(e){const t=[];for(const s of e){const e={name:s.resourceGroupName,id:s.resourceGroupURI,type:i.J.ResourceGroup,typeLabel:"Resource Group",children:[]},a=t.find((e=>e.id===s.subscriptionURI));if(a)a.children||(a.children=[]),a.children.push(e);else{const a={name:s.subscriptionName,id:s.subscriptionURI,typeLabel:"Subscription",type:i.J.Subscription,children:[e]};t.push(a)}}return t}(s)}async getResourcesForResourceGroup(e){const{data:t}=await this.makeResourceGraphRequest(`\n      resources\n      | where id hasprefix "${e.id}"\n      | where type in (${n.QK}) and location in (${n.ur})\n    `);return t.map((e=>({name:e.name,id:e.id,resourceGroupName:e.resourceGroup,type:i.J.Resource,typeLabel:n.D8[e.type]||e.type,location:n.B$[e.location]||e.location})))}async getResourceURIDisplayProperties(e){var t;const{subscriptionID:s,resourceGroup:a}=null!==(t=(0,r._E)(e))&&void 0!==t?t:{};if(!s)throw new Error("Invalid resource URI passed");const n=`/subscriptions/${s}`,i=`\n      resourcecontainers\n        | where type == "microsoft.resources/subscriptions"\n        | where id =~ "${n}"\n        | project subscriptionName=name, subscriptionId\n\n        | join kind=leftouter (\n          resourcecontainers\n            | where type == "microsoft.resources/subscriptions/resourcegroups"\n            | where id =~ "${`${n}/resourceGroups/${a}`}"\n            | project resourceGroupName=name, resourceGroup, subscriptionId\n        ) on subscriptionId\n\n        | join kind=leftouter (\n          resources\n            | where id =~ "${e}"\n            | project resourceName=name, subscriptionId\n        ) on subscriptionId\n\n        | project subscriptionName, resourceGroupName, resourceName\n    `,{data:o}=await this.makeResourceGraphRequest(i);if(!o.length)throw new Error("unable to fetch resource details");return o[0]}async getResourceURIFromWorkspace(e){const{data:t}=await this.makeResourceGraphRequest(`\n      resources\n      | where properties['customerId'] == "${e}"\n      | project id\n    `);if(!t.length)throw new Error("unable to find resource for workspace "+e);return t[0].id}async makeResourceGraphRequest(e,t=1,s){try{return await this.postResource(this.resourcePath+"/providers/Microsoft.ResourceGraph/resources?api-version=2021-03-01",{query:e,options:Object.assign({resultFormat:"objectArray"},s)})}catch(s){if(t>0)return this.makeResourceGraphRequest(e,t-1);throw s}}transformVariablesToRow(e){return{id:c.templateVariableGroupID,name:"Template variables",type:i.J.VariableGroup,typeLabel:"Variables",children:e.map((e=>({id:e,name:e,type:i.J.Variable,typeLabel:"Variable"})))}}}l(c,"templateVariableGroupID","$$grafana-templateVariables$$")},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/time_grain_converter.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s("./node_modules/lodash/lodash.js"),n=s("./packages/grafana-data/src/index.ts");class i{static createISO8601Duration(e,t){return(0,a.includes)(["hour","minute","h","m"],t)?`PT${e}${t[0].toUpperCase()}`:`P${e}${t[0].toUpperCase()}`}static createISO8601DurationFromInterval(e){const t=+e.slice(0,e.length-1),s=e[e.length-1];if(e.indexOf("ms")>-1)return i.createISO8601Duration(1,"m");if("s"===e[e.length-1]){let e=60*t%60;return e<1&&(e=1),i.createISO8601Duration(e,"m")}return i.createISO8601Duration(t,s)}static findClosestTimeGrain(e,t){const s=(0,a.filter)(t,(e=>"auto"!==e));let i=s[0];const r=n.rangeUtil.intervalToMs(e);for(let e=0;e<s.length;e++)r>n.rangeUtil.intervalToMs(s[e])&&(i=e+1<s.length?s[e+1]:s[e]);return i}static createTimeGrainFromISO8601Duration(e){let t=1;"PT"===e.substring(0,2)&&(t=2);const s=e.substring(t,e.length-1),a=e.substring(e.length-1);return s+" "+i.timeUnitToText(+s,a)}static timeUnitToText(e,t){let s="";return"S"===t&&(s="second"),"M"===t&&(s="minute"),"H"===t&&(s="hour"),"D"===t&&(s="day"),e>1?s+"s":s}static createKbnUnitFromISO8601Duration(e){if("auto"===e)return"auto";let t=1;"PT"===e.substring(0,2)&&(t=2);const s=e.substring(t,e.length-1),a=e.substring(e.length-1);return s+i.timeUnitToKbn(+s,a)}static timeUnitToKbn(e,t){return"S"===t?"s":"M"===t?"m":"H"===t?"h":"D"===t?"d":""}}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/types/index.ts":(e,t,s)=>{"use strict";let a,n;s.d(t,{_:()=>n,B:()=>a}),function(e){e.AzureMonitor="Azure Monitor",e.ApplicationInsights="Application Insights",e.InsightsAnalytics="Insights Analytics",e.LogAnalytics="Azure Log Analytics",e.AzureResourceGraph="Azure Resource Graph"}(a||(a={})),function(e){e.Public="AzureCloud",e.China="AzureChinaCloud",e.USGovernment="AzureUSGovernment",e.Germany="AzureGermanCloud",e.None=""}(n||(n={}))},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/common.ts":(e,t,s)=>{"use strict";s.d(t,{Gq:()=>n,b9:()=>i,Er:()=>r,kr:()=>o,Ll:()=>l});var a=s("./node_modules/lodash/lodash.js");s("./packages/grafana-data/src/index.ts"),s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/time_grain_converter.ts");const n=(e,t)=>e.some((e=>e.options?n(e.options,t):e.value===t)),i=(e,t=[])=>{if(0===t.length)return[];const s=t.reduce(((e,t)=>(e.add(t),e)),new Set);return e.filter((e=>s.has(e.value)))},r=e=>({value:e.value,label:e.text});const o={azureMonitor:"azuremonitor",logAnalytics:"loganalytics",appInsights:"appinsights",resourceGraph:"resourcegraph"};function l(e,t){if("string"==typeof e)return t.multi||t.includeAll?"'"+e+"'":e;if("number"==typeof e)return e;return(0,a.map)(e,(t=>"number"==typeof e?e:"'"+t+"'")).join(",")}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/messageFromError.ts":(e,t,s)=>{"use strict";function a(e){var t,s,a,n,i,r,o,l,c,d,u,p,h,g,m,f,b;if(!e||"object"!=typeof e)return;if("string"==typeof e.message)return e.message;if("string"==typeof(null===(t=e.data)||void 0===t||null===(s=t.error)||void 0===s?void 0:s.message))return e.data.error.message;const v=(null===(a=e.error)||void 0===a||null===(n=a.data)||void 0===n||null===(i=n.error)||void 0===i||null===(r=i.innererror)||void 0===r||null===(o=r.innererror)||void 0===o?void 0:o.message)||(null===(l=e.error)||void 0===l||null===(c=l.data)||void 0===c||null===(d=c.error)||void 0===d||null===(u=d.innererror)||void 0===u?void 0:u.message)||(null===(p=e.error)||void 0===p||null===(h=p.data)||void 0===h||null===(g=h.error)||void 0===g?void 0:g.message)||(null===(m=e.error)||void 0===m||null===(f=m.data)||void 0===f?void 0:f.message)||(null===(b=e.data)||void 0===b?void 0:b.message)||e;return"string"==typeof v?v:v&&v.toString?v.toString():void 0}s.d(t,{Z:()=>a})},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/migrateQuery.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l,N:()=>d});var a=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/types/index.ts"),n=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/time_grain_converter.ts"),i=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/MetricsQueryEditor/setQueryValue.ts"),r=s("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/LogsQueryEditor/setQueryValue.ts");const o="select";function l(e){let t=e;return t=function(e){var t,s;let a=e;if(null!==(t=a.azureMonitor)&&void 0!==t&&t.timeGrainUnit&&"auto"!==a.azureMonitor.timeGrain){var r,o;const e=n.Z.createISO8601Duration(null!==(r=a.azureMonitor.timeGrain)&&void 0!==r?r:"auto",a.azureMonitor.timeGrainUnit);a=(0,i.zB)(a,e),null===(o=a.azureMonitor)||void 0===o||delete o.timeGrainUnit}if(null!==(s=a.appInsights)&&void 0!==s&&s.timeGrainUnit&&"auto"!==a.appInsights.timeGrain){const e=Object.assign({},a.appInsights);a.appInsights.timeGrainCount?e.timeGrain=n.Z.createISO8601Duration(a.appInsights.timeGrainCount,a.appInsights.timeGrainUnit):(e.timeGrainCount=a.appInsights.timeGrain,a.appInsights.timeGrain&&(e.timeGrain=n.Z.createISO8601Duration(a.appInsights.timeGrain,a.appInsights.timeGrainUnit))),a=Object.assign({},a,{appInsights:e})}return a}(t),t=function(e){var t,s,a,n;let i=e;null!==(t=i.azureLogAnalytics)&&void 0!==t&&null!==(s=t.query)&&void 0!==s&&s.match(/\$__from\s/gi)&&(i=(0,r.J3)(i,i.azureLogAnalytics.query.replace(/\$__from\s/gi,"$__timeFrom() ")));null!==(a=i.azureLogAnalytics)&&void 0!==a&&null!==(n=a.query)&&void 0!==n&&n.match(/\$__to\s/gi)&&(i=(0,r.J3)(i,i.azureLogAnalytics.query.replace(/\$__to\s/gi,"$__timeTo() ")));return i}(t),t=function(e){var t,s;if((!(null===(t=e.azureMonitor)||void 0===t?void 0:t.metricNamespace)||e.azureMonitor.metricNamespace===o)&&null!==(s=e.azureMonitor)&&void 0!==s&&s.metricDefinition)return Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{metricNamespace:e.azureMonitor.metricDefinition})});return e}(t),t=function(e){var t;const s=null==e||null===(t=e.appInsights)||void 0===t?void 0:t.dimension;if(s&&"string"==typeof s)return Object.assign({},e,{appInsights:Object.assign({},e.appInsights,{dimension:[s]})});return e}(t),t=c(t),t}function c(e){var t;let s=e;const a=null===(t=s.azureMonitor)||void 0===t?void 0:t.dimension;var n;a&&"None"!==a&&(s=(0,i.d2)(s,a,"eq",null===(n=s.azureMonitor)||void 0===n?void 0:n.dimensionFilter));return s}function d(e){var t;let s=e;return s.queryType===a.B.ApplicationInsights&&null!==(t=s.appInsights)&&void 0!==t&&t.rawQuery&&(s=Object.assign({},s,{queryType:a.B.InsightsAnalytics,appInsights:void 0,insightsAnalytics:{query:s.appInsights.rawQuery,resultFormat:"time_series"}})),s.queryType||(s=Object.assign({},s,{queryType:a.B.AzureMonitor})),s.queryType===a.B.AzureMonitor&&s.azureMonitor&&(s=c(s)),s}},"./public/app/plugins/datasource/loki/components/LokiOptionFields.tsx":(e,t,s)=>{"use strict";s.d(t,{TQ:()=>c,JX:()=>u});s("./node_modules/react/index.js");var a,n=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),i=s("./node_modules/lodash/lodash.js"),r=s("./packages/grafana-ui/src/index.ts"),o=s("./node_modules/react/jsx-runtime.js");const l=[{value:"range",label:"Range",description:"Run query over a range of time."},{value:"instant",label:"Instant",description:'Run query against a single point in time. For this query, the "To" time is used.'}],c={value:1,label:"1/1"},d=[c].concat((0,i.map)([2,3,4,5,10],(e=>({value:e,label:"1/"+e}))));function u(e){const{lineLimitValue:t,resolution:s,queryType:i,query:c,onRunQuery:u,runOnBlur:p,onChange:h}=e;function g(e){return 0===e.length?NaN:e.length>0&&(isNaN(+e)||+e<0)?0:+e}return(0,o.jsxs)("div",{"aria-label":"Loki extra field",className:"gf-form-inline",children:[(0,o.jsxs)("div",{"data-testid":"queryTypeField",className:(0,n.cx)("gf-form explore-input-margin",n.css`
            flex-wrap: nowrap;
          `),"aria-label":"Query type field",children:[a||(a=(0,o.jsx)(r.InlineFormLabel,{width:"auto",children:"Query type"})),(0,o.jsx)(r.RadioButtonGroup,{options:l,value:i,onChange:e=>{!function(e){let t;t="instant"===e?Object.assign({},c,{instant:!0,range:!1}):Object.assign({},c,{instant:!1,range:!0}),h(t)}(e),p&&u()}})]}),(0,o.jsxs)("div",{"data-testid":"lineLimitField",className:(0,n.cx)("gf-form",n.css`
            flex-wrap: nowrap;
          `),"aria-label":"Line limit field",children:[(0,o.jsx)(r.InlineField,{label:"Line limit",tooltip:"Upper limit for number of log lines returned by query.",children:(0,o.jsx)(r.Input,{className:"width-4",placeholder:"auto",type:"number",min:0,onChange:function(e){c.maxLines!==g(e.currentTarget.value)&&function(e){const t=Object.assign({},c,{maxLines:g(e)});h(t)}(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&u()},value:t,onBlur:()=>{p&&u()}})}),(0,o.jsx)(r.InlineField,{label:"Resolution",tooltip:"Resolution 1/1 sets step parameter of Loki metrics range queries such that each pixel corresponds to one data point. For better performance, lower resolutions can be picked. 1/2 only retrieves a data point for every other pixel, and 1/10 retrieves one data point per 10 pixels.",children:(0,o.jsx)(r.Select,{isSearchable:!1,onChange:function(e){const t=Object.assign({},c,{resolution:e.value});h(t)},options:d,value:s})})]})]})}},"./public/app/plugins/datasource/loki/components/LokiQueryField.tsx":(e,t,s)=>{"use strict";s.d(t,{n:()=>N});var a,n,i,r,o=s("./node_modules/react/index.js"),l=s("./packages/grafana-ui/src/index.ts"),c=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),d=s("./public/app/core/store.ts"),u=s("./node_modules/react-window/dist/index.esm.js"),p=s("./node_modules/lodash/lodash.js"),h=s("./node_modules/react/jsx-runtime.js");function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m=1e3,f=1e4,b=4,v="{}",x="grafana.datasources.loki.browser.labels";function y(e){const t=[];for(const s of e)if(s.selected&&s.values&&s.values.length>0){const e=s.values.filter((e=>e.selected)).map((e=>e.name));e.length>1?t.push(`${s.name}=~"${e.join("|")}"`):1===e.length&&t.push(`${s.name}="${e[0]}"`)}return["{",t.join(","),"}"].join("")}class w extends o.Component{constructor(...e){super(...e),g(this,"state",{labels:[],searchTerm:"",status:"Ready",error:"",validationStatus:""}),g(this,"onChangeSearch",(e=>{this.setState({searchTerm:e.target.value})})),g(this,"onClickRunLogsQuery",(()=>{const e=y(this.state.labels);this.props.onChange(e)})),g(this,"onClickRunMetricsQuery",(()=>{const e=`rate(${y(this.state.labels)}[$__interval])`;this.props.onChange(e)})),g(this,"onClickClear",(()=>{this.setState((e=>({labels:e.labels.map((e=>Object.assign({},e,{values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0}))),searchTerm:"",status:"",error:"",validationStatus:""}))),d.Z.delete(x)})),g(this,"onClickLabel",((e,t,s)=>{const a=this.state.labels.find((t=>t.name===e));if(!a)return;const n=!a.selected;let i={selected:n};if(a.values&&!n){const e=a.values.map((e=>Object.assign({},e,{selected:!1})));i=Object.assign({},i,{facets:0,values:e})}this.setState({searchTerm:""}),this.updateLabelState(e,i,"",(()=>this.doFacettingForLabel(e)))})),g(this,"onClickValue",((e,t,s)=>{const a=this.state.labels.find((t=>t.name===e));if(!a||!a.values)return;this.setState({searchTerm:""});const n=a.values.map((e=>Object.assign({},e,{selected:e.name===t?!e.selected:e.selected})));this.updateLabelState(e,{values:n},"",(()=>this.doFacetting(e)))})),g(this,"onClickValidate",(()=>{const e=y(this.state.labels);this.validateSelector(e)})),g(this,"doFacetting",(e=>{const t=y(this.state.labels);if(t===v){const e=this.state.labels.map((e=>Object.assign({},e,{facets:0,values:void 0,hidden:!1})));this.setState({labels:e},(()=>{this.state.labels.forEach((e=>e.selected&&this.fetchValues(e.name,t)))}))}else this.fetchSeries(t,e)}))}updateLabelState(e,t,s="",a){this.setState((a=>{const n=a.labels.map((s=>s.name===e?Object.assign({},s,t):s)),i=s?"":a.error;return{labels:n,status:s,error:i,validationStatus:""}}),a)}componentDidMount(){const{languageProvider:e,autoSelect:t=b}=this.props;if(e){const s=d.Z.getObject(x,[]);e.start().then((()=>{let a=e.getLabelKeys();if(a.length>m){const e=`Too many labels found (showing only 1000 of ${a.length})`;a=a.slice(0,m),this.setState({error:e})}const n=a.map(((e,a,n)=>({name:e,selected:n.length<=t&&0===s.length||s.includes(e),loading:!1})));this.setState({labels:n},(()=>{this.state.labels.forEach((e=>{e.selected&&this.fetchValues(e.name,v)}))}))}))}}doFacettingForLabel(e){const t=this.state.labels.find((t=>t.name===e));if(!t)return;const s=this.state.labels.filter((e=>e.selected)).map((e=>e.name));d.Z.setObject(x,s),t.selected?t.values||this.fetchValues(e,y(this.state.labels)):this.doFacetting()}async fetchValues(e,t){const{languageProvider:s}=this.props;this.updateLabelState(e,{loading:!0},`Fetching values for ${e}`);try{let a=await s.getLabelValues(e);if(t!==y(this.state.labels))return void this.updateLabelState(e,{loading:!1},"");if(a.length>f){const t=`Too many values for ${e} (showing only 10000 of ${a.length})`;a=a.slice(0,f),this.setState({error:t})}const n=a.map((e=>({name:e})));this.updateLabelState(e,{values:n,loading:!1})}catch(e){console.error(e)}}async fetchSeries(e,t){const{languageProvider:s}=this.props;t&&this.updateLabelState(t,{loading:!0},`Facetting labels for ${e}`);try{const a=await s.fetchSeriesLabels(e,!0);if(e!==y(this.state.labels))return void(t&&this.updateLabelState(t,{loading:!1}));if(0===Object.keys(a).length)return console.error("No results for label combination, but should not occur."),void this.setState({error:`Facetting failed for ${e}`});const n=function(e,t,s){return e.map((e=>{const a=t[e.name];if(a){let t;if(e.name===s&&e.values)t=e.values;else{var n;const s=new Set((null===(n=e.values)||void 0===n?void 0:n.filter((e=>e.selected)).map((e=>e.name)))||[]);t=a.map((e=>({name:e,selected:s.has(e)})))}return Object.assign({},e,{loading:!1,values:t,facets:t.length})}return Object.assign({},e,{loading:!1,hidden:!a,values:void 0,facets:0})}))}(this.state.labels,a,t);this.setState({labels:n,error:""}),t&&this.updateLabelState(t,{loading:!1})}catch(e){console.error(e)}}async validateSelector(e){const{languageProvider:t}=this.props;this.setState({validationStatus:`Validating selector ${e}`,error:""});const s=await t.fetchSeries(e);this.setState({validationStatus:`Selector is valid (${s.length} streams found)`})}render(){const{theme:e}=this.props,{labels:t,searchTerm:s,status:o,error:d,validationStatus:g}=this.state;if(0===t.length)return a||(a=(0,h.jsx)(l.LoadingPlaceholder,{text:"Loading labels..."}));const m=(e=>({wrapper:c.css`
    background-color: ${e.colors.background.secondary};
    padding: ${e.spacing(2)};
    width: 100%;
  `,list:c.css`
    margin-top: ${e.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
  `,section:c.css`
    & + & {
      margin: ${e.spacing(2,0)};
    }
    position: relative;
  `,selector:c.css`
    font-family: ${e.typography.fontFamilyMonospace};
    margin-bottom: ${e.spacing(1)};
  `,status:c.css`
    padding: ${e.spacing(.5)};
    color: ${e.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:c.css`
    opacity: 1;
  `,error:c.css`
    color: ${e.colors.error.main};
  `,valueList:c.css`
    margin-right: ${e.spacing(1)};
  `,valueListWrapper:c.css`
    border-left: 1px solid ${e.colors.border.medium};
    margin: ${e.spacing(1,0)};
    padding: ${e.spacing(1,0,1,1)};
  `,valueListArea:c.css`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${e.spacing(1)};
  `,valueTitle:c.css`
    margin-left: -${e.spacing(.5)};
    margin-bottom: ${e.spacing(1)};
  `,validationStatus:c.css`
    padding: ${e.spacing(.5)};
    margin-bottom: ${e.spacing(1)};
    color: ${e.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}))(e),f=y(this.state.labels),b=f===v;let x=t.filter((e=>e.selected&&e.values));return x=s?x.map((e=>{const t=e.values.filter((e=>{if(e.selected)return e.highlightParts=void 0,!0;const t=(0,l.fuzzyMatch)(e.name.toLowerCase(),s.toLowerCase());return!!t.found&&(e.highlightParts=t.ranges,e.order=t.distance,!0)}));return Object.assign({},e,{values:(0,p.sortBy)(t,(e=>e.selected?-1/0:e.order))})})):this.state.labels.filter((e=>e.selected&&e.values)).map((e=>Object.assign({},e,{values:null!=e&&e.values?e.values.map((e=>Object.assign({},e,{highlightParts:void 0}))):[]}))),(0,h.jsxs)("div",{className:m.wrapper,children:[(0,h.jsxs)("div",{className:m.section,children:[n||(n=(0,h.jsx)(l.Label,{description:"Which labels would you like to consider for your search?",children:"1. Select labels to search in"})),(0,h.jsx)("div",{className:m.list,children:t.map((e=>(0,h.jsx)(l.BrowserLabel,{name:e.name,loading:e.loading,active:e.selected,hidden:e.hidden,facets:e.facets,onClick:this.onClickLabel},e.name)))})]}),(0,h.jsxs)("div",{className:m.section,children:[i||(i=(0,h.jsx)(l.Label,{description:"Choose the label values that you would like to use for the query. Use the search field to find values across selected labels.",children:"2. Find values for the selected labels"})),(0,h.jsx)("div",{children:(0,h.jsx)(l.Input,{onChange:this.onChangeSearch,"aria-label":"Filter expression for values",value:s})}),(0,h.jsx)("div",{className:m.valueListArea,children:x.map((e=>{var t,a;return(0,h.jsxs)("div",{role:"list",className:m.valueListWrapper,children:[(0,h.jsx)("div",{className:m.valueTitle,"aria-label":`Values for ${e.name}`,children:(0,h.jsx)(l.BrowserLabel,{name:e.name,loading:e.loading,active:e.selected,hidden:e.hidden,facets:e.facets||(null===(t=e.values)||void 0===t?void 0:t.length),onClick:this.onClickLabel})}),(0,h.jsx)(u.t7,{height:200,itemCount:(null===(a=e.values)||void 0===a?void 0:a.length)||0,itemSize:28,itemKey:t=>e.values[t].name,width:200,className:m.valueList,children:({index:t,style:a})=>{var n;const i=null===(n=e.values)||void 0===n?void 0:n[t];return i?(0,h.jsx)("div",{style:a,children:(0,h.jsx)(l.BrowserLabel,{name:e.name,value:null==i?void 0:i.name,active:null==i?void 0:i.selected,highlightParts:null==i?void 0:i.highlightParts,onClick:this.onClickValue,searchTerm:s})}):null}})]},e.name)}))})]}),(0,h.jsxs)("div",{className:m.section,children:[r||(r=(0,h.jsx)(l.Label,{children:"3. Resulting selector"})),(0,h.jsx)("div",{"aria-label":"selector",className:m.selector,children:f}),g&&(0,h.jsx)("div",{className:m.validationStatus,children:g}),(0,h.jsxs)(l.HorizontalGroup,{children:[(0,h.jsx)(l.Button,{"aria-label":"Use selector as logs button",disabled:b,onClick:this.onClickRunLogsQuery,children:"Show logs"}),(0,h.jsx)(l.Button,{"aria-label":"Use selector as metrics button",variant:"secondary",disabled:b,onClick:this.onClickRunMetricsQuery,children:"Show logs rate"}),(0,h.jsx)(l.Button,{"aria-label":"Validate submit button",variant:"secondary",disabled:b,onClick:this.onClickValidate,children:"Validate selector"}),(0,h.jsx)(l.Button,{"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear,children:"Clear"}),(0,h.jsx)("div",{className:(0,c.cx)(m.status,(o||d)&&m.statusShowing),children:(0,h.jsx)("span",{className:d?m.error:"",children:d||o})})]})]})]})}}const j=(0,l.withTheme2)(w);var k=s("./node_modules/prismjs/prism.js");function S(e){return t=e/1e3,Math.floor(t/60);var t}function C(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function T(e,{typeaheadContext:t,typeaheadText:s}){switch(t){case"context-labels":{const t=l.DOMUtil.getNextCharacter();t&&"}"!==t&&","!==t||(e+="=");break}case"context-label-values":s.match(/^(!?=~?"|")/)||(e=`"${e}`),'"'!==l.DOMUtil.getNextCharacter()&&(e=`${e}"`)}return e}class N extends o.PureComponent{constructor(e){super(e),C(this,"plugins",void 0),C(this,"onChangeLabelBrowser",(e=>{this.onChangeQuery(e,!0),this.setState({labelBrowserVisible:!1})})),C(this,"onChangeQuery",((e,t)=>{const{query:s,onChange:a,onRunQuery:n}=this.props;if(a){a(Object.assign({},s,{expr:e})),t&&n&&n()}})),C(this,"onClickChooserButton",(()=>{this.setState((e=>({labelBrowserVisible:!e.labelBrowserVisible})))})),C(this,"onTypeahead",(async e=>{const{datasource:t}=this.props;if(!t.languageProvider)return{suggestions:[]};const s=t.languageProvider,{history:a}=this.props,{prefix:n,text:i,value:r,wrapperClasses:o,labelKey:l}=e;return await s.provideCompletionItems({text:i,value:r,prefix:n,wrapperClasses:o,labelKey:l},{history:a})})),this.state={labelsLoaded:!1,labelBrowserVisible:!1},this.plugins=[(0,l.BracesPlugin)(),(0,l.SlatePrism)({onlyIn:e=>"block"===e.object&&"code_block"===e.type,getSyntax:e=>"logql"},Object.assign({},k.languages,{logql:this.props.datasource.languageProvider.getSyntax()}))]}async componentDidMount(){await this.props.datasource.languageProvider.start(),this.setState({labelsLoaded:!0})}componentDidUpdate(e){const{range:t,datasource:{languageProvider:s}}=this.props;(function(e,t){if(e&&t){const s=S(e.from.valueOf())===S(t.from.valueOf()),a=S(e.to.valueOf())===S(t.to.valueOf());return!(s&&a)}return!1})(t,e.range)&&s.fetchLabels()}render(){const{ExtraFieldElement:e,query:t,datasource:s,placeholder:a="Enter a Loki query (run with Shift+Enter)"}=this.props,{labelsLoaded:n,labelBrowserVisible:i}=this.state,r=s.languageProvider,o=s.languageProvider?r.cleanText:void 0,c=r.getLabelKeys().length>0,d=function(e,t){return e?t?"Log browser":"(No logs found)":"Loading labels..."}(n,c),u=!(n&&c);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"],children:[(0,h.jsxs)("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:u,children:[d,(0,h.jsx)(l.Icon,{name:i?"angle-down":"angle-right"})]}),(0,h.jsx)("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15",children:(0,h.jsx)(l.QueryField,{additionalPlugins:this.plugins,cleanText:o,query:t.expr,onTypeahead:this.onTypeahead,onWillApplySuggestion:T,onChange:this.onChangeQuery,onBlur:this.props.onBlur,onRunQuery:this.props.onRunQuery,placeholder:a,portalOrigin:"loki"})})]}),i&&(0,h.jsx)("div",{className:"gf-form",children:(0,h.jsx)(j,{languageProvider:r,onChange:this.onChangeLabelBrowser})}),e]})}}},"./public/app/plugins/panel/barchart/distribute.ts":(e,t,s)=>{"use strict";function a(e,t){return Math.round(e*(t=10**t))/t}s.d(t,{Gj:()=>n,Qm:()=>r});const n=1,i=(e,t,s,n)=>a(t+e*(s+n),6);function r(e,t,s,r,o){let l=1-t,c=s===n?l/(e-1):2===s?l/e:3===s?l/(e+1):0;(isNaN(c)||c===1/0)&&(c=0);let d=s===n?0:2===s?c/2:3===s?c:0,u=t/e,p=a(u,6);if(null==r)for(let t=0;t<e;t++)o(t,i(t,d,u,c),p);else o(r,i(r,d,u,c),p)}},"./public/app/plugins/panel/barchart/quadtree.ts":(e,t,s)=>{"use strict";function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{P:()=>n,l:()=>i});function n(e,t,s,a,n,i){return e>=s&&e<=n&&t>=a&&t<=i}class i{constructor(e,t,s,n,i=0){a(this,"o",void 0),a(this,"q",void 0),this.x=e,this.y=t,this.w=s,this.h=n,this.l=i,this.o=[],this.q=null}split(){let e=this,t=e.x,s=e.y,a=e.w/2,n=e.h/2,r=e.l+1;e.q=[new i(t+a,s,a,n,r),new i(t,s,a,n,r),new i(t,s+n,a,n,r),new i(t+a,s+n,a,n,r)]}quads(e,t,s,a,n){let i=this,r=i.q,o=i.x+i.w/2,l=i.y+i.h/2,c=t<l,d=e<o,u=e+s>o,p=t+a>l;c&&u&&n(r[0]),d&&c&&n(r[1]),d&&p&&n(r[2]),u&&p&&n(r[3])}add(e){let t=this;if(null!=t.q)t.quads(e.x,e.y,e.w,e.h,(t=>{t.add(e)}));else{let s=t.o;if(s.push(e),s.length>10&&t.l<4){t.split();for(let e=0;e<s.length;e++){let a=s[e];t.quads(a.x,a.y,a.w,a.h,(e=>{e.add(a)}))}t.o.length=0}}}get(e,t,s,a,n){let i=this,r=i.o;for(let e=0;e<r.length;e++)n(r[e]);null!=i.q&&i.quads(e,t,s,a,(i=>{i.get(e,t,s,a,n)}))}clear(){this.o.length=0,this.q=null}}},"./public/app/plugins/panel/bargauge/BarGaugePanel.tsx":(e,t,s)=>{"use strict";s.d(t,{M:()=>d,l:()=>u});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-data/src/index.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./public/app/core/config.ts"),o=s("./node_modules/lodash/lodash.js"),l=s("./node_modules/react/jsx-runtime.js");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends a.PureComponent{constructor(...e){super(...e),c(this,"renderComponent",((e,t)=>{const{options:s,fieldConfig:a}=this.props,{value:n,alignmentFactors:c,orientation:d,width:p,height:h,count:g}=e,{field:m,display:f,view:b,colIndex:v}=n,{openMenu:x,targetClassName:y}=t;let w;return b&&(0,o.isNumber)(v)&&(w=b.getFieldDisplayProcessor(v)),(0,l.jsx)(i.BarGauge,{value:u(g,a.defaults,f),width:p,height:h,orientation:d,field:m,text:s.text,display:w,theme:r.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:s.displayMode,onClick:x,className:y,alignmentFactors:g>1?c:void 0,showUnfilled:s.showUnfilled})})),c(this,"renderValue",(e=>{const{value:t}=e,{hasLinks:s,getLinks:a}=t;return s&&a?(0,l.jsx)(i.DataLinksContextMenu,{links:a,config:t.field,children:t=>this.renderComponent(e,t)}):this.renderComponent(e,{})})),c(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:s,fieldConfig:a,timeZone:i}=this.props;return(0,n.getFieldDisplayValues)({fieldConfig:a,reduceOptions:t.reduceOptions,replaceVariables:s,theme:r.vc.theme2,data:e.series,timeZone:i})}))}getItemSpacing(){return"lcd"===this.props.options.displayMode?2:10}render(){const{height:e,width:t,options:s,data:a,renderCounter:r}=this.props;return(0,l.jsx)(i.VizRepeater,{source:a,getAlignmentFactors:n.getDisplayValueAlignmentFactors,getValues:this.getValues,renderValue:this.renderValue,renderCounter:r,width:t,height:e,minVizHeight:10,itemSpacing:this.getItemSpacing(),orientation:s.orientation})}}function u(e,t,s){return 1!==e||t.displayName?s:Object.assign({},s,{title:void 0})}},"./public/app/plugins/panel/gauge/module.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{plugin:()=>p});var a=s("./packages/grafana-data/src/index.ts"),n=s("./node_modules/react/index.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./public/app/core/config.ts"),o=s("./public/app/plugins/panel/bargauge/BarGaugePanel.tsx"),l=s("./node_modules/react/jsx-runtime.js");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends n.PureComponent{constructor(...e){super(...e),c(this,"renderComponent",((e,t)=>{const{options:s,fieldConfig:a}=this.props,{width:n,height:c,count:d,value:u}=e,{field:p,display:h}=u,{openMenu:g,targetClassName:m}=t;return(0,l.jsx)(i.Gauge,{value:(0,o.l)(d,a.defaults,h),width:n,height:c,field:p,text:s.text,showThresholdLabels:s.showThresholdLabels,showThresholdMarkers:s.showThresholdMarkers,theme:r.vc.theme,onClick:g,className:m})})),c(this,"renderValue",(e=>{const{value:t}=e,{getLinks:s,hasLinks:a}=t;return a&&s?(0,l.jsx)(i.DataLinksContextMenu,{links:s,config:t.field,children:t=>this.renderComponent(e,t)}):this.renderComponent(e,{})})),c(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:s,fieldConfig:n,timeZone:i}=this.props;return(0,a.getFieldDisplayValues)({fieldConfig:n,reduceOptions:t.reduceOptions,replaceVariables:s,theme:r.vc.theme2,data:e.series,timeZone:i})}))}render(){const{height:e,width:t,data:s,renderCounter:a,options:n}=this.props;return(0,l.jsx)(i.VizRepeater,{getValues:this.getValues,renderValue:this.renderValue,width:t,height:e,source:s,autoGrid:!0,renderCounter:a,orientation:n.orientation})}}var u=s("./public/app/plugins/panel/stat/types.ts");const p=new a.PanelPlugin(d).useFieldConfig().setPanelOptions((e=>{(0,u.j)(e),(0,u.h)(e),e.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:!1}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:!0}),i.commonOptionsBuilder.addTextSizeOptions(e)})).setPanelChangeHandler(((e,t,s)=>{const a=(0,i.sharedSingleStatPanelChangedHandler)(e,t,s);if("singlestat"===t&&s.angular){const e=s.angular.gauge;e&&(a.showThresholdMarkers=e.thresholdMarkers,a.showThresholdLabels=e.thresholdLabels)}return a})).setMigrationHandler((e=>(0,i.sharedSingleStatMigrationHandler)(e)))},"./public/app/plugins/panel/geomap/components/DataHoverView.tsx":(e,t,s)=>{"use strict";s.d(t,{H:()=>c});var a=s("./node_modules/react/index.js"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./packages/grafana-data/src/index.ts"),r=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),o=s("./public/app/core/config.ts"),l=s("./node_modules/react/jsx-runtime.js");class c extends a.PureComponent{constructor(...e){var t,s,a;super(...e),t=this,s="style",a=u(o.vc.theme2),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a}render(){const{data:e,rowIndex:t,columnIndex:s}=this.props;return e&&null!=t?(0,l.jsx)("table",{className:this.style.infoWrap,children:(0,l.jsx)("tbody",{children:e.fields.map(((a,n)=>(0,l.jsxs)("tr",{className:n===s?this.style.highlight:"",children:[(0,l.jsxs)("th",{children:[(0,i.getFieldDisplayName)(a,e),":"]}),(0,l.jsx)("td",{children:d(a,t)})]},`${n}/${t}`)))})}):null}}function d(e,t){const s=e.values.get(t);return e.display?(0,i.formattedValueToString)(e.display(s)):`${s}`}const u=(0,n.stylesFactory)((e=>({infoWrap:r.css`
    padding: 8px;
    th {
      font-weight: ${e.typography.fontWeightMedium};
      padding: ${e.spacing(.25,2)};
    }
  `,highlight:r.css`
    background: ${e.colors.action.hover};
  `})))},"./public/app/plugins/panel/nodeGraph/NodeGraph.tsx":(e,t,s)=>{"use strict";s.d(t,{E:()=>ce});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s.n(n),r=s("./node_modules/react-use/lib/useMeasure.js"),o=s("./packages/grafana-ui/src/index.ts"),l=s("./node_modules/react-use/lib/useMountedState.js"),c=s("./node_modules/react-use/lib/usePrevious.js");function d({scale:e=1,bounds:t,focus:s}={}){const n=(0,l.default)(),i=(0,a.useRef)(!1),r=(0,a.useRef)(0),o=(0,a.useRef)(null),d={x:0,y:0},h=(0,a.useMemo)((()=>({right:t?-t.left:1/0,left:t?-t.right:-1/0,bottom:t?-t.top:-1/0,top:t?-t.bottom:1/0})),[t]),g=(0,a.useRef)(d),m=(0,a.useRef)(d),f=(0,a.useRef)(d),[b,v]=(0,a.useState)({isPanning:!1,position:d});(0,a.useEffect)((()=>{const t=()=>{i.current&&n()&&(i.current=!1,v((e=>Object.assign({},e,{isPanning:!1}))),l())},s=e=>{(e=>{!i.current&&n()&&(i.current=!0,g.current=p(e),m.current=Object.assign({},f.current),v((e=>Object.assign({},e,{isPanning:!0}))),a())})(e),c(e)},a=()=>{document.addEventListener("mousemove",c),document.addEventListener("mouseup",t),document.addEventListener("touchmove",c),document.addEventListener("touchend",t)},l=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",t)},c=t=>{cancelAnimationFrame(r.current);const s=p(t);r.current=requestAnimationFrame((()=>{if(n()&&o.current){let t=s.x-g.current.x,a=s.y-g.current.y;f.current={x:u(m.current.x+t/e,h.left,h.right),y:u(m.current.y+a/e,h.top,h.bottom)},v((e=>Object.assign({},e,{position:Object.assign({},f.current)})))}}))},d=o.current;return d&&(d.addEventListener("mousedown",s),d.addEventListener("touchstart",s)),()=>{d&&(d.removeEventListener("mousedown",s),d.removeEventListener("touchstart",s))}}),[e,h,n]);const x=(0,c.Z)(s);(0,a.useEffect)((()=>{if(s&&(null==x?void 0:x.x)!==s.x&&(null==x?void 0:x.y)!==s.y){const e={x:u(s.x,h.left,h.right),y:u(s.y,h.top,h.bottom)};v({position:e,isPanning:!1}),f.current=e,m.current=e}}),[s,x,h,f,m]);let y=b.position;return s&&(null==x?void 0:x.x)!==s.x&&(null==x?void 0:x.y)!==s.y&&(y=s),{state:Object.assign({},b,{position:{x:u(y.x,h.left,h.right),y:u(y.y,h.top,h.bottom)}}),ref:o}}function u(e,t,s){return Math.min(Math.max(e,null!=t?t:-1/0),null!=s?s:1/0)}function p(e){if(e.changedTouches){const t=e;return{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}}{const t=e;return{x:t.clientX,y:t.clientY}}}var h=s("./packages/grafana-data/src/index.ts"),g=s("./node_modules/emotion/dist/emotion.esm.js"),m=s("./node_modules/tinycolor2/tinycolor.js"),f=s.n(m);function b(e,t){const s=e.x2-e.x1,a=e.y2-e.y1,n=Math.sqrt(s*s+a*a),i=Math.max((n-t)/n,0),r=s*i,o=a*i,l=s-r,c=a-o,d=e.x1+l/2,u=e.y1+c/2;return{x1:d,y1:u,x2:d+r,y2:u+o}}function v(e){const t=new h.FieldCache(e);return{id:t.getFieldByName(h.NodeGraphDataFrameFieldNames.id),title:t.getFieldByName(h.NodeGraphDataFrameFieldNames.title),subTitle:t.getFieldByName(h.NodeGraphDataFrameFieldNames.subTitle),mainStat:t.getFieldByName(h.NodeGraphDataFrameFieldNames.mainStat),secondaryStat:t.getFieldByName(h.NodeGraphDataFrameFieldNames.secondaryStat),arc:y(e,h.NodeGraphDataFrameFieldNames.arc),details:y(e,h.NodeGraphDataFrameFieldNames.detail),color:t.getFieldByName(h.NodeGraphDataFrameFieldNames.color)}}function x(e){const t=new h.FieldCache(e);return{id:t.getFieldByName(h.NodeGraphDataFrameFieldNames.id),source:t.getFieldByName(h.NodeGraphDataFrameFieldNames.source),target:t.getFieldByName(h.NodeGraphDataFrameFieldNames.target),mainStat:t.getFieldByName(h.NodeGraphDataFrameFieldNames.mainStat),secondaryStat:t.getFieldByName(h.NodeGraphDataFrameFieldNames.secondaryStat),details:y(e,h.NodeGraphDataFrameFieldNames.detail)}}function y(e,t){return e.fields.filter((e=>e.name.match(new RegExp("^"+t))))}function w(e,t){if(e.type===h.FieldType.string)return e.values.get(t);{const s=e.config.decimals||2,a=e.values.get(t);return Number.isFinite(a)?e.values.get(t).toFixed(s)+(e.config.unit?" "+e.config.unit:""):""}}var j,k,S=s("./node_modules/react/jsx-runtime.js");const C=40,T=e=>({mainGroup:g.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:g.css`
    fill: ${e.components.panel.background};
  `,hoverCircle:g.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${e.colors.primary.text};
  `,text:g.css`
    fill: ${e.colors.text.primary};
  `,titleText:g.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${f()(e.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:g.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:g.css`
    width: 200px;
    & span {
      background-color: ${f()(e.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `}),N=(0,a.memo)((function(e){const{node:t,onMouseEnter:s,onMouseLeave:a,onClick:n,hovering:r}=e,l=(0,o.useStyles2)(T);return void 0===t.x||void 0===t.y?null:(0,S.jsxs)("g",{"data-node-id":t.id,className:l.mainGroup,onMouseEnter:()=>{s(t.id)},onMouseLeave:()=>{a(t.id)},onClick:e=>{n(e,t)},"aria-label":`Node: ${t.title}`,children:[(0,S.jsx)("circle",{className:l.mainCircle,r:C,cx:t.x,cy:t.y}),r&&(0,S.jsx)("circle",{className:l.hoverCircle,r:37,cx:t.x,cy:t.y,strokeWidth:2}),(0,S.jsx)(O,{node:t}),(0,S.jsxs)("g",{className:l.text,children:[(0,S.jsx)("foreignObject",{x:t.x-(r?100:35),y:t.y-15,width:r?"200":"70",height:"30",children:(0,S.jsxs)("div",{className:i()(l.statsText,r&&l.textHovering),children:[(0,S.jsx)("span",{children:t.mainStat&&w(t.mainStat,t.dataFrameRowIndex)}),j||(j=(0,S.jsx)("br",{})),(0,S.jsx)("span",{children:t.secondaryStat&&w(t.secondaryStat,t.dataFrameRowIndex)})]})}),(0,S.jsx)("foreignObject",{x:t.x-(r?100:50),y:t.y+C+5,width:r?"200":"100",height:"30",children:(0,S.jsxs)("div",{className:i()(l.titleText,r&&l.textHovering),children:[(0,S.jsx)("span",{children:t.title}),k||(k=(0,S.jsx)("br",{})),(0,S.jsx)("span",{children:t.subTitle})]})})]})]})}));function O(e){const{node:t}=e,s=t.arcSections.find((e=>1===e.values.get(t.dataFrameRowIndex))),a=(0,o.useTheme2)();var n;if(s)return(0,S.jsx)("circle",{fill:"none",stroke:a.visualization.getColorByName((null===(n=s.config.color)||void 0===n?void 0:n.fixedColor)||""),strokeWidth:2,r:C,cx:t.x,cy:t.y});const i=t.arcSections.filter((e=>0!==e.values.get(t.dataFrameRowIndex)));if(0===i.length)return(0,S.jsx)("circle",{fill:"none",stroke:t.color?P(t.color,t.dataFrameRowIndex,a):"gray",strokeWidth:2,r:C,cx:t.x,cy:t.y});const{elements:r}=i.reduce(((e,s)=>{var n;const i=(null===(n=s.config.color)||void 0===n?void 0:n.fixedColor)||"",r=s.values.get(t.dataFrameRowIndex),o=(0,S.jsx)(I,{r:C,x:t.x,y:t.y,startPercent:e.percent,percent:r,color:a.visualization.getColorByName(i),strokeWidth:2},i);return e.elements.push(o),e.percent=e.percent+r,e}),{elements:[],percent:0});return(0,S.jsx)(S.Fragment,{children:r})}function I({r:e,x:t,y:s,startPercent:a,percent:n,color:i,strokeWidth:r=2}){const o=a+n,l=t+Math.sin(2*Math.PI*a)*e,c=s-Math.cos(2*Math.PI*a)*e,d=t+Math.sin(2*Math.PI*o)*e,u=s-Math.cos(2*Math.PI*o)*e,p=n>.5?"1":"0";return(0,S.jsx)("path",{fill:"none",d:`M ${l} ${c} A ${e} ${e} 0 ${p} 1 ${d} ${u}`,stroke:i,strokeWidth:r})}function P(e,t,s){return e.config.color?(0,h.getFieldColorModeForField)(e).getCalculator(e,s)(0,e.values.get(t)):e.values.get(t)}const M=(0,a.memo)((function(e){const{edge:t,onClick:s,onMouseEnter:a,onMouseLeave:n,hovering:i}=e,{source:r,target:o}=t,l=b({x1:r.x,y1:r.y,x2:o.x,y2:o.y},90);return(0,S.jsxs)("g",{onClick:e=>s(e,t),style:{cursor:"pointer"},"aria-label":`Edge from: ${t.source.id} to: ${t.target.id}`,children:[(0,S.jsx)("line",{strokeWidth:i?2:1,stroke:"#999",x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,markerEnd:"url(#triangle)"}),(0,S.jsx)("line",{stroke:"transparent",x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,strokeWidth:20,onMouseEnter:()=>{a(t.id)},onMouseLeave:()=>{n(t.id)}})]})}));var F=s("./node_modules/@emotion/css/dist/emotion-css.esm.js");function A(){return{wrapper:F.css`
      label: wrapper;
      pointer-events: all;
    `}}function D(e){const{config:t,onConfigChange:s,onPlus:n,onMinus:i,disableZoomOut:r,disableZoomIn:l}=e,[c,d]=(0,a.useState)(!1),u=(0,o.useStyles)(A);return(0,S.jsxs)("div",{className:u.wrapper,children:[(0,S.jsxs)(o.VerticalGroup,{spacing:"sm",children:[(0,S.jsxs)(o.HorizontalGroup,{spacing:"xs",children:[(0,S.jsx)(o.Button,{icon:"plus-circle",onClick:n,size:"md",title:"Zoom in",variant:"secondary",disabled:l}),(0,S.jsx)(o.Button,{icon:"minus-circle",onClick:i,size:"md",title:"Zoom out",variant:"secondary",disabled:r})]}),(0,S.jsxs)(o.HorizontalGroup,{spacing:"xs",children:[(0,S.jsx)(o.Button,{icon:"code-branch",onClick:()=>s(Object.assign({},t,{gridLayout:!1})),size:"md",title:"Default layout",variant:"secondary",disabled:!t.gridLayout}),(0,S.jsx)(o.Button,{icon:"apps",onClick:()=>s(Object.assign({},t,{gridLayout:!0})),size:"md",title:"Grid layout",variant:"secondary",disabled:t.gridLayout})]})]}),false,false]})}const $={stepDown:e=>e/1.5,stepUp:e=>1.5*e,min:.13,max:2.25};var L=s("./node_modules/lodash/lodash.js");function E(e,t,s,n,i){const[r,o]=(0,a.useMemo)((()=>{if(!e.length||!t.length)return[{},{}];return[t.reduce(((e,t)=>{var s,a;return e[t.source.id]=[...null!==(s=e[t.source.id])&&void 0!==s?s:[],t],e[t.target.id]=[...null!==(a=e[t.target.id])&&void 0!==a?a:[],t],e}),{}),e.reduce(((e,t)=>(e[t.id]=t,e)),{})]}),[t,e]);return(0,a.useMemo)((()=>e.length<=s?{nodes:e,edges:t}:n.gridLayout?function(e,t,s){let a=0,n=t,i=[];if(s){const r=e.findIndex((e=>e.id===s)),o=Math.floor(t/2);let l=o;a=r-o,a<0&&(l+=Math.abs(a),a=0),n=r+l+1,n>e.length&&(a>0&&(a=Math.max(0,a-(n-e.length))),n=e.length),a>1&&i.push({node:e[a-1],count:a}),e.length-n>1&&i.push({node:e[n],count:e.length-n})}else e.length-t>1&&(i=[{node:e[t],count:e.length-t}]);return{nodes:e.slice(a,n),edges:[],markers:i}}(e,s,i):function(e,t,s,a,n,i){let r;i?r=[s[i]]:(r=e.filter((e=>0===e.incoming)),r.length||(r=[e[0]]));const{visibleNodes:o,markers:l}=function(e,t,s,a){const n={};let i=[...t];for(;Object.keys(n).length<e&&i.length>0;){let e=i.shift();if(n[e.id])continue;n[e.id]=e;const t=(a[e.id]||[]).map((t=>{const a=t.source.id===e.id?t.target.id:t.source.id;return s[a]}));i=i.concat(t)}const r=(0,L.uniq)(i.filter((e=>!n[e.id])));return{visibleNodes:n,markers:r}}(n,r,s,a),c=function(e,t,s,a){return e.map((e=>{const n={};let i=0,r=[e];for(;r.length>0&&i<=101;){let e=r.shift();if(t[e.id]||n[e.id])continue;n[e.id]||i++,n[e.id]=e;const o=(a[e.id]||[]).map((t=>{const a=t.source.id===e.id?t.target.id:t.source.id;return s[a]}));r=r.concat(o)}return{node:e,count:i}}))}(l,o,s,a),d=(0,L.fromPairs)(c.map((e=>[e.node.id,e])));for(const e of c)1===e.count&&(delete d[e.node.id],o[e.node.id]=e.node);const u=t.filter((e=>(o[e.source.id]||d[e.source.id])&&(o[e.target.id]||d[e.target.id])));return{nodes:Object.values(o),edges:u,markers:Object.values(d)}}(e,t,o,r,s,i)),[t,r,s,e,o,i,n.gridLayout])}var R=s("./node_modules/worker-loader/dist/runtime/inline.js"),_=s.n(R);function V(){return _()('(()=>{"use strict";var t={value:()=>{}};function n(){for(var t,n=0,e=arguments.length,i={};n<e;++n){if(!(t=arguments[n]+"")||t in i||/[\\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new r(i)}function r(t){this._=t}function e(t,n){return t.trim().split(/^|\\s+/).map((function(t){var r="",e=t.indexOf(".");if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}}))}function i(t,n){for(var r,e=0,i=t.length;e<i;++e)if((r=t[e]).name===n)return r.value}function o(n,r,e){for(var i=0,o=n.length;i<o;++i)if(n[i].name===r){n[i]=t,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=e&&n.push({name:r,value:e}),n}r.prototype=n.prototype={constructor:r,on:function(t,n){var r,u=this._,a=e(t+"",u),f=-1,s=a.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++f<s;)if(r=(t=a[f]).type)u[r]=o(u[r],t.name,n);else if(null==n)for(r in u)u[r]=o(u[r],t.name,null);return this}for(;++f<s;)if((r=(t=a[f]).type)&&(r=i(u[r],t.name)))return r},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new r(t)},call:function(t,n){if((r=arguments.length-2)>0)for(var r,e,i=new Array(r),o=0;o<r;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,r=(e=this._[t]).length;o<r;++o)e[o].value.apply(n,i)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var e=this._[t],i=0,o=e.length;i<o;++i)e[i].value.apply(n,r)}};const u=n;var a,f,s=0,l=0,h=0,c=0,y=0,x=0,v="object"==typeof performance&&performance.now?performance:Date,_="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function g(){return y||(_(p),y=v.now()+x)}function p(){y=0}function d(){this._call=this._time=this._next=null}function w(t,n,r){var e=new d;return e.restart(t,n,r),e}function m(){y=(c=v.now())+x,s=l=0;try{!function(){g(),++s;for(var t,n=a;n;)(t=y-n._time)>=0&&n._call.call(null,t),n=n._next;--s}()}finally{s=0,function(){var t,n,r=a,e=1/0;for(;r;)r._call?(e>r._time&&(e=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:a=n);f=t,A(e)}(),y=0}}function N(){var t=v.now(),n=t-c;n>1e3&&(x-=n,c=t)}function A(t){s||(l&&(l=clearTimeout(l)),t-y>24?(t<1/0&&(l=setTimeout(m,t-v.now()-x)),h&&(h=clearInterval(h))):(h||(c=v.now(),h=setInterval(N,1e3)),s=1,_(m)))}d.prototype=w.prototype={constructor:d,restart:function(t,n,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?g():+r)+(null==n?0:+n),this._next||f===this||(f?f._next=this:a=this,f=this),this._call=t,this._time=r,A()},stop:function(){this._call&&(this._call=null,this._time=1/0,A())}};const k=4294967296;var b=Math.PI*(3-Math.sqrt(5));function M(t){var n,r=1,e=.001,i=1-Math.pow(e,1/300),o=0,a=.6,f=new Map,s=w(c),l=u("tick","end"),h=function(){let t=1;return()=>(t=(1664525*t+1013904223)%k)/k}();function c(){y(),l.call("tick",n),r<e&&(s.stop(),l.call("end",n))}function y(e){var u,s,l=t.length;void 0===e&&(e=1);for(var h=0;h<e;++h)for(r+=(o-r)*i,f.forEach((function(t){t(r)})),u=0;u<l;++u)null==(s=t[u]).fx?s.x+=s.vx*=a:(s.x=s.fx,s.vx=0),null==s.fy?s.y+=s.vy*=a:(s.y=s.fy,s.vy=0);return n}function x(){for(var n,r=0,e=t.length;r<e;++r){if((n=t[r]).index=r,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=10*Math.sqrt(.5+r),o=r*b;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function v(n){return n.initialize&&n.initialize(t,h),n}return null==t&&(t=[]),x(),n={tick:y,restart:function(){return s.restart(c),n},stop:function(){return s.stop(),n},nodes:function(r){return arguments.length?(t=r,x(),f.forEach(v),n):t},alpha:function(t){return arguments.length?(r=+t,n):r},alphaMin:function(t){return arguments.length?(e=+t,n):e},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},randomSource:function(t){return arguments.length?(h=t,f.forEach(v),n):h},force:function(t,r){return arguments.length>1?(null==r?f.delete(t):f.set(t,v(r)),n):f.get(t)},find:function(n,r,e){var i,o,u,a,f,s=0,l=t.length;for(null==e?e=1/0:e*=e,s=0;s<l;++s)(u=(i=n-(a=t[s]).x)*i+(o=r-a.y)*o)<e&&(f=a,e=u);return f},on:function(t,r){return arguments.length>1?(l.on(t,r),n):l.on(t)}}}function E(t){return function(){return t}}function q(t){return 1e-6*(t()-.5)}function z(t){return t.index}function T(t,n){var r=t.get(n);if(!r)throw new Error("node not found: "+n);return r}function j(t,n,r,e){if(isNaN(n)||isNaN(r))return t;var i,o,u,a,f,s,l,h,c,y=t._root,x={data:e},v=t._x0,_=t._y0,g=t._x1,p=t._y1;if(!y)return t._root=x,t;for(;y.length;)if((s=n>=(o=(v+g)/2))?v=o:g=o,(l=r>=(u=(_+p)/2))?_=u:p=u,i=y,!(y=y[h=l<<1|s]))return i[h]=x,t;if(a=+t._x.call(null,y.data),f=+t._y.call(null,y.data),n===a&&r===f)return x.next=y,i?i[h]=x:t._root=x,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(s=n>=(o=(v+g)/2))?v=o:g=o,(l=r>=(u=(_+p)/2))?_=u:p=u}while((h=l<<1|s)==(c=(f>=u)<<1|a>=o));return i[c]=y,i[h]=x,t}function D(t,n,r,e,i){this.node=t,this.x0=n,this.y0=r,this.x1=e,this.y1=i}function O(t){return t[0]}function P(t){return t[1]}function I(t,n,r){var e=new L(null==n?O:n,null==r?P:r,NaN,NaN,NaN,NaN);return null==t?e:e.addAll(t)}function L(t,n,r,e,i,o){this._x=t,this._y=n,this._x0=r,this._y0=e,this._x1=i,this._y1=o,this._root=void 0}function S(t){for(var n={data:t.data},r=n;t=t.next;)r=r.next={data:t.data};return n}var F=I.prototype=L.prototype;function R(t){return t.x+t.vx}function X(t){return t.y+t.vy}F.copy=function(){var t,n,r=new L(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root;if(!e)return r;if(!e.length)return r._root=S(e),r;for(t=[{source:e,target:r._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?t.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=S(n));return r},F.add=function(t){const n=+this._x.call(null,t),r=+this._y.call(null,t);return j(this.cover(n,r),n,r,t)},F.addAll=function(t){var n,r,e,i,o=t.length,u=new Array(o),a=new Array(o),f=1/0,s=1/0,l=-1/0,h=-1/0;for(r=0;r<o;++r)isNaN(e=+this._x.call(null,n=t[r]))||isNaN(i=+this._y.call(null,n))||(u[r]=e,a[r]=i,e<f&&(f=e),e>l&&(l=e),i<s&&(s=i),i>h&&(h=i));if(f>l||s>h)return this;for(this.cover(f,s).cover(l,h),r=0;r<o;++r)j(this,u[r],a[r],t[r]);return this},F.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,e=this._y0,i=this._x1,o=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,o=(e=Math.floor(n))+1;else{for(var u,a,f=i-r||1,s=this._root;r>t||t>=i||e>n||n>=o;)switch(a=(n<e)<<1|t<r,(u=new Array(4))[a]=s,s=u,f*=2,a){case 0:i=r+f,o=e+f;break;case 1:r=i-f,o=e+f;break;case 2:i=r+f,e=o-f;break;case 3:r=i-f,e=o-f}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=e,this._x1=i,this._y1=o,this},F.data=function(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t},F.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},F.find=function(t,n,r){var e,i,o,u,a,f,s,l=this._x0,h=this._y0,c=this._x1,y=this._y1,x=[],v=this._root;for(v&&x.push(new D(v,l,h,c,y)),null==r?r=1/0:(l=t-r,h=n-r,c=t+r,y=n+r,r*=r);f=x.pop();)if(!(!(v=f.node)||(i=f.x0)>c||(o=f.y0)>y||(u=f.x1)<l||(a=f.y1)<h))if(v.length){var _=(i+u)/2,g=(o+a)/2;x.push(new D(v[3],_,g,u,a),new D(v[2],i,g,_,a),new D(v[1],_,o,u,g),new D(v[0],i,o,_,g)),(s=(n>=g)<<1|t>=_)&&(f=x[x.length-1],x[x.length-1]=x[x.length-1-s],x[x.length-1-s]=f)}else{var p=t-+this._x.call(null,v.data),d=n-+this._y.call(null,v.data),w=p*p+d*d;if(w<r){var m=Math.sqrt(r=w);l=t-m,h=n-m,c=t+m,y=n+m,e=v.data}}return e},F.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var n,r,e,i,o,u,a,f,s,l,h,c,y=this._root,x=this._x0,v=this._y0,_=this._x1,g=this._y1;if(!y)return this;if(y.length)for(;;){if((s=o>=(a=(x+_)/2))?x=a:_=a,(l=u>=(f=(v+g)/2))?v=f:g=f,n=y,!(y=y[h=l<<1|s]))return this;if(!y.length)break;(n[h+1&3]||n[h+2&3]||n[h+3&3])&&(r=n,c=h)}for(;y.data!==t;)if(e=y,!(y=y.next))return this;return(i=y.next)&&delete y.next,e?(i?e.next=i:delete e.next,this):n?(i?n[h]=i:delete n[h],(y=n[0]||n[1]||n[2]||n[3])&&y===(n[3]||n[2]||n[1]||n[0])&&!y.length&&(r?r[c]=y:this._root=y),this):(this._root=i,this)},F.removeAll=function(t){for(var n=0,r=t.length;n<r;++n)this.remove(t[n]);return this},F.root=function(){return this._root},F.size=function(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t},F.visit=function(t){var n,r,e,i,o,u,a=[],f=this._root;for(f&&a.push(new D(f,this._x0,this._y0,this._x1,this._y1));n=a.pop();)if(!t(f=n.node,e=n.x0,i=n.y0,o=n.x1,u=n.y1)&&f.length){var s=(e+o)/2,l=(i+u)/2;(r=f[3])&&a.push(new D(r,s,l,o,u)),(r=f[2])&&a.push(new D(r,e,l,s,u)),(r=f[1])&&a.push(new D(r,s,i,o,l)),(r=f[0])&&a.push(new D(r,e,i,s,l))}return this},F.visitAfter=function(t){var n,r=[],e=[];for(this._root&&r.push(new D(this._root,this._x0,this._y0,this._x1,this._y1));n=r.pop();){var i=n.node;if(i.length){var o,u=n.x0,a=n.y0,f=n.x1,s=n.y1,l=(u+f)/2,h=(a+s)/2;(o=i[0])&&r.push(new D(o,u,a,l,h)),(o=i[1])&&r.push(new D(o,l,a,f,h)),(o=i[2])&&r.push(new D(o,u,h,l,s)),(o=i[3])&&r.push(new D(o,l,h,f,s))}e.push(n)}for(;n=e.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},F.x=function(t){return arguments.length?(this._x=t,this):this._x},F.y=function(t){return arguments.length?(this._y=t,this):this._y},addEventListener("message",(t=>{const{nodes:n,edges:r,config:e}=t.data;!function(t,n,r){let{roots:e,secondLevelRoots:i}=function(t,n){const r={},e=t.reduce(((t,n)=>(t[n.id]=n,t)),{}),i=n.reduce(((t,n)=>{const r=n.source;return t[r]=[...t[r]||[],n],t}),{});let o=t.filter((t=>0===t.incoming));o.length||(o=[t[0]]);let u=o.reduce(((t,n)=>(t.push(...i[n.id]?i[n.id].map((t=>e[t.target])):[]),t)),[]);const a=300,f=200,s=200;let l=0;for(const t of o){let n=[t],o=0;for(;n.length>0;){const t=[];let u=l;for(const a of n)r[a.id]||(a.x=o,a.y=u,r[a.id]=!0,u+=f,i[a.id]&&t.push(...i[a.id].map((t=>e[t.target]))));n=t,o+=s,u=l}l+=a}return{roots:o,secondLevelRoots:u}}(t,n);[...e,...i].forEach(((t,n)=>{t.fx=t.x}));const o=M(t).force("link",function(t){var n,r,e,i,o,u,a=z,f=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},s=E(30),l=1;function h(e){for(var i=0,a=t.length;i<l;++i)for(var f,s,h,c,y,x,v,_=0;_<a;++_)s=(f=t[_]).source,c=(h=f.target).x+h.vx-s.x-s.vx||q(u),y=h.y+h.vy-s.y-s.vy||q(u),c*=x=((x=Math.sqrt(c*c+y*y))-r[_])/x*e*n[_],y*=x,h.vx-=c*(v=o[_]),h.vy-=y*v,s.vx+=c*(v=1-v),s.vy+=y*v}function c(){if(e){var u,f,s=e.length,l=t.length,h=new Map(e.map(((t,n)=>[a(t,n,e),t])));for(u=0,i=new Array(s);u<l;++u)(f=t[u]).index=u,"object"!=typeof f.source&&(f.source=T(h,f.source)),"object"!=typeof f.target&&(f.target=T(h,f.target)),i[f.source.index]=(i[f.source.index]||0)+1,i[f.target.index]=(i[f.target.index]||0)+1;for(u=0,o=new Array(l);u<l;++u)f=t[u],o[u]=i[f.source.index]/(i[f.source.index]+i[f.target.index]);n=new Array(l),y(),r=new Array(l),x()}}function y(){if(e)for(var r=0,i=t.length;r<i;++r)n[r]=+f(t[r],r,t)}function x(){if(e)for(var n=0,i=t.length;n<i;++n)r[n]=+s(t[n],n,t)}return null==t&&(t=[]),h.initialize=function(t,n){e=t,u=n,c()},h.links=function(n){return arguments.length?(t=n,c(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(l=+t,h):l},h.strength=function(t){return arguments.length?(f="function"==typeof t?t:E(+t),y(),h):f},h.distance=function(t){return arguments.length?(s="function"==typeof t?t:E(+t),x(),h):s},h}(n).id((t=>t.id)).distance(r.linkDistance).strength(r.linkStrength)).force("x",function(t){var n,r,e,i=E(.1);function o(t){for(var i,o=0,u=n.length;o<u;++o)(i=n[o]).vx+=(e[o]-i.x)*r[o]*t}function u(){if(n){var o,u=n.length;for(r=new Array(u),e=new Array(u),o=0;o<u;++o)r[o]=isNaN(e[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=E(null==t?0:+t)),o.initialize=function(t){n=t,u()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:E(+t),u(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:E(+n),u(),o):t},o}(r.forceX).strength(r.forceXStrength)).force("collide",function(t){var n,r,e,i=1,o=1;function u(){for(var t,u,f,s,l,h,c,y=n.length,x=0;x<o;++x)for(u=I(n,R,X).visitAfter(a),t=0;t<y;++t)f=n[t],h=r[f.index],c=h*h,s=f.x+f.vx,l=f.y+f.vy,u.visit(v);function v(t,n,r,o,u){var a=t.data,y=t.r,x=h+y;if(!a)return n>s+x||o<s-x||r>l+x||u<l-x;if(a.index>f.index){var v=s-a.x-a.vx,_=l-a.y-a.vy,g=v*v+_*_;g<x*x&&(0===v&&(g+=(v=q(e))*v),0===_&&(g+=(_=q(e))*_),g=(x-(g=Math.sqrt(g)))/g*i,f.vx+=(v*=g)*(x=(y*=y)/(c+y)),f.vy+=(_*=g)*x,a.vx-=v*(x=1-x),a.vy-=_*x)}}}function a(t){if(t.data)return t.r=r[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function f(){if(n){var e,i,o=n.length;for(r=new Array(o),e=0;e<o;++e)i=n[e],r[i.index]=+t(i,e,n)}}return"function"!=typeof t&&(t=E(null==t?1:+t)),u.initialize=function(t,r){n=t,e=r,f()},u.iterations=function(t){return arguments.length?(o=+t,u):o},u.strength=function(t){return arguments.length?(i=+t,u):i},u.radius=function(n){return arguments.length?(t="function"==typeof n?n:E(+n),f(),u):t},u}(r.forceCollide));o.tick(r.tick),o.stop(),function(t){const n=function(t){if(0===t.length)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const n=t.reduce(((t,n)=>(n.x>t.right&&(t.right=n.x),n.x<t.left&&(t.left=n.x),n.y>t.bottom&&(t.bottom=n.y),n.y<t.top&&(t.top=n.y),t)),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),r=n.top+(n.bottom-n.top)/2,e=n.left+(n.right-n.left)/2;return{...n,center:{x:e,y:r}}}(t);for(let r of t)r.x=r.x-n.center.x,r.y=r.y-n.center.y}(t)}(n,r,e),postMessage({nodes:n,edges:r})}))})();\n//# sourceMappingURL=layout.worker.9b6f5d081aab471c9d6e.worker.js.map',"Worker",void 0,s.p+"layout.worker.9b6f5d081aab471c9d6e.worker.js")}const B={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function z(e,t,s=B,n,i,r){const[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[p,h]=(0,a.useState)(!1),g=(0,l.default)();(0,a.useEffect)((()=>{if(0===e.length)return c([]),void u([]);h(!0),function(e,t,s){const a=new V;a.onmessage=t=>{for(let s=0;s<e.length;s++)t.data.nodes[s]=Object.assign({},e[s],t.data.nodes[s]);s(t.data)},a.postMessage({nodes:e.map((e=>({id:e.id,incoming:e.incoming}))),edges:t,config:B})}(e,t,(({nodes:e,edges:t})=>{g()&&(c(e),u(t),h(!1))}))}),[e,t,g]);const[m,f]=(0,a.useMemo)((()=>{if(0===e.length)return[[],[]];const a=e.map((e=>Object.assign({},e))),n=t.map((e=>Object.assign({},e)));return function(e,t,s){const a=140,n=120,i=n/2,r=Math.min(Math.floor((t-2*i)/a),e.length),o=Math.floor((r-1)*n/2);s&&e.sort(((e,t)=>{const a=s.field.values.get(e.dataFrameRowIndex),n=s.field.values.get(t.dataFrameRowIndex);return s.ascending?a-n:n-a}));for(const[t,s]of e.entries()){const e=Math.floor(t/r),i=t%r;s.x=i*n-o,s.y=e*a-60}}(a,i,s.sort),[a,n]}),[s.sort,e,t,i]),{nodes:b,edges:v,markers:x}=E(s.gridLayout?m:o,s.gridLayout?f:d,n,s,r),y=(0,a.useMemo)((()=>function(e){if(0===e.length)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const t=e.reduce(((e,t)=>(t.x>e.right&&(e.right=t.x),t.x<e.left&&(e.left=t.x),t.y>e.bottom&&(e.bottom=t.y),t.y<e.top&&(e.top=t.y),e)),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),s=t.top+(t.bottom-t.top)/2,a=t.left+(t.right-t.left)/2;return Object.assign({},t,{center:{x:a,y:s}})}([...b,...(x||[]).map((e=>e.node))])),[b,x]);return{nodes:b,edges:v,markers:x,bounds:y,hiddenNodesCount:e.length-b.length,loading:p}}var U;function q(){return U||(U=(0,S.jsx)("defs",{children:(0,S.jsx)("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto",children:(0,S.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})})}))}var H=s("./public/app/plugins/panel/nodeGraph/useCategorizeFrames.ts");const G=e=>({mainGroup:F.css`
      pointer-events: none;
      font-size: 8px;
    `,background:F.css`
      fill: ${e.components.tooltip.background};
    `,text:F.css`
      fill: ${e.components.tooltip.text};
    `}),W=(0,a.memo)((function(e){const{edge:t}=e,{source:s,target:a}=t,n=b({x1:s.x,y1:s.y,x2:a.x,y2:a.y},90),i={x:n.x1+(n.x2-n.x1)/2,y:n.y1+(n.y2-n.y1)/2},r=(0,o.useStyles2)(G);return(0,S.jsxs)("g",{className:r.mainGroup,children:[(0,S.jsx)("rect",{className:r.background,x:i.x-40,y:i.y-15,width:"80",height:"30",rx:"5"}),(0,S.jsx)("text",{className:r.text,x:i.x,y:i.y-5,textAnchor:"middle",children:t.mainStat}),(0,S.jsx)("text",{className:r.text,x:i.x,y:i.y+10,textAnchor:"middle",children:t.secondaryStat})]})}));function Z(e,t,s){if(!(e.length||null!=s&&s.length))return;const a=function(e){const t="Open in Explore",s=e.reduce(((e,s)=>{let a,n;return-1!==s.title.indexOf("/")?(a=s.title.split("/")[0],n=s.title.split("/")[1],e[a]=e[a]||[],e[a].push({l:s,newTitle:n})):(e[t]=e[t]||[],e[t].push({l:s})),e}),{});return Object.keys(s).map((e=>({label:e,ariaLabel:e,items:s[e].map((e=>({label:e.newTitle||e.l.title,ariaLabel:e.newTitle||e.l.title,url:e.l.href,onClick:e.l.onClick})))})))}(e);return()=>{let e=null==a?void 0:a.map(((e,s)=>(0,S.jsx)(o.MenuGroup,{label:e.label,children:(e.items||[]).map(Q(t))},`${e.label}${s}`)));return s&&(e=[...s.map(Q(t)),...e]),e}}function Q(e){return function(t){return(0,S.jsx)(o.MenuItem,{url:t.url,label:t.label,ariaLabel:t.ariaLabel,onClick:t.onClick?()=>{var s;return null===(s=t.onClick)||void 0===s?void 0:s.call(t,e)}:void 0,target:"_self"},t.label)}}function K(e){const t=e.node.dataFrameRowIndex,s=v(e.nodes);return(0,S.jsxs)("div",{children:[s.title&&(0,S.jsx)(X,{field:s.title,index:t}),s.subTitle&&(0,S.jsx)(X,{field:s.subTitle,index:t}),s.details.map((e=>(0,S.jsx)(X,{field:e,index:t},e.name)))]})}function Y(e){const t=e.edge.dataFrameRowIndex,s=x(e.edges);return(0,S.jsx)("div",{children:s.details.map((e=>(0,S.jsx)(X,{field:e,index:t},e.name)))})}const J=(0,o.stylesFactory)((e=>({label:F.css`
      label: Label;
      line-height: 1.25;
      margin: ${e.spacing.formLabelMargin};
      padding: ${e.spacing.formLabelPadding};
      color: ${e.colors.textFaint};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.weight.semibold};
    `,value:F.css`
      label: Value;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.formLabel};
      margin-top: ${e.spacing.xxs};
      display: block;
    `})));function X(e){const{field:t,index:s}=e,a=t.values.get(s)||"",n=J((0,o.useTheme)());return(0,S.jsxs)("div",{className:n.label,children:[(0,S.jsx)("div",{children:t.config.displayName||t.name}),(0,S.jsx)("span",{className:n.value,children:a})]})}const ee=(0,o.stylesFactory)((e=>({mainGroup:g.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:g.css`
    fill: ${e.colors.panelBg};
    stroke: ${e.colors.border3};
  `,text:g.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}))),te=(0,a.memo)((function(e){const{marker:t,onClick:s}=e,{node:a}=t,n=ee((0,o.useTheme)());return void 0===a.x||void 0===a.y?null:(0,S.jsxs)("g",{"data-node-id":a.id,className:n.mainGroup,onClick:e=>{null==s||s(e,t)},"aria-label":`Hidden nodes marker: ${a.id}`,children:[(0,S.jsx)("circle",{className:n.mainCircle,r:40,cx:a.x,cy:a.y}),(0,S.jsx)("g",{children:(0,S.jsx)("foreignObject",{x:a.x-25,y:a.y-25,width:"50",height:"50",children:(0,S.jsx)("div",{className:n.text,children:(0,S.jsxs)("span",{children:[t.count>100?">100":t.count," nodes"]})})})})]})}));var se=s("./packages/grafana-schema/src/index.ts");function ae(){return{item:F.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:F.css`
      label: Legend;
      pointer-events: all;
    `}}const ne=function(e){const{nodes:t,onSort:s,sort:n,sortable:i}=e,r=(0,o.useTheme)(),l=(0,o.useStyles)(ae),c=function(e,t){if(!e.length)return[];const s=[e[0].mainStat,e[0].secondaryStat].filter(L.identity),a=e.find((e=>e.arcSections.length>0));var n,i;a&&(null===(n=a.arcSections[0].config)||void 0===n||null===(i=n.color)||void 0===i?void 0:i.mode)===h.FieldColorModeId.Fixed&&s.push(...new Set(e.map((e=>e.arcSections)).flat()));e[0].color&&s.push(e[0].color);return s.map((e=>{var s,a,n;const i={label:e.config.displayName||e.name,yAxis:0,data:{field:e}};var r;if((null===(s=e.config.color)||void 0===s?void 0:s.mode)===h.FieldColorModeId.Fixed&&null!==(a=e.config.color)&&void 0!==a&&a.fixedColor)i.color=(0,h.getColorForTheme)((null===(r=e.config.color)||void 0===r?void 0:r.fixedColor)||"",t);else if(null!==(n=e.config.color)&&void 0!==n&&n.mode){var o;i.gradient=null===(o=e.config.color)||void 0===o?void 0:o.mode}return i.color||i.gradient||(i.color=(0,h.getColorForTheme)("",t)),i}))}(t,r),d=(0,a.useCallback)((e=>{s({field:e.data.field,ascending:e.data.field===(null==n?void 0:n.field)&&!(null!=n&&n.ascending)})}),[n,s]);return(0,S.jsx)(o.VizLegend,{className:l.legend,displayMode:se.jK.List,placement:"bottom",items:c,itemRenderer:e=>(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(o.VizLegendListItem,{item:e,className:l.item,onLabelClick:i?d:void 0}),i&&((null==n?void 0:n.field)===e.data.field?(0,S.jsx)(o.Icon,{name:n.ascending?"arrow-up":"arrow-down"}):"")]})})};var ie,re,oe;const le=e=>({wrapper:F.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:F.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:F.css`
    label: svgPanning;
    user-select: none;
  `,mainGroup:F.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:F.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:F.css`
    label: legend;
    background: ${e.colors.background.secondary};
    box-shadow: ${e.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,alert:F.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${e.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${e.colors.warning.main};
    color: ${e.colors.warning.contrastText};
  `,loadingWrapper:F.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `});function ce({getLinks:e,dataFrames:t,nodeLimit:s}){const n=s||200,{edges:u,nodes:p}=(0,H.Y)(t),[h,{width:g,height:m}]=(0,r.Z)(),[f,b]=(0,a.useState)(B),{nodeHover:y,setNodeHover:j,clearNodeHover:k,edgeHover:C,setEdgeHover:T,clearEdgeHover:N}=function(){const[e,t]=(0,a.useState)(void 0),s=(0,a.useCallback)((()=>t(void 0)),[t]),[n,i]=(0,a.useState)(void 0),r=(0,a.useCallback)((()=>i(void 0)),[i]);return{nodeHover:e,setNodeHover:t,clearNodeHover:s,edgeHover:n,setEdgeHover:i,clearEdgeHover:r}}(),O=p[0],I=u[0],P=(0,o.useTheme2)(),M=(0,a.useMemo)((()=>function(e,t,s){if(!e)return{nodes:[],edges:[]};const a=v(e);if(!a.id)throw new Error("id field is required for nodes data frame.");const n=a.id.values.toArray().reduce(((e,t,s)=>{var n;return e[t]={id:t,title:(null===(n=a.title)||void 0===n?void 0:n.values.get(s))||"",subTitle:a.subTitle?a.subTitle.values.get(s):"",dataFrameRowIndex:s,incoming:0,mainStat:a.mainStat,secondaryStat:a.secondaryStat,arcSections:a.arc,color:a.color},e}),{})||{};let i=[];if(t){const e=x(t);if(!e.id)throw new Error("id field is required for edges data frame.");i=e.id.values.toArray().map(((t,s)=>{var a,i;const r=null===(a=e.target)||void 0===a?void 0:a.values.get(s),o=null===(i=e.source)||void 0===i?void 0:i.values.get(s);return n[r].incoming++,{id:t,dataFrameRowIndex:s,source:o,target:r,mainStat:e.mainStat?w(e.mainStat,s):"",secondaryStat:e.secondaryStat?w(e.secondaryStat,s):""}}))}return{nodes:Object.values(n),edges:i||[],legend:a.arc.map((e=>{var t,s;return{color:null!==(t=null===(s=e.config.color)||void 0===s?void 0:s.fixedColor)&&void 0!==t?t:"",name:e.config.displayName||e.name}}))}}(O,I)),[I,O,P]),[F,A]=(0,a.useState)(),L=(0,a.useCallback)(((e,t)=>A(t.node.id)),[A]),{nodes:E,edges:R,markers:_,bounds:V,hiddenNodesCount:U,loading:G}=z(M.nodes,M.edges,f,n,g,F),W=function(e,t,s){let a;if(!0===(0,c.Z)(e.gridLayout)&&!e.gridLayout&&s){const e=t.find((e=>e.id===s));e&&(a={x:-e.x,y:-e.y})}return a}(f,E,F),{panRef:Q,zoomRef:J,onStepUp:X,onStepDown:ee,isPanning:te,position:se,scale:ae,isMaxZoom:ce,isMinZoom:ge}=function(e,t){const{scale:s,onStepDown:n,onStepUp:i,ref:r,isMax:o,isMin:l}=function({stepUp:e,stepDown:t,min:s,max:n}=$){const i=(0,a.useRef)(null),[r,o]=(0,a.useState)(1),l=(0,a.useCallback)((()=>{r<(null!=n?n:1/0)&&o(e(r))}),[r,e,n]),c=(0,a.useCallback)((()=>{r>(null!=s?s:-1/0)&&o(t(r))}),[r,t,s]),d=(0,a.useCallback)((function(e){const t=e;(t.ctrlKey||t.metaKey)&&(e.preventDefault(),t.deltaY<0?l():t.deltaY>0&&c())}),[c,l]);return(0,a.useEffect)((()=>{if(!i.current)return;const e=i.current;return e.addEventListener("wheel",d,{passive:!1}),()=>{e&&e.removeEventListener("wheel",d)}}),[d]),{onStepUp:l,onStepDown:c,scale:Math.max(Math.min(r,null!=n?n:1/0),null!=s?s:-1/0),isMax:r>=(null!=n?n:1/0),isMin:r<=(null!=s?s:-1/0),ref:i}}(),{state:c,ref:u}=d({scale:s,bounds:e,focus:t}),{position:p,isPanning:h}=c;return{zoomRef:r,panRef:u,position:p,isPanning:h,scale:s,onStepDown:n,onStepUp:i,isMaxZoom:o,isMinZoom:l}}(V,W),{onEdgeOpen:me,onNodeOpen:fe,MenuComponent:be}=function(e,t,s,n,i,r){const[l,c]=(0,a.useState)(void 0),d=(0,a.useCallback)(((s,a)=>{var l;const d=n.gridLayout?[{label:"Show in Graph layout",onClick:e=>{r(e.id),i(Object.assign({},n,{gridLayout:!1}))}}]:void 0,u=Z(e(t,a.dataFrameRowIndex),a,d);u&&c((0,S.jsx)(o.ContextMenu,{renderHeader:()=>l||(l=(0,S.jsx)(K,{node:a,nodes:t})),renderMenuItems:u,onClose:()=>c(void 0),x:s.pageX,y:s.pageY}))}),[n,t,e,c,i,r]);return{onEdgeOpen:(0,a.useCallback)(((t,a)=>{var n;const i=Z(e(s,a.dataFrameRowIndex),a);i&&c((0,S.jsx)(o.ContextMenu,{renderHeader:()=>n||(n=(0,S.jsx)(Y,{edge:a,edges:s})),renderMenuItems:i,onClose:()=>c(void 0),x:t.pageX,y:t.pageY}))}),[s,e,c]),onNodeOpen:d,MenuComponent:l}}(e,O,I,f,b,A),ve=(0,o.useStyles2)(le),xe=(0,a.useCallback)((e=>{h(e),J.current=e}),[h,J]),ye=function(e){const[t,s]=(0,a.useState)(),n=(0,l.default)();return(0,a.useEffect)((()=>{e&&(s(e),setTimeout((()=>{n()&&s(void 0)}),500))}),[e,n]),t}(F);return(0,S.jsxs)("div",{ref:xe,className:ve.wrapper,children:[G?(0,S.jsxs)("div",{className:ve.loadingWrapper,children:["Computing layout ",ie||(ie=(0,S.jsx)(o.Spinner,{}))]}):null,(0,S.jsx)("svg",{ref:Q,viewBox:`${-g/2} ${-m/2} ${g} ${m}`,className:i()(ve.svg,te&&ve.svgPanning),children:(0,S.jsxs)("g",{className:ve.mainGroup,style:{transform:`scale(${ae}) translate(${Math.floor(se.x)}px, ${Math.floor(se.y)}px)`},children:[re||(re=(0,S.jsx)(q,{})),!f.gridLayout&&(0,S.jsx)(pe,{edges:R,nodeHoveringId:y,edgeHoveringId:C,onClick:me,onMouseEnter:T,onMouseLeave:N}),(0,S.jsx)(de,{nodes:E,onMouseEnter:j,onMouseLeave:k,onClick:fe,hoveringId:y||ye}),(0,S.jsx)(ue,{markers:_||[],onClick:L}),!f.gridLayout&&(0,S.jsx)(he,{edges:R,nodeHoveringId:y,edgeHoveringId:C})]})}),(0,S.jsxs)("div",{className:ve.viewControls,children:[E.length&&(0,S.jsx)("div",{className:ve.legend,children:(0,S.jsx)(ne,{sortable:f.gridLayout,nodes:E,sort:f.sort,onSort:e=>{b(Object.assign({},f,{sort:e}))}})}),(0,S.jsx)(D,{config:f,onConfigChange:e=>{e.gridLayout!==f.gridLayout&&A(void 0),b(e)},onMinus:ee,onPlus:X,scale:ae,disableZoomIn:ce,disableZoomOut:ge})]}),U>0&&(0,S.jsxs)("div",{className:ve.alert,"aria-label":"Nodes hidden warning",children:[oe||(oe=(0,S.jsx)(o.Icon,{size:"sm",name:"info-circle"}))," ",U," nodes are hidden for performance reasons."]}),be]})}const de=(0,a.memo)((function(e){return(0,S.jsx)(S.Fragment,{children:e.nodes.map((t=>(0,S.jsx)(N,{node:t,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,hovering:e.hoveringId===t.id},t.id)))})})),ue=(0,a.memo)((function(e){return(0,S.jsx)(S.Fragment,{children:e.markers.map((t=>(0,S.jsx)(te,{marker:t,onClick:e.onClick},"marker-"+t.node.id)))})})),pe=(0,a.memo)((function(e){return(0,S.jsx)(S.Fragment,{children:e.edges.map((t=>(0,S.jsx)(M,{edge:t,hovering:t.source.id===e.nodeHoveringId||t.target.id===e.nodeHoveringId||e.edgeHoveringId===t.id,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},t.id)))})})),he=(0,a.memo)((function(e){return(0,S.jsx)(S.Fragment,{children:e.edges.map(((t,s)=>{const a=t.source.id===e.nodeHoveringId||t.target.id===e.nodeHoveringId||e.edgeHoveringId===t.id,n=t.mainStat||t.secondaryStat;return a&&n&&(0,S.jsx)(W,{edge:t},t.id)}))})}))},"./public/app/plugins/panel/nodeGraph/useCategorizeFrames.ts":(e,t,s)=>{"use strict";s.d(t,{Y:()=>n});var a=s("./node_modules/react/index.js");function n(e){return(0,a.useMemo)((()=>e.reduce(((e,t)=>(t.fields.filter((e=>"source"===e.name)).length?e.edges.push(t):e.nodes.push(t),e)),{edges:[],nodes:[]})),[e])}},"./public/app/plugins/panel/stat/module.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{plugin:()=>g});var a=s("./packages/grafana-ui/src/index.ts"),n=s("./packages/grafana-data/src/index.ts"),i=s("./public/app/plugins/panel/stat/types.ts"),r=s("./node_modules/react/index.js"),o=s("./public/app/core/config.ts"),l=s("./packages/grafana-data/src/field/fieldOverrides.ts"),c=s("./node_modules/lodash/lodash.js"),d=s("./node_modules/react/jsx-runtime.js");function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class p extends r.PureComponent{constructor(...e){super(...e),u(this,"renderComponent",((e,t)=>{const{timeRange:s,options:n}=this.props,{value:i,alignmentFactors:r,width:l,height:c,count:u}=e,{openMenu:p,targetClassName:h}=t;let g=i.sparkline;return g&&(g.timeRange=s),(0,d.jsx)(a.BigValue,{value:i.display,count:u,sparkline:g,colorMode:n.colorMode,graphMode:n.graphMode,justifyMode:n.justifyMode,textMode:this.getTextMode(),alignmentFactors:r,text:n.text,width:l,height:c,theme:o.vc.theme2,onClick:p,className:h})})),u(this,"renderValue",(e=>{const{value:t}=e,{getLinks:s,hasLinks:n}=t;return n&&s?(0,d.jsx)(a.DataLinksContextMenu,{links:s,config:t.field,children:t=>this.renderComponent(e,t)}):this.renderComponent(e,{})})),u(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:s,fieldConfig:i,timeZone:r}=this.props;let d;for(let t of e.series)for(let s of t.fields){let{config:t}=s;if(s.type===n.FieldType.number){var u,p,h,g;if(null!==(u=s.state)&&void 0!==u&&u.range)continue;d||(0,c.isNumber)(t.min)&&(0,c.isNumber)(t.max)||(d=(0,l.Xu)(e.series));const a=null!==(p=t.min)&&void 0!==p?p:d.min,n=null!==(h=t.max)&&void 0!==h?h:d.max;s.state=null!==(g=s.state)&&void 0!==g?g:{},s.state.range={min:a,max:n,delta:n-a}}}return(0,n.getFieldDisplayValues)({fieldConfig:i,reduceOptions:t.reduceOptions,replaceVariables:s,theme:o.vc.theme2,data:e.series,sparkline:t.graphMode!==a.BigValueGraphMode.None,timeZone:r})}))}getTextMode(){const{options:e,fieldConfig:t,title:s}=this.props;return e.textMode!==a.BigValueTextMode.Auto||!t.defaults.displayName&&s?e.textMode:a.BigValueTextMode.ValueAndName}render(){const{height:e,options:t,width:s,data:i,renderCounter:r}=this.props;return(0,d.jsx)(a.VizRepeater,{getValues:this.getValues,getAlignmentFactors:n.getDisplayValueAlignmentFactors,renderValue:this.renderValue,width:s,height:e,source:i,itemSpacing:3,renderCounter:r,autoGrid:!0,orientation:t.orientation})}}var h=s("./packages/grafana-ui/src/components/BigValue/BigValue.tsx");const g=new n.PanelPlugin(p).useFieldConfig().setPanelOptions((e=>{const t=["Stat styles"];(0,i.j)(e),(0,i.h)(e,t),a.commonOptionsBuilder.addTextSizeOptions(e),e.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:t,settings:{options:[{value:a.BigValueTextMode.Auto,label:"Auto"},{value:a.BigValueTextMode.Value,label:"Value"},{value:a.BigValueTextMode.ValueAndName,label:"Value and name"},{value:a.BigValueTextMode.Name,label:"Name"},{value:a.BigValueTextMode.None,label:"None"}]},defaultValue:"auto"}),e.addRadio({path:"colorMode",name:"Color mode",defaultValue:a.BigValueColorMode.Value,category:t,settings:{options:[{value:a.BigValueColorMode.None,label:"None"},{value:a.BigValueColorMode.Value,label:"Value"},{value:a.BigValueColorMode.Background,label:"Background"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:t,defaultValue:"area",settings:{options:[{value:"none",label:"None"},{value:"area",label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:"auto",category:t,settings:{options:[{value:"auto",label:"Auto"},{value:"center",label:"Center"}]}})})).setNoPadding().setPanelChangeHandler(((e,t,s)=>{const i=(0,a.sharedSingleStatPanelChangedHandler)(e,t,s);if(s.angular&&("singlestat"===t||"grafana-singlestat-panel"===t)){const t=s.angular;if(i.graphMode=a.BigValueGraphMode.None,t.sparkline&&t.sparkline.show&&(i.graphMode=a.BigValueGraphMode.Area),t.colorBackground)i.colorMode=a.BigValueColorMode.Background;else if(t.colorValue)i.colorMode=a.BigValueColorMode.Value;else{var r;if(i.colorMode=a.BigValueColorMode.None,null!==(r=t.sparkline)&&void 0!==r&&r.lineColor&&i.graphMode===a.BigValueGraphMode.Area){var o;const s=null!==(o=e.fieldConfig)&&void 0!==o?o:{};s.defaults.color={mode:n.FieldColorModeId.Fixed,fixedColor:t.sparkline.lineColor},e.fieldConfig=s}}"name"===t.valueName&&(i.textMode=h.jG.Name)}return i})).setMigrationHandler(a.sharedSingleStatMigrationHandler)},"./public/app/plugins/panel/stat/types.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>n,h:()=>i});var a=s("./packages/grafana-data/src/index.ts");function n(e,t=!0){const s=["Value options"];e.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:s,defaultValue:!1}),e.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:s,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:e=>!0===e.reduceOptions.values}),e.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:s,editor:a.standardEditorsRegistry.get("stats-picker").editor,defaultValue:[a.ReducerID.lastNotNull],showIf:e=>!1===e.reduceOptions.values}),t&&e.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:s,settings:{allowCustomValue:!0,options:[],getOptions:async e=>{const t=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(e&&e.data)for(const s of e.data)for(const n of s.fields){const i=(0,a.getFieldDisplayName)(n,s,e.data),r=`/^${(0,a.escapeStringForRegex)(i)}$/`;t.push({value:r,label:i})}return Promise.resolve(t)}},defaultValue:""})}function i(e,t){e.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:t,settings:{options:[{value:a.VizOrientation.Auto,label:"Auto"},{value:a.VizOrientation.Horizontal,label:"Horizontal"},{value:a.VizOrientation.Vertical,label:"Vertical"}]},defaultValue:a.VizOrientation.Auto})}},"./public/app/plugins/panel/state-timeline/types.ts":(e,t,s)=>{"use strict";s.d(t,{mP:()=>a,Uv:()=>n,KN:()=>i});const a={showValue:s("./packages/grafana-schema/src/index.ts").Jp.Auto,alignValue:"left",mergeValues:!0,rowHeight:.9},n={lineWidth:0,fillOpacity:70};let i;!function(e){e.Changes="changes",e.Samples="samples"}(i||(i={}))},"./public/app/plugins/panel/state-timeline/utils.ts":(e,t,s)=>{"use strict";s.d(t,{iK:()=>N,Ur:()=>C,Nj:()=>w,AR:()=>S,SA:()=>T});var a=s("./packages/grafana-data/src/index.ts"),n=s("./packages/grafana-ui/src/index.ts"),i=s("./node_modules/uplot/dist/uPlot.esm.js"),r=s("./packages/grafana-ui/src/components/GraphNG/GraphNG.tsx"),o=s("./public/app/plugins/panel/barchart/quadtree.ts"),l=s("./public/app/plugins/panel/barchart/distribute.ts"),c=s("./public/app/plugins/panel/state-timeline/types.ts"),d=s("./packages/grafana-schema/src/index.ts"),u=s("./packages/grafana-data/src/themes/colorManipulator.ts");const{round:p,min:h,ceil:g}=Math,m=devicePixelRatio,f=l.Gj;function b(e,t,s,a,n){(0,l.Qm)(s,e,f,t,((e,t,s)=>{n(e,a*t,a*s)}))}function v(e){var t;const{mode:s,numSeries:a,isDiscrete:n,rowHeight:l=0,colWidth:f=0,showValue:v,theme:x,label:y,formatValue:w,alignValue:j="left",getTimeRange:k,getValueColor:S,getFieldConfig:C,onHover:T,onLeave:N}=e;let O;const I=Array(a).fill(null).map((()=>{let e=document.createElement("div");return e.classList.add("bar-mark"),e.style.position="absolute",e.style.background="rgba(255,255,255,0.2)",e}));let P;const M=`500 ${Math.round(12*devicePixelRatio)}px ${x.typography.fontFamily}`,F=Array(a).fill(null),A=[f,1/0],D=1-A[0],$=(null!==(t=A[1])&&void 0!==t?t:1/0)*m,L=new Map,E=new Map;function R(e,t,s,a,n,i,r,o,l,c,d,h,g){if(r<1)return;const m=S(c+1,h),f=function(e,t){var s;if("#"===t[0]&&9===t.length)return t;const a=(null!==(s=e.fillOpacity)&&void 0!==s?s:100)/100;return(0,u.alpha)(t,a)}(C(c),m);if(P[c][d]={x:p(n-s),y:p(i-a),w:r,h:o,sidx:c+1,didx:d,fillColor:f},g){let e=f,s=L.get(e);if(null==s&&L.set(e,s=new Path2D),t(s,n,i,r,o),l){let e=m,s=E.get(e);null==s&&E.set(e,s=new Path2D),t(s,n+l/2,i+l/2,r-l,o-l)}}else e.beginPath(),t(e,n,i,r,o),e.fillStyle=f,e.fill(),l&&(e.beginPath(),t(e,n+l/2,i+l/2,r-l,o-l),e.strokeStyle=m,e.lineWidth=l,e.stroke())}const _=null!=w&&v!==d.Jp.Never&&((e,t,a,n)=>(e.ctx.save(),e.ctx.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),e.ctx.font=M,e.ctx.textAlign=s===c.KN.Changes?j:"center",e.ctx.textBaseline="middle",i.Z.orient(e,t,((a,n,i,r,o,l,u,h,g,f,b)=>{let y=p((a.width||0)*m),k=p(g+q[t-1]);for(let a=0;a<i.length;a++)if(null!=i[a]){const n=P[t-1][a];if(!n||v===d.Jp.Auto&&n.w<25)continue;if(n.x>=f)continue;let r=p(n.x+h+n.w/2);const o=w(t,i[a]);s===c.KN.Changes&&("left"===j?r=p(n.x+h+y+2):"right"===j&&(r=p(n.x+h+n.w-y-2))),e.ctx.fillStyle=x.colors.getContrastText(n.fillColor,3),e.ctx.fillText(o,r,k)}})),e.ctx.restore(),!1));function V(e,t){let s=I[e];t?(s.style.display="",s.style.left=p(t.x/m)+"px",s.style.top=p(t.y/m)+"px",s.style.width=p(t.w/m)+"px",s.style.height=p(t.h/m)+"px"):s.style.display="none",F[e]=t}let B;const z=s===c.KN.Changes?function(e,t){let s;for(let n=0;n<a;n++){let a;if(e>=0){let i=q[n];O.get(e,i,1,1,(n=>{(0,o.P)(e,i,n.x,n.y,n.x+n.w,n.y+n.h)&&(a=n,Math.abs(t-i)<=n.h/2&&(s=n))}))}a?a!==F[n]&&V(n,a):null!=F[n]&&V(n,null)}s?s!==B&&(B=s,T(s.sidx,s.didx,s)):B&&(B=void 0,N())}:function(e,t){let s;O.get(e,t,1,1,(a=>{(0,o.P)(e,t,a.x,a.y,a.x+a.w,a.y+a.h)&&(s=a)})),s?(V(0,s),s!==B&&(B=s,T(s.sidx,s.didx,s))):B&&(V(0,null),B=void 0,N())},U={y:!1,x:s===c.KN.Changes,points:{show:!1}},q=Array(a).fill(0),H=Array(a).fill(0);return{cursor:U,xSplits:s===c.KN.Samples?(e,t,s,a,n,i)=>{let r=[],o=e.data[0][1]-e.data[0][0],l=g(n/o);for(let t=0;t<e.data[0].length;t+=l){let n=e.data[0][t];n>=s&&n<=a&&r.push(n)}return r}:null,xRange:e=>{const t=k();let a=t.from.valueOf(),n=t.to.valueOf();if(s===c.KN.Samples){let t=(e.data[0][1]-e.data[0][0])/2;a<=e.data[0][0]&&(a=e.data[0][0]-t);let s=e.data[0].length-1;n>=e.data[0][s]&&(n=e.data[0][s]+t)}return[a,n]},ySplits:e=>(b(l,null,a,e.bbox.height,((t,s,a)=>{q[t]=p(s+a/2),H[t]=e.posToVal(q[t]/m,r.j)})),H),yValues:(e,t)=>t.map(((e,t)=>y(t+1))),yRange:[0,1],drawPaths:(e,t,r,o)=>(i.Z.orient(e,t,((i,d,u,g,f,v,x,y,w,j,k,S,C,T)=>{let N=p((i.width||0)*m),O=n(t);var I;e.ctx.save(),T(e.ctx,e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),b(l,t-1,a,k,((t,a,n)=>{if(s===c.KN.Changes){for(let s=0;s<u.length;s++)if(null!=u[s]){let i=Math.round(v(d[s],g,j,y)),r=s;for(;void 0===u[++r]&&r<u.length;);let o=r===u.length?y+j+N:Math.round(v(d[r],g,j,y));R(e.ctx,T,y,w,i,p(w+a),o-i,p(n),N,t,s,u[s],O),s=r-1}}else if(s===c.KN.Samples){let s=v(d[1],g,j,y)-v(d[0],g,j,y),i=p(h($,s-s*D)-N),l=i/2;for(let s=r;s<=o;s++)if(null!=u[s]){let r=v(d[s],g,j,y);R(e.ctx,T,y,w,p(r-l),p(w+a),i,p(n),N,t,s,u[s],O)}}})),O&&(e.ctx.lineWidth=N,I=e.ctx,L.forEach(((e,t)=>{I.fillStyle=t,I.fill(e)})),E.forEach(((e,t)=>{I.strokeStyle=t,I.stroke(e)})),L.clear(),E.clear()),e.ctx.restore()})),null),drawPoints:_,init:e=>{let t=e.over;t.style.overflow="hidden",I.forEach((e=>{t.appendChild(e)}))},drawClear:e=>{var t;O=O||new o.l(0,0,e.bbox.width,e.bbox.height),O.clear(),t=e.data[0].length,P=Array(a).fill(null).map((e=>Array(t).fill(null))),e.series.forEach((e=>{e._paths=null}))},setCursor:e=>{let t=p(e.cursor.left*m),s=p(e.cursor.top*m);if(!O.o.length&&null==O.q)for(const e of P)for(const t of e)t&&O.add(t);z(t,s)}}}var x=s("./packages/grafana-ui/src/components/uPlot/utils.ts");const y={lineWidth:0,fillOpacity:80};const w=({frame:e,theme:t,timeZone:s,getTimeRange:i,mode:r,rowHeight:o,colWidth:l,showValue:c,alignValue:u})=>{const p=new n.UPlotConfigBuilder(s),h={mode:r,numSeries:e.fields.length-1,isDiscrete:t=>(e=>{var t,s;const a=null===(t=e.config)||void 0===t||null===(s=t.color)||void 0===s?void 0:s.mode;return!(a&&e.display&&a.startsWith("continuous-"))})(e.fields[t]),rowHeight:o,colWidth:l,showValue:c,alignValue:u,theme:t,label:t=>(0,a.getFieldDisplayName)(e.fields[t],e),getFieldConfig:t=>e.fields[t].config.custom,getValueColor:(t,s)=>{const n=e.fields[t];if(n.display){const e=n.display(s);if(e.color)return e.color}return a.FALLBACK_COLOR},getTimeRange:i,formatValue:(t,s)=>(0,a.formattedValueToString)(e.fields[t].display(s)),onHover:(e,t)=>{m=e,f=t,g=!0},onLeave:()=>{m=null,f=null,g=!0}};let g=!1,m=null,f=null;const b=v(h);p.addHook("init",b.init),p.addHook("drawClear",b.drawClear),p.addHook("setCursor",b.setCursor);p.setTooltipInterpolator(((e,t,s)=>{g&&(null!=m&&(e(m),t(f)),g=!1),s(null==m)})),p.setPrepData(x.k6),p.setCursor(b.cursor),p.addScale({scaleKey:"x",isTime:!0,orientation:d.wN.Horizontal,direction:d.bQ.Right,range:b.xRange}),p.addScale({scaleKey:n.FIXED_UNIT,isTime:!1,orientation:d.wN.Vertical,direction:d.bQ.Up,range:b.yRange}),p.addAxis({scaleKey:"x",isTime:!0,splits:b.xSplits,placement:d.LB.Bottom,timeZone:s,theme:t,grid:{show:!0}}),p.addAxis({scaleKey:n.FIXED_UNIT,isTime:!1,placement:d.LB.Left,splits:b.ySplits,values:b.yValues,grid:{show:!1},ticks:!1,gap:16,theme:t});let w=0;for(let s=0;s<e.fields.length;s++){var j,k;if(0===s)continue;const a=e.fields[s],i=a.config,r=Object.assign({},y,i.custom);a.state.seriesIndex=w++,p.addSeries({scaleKey:n.FIXED_UNIT,pathBuilder:b.drawPaths,pointsBuilder:b.drawPoints,lineWidth:r.lineWidth,fillOpacity:r.fillOpacity,theme:t,show:!(null!==(j=r.hideFrom)&&void 0!==j&&j.viz),thresholds:i.thresholds,dataFrameFieldIndex:null===(k=a.state)||void 0===k?void 0:k.origin})}return p};function j(e){let t,s=e[0];for(let a=1;a<e.length;a++){let n=e[a];null===n?s=null:n===s?(t||(t=[...e]),t[a]=void 0):null!=n&&(s=n)}return t}function k(e,t){const s=e.config.thresholds;if(e.type!==a.FieldType.number||!s||!s.steps.length)return;const n=C(e.config,t);if(n.length!==s.steps.length)return;const i=new Map,r=new Map;for(let e=0;e<n.length;e++)i.set(s.steps[e],n[e].label),r.set(n[e].label,n[e].color);let o,l=e.values.toArray();const c=new Array(e.values.length);if(s.mode===a.ThresholdsMode.Percentage){const{min:t,max:s}=(0,a.getFieldConfigWithMinMax)(e),n=s-t;l=l.map((e=>null==e?e:(e-t)/n*100))}for(let e=0;e<c.length;e++){const t=l[e];null==t&&(c[e]=t,o=void 0);const n=(0,a.getActiveThreshold)(t,s.steps);c[e]=n===o?void 0:i.get(n),o=n}return Object.assign({},e,{type:a.FieldType.string,values:new a.ArrayVector(c),display:e=>({text:e,color:r.get(e),numeric:NaN})})}function S(e,t,s){var n;if(null==e||!e.length)return{warn:"No data in response"};let i=!1;const r=[];for(let o of e){let e=!1,l=!1;const c=[];for(let r of o.fields)switch(r.type){case a.FieldType.time:e=!0,i=!0,c.push(r);break;case a.FieldType.number:if(t&&(null===(n=r.config.color)||void 0===n?void 0:n.mode)===a.FieldColorModeId.Thresholds){const e=k(r,s);if(e){c.push(e),l=!0;continue}}case a.FieldType.boolean:case a.FieldType.string:if(r=Object.assign({},r,{config:Object.assign({},r.config,{custom:Object.assign({},r.config.custom,{spanNulls:-1})})}),t){let e=j(r.values.toArray());if(e){c.push(Object.assign({},r,{values:new a.ArrayVector(e)})),l=!0;continue}}c.push(r);break;default:l=!0}e&&c.length>1&&(i=!0,l?r.push(Object.assign({},o,{fields:c})):r.push(o))}return i?r.length?{frames:r}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function C(e,t){var s;const n=[],i=e.thresholds;if(!i||!i.steps.length)return n;const r=i.steps,o=(0,a.getValueFormat)(i.mode===a.ThresholdsMode.Percentage?"percent":null!==(s=e.unit)&&void 0!==s?s:""),l=e=>(0,a.formattedValueToString)(o(e));for(let e=1;e<=r.length;e++){const s=r[e-1];n.push({label:1===e?`< ${l(r[e].value)}`:`${l(s.value)}+`,color:t.visualization.getColorByName(s.color),yAxis:1})}return n}function T(e,t,s){var n,i;if(!e||"hidden"===t.displayMode)return;const r=function(e){const t=[];for(const s of e)for(const e of s.fields)e.type!==a.FieldType.time&&t.push(e);return t}(e);if(!r.length)return;const o=[],l=r[0].config,c=null!==(n=null===(i=l.color)||void 0===i?void 0:i.mode)&&void 0!==n?n:a.FieldColorModeId.Fixed,d=l.thresholds;if(c===a.FieldColorModeId.Thresholds&&null!=d&&d.steps&&d.steps.length>1)return C(l,s);if(c.startsWith("continuous"))return;let u=new Map;return r.forEach((e=>{e.values.toArray().forEach((t=>{let s=e.display(t);u.set(s.text,s.color)}))})),u.forEach(((e,t)=>{t.length>0&&o.push({label:t,color:s.visualization.getColorByName(null!=e?e:a.FALLBACK_COLOR),yAxis:1})})),o}function N(e,t){let s,a=t+1;if(a>=e.values.length)return null;for(;void 0===s;){if(a>=e.values.length)return null;void 0!==e.values.get(a)?s=a:a++}return s}},"./public/app/plugins/panel/timeseries/LineStyleEditor.tsx":(e,t,s)=>{"use strict";s.d(t,{j:()=>d});var a,n=s("./node_modules/react/index.js"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./node_modules/react/jsx-runtime.js");const o=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],l=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map((e=>({label:e,value:e}))),c=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map((e=>({label:e,value:e}))),d=({value:e,onChange:t})=>{const s=(0,n.useMemo)((()=>"dash"===(null==e?void 0:e.fill)?l:c),[e]),d=(0,n.useMemo)((()=>{var t,a;if(null==e||null===(t=e.dash)||void 0===t||!t.length)return s[0];const n=null===(a=e.dash)||void 0===a?void 0:a.join(", "),i=s.find((e=>e.value===n));return i||{label:n,value:n}}),[e,s]);return(0,r.jsxs)(i.HorizontalGroup,{children:[(0,r.jsx)(i.RadioButtonGroup,{value:(null==e?void 0:e.fill)||"solid",options:o,onChange:s=>{let a;"dot"===s?a=u(c[0].value):"dash"===s&&(a=u(l[0].value)),t(Object.assign({},e,{fill:s,dash:a}))}}),(null==e?void 0:e.fill)&&"solid"!==(null==e?void 0:e.fill)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Select,{menuShouldPortal:!0,allowCustomValue:!0,options:s,value:d,width:20,onChange:s=>{var a;t(Object.assign({},e,{dash:u(null!==(a=s.value)&&void 0!==a?a:"")}))},formatCreateLabel:e=>`Segments: ${u(e).join(", ")}`}),a||(a=(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer",children:(0,r.jsx)(i.IconButton,{name:"question-circle"})})]}))]})]})};function u(e){const t=[];for(const s of e.split(/(?:,| )+/)){const e=Number.parseInt(s,10);isNaN(e)||t.push(e)}return t}},"./public/app/plugins/panel/timeseries/config.ts":(e,t,s)=>{"use strict";s.d(t,{r:()=>g,F:()=>f});var a=s("./packages/grafana-data/src/index.ts"),n=s("./packages/grafana-schema/src/index.ts"),i=s("./packages/grafana-ui/src/index.ts"),r=s("./public/app/plugins/panel/timeseries/LineStyleEditor.tsx"),o=s("./node_modules/react/index.js"),l=s("./node_modules/react/jsx-runtime.js");const c=({value:e,context:t,onChange:s})=>{const n=(0,o.useMemo)((()=>{const e=[];if(t.data.length)for(const s of t.data)for(const n of s.fields)if(n.type===a.FieldType.number){const i=(0,a.getFieldDisplayName)(n,s,t.data);e.push({label:i,value:i})}return e}),[t]),r=(0,o.useMemo)((()=>{const t=n.find((t=>t.value===e));return t||(e?{label:e,value:e}:void 0)}),[n,e]);return(0,l.jsx)(i.Select,{menuShouldPortal:!0,options:n,value:r,onChange:e=>{s(e.value)}})};var d;const u=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],p=({value:e,onChange:t})=>{const s="number"==typeof e,n=s?a.rangeUtil.secondsToHms(e/1e3):void 0;u[2].value=s?e:36e5;const r=e=>{let s=!1;if(e)try{s=1e3*a.rangeUtil.intervalToSeconds(e)}catch(e){console.warn("ERROR",e)}t(s)};return(0,l.jsxs)(i.HorizontalGroup,{children:[(0,l.jsx)(i.RadioButtonGroup,{value:e,options:u,onChange:t}),s&&(0,l.jsx)(i.Input,{autoFocus:!1,placeholder:"never",width:10,defaultValue:n,onKeyDown:e=>{"Enter"===e.key&&r(e.target.value)},onBlur:e=>{r(e.target.value)},prefix:d||(d=(0,l.jsx)("div",{children:"<"})),spellCheck:!1})]})},h=({item:e,value:t,onChange:s})=>{const a=(0,o.useCallback)((e=>{s({mode:e.value})}),[s]);return(0,l.jsx)(i.Select,{menuShouldPortal:!0,value:t.mode,options:e.settings.options,onChange:a})},g={drawStyle:n.l8.Line,lineInterpolation:n.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:n.FI.None,barAlignment:n.pu.Center,stacking:{mode:n.o0.None,group:"A"},axisGridShow:!0},m=["Graph styles"];function f(e){return{standardOptions:{[a.FieldConfigProperty.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:a.FieldColorModeId.PaletteClassic}}},useCustomConfig:t=>{t.addRadio({path:"drawStyle",name:"Style",category:m,defaultValue:e.drawStyle,settings:{options:i.graphFieldOptions.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:m,defaultValue:e.lineInterpolation,settings:{options:i.graphFieldOptions.lineInterpolation},showIf:e=>e.drawStyle===n.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:m,defaultValue:e.barAlignment,settings:{options:i.graphFieldOptions.barAlignment},showIf:e=>e.drawStyle===n.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:m,defaultValue:e.lineWidth,settings:{min:0,max:10,step:1},showIf:e=>e.drawStyle!==n.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:m,defaultValue:e.fillOpacity,settings:{min:0,max:100,step:1},showIf:e=>e.drawStyle!==n.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:m,defaultValue:i.graphFieldOptions.fillGradient[0].value,settings:{options:i.graphFieldOptions.fillGradient},showIf:e=>e.drawStyle!==n.l8.Points}).addCustomEditor({id:"fillBelowTo",path:"fillBelowTo",name:"Fill below to",category:m,editor:c,override:c,process:a.stringOverrideProcessor,hideFromDefaults:!0,shouldApply:e=>!0}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:m,showIf:e=>e.drawStyle===n.l8.Line,editor:r.j,override:r.j,process:a.identityOverrideProcessor,shouldApply:e=>e.type===a.FieldType.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:m,defaultValue:!1,editor:p,override:p,showIf:e=>e.drawStyle===n.l8.Line,shouldApply:e=>e.type!==a.FieldType.time,process:a.identityOverrideProcessor}).addRadio({path:"showPoints",name:"Show points",category:m,defaultValue:i.graphFieldOptions.showPoints[0].value,settings:{options:i.graphFieldOptions.showPoints},showIf:e=>e.drawStyle!==n.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:m,defaultValue:5,settings:{min:1,max:40,step:1},showIf:e=>e.showPoints!==n.Jp.Never||e.drawStyle===n.l8.Points}),i.commonOptionsBuilder.addStackingConfig(t,e.stacking,m),i.commonOptionsBuilder.addAxisConfig(t,e),i.commonOptionsBuilder.addHideFrom(t),t.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:n.i3.Off},settings:{options:i.graphFieldOptions.thresholdsDisplayModes},editor:h,override:h,process:a.identityOverrideProcessor,shouldApply:()=>!0})}}}},"./public/app/plugins/sdk.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{PanelCtrl:()=>c,MetricsPanelCtrl:()=>d,QueryCtrl:()=>u,alertTab:()=>l.n,loadPluginCss:()=>n.loadPluginCss});var a=s("./packages/grafana-data/src/index.ts"),n=s("./packages/grafana-runtime/src/index.ts"),i=s("./public/app/features/panel/panel_ctrl.ts"),r=s("./public/app/features/panel/metrics_panel_ctrl.ts"),o=s("./public/app/features/panel/query_ctrl.ts"),l=s("./public/app/features/alerting/AlertTabCtrl.ts");const c=(0,a.makeClassES5Compatible)(i.q),d=(0,a.makeClassES5Compatible)(r.k),u=(0,a.makeClassES5Compatible)(o.G)},"./public/app/polyfills/old-mediaquerylist.ts":()=>{let e=window.matchMedia;window.matchMedia=t=>{let s=e(t);return s.addEventListener||(s.addEventListener=(e,t)=>{s.addListener(t)},s.removeEventListener=(e,t)=>{s.removeListener(t)}),s}},"./public/app/store/store.ts":(e,t,s)=>{"use strict";let a;function n(e){a=e}function i(){return a&&a.getState?a.getState():{templating:{variables:{}}}}function r(e){if(a&&a.getState)return a.dispatch(e)}s.d(t,{h:()=>a,PQ:()=>n,y0:()=>i,WI:()=>r})},"./public/app/types/acl.ts":(e,t,s)=>{"use strict";let a,n,i,r,o;s.d(t,{B5:()=>a,V5:()=>n,bf:()=>i,pC:()=>o,BL:()=>l,vT:()=>c,hw:()=>d,eL:()=>u}),function(e){e.Viewer="Viewer",e.Editor="Editor",e.Admin="Admin"}(a||(a={})),function(e){e[e.View=1]="View",e[e.Edit=2]="Edit",e[e.Admin=4]="Admin"}(n||(n={})),function(e){e.View="View",e.Edit="Edit",e.Admin="Admin"}(i||(i={})),function(e){e[e.Query=1]="Query",e[e.Admin=2]="Admin"}(r||(r={})),function(e){e.Team="Team",e.User="User",e.Viewer="Viewer",e.Editor="Editor"}(o||(o={}));r.Query;const l=[{value:o.Team,label:"Team"},{value:o.User,label:"User"},{value:o.Viewer,label:"Everyone With Viewer Role"},{value:o.Editor,label:"Everyone With Editor Role"}],c=[{value:n.View,label:i.View,description:"Can view dashboards."},{value:n.Edit,label:i.Edit,description:"Can add, edit and delete dashboards."},{value:n.Admin,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}];let d;!function(e){e[e.Member=0]="Member",e[e.Admin=4]="Admin"}(d||(d={}));const u=[{value:d.Member,label:"Member",description:"Is team member"},{value:d.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},"./public/app/types/events.ts":(e,t,s)=>{"use strict";s.d(t,{SQ:()=>i,a_:()=>r,Ai:()=>o,nq:()=>l,xt:()=>c,GL:()=>d,pO:()=>u,Xw:()=>p,Wj:()=>h,_B:()=>g,U5:()=>m,GT:()=>f,_z:()=>b,hD:()=>v,p8:()=>x,uV:()=>y,Qt:()=>w,Eb:()=>j,le:()=>k,VJ:()=>S,Dn:()=>C,OW:()=>T,Jd:()=>N,z:()=>O,RB:()=>I,md:()=>P,Yr:()=>M});var a=s("./packages/grafana-data/src/index.ts");function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}(0,a.eventFactory)("ds-request-response");const i=(0,a.eventFactory)("ds-request-error"),r=(0,a.eventFactory)("toggle-sidemenu-mobile"),o=(0,a.eventFactory)("toggle-sidemenu-hidden"),l=(0,a.eventFactory)("template-variable-value-updated"),c=(0,a.eventFactory)("graph-click"),d=(0,a.eventFactory)("threshold-changed");class u extends a.BusEventBase{}n(u,"type","panel-queries-changed");class p extends a.BusEventBase{}n(p,"type","panel-transformations-changed");class h extends a.BusEventBase{}n(h,"type","panels-options-changed");class g extends a.BusEventBase{}n(g,"type","dashboard-panels-changed");class m extends a.BusEventBase{}n(m,"type","refresh");class f extends a.BusEventBase{}n(f,"type","panel-directive-ready");class b extends a.BusEventBase{}n(b,"type","render");class v extends a.BusEventWithPayload{}n(v,"type","theme-changed");class x extends a.BusEventWithPayload{}let y;n(x,"type","zoom-out"),function(e){e[e.Left=-1]="Left",e[e.Right=1]="Right"}(y||(y={}));class w extends a.BusEventWithPayload{}n(w,"type","shift-time");class j extends a.BusEventWithPayload{}n(j,"type","remove-panel");class k extends a.BusEventWithPayload{}n(k,"type","show-modal");class S extends a.BusEventWithPayload{}n(S,"type","show-confirm-modal");class C extends a.BusEventWithPayload{}n(C,"type","show-react-modal");class T extends a.BusEventBase{}n(T,"type","hide-modal");class N extends a.BusEventBase{}n(N,"type","dashboard-saved");class O extends a.BusEventWithPayload{}n(O,"type","annotation-query-started");class I extends a.BusEventWithPayload{}n(I,"type","annotation-query-finished");class P extends a.BusEventWithPayload{}n(P,"type","time-range-updated");class M extends a.BusEventWithPayload{}n(M,"type","panel-edit-finished")},"./public/app/types/explore.ts":(e,t,s)=>{"use strict";let a;s.d(t,{K:()=>a}),function(e){e.left="left",e.right="right"}(a||(a={}))},"./public/app/types/index.ts":(e,t,s)=>{"use strict";let a,n,i;s.d(t,{bW:()=>d,F1:()=>o,bd:()=>l,RW:()=>u,bG:()=>n,vq:()=>a,Kd:()=>c.K,UX:()=>i,B5:()=>r.B5,bf:()=>r.bf,hw:()=>r.hw,eL:()=>r.eL}),function(e){e.Home="home-dashboard",e.New="new-dashboard",e.Normal="normal-dashboard",e.Scripted="scripted-dashboard"}(a||(a={})),function(e){e.NotStarted="Not started",e.Fetching="Fetching",e.Services="Services",e.Failed="Failed",e.Completed="Completed"}(n||(n={})),function(e){e.Off="off",e.TV="tv",e.Full="full"}(i||(i={}));var r=s("./public/app/types/acl.ts");let o,l;!function(e){e.Success="success",e.Warning="warning",e.Error="error",e.Info="info"}(o||(o={})),function(e){e[e.Warning=5e3]="Warning",e[e.Success=3e3]="Success",e[e.Error=7e3]="Error"}(l||(l={}));var c=s("./public/app/types/explore.ts");let d;!function(e){e.UsersRead="users:read",e.UsersWrite="users:write",e.UsersTeamRead="users.teams:read",e.UsersAuthTokenList="users.authtoken:list",e.UsersAuthTokenUpdate="users.authtoken:update",e.UsersPasswordUpdate="users.password:update",e.UsersDelete="users:delete",e.UsersCreate="users:create",e.UsersEnable="users:enable",e.UsersDisable="users:disable",e.UsersPermissionsUpdate="users.permissions:update",e.UsersLogout="users:logout",e.UsersQuotasList="users.quotas:list",e.UsersQuotasUpdate="users.quotas:update",e.OrgUsersRead="org.users:read",e.OrgUsersAdd="org.users:add",e.OrgUsersRemove="org.users:remove",e.OrgUsersRoleUpdate="org.users.role:update",e.LDAPUsersRead="ldap.user:read",e.LDAPUsersSync="ldap.user:sync",e.LDAPStatusRead="ldap.status:read",e.DataSourcesExplore="datasources:explore",e.DataSourcesRead="datasources:read",e.DataSourcesCreate="datasources:create",e.DataSourcesWrite="datasources:write",e.DataSourcesDelete="datasources:delete",e.DataSourcesPermissionsRead="datasources.permissions:read",e.ActionServerStatsRead="server.stats:read"}(d||(d={}));var u=s("./public/app/types/events.ts")},"./public/app/types/unified-alerting-dto.ts":(e,t,s)=>{"use strict";let a,n,i,r;s.d(t,{x_:()=>a,bj:()=>n,pz:()=>i,g0:()=>r}),function(e){e.Firing="firing",e.Inactive="inactive",e.Pending="pending"}(a||(a={})),function(e){e.Normal="Normal",e.Alerting="Alerting",e.Pending="Pending",e.NoData="NoData",e.Error="Error"}(n||(n={})),function(e){e.Alerting="alerting",e.Recording="recording"}(i||(i={})),function(e){e.Alerting="Alerting",e.NoData="NoData",e.KeepLastState="KeepLastState",e.OK="OK"}(r||(r={}))},"./public/vendor/angular-other/angular-strap.js":()=>{angular.module("$strap.config",[]).value("$strapConfig",{}),angular.module("$strap.filters",["$strap.config"]),angular.module("$strap.directives",["$strap.config"]),angular.module("$strap",["$strap.filters","$strap.directives","$strap.config"]),angular.module("$strap.directives").factory("$modal",["$rootScope","$compile","$http","$timeout","$q","$templateCache","$strapConfig",function(e,t,s,a,n,i,r){return function(o){return new function(o){var l=angular.extend({show:!0},r.modal,o),c=l.scope?l.scope:e.$new(),d=l.template;return n.when(l.templateHtml||i.get(d)||s.get(d,{cache:!0}).then((function(e){return e.data}))).then((function(e){var s=c.$id;d&&(s+=d.replace(".html","").replace(/[\/|\.|:]/g,"-"));var n=$('<div class="modal hide" tabindex="-1"></div>').attr("id",s).html(e);return l.modalClass&&n.addClass(l.modalClass),$("body").append(n),a((function(){t(n)(c)})),c.$modal=function(e){n.modal(e)},angular.forEach(["show","hide"],(function(e){c[e]=function(){n.modal(e)}})),c.dismiss=c.hide,angular.forEach(["show","shown","hide","hidden"],(function(e){n.on(e,(function(t){c.$emit("modal-"+e,t)}))})),n.on("shown",(function(e){$("input[autofocus], textarea[autofocus]",n).first().trigger("focus")})),n.on("hidden",(function(e){l.persist||c.$destroy()})),c.$on("$destroy",(function(){n.remove()})),n.modal(l),n}))}(o)}}]),angular.module("$strap.directives").directive("bsTooltip",["$parse","$compile",function(e,t){return{restrict:"A",scope:!0,link:function(t,s,a,n){var i=e(a.bsTooltip),r=(i.assign,i(t));t.$watch(a.bsTooltip,(function(e,t){e!==t&&(r=e)})),s.on("show",(function(e){$(".tooltip.in").each((function(){var e=$(this),t=e.data("tooltip");t&&!t.$element.is(s)&&e.tooltip("hide")}))})),s.tooltip({title:function(){return angular.isFunction(r)?r.apply(null,arguments):r},html:!0,container:"body"}),s.data("tooltip").show=function(){var e=$.fn.tooltip.Constructor.prototype.show.apply(this,arguments);return this.tip().data("tooltip",this),e},t._tooltip=function(e){s.tooltip(e)},t.hide=function(){s.tooltip("hide")},t.show=function(){s.tooltip("show")},t.dismiss=t.hide}}}]),angular.module("$strap.directives").directive("bsTypeahead",["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,s,a,n){var i=e(a.bsTypeahead),r=(i.assign,i(t));t.$watch(a.bsTypeahead,(function(e,t){e!==t&&(r=e)})),s.attr("data-provide","typeahead"),s.typeahead({source:function(e){return angular.isFunction(r)?r.apply(null,arguments):r},minLength:a.minLength||1,items:a.items,updater:function(e){return n&&t.$apply((function(){n.$setViewValue(e)})),t.$emit("typeahead-updated",e),e}});var o=s.data("typeahead");o.lookup=function(e){var t;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(t=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source)?this.process(t):this},a.matchAll&&(o.matcher=function(e){return!0}),"0"===a.minLength&&setTimeout((function(){s.on("focus",(function(){0===s.val().length&&setTimeout(s.typeahead.bind(s,"lookup"),200)}))}))}}}])},"./public/vendor/bootstrap/bootstrap.js":()=>{!function(e){"use strict";e((function(){var t;e.support.transition=(t=function(){var e,t=document.createElement("bootstrap"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in s)if(void 0!==t.style[e])return s[e]}())&&{end:t}}))}(window.jQuery),function(e){"use strict";var t="[data-toggle=dropdown]",s=function(t){var s=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",(function(){s.parent().removeClass("open")}))};function a(){e(".dropdown-backdrop").remove(),e(t).each((function(){n(e(this)).removeClass("open")}))}function n(t){var s,a=t.attr("data-target");return a||(a=(a=t.attr("href"))&&/#[A-Za-z]/.test(a)&&a.replace(/.*(?=#[^\s]*$)/,"")),(s=a&&e(a))&&s.length||(s=t.parent()),s}s.prototype={constructor:s,toggle:function(t){var s,i,r=e(this);if(!r.is(".disabled, :disabled"))return i=(s=n(r)).hasClass("open"),a(),i||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",a),s.toggleClass("open")),r.focus(),!1},keydown:function(s){var a,i,r,o,l;if(/(38|40|27)/.test(s.keyCode)&&(a=e(this),s.preventDefault(),s.stopPropagation(),!a.is(".disabled, :disabled"))){if(!(o=(r=n(a)).hasClass("open"))||o&&27==s.keyCode)return 27==s.which&&r.find(t).focus(),a.click();(i=e("[role=menu] li:not(.divider):visible a",r)).length&&(l=i.index(i.filter(":focus")),38==s.keyCode&&l>0&&l--,40==s.keyCode&&l<i.length-1&&l++,~l||(l=0),i.eq(l).focus())}}};var i=e.fn.dropdown;e.fn.dropdown=function(t){return this.each((function(){var a=e(this),n=a.data("dropdown");n||a.data("dropdown",n=new s(this)),"string"==typeof t&&n[t].call(a)}))},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=i,this},e(document).on("click.dropdown.data-api",a).on("click.dropdown.data-api",".dropdown form",(function(e){e.stopPropagation()})).on("click.dropdown.data-api",t,s.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",s.prototype.keydown)}(window.jQuery),function(e){"use strict";var t=function(t,s){this.options=s,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,s=e.Event("show");this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop((function(){var s=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),s&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),s?t.$element.one(e.support.transition.end,(function(){t.$element.focus().trigger("shown")})):t.$element.focus().trigger("shown")})))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",(function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()}))},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",(function(t){27==t.which&&e.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,s=setTimeout((function(){t.$element.off(e.support.transition.end),t.hideModal()}),500);this.$element.one(e.support.transition.end,(function(){clearTimeout(s),t.hideModal()}))},hideModal:function(){var e=this;this.$element.hide(),this.backdrop((function(){e.removeBackdrop(),e.$element.trigger("hidden")}))},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&s;if(this.$backdrop=e('<div class="modal-backdrop '+s+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var s=e.fn.modal;e.fn.modal=function(s){return this.each((function(){var a=e(this),n=a.data("modal"),i=e.extend({},e.fn.modal.defaults,a.data(),"object"==typeof s&&s);n||a.data("modal",n=new t(this,i)),"string"==typeof s?n[s]():i.show&&n.show()}))},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=s,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',(function(t){var s=e(this),a=s.attr("href"),n=e(s.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),i=n.data("modal")?"toggle":e.extend({remote:!/#/.test(a)&&a},n.data(),s.data());t.preventDefault(),n.modal(i).one("hide",(function(){s.focus()}))}))}(window.jQuery),function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,s,a){var n,i,r,o,l;for(this.type=t,this.$element=e(s),this.options=this.getOptions(a),this.enabled=!0,l=(r=this.options.trigger.split(" ")).length;l--;)"click"==(o=r[l])?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=o&&(n="hover"==o?"mouseenter":"focus",i="hover"==o?"mouseleave":"blur",this.$element.on(n+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return(t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var s,a=e.fn[this.type].defaults,n={};if(this._options&&e.each(this._options,(function(e,t){a[e]!=t&&(n[e]=t)}),this),!(s=e(t.currentTarget)[this.type](n).data(this.type)).options.delay||!s.options.delay.show)return s.show();clearTimeout(this.timeout),s.hoverState="in",this.timeout=setTimeout((function(){"in"==s.hoverState&&s.show()}),s.options.delay.show)},leave:function(t){var s=e(t.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!s.options.delay||!s.options.delay.hide)return s.hide();s.hoverState="out",this.timeout=setTimeout((function(){"out"==s.hoverState&&s.hide()}),s.options.delay.hide)},show:function(){var t,s,a,n,i,r,o=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(o),o.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),i="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),s=this.getPosition(),a=t[0].offsetWidth,n=t[0].offsetHeight,i){case"bottom":r={top:s.top+s.height,left:s.left+s.width/2-a/2};break;case"top":r={top:s.top-n,left:s.left+s.width/2-a/2};break;case"left":r={top:s.top+s.height/2-n/2,left:s.left-a};break;case"right":r={top:s.top+s.height/2-n/2,left:s.left+s.width};break;case"topLeft":r={top:s.top-n,left:s.left+s.width/2-.1*a};break;case"topRight":r={top:s.top-n,left:s.left+s.width/2-.9*a};break;case"rightTop":r={top:s.top+s.height/2-.1*n,left:s.left+s.width};break;case"rightBottom":r={top:s.top+s.height/2-.9*n,left:s.left+s.width};break;case"bottomLeft":r={top:s.top+s.height,left:s.left+s.width/2-.1*a};break;case"bottomRight":r={top:s.top+s.height,left:s.left+s.width/2-.9*a};break;case"leftTop":r={top:s.top+s.height/2-.1*n,left:s.left-a};break;case"leftBottom":r={top:s.top+s.height/2-.9*n,left:s.left-a}}this.applyPlacement(r,i),this.$element.trigger("shown")}},applyPlacement:function(e,t){var s,a,n,i,r=this.tip(),o=r[0].offsetWidth,l=r[0].offsetHeight;r.offset(e).addClass(t).addClass("in"),s=r[0].offsetWidth,a=r[0].offsetHeight,"top"==t&&a!=l&&(e.top=e.top+l-a,i=!0),"bottom"==t||"top"==t?(n=0,e.left<0&&(n=-2*e.left,e.left=0,r.offset(e),s=r[0].offsetWidth,a=r[0].offsetHeight),this.replaceArrow(n-o+s,s,"left")):this.replaceArrow(a-l,a,"top"),i&&r.offset(e)},replaceArrow:function(e,t,s){this.arrow().css(s,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){var t,s=this.tip(),a=e.Event("hide");if(this.$element.trigger(a),!a.isDefaultPrevented())return s.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?(t=setTimeout((function(){s.off(e.support.transition.end).detach()}),500),s.one(e.support.transition.end,(function(){clearTimeout(t),s.detach()}))):s.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var s=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;s.tip().hasClass("in")?s.hide():s.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var s=e.fn.tooltip;e.fn.tooltip=function(s){return this.each((function(){var a=e(this),n=a.data("tooltip"),i="object"==typeof s&&s;n||a.data("tooltip",n=new t(this,i)),"string"==typeof s&&n[s]()}))},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=s,this}}(window.jQuery),function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,s,a,n=this.element,i=n.closest("ul:not(.dropdown-menu)"),r=n.attr("data-target");r||(r=(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),n.parent("li").hasClass("active")||(t=i.find(".active:last a")[0],a=e.Event("show",{relatedTarget:t}),n.trigger(a),a.isDefaultPrevented()||(s=e(r),this.activate(n.parent("li"),i),this.activate(s,s.parent(),(function(){n.trigger({type:"shown",relatedTarget:t})}))))},activate:function(t,s,a){var n=s.find("> .active"),i=a&&e.support.transition&&n.hasClass("fade");function r(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),i?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),a&&a()}i?n.one(e.support.transition.end,r):r(),n.removeClass("in")}};var s=e.fn.tab;e.fn.tab=function(s){return this.each((function(){var a=e(this),n=a.data("tab");n||a.data("tab",n=new t(this)),"string"==typeof s&&n[s]()}))},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=s,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',(function(t){t.preventDefault(),e(this).tab("show")}))}(window.jQuery),function(e){"use strict";var t=function(t,s){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,s),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value")||this.$element.val();return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var s;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(s=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source)?this.process(s):this},process:function(t){var s=this;return t=e.grep(t,(function(e){return s.matcher(e)})),(t=this.sorter(t)).length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,s=[],a=[],n=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?a.push(t):n.push(t):s.push(t);return s.concat(a,n)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t?e.replace(new RegExp("("+t+")","ig"),(function(e,t){return"<strong>"+t+"</strong>"})):e},render:function(t){var s=this;return t=e(t).map((function(t,a){return(t=e(s.options.item).attr("data-value",a)).find("a").html(s.highlighter(a)),t[0]})),this.$menu.html(t),this},next:function(t){var s=this.$menu.find(".active").removeClass("active").next();s.length||(s=e(this.$menu.find("li")[0])),s.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active").prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},destroy:function(){this.$element.off().removeData("typeahead"),this.$menu.off()},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown&&(!e.shiftKey||40!==e.keyCode)){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27,57]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}13===e.keyCode&&void 0===this.$menu.find(".active").attr("data-value")?this.$element.submit():(e.stopPropagation(),e.preventDefault())},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var s=e.fn.typeahead;e.fn.typeahead=function(s){return this.each((function(){var a=e(this),n=a.data("typeahead"),i="object"==typeof s&&s;n||a.data("typeahead",n=new t(this,i)),"string"==typeof s&&n[s]()}))},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=s,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',(function(t){var s=e(this);s.data("typeahead")||s.typeahead(s.data())}))}(window.jQuery),function(e){"use strict";var t=function(t,s){this.options=e.extend({},e.fn.affix.defaults,s),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy((function(){setTimeout(e.proxy(this.checkPosition,this),1)}),this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,s=e(document).height(),a=this.$window.scrollTop(),n=this.$element.offset(),i=this.options.offset,r=i.bottom,o=i.top;"object"!=typeof i&&(r=o=i),"function"==typeof o&&(o=i.top()),"function"==typeof r&&(r=i.bottom()),t=!(null!=this.unpin&&a+this.unpin<=n.top)&&(null!=r&&n.top+this.$element.height()>=s-r?"bottom":null!=o&&a<=o&&"top"),this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?n.top-a:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(t?"-"+t:"")))}};var s=e.fn.affix;e.fn.affix=function(s){return this.each((function(){var a=e(this),n=a.data("affix"),i="object"==typeof s&&s;n||a.data("affix",n=new t(this,i)),"string"==typeof s&&n[s]()}))},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=s,this},e(window).on("load",(function(){e('[data-spy="affix"]').each((function(){var t=e(this),s=t.data();s.offset=s.offset||{},s.offsetBottom&&(s.offset.bottom=s.offsetBottom),s.offsetTop&&(s.offset.top=s.offsetTop),t.affix(s)}))}))}(window.jQuery)},"./public/vendor/flot/jquery.flot.crosshair.js":()=>{jQuery.plot.plugins.push({init:function(e){var t={x:-1,y:-1,locked:!1};function s(s){t.locked||-1!=t.x&&(t.x=-1,e.triggerRedrawOverlay())}function a(s){if(!t.locked)if(e.getSelection&&e.getSelection())t.x=-1;else{var a=e.offset();t.x=Math.max(0,Math.min(s.pageX-a.left,e.width())),t.y=Math.max(0,Math.min(s.pageY-a.top,e.height())),e.triggerRedrawOverlay()}}e.setCrosshair=function(s){if(s){var a=e.p2c(s);t.x=Math.max(0,Math.min(a.left,e.width())),t.y=Math.max(0,Math.min(a.top,e.height()))}else t.x=-1;e.triggerRedrawOverlay()},e.clearCrosshair=e.setCrosshair,e.lockCrosshair=function(s){s&&e.setCrosshair(s),t.locked=!0},e.unlockCrosshair=function(){t.locked=!1},e.hooks.bindEvents.push((function(e,t){e.getOptions().crosshair.mode&&(t.mouseout(s),t.mousemove(a))})),e.hooks.drawOverlay.push((function(e,s){var a=e.getOptions().crosshair;if(a.mode){var n=e.getPlotOffset();if(s.save(),s.translate(n.left,n.top),-1!=t.x){var i=e.getOptions().crosshair.lineWidth%2?.5:0;if(s.strokeStyle=a.color,s.lineWidth=a.lineWidth,s.lineJoin="round",s.beginPath(),-1!=a.mode.indexOf("x")){var r=Math.floor(t.x)+i;s.moveTo(r,0),s.lineTo(r,e.height())}if(-1!=a.mode.indexOf("y")){var o=Math.floor(t.y)+i;s.moveTo(0,o),s.lineTo(e.width(),o)}s.stroke()}s.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mouseout",s),t.unbind("mousemove",a)}))},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})},"./public/vendor/flot/jquery.flot.dashes.js":()=>{jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,s){t.dashes.show&&e.hooks.draw.push((function(e,a){var n=e.getPlotOffset(),i=t.xaxis,r=t.yaxis;function o(e,n){var o,l,c=s.points,d=s.pointsize,u=null,p=null,h=0,g=!0;t.dashes.dashLength[0]?(o=t.dashes.dashLength[0],l=t.dashes.dashLength[1]?t.dashes.dashLength[1]:o):l=o=t.dashes.dashLength,a.beginPath();for(var m=d;m<c.length;m+=d){var f=c[m-d],b=c[m-d+1],v=c[m],x=c[m+1];if(null!=f&&null!=v){if(b<=x&&b<r.min){if(x<r.min)continue;f=(r.min-b)/(x-b)*(v-f)+f,b=r.min}else if(x<=b&&x<r.min){if(b<r.min)continue;v=(r.min-b)/(x-b)*(v-f)+f,x=r.min}if(b>=x&&b>r.max){if(x>r.max)continue;f=(r.max-b)/(x-b)*(v-f)+f,b=r.max}else if(x>=b&&x>r.max){if(b>r.max)continue;v=(r.max-b)/(x-b)*(v-f)+f,x=r.max}if(f<=v&&f<i.min){if(v<i.min)continue;b=(i.min-f)/(v-f)*(x-b)+b,f=i.min}else if(v<=f&&v<i.min){if(f<i.min)continue;x=(i.min-f)/(v-f)*(x-b)+b,v=i.min}if(f>=v&&f>i.max){if(v>i.max)continue;b=(i.max-f)/(v-f)*(x-b)+b,f=i.max}else if(v>=f&&v>i.max){if(f>i.max)continue;x=(i.max-f)/(v-f)*(x-b)+b,v=i.max}f==u&&b==p||a.moveTo(i.p2c(f)+e,r.p2c(b)+n);var y,w=i.p2c(f)+e,j=r.p2c(b)+n,k=i.p2c(v)+e,S=r.p2c(x)+n;do{0==(y=C(h>0?h:g?o:l)).deltaX&&0==y.deltaY||(g?a.lineTo(w+y.deltaX,j+y.deltaY):a.moveTo(w+y.deltaX,j+y.deltaY)),g=!g,h=y.remainder,w+=y.deltaX,j+=y.deltaY}while(y.distance>0);u=v,p=x}function C(e){var t=Math.sqrt(Math.pow(k-w,2)+Math.pow(S-j,2));if(t<=e)return{deltaX:k-w,deltaY:S-j,distance:t,remainder:e-t};var s=S>j?1:-1;return{deltaX:(k>w?1:-1)*Math.sqrt(Math.pow(e,2)/(1+Math.pow((S-j)/(k-w),2))),deltaY:s*Math.sqrt(Math.pow(e,2)-Math.pow(e,2)/(1+Math.pow((S-j)/(k-w),2))),distance:e,remainder:0}}}a.stroke()}a.save(),a.translate(n.left,n.top),a.lineJoin="round";var l=t.dashes.lineWidth,c=t.shadowSize;if(l>0&&c>0){a.lineWidth=c,a.strokeStyle="rgba(0,0,0,0.1)";var d=Math.PI/18;o(Math.sin(d)*(l/2+c/2),Math.cos(d)*(l/2+c/2)),a.lineWidth=c/2,o(Math.sin(d)*(l/2+c/4),Math.cos(d)*(l/2+c/4))}a.lineWidth=l,a.strokeStyle=t.color,l>0&&o(0,0),a.restore()}))}))},options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})},"./public/vendor/flot/jquery.flot.fillbelow.js":()=>{!function(e){"use strict";e.plot.plugins.push({init:function(t){t.hooks.drawSeries.push((function(t,s,a){var n,i,r,o,l,c,d;function u(e,t){s.beginPath(),s.moveTo(a.xaxis.p2c(e)+c.left,a.yaxis.p2c(t)+c.top)}function p(e,t){console.assert(t>e,"expects the end index to be greater than the start index");var s,a,n=0===e||null===r[e-1]||null===l[e-1],c=!1;for(s=e;s<t;s++)if(null===r[s*i+1]||null===l[s*i+1])c=!1,n=!0;else if(r[s*i+1]===l[s*o+1])c=!0,n=!1;else{if(r[s*i+1]>l[s*o+1])return n?u(r[s*i],r[s*i+1]):c?u(r[(s-1)*i],r[(s-1)*i+1]):u((a=h(s))[0],a[1]),void m(s,t);n=!1,c=!1}}function h(e){var t,s,a,n,c,d,u,p,h,g,m,f,b,v,x,y;for(console.assert(e>0,"expects the second point in the series line segment"),t=1;t<l.length/o;t++)if(a=r[(e-1)*i],n=r[(e-1)*i+1],c=r[e*i],d=r[e*i+1],u=l[(t-1)*o],p=l[(t-1)*o+1],h=l[t*o],g=l[t*o+1],m=void 0,f=void 0,b=void 0,v=void 0,x=void 0,y=void 0,y=((b=h-u)*(n-p)-(v=g-p)*(a-u))/(-b*(f=d-n)+(m=c-a)*v),null!==(s=(x=(-f*(a-u)+m*(n-p))/(-b*f+m*v))>=0&&x<=1&&y>=0&&y<=1?[a+y*m,n+y*f]:null))return s;console.error("intersectionPoint() should only be called when an intersection happens")}function g(e,t){var a;for(console.assert(e>=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),a=e;a>=t;a--)s.lineTo(n.xaxis.p2c(l[a*o])+c.left,n.yaxis.p2c(l[a*o+1])+c.top);s.closePath(),s.fill()}function m(e,t){var n,d;for(console.assert(e<=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),n=e;n<t;n++){if(null===r[n*i+1]&&n>e)return g(n-1,e),void p(n,t);if(r[n*i+1]===l[n*o+1])return g(n,e),void p(n,t);if(r[n*i+1]<l[n*o+1])return d=h(n),s.lineTo(a.xaxis.p2c(d[0])+c.left,a.yaxis.p2c(d[1])+c.top),g(n,e),void p(n,t);s.lineTo(a.xaxis.p2c(r[n*i])+c.left,a.yaxis.p2c(r[n*i+1])+c.top)}g(t,e)}null!==a.fillBelowTo&&(n=function(e,t){var s;for(s=0;s<t.length;++s)if(t[s].id===e.fillBelowTo)return t[s];return null}(a,t.getData()))&&(i=a.datapoints.pointsize,r=a.datapoints.points,o=n.datapoints.pointsize,l=n.datapoints.points,c=t.getPlotOffset(),function(){if(r.length/i!=l.length/o)return console.error("Refusing to graph inconsistent number of points"),!1;var e;for(e=0;e<r.length/i;e++)if(null!==r[e*i]&&null!==l[e*o]&&r[e*i]!==l[e*o])return console.error("Refusing to graph points without matching value"),!1;return!0}()&&((d=e.color.parse(a.color)).a=.4,d.normalize(),s.fillStyle=d.toString(),p(0,r.length/i)))}))},options:{series:{fillBelowTo:null}},name:"fillbelow",version:"0.1.0"})}(jQuery)},"./public/vendor/flot/jquery.flot.gauge.js":()=>{!function(e){var t=function(){var t,i,r,o,l,c=function(e,a){t=a,i=e.getPlaceholder(),r=e.getOptions(),o=r.series.gauges,l=e.getData(),s(o.debug)};function d(e,t){"auto"===e.gauge.width&&(e.gauge.width=Math.max(5,t/8)),"auto"===e.label.margin&&(e.label.margin=Math.max(1,t/20)),"auto"===e.label.font.size&&(e.label.font.size=Math.max(5,t/8)),"auto"===e.value.margin&&(e.value.margin=Math.max(1,t/30)),"auto"===e.value.font.size&&(e.value.font.size=Math.max(5,t/9)),"auto"===e.threshold.width&&(e.threshold.width=Math.max(3,t/100)),"auto"===e.threshold.label.margin&&(e.threshold.label.margin=Math.max(3,t/40)),"auto"===e.threshold.label.font.size&&(e.threshold.label.font.size=Math.max(5,t/15))}function u(e,t,s){var a=e.gauge.startAngle+(e.gauge.endAngle-e.gauge.startAngle)*((s-e.gauge.min)/(e.gauge.max-e.gauge.min));return a<e.gauge.startAngle?a=e.gauge.startAngle:a>e.gauge.endAngle&&(a=e.gauge.endAngle),a}function p(e,s,a,i,r,o,l,c,d,u){r!==o&&(t.save(),n(t,e,s,a,i,r,o,l,c,d),u&&(n(t,e,s,a,i,r,o),t.clip(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=10,t.shadowColor="gray",n(t,e,s,a+1,i+2,r,o,l,1)),t.restore())}function h(e,t,s,n,i,r){g(s.cx+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.cos(a(r)),s.cy+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.sin(a(r)),"flotGaugeThresholdValue"+n,e.threshold.label.formatter?e.threshold.label.formatter(i):i,e.threshold.label,r)}function g(t,s,a,n,r,o){var l=e(i).find("#"+a),c=l.length;c||((l=e("<span></span>")).attr("id",a),l.attr("class","flot-temp-elem"),i.append(l)),l.css("position","absolute"),l.css("top",s+"px"),l.css("white-space","nowrap"),r.font.size&&l.css("font-size",r.font.size+"px"),r.font.family&&l.css("font-family",r.font.family),r.color&&l.css("color",r.color),r.background.color&&l.css("background-color",r.background.color),r.background.opacity&&l.css("opacity",r.background.opacity),l.text(n),l.css("left",t+"px"),l.css("left",parseInt(l.css("left"))-l.width()/2+"px"),!c&&o&&(l.css("top",parseInt(l.css("top"))-l.height()/2+"px"),l.css("transform","rotate("+(180*o+90)+"deg)"))}return c.prototype.calculateLayout=function(){var e=i.width(),t=i.height(),s=Math.min(l.length,o.layout.columns),n=Math.ceil(l.length/s),r=o.layout.margin,c=o.layout.hMargin,u=o.layout.vMargin,p=(e-2*r-c*(s-1))/s,h=(t-2*r-u*(n-1))/n;if(o.layout.square){var g=Math.min(p,h);p=g,h=g}d(o,p);var m=o.cell.margin,f=0,b=0;o.label.show&&(f=o.label.margin,b=o.label.font.size);var v=0,x=0;o.value.show&&(v=o.value.margin,x=o.value.font.size);var y=0;o.threshold.show&&(y=o.threshold.width);var w=0,j=0;o.threshold.label.show&&(w=o.threshold.label.margin,j=o.threshold.label.font.size);for(var k=p/2-m-y-2*w-j,S=o.gauge.startAngle,C=o.gauge.endAngle,T=(C-S)/100,N=-1,O=S;O<C;O+=T)N=Math.max(N,Math.sin(a(O)));var I=(h-2*m-2*f-b)/(1+(N=Math.max(N,Math.sin(a(C)))));I*N<v+x/2&&(I=h-2*m-2*f-b-v-x/2);var P=I-2*w-j-y,M=Math.min(k,P),F=o.gauge.width;F>=M&&(F=Math.max(3,M/3));var A=2*w+j+y+M;return{canvasWidth:e,canvasHeight:t,margin:r,hMargin:c,vMargin:u,columns:s,rows:n,cellWidth:p,cellHeight:h,cellMargin:m,labelMargin:f,labelFontSize:b,valueMargin:v,valueFontSize:x,width:F,radius:M,thresholdWidth:y,thresholdLabelMargin:w,thresholdLabelFontSize:j,gaugeOuterHeight:Math.max(A*(1+N),A+v+x/2)}},c.prototype.calculateAutoValues=d,c.prototype.calculateCellLayout=function(e,t,s){var a=function(e,t){return t%e}(t.columns,s),n=function(e,t){return Math.floor(t/e)}(t.columns,s),i=t.margin+(t.cellWidth+t.hMargin)*a,r=t.margin+(t.cellHeight+t.vMargin)*n,o=i+t.cellWidth/2,l=r+t.cellMargin+2*t.labelMargin+t.labelFontSize+t.thresholdWidth+t.thresholdLabelFontSize+2*t.thresholdLabelMargin+t.radius,c=t.cellHeight-2*t.cellMargin-2*t.labelMargin-t.labelFontSize-t.gaugeOuterHeight,d=0;return"middle"===e.cell.vAlign?d=c/2:"bottom"===e.cell.vAlign&&(d=c),l+=d,{col:a,row:n,x:i,y:r,offsetY:d,cellWidth:t.cellWidth,cellHeight:t.cellHeight,cellMargin:t.cellMargin,cx:o,cy:l}},c.prototype.drawBackground=function(e){o.frame.show&&(t.save(),t.strokeStyle=r.grid.borderColor,t.lineWidth=r.grid.borderWidth,t.strokeRect(0,0,e.canvasWidth,e.canvasHeight),r.grid.backgroundColor&&(t.fillStyle=r.grid.backgroundColor,t.fillRect(0,0,e.canvasWidth,e.canvasHeight)),t.restore())},c.prototype.drawCellBackground=function(e,s){t.save(),e.cell.border&&e.cell.border.show&&e.cell.border.color&&e.cell.border.width&&(t.strokeStyle=e.cell.border.color,t.lineWidth=e.cell.border.width,t.strokeRect(s.x,s.y,s.cellWidth,s.cellHeight)),e.cell.background&&e.cell.background.color&&(t.fillStyle=e.cell.background.color,t.fillRect(s.x,s.y,s.cellWidth,s.cellHeight)),t.restore()},c.prototype.drawGauge=function(e,t,s,n,i){var r=e.gauge.shadow.show?e.gauge.shadow.blur:0;p(s.cx,s.cy,t.radius,t.width,a(e.gauge.startAngle),a(e.gauge.endAngle),e.gauge.border.color,e.gauge.border.width,e.gauge.background.color,r);var o=function(e,t){for(var s,a=0;a<e.threshold.values.length;a++){var n=e.threshold.values[a];if(s=n.color,t<n.value)break}return s}(e,i),l=u(e,t,i);p(s.cx,s.cy,t.radius-1,t.width-2,a(e.gauge.startAngle),a(l),o,1,o,r)},c.prototype.drawThreshold=function(e,s,i){for(var r=e.gauge.startAngle,o=0;o<e.threshold.values.length;o++){var l=e.threshold.values[o];c1=l.color,a2=u(e,0,l.value),n(t,i.cx,i.cy,s.radius+s.thresholdWidth,s.thresholdWidth-2,a(r),a(a2),c1,1,c1),r=a2}},c.prototype.drawLable=function(e,t,s,a,n){g(s.cx,s.y+s.cellMargin+t.labelMargin+s.offsetY,"flotGaugeLabel"+a,e.label.formatter?e.label.formatter(n.label,n.data[0][1]):text,e.label)},c.prototype.drawValue=function(e,t,s,a,n){g(s.cx,s.cy-e.value.font.size/2,"flotGaugeValue"+a,e.value.formatter?e.value.formatter(n.label,n.data[0][1]):text,e.value)},c.prototype.drawThresholdValues=function(e,t,s,a){h(e,t,s,"Min"+a,e.gauge.min,e.gauge.startAngle),h(e,t,s,"Max"+a,e.gauge.max,e.gauge.endAngle);for(var n=0;n<e.threshold.values.length;n++){var i=e.threshold.values[n];if(i.value>e.gauge.min&&i.value<e.gauge.max){var r=u(e,0,i.value);h(e,t,s,a+"_"+n,i.value,r)}}},c}();function s(e){return"undefined"!=typeof Logger?new Logger(e):null}function a(e){return e*Math.PI}function n(e,t,s,a,n,i,r,o,l,c){if(i!==r){e.save(),e.beginPath(),e.arc(t,s,a,i,r,false),e.lineTo(t+(a-n)*Math.cos(r),s+(a-n)*Math.sin(r)),e.arc(t,s,a-n,r,i,!0),e.closePath(),l&&(e.lineWidth=l),o&&(e.strokeStyle=o,e.stroke()),c&&(e.fillStyle=c,e.fill()),e.restore()}}var i={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return e}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return parseInt(t)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(e){return e}},values:[]}}}};e.plot.plugins.push({init:function(a){a.hooks.processOptions.push((function(e,t){s(t.series.gauges.debug);t.series.gauges.show&&(t.grid.show=!1,t.legend.show=!1),t.series.gauges.threshold.values.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}))})),a.hooks.draw.push((function(a,n){var i=a.getOptions().series.gauges;s(i.debug);if(i.show){var r=a.getData();if(r&&r.length){var o=new t(a,n),l=o.calculateLayout();i.debug.layout,o.drawBackground(l);for(var c=0;c<r.length;c++){var d=r[c],u=e.extend({},i,d.gauges);d.gauges&&o.calculateAutoValues(u,l.cellWidth);var p=o.calculateCellLayout(u,l,c);o.drawCellBackground(u,p),u.debug.layout,u.label.show&&o.drawLable(u,l,p,c,d),o.drawGauge(u,l,p,d.label,d.data[0][1]),u.threshold.show&&o.drawThreshold(u,l,p),u.threshold.label.show&&o.drawThresholdValues(u,l,p,c),u.value.show&&o.drawValue(u,l,p,c,d)}}}}))},options:i,name:"gauge",version:"1.1.0"})}(jQuery)},"./public/vendor/flot/jquery.flot.js":()=>{!function(e){e.color={},e.color.make=function(t,s,a,n){var i={};return i.r=t||0,i.g=s||0,i.b=a||0,i.a=null!=n?n:1,i.add=function(e,t){for(var s=0;s<e.length;++s)i[e.charAt(s)]+=t;return i.normalize()},i.scale=function(e,t){for(var s=0;s<e.length;++s)i[e.charAt(s)]*=t;return i.normalize()},i.toString=function(){return i.a>=1?"rgb("+[i.r,i.g,i.b].join(",")+")":"rgba("+[i.r,i.g,i.b,i.a].join(",")+")"},i.normalize=function(){function e(e,t,s){return t<e?e:t>s?s:t}return i.r=e(0,parseInt(i.r),255),i.g=e(0,parseInt(i.g),255),i.b=e(0,parseInt(i.b),255),i.a=e(0,i.a,1),i},i.clone=function(){return e.color.make(i.r,i.b,i.g,i.a)},i.normalize()},e.color.extract=function(t,s){var a;do{if(""!=(a=t.css(s).toLowerCase())&&"transparent"!=a)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==a&&(a="transparent"),e.color.parse(a)},e.color.parse=function(s){var a,n=e.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(s))return n(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(s))return n(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(s))return n(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(s))return n(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(s))return n(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(s))return n(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));var i=e.trim(s).toLowerCase();return"transparent"==i?n(255,255,255,0):n((a=t[i]||[0,0,0])[0],a[1],a[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t=Object.prototype.hasOwnProperty;function s(t,s){var a=s.children("."+t)[0];if(null==a&&((a=document.createElement("canvas")).className=t,e(a).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!a.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");a=window.G_vmlCanvasManager.initElement(a)}this.element=a;var n=this.context=a.getContext("2d"),i=window.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;this.pixelRatio=i/r,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}function a(t,a,n,i){var r=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},l=null,c=null,d=null,u=null,p=null,h=[],g=[],m={left:0,right:0,top:0,bottom:0},f=0,b=0,v={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},x=this;function y(e,t){t=[x].concat(t);for(var s=0;s<e.length;++s)e[s].apply(this,t)}function w(t){r=function(t){for(var s=[],a=0;a<t.length;++a){var n=e.extend(!0,{},o.series);null!=t[a].data?(n.data=t[a].data,delete t[a].data,e.extend(!0,n,t[a]),t[a].data=n.data):n.data=t[a],s.push(n)}return s}(t),function(){var t,s=r.length,a=-1;for(t=0;t<r.length;++t){var n=r[t].color;null!=n&&(s--,"number"==typeof n&&n>a&&(a=n))}s<=a&&(s=a+1);var i,l=[],c=o.colors,d=c.length,u=0;for(t=0;t<s;t++)i=e.color.parse(c[t%d]||"#666"),t%d==0&&t&&(u=u>=0?u<.5?-u-.2:0:-u),l[t]=i.scale("rgb",1+u);var p,m=0;for(t=0;t<r.length;++t){if(null==(p=r[t]).color?(p.color=l[m].toString(),++m):"number"==typeof p.color&&(p.color=l[p.color].toString()),null==p.lines.show){var f,b=!0;for(f in p)if(p[f]&&p[f].show){b=!1;break}b&&(p.lines.show=!0)}null==p.lines.zero&&(p.lines.zero=!!p.lines.fill),p.xaxis=C(h,j(p,"x")),p.yaxis=C(g,j(p,"y"))}}(),function(){var t,s,a,n,i,o,l,c,d,u,p,h,g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,f=Number.MAX_VALUE;function b(e,t,s){t<e.datamin&&t!=-f&&(e.datamin=t),s>e.datamax&&s!=f&&(e.datamax=s)}for(e.each(k(),(function(e,t){t.datamin=g,t.datamax=m,t.used=!1})),t=0;t<r.length;++t)(i=r[t]).datapoints={points:[]},y(v.processRawData,[i,i.data,i.datapoints]);for(t=0;t<r.length;++t){if(p=(i=r[t]).data,!(h=i.datapoints.format)){if((h=[]).push({x:!0,number:!0,required:!0}),h.push({y:!0,number:!0,required:!0}),i.stack||i.bars.show||i.lines.show&&i.lines.fill){var x=!!(i.bars.show&&i.bars.zero||i.lines.show&&i.lines.zero);h.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:x}),i.bars.horizontal&&(delete h[h.length-1].y,h[h.length-1].x=!0)}i.datapoints.format=h}if(null==i.datapoints.pointsize){i.datapoints.pointsize=h.length,l=i.datapoints.pointsize,o=i.datapoints.points;var w=i.lines.show&&i.lines.steps;for(i.xaxis.used=i.yaxis.used=!0,s=a=0;s<p.length;++s,a+=l){var j=null==(u=p[s]);if(!j)for(n=0;n<l;++n)c=u[n],(d=h[n])&&(d.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=f:c==-1/0&&(c=-f)),null==c&&(d.required&&(j=!0),null!=d.defaultValue&&(c=d.defaultValue))),o[a+n]=c;if(j)for(n=0;n<l;++n)null!=(c=o[a+n])&&!1!==(d=h[n]).autoscale&&(d.x&&b(i.xaxis,c,c),d.y&&b(i.yaxis,c,c)),o[a+n]=null;if(w&&a>0&&(!j||null!=o[a-l])){for(n=0;n<l;++n)o[a+l+n]=o[a+n];o[a+1]=o[a-l+1]||0,j&&(o[a]=u[0]),a+=l}}}}for(t=0;t<r.length;++t){if(o=(i=r[t]).datapoints.points,l=i.datapoints.pointsize,"negative-Y"===i.transform)for(s=0;s<o.length;s+=l)null!=o[s]&&(c=o[s+1],o[s+1]=-c);y(v.processDatapoints,[i,i.datapoints])}for(t=0;t<r.length;++t){o=(i=r[t]).datapoints.points,l=i.datapoints.pointsize,h=i.datapoints.format;var S=g,C=g,T=m,N=m;for(s=0;s<o.length;s+=l)if(null!=o[s])for(n=0;n<l;++n)c=o[s+n],(d=h[n])&&!1!==d.autoscale&&c!=f&&c!=-f&&(d.x&&(c<S&&(S=c),c>T&&(T=c)),d.y&&(c<C&&(C=c),c>N&&(N=c)));if(i.bars.show){var O;switch(i.bars.align){case"left":O=0;break;case"right":O=-i.bars.barWidth;break;default:O=-i.bars.barWidth/2}i.bars.horizontal?(C+=O,N+=O+i.bars.barWidth):(S+=O,T+=O+i.bars.barWidth)}b(i.xaxis,S,T),b(i.yaxis,C,N)}e.each(k(),(function(e,t){t.datamin==g&&(t.datamin=null),t.datamax==m&&(t.datamax=null)}))}()}function j(e,t){var s=e[t+"axis"];return"object"==typeof s&&(s=s.n),"number"!=typeof s&&(s=1),s}function k(){return e.grep(h.concat(g),(function(e){return e}))}function S(e){var t,s,a={};for(t=0;t<h.length;++t)(s=h[t])&&(a["x"+s.n]=s.c2p(e.left));for(t=0;t<g.length;++t)(s=g[t])&&(a["y"+s.n]=s.c2p(e.top));return void 0!==a.x1&&(a.x=a.x1),void 0!==a.y1&&(a.y=a.y1),a}function C(t,s){return t[s-1]||(t[s-1]={n:s,direction:t==h?"x":"y",options:e.extend(!0,{},t==h?o.xaxis:o.yaxis)}),t[s-1]}function T(){B&&clearTimeout(B),d.unbind("mousemove",z),d.unbind("mouseleave",U),d.unbind("click",q),e(document).unbind("touchend",H),y(v.shutdown,[d])}function N(e){for(var t=e.options,s=e.ticks||[],a=t.labelWidth||0,n=t.labelHeight||0,i=a||("x"==e.direction?Math.floor(l.width/(s.length||1)):null),r=e.direction+"Axis "+e.direction+e.n+"Axis",o="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+r,c=t.font||"flot-tick-label tickLabel",d=0;d<s.length;++d){var u=s[d];if(u.label){var p=l.getTextInfo(o,u.label,c,null,i);a=Math.max(a,p.width+1),n=Math.max(n,p.height)}}e.labelWidth=t.labelWidth||a,e.labelHeight=t.labelHeight||n}function O(t){var s=t.labelWidth,a=t.labelHeight,n=t.options.position,i="x"===t.direction,r=t.options.tickLength,c=o.grid.axisMargin,d=o.grid.labelMargin,u=o.grid.eventSectionHeight,p=!0,f=!0,b=!0,v=!1;e.each(i?h:g,(function(e,s){s&&(s.show||s.reserveSpace)&&(s===t?v=!0:s.options.position===n&&(v?f=!1:p=!1),v||(b=!1))})),f&&(c=0),null==r&&(r=b?"full":5),isNaN(+r)||(d+=+r),i?(a+=d,a+=u,"bottom"==n?(m.bottom+=a+c,t.box={top:l.height-m.bottom,height:a}):(t.box={top:m.top+c,height:a},m.top+=a+c)):(s+=d,"left"==n?(t.box={left:m.left+c,width:s},m.left+=s+c):(m.right+=s+c,t.box={left:l.width-m.right,width:s})),t.position=n,t.tickLength=r,t.box.padding=d,t.box.eventSectionPadding=u,t.innermost=p}function I(){var s=k(),a=o.grid.show;for(var n in m){var i=o.grid.margin||0;m[n]="number"==typeof i?i:i[n]||0}for(var n in y(v.processOffset,[m]),m)"object"==typeof o.grid.borderWidth?m[n]+=a?o.grid.borderWidth[n]:0:m[n]+=a?o.grid.borderWidth:0;if(e.each(s,(function(e,t){var s=t.options;t.show=null==s.show?t.used:s.show,t.reserveSpace=null==s.reserveSpace?t.show:s.reserveSpace,function(e){var t=e.options,s=+(null!=t.min?t.min:e.datamin),a=+(null!=t.max?t.max:e.datamax),n=a-s;if(0==n){var i=.25,r=Math.abs(0==a?1:a*i);null==t.min&&(s-=r),null!=t.max&&null==t.min||(a+=r)}else{var o=t.autoscaleMargin;null!=o&&(null==t.min&&(s-=n*o)<0&&null!=e.datamin&&e.datamin>=0&&(s=0),null==t.max&&(a+=n*o)>0&&null!=e.datamax&&e.datamax<=0&&(a=0))}e.min=s,e.max=a}(t)})),y(v.processRange,[]),a){for(var c=e.grep(s,(function(e){return e.show||e.reserveSpace})),d=!1,u=0;u<2&&(e.each(c,(function(e,t){P(t),M(t),d=F(t,t.ticks)||d,N(t)})),d&&v.processRange.length>0);u++)y(v.processRange,[]),d=!1;for(u=c.length-1;u>=0;--u)O(c[u]);!function(){var t,s=o.grid.minBorderMargin;if(null==s)for(s=0,t=0;t<r.length;++t)s=Math.max(s,2*(r[t].points.radius+r[t].points.lineWidth/2));var a={left:s,right:s,top:s,bottom:s};e.each(k(),(function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(a.left=Math.max(a.left,t.labelWidth/2),a.right=Math.max(a.right,t.labelWidth/2)):(a.bottom=Math.max(a.bottom,t.labelHeight/2),a.top=Math.max(a.top,t.labelHeight/2)))})),m.left=Math.ceil(Math.max(a.left,m.left)),m.right=Math.ceil(Math.max(a.right,m.right)),m.top=Math.ceil(Math.max(a.top,m.top)),m.bottom=Math.ceil(Math.max(a.bottom,m.bottom))}(),e.each(c,(function(e,t){!function(e){"x"==e.direction?(e.box.left=m.left-e.labelWidth/2,e.box.width=l.width-m.left-m.right+e.labelWidth):(e.box.top=m.top-e.labelHeight/2,e.box.height=l.height-m.bottom-m.top+e.labelHeight)}(t)}))}f=l.width-m.left-m.right,b=l.height-m.bottom-m.top,e.each(s,(function(e,t){!function(e){function t(e){return e}var s,a,n=e.options.transform||t,i=e.options.inverseTransform;"x"==e.direction?(s=e.scale=f/Math.abs(n(e.max)-n(e.min)),a=Math.min(n(e.max),n(e.min))):(s=-(s=e.scale=b/Math.abs(n(e.max)-n(e.min))),a=Math.max(n(e.max),n(e.min))),e.p2c=n==t?function(e){return(e-a)*s}:function(e){return(n(e)-a)*s},e.c2p=i?function(e){return i(a+e/s)}:function(e){return a+e/s}}(t)})),a&&e.each(k(),(function(e,t){var s,a,n,i,r,o=t.box,c=t.direction+"Axis "+t.direction+t.n+"Axis",d="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+c,u=t.options.font||"flot-tick-label tickLabel";if(l.removeText(d),t.show&&0!=t.ticks.length)for(var p=0;p<t.ticks.length;++p)!(s=t.ticks[p]).label||s.v<t.min||s.v>t.max||("x"==t.direction?(i="center",a=m.left+t.p2c(s.v),"bottom"==t.position?n=o.top+o.padding+o.eventSectionPadding:(n=o.top+o.height-o.padding,r="bottom")):(r="middle",n=m.top+t.p2c(s.v),"left"==t.position?(a=o.left+o.width-o.padding,i="right"):a=o.left+o.padding),l.addText(d,a,n,s.label,u,null,null,i,r))})),function(){null!=o.legend.container?e(o.legend.container).html(""):t.find(".legend").remove();if(!o.legend.show)return;for(var s,a,n=[],i=[],l=!1,c=o.legend.labelFormatter,d=0;d<r.length;++d)(s=r[d]).label&&(a=c?c(s.label,s):s.label)&&i.push({label:a,color:s.color});if(o.legend.sorted)if(e.isFunction(o.legend.sorted))i.sort(o.legend.sorted);else if("reverse"==o.legend.sorted)i.reverse();else{var u="descending"!=o.legend.sorted;i.sort((function(e,t){return e.label==t.label?0:e.label<t.label!=u?1:-1}))}for(d=0;d<i.length;++d){var p=i[d];d%o.legend.noColumns==0&&(l&&n.push("</tr>"),n.push("<tr>"),l=!0),n.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+p.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+p.label+"</td>")}l&&n.push("</tr>");if(0==n.length)return;var h='<table style="font-size:smaller;color:'+o.grid.color+'">'+n.join("")+"</table>";if(null!=o.legend.container)e(o.legend.container).html(h);else{var g="",f=o.legend.position,b=o.legend.margin;null==b[0]&&(b=[b,b]),"n"==f.charAt(0)?g+="top:"+(b[1]+m.top)+"px;":"s"==f.charAt(0)&&(g+="bottom:"+(b[1]+m.bottom)+"px;"),"e"==f.charAt(1)?g+="right:"+(b[0]+m.right)+"px;":"w"==f.charAt(1)&&(g+="left:"+(b[0]+m.left)+"px;");var v=e('<div class="legend">'+h.replace('style="','style="position:absolute;'+g+";")+"</div>").appendTo(t);if(0!=o.legend.backgroundOpacity){var x=o.legend.backgroundColor;null==x&&((x=(x=o.grid.backgroundColor)&&"string"==typeof x?e.color.parse(x):e.color.extract(v,"background-color")).a=1,x=x.toString());var y=v.children();e('<div style="position:absolute;width:'+y.width()+"px;height:"+y.height()+"px;"+g+"background-color:"+x+';"> </div>').prependTo(v).css("opacity",o.legend.backgroundOpacity)}}}()}function P(t){var s,a=t.options;s="number"==typeof a.ticks&&a.ticks>0?a.ticks:.3*Math.sqrt("x"==t.direction?l.width:l.height);var n=(t.max-t.min)/s,i=-Math.floor(Math.log(n)/Math.LN10),r=a.tickDecimals;null!=r&&i>r&&(i=r);var o,c=Math.pow(10,-i),d=n/c;if(d<1.5?o=1:d<3?(o=2,d>2.25&&(null==r||i+1<=r)&&(o=2.5,++i)):o=d<7.5?5:10,o*=c,null!=a.minTickSize&&o<a.minTickSize&&(o=a.minTickSize),t.delta=n,t.tickDecimals=Math.max(0,null!=r?r:i),t.tickSize=a.tickSize||o,"time"==a.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,s,a,n=[],i=(s=e.min,(a=e.tickSize)*Math.floor(s/a)),r=0,o=Number.NaN;do{t=o,o=i+r*e.tickSize,n.push(o),++r}while(o<e.max&&o!=t);return n},t.tickFormatter=function(e,t){var s=t.tickDecimals?Math.pow(10,t.tickDecimals):1,a=""+Math.round(e*s)/s;if(null!=t.tickDecimals){var n=a.indexOf("."),i=-1==n?0:a.length-n-1;if(i<t.tickDecimals)return(i?a:a+".")+(""+s).substr(1,t.tickDecimals-i)}return a}),e.isFunction(a.tickFormatter)&&(t.tickFormatter=function(e,t){return""+a.tickFormatter(e,t)}),null!=a.alignTicksWithAxis){var u=("x"==t.direction?h:g)[a.alignTicksWithAxis-1];if(u&&u.used&&u!=t){var p=t.tickGenerator(t);if(p.length>0&&(null==a.min&&(t.min=Math.min(t.min,p[0])),null==a.max&&p.length>1&&(t.max=Math.max(t.max,p[p.length-1]))),t.tickGenerator=function(e){var t,s,a=[];for(s=0;s<u.ticks.length;++s)t=(u.ticks[s].v-u.min)/(u.max-u.min),t=e.min+t*(e.max-e.min),a.push(t);return a},!t.mode&&null==a.tickDecimals){var m=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),f=t.tickGenerator(t);f.length>1&&/\..*0$/.test((f[1]-f[0]).toFixed(m))||(t.tickDecimals=m)}}}}function M(t){var s,a,n=t.options.ticks,i=[];for(null==n||"number"==typeof n&&n>0?i=t.tickGenerator(t):n&&(i=e.isFunction(n)?n(t):n),t.ticks=[],s=0;s<i.length;++s){var r=null,o=i[s];"object"==typeof o?(a=+o[0],o.length>1&&(r=o[1])):a=+o,null==r&&(r=t.tickFormatter(a,t)),isNaN(a)||t.ticks.push({v:a,label:r})}}function F(e,t){var s=!1;return e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v),s=!0),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v),s=!0)),s}function A(){l.clear(),y(v.drawBackground,[u]);var e=o.grid;e.show&&e.backgroundColor&&(u.save(),u.translate(m.left,m.top),u.fillStyle=ee(o.grid.backgroundColor,b,0,"rgba(255, 255, 255, 0)"),u.fillRect(0,0,f,b),u.restore()),e.show&&!e.aboveData&&$();for(var t=0;t<r.length;++t)y(v.drawSeries,[u,r[t]]),L(r[t]);y(v.draw,[u]),e.show&&e.aboveData&&$(),l.render(),W()}function D(e,t){for(var s,a,n,i,r=k(),o=0;o<r.length;++o)if((s=r[o]).direction==t&&(e[i=t+s.n+"axis"]||1!=s.n||(i=t+"axis"),e[i])){a=e[i].from,n=e[i].to;break}if(e[i]||(s="x"==t?h[0]:g[0],a=e[t+"1"],n=e[t+"2"]),null!=a&&null!=n&&a>n){var l=a;a=n,n=l}return{from:a,to:n,axis:s}}function $(){var t,s,a,n;u.save(),u.translate(m.left,m.top);var i=o.grid.markings;if(i)for(e.isFunction(i)&&((s=x.getAxes()).xmin=s.xaxis.min,s.xmax=s.xaxis.max,s.ymin=s.yaxis.min,s.ymax=s.yaxis.max,i=i(s)),t=0;t<i.length;++t){var r=i[t],l=D(r,"x"),c=D(r,"y");if(null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),null==c.from&&(c.from=c.axis.min),null==c.to&&(c.to=c.axis.max),!(l.to<l.axis.min||l.from>l.axis.max||c.to<c.axis.min||c.from>c.axis.max)){l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max);var d=l.from===l.to,p=c.from===c.to;if(!d||!p)if(l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),c.from=Math.floor(c.axis.p2c(c.from)),c.to=Math.floor(c.axis.p2c(c.to)),d||p){var h=r.lineWidth||o.grid.markingsLineWidth,g=h%2?.5:0;u.beginPath(),u.strokeStyle=r.color||o.grid.markingsColor,u.lineWidth=h,d?(u.moveTo(l.to+g,c.from),u.lineTo(l.to+g,c.to)):(u.moveTo(l.from,c.to+g),u.lineTo(l.to,c.to+g)),u.stroke()}else u.fillStyle=r.color||o.grid.markingsColor,u.fillRect(l.from,c.to,l.to-l.from,c.from-c.to)}}s=k(),a=o.grid.borderWidth;for(var v=0;v<s.length;++v){var y,w,j,S,C=s[v],T=C.box,N=C.tickLength;if(C.show&&0!=C.ticks.length){for(u.lineWidth=1,"x"==C.direction?(y=0,w="full"==N?"top"==C.position?0:b:T.top-m.top+("top"==C.position?T.height:0)):(w=0,y="full"==N?"left"==C.position?0:f:T.left-m.left+("left"==C.position?T.width:0)),C.innermost||(u.strokeStyle=C.options.color,u.beginPath(),j=S=0,"x"==C.direction?j=f+1:S=b+1,1==u.lineWidth&&("x"==C.direction?w=Math.floor(w)+.5:y=Math.floor(y)+.5),u.moveTo(y,w),u.lineTo(y+j,w+S),u.stroke()),u.strokeStyle=C.options.tickColor,u.beginPath(),t=0;t<C.ticks.length;++t){var O=C.ticks[t].v;j=S=0,isNaN(O)||O<C.min||O>C.max||"full"==N&&("object"==typeof a&&a[C.position]>0||a>0)&&(O==C.min||O==C.max)||("x"==C.direction?(y=C.p2c(O),S="full"==N?-b:N,"top"==C.position&&(S=-S)):(w=C.p2c(O),j="full"==N?-f:N,"left"==C.position&&(j=-j)),1==u.lineWidth&&("x"==C.direction?y=Math.floor(y)+.5:w=Math.floor(w)+.5),u.moveTo(y,w),u.lineTo(y+j,w+S))}u.stroke()}}a&&(n=o.grid.borderColor,"object"==typeof a||"object"==typeof n?("object"!=typeof a&&(a={top:a,right:a,bottom:a,left:a}),"object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),a.top>0&&(u.strokeStyle=n.top,u.lineWidth=a.top,u.beginPath(),u.moveTo(0-a.left,0-a.top/2),u.lineTo(f,0-a.top/2),u.stroke()),a.right>0&&(u.strokeStyle=n.right,u.lineWidth=a.right,u.beginPath(),u.moveTo(f+a.right/2,0-a.top),u.lineTo(f+a.right/2,b),u.stroke()),a.bottom>0&&(u.strokeStyle=n.bottom,u.lineWidth=a.bottom,u.beginPath(),u.moveTo(f+a.right,b+a.bottom/2),u.lineTo(0,b+a.bottom/2),u.stroke()),a.left>0&&(u.strokeStyle=n.left,u.lineWidth=a.left,u.beginPath(),u.moveTo(0-a.left/2,b+a.bottom),u.lineTo(0-a.left/2,0),u.stroke())):(u.lineWidth=a,u.strokeStyle=o.grid.borderColor,u.strokeRect(-a/2,-a/2,f+a,b+a))),u.restore()}function L(e){e.lines.show&&(function(e){function t(e,t,s,a,n){var i=e.points,r=e.pointsize,o=null,l=null;u.beginPath();for(var c=r;c<i.length;c+=r){var d=i[c-r],p=i[c-r+1],h=i[c],g=i[c+1];if(null!=d&&null!=h){if(p<=g&&p<n.min){if(g<n.min)continue;d=(n.min-p)/(g-p)*(h-d)+d,p=n.min}else if(g<=p&&g<n.min){if(p<n.min)continue;h=(n.min-p)/(g-p)*(h-d)+d,g=n.min}if(p>=g&&p>n.max){if(g>n.max)continue;d=(n.max-p)/(g-p)*(h-d)+d,p=n.max}else if(g>=p&&g>n.max){if(p>n.max)continue;h=(n.max-p)/(g-p)*(h-d)+d,g=n.max}if(d<=h&&d<a.min){if(h<a.min)continue;p=(a.min-d)/(h-d)*(g-p)+p,d=a.min}else if(h<=d&&h<a.min){if(d<a.min)continue;g=(a.min-d)/(h-d)*(g-p)+p,h=a.min}if(d>=h&&d>a.max){if(h>a.max)continue;p=(a.max-d)/(h-d)*(g-p)+p,d=a.max}else if(h>=d&&h>a.max){if(d>a.max)continue;g=(a.max-d)/(h-d)*(g-p)+p,h=a.max}d==o&&p==l||u.moveTo(a.p2c(d)+t,n.p2c(p)+s),o=h,l=g,u.lineTo(a.p2c(h)+t,n.p2c(g)+s)}}u.stroke()}function s(e,t,s){for(var a=e.points,n=e.pointsize,i=Math.min(Math.max(0,s.min),s.max),r=0,o=!1,l=1,c=0,d=0;!(n>0&&r>a.length+n);){var p=a[(r+=n)-n],h=a[r-n+l],g=a[r],m=a[r+l];if(o){if(n>0&&null!=p&&null==g){d=r,n=-n,l=2;continue}if(n<0&&r==c+n){u.fill(),o=!1,l=1,r=c=d+(n=-n);continue}}if(null!=p&&null!=g){if(p<=g&&p<t.min){if(g<t.min)continue;h=(t.min-p)/(g-p)*(m-h)+h,p=t.min}else if(g<=p&&g<t.min){if(p<t.min)continue;m=(t.min-p)/(g-p)*(m-h)+h,g=t.min}if(p>=g&&p>t.max){if(g>t.max)continue;h=(t.max-p)/(g-p)*(m-h)+h,p=t.max}else if(g>=p&&g>t.max){if(p>t.max)continue;m=(t.max-p)/(g-p)*(m-h)+h,g=t.max}if(o||(u.beginPath(),u.moveTo(t.p2c(p),s.p2c(i)),o=!0),h>=s.max&&m>=s.max)u.lineTo(t.p2c(p),s.p2c(s.max)),u.lineTo(t.p2c(g),s.p2c(s.max));else if(h<=s.min&&m<=s.min)u.lineTo(t.p2c(p),s.p2c(s.min)),u.lineTo(t.p2c(g),s.p2c(s.min));else{var f=p,b=g;h<=m&&h<s.min&&m>=s.min?(p=(s.min-h)/(m-h)*(g-p)+p,h=s.min):m<=h&&m<s.min&&h>=s.min&&(g=(s.min-h)/(m-h)*(g-p)+p,m=s.min),h>=m&&h>s.max&&m<=s.max?(p=(s.max-h)/(m-h)*(g-p)+p,h=s.max):m>=h&&m>s.max&&h<=s.max&&(g=(s.max-h)/(m-h)*(g-p)+p,m=s.max),p!=f&&u.lineTo(t.p2c(f),s.p2c(h)),u.lineTo(t.p2c(p),s.p2c(h)),u.lineTo(t.p2c(g),s.p2c(m)),g!=b&&(u.lineTo(t.p2c(g),s.p2c(m)),u.lineTo(t.p2c(b),s.p2c(m)))}}}}u.save(),u.translate(m.left,m.top),u.lineJoin="round";var a=e.lines.lineWidth,n=e.shadowSize;if(a>0&&n>0){u.lineWidth=n,u.strokeStyle="rgba(0,0,0,0.1)";var i=Math.PI/18;t(e.datapoints,Math.sin(i)*(a/2+n/2),Math.cos(i)*(a/2+n/2),e.xaxis,e.yaxis),u.lineWidth=n/2,t(e.datapoints,Math.sin(i)*(a/2+n/4),Math.cos(i)*(a/2+n/4),e.xaxis,e.yaxis)}u.lineWidth=a,u.strokeStyle=e.color;var r=_(e.lines,e.color,0,b);r&&(u.fillStyle=r,s(e.datapoints,e.xaxis,e.yaxis));a>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);u.restore()}(e),e.points.show||e.bars.show||function(e){for(var t=[],s=null,a=null,n=e.datapoints,i=[],r=0;r<n.pointsize-2;r++)i.push(0);for(var o=0;o<n.points.length;o+=n.pointsize){var l=n.points[o],c=n.points[o+1];a=o===n.points.length-n.pointsize?null:n.points[o+n.pointsize],null!==l&&null!==c&&null===s&&null===a&&(t.push(l),t.push(c),t.push.apply(t,i)),s=l}var d=n.points;n.points=t,e.points.radius=e.lines.lineWidth/2,E(e),n.points=d}(e)),e.bars.show&&function(e){function t(t,s,a,n,i,r){for(var o=t.points,l=t.pointsize,c=0;c<o.length;c+=l)null!=o[c]&&R(o[c],o[c+1],o[c+2],s,a,n,i,r,u,e.bars.horizontal,e.bars.lineWidth)}var s;switch(u.save(),u.translate(m.left,m.top),u.lineWidth=e.bars.lineWidth,u.strokeStyle=e.color,e.bars.align){case"left":s=0;break;case"right":s=-e.bars.barWidth;break;default:s=-e.bars.barWidth/2}var a=e.bars.fill?function(t,s){return _(e.bars,e.color,t,s)}:null;t(e.datapoints,s,s+e.bars.barWidth,a,e.xaxis,e.yaxis),u.restore()}(e),e.points.show&&E(e)}function E(e){function t(e,t,s,a,n,i,r,o){for(var l=e.points,c=e.pointsize,d=0;d<l.length;d+=c){var p=l[d],h=l[d+1];null==p||p<i.min||p>i.max||h<r.min||h>r.max||(u.beginPath(),p=i.p2c(p),h=r.p2c(h)+a,"circle"==o?u.arc(p,h,t,0,n?Math.PI:2*Math.PI,!1):o(u,p,h,t,n),u.closePath(),s&&(u.fillStyle=s,u.fill()),u.stroke())}}u.save(),u.translate(m.left,m.top);var s=e.points.lineWidth,a=e.shadowSize,n=e.points.radius,i=e.points.symbol;if(0==s&&(s=1e-4),s>0&&a>0){var r=a/2;u.lineWidth=r,u.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,n,null,r+r/2,!0,e.xaxis,e.yaxis,i),u.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,n,null,r/2,!0,e.xaxis,e.yaxis,i)}u.lineWidth=s,u.strokeStyle=e.color,t(e.datapoints,n,_(e.points,e.color),0,!1,e.xaxis,e.yaxis,i),u.restore()}function R(e,t,s,a,n,i,r,o,l,c,d){var u,p,h,g,m,f,b,v,x;c?(v=f=b=!0,m=!1,g=t+a,h=t+n,(p=e)<(u=s)&&(x=p,p=u,u=x,m=!0,f=!1)):(m=f=b=!0,v=!1,u=e+a,p=e+n,(g=t)<(h=s)&&(x=g,g=h,h=x,v=!0,b=!1)),p<r.min||u>r.max||g<o.min||h>o.max||(u<r.min&&(u=r.min,m=!1),p>r.max&&(p=r.max,f=!1),h<o.min&&(h=o.min,v=!1),g>o.max&&(g=o.max,b=!1),u=r.p2c(u),h=o.p2c(h),p=r.p2c(p),g=o.p2c(g),i&&(l.fillStyle=i(h,g),l.fillRect(u,g,p-u,h-g)),d>0&&(m||f||b||v)&&(l.beginPath(),l.moveTo(u,h),m?l.lineTo(u,g):l.moveTo(u,g),b?l.lineTo(p,g):l.moveTo(p,g),f?l.lineTo(p,h):l.moveTo(p,h),v?l.lineTo(u,h):l.moveTo(u,h),l.stroke()))}function _(t,s,a,n){var i=t.fill;if(!i)return null;if(t.fillColor)return ee(t.fillColor,a,n,s);var r=e.color.parse(s);return r.a="number"==typeof i?i:.4,r.normalize(),r.toString()}x.setData=w,x.setupGrid=I,x.draw=A,x.getPlaceholder=function(){return t},x.getCanvas=function(){return l.element},x.getPlotOffset=function(){return m},x.width=function(){return f},x.height=function(){return b},x.offset=function(){var e=d.offset();return e.left+=m.left,e.top+=m.top,e},x.getData=function(){return r},x.getAxes=function(){var t={};return e.each(h.concat(g),(function(e,s){s&&(t[s.direction+(1!=s.n?s.n:"")+"axis"]=s)})),t},x.getXAxes=function(){return h},x.getYAxes=function(){return g},x.c2p=S,x.p2c=function(e){var t,s,a,n={};for(t=0;t<h.length;++t)if((s=h[t])&&s.used&&(a="x"+s.n,null==e[a]&&1==s.n&&(a="x"),null!=e[a])){n.left=s.p2c(e[a]);break}for(t=0;t<g.length;++t)if((s=g[t])&&s.used&&(a="y"+s.n,null==e[a]&&1==s.n&&(a="y"),null!=e[a])){n.top=s.p2c(e[a]);break}return n},x.getOptions=function(){return o},x.highlight=Q,x.unhighlight=K,x.triggerRedrawOverlay=W,x.pointOffset=function(e){return{left:parseInt(h[j(e,"x")-1].p2c(+e.x)+m.left,10),top:parseInt(g[j(e,"y")-1].p2c(+e.y)+m.top,10)}},x.shutdown=T,x.destroy=function(){T(),t.removeData("plot").empty(),r=[],o=null,l=null,c=null,d=null,u=null,p=null,h=[],g=[],v=null,V=[],x=null},x.resize=function(){var e=t.width(),s=t.height();l.resize(e,s),c.resize(e,s)},x.hooks=v,function(){for(var t={Canvas:s},a=0;a<i.length;++a){var n=i[a];n.init(x,t),n.options&&e.extend(!0,o,n.options)}}(),function(s){e.extend(!0,o,s),s&&s.colors&&(o.colors=s.colors);null==o.xaxis.color&&(o.xaxis.color=e.color.parse(o.grid.color).scale("a",.22).toString());null==o.yaxis.color&&(o.yaxis.color=e.color.parse(o.grid.color).scale("a",.22).toString());null==o.xaxis.tickColor&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color);null==o.yaxis.tickColor&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color);null==o.grid.borderColor&&(o.grid.borderColor=o.grid.color);null==o.grid.tickColor&&(o.grid.tickColor=e.color.parse(o.grid.color).scale("a",.22).toString());var a,n,i,r=t.css("font-size"),l=r?+r.replace("px",""):13,c={style:t.css("font-style"),size:Math.round(.8*l),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")};for(i=o.xaxes.length||1,a=0;a<i;++a)(n=o.xaxes[a])&&!n.tickColor&&(n.tickColor=n.color),n=e.extend(!0,{},o.xaxis,n),o.xaxes[a]=n,n.font&&(n.font=e.extend({},c,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(i=o.yaxes.length||1,a=0;a<i;++a)(n=o.yaxes[a])&&!n.tickColor&&(n.tickColor=n.color),n=e.extend(!0,{},o.yaxis,n),o.yaxes[a]=n,n.font&&(n.font=e.extend({},c,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));o.xaxis.noTicks&&null==o.xaxis.ticks&&(o.xaxis.ticks=o.xaxis.noTicks);o.yaxis.noTicks&&null==o.yaxis.ticks&&(o.yaxis.ticks=o.yaxis.noTicks);o.x2axis&&(o.xaxes[1]=e.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",null==o.x2axis.min&&(o.xaxes[1].min=null),null==o.x2axis.max&&(o.xaxes[1].max=null));o.y2axis&&(o.yaxes[1]=e.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",null==o.y2axis.min&&(o.yaxes[1].min=null),null==o.y2axis.max&&(o.yaxes[1].max=null));o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas);o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor);o.lines&&e.extend(!0,o.series.lines,o.lines);o.points&&e.extend(!0,o.series.points,o.points);o.bars&&e.extend(!0,o.series.bars,o.bars);null!=o.shadowSize&&(o.series.shadowSize=o.shadowSize);null!=o.highlightColor&&(o.series.highlightColor=o.highlightColor);for(a=0;a<o.xaxes.length;++a)C(h,a+1).options=o.xaxes[a];for(a=0;a<o.yaxes.length;++a)C(g,a+1).options=o.yaxes[a];for(var d in v)o.hooks[d]&&o.hooks[d].length&&(v[d]=v[d].concat(o.hooks[d]));y(v.processOptions,[o])}(n),function(){t.find(".flot-temp-elem").remove(),"static"==t.css("position")&&t.css("position","relative");l=new s("flot-base",t),c=new s("flot-overlay",t),u=l.context,p=c.context,d=e(c.element).unbind();var a=t.data("plot");a&&(a.shutdown(),c.clear());t.data("plot",x)}(),w(a),I(),A(),function(){o.grid.hoverable&&(d.mousemove(z),d.bind("mouseleave",U),e(document).bind("touchend",H));o.grid.clickable&&d.click(q);y(v.bindEvents,[d])}();var V=[],B=null;function z(e){o.grid.hoverable&&G("plothover",e,(function(e){return 0!=e.hoverable}))}function U(e){o.grid.hoverable&&G("plothover",e,(function(e){return!1}))}function q(e){x.isSelecting||G("plotclick",e,(function(e){return 0!=e.clickable}))}function H(e){e.cancelable&&(d.is(e.target)||0!==d.has(e.target).length?(z(function(e){if(!e||!e.originalEvent)return e;if(e.pageX&&e.pageY)return e;var t=e.originalEvent;if(0===t.changedTouches.length)return e;var s=t.changedTouches[0];return e.pageX=s.pageX,e.pageY=s.pageY,e}(e)),e.preventDefault()):G("plotleave",e,(function(e){})))}function G(e,s,a){var n=d.offset(),i=s.pageX-n.left-m.left,l=s.pageY-n.top-m.top,c=S({left:i,top:l});c.pageX=s.pageX,c.pageY=s.pageY,c.ctrlKey=s.ctrlKey,c.metaKey=s.metaKey;var u=function(e,t,s){var a,n,i,l=o.grid.mouseActiveRadius,c=l*l+1,d=null;for(a=r.length-1;a>=0;--a)if(s(r[a])){var u=r[a],p=u.xaxis,h=u.yaxis,g=u.datapoints.points,m=p.c2p(e),f=h.c2p(t),b=l/p.scale,v=l/h.scale;if(i=u.datapoints.pointsize,p.options.inverseTransform&&(b=Number.MAX_VALUE),h.options.inverseTransform&&(v=Number.MAX_VALUE),u.lines.show||u.points.show)for(n=0;n<g.length;n+=i){var x=g[n],y=g[n+1];if(null!=x&&!(x-m>b||x-m<-b||y-f>v||y-f<-v)){var w=Math.abs(p.p2c(x)-e),j=Math.abs(h.p2c(y)-t),k=w*w+j*j;k<c&&(c=k,d=[a,n/i])}}if(u.bars.show&&!d){var S,C;switch(u.bars.align){case"left":S=0;break;case"right":S=-u.bars.barWidth;break;default:S=-u.bars.barWidth/2}for(C=S+u.bars.barWidth,n=0;n<g.length;n+=i){x=g[n],y=g[n+1];var T=g[n+2];null!=x&&(r[a].bars.horizontal?m<=Math.max(T,x)&&m>=Math.min(T,x)&&f>=y+S&&f<=y+C:m>=x+S&&m<=x+C&&f>=Math.min(T,y)&&f<=Math.max(T,y))&&(d=[a,n/i])}}}return d?(a=d[0],n=d[1],i=r[a].datapoints.pointsize,{datapoint:r[a].datapoints.points.slice(n*i,(n+1)*i),dataIndex:n,series:r[a],seriesIndex:a}):null}(i,l,a);if(u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+n.left+m.left,10),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+n.top+m.top,10)),o.grid.autoHighlight){for(var p=0;p<V.length;++p){var h=V[p];h.auto!=e||u&&h.series==u.series&&h.point[0]==u.datapoint[0]&&h.point[1]==u.datapoint[1]||K(h.series,h.point)}u&&Q(u.series,u.datapoint,e)}t.trigger(e,[c,u])}function W(){var e=o.interaction.redrawOverlayInterval;-1!=e?B||(B=setTimeout(Z,e)):Z()}function Z(){var e,t;for(B=null,p.save(),c.clear(),p.translate(m.left,m.top),e=0;e<V.length;++e)(t=V[e]).series.bars.show?X(t.series,t.point):J(t.series,t.point);p.restore(),y(v.drawOverlay,[p])}function Q(e,t,s){if("number"==typeof e&&(e=r[e]),"number"==typeof t){var a=e.datapoints.pointsize;t=e.datapoints.points.slice(a*t,a*(t+1))}var n=Y(e,t);-1==n?(V.push({series:e,point:t,auto:s}),W()):s||(V[n].auto=!1)}function K(e,t){if(null==e&&null==t)return V=[],void W();if("number"==typeof e&&(e=r[e]),"number"==typeof t){var s=e.datapoints.pointsize;t=e.datapoints.points.slice(s*t,s*(t+1))}var a=Y(e,t);-1!=a&&(V.splice(a,1),W())}function Y(e,t){for(var s=0;s<V.length;++s){var a=V[s];if(a.series==e&&a.point[0]==t[0]&&a.point[1]==t[1])return s}return-1}function J(t,s){var a=s[0],n=s[1],i=t.xaxis,r=t.yaxis,o="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(a<i.min||a>i.max||n<r.min||n>r.max)){var l=t.points.radius+t.points.lineWidth/2;p.lineWidth=l,p.strokeStyle=o;var c=1.5*l;a=i.p2c(a),n=r.p2c(n),p.beginPath(),"circle"==t.points.symbol?p.arc(a,n,c,0,2*Math.PI,!1):t.points.symbol(p,a,n,c,!1),p.closePath(),p.stroke()}}function X(t,s){var a,n="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),i=n;switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}p.lineWidth=t.bars.lineWidth,p.strokeStyle=n,R(s[0],s[1],s[2]||0,a,a+t.bars.barWidth,(function(){return i}),t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function ee(t,s,a,n){if("string"==typeof t)return t;for(var i=u.createLinearGradient(0,a,0,s),r=0,o=t.colors.length;r<o;++r){var l=t.colors[r];if("string"!=typeof l){var c=e.color.parse(n);null!=l.brightness&&(c=c.scale("rgb",l.brightness)),null!=l.opacity&&(c.a*=l.opacity),l=c.toString()}i.addColorStop(r/(o-1),l)}return i}}e.fn.detach||(e.fn.detach=function(){return this.each((function(){this.parentNode&&this.parentNode.removeChild(this)}))}),s.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var s=this.element,a=this.context,n=this.pixelRatio;this.width!=e&&(s.width=e*n,s.style.width=e+"px",this.width=e),this.height!=t&&(s.height=t*n,s.style.height=t+"px",this.height=t),a.restore(),a.save(),a.scale(n,n)},s.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},s.prototype.render=function(){var e=this._textCache;for(var s in e)if(t.call(e,s)){var a=this.getTextLayer(s),n=e[s];for(var i in a.hide(),n)if(t.call(n,i)){var r=n[i];for(var o in r)if(t.call(r,o)){for(var l,c=r[o].positions,d=0;l=c[d];d++)l.active?l.rendered||(a.append(l.element),l.rendered=!0):(c.splice(d--,1),l.rendered&&l.element.detach());0==c.length&&delete r[o]}}a.show()}},s.prototype.getTextLayer=function(t){var s=this.text[t];return null==s&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},s.prototype.getTextInfo=function(t,s,a,n,i){var r,o,l,c;if(s=""+s,r="object"==typeof a?a.style+" "+a.variant+" "+a.weight+" "+a.size+"px/"+a.lineHeight+"px "+a.family:a,null==(o=this._textCache[t])&&(o=this._textCache[t]={}),null==(l=o[r])&&(l=o[r]={}),null==(c=l[s])){var d=e("<div></div>").html(s).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof a?d.css({font:r,color:a.color}):"string"==typeof a&&d.addClass(a),c=l[s]={element:d,positions:[]};var u=this._textSizeCache[s];u?(c.width=u.width,c.height=u.height):(c.width=d.outerWidth(!0),c.height=d.outerHeight(!0),this._textSizeCache[s]={width:c.width,height:c.height}),d.detach()}return c},s.prototype.addText=function(e,t,s,a,n,i,r,o,l){var c=this.getTextInfo(e,a,n,i,r),d=c.positions;"center"==o?t-=c.width/2:"right"==o&&(t-=c.width),"middle"==l?s-=c.height/2:"bottom"==l&&(s-=c.height);for(var u,p=0;u=d[p];p++)if(u.x==t&&u.y==s)return void(u.active=!0);u={active:!0,rendered:!1,element:d.length?c.element.clone():c.element,x:t,y:s},d.push(u),u.element.css({top:Math.round(s),left:Math.round(t),"text-align":o})},s.prototype.removeText=function(e,s,a,n,i,r){if(null==n){var o=this._textCache[e];if(null!=o)for(var l in o)if(t.call(o,l)){var c=o[l];for(var d in c)if(t.call(c,d))for(var u=c[d].positions,p=0;h=u[p];p++)h.active=!1}}else{var h;for(u=this.getTextInfo(e,n,i,r).positions,p=0;h=u[p];p++)h.x==s&&h.y==a&&(h.active=!1)}},e.plot=function(t,s,n){return new a(e(t),s,n,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,s){return this.each((function(){e.plot(this,t,s)}))}}(jQuery)},"./public/vendor/flot/jquery.flot.selection.js":()=>{!function(e){e.plot.plugins.push({init:function(t){var s={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},n=null;function i(e){s.active&&(u(e),t.getPlaceholder().trigger("plotselecting",[o()]))}function r(i){1==i.which&&(document.body.focus(),void 0!==document.onselectstart&&null==a.onselectstart&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==a.ondrag&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),d(s.first,i),s.active=!0,n=function(e){!function(e){n=null,void 0!==document.onselectstart&&(document.onselectstart=a.onselectstart);void 0!==document.ondrag&&(document.ondrag=a.ondrag);s.active=!1,u(e),g()?l(e):(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null]));setTimeout((function(){t.isSelecting=!1}),10)}(e)},e(document).one("mouseup",n))}function o(){if(!g())return null;if(!s.show)return null;var a={},n=s.first,i=s.second,r=t.getAxes();return e.each(r,(function(e,t){t.used&&(anyUsed=!1)})),e.each(r,(function(e,t){t.used;var s=t.c2p(n[t.direction]),r=t.c2p(i[t.direction]);a[e]={from:Math.min(s,r),to:Math.max(s,r)}})),a}function l(e){var s=o();s.ctrlKey=e.ctrlKey,s.metaKey=e.metaKey,t.getPlaceholder().trigger("plotselected",[s]),s.xaxis&&s.yaxis&&t.getPlaceholder().trigger("selected",[{x1:s.xaxis.from,y1:s.yaxis.from,x2:s.xaxis.to,y2:s.yaxis.to}])}function c(e,t,s){return t<e?e:t>s?s:t}function d(e,a){var n=t.getOptions(),i=t.getPlaceholder().offset(),r=t.getPlotOffset();e.x=c(0,a.pageX-i.left-r.left,t.width()),e.y=c(0,a.pageY-i.top-r.top,t.height()),"y"==n.selection.mode&&(e.x=e==s.first?0:t.width()),"x"==n.selection.mode&&(e.y=e==s.first?0:t.height())}function u(e){null!=e.pageX&&(d(s.second,e),g()?(t.isSelecting=!0,s.show=!0,t.triggerRedrawOverlay()):p(!0))}function p(e){s.show&&(s.show=!1,t.triggerRedrawOverlay(),e||t.getPlaceholder().trigger("plotunselected",[]))}function h(e,s){var a,n,i,r,o=t.getAxes();for(var l in o)if((a=o[l]).direction==s&&(e[r=s+a.n+"axis"]||1!=a.n||(r=s+"axis"),e[r])){n=e[r].from,i=e[r].to;break}if(e[r]||(a="x"==s?t.getXAxes()[0]:t.getYAxes()[0],n=e[s+"1"],i=e[s+"2"]),null!=n&&null!=i&&n>i){var c=n;n=i,i=c}return{from:n,to:i,axis:a}}function g(){var e=t.getOptions().selection.minSize;return Math.abs(s.second.x-s.first.x)>=e&&Math.abs(s.second.y-s.first.y)>=e}t.clearSelection=p,t.setSelection=function(e,a){var n,i=t.getOptions();"y"==i.selection.mode?(s.first.x=0,s.second.x=t.width()):(n=h(e,"x"),s.first.x=n.axis.p2c(n.from),s.second.x=n.axis.p2c(n.to)),"x"==i.selection.mode?(s.first.y=0,s.second.y=t.height()):(n=h(e,"y"),s.first.y=n.axis.p2c(n.from),s.second.y=n.axis.p2c(n.to)),s.show=!0,t.triggerRedrawOverlay(),!a&&g()&&l()},t.getSelection=o,t.hooks.bindEvents.push((function(e,t){null!=e.getOptions().selection.mode&&(t.mousemove(i),t.mousedown(r))})),t.hooks.drawOverlay.push((function(t,a){if(s.show&&g()){var n=t.getPlotOffset(),i=t.getOptions();a.save(),a.translate(n.left,n.top);var r=e.color.parse(i.selection.color);a.strokeStyle=r.scale("a",.8).toString(),a.lineWidth=1,a.lineJoin=i.selection.shape,a.fillStyle=r.scale("a",.4).toString();var o=Math.min(s.first.x,s.second.x)+.5,l=Math.min(s.first.y,s.second.y)+.5,c=Math.abs(s.second.x-s.first.x)-1,d=Math.abs(s.second.y-s.first.y)-1;a.fillRect(o,l,c,d),a.strokeRect(o,l,c,d),a.restore()}})),t.hooks.shutdown.push((function(t,s){s.unbind("mousemove",i),s.unbind("mousedown",r),n&&(e(document).unbind("mouseup",n),void 0!==document.onselectstart&&(document.onselectstart=a.onselectstart),void 0!==document.ondrag&&(document.ondrag=a.ondrag))}))},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})}(jQuery)},"./public/vendor/flot/jquery.flot.stack.js":()=>{jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,s){if(null!=t.stack&&!1!==t.stack){var a=function(e,t){for(var s=null,a=0;a<t.length&&e!=t[a];++a)t[a].stack==e.stack&&(s=t[a]);return s}(t,e.getData());if(a){for(var n,i,r,o,l,c,d=s.pointsize,u=s.points,p=a.datapoints.pointsize,h=a.datapoints.points,g=[],m=t.lines.show,f=t.bars.horizontal,b=d>2&&(f?s.format[2].x:s.format[2].y),v=m&&t.lines.steps,x=f?1:0,y=f?0:1,w=0,j=0;!(w>=u.length&&j>=h.length);){if(l=g.length,w<u.length&&null==u[w]){for(c=0;c<d;++c)g.push(u[w+c]);w+=d}else if(w>=u.length){for(c=0;c<d;++c)g.push(h[j+c]);b&&(g[l+2]=h[j+y]),j+=p}else if(j>=h.length){for(c=0;c<d;++c)g.push(u[w+c]);w+=d}else if(j<h.length&&null==h[j])j+=p;else{if(n=u[w+x],u[w+y],i=h[j+x],r=h[j+y],o=0,n==i){for(c=0;c<d;++c)g.push(u[w+c]);g[l+y]+=r,o=r,w+=d,j+=p}else if(n>i){if(0==w){for(c=0;c<d;++c)g.push(h[j+c]);o=r}if(w>0&&null!=u[w-d]){for(g.push(i),g.push(0+r),c=2;c<d;++c)g.push(u[w+c]);o=r}j+=p}else{for(c=0;c<d;++c)g.push(u[w+c]);j>0&&null!=h[j-p]&&(o=0),g[l+y]+=o,w+=d}fromgap=!1,l!=g.length&&b&&(g[l+2]=o)}if(v&&l!=g.length&&l>0&&null!=g[l]&&g[l]!=g[l-d]&&g[l+1]!=g[l-d+1]){for(c=0;c<d;++c)g[l+d+c]=g[l+c];g[l+1]=g[l-d+1]}}s.points=g}}}))},options:{series:{stack:null}},name:"stack",version:"1.2"})},"./public/vendor/flot/jquery.flot.stackpercent.js":()=>{jQuery.plot.plugins.push({init:function(e){var t={},s=!1,a={};function n(e){var t=e.length,s={};if(t>0)for(var a=0;a<t;a++)if(e[a].stackpercent){var n=0,i=1;e[a].bars&&e[a].bars.horizontal&&!0===e[a].bars.horizontal&&(n=1,i=0);for(var r=e[a].data.length,o=0;o<r;o++){var l=0;null!=e[a].data[o][1]&&(l=e[a].data[o][i]),s[e[a].data[o][n]+""]?s[e[a].data[o][n]+""]+=l:s[e[a].data[o][n]+""]=l}}return s}e.hooks.processRawData.push((function(e,t,i,r){if(s||(s=!0,a=n(e.getData())),1==t.stackpercent){var o=i.length;t.percents=[];var l=0,c=1;t.bars&&t.bars.horizontal&&!0===t.bars.horizontal&&(l=1,c=0);for(var d=0;d<o;d++){var u=a[i[d][l]+""];u>0?t.percents.push(100*i[d][c]/u):t.percents.push(0)}}})),e.hooks.processDatapoints.push((function(e,i,r){if(i.stackpercent){s||(a=n(e.getData()));var o=[],l=0,c=1;i.bars&&i.bars.horizontal&&!0===i.bars.horizontal&&(l=1,c=0);for(var d=0;d<r.points.length;d+=3)t[r.points[d+l]]||(t[r.points[d+l]]=0),o[d+l]=r.points[d+l],o[d+c]=r.points[d+c]+t[r.points[d+l]],o[d+2]=t[r.points[d+l]],t[r.points[d+l]]+=r.points[d+c],a[o[d+l]+""]>0?(o[d+c]=100*o[d+c]/a[o[d+l]+""],o[d+2]=100*o[d+2]/a[o[d+l]+""]):(o[d+c]=0,o[d+2]=0);r.points=o}}))},options:{series:{stackpercent:null}},name:"stackpercent",version:"0.1"})},"./public/vendor/flot/jquery.flot.time.js":()=>{!function(e){function t(e,t){return t*Math.floor(e/t)}function s(e,t,s,a){if("function"==typeof e.strftime)return e.strftime(t);var n,i=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},r=[],o=!1,l=e.getHours(),c=l<12;null==s&&(s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==a&&(a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),n=l>12?l-12:0==l?12:l;for(var d=0;d<t.length;++d){var u=t.charAt(d);if(o){switch(u){case"a":u=""+a[e.getDay()];break;case"b":u=""+s[e.getMonth()];break;case"d":u=i(e.getDate(),"");break;case"e":u=i(e.getDate()," ");break;case"h":case"H":u=i(l);break;case"I":u=i(n);break;case"l":u=i(n," ");break;case"m":u=i(e.getMonth()+1,"");break;case"M":u=i(e.getMinutes());break;case"q":u=""+(Math.floor(e.getMonth()/3)+1);break;case"S":u=i(e.getSeconds());break;case"y":u=i(e.getFullYear()%100);break;case"Y":u=""+e.getFullYear();break;case"p":u=c?"am":"pm";break;case"P":u=c?"AM":"PM";break;case"w":u=""+e.getDay()}r.push(u),o=!1}else"%"==u?o=!0:r.push(u)}return r.join("")}function a(e){function t(e,t,s,a){e[t]=function(){return s[a].apply(s,arguments)}}var s={date:e};null!=e.strftime&&t(s,"strftime",e,"strftime"),t(s,"getTime",e,"getTime"),t(s,"setTime",e,"setTime");for(var a=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],n=0;n<a.length;n++)t(s,"get"+a[n],e,"getUTC"+a[n]),t(s,"set"+a[n],e,"setUTC"+a[n]);return s}function n(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var s=new timezoneJS.Date;return s.setTimezone(t.timezone),s.setTime(e),s}return a(new Date(e))}return a(new Date(e))}var i={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],o=r.concat([[3,"month"],[6,"month"],[1,"year"]]),l=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(a){a.hooks.processOptions.push((function(a,r){e.each(a.getAxes(),(function(e,a){var r=a.options;"time"==r.mode&&(a.tickGenerator=function(e){var s=[],a=n(e.min,r),c=0,d=r.tickSize&&"quarter"===r.tickSize[1]||r.minTickSize&&"quarter"===r.minTickSize[1]?l:o;null!=r.minTickSize&&(c="number"==typeof r.tickSize?r.tickSize:r.minTickSize[0]*i[r.minTickSize[1]]);for(var u=0;u<d.length-1&&!(e.delta<(d[u][0]*i[d[u][1]]+d[u+1][0]*i[d[u+1][1]])/2&&d[u][0]*i[d[u][1]]>=c);++u);var p=d[u][0],h=d[u][1];if("year"==h){if(null!=r.minTickSize&&"year"==r.minTickSize[1])p=Math.floor(r.minTickSize[0]);else{var g=Math.pow(10,Math.floor(Math.log(e.delta/i.year)/Math.LN10)),m=e.delta/i.year/g;p=m<1.5?1:m<3?2:m<7.5?5:10,p*=g}p<1&&(p=1)}e.tickSize=r.tickSize||[p,h];var f=e.tickSize[0];h=e.tickSize[1];var b=f*i[h];"second"==h?a.setSeconds(t(a.getSeconds(),f)):"minute"==h?a.setMinutes(t(a.getMinutes(),f)):"hour"==h?a.setHours(t(a.getHours(),f)):"month"==h?a.setMonth(t(a.getMonth(),f)):"quarter"==h?a.setMonth(3*t(a.getMonth()/3,f)):"year"==h&&a.setFullYear(t(a.getFullYear(),f)),a.setMilliseconds(0),b>=i.minute&&a.setSeconds(0),b>=i.hour&&a.setMinutes(0),b>=i.day&&a.setHours(0),b>=4*i.day&&a.setDate(1),b>=2*i.month&&a.setMonth(t(a.getMonth(),3)),b>=2*i.quarter&&a.setMonth(t(a.getMonth(),6)),b>=i.year&&a.setMonth(0);var v,x=0,y=Number.NaN;do{if(v=y,y=a.getTime(),s.push(y),"month"==h||"quarter"==h)if(f<1){a.setDate(1);var w=a.getTime();a.setMonth(a.getMonth()+("quarter"==h?3:1));var j=a.getTime();a.setTime(y+x*i.hour+(j-w)*f),x=a.getHours(),a.setHours(0)}else a.setMonth(a.getMonth()+f*("quarter"==h?3:1));else"year"==h?a.setFullYear(a.getFullYear()+f):a.setTime(y+b)}while(y<e.max&&y!=v);return s},a.tickFormatter=function(e,t){var a=n(e,t.options);if(null!=r.timeformat)return s(a,r.timeformat,r.monthNames,r.dayNames);var o=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],l=t.tickSize[0]*i[t.tickSize[1]],c=t.max-t.min,d=r.twelveHourClock?" %p":"",u=r.twelveHourClock?"%I":"%H";return s(a,l<i.minute?u+":%M:%S"+d:l<i.day?c<2*i.day?u+":%M"+d:"%b %d "+u+":%M"+d:l<i.month?"%b %d":o&&l<i.quarter||!o&&l<i.year?c<i.year?"%b":"%b %Y":o&&l<i.year?c<i.year?"Q%q":"Q%q %Y":"%Y",r.monthNames,r.dayNames)})}))}))},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=s}(jQuery)},"./public/vendor/tagsinput/bootstrap-tagsinput.js":()=>{!function(e){"use strict";var t={tagClass:function(e){return"label label-info"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(e,t){t.hide().fadeIn()}};function s(t,s){this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.widthClass=s.widthClass||"width-9",this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=s&&s.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input class="gf-form-input '+this.widthClass+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(s)}function a(e,t){if("function"!=typeof e[t]){var s=e[t];e[t]=function(e){return e[s]}}}s.prototype={constructor:s,add:function(t,s){var a=this;if(!(a.options.maxTags&&a.itemsArray.length>=a.options.maxTags)&&(!1===t||t)){if("object"==typeof t&&!a.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(a.isSelect&&!a.multiple&&a.itemsArray.length>0&&a.remove(a.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var n=t.split(",");if(n.length>1){for(var r=0;r<n.length;r++)this.add(n[r],!0);return void(s||a.pushVal())}}var o=a.options.itemValue(t),l=a.options.itemText(t),c=a.options.tagClass(t),d=e.grep(a.itemsArray,(function(e){return a.options.itemValue(e)===o}))[0];if(d){if(a.options.onTagExists){var u=e(".tag",a.$container).filter((function(){return e(this).data("item")===d}));a.options.onTagExists(t,u)}}else{a.itemsArray.push(t);var p=e('<span class="tag '+i(c)+'">'+i(l)+'<span data-role="remove"></span></span>');if(p.data("item",t),a.findInputWrapper().before(p),p.after(" "),a.isSelect&&!e('option[value="'+escape(o)+'"]',a.$element)[0]){var h=e("<option selected>"+i(l)+"</option>");h.data("item",t),h.attr("value",o),a.$element.append(h)}s||a.pushVal(),a.options.maxTags===a.itemsArray.length&&a.$container.addClass("bootstrap-tagsinput-max"),a.$element.trigger(e.Event("itemAdded",{item:t}))}}}},remove:function(t,s){var a=this;a.objectItems&&(t="object"==typeof t?e.grep(a.itemsArray,(function(e){return a.options.itemValue(e)==a.options.itemValue(t)}))[0]:e.grep(a.itemsArray,(function(e){return a.options.itemValue(e)==t}))[0]),t&&(e(".tag",a.$container).filter((function(){return e(this).data("item")===t})).remove(),e("option",a.$element).filter((function(){return e(this).data("item")===t})).remove(),a.itemsArray.splice(e.inArray(t,a.itemsArray),1)),s||a.pushVal(),a.options.maxTags>a.itemsArray.length&&a.$container.removeClass("bootstrap-tagsinput-max"),a.$element.trigger(e.Event("itemRemoved",{item:t}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal(),t.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var t=this;e(".tag",t.$container).each((function(){var s=e(this),a=s.data("item"),n=t.options.itemValue(a),r=t.options.itemText(a),o=t.options.tagClass(a);(s.attr("class",null),s.addClass("tag "+i(o)),s.contents().filter((function(){return 3==this.nodeType}))[0].nodeValue=i(r),t.isSelect)&&e("option",t.$element).filter((function(){return e(this).data("item")===a})).attr("value",n)}))},items:function(){return this.itemsArray},pushVal:function(){var t=this,s=e.map(t.items(),(function(e){return t.options.itemValue(e).toString()}));t.$element.val(s,!0).trigger("change")},build:function(s){var n=this;n.options=e.extend({},t,s);var i=n.options.typeahead||{};n.objectItems&&(n.options.freeInput=!1),a(n.options,"itemValue"),a(n.options,"itemText"),a(n.options,"tagClass"),n.options.source&&(i.source=n.options.source),i.source&&e.fn.typeahead&&(!function(e,t){if("function"!=typeof e[t]){var s=e[t];e[t]=function(){return s}}}(i,"source"),n.$input.typeahead({source:function(t,s){function a(e){for(var t=[],a=0;a<e.length;a++){var i=n.options.itemText(e[a]);r[i]=e[a],t.push(i)}s(t)}this.map={};var r=this.map,o=i.source(t);e.isFunction(o.success)?o.success(a):e.when(o).then(a)},updater:function(e){n.add(this.map[e])},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}})),n.$container.on("click",e.proxy((function(e){n.$input.focus()}),n)),n.$container.on("blur","input",e.proxy((function(t){var s=e(t.target);n.add(s.val()),s.val(""),t.preventDefault()}),n)),n.$container.on("keydown","input",e.proxy((function(t){var s=e(t.target),a=n.findInputWrapper();switch(t.which){case 8:if(0===r(s[0])){var i=a.prev();i&&n.remove(i.data("item"))}break;case 46:if(0===r(s[0])){var o=a.next();o&&n.remove(o.data("item"))}break;case 37:var l=a.prev();0===s.val().length&&l[0]&&(l.before(a),s.focus());break;case 39:var c=a.next();0===s.val().length&&c[0]&&(c.after(a),s.focus());break;default:n.options.freeInput&&e.inArray(t.which,n.options.confirmKeys)>=0&&(n.add(s.val()),s.val(""),t.preventDefault())}s.attr("size",Math.max(this.inputSize,s.val().length))}),n)),n.$container.on("click","[data-role=remove]",e.proxy((function(t){n.remove(e(t.target).closest(".tag").data("item")),t.stopPropagation()}),n)),n.options.itemValue===t.itemValue&&("INPUT"===n.$element[0].tagName?n.add(n.$element.val()):e("option",n.$element).each((function(){n.add(e(this).attr("value"),!0)})))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],s=this.$container[0];t&&t.parentNode!==s;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(t,a){var n=[];return this.each((function(){var i=e(this).data("tagsinput");if(i){var r=i[t](a);void 0!==r&&n.push(r)}else i=new s(this,t),e(this).data("tagsinput",i),n.push(i),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())})),"string"==typeof t?n.length>1?n:n[0]:n},e.fn.tagsinput.Constructor=s;var n=e("<div />");function i(e){return e?n.text(e).html():""}function r(e){var t=0;if(document.selection){e.focus();var s=document.selection.createRange();s.moveStart("character",-e.value.length),t=s.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}e((function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()}))}(window.jQuery)}}]);
//# sourceMappingURL=8966.0e7ce18a6cf0f8775a65.js.map