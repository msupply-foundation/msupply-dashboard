(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1362:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return g}),n.d(t,"g",function(){return v}),n.d(t,"h",function(){return b}),n.d(t,"i",function(){return y}),n.d(t,"j",function(){return k}),n.d(t,"k",function(){return N}),n.d(t,"l",function(){return T}),n.d(t,"m",function(){return I}),n.d(t,"n",function(){return _}),n.d(t,"o",function(){return O}),n.d(t,"p",function(){return R}),n.d(t,"q",function(){return Q}),n.d(t,"r",function(){return P}),n.d(t,"s",function(){return j}),n.d(t,"t",function(){return q});var a=n(2),r=n(1),o=n.n(r),i=n(44),s=n(76),l=n(47),c=n(91),u=n(43);function p(e,t){var n=Object(s.g)(t+1);return{type:u.a.AddQueryRow,payload:{exploreId:e,index:t,query:n}}}function d(e,t){var n=this;return function(r){return a.b(n,void 0,void 0,function(){var n;return a.d(this,function(a){switch(a.label){case 0:return[4,Object(c.a)().get(t)];case 1:return n=a.sent(),r(S(e,n)),[2]}})})}}function m(e,t,n,r){return function(o){null===t&&(t=a.a({},Object(s.g)(n))),o({type:u.a.ChangeQuery,payload:{exploreId:e,query:t,index:n,override:r}}),r&&o(T(e))}}function h(e,t){var n=t.height,a=t.width;return{type:u.a.ChangeSize,payload:{exploreId:e,height:n,width:a}}}function f(e,t){return function(n){n({type:u.a.ChangeTime,payload:{exploreId:e,range:t}}),n(T(e))}}function g(e){return function(t){t(_(e)),t({type:u.a.ClearQueries,payload:{exploreId:e}}),t(D())}}function v(e,t){return{type:u.a.HighlightLogsExpression,payload:{exploreId:e,expressions:t}}}function b(e,t,n,r,o,i){var s=this;return function(l){return a.b(s,void 0,void 0,function(){var s,p,d;return a.d(this,function(a){switch(a.label){case 0:if(s=Object(c.a)().getExternal().map(function(e){return{value:e.name,name:e.name,meta:e.meta}}),l({type:u.a.InitializeExplore,payload:{exploreId:e,containerWidth:o,datasource:t,eventBridge:i,exploreDatasources:s,queries:n,range:r}}),!(s.length>=1))return[3,7];if(p=void 0,!t)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Object(c.a)().get(t)];case 2:return p=a.sent(),[3,4];case 3:return d=a.sent(),console.error(d),[3,4];case 4:return p?[3,6]:[4,Object(c.a)().get()];case 5:p=a.sent(),a.label=6;case 6:return l(S(e,p)),[3,8];case 7:l(w(e)),a.label=8;case 8:return[2]}})})}}function y(){var e=this;return function(t){return a.b(e,void 0,void 0,function(){return a.d(this,function(e){return t({type:u.a.InitializeExploreSplit}),[2]})})}}var E=function(e,t){return{type:u.a.LoadDatasourceFailure,payload:{exploreId:e,error:t}}},w=function(e){return{type:u.a.LoadDatasourceMissing,payload:{exploreId:e}}},C=function(e,t){return{type:u.a.LoadDatasourcePending,payload:{exploreId:e,datasourceName:t}}},x=function(e,t,n){var a=t.meta.metrics,r=t.meta.logs,o=t.meta.tables,l=t.pluginExports.ExploreStartPage,c="grafana.explore.history."+t.meta.id,p=i.a.getObject(c,[]);return i.a.set(s.b,t.name),{type:u.a.LoadDatasourceSuccess,payload:{exploreId:e,StartPage:l,datasourceInstance:t,history:p,initialDatasource:t.name,initialQueries:n,showingStartPage:Boolean(l),supportsGraph:a,supportsLogs:r,supportsTable:o}}};function S(e,t){var n=this;return function(r,o){return a.b(n,void 0,void 0,function(){var n,i,l,c,u,p,d,m;return a.d(this,function(h){switch(h.label){case 0:n=t.name,r(C(e,n)),i=null,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,t.testDatasource()];case 2:return l=h.sent(),i="success"===l.status?null:l.message,[3,4];case 3:return c=h.sent(),i=c&&c.statusText||"Network error",[3,4];case 4:return i?(r(E(e,i)),[2]):n!==o().explore[e].requestedDatasourceName?[2]:(t.init&&t.init(),u=o().explore[e].modifiedQueries,p=u,(d=o().explore[e].datasourceInstance)?d.meta.id!==t.meta.id?[3,5]:(p=u.slice(),[3,8]):[3,8]);case 5:return t.importQueries?[4,t.importQueries(u,d.meta)]:[3,7];case 6:return p=h.sent(),[3,8];case 7:p=Object(s.f)(),h.label=8;case 8:return n!==o().explore[e].requestedDatasourceName?[2]:(m=p.map(function(e,t){return a.a({},p[t],Object(s.g)(t))}),r(x(e,t,m)),r(T(e)),[2])}})})}}function k(e,t,n,a){return function(r){r({type:u.a.ModifyQueries,payload:{exploreId:e,modification:t,index:n,modifier:a}}),t.preventSubmit||r(T(e))}}function N(e,t){return function(n){n({type:u.a.RemoveQueryRow,payload:{exploreId:e,index:t}}),n(T(e))}}function T(e){return function(t,n){var a=n().explore[e],r=a.datasourceInstance,o=a.modifiedQueries,i=a.showingLogs,l=a.showingGraph,c=a.showingTable,p=a.supportsGraph,d=a.supportsLogs,m=a.supportsTable;if(Object(s.j)(o)){var h=r.interval;c&&m&&t(L(e,"Table",{interval:h,format:"table",instant:!0,valueWithRefId:!0},function(e){return e[0]})),l&&p&&t(L(e,"Graph",{interval:h,format:"time_series",instant:!1},s.k)),i&&d&&t(L(e,"Logs",{interval:h,format:"logs"})),t(D())}else t({type:u.a.RunQueriesEmpty,payload:{exploreId:e}})}}function L(e,t,n,r){var i=this;return function(l,c){return a.b(i,void 0,void 0,function(){var i,p,d,m,h,f,g,v,b=this;return a.d(this,function(y){return i=c().explore[e],p=i.datasourceInstance,d=i.eventBridge,m=i.modifiedQueries,h=i.queryIntervals,f=i.range,g=i.scanning,v=p.meta.id,m.forEach(function(i,c){return a.b(b,void 0,void 0,function(){var b,y,E,w,C,x;return a.d(this,function(S){switch(S.label){case 0:b=Object(s.c)(i,c,t,n,f,h,g),l(function(e,t,n,a){return{type:u.a.QueryTransactionStart,payload:{exploreId:e,resultType:n,rowIndex:a,transaction:t}}}(e,b,t,c)),S.label=1;case 1:return S.trys.push([1,3,,4]),y=Date.now(),[4,p.query(b.options)];case 2:return E=S.sent(),d.emit("data-received",E.data||[]),w=Date.now()-y,C=r?r(E.data):E.data,l(function(e,t,n,r,i,l){return function(c,p){var d=p().explore[e],m=d.datasourceInstance,h=d.history,f=d.queryTransactions,g=d.scanner,v=d.scanning;if(m.meta.id===l){var b=f.find(function(e){return e.id===t});if(b){var y;m.getQueryHints&&(y=m.getQueryHints(b.query,n));var E=f.map(function(e){return e.id===t?a.a({},e,{hints:y,latency:r,result:n,done:!0}):e}),w=Object(s.n)(h,l,i);if(c({type:u.a.QueryTransactionSuccess,payload:{exploreId:e,history:w,queryTransactions:E}}),v)if(0===o.a.size(n)){if(!E.find(function(e){return e.scanning&&!e.done})){var C=g();c({type:u.a.ScanRange,payload:{exploreId:e,range:C}})}}else c(_(e))}}}}(e,b.id,C,w,m,v)),[3,4];case 3:return x=S.sent(),d.emit("data-error",x),l(function(e,t,n,r){return function(o,i){var s=i().explore[e],l=s.datasourceInstance,c=s.queryTransactions;if(l.meta.id===r&&!n.cancelled&&c.find(function(e){return e.id===t})){var p,d;if(console.error(n),n.data)if("string"==typeof n.data)p=n.data;else{if(!n.data.error)throw new Error("Could not handle error response");p=n.data.error,n.data.response&&(d=n.data.response)}else p=n.message?n.message:"string"==typeof n?n:"Unknown error during query transaction. Please check JS console logs.";var m=c.map(function(e){return e.id===t?a.a({},e,{error:p,errorDetails:d,done:!0}):e});o({type:u.a.QueryTransactionFailure,payload:{exploreId:e,queryTransactions:m}})}}}(e,b.id,x,v)),[3,4];case 4:return[2]}})})}),[2]})})}}function I(e,t){return function(n){n({type:u.a.ScanStart,payload:{exploreId:e,scanner:t}});var a=t();n({type:u.a.ScanRange,payload:{exploreId:e,range:a}})}}function _(e){return{type:u.a.ScanStop,payload:{exploreId:e}}}function O(e,t){return function(n){var r=t.map(function(e){return a.a({},e,Object(s.g)())});n({type:u.a.SetQueries,payload:{exploreId:e,queries:r}}),n(T(e))}}function R(){return function(e){e({type:u.a.SplitClose}),e(D())}}function Q(){return function(e,t){var n=t().explore.left,r=a.a({},n,{queryTransactions:[],initialQueries:n.modifiedQueries.slice()});e({type:u.a.SplitOpen,payload:{itemState:r}}),e(D())}}function D(){return function(e,t){var n=t().explore,a=n.left,r=n.right,o=n.split,i={},c={datasource:a.datasourceInstance.name,queries:a.modifiedQueries.map(s.e),range:a.range};if(i.left=Object(s.m)(c,!0),o){var u={datasource:r.datasourceInstance.name,queries:r.modifiedQueries.map(s.e),range:r.range};i.right=Object(s.m)(u,!0)}e(Object(l.c)({query:i}))}}function P(e){return function(t,n){t({type:u.a.ToggleGraph,payload:{exploreId:e}}),n().explore[e].showingGraph&&t(T(e))}}function j(e){return function(t,n){t({type:u.a.ToggleLogs,payload:{exploreId:e}}),n().explore[e].showingLogs&&t(T(e))}}function q(e){return function(t,n){t({type:u.a.ToggleTable,payload:{exploreId:e}}),n().explore[e].showingTable&&t(T(e))}}},1363:function(e,t,n){"use strict";var a=n(2),r=n(0),o=n.n(r),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickToggle=function(){return t.props.onToggle(!t.props.isOpen)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.isOpen,n=e.loading,a=t?"fa fa-caret-up":"fa fa-caret-down",r=n?"explore-panel__loader explore-panel__loader--active":"explore-panel__loader";return o.a.createElement("div",{className:"explore-panel panel-container"},o.a.createElement("div",{className:"explore-panel__header",onClick:this.onClickToggle},o.a.createElement("div",{className:"explore-panel__header-buttons"},o.a.createElement("span",{className:a})),o.a.createElement("div",{className:"explore-panel__header-label"},this.props.label)),t&&o.a.createElement("div",{className:"explore-panel__body"},o.a.createElement("div",{className:r}),this.props.children))},t}(r.PureComponent);t.a=i},1364:function(e,t,n){"use strict";var a=n(2),r=n(0),o=n.n(r),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={error:null,errorInfo:null},n}return a.c(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},t.prototype.render=function(){return this.state.errorInfo?o.a.createElement("div",{className:"explore-container"},o.a.createElement("h3",null,"An unexpected error happened."),o.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),o.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children},t}(r.Component);t.a=i},1365:function(e,t,n){"use strict";var a=n(2),r=n(8),o=n.n(r),i=n(0),s=n.n(i),l=n(5),c=n.n(l),u=n(621),p=(n(194),n(369),n(368),n(370),n(31)),d=n(13),m=n.n(d),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickLabel=function(e){return t.props.onClickLabel(t.props.series,e)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.hidden,n=e.series,a=m()({"graph-legend-series-hidden":t});return s.a.createElement("div",{className:"graph-legend-series "+a},s.a.createElement("div",{className:"graph-legend-icon"},s.a.createElement("i",{className:"fa fa-minus pointer",style:{color:n.color}})),s.a.createElement("a",{className:"graph-legend-alias pointer",title:n.alias,onClick:this.onClickLabel},n.alias))},t}(i.PureComponent),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickLabel=function(e,n){(0,t.props.onToggleSeries)(e,!(n.ctrlKey||n.metaKey||n.shiftKey))},t}return a.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.data,a=t.hiddenSeries,r=n||[];return s.a.createElement("div",{className:"graph-legend ps"},r.map(function(t,n){return s.a.createElement(h,{hidden:a.has(t.alias),key:t.id+"-"+n,onClickLabel:e.onClickLabel,series:t})}))},t.defaultProps={onToggleSeries:function(){}},t}(i.PureComponent);var g={legend:{show:!1},series:{lines:{linewidth:1,zero:!1},shadowSize:0},grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0},selection:{mode:"x",color:"#666"}},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dynamicOptions=null,t.state={hiddenSeries:new Set,showAllTimeSeries:!1},t.onPlotSelected=function(e,n){if(t.props.onChangeTime){var a={from:c()(n.xaxis.from),to:c()(n.xaxis.to)};t.props.onChangeTime(a)}},t.onShowAllTimeSeries=function(){t.setState({showAllTimeSeries:!0},t.draw)},t.onToggleSeries=function(e,n){t.setState(function(t,a){var r=a.data,o=a.onToggleSeries,i=t.hiddenSeries,s=i.size===new Set(r.map(function(e){return e.alias})).size-1,l=new Set;if(n)!i.has(e.alias)&&s||(l=new Set(r.filter(function(t){return t.alias!==e.alias}).map(function(e){return e.alias})));else{var c=new Set(r.map(function(e){return e.alias}));(l=function(e,t){for(var n=new Set,a=t.values();;){var r=a.next(),o=r.value;if(r.done)return n;e.has(o)&&n.add(o)}}(new Set(i),c)).has(e.alias)?l.delete(e.alias):l.add(e.alias)}return o&&o(e.alias,l),{hiddenSeries:l}},t.draw)},t}return a.c(t,e),t.prototype.getGraphData=function(){var e=this.props.data;return this.state.showAllTimeSeries?e:e.slice(0,20)},t.prototype.componentDidMount=function(){this.draw(),this.$el=o()("#"+this.props.id),this.$el.bind("plotselected",this.onPlotSelected)},t.prototype.componentDidUpdate=function(e,t){(e.data!==this.props.data||e.range!==this.props.range||e.split!==this.props.split||e.height!==this.props.height||e.size&&e.size.width!==this.props.size.width||!function(e,t){if(e.size!==t.size)return!1;for(var n=e.values();;){var a=n.next(),r=a.value;if(a.done)return!0;if(!t.has(r))return!1}}(t.hiddenSeries,this.state.hiddenSeries))&&this.draw()},t.prototype.componentWillUnmount=function(){this.$el.unbind("plotselected",this.onPlotSelected)},t.prototype.getDynamicOptions=function(){var e=this.props,t=e.range,n=(e.size.width||0)/100,a=t.from,r=t.to;c.a.isMoment(a)||(a=p.parse(a,!1)),c.a.isMoment(r)||(r=p.parse(r,!0));var o=a.valueOf(),i=r.valueOf();return{xaxis:{mode:"time",min:o,max:i,label:"Datetime",ticks:n,timezone:"browser",timeformat:function(e,t,n){if(t&&n&&e){var a=n-t,r=a/e/1e3;return r<=45?"%H:%M:%S":r<=7200||a<=864e5?"%H:%M":r<=8e4?"%m/%d %H:%M":r<=2419200||a<=31536e6?"%m/%d":"%Y-%m"}return"%H:%M"}(n,o,i)}}},t.prototype.draw=function(){var e=this.props.userOptions,t=void 0===e?{}:e,n=this.state.hiddenSeries,r=this.getGraphData(),i=o()("#"+this.props.id),s=[{data:[[0,0]]}];r&&r.length>0&&(s=r.filter(function(e){return!n.has(e.alias)}).map(function(e){return{color:e.color,label:e.label,data:e.getFlotPairs("null")}})),this.dynamicOptions=this.getDynamicOptions();var l=a.a({},g,this.dynamicOptions,t);o.a.plot(i,s,l)},t.prototype.render=function(){var e=this.props,t=e.height,n=void 0===t?"100px":t,a=e.id,r=void 0===a?"graph":a,o=this.state.hiddenSeries,i=this.getGraphData();return s.a.createElement(s.a.Fragment,null,this.props.data&&this.props.data.length>20&&!this.state.showAllTimeSeries&&s.a.createElement("div",{className:"time-series-disclaimer"},s.a.createElement("i",{className:"fa fa-fw fa-warning disclaimer-icon"}),"Showing only 20 time series. ",s.a.createElement("span",{className:"show-all-time-series",onClick:this.onShowAllTimeSeries},"Show all "+this.props.data.length)),s.a.createElement("div",{id:r,className:"explore-graph",style:{height:n}}),s.a.createElement(f,{data:i,hiddenSeries:o,onToggleSeries:this.onToggleSeries}))},t}(i.PureComponent);t.a=Object(u.withSize)()(v)},1366:function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),o=n.n(r),i=n(37),s=n(26),l=n(624),c=n(44),u=n(353),p=n(1367),d=n(1364),m=n(1368),h=n(1369),f=n(1370),g=n(1373),v=n(1375),b=n(1362),y=n(76),E=n(135),w=function(e){function t(t){var n=e.call(this,t)||this;return n.getRef=function(e){n.el=e},n.onChangeDatasource=function(e){return a.b(n,void 0,void 0,function(){return a.d(this,function(t){return this.props.changeDatasource(this.props.exploreId,e.value),[2]})})},n.onChangeTime=function(e,t){n.props.scanning&&!t&&n.onStopScanning(),n.props.changeTime(n.props.exploreId,e)},n.onClickClear=function(){n.props.clearQueries(n.props.exploreId)},n.onClickCloseSplit=function(){n.props.splitClose()},n.onClickExample=function(e){n.props.setQueries(n.props.exploreId,[e])},n.onClickSplit=function(){n.props.splitOpen()},n.onClickLabel=function(e,t){n.onModifyQueries({type:"ADD_FILTER",key:e,value:t})},n.onModifyQueries=function(e,t){var a=n.props.datasourceInstance;if(a&&a.modifyQuery){n.props.modifyQueries(n.props.exploreId,e,t,function(e,t){return a.modifyQuery(e,t)})}},n.onResize=function(e){n.props.changeSize(n.props.exploreId,e)},n.onStartScanning=function(){var e=n.scanPreviousRange;n.props.scanStart(n.props.exploreId,e)},n.scanPreviousRange=function(){return n.timepickerRef.current.move(-1,!0)},n.onStopScanning=function(){n.props.scanStop(n.props.exploreId)},n.onSubmit=function(){n.props.runQueries(n.props.exploreId)},n.exploreEvents=new E.a,n.timepickerRef=o.a.createRef(),n}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r,o,i,s,l,u,p,d,m,h;return a.d(this,function(a){return e=this.props,t=e.exploreId,n=e.initialized,r=e.urlState,n||(i=(o=r||{}).datasource,s=o.queries,l=o.range,u=void 0===l?y.a:l,p=i||c.a.get(y.b),d=Object(y.f)(s),m={from:Object(v.b)(u.from),to:Object(v.b)(u.to)},h=this.el?this.el.offsetWidth:0,this.props.initializeExplore(t,p,d,m,h,this.exploreEvents)),[2]})})},t.prototype.componentWillUnmount=function(){this.exploreEvents.removeAllListeners()},t.prototype.render=function(){var e=this,t=this.props,n=t.StartPage,a=t.datasourceInstance,r=t.datasourceError,i=t.datasourceLoading,s=t.datasourceMissing,c=t.exploreDatasources,b=t.exploreId,y=t.loading,E=t.initialQueries,w=t.range,C=t.showingStartPage,x=t.split,S=t.supportsGraph,k=t.supportsLogs,N=t.supportsTable,T=x?"explore explore-split":"explore",L=a?c.find(function(e){return e.name===a.name}):void 0;return o.a.createElement("div",{className:T,ref:this.getRef},o.a.createElement("div",{className:"navbar"},"left"===b?o.a.createElement("div",null,o.a.createElement("a",{className:"navbar-page-btn"},o.a.createElement("i",{className:"fa fa-rocket"}),"Explore")):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"navbar-page-btn"}),o.a.createElement("div",{className:"navbar-buttons explore-first-button"},o.a.createElement("button",{className:"btn navbar-button",onClick:this.onClickCloseSplit},"Close Split"))),s?null:o.a.createElement("div",{className:"navbar-buttons"},o.a.createElement(u.a,{onChange:this.onChangeDatasource,datasources:c,current:L})),o.a.createElement("div",{className:"navbar__spacer"}),"left"!==b||x?null:o.a.createElement("div",{className:"navbar-buttons"},o.a.createElement("button",{className:"btn navbar-button",onClick:this.onClickSplit},"Split")),o.a.createElement(v.a,{ref:this.timepickerRef,range:w,onChangeTime:this.onChangeTime}),o.a.createElement("div",{className:"navbar-buttons"},o.a.createElement("button",{className:"btn navbar-button navbar-button--no-icon",onClick:this.onClickClear},"Clear All")),o.a.createElement("div",{className:"navbar-buttons relative"},o.a.createElement("button",{className:"btn navbar-button navbar-button--primary",onClick:this.onSubmit},"Run Query"," ",y?o.a.createElement("i",{className:"fa fa-spinner fa-fw fa-spin run-icon"}):o.a.createElement("i",{className:"fa fa-level-down fa-fw run-icon"})))),i?o.a.createElement("div",{className:"explore-container"},"Loading datasource..."):null,s?o.a.createElement("div",{className:"explore-container"},"Please add a datasource that supports Explore (e.g., Prometheus)."):null,r&&o.a.createElement("div",{className:"explore-container"},o.a.createElement(p.a,{message:"Error connecting to datasource: "+r})),a&&!r&&o.a.createElement("div",{className:"explore-container"},o.a.createElement(f.a,{exploreEvents:this.exploreEvents,exploreId:b,initialQueries:E}),o.a.createElement(l.a,{onResize:this.onResize,disableHeight:!0},function(t){var a=t.width;return o.a.createElement("main",{className:"m-t-2",style:{width:a}},o.a.createElement(d.a,null,C&&o.a.createElement(n,{onClickExample:e.onClickExample}),!C&&o.a.createElement(o.a.Fragment,null,S&&o.a.createElement(m.a,{exploreId:b}),N&&o.a.createElement(g.a,{exploreId:b,onClickCell:e.onClickLabel}),k&&o.a.createElement(h.a,{exploreId:b,onChangeTime:e.onChangeTime,onClickLabel:e.onClickLabel,onStartScanning:e.onStartScanning,onStopScanning:e.onStopScanning}))))})))},t}(o.a.PureComponent);var C={changeDatasource:b.b,changeSize:b.d,changeTime:b.e,clearQueries:b.f,initializeExplore:b.h,modifyQueries:b.j,runQueries:b.l,scanStart:b.m,scanStop:b.n,setQueries:b.o,splitClose:b.p,splitOpen:b.q};t.a=Object(i.hot)(e)(Object(s.b)(function(e,t){var n=t.exploreId,a=e.explore,r=a.split,o=a[n],i=o.StartPage,s=o.datasourceError,l=o.datasourceInstance,c=o.datasourceLoading,u=o.datasourceMissing,p=o.exploreDatasources,d=o.initialDatasource,m=o.initialQueries,h=o.initialized,f=o.queryTransactions,g=o.range,v=o.showingStartPage,b=o.supportsGraph,y=o.supportsLogs,E=o.supportsTable;return{StartPage:i,datasourceError:s,datasourceInstance:l,datasourceLoading:c,datasourceMissing:u,exploreDatasources:p,initialDatasource:d,initialQueries:m,initialized:h,loading:f.some(function(e){return!e.done}),queryTransactions:f,range:g,showingStartPage:v,split:r,supportsGraph:b,supportsLogs:y,supportsTable:E}},C)(w))}).call(this,n(71)(e))},1367:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(0),r=n.n(a),o=function(e){var t=e.message;return r.a.createElement("div",{className:"gf-form-group section"},r.a.createElement("div",{className:"alert-error alert"},r.a.createElement("div",{className:"alert-icon"},r.a.createElement("i",{className:"fa fa-exclamation-triangle"})),r.a.createElement("div",{className:"alert-body"},r.a.createElement("div",{className:"alert-title"},t))))}},1368:function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),o=n.n(r),i=n(37),s=n(26),l=n(1362),c=n(1365),u=n(1363),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickGraphButton=function(){t.props.toggleGraph(t.props.exploreId)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.exploreId,n=e.graphResult,a=e.loading,r=e.onChangeTime,i=e.showingGraph,s=e.showingTable,l=e.range,p=e.split,d=i&&s?"200px":"400px";return o.a.createElement(u.a,{label:"Graph",isOpen:i,loading:a,onToggle:this.onClickGraphButton},o.a.createElement(c.a,{data:n,height:d,id:"explore-graph-"+t,onChangeTime:r,range:l,split:p}))},t}(r.PureComponent);var d={toggleGraph:l.r};t.a=Object(i.hot)(e)(Object(s.b)(function(e,t){var n=t.exploreId,a=e.explore,r=a.split,o=a[n],i=o.graphResult,s=o.queryTransactions,l=o.range,c=o.showingGraph,u=o.showingTable;return{graphResult:i,loading:s.some(function(e){return"Graph"===e.resultType&&!e.done}),range:l,showingGraph:c,showingTable:u,split:r}},d)(p))}).call(this,n(71)(e))},1369:function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),o=n.n(r),i=n(37),s=n(26),l=n(1362),c=n(1377),u=n(1363),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickLogsButton=function(){t.props.toggleLogs(t.props.exploreId)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.exploreId,n=e.loading,a=e.logsHighlighterExpressions,r=e.logsResult,i=e.onChangeTime,s=e.onClickLabel,l=e.onStartScanning,p=e.onStopScanning,d=e.range,m=e.showingLogs,h=e.scanning,f=e.scanRange;return o.a.createElement(u.a,{label:"Logs",loading:n,isOpen:m,onToggle:this.onClickLogsButton},o.a.createElement(c.a,{data:r,exploreId:t,key:r.id,highlighterExpressions:a,loading:n,onChangeTime:i,onClickLabel:s,onStartScanning:l,onStopScanning:p,range:d,scanning:h,scanRange:f}))},t}(r.PureComponent);var d={toggleLogs:l.s};t.a=Object(i.hot)(e)(Object(s.b)(function(e,t){var n=t.exploreId,a=e.explore[n],r=a.logsHighlighterExpressions,o=a.logsResult,i=a.queryTransactions,s=a.scanning,l=a.scanRange,c=a.showingLogs,u=a.range;return{loading:i.some(function(e){return"Logs"===e.resultType&&!e.done}),logsHighlighterExpressions:r,logsResult:o,scanning:s,scanRange:l,showingLogs:c,range:u}},d)(p))}).call(this,n(71)(e))},1370:function(e,t,n){"use strict";var a=n(2),r=n(0),o=n.n(r),i=n(1371),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=void 0===t?"":t,a=e.exploreEvents,r=e.exploreId,s=e.initialQueries;return o.a.createElement("div",{className:n},s.map(function(e,t){return o.a.createElement(i.a,{key:e.key,exploreEvents:a,exploreId:r,index:t})}))},t}(r.PureComponent);t.a=s},1371:function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),o=n.n(r),i=n(1),s=n.n(i),l=n(37),c=n(26),u=n(1372),p=n(1378),d=n(1362);var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onExecuteQuery=function(){var e=t.props.exploreId;t.props.runQueries(e)},t.onChangeQuery=function(e,n){var a=t.props,r=a.datasourceInstance,o=a.exploreId,i=a.index;t.props.changeQuery(o,e,i,n),e&&!n&&r.getHighlighterExpression&&0===i&&t.updateLogsHighlights(e)},t.onClickAddButton=function(){var e=t.props,n=e.exploreId,a=e.index;t.props.addQueryRow(n,a)},t.onClickClearButton=function(){t.onChangeQuery(null,!0)},t.onClickHintFix=function(e){var n=t.props,a=n.datasourceInstance,r=n.exploreId,o=n.index;if(a&&a.modifyQuery){t.props.modifyQueries(r,e,o,function(e,t){return a.modifyQuery(e,t)})}},t.onClickRemoveButton=function(){var e=t.props,n=e.exploreId,a=e.index;t.props.removeQueryRow(n,a)},t.updateLogsHighlights=s.a.debounce(function(e){var n=t.props.datasourceInstance;if(n.getHighlighterExpression){var a=[n.getHighlighterExpression(e)];t.props.highlightLogsExpression(t.props.exploreId,a)}},500),t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.datasourceInstance,n=e.history,a=e.index,r=e.initialQuery,i=e.queryTransactions,s=e.exploreEvents,l=e.range,c=i.filter(function(e){return e.rowIndex===a}),d=c.find(function(e){return void 0!==e.error}),m=function(e){var t=e.find(function(e){return e.hints&&e.hints.length>0});if(t)return t.hints[0]}(c),h=d?d.error:null,f=t.pluginExports.ExploreQueryField;return o.a.createElement("div",{className:"query-row"},o.a.createElement("div",{className:"query-row-status"},o.a.createElement(p.a,{transactions:c})),o.a.createElement("div",{className:"query-row-field"},f?o.a.createElement(f,{datasource:t,error:h,hint:m,initialQuery:r,history:n,onClickHintFix:this.onClickHintFix,onPressEnter:this.onExecuteQuery,onQueryChange:this.onChangeQuery}):o.a.createElement(u.a,{datasource:t,error:h,onQueryChange:this.onChangeQuery,onExecuteQuery:this.onExecuteQuery,initialQuery:r,exploreEvents:s,range:l})),o.a.createElement("div",{className:"query-row-tools"},o.a.createElement("button",{className:"btn navbar-button navbar-button--tight",onClick:this.onClickClearButton},o.a.createElement("i",{className:"fa fa-times"})),o.a.createElement("button",{className:"btn navbar-button navbar-button--tight",onClick:this.onClickAddButton},o.a.createElement("i",{className:"fa fa-plus"})),o.a.createElement("button",{className:"btn navbar-button navbar-button--tight",onClick:this.onClickRemoveButton},o.a.createElement("i",{className:"fa fa-minus"}))))},t}(r.PureComponent);var h={addQueryRow:d.a,changeQuery:d.c,highlightLogsExpression:d.g,modifyQueries:d.j,removeQueryRow:d.k,runQueries:d.l};t.a=Object(l.hot)(e)(Object(c.b)(function(e,t){var n=t.exploreId,a=t.index,r=e.explore[n],o=r.datasourceInstance,i=r.history,s=r.initialQueries,l=r.queryTransactions,c=r.range;return{datasourceInstance:o,history:i,initialQuery:s[a],queryTransactions:l,range:c}},h)(m))}).call(this,n(71)(e))},1372:function(e,t,n){"use strict";var a=n(2),r=n(0),o=n.n(r),i=n(72),s=n(159),l=(n(101),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r,o,s,l,c,u,p=this;return a.d(this,function(d){return this.element?(e=this.props,t=e.datasource,n=e.initialQuery,r=e.exploreEvents,o=e.range,this.initTimeSrv(o),s=Object(i.a)(),l='<plugin-component type="query-ctrl"> </plugin-component>',c=a.a({datasource:t.name},n),u={ctrl:{datasource:t,target:c,refresh:function(){p.props.onQueryChange(c,!1),p.props.onExecuteQuery()},events:r,panel:{datasource:t,targets:[c]},dashboard:{}}},this.component=s.load(this.element,u,l),this.props.onQueryChange(c,!1),[2]):[2]})})},t.prototype.componentWillUnmount=function(){this.component&&this.component.destroy()},t.prototype.initTimeSrv=function(e){Object(s.a)().init({time:e,refresh:!1,getTimezone:function(){return"utc"},timeRangeUpdated:function(){return console.log("refreshDashboard!")}})},t.prototype.render=function(){var e=this;return o.a.createElement("div",{className:"gf-form-query",ref:function(t){return e.element=t},style:{width:"100%"}})},t}(r.PureComponent));t.a=l},1373:function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),o=n.n(r),i=n(37),s=n(26),l=n(1362),c=n(1374),u=n(1363),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickTableButton=function(){t.props.toggleTable(t.props.exploreId)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.loading,n=e.onClickCell,a=e.showingTable,r=e.tableResult;return o.a.createElement(u.a,{label:"Table",loading:t,isOpen:a,onToggle:this.onClickTableButton},o.a.createElement(c.a,{data:r,loading:t,onClickCell:n}))},t}(r.PureComponent);var d={toggleTable:l.t};t.a=Object(i.hot)(e)(Object(s.b)(function(e,t){var n=t.exploreId,a=e.explore[n],r=a.queryTransactions,o=a.showingTable,i=a.tableResult;return{loading:r.some(function(e){return"Table"===e.resultType&&!e.done}),showingTable:o,tableResult:i}},d)(p))}).call(this,n(71)(e))},1374:function(e,t,n){"use strict";var a=n(2),r=n(1),o=n.n(r),i=n(0),s=n.n(i),l=n(1361),c=new(n(73).a),u=/^[Vv]alue #\d+/;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getCellProps=function(e,n,a){return{onClick:function(e){if(e.target&&"link"===e.target.className){var r=a.Header,o=n.row[r];t.props.onClickCell(r,o)}}}},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.data,n=e.loading,a=t||c,r=a.columns.map(function(e){return e.text}),i=a.columns.map(function(e){var t=e.filterable,n=e.text;return{Header:n,accessor:n,className:u.test(n)?"text-right":"",show:"Time"!==n,Cell:function(e){return s.a.createElement("span",{className:t?"link":""},e.value)}}}),p=t?"The queries returned no data for a table.":"";return s.a.createElement(l.a,{columns:i,data:a.rows,getTdProps:this.getCellProps,loading:n,minRows:0,noDataText:p,resolveData:function(e){return function(e,t){return e.map(function(e){return o.a.zipObject(t,e)})}(e,r)},showPagination:Boolean(t)})},t}(i.PureComponent);t.a=p},1375:function(e,t,n){"use strict";n.d(t,"b",function(){return d});var a=n(2),r=n(0),o=n.n(r),i=n(5),s=n.n(i),l=n(31),c=n(115),u="YYYY-MM-DD HH:mm:ss",p={from:"now-6h",to:"now"};function d(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),s.a.isMoment(e))return n?e.format(u):e;if(-1!==e.indexOf("now"))return e;var a=e;return isNaN(a)||(a=parseInt(a,10)),(a=t?s.a.utc(a):s()(a)).format(u)}var m=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChangeFrom=function(e){n.setState({fromRaw:e.target.value})},n.handleChangeTo=function(e){n.setState({toRaw:e.target.value})},n.handleClickApply=function(){var e,t=n.props.onChangeTime;n.setState(function(t){var a=n.state,r=a.toRaw,o=a.fromRaw;return e={from:l.parse(o,!1),to:l.parse(r,!0)},{isOpen:!1,rangeString:c.b(e)}},function(){t&&t(e)})},n.handleClickLeft=function(){return n.move(-1)},n.handleClickPicker=function(){n.setState(function(e){return{isOpen:!e.isOpen}})},n.handleClickRight=function(){return n.move(1)},n.handleClickRefresh=function(){},n.handleClickRelativeOption=function(e){var t=n.props.onChangeTime,a=c.b(e);n.setState({toRaw:e.to,fromRaw:e.from,isOpen:!1,rangeString:a},function(){t&&t(e)})},n.dropdownRef=function(e){n.dropdownEl=e},n.state={isOpen:t.isOpen,isUtc:t.isUtc,rangeString:"",fromRaw:"",toRaw:"",initialRange:p,refreshInterval:""},n}return a.c(t,e),t.getDerivedStateFromProps=function(e,t){if(t.initialRange&&t.initialRange===e.range)return t;var n=e.range?e.range.from:p.from,r=e.range?e.range.to:p.to,o=d(n,e.isUtc,!0),i=d(r,e.isUtc,!0),s={from:o,to:i};return a.a({},t,{fromRaw:o,toRaw:i,initialRange:e.range,rangeString:c.b(s)})},t.prototype.move=function(e,t){var n,a,r=this.props.onChangeTime,o=this.state,i=o.fromRaw,p=o.toRaw,d=l.parse(i,!1),m=l.parse(p,!0),h=t?1:2,f=(m.valueOf()-d.valueOf())/h;-1===e?(n=m.valueOf()-f,a=d.valueOf()-f):1===e?(n=m.valueOf()+f,a=d.valueOf()+f,n>Date.now()&&m<Date.now()&&(n=Date.now(),a=d.valueOf())):(n=m.valueOf(),a=d.valueOf());var g={from:s()(a),to:s()(n)},v={raw:g,from:g.from,to:g.to};return this.setState({rangeString:c.b(g),fromRaw:g.from.format(u),toRaw:g.to.format(u)},function(){r(v,t)}),g},t.prototype.getTimeOptions=function(){return c.c({},this.state.rangeString)},t.prototype.renderDropdown=function(){var e=this,t=this.state,n=t.fromRaw,a=t.isOpen,r=t.toRaw;if(!a)return null;var i=this.getTimeOptions();return o.a.createElement("div",{ref:this.dropdownRef,className:"gf-timepicker-dropdown"},o.a.createElement("div",{className:"popover-box"},o.a.createElement("div",{className:"popover-box__header"},o.a.createElement("span",{className:"popover-box__title"},"Quick ranges")),o.a.createElement("div",{className:"popover-box__body gf-timepicker-relative-section"},Object.keys(i).map(function(t){var n=i[t];return o.a.createElement("ul",{key:t},n.map(function(t){return o.a.createElement("li",{className:t.active?"active":"",key:t.display},o.a.createElement("a",{onClick:function(){return e.handleClickRelativeOption(t)}},t.display))}))}))),o.a.createElement("div",{className:"popover-box"},o.a.createElement("div",{className:"popover-box__header"},o.a.createElement("span",{className:"popover-box__title"},"Custom range")),o.a.createElement("div",{className:"popover-box__body gf-timepicker-absolute-section"},o.a.createElement("label",{className:"small"},"From:"),o.a.createElement("div",{className:"gf-form-inline"},o.a.createElement("div",{className:"gf-form max-width-28"},o.a.createElement("input",{type:"text",className:"gf-form-input input-large timepicker-from",value:n,onChange:this.handleChangeFrom}))),o.a.createElement("label",{className:"small"},"To:"),o.a.createElement("div",{className:"gf-form-inline"},o.a.createElement("div",{className:"gf-form max-width-28"},o.a.createElement("input",{type:"text",className:"gf-form-input input-large timepicker-to",value:r,onChange:this.handleChangeTo}))),o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"btn gf-form-btn btn-secondary",onClick:this.handleClickApply},"Apply")))))},t.prototype.render=function(){var e=this.state,t=e.isUtc,n=e.rangeString,a=e.refreshInterval;return o.a.createElement("div",{className:"timepicker"},o.a.createElement("div",{className:"navbar-buttons"},o.a.createElement("button",{className:"btn navbar-button navbar-button--tight timepicker-left",onClick:this.handleClickLeft},o.a.createElement("i",{className:"fa fa-chevron-left"})),o.a.createElement("button",{className:"btn navbar-button gf-timepicker-nav-btn",onClick:this.handleClickPicker},o.a.createElement("i",{className:"fa fa-clock-o"}),o.a.createElement("span",{className:"timepicker-rangestring"},n),t?o.a.createElement("span",{className:"gf-timepicker-utc"},"UTC"):null,a?o.a.createElement("span",{className:"text-warning"},"Â  Refresh every ",a):null),o.a.createElement("button",{className:"btn navbar-button navbar-button--tight timepicker-right",onClick:this.handleClickRight},o.a.createElement("i",{className:"fa fa-chevron-right"}))),this.renderDropdown())},t}(r.PureComponent);t.a=m},1377:function(e,t,n){"use strict";var a=n(2),r=n(1),o=n.n(r),i=n(0),s=n.n(i),l=n(115),c=n(126),u=n(83),p=n(10),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.label,a=e.transparent;return s.a.createElement("div",{className:"gf-form"},n&&s.a.createElement("label",{className:"gf-form-label "+(a?"gf-form-label--transparent":"")},n),s.a.createElement("div",{className:"toggle-button-group "+(a?"toggle-button-group--transparent":"")},t))},t}(i.PureComponent),m=function(e){var t=e.children,n=e.selected,a=e.className,r=void 0===a?"":a,o=e.value,i=void 0===o?null:o,l=e.tooltip,c=e.onChange,u="btn "+r+" "+(n?"active":""),d=s.a.createElement("button",{className:u,onClick:function(e){e.stopPropagation(),c&&c(i)}},s.a.createElement("span",null,t));return l?s.a.createElement(p.Tooltip,{content:l,placement:"bottom"},d):d},h=n(1365),f=n(13),g=n.n(f);function v(e){var t=e.active,n=e.count,a=e.proportion,r=e.value,o=Math.round(100*a)+"%",i={width:o},l=g()("logs-stats-row",{"logs-stats-row--active":t});return s.a.createElement("div",{className:l},s.a.createElement("div",{className:"logs-stats-row__label"},s.a.createElement("div",{className:"logs-stats-row__value"},r),s.a.createElement("div",{className:"logs-stats-row__count"},n),s.a.createElement("div",{className:"logs-stats-row__percent"},o)),s.a.createElement("div",{className:"logs-stats-row__bar"},s.a.createElement("div",{className:"logs-stats-row__innerbar",style:i})))}var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.rowCount,r=e.stats,o=e.value,i=e.onClickClose,l=r.slice(0,5),c=l.find(function(e){return e.value===o}),u=r.slice(5),p=!c;p&&(c=u.find(function(e){return e.value===o}),u=u.filter(function(e){return e.value!==o}));var d=u.reduce(function(e,t){return e+t.count},0),m=l.reduce(function(e,t){return e+t.count},0)+d,h=d/m;return s.a.createElement("div",{className:"logs-stats"},s.a.createElement("div",{className:"logs-stats__header"},s.a.createElement("span",{className:"logs-stats__title"},t,": ",m," of ",n," rows have that label"),s.a.createElement("span",{className:"logs-stats__close fa fa-remove",onClick:i})),s.a.createElement("div",{className:"logs-stats__body"},l.map(function(e){return s.a.createElement(v,a.a({key:e.value},e,{active:e.value===o}))}),p&&c&&s.a.createElement(v,a.a({key:c.value},c,{active:!0})),d>0&&s.a.createElement(v,{key:"__OTHERS__",count:d,value:"Other",proportion:h})))},t}(i.PureComponent),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={stats:null,showStats:!1},t.onClickClose=function(){t.setState({showStats:!1})},t.onClickLabel=function(){var e=t.props,n=e.onClickLabel,a=e.label,r=e.value;n&&n(a,r)},t.onClickStats=function(){t.setState(function(e){if(e.showStats)return{showStats:!1,stats:null};var n=t.props.getRows();return{showStats:!0,stats:Object(c.f)(n,t.props.label)}})},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.getRows,n=e.label,a=e.plain,r=e.value,o=this.state,i=o.showStats,l=o.stats,c=n+": "+r;return s.a.createElement("span",{className:"logs-label"},s.a.createElement("span",{className:"logs-label__value",title:c},r),!a&&s.a.createElement("span",{title:"Filter for label",onClick:this.onClickLabel,className:"logs-label__icon fa fa-search-plus"}),!a&&t&&s.a.createElement("span",{onClick:this.onClickStats,className:"logs-label__icon fa fa-signal"}),i&&s.a.createElement("span",{className:"logs-label__stats"},s.a.createElement(b,{stats:l,rowCount:t().length,label:n,value:r,onClickClose:this.onClickClose})))},t}(i.PureComponent),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.getRows,n=e.labels,a=e.onClickLabel,r=e.plain;return Object.keys(n).map(function(e){return s.a.createElement(y,{key:e,getRows:t,label:e,value:n[e],plain:r,onClickLabel:a})})},t}(i.PureComponent),w=n(250),C=n.n(w),x=n(603),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={fieldCount:0,fieldLabel:null,fieldStats:null,fieldValue:null,parsed:!1,parser:void 0,parsedFieldHighlights:[],showFieldStats:!1},t.onClickClose=function(){t.setState({showFieldStats:!1})},t.onClickHighlight=function(e){var n=t.props.getRows,a=t.state.parser,r=n(),o=a.getLabelFromField(e),i=a.getValueFromField(e),s=a.buildMatcher(o),l=Object(c.e)(r,s),u=l.reduce(function(e,t){return e+t.count},0);t.setState({fieldCount:u,fieldLabel:o,fieldStats:l,fieldValue:i,showFieldStats:!0})},t.onMouseOverMessage=function(){t.mouseMessageTimer=setTimeout(t.parseMessage,500)},t.onMouseOutMessage=function(){clearTimeout(t.mouseMessageTimer),t.setState({parsed:!1})},t.parseMessage=function(){if(!t.state.parsed){var e=t.props.row,n=Object(c.i)(e.entry);if(n){var a=n.getFields(t.props.row.entry);t.setState({parsedFieldHighlights:a,parsed:!0,parser:n})}}},t}return a.c(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this.mouseMessageTimer)},t.prototype.render=function(){var e=this.props,t=e.getRows,n=e.highlighterExpressions,a=e.onClickLabel,r=e.row,i=e.showDuplicates,l=e.showLabels,c=e.showLocalTime,u=e.showUtc,p=this.state,d=p.fieldCount,m=p.fieldLabel,h=p.fieldStats,f=p.fieldValue,v=p.parsed,y=p.parsedFieldHighlights,w=p.showFieldStats,S=n&&!o.a.isEqual(n,r.searchWords),k=S?n:r.searchWords,N=k&&k.length>0,T=g()("logs-row__match-highlight",{"logs-row__match-highlight--preview":S});return s.a.createElement("div",{className:"logs-row"},i&&s.a.createElement("div",{className:"logs-row__duplicates"},r.duplicates>0?r.duplicates+1+"x":null),s.a.createElement("div",{className:r.logLevel?"logs-row__level logs-row__level--"+r.logLevel:""}),u&&s.a.createElement("div",{className:"logs-row__time",title:"Local: "+r.timeLocal+" ("+r.timeFromNow+")"},r.timestamp),c&&s.a.createElement("div",{className:"logs-row__time",title:r.timestamp+" ("+r.timeFromNow+")"},r.timeLocal),l&&s.a.createElement("div",{className:"logs-row__labels"},s.a.createElement(E,{getRows:t,labels:r.uniqueLabels,onClickLabel:a})),s.a.createElement("div",{className:"logs-row__message",onMouseEnter:this.onMouseOverMessage,onMouseLeave:this.onMouseOutMessage},v&&s.a.createElement(C.a,{autoEscape:!0,highlightTag:function(e){return function(t){return s.a.createElement("span",{className:t.className,style:t.style},t.children,s.a.createElement("span",{className:"logs-row__field-highlight--icon fa fa-signal",onClick:function(){return e(t.children)}}))}}(this.onClickHighlight),textToHighlight:r.entry,searchWords:y,highlightClassName:"logs-row__field-highlight"}),!v&&N&&s.a.createElement(C.a,{textToHighlight:r.entry,searchWords:k,findChunks:x.a,highlightClassName:T}),!v&&!N&&r.entry,w&&s.a.createElement("div",{className:"logs-row__stats"},s.a.createElement(b,{stats:h,label:m,value:f,onClickClose:this.onClickClose,rowCount:d}))))},t}(i.PureComponent),k={series:{stack:!0,bars:{show:!0,lineWidth:5}},yaxis:{tickDecimals:0}};var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dedup:c.c.none,deferLogs:!0,hiddenLogLevels:new Set,renderAll:!1,showLabels:null,showLocalTime:!0,showUtc:!1},t.onChangeDedup=function(e){t.setState(function(t){return t.dedup===e?{dedup:c.c.none}:{dedup:e}})},t.onChangeLabels=function(e){var n=e.target;t.setState({showLabels:n.checked})},t.onChangeLocalTime=function(e){var n=e.target;t.setState({showLocalTime:n.checked})},t.onChangeUtc=function(e){var n=e.target;t.setState({showUtc:n.checked})},t.onToggleLogLevel=function(e,n){var a=new Set(Array.from(n).map(function(e){return c.a[e]}));t.setState({hiddenLogLevels:a})},t.onClickScan=function(e){e.preventDefault(),t.props.onStartScanning()},t.onClickStopScan=function(e){e.preventDefault(),t.props.onStopScanning()},t}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this;if(this.state.deferLogs){var t=this.props.data,n=t&&t.rows?t.rows.length:0,a=n<=200;this.deferLogsTimer=setTimeout(function(){return e.setState({deferLogs:!1,renderAll:a})},n)}},t.prototype.componentDidUpdate=function(e,t){var n=this;!t.deferLogs||this.state.deferLogs||this.state.renderAll||(this.renderAllTimer=setTimeout(function(){return n.setState({renderAll:!0})},2e3))},t.prototype.componentWillUnmount=function(){clearTimeout(this.deferLogsTimer),clearTimeout(this.renderAllTimer)},t.prototype.render=function(){var e=this,t=this.props,n=t.data,a=t.exploreId,r=t.highlighterExpressions,i=t.loading,p=void 0!==i&&i,f=t.onClickLabel,g=t.range,v=t.scanning,b=t.scanRange,y=this.state,w=y.dedup,C=y.deferLogs,x=y.hiddenLogLevels,N=y.renderAll,T=y.showLocalTime,L=y.showUtc,I=this.state.showLabels,_=n&&n.rows&&n.rows.length>0,O=w!==c.c.none,R=Object(c.h)(n,x),Q=Object(c.g)(R,w),D=Q.rows.reduce(function(e,t){return e+t.duplicates},0),P=n.meta.slice();w!==c.c.none&&P.push({label:"Dedup count",value:D,kind:c.d.Number});var j=Q.rows,q=j.slice(0,100),M=j.slice(100);null===I&&(I=!_||n.rows.some(function(e){return o.a.size(e.uniqueLabels)>0}));var F=b?"Scanning "+l.b(b):"Scanning...",z=function(){return j};return s.a.createElement("div",{className:"logs-panel"},s.a.createElement("div",{className:"logs-panel-graph"},s.a.createElement(h.a,{data:n.series,height:"100px",range:g,id:"explore-logs-graph-"+a,onChangeTime:this.props.onChangeTime,onToggleSeries:this.onToggleLogLevel,userOptions:k})),s.a.createElement("div",{className:"logs-panel-options"},s.a.createElement("div",{className:"logs-panel-controls"},s.a.createElement(u.a,{label:"Timestamp",checked:L,onChange:this.onChangeUtc,transparent:!0}),s.a.createElement(u.a,{label:"Local time",checked:T,onChange:this.onChangeLocalTime,transparent:!0}),s.a.createElement(u.a,{label:"Labels",checked:I,onChange:this.onChangeLabels,transparent:!0}),s.a.createElement(d,{label:"Dedup",transparent:!0},Object.keys(c.c).map(function(t,n){return s.a.createElement(m,{key:n,value:t,onChange:e.onChangeDedup,selected:w===t,tooltip:c.b[t]},t)})))),_&&P&&s.a.createElement("div",{className:"logs-panel-meta"},P.map(function(e){return s.a.createElement("div",{className:"logs-panel-meta__item",key:e.label},s.a.createElement("span",{className:"logs-panel-meta__label"},e.label,":"),s.a.createElement("span",{className:"logs-panel-meta__value"},function(e,t){return t===c.d.LabelsMap?s.a.createElement("span",{className:"logs-meta-item__labels"},s.a.createElement(E,{labels:e,plain:!0})):e}(e.value,e.kind)))})),s.a.createElement("div",{className:"logs-rows"},_&&!C&&q.map(function(e){return s.a.createElement(S,{key:e.key+e.duplicates,getRows:z,highlighterExpressions:r,row:e,showDuplicates:O,showLabels:I,showLocalTime:T,showUtc:L,onClickLabel:f})}),_&&!C&&N&&M.map(function(e){return s.a.createElement(S,{key:e.key+e.duplicates,getRows:z,row:e,showDuplicates:O,showLabels:I,showLocalTime:T,showUtc:L,onClickLabel:f})}),_&&C&&s.a.createElement("span",null,"Rendering ",Q.rows.length," rows...")),!p&&!_&&!v&&s.a.createElement("div",{className:"logs-panel-nodata"},"No logs found.",s.a.createElement("a",{className:"link",onClick:this.onClickScan},"Scan for older logs")),v&&s.a.createElement("div",{className:"logs-panel-nodata"},s.a.createElement("span",null,F),s.a.createElement("a",{className:"link",onClick:this.onClickStopScan},"Stop scan")))},t}(i.PureComponent);t.a=N},1378:function(e,t,n){"use strict";var a=n(2),r=n(0),o=n.n(r),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={elapsed:0},t.tick=function(){var e=Date.now()-t.offset;t.setState({elapsed:e})},t}return a.c(t,e),t.prototype.start=function(){this.offset=Date.now(),this.timer=window.setInterval(this.tick,150)},t.prototype.componentWillReceiveProps=function(e){e.time?clearInterval(this.timer):this.props.time&&this.start()},t.prototype.componentDidMount=function(){this.start()},t.prototype.componentWillUnmount=function(){clearInterval(this.timer)},t.prototype.render=function(){var e=this.state.elapsed,t=this.props,n=t.className,a=(t.time||e)/1e3;return o.a.createElement("span",{className:"elapsed-time "+n},a.toFixed(1),"s")},t}(r.PureComponent);var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.transaction,t=e.done?"query-transaction":"query-transaction query-transaction--loading";return o.a.createElement("div",{className:t},o.a.createElement("div",{className:"query-transaction__type"},e.resultType,":"),o.a.createElement("div",{className:"query-transaction__duration"},e.done?function(e){return(e/1e3).toFixed(1)+"s"}(e.latency):o.a.createElement(i,null)))},t}(r.PureComponent),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.transactions;return o.a.createElement("div",{className:"query-transactions"},e.map(function(e,t){return o.a.createElement(s,{key:e.rowIndex+":"+e.resultType,transaction:e})}))},t}(r.PureComponent);t.a=l},1379:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"Wrapper",function(){return h});var a=n(2),r=n(0),o=n.n(r),i=n(37),s=n(26),l=n(47),c=n(182),u=n(76),p=n(1362),d=n(1364),m=n(1366),h=function(e){function t(t){var n=e.call(this,t)||this;n.urlStates={};var a=t.urlStates,r=a.left,o=a.right;return t.urlStates.left&&(n.urlStates.leftState=Object(u.l)(r)),t.urlStates.right&&(n.urlStates.rightState=Object(u.l)(o),n.initialSplit=!0),n}return a.c(t,e),t.prototype.componentDidMount=function(){this.initialSplit&&this.props.initializeExploreSplit()},t.prototype.render=function(){var e=this.props.split,t=this.urlStates,n=t.leftState,a=t.rightState;return o.a.createElement("div",{className:"explore-wrapper"},o.a.createElement(d.a,null,o.a.createElement(m.a,{exploreId:c.a.left,urlState:n})),e&&o.a.createElement(d.a,null,o.a.createElement(m.a,{exploreId:c.a.right,urlState:a})))},t}(r.Component),f={initializeExploreSplit:p.i,updateLocation:l.c};t.default=Object(i.hot)(e)(Object(s.b)(function(e){var t=e.location.query;return{split:e.explore.split,urlStates:t}},f)(h))}.call(this,n(71)(e))}}]);
//# sourceMappingURL=explore.7c6aca289434de1f5df9.js.map