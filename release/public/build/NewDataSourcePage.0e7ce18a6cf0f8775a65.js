"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4253],{"./public/app/features/datasources/NewDataSourcePage.tsx":(e,a,s)=>{s.r(a),s.d(a,{default:()=>P,getNavModel:()=>C});var n=s("./node_modules/react/index.js"),r=s("./node_modules/react-redux/es/index.js"),t=s("./packages/grafana-ui/src/index.ts"),i=s("./packages/grafana-e2e-selectors/src/index.ts"),o=s("./public/app/core/components/Page/Page.tsx"),c=s("./public/app/features/datasources/state/actions.ts"),l=s("./public/app/features/datasources/state/selectors.ts"),d=s("./public/app/features/datasources/state/reducers.ts"),u=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),g=s("./node_modules/react/jsx-runtime.js");const p=({logoUrl:e,title:a,description:s,labels:n,actions:r,onClick:t,ariaLabel:i,className:o})=>{const c=(0,u.cx)("add-data-source-item",o);return(0,g.jsxs)("div",{className:c,onClick:t,"aria-label":i,children:[e&&(0,g.jsx)("img",{className:"add-data-source-item-logo",src:e}),(0,g.jsxs)("div",{className:"add-data-source-item-text-wrapper",children:[(0,g.jsx)("span",{className:"add-data-source-item-text",children:a}),s&&(0,g.jsx)("span",{className:"add-data-source-item-desc",children:s}),n&&(0,g.jsx)("div",{className:"add-data-source-item-badge",children:n})]}),r&&(0,g.jsx)("div",{className:"add-data-source-item-actions",children:r})]})};var m,h,x,f,j=s("./public/app/features/plugins/PluginsErrorsInfo.tsx");function S(e,a,s){return a in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s,e}const b={addDataSource:c.J_,loadDataSourcePlugins:c.Kj,setDataSourceTypeSearchQuery:d.Ht},y=(0,r.connect)((function(e){return{navModel:C(),plugins:(0,l.xo)(e.dataSources),searchQuery:e.dataSources.dataSourceTypeSearchQuery,categories:e.dataSources.categories,isLoading:e.dataSources.isLoadingDataSources}}),b);class k extends n.PureComponent{constructor(...e){super(...e),S(this,"onDataSourceTypeClicked",(e=>{this.props.addDataSource(e)})),S(this,"onSearchQueryChange",(e=>{this.props.setDataSourceTypeSearchQuery(e)})),S(this,"onLearnMoreClick",(e=>{e.stopPropagation()}))}componentDidMount(){this.props.loadDataSourcePlugins()}renderPlugins(e){return e&&e.length?(0,g.jsx)(t.List,{items:e,getItemKey:e=>e.id.toString(),renderItem:e=>(0,g.jsx)(v,{plugin:e,onClick:()=>this.onDataSourceTypeClicked(e),onLearnMoreClick:this.onLearnMoreClick})}):null}renderCategories(){const{categories:e}=this.props;return(0,g.jsxs)(g.Fragment,{children:[e.map((e=>(0,g.jsxs)("div",{className:"add-data-source-category",children:[(0,g.jsx)("div",{className:"add-data-source-category__header",children:e.title}),this.renderPlugins(e.plugins)]},e.id))),m||(m=(0,g.jsx)("div",{className:"add-data-source-more",children:(0,g.jsx)(t.LinkButton,{variant:"secondary",href:"https://grafana.com/plugins?type=datasource&utm_source=grafana_add_ds",target:"_blank",rel:"noopener",children:"Find more data source plugins on grafana.com"})}))]})}render(){const{navModel:e,isLoading:a,searchQuery:s,plugins:n}=this.props;return(0,g.jsx)(o.Z,{navModel:e,children:(0,g.jsxs)(o.Z.Contents,{isLoading:a,children:[(0,g.jsxs)("div",{className:"page-action-bar",children:[(0,g.jsx)(t.FilterInput,{value:s,onChange:this.onSearchQueryChange,placeholder:"Filter by name or type"}),h||(h=(0,g.jsx)("div",{className:"page-action-bar__spacer"})),x||(x=(0,g.jsx)(t.LinkButton,{href:"datasources",fill:"outline",variant:"secondary",icon:"arrow-left",children:"Cancel"}))]}),!s&&(f||(f=(0,g.jsx)(j.t,{}))),(0,g.jsxs)("div",{children:[s&&this.renderPlugins(n),!s&&this.renderCategories()]})]})})}}const v=e=>{var a,s;const{plugin:n,onLearnMoreClick:r}=e,o="phantom"===n.module,c=o||n.unlicensed?()=>{}:e.onClick,l=(null===(a=n.info)||void 0===a||null===(s=a.links)||void 0===s?void 0:s.length)>0?n.info.links[0]:null;return(0,g.jsx)(p,{title:n.name,description:n.info.description,ariaLabel:i.wl.pages.AddDataSource.dataSourcePlugins(n.name),logoUrl:n.info.logos.small,actions:(0,g.jsxs)(g.Fragment,{children:[l&&(0,g.jsx)(t.LinkButton,{variant:"secondary",href:`${l.url}?utm_source=grafana_add_ds`,target:"_blank",rel:"noopener",onClick:r,icon:"external-link-alt",children:l.name}),!o&&(0,g.jsx)(t.Button,{disabled:n.unlicensed,children:"Select"})]}),labels:!o&&(0,g.jsx)(t.PluginSignatureBadge,{status:n.signature}),className:o?"add-data-source-item--phantom":"",onClick:c,"aria-label":i.wl.pages.AddDataSource.dataSourcePlugins(n.name)})};function C(){const e={icon:"database",id:"datasource-new",text:"Add data source",href:"datasources/new",subTitle:"Choose a data source type"};return{main:e,node:e}}const P=y(k)},"./public/app/features/plugins/PluginsErrorsInfo.tsx":(e,a,s)=>{s.d(a,{t:()=>h});s("./node_modules/react/index.js");var n,r=s("./packages/grafana-e2e-selectors/src/index.ts"),t=s("./packages/grafana-ui/src/index.ts"),i=s("./public/app/features/plugins/state/selectors.ts"),o=s("./public/app/features/plugins/state/actions.ts"),c=s("./node_modules/react-use/lib/useAsync.js"),l=s("./node_modules/react-redux/es/index.js"),d=s("./packages/grafana-data/src/index.ts"),u=s("./node_modules/@emotion/css/dist/emotion-css.esm.js"),g=s("./node_modules/react/jsx-runtime.js");const p=e=>({errors:(0,i.kk)(e.plugins)}),m={loadPluginsErrors:o.ne},h=((0,l.connect)(p,m),(0,l.connect)(p,m)((({loadPluginsErrors:e,errors:a,children:s})=>{const i=(0,t.useTheme)(),{loading:l}=(0,c.Z)((async()=>{await e()}),[o.bl]);return l||0===a.length?null:(0,g.jsx)(t.InfoBox,{"aria-label":r.wl.pages.PluginsList.signatureErrorNotice,severity:"warning",urlTitle:"Read more about plugin signing",url:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/",children:(0,g.jsxs)("div",{children:[n||(n=(0,g.jsx)("p",{children:"Unsigned plugins were found during plugin initialization. Grafana Labs cannot guarantee the integrity of these plugins. We recommend only using signed plugins."})),"The following plugins are disabled and not shown in the list below:",(0,g.jsx)(t.List,{items:a,className:u.css`
            list-style-type: circle;
          `,renderItem:e=>(0,g.jsx)("div",{className:u.css`
                margin-top: ${i.spacing.sm};
              `,children:(0,g.jsxs)(t.HorizontalGroup,{spacing:"sm",justify:"flex-start",align:"center",children:[(0,g.jsx)("strong",{children:e.pluginId}),(0,g.jsx)(t.PluginSignatureBadge,{status:x(e.errorCode),className:u.css`
                    margin-top: 0;
                  `})]})})}),s]})})})));function x(e){switch(e){case d.PluginErrorCode.invalidSignature:return d.PluginSignatureStatus.invalid;case d.PluginErrorCode.missingSignature:return d.PluginSignatureStatus.missing;case d.PluginErrorCode.modifiedSignature:return d.PluginSignatureStatus.modified;default:return d.PluginSignatureStatus.missing}}},"./public/app/features/plugins/state/selectors.ts":(e,a,s)=>{s.d(a,{uM:()=>n,kk:()=>r,wA:()=>t});const n=e=>{const a=new RegExp(e.searchQuery,"i");return e.plugins.filter((e=>a.test(e.name)||a.test(e.info.author.name)||a.test(e.type)||a.test(e.info.description)))},r=e=>e.errors,t=e=>e.searchQuery}}]);
//# sourceMappingURL=NewDataSourcePage.0e7ce18a6cf0f8775a65.js.map