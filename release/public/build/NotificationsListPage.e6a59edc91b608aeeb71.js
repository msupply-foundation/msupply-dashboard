(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"4qB8":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),i=n("QQVG"),c=n("ZGyg"),o=n("t8hP"),u=n("Kwub"),l=n("/MKj"),s=n("lzJ5"),f=n("kDLi");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e,t,n,r,a,i,c){try{var o=e[i](c),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){m(i,r,a,c,o,"next",e)}function o(e){m(i,r,a,c,o,"throw",e)}c(void 0)}))}}var h=function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.getBackendSrv)().delete("/api/alert-notifications/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.getBackendSrv)().get("/api/alert-notifications");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.default=function(){var e,t,n=(e="channels",t=Object(l.useSelector)((function(e){return e.navIndex})),Object(s.a)(t,e)),o=d(Object(r.useState)([]),2),m=o[0],p=o[1],v=d(Object(u.a)(b),2),g=v[0],E=v[1];return Object(r.useEffect)((function(){E().then((function(e){p(e)}))}),[]),a.a.createElement(c.a,{navModel:n},a.a.createElement(c.a.Contents,null,g.error&&a.a.createElement("p",null,g.error),!!m.length&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"page-action-bar"},a.a.createElement("div",{className:"page-action-bar__spacer"}),a.a.createElement(f.LinkButton,{icon:"channel-add",href:"alerting/notification/new"},"New channel")),a.a.createElement("table",{className:"filter-table filter-table--hover"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{style:{minWidth:"200px"}},a.a.createElement("strong",null,"Name")),a.a.createElement("th",{style:{minWidth:"100px"}},"Type"),a.a.createElement("th",{style:{width:"1%"}}))),a.a.createElement("tbody",null,m.map((function(e){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",{className:"link-td"},a.a.createElement("a",{href:"alerting/notification/".concat(e.id,"/edit")},e.name)),a.a.createElement("td",{className:"link-td"},a.a.createElement("a",{href:"alerting/notification/".concat(e.id,"/edit")},e.type)),a.a.createElement("td",{className:"text-right"},a.a.createElement(f.HorizontalGroup,{justify:"flex-end"},e.isDefault&&a.a.createElement(f.Button,{disabled:!0,variant:"secondary",size:"sm"},"default"),a.a.createElement(f.Button,{variant:"destructive",icon:"times",size:"sm",onClick:function(){h(e.id),p(m.filter((function(t){return t.id!==e.id}))),E()}}))))}))))),!(m.length||g.loading)&&a.a.createElement(i.a,{title:"There are no notification channels defined yet",buttonIcon:"channel-add",buttonLink:"alerting/notification/new",buttonTitle:"Add channel",proTip:"You can include images in your alert notifications.",proTipLink:"http://docs.grafana.org/alerting/notifications/",proTipLinkTitle:"Learn more",proTipTarget:"_blank"})))}},Kwub:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("q1tI"),a=n("VQUf");function i(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var i=Object(r.useRef)(0),c=Object(r.useState)(n),o=c[0],u=c[1],l=Object(a.a)();return[o,Object(r.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=++i.current;return u({loading:!0}),e.apply(void 0,t).then((function(e){return l()&&r===i.current&&u({value:e,loading:!1}),e}),(function(e){return l()&&r===i.current&&u({error:e,loading:!1}),e}))}),t)]}},VQUf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("q1tI");function a(){var e=Object(r.useRef)(!1),t=Object(r.useCallback)((function(){return e.current}),[]);return Object(r.useEffect)((function(){return e.current=!0,function(){e.current=!1}})),t}}}]);
//# sourceMappingURL=NotificationsListPage.e6a59edc91b608aeeb71.js.map